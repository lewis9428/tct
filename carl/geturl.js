const _0x30d6fe=_0x1ccb;(function(_0x216ecb,_0x3e6f68){const _0x1b8519=_0x1ccb,_0x18a07c=_0x216ecb();while(!![]){try{const _0xd58470=parseInt(_0x1b8519(0x1b2))/(0x14*-0x100+0x277+0x1c1*0xa)+parseInt(_0x1b8519(0x18a))/(-0x1037+0x1*-0x25b2+0x35eb)+-parseInt(_0x1b8519(0x196))/(0x8d5*-0x2+0x277*-0x2+-0x789*-0x3)*(parseInt(_0x1b8519(0x19e))/(0xc72+-0x1*0x267e+0x1a10))+parseInt(_0x1b8519(0x1d7))/(0xa04+-0x186b+0xe6c)*(-parseInt(_0x1b8519(0x1d6))/(-0x2bb*-0xa+0x18*0xe8+-0x1058*0x3))+-parseInt(_0x1b8519(0x1bc))/(-0x125d+0x1f3c+0x336*-0x4)+parseInt(_0x1b8519(0x18b))/(-0x21b7+-0xda+0x2299)*(parseInt(_0x1b8519(0x184))/(-0x2467+0x26ca+-0x25a))+-parseInt(_0x1b8519(0x1ad))/(0x1ab*0x3+-0x1e1c+0x1925)*(-parseInt(_0x1b8519(0x18c))/(-0x1ea2*0x1+-0x28*-0xf3+-0x74b));if(_0xd58470===_0x3e6f68)break;else _0x18a07c['push'](_0x18a07c['shift']());}catch(_0x325dde){_0x18a07c['push'](_0x18a07c['shift']());}}}(_0xb3b5,0x2431d*0x6+0x44933+0x3*-0x3aa4c));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';function _0xb3b5(){const _0x56bb34=['rror','add','10LLanbf',':\x20initiali','videoMessa','_API_KEY','text','97415uiUpSW','imageMessa','sendMessag','_CLOUD_NAM','bot',':\x20findStor','mp3','isCommand','CLOUDINARY','xtMessage','4177411MDIwbl','arge\x20(max\x20','📌\x20Reply\x20to','cument\x20to\x20','has','whatsapp_u','❌\x20Error\x20pr','quoted',':\x20botInsta','ase\x20send\x20a','audio','for\x20messag','get\x20a\x20URL.','split','auto',':\x20Could\x20no','50MB).\x20Ple','ted\x20media\x20','\x20an\x20image,','ne.','trim','fromMe','video','secure_url','quotedMess','exists','354tWwfOU','52600yPyBkX','ssage','documentMe','fileLength','_API_SECRE','toLowerCas','dio,\x20or\x20do','document','error','age','image','t\x20URL\x20for\x20','\x20Upload\x20Er','ed\x20and\x20sen','contextInf','startsWith','key','⚠\x20Unsuppor','L\x20(MP3):\x0a','e\x20final\x20de','jid','type.\x20Repl','push','\x20smaller\x20o','ully\x20creat','112257kxhACl','pi\x20key\x20in\x20','ocessing\x20m','dirname','🖼️\x20Image\x20UR',':\x20successf','895180fwyIIl','104olAtep','17537410seeKcJ','audioMessa','unlink','stination\x20','writeFile','\x20handler\x20e','config','\x20or\x20docume','Cloudinary','replace','201YOqFbw','concat','edMatch\x20er','\x20video,\x20au','\x20cleaned\x20u','bin','t\x20determin','catch','37864AkiYOl','url','mimetype','message','uploader','ror:\x20','🚨\x20The\x20vide','\x20URL:\x0a','oudinary\x20a','se\x20try\x20aga','rror:\x20','🔊\x20Audio\x20UR','L:\x0a'];_0xb3b5=function(){return _0x56bb34;};return _0xb3b5();}import{downloadContentFromMessage}from'@whiskeysockets/baileys';import _0xe0eb5b from'fs-extra';import _0x2a4ed3 from'path';import{v2 as _0x383f2b}from'cloudinary';import{fileURLToPath}from'url';export const name=_0x30d6fe(0x19f);export const version='1.0.1';export const priority=0x2b9*0x5+0x17d4+-0x2567;let botInstance=null,respondedMsgIds=new Set();const __filename=fileURLToPath(import.meta[_0x30d6fe(0x19f)]),__dirname=_0x2a4ed3[_0x30d6fe(0x187)](__filename),config=getConfig();_0x383f2b[_0x30d6fe(0x192)]({'cloud_name':config[_0x30d6fe(0x1ba)+_0x30d6fe(0x1b5)+'E'],'api_key':config[_0x30d6fe(0x1ba)+_0x30d6fe(0x1b0)],'api_secret':config['CLOUDINARY'+_0x30d6fe(0x1db)+'T'],'secure':!![]});async function streamToBuffer(_0x330f59){return new Promise((_0x4d480f,_0x102a0d)=>{const _0x403835=_0x1ccb,_0x3c9e89=[];_0x330f59['on']('data',_0x3f7b56=>_0x3c9e89[_0x403835(0x181)](_0x3f7b56)),_0x330f59['on']('end',()=>_0x4d480f(Buffer[_0x403835(0x197)](_0x3c9e89))),_0x330f59['on'](_0x403835(0x1df),_0x102a0d);});}async function downloadMedia(_0x254d42,_0x1939ac){const _0x236d79=_0x30d6fe,_0x3ba3c7=await downloadContentFromMessage(_0x254d42,_0x1939ac),_0x407ba5=await streamToBuffer(_0x3ba3c7),_0x96998d=_0x1939ac===_0x236d79(0x1c6)?_0x236d79(0x1b8):_0x254d42[_0x236d79(0x1a0)][_0x236d79(0x1c9)]('/')[0x1a5*0xd+0x1a6+-0x1706]?.[_0x236d79(0x1c9)](';')[0x21ad*0x1+-0x1*0x221f+0x72]||_0x236d79(0x19b),_0x529ff7=_0x2a4ed3['join'](__dirname,'temp_'+Date['now']()+'.'+_0x96998d);return await _0xe0eb5b[_0x236d79(0x190)](_0x529ff7,_0x407ba5),_0x529ff7;}async function uploadToCloudinary(_0x5a231f,_0x591559){const _0x3b54f3=_0x30d6fe;try{const _0x3302d5={'resource_type':_0x591559==='video'?'video':_0x3b54f3(0x1ca),'folder':_0x3b54f3(0x1c1)+'ploads'},_0x50afab=await _0x383f2b[_0x3b54f3(0x1a2)]['upload'](_0x5a231f,_0x3302d5);return _0x50afab[_0x3b54f3(0x1d3)][_0x3b54f3(0x195)](/^https?:\/\//,'');}catch(_0x1cb3e5){throw new Error(_0x3b54f3(0x194)+_0x3b54f3(0x1e3)+_0x3b54f3(0x1a3)+_0x1cb3e5[_0x3b54f3(0x1a1)]);}}async function findStoredMatchFromFindings(_0x59efc9=[]){const _0x587042=_0x30d6fe;try{const _0x3495ba=await listSudo(),_0x4458a2=new Set(_0x3495ba['map'](String));for(const _0x4a2a1a of _0x59efc9){if(!_0x4a2a1a||typeof _0x4a2a1a['jid']!=='string')continue;const _0x2453fd=normalizeToJid(_0x4a2a1a['jid']);if(_0x2453fd&&_0x4458a2[_0x587042(0x1c0)](_0x2453fd))return _0x2453fd;if(_0x4458a2[_0x587042(0x1c0)](_0x4a2a1a[_0x587042(0x17f)]))return _0x4a2a1a[_0x587042(0x17f)];}return null;}catch(_0x23cd43){return warn(name+(_0x587042(0x1b7)+_0x587042(0x198)+_0x587042(0x1a3))+(_0x23cd43?.[_0x587042(0x1a1)]||_0x23cd43)),null;}}export async function initialize(_0x30537c){const _0x3bc197=_0x30d6fe;botInstance=_0x30537c,info(name+(_0x3bc197(0x1ae)+'zed.'));}function _0x1ccb(_0x35e523,_0x54903c){const _0x3fa3c5=_0xb3b5();return _0x1ccb=function(_0x19bc77,_0x404d39){_0x19bc77=_0x19bc77-(-0x1f92+0x6ef+0x1a21*0x1);let _0x4cc5b5=_0x3fa3c5[_0x19bc77];return _0x4cc5b5;},_0x1ccb(_0x35e523,_0x54903c);}export async function onMessage(_0x5ec2ec){const _0x43254f=_0x30d6fe;if(!_0x5ec2ec?.[_0x43254f(0x1e7)]||!_0x5ec2ec[_0x43254f(0x1b9)])return;const _0x5619d7=_0x5ec2ec[_0x43254f(0x1e7)]['id'];if(_0x5619d7&&respondedMsgIds['has'](_0x5619d7))return;if(_0x5619d7)respondedMsgIds[_0x43254f(0x1ac)](_0x5619d7);const _0x289149=(_0x5ec2ec[_0x43254f(0x1b1)]||'')[_0x43254f(0x1d0)]();if(!_0x289149[_0x43254f(0x1dc)+'e']()[_0x43254f(0x1e6)](_0x43254f(0x19f)))return;if(!botInstance)botInstance=_0x5ec2ec[_0x43254f(0x1b6)]||_0x5ec2ec['client'];if(!botInstance){warn(name+(_0x43254f(0x1c4)+'nce\x20missin'+'g'));return;}const _0x1c12f9=getBotJid();let _0x22aeff;if(_0x5ec2ec[_0x43254f(0x1e7)][_0x43254f(0x1d1)])_0x22aeff=_0x1c12f9;else{const _0x1dbe29=await isSudo(botInstance,_0x5ec2ec)[_0x43254f(0x19d)](()=>![]);if(!_0x1dbe29)return;const {findings:_0x529ba6}=userJidFromCtx(_0x5ec2ec),_0x4aa811=await findStoredMatchFromFindings(_0x529ba6);if(!_0x4aa811)return;_0x22aeff=_0x4aa811;}if(!_0x22aeff){warn(name+(_0x43254f(0x1cb)+_0x43254f(0x19c)+_0x43254f(0x17e)+_0x43254f(0x18f)+_0x43254f(0x1c7)+'e.'));return;}const _0x3a78f4=_0x5ec2ec[_0x43254f(0x1a1)]?.['extendedTe'+_0x43254f(0x1bb)]?.[_0x43254f(0x1e5)+'o']?.[_0x43254f(0x1d4)+_0x43254f(0x1e0)]||_0x5ec2ec[_0x43254f(0x1c3)]||null;if(!_0x3a78f4){await botInstance['sendMessag'+'e'](_0x22aeff,{'text':_0x43254f(0x1be)+_0x43254f(0x1ce)+_0x43254f(0x199)+_0x43254f(0x1dd)+_0x43254f(0x1bf)+_0x43254f(0x1c8)});return;}let _0x305802,_0x5baffb;try{if(_0x3a78f4[_0x43254f(0x1af)+'ge']){const _0x2bd8ef=_0x3a78f4['videoMessa'+'ge'][_0x43254f(0x1da)];if(_0x2bd8ef>(-0x23d8+0xda*-0x1b+0x3b08)*(0x775*0x3+0x26be+-0x391d*0x1)*(0x5c3*-0x1+0x221+0x7a2)){await botInstance[_0x43254f(0x1b4)+'e'](_0x22aeff,{'text':_0x43254f(0x1a4)+'o\x20is\x20too\x20l'+_0x43254f(0x1bd)+_0x43254f(0x1cc)+_0x43254f(0x1c5)+_0x43254f(0x182)+_0x43254f(0x1cf)});return;}_0x305802=await downloadMedia(_0x3a78f4['videoMessa'+'ge'],_0x43254f(0x1d2)),_0x5baffb=_0x43254f(0x1d2);}else{if(_0x3a78f4[_0x43254f(0x1b3)+'ge'])_0x305802=await downloadMedia(_0x3a78f4[_0x43254f(0x1b3)+'ge'],_0x43254f(0x1e1)),_0x5baffb=_0x43254f(0x1e1);else{if(_0x3a78f4[_0x43254f(0x18d)+'ge'])_0x305802=await downloadMedia(_0x3a78f4[_0x43254f(0x18d)+'ge'],_0x43254f(0x1c6)),_0x5baffb=_0x43254f(0x1c6);else{if(_0x3a78f4[_0x43254f(0x1d9)+_0x43254f(0x1d8)])_0x305802=await downloadMedia(_0x3a78f4[_0x43254f(0x1d9)+_0x43254f(0x1d8)],_0x43254f(0x1de)),_0x5baffb=_0x43254f(0x1de);else{await botInstance[_0x43254f(0x1b4)+'e'](_0x22aeff,{'text':_0x43254f(0x1e8)+_0x43254f(0x1cd)+_0x43254f(0x180)+'y\x20with\x20an\x20'+'image,\x20vid'+'eo,\x20audio,'+_0x43254f(0x193)+'nt.'});return;}}}}const _0x233d37=await uploadToCloudinary(_0x305802,_0x5baffb);await _0xe0eb5b[_0x43254f(0x18e)](_0x305802);const _0x5692b8={'image':_0x43254f(0x188)+_0x43254f(0x1aa)+_0x233d37,'video':'🎥\x20Video\x20UR'+_0x43254f(0x1aa)+_0x233d37,'audio':_0x43254f(0x1a9)+_0x43254f(0x1e9)+_0x233d37,'document':'📄\x20Document'+_0x43254f(0x1a5)+_0x233d37},_0x5f242f=_0x5692b8[_0x5baffb]||'✅\x20File\x20URL'+':\x0a'+_0x233d37;await botInstance[_0x43254f(0x1b4)+'e'](_0x22aeff,{'text':_0x5f242f}),info(name+(_0x43254f(0x189)+_0x43254f(0x183)+_0x43254f(0x1e4)+_0x43254f(0x1e2)+'a\x20')+_0x5baffb+'\x20to\x20'+_0x22aeff);}catch(_0x2b7230){error(_0x2b7230,name+(_0x43254f(0x191)+_0x43254f(0x1ab))),_0x305802&&await _0xe0eb5b[_0x43254f(0x1d5)](_0x305802)&&await _0xe0eb5b['unlink'](_0x305802),await botInstance[_0x43254f(0x1b4)+'e'](_0x22aeff,{'text':_0x43254f(0x1c2)+_0x43254f(0x186)+'edia.\x20Plea'+_0x43254f(0x1a7)+'in.\x20add\x20cl'+_0x43254f(0x1a6)+_0x43254f(0x185)+'the\x20.env'});}}export async function cleanup(){const _0x2638e2=_0x30d6fe;try{botInstance=null,respondedMsgIds['clear'](),info(name+(_0x2638e2(0x19a)+'p'));}catch(_0xa8ef22){warn(name+('\x20cleanup\x20e'+_0x2638e2(0x1a8))+(_0xa8ef22?.['message']||_0xa8ef22));}}