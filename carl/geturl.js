const _0x386287=_0x14a7;function _0x14a7(_0x4cf81b,_0xc252a7){const _0x435eb5=_0x48a6();return _0x14a7=function(_0x22f67b,_0x5ba215){_0x22f67b=_0x22f67b-(-0x2a*0x19+-0x2285+-0x1*-0x281f);let _0x1552b3=_0x435eb5[_0x22f67b];return _0x1552b3;},_0x14a7(_0x4cf81b,_0xc252a7);}(function(_0x361eea,_0x2b59c7){const _0x3535c1=_0x14a7,_0x53910d=_0x361eea();while(!![]){try{const _0x392947=parseInt(_0x3535c1(0x1a7))/(0x7*0x293+-0x4*-0x57b+-0x27f0)*(parseInt(_0x3535c1(0x194))/(-0x217e+0x133a+0xe46))+parseInt(_0x3535c1(0x1bc))/(0x3*0x395+0x10a9+-0x1b65)*(parseInt(_0x3535c1(0x1d0))/(-0xafb+0x1f42+-0x1443))+-parseInt(_0x3535c1(0x1e2))/(-0x8a5*-0x3+0x225+-0x1c0f)+-parseInt(_0x3535c1(0x1ca))/(-0x259*-0x9+-0x26d5+0x11ba)*(-parseInt(_0x3535c1(0x1be))/(0x1aae+0xfb5*-0x1+0x3a6*-0x3))+-parseInt(_0x3535c1(0x1d3))/(-0x26*-0x22+-0x1195+-0xc91*-0x1)+parseInt(_0x3535c1(0x19f))/(0xf54+-0x45d+-0xaee)*(parseInt(_0x3535c1(0x1e6))/(-0xb21+0x2*0x284+0x1*0x623))+-parseInt(_0x3535c1(0x1a0))/(0x14b3+0x2*0xa7d+0x1*-0x29a2);if(_0x392947===_0x2b59c7)break;else _0x53910d['push'](_0x53910d['shift']());}catch(_0x5a2821){_0x53910d['push'](_0x53910d['shift']());}}}(_0x48a6,-0x28ea*-0x44+0xf3794+-0x11e893));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{downloadContentFromMessage}from'@whiskeysockets/baileys';import _0x170262 from'fs-extra';import _0x31ad6e from'path';import{v2 as _0x1485b7}from'cloudinary';import{fileURLToPath}from'url';export const name=_0x386287(0x1ad);export const version=_0x386287(0x183);export const priority=-0xa6d+0x2401+0x3a6*-0x7;let botInstance=null,respondedMsgIds=new Set();function _0x48a6(){const _0x2116a6=['in.\x20add\x20cl','\x20video,\x20au','\x20cleaned\x20u','se\x20try\x20aga','unlink','fromMe','1063801nXzgVv','video','eo,\x20audio,','contextInf','toLowerCas','secure_url','url','audio','fileLength','ne.','nt.','join','rror:\x20','\x20Upload\x20Er','\x20URL:\x0a','get\x20a\x20URL.','arge\x20(max\x20','ocessing\x20m','edia.\x20Plea','isCommand','dirname','159tnYRiO','üìÑ\x20Document','35SjVPTU',':\x20Could\x20no','ror:\x20','Cloudinary','t\x20URL\x20for\x20','mimetype','\x20handler\x20e',':\x20botInsta','exists','videoMessa','jid','temp_','641694EozBge','startsWith','rror','concat','üîä\x20Audio\x20UR','y\x20with\x20an\x20','61724unmAmD','text','now','6593760pUMrEc','ploads','quoted','L:\x0a','ully\x20creat','\x20an\x20image,','auto','\x20smaller\x20o','the\x20.env','ase\x20send\x20a','50MB).\x20Ple','map','bin','sendMessag','message','2735565spNRsV','L\x20(MP3):\x0a','oudinary\x20a','type.\x20Repl','7639850ukHrPi','push',':\x20findStor','config','1.0.1','nce\x20missin','error','documentMe','has','upload',':\x20successf','add',':\x20initiali','üö®\x20The\x20vide','quotedMess','key','string','for\x20messag','extendedTe','imageMessa','üñºÔ∏è\x20Image\x20UR','2ZhSjjW','trim','clear','xtMessage','_API_KEY','split','whatsapp_u','stination\x20','ted\x20media\x20','üìå\x20Reply\x20to','CLOUDINARY','9ybnWUP','14005112fbpdGk'];_0x48a6=function(){return _0x2116a6;};return _0x48a6();}const __filename=fileURLToPath(import.meta[_0x386287(0x1ad)]),__dirname=_0x31ad6e[_0x386287(0x1bb)](__filename),config=getConfig();_0x1485b7[_0x386287(0x182)]({'cloud_name':config[_0x386287(0x19e)+'_CLOUD_NAM'+'E'],'api_key':config[_0x386287(0x19e)+_0x386287(0x198)],'api_secret':config[_0x386287(0x19e)+'_API_SECRE'+'T'],'secure':!![]});async function streamToBuffer(_0x58e9cd){return new Promise((_0x506344,_0x13f5b7)=>{const _0x30c103=_0x14a7,_0x498be3=[];_0x58e9cd['on']('data',_0x313246=>_0x498be3[_0x30c103(0x180)](_0x313246)),_0x58e9cd['on']('end',()=>_0x506344(Buffer[_0x30c103(0x1cd)](_0x498be3))),_0x58e9cd['on'](_0x30c103(0x185),_0x13f5b7);});}async function downloadMedia(_0x1e3cdc,_0x4e464d){const _0x942f9b=_0x386287,_0x3ad7a5=await downloadContentFromMessage(_0x1e3cdc,_0x4e464d),_0x4edbb0=await streamToBuffer(_0x3ad7a5),_0x6d93aa=_0x4e464d===_0x942f9b(0x1ae)?'mp3':_0x1e3cdc[_0x942f9b(0x1c3)][_0x942f9b(0x199)]('/')[0x13d2+-0x1b78+0x7a7*0x1]?.['split'](';')[-0x1358*-0x2+0xa84+-0x2f*0x10c]||_0x942f9b(0x1df),_0x210a14=_0x31ad6e[_0x942f9b(0x1b2)](__dirname,_0x942f9b(0x1c9)+Date[_0x942f9b(0x1d2)]()+'.'+_0x6d93aa);return await _0x170262['writeFile'](_0x210a14,_0x4edbb0),_0x210a14;}async function uploadToCloudinary(_0x23750c,_0x4954df){const _0x2f21e3=_0x386287;try{const _0x432e4e={'resource_type':_0x4954df===_0x2f21e3(0x1a8)?'video':_0x2f21e3(0x1d9),'folder':_0x2f21e3(0x19a)+_0x2f21e3(0x1d4)},_0x4db95c=await _0x1485b7['uploader'][_0x2f21e3(0x188)](_0x23750c,_0x432e4e);return _0x4db95c[_0x2f21e3(0x1ac)]['replace'](/^https?:\/\//,'');}catch(_0x2b3e6d){throw new Error(_0x2f21e3(0x1c1)+_0x2f21e3(0x1b4)+_0x2f21e3(0x1c0)+_0x2b3e6d[_0x2f21e3(0x1e1)]);}}async function findStoredMatchFromFindings(_0x414f34=[]){const _0x3a489c=_0x386287;try{const _0x51ee83=await listSudo(),_0x4c5ec3=new Set(_0x51ee83[_0x3a489c(0x1de)](String));for(const _0x445369 of _0x414f34){if(!_0x445369||typeof _0x445369['jid']!==_0x3a489c(0x18f))continue;const _0x3d41b6=normalizeToJid(_0x445369[_0x3a489c(0x1c8)]);if(_0x3d41b6&&_0x4c5ec3[_0x3a489c(0x187)](_0x3d41b6))return _0x3d41b6;if(_0x4c5ec3['has'](_0x445369[_0x3a489c(0x1c8)]))return _0x445369['jid'];}return null;}catch(_0x44123d){return warn(name+(_0x3a489c(0x181)+'edMatch\x20er'+'ror:\x20')+(_0x44123d?.['message']||_0x44123d)),null;}}export async function initialize(_0x38997d){const _0x130a93=_0x386287;botInstance=_0x38997d,info(name+(_0x130a93(0x18b)+'zed.'));}export async function onMessage(_0x30ad30){const _0x17ce39=_0x386287;if(!_0x30ad30?.[_0x17ce39(0x18e)]||!_0x30ad30[_0x17ce39(0x1ba)])return;const _0x319940=_0x30ad30['key']['id'];if(_0x319940&&respondedMsgIds[_0x17ce39(0x187)](_0x319940))return;if(_0x319940)respondedMsgIds[_0x17ce39(0x18a)](_0x319940);const _0x2d9b76=(_0x30ad30[_0x17ce39(0x1d1)]||'')[_0x17ce39(0x195)]();if(!_0x2d9b76[_0x17ce39(0x1ab)+'e']()[_0x17ce39(0x1cb)]('url'))return;if(!botInstance)botInstance=_0x30ad30['bot']||_0x30ad30['client'];if(!botInstance){warn(name+(_0x17ce39(0x1c5)+_0x17ce39(0x184)+'g'));return;}const _0x2242d4=getBotJid();let _0xc5f4b2;if(_0x30ad30[_0x17ce39(0x18e)][_0x17ce39(0x1a6)])_0xc5f4b2=_0x2242d4;else{const _0xa13926=await isSudo(botInstance,_0x30ad30)['catch'](()=>![]);if(!_0xa13926)return;const {findings:_0x49127a}=userJidFromCtx(_0x30ad30),_0xdabc27=await findStoredMatchFromFindings(_0x49127a);if(!_0xdabc27)return;_0xc5f4b2=_0xdabc27;}if(!_0xc5f4b2){warn(name+(_0x17ce39(0x1bf)+'t\x20determin'+'e\x20final\x20de'+_0x17ce39(0x19b)+_0x17ce39(0x190)+'e.'));return;}const _0x1f8e73=_0x30ad30[_0x17ce39(0x1e1)]?.[_0x17ce39(0x191)+_0x17ce39(0x197)]?.[_0x17ce39(0x1aa)+'o']?.[_0x17ce39(0x18d)+'age']||_0x30ad30[_0x17ce39(0x1d5)]||null;if(!_0x1f8e73){await botInstance['sendMessag'+'e'](_0xc5f4b2,{'text':_0x17ce39(0x19d)+_0x17ce39(0x1d8)+_0x17ce39(0x1a2)+'dio,\x20or\x20do'+'cument\x20to\x20'+_0x17ce39(0x1b6)});return;}let _0xc0bd34,_0x2609ec;try{if(_0x1f8e73['videoMessa'+'ge']){const _0x43eead=_0x1f8e73[_0x17ce39(0x1c7)+'ge'][_0x17ce39(0x1af)];if(_0x43eead>(-0x105c+0x18be*-0x1+0x294c)*(0x3*0xade+0x4bb*-0x1+-0x17df)*(-0x1204+0x5b2+0x1052)){await botInstance[_0x17ce39(0x1e0)+'e'](_0xc5f4b2,{'text':_0x17ce39(0x18c)+'o\x20is\x20too\x20l'+_0x17ce39(0x1b7)+_0x17ce39(0x1dd)+_0x17ce39(0x1dc)+_0x17ce39(0x1da)+_0x17ce39(0x1b0)});return;}_0xc0bd34=await downloadMedia(_0x1f8e73[_0x17ce39(0x1c7)+'ge'],_0x17ce39(0x1a8)),_0x2609ec=_0x17ce39(0x1a8);}else{if(_0x1f8e73[_0x17ce39(0x192)+'ge'])_0xc0bd34=await downloadMedia(_0x1f8e73['imageMessa'+'ge'],'image'),_0x2609ec='image';else{if(_0x1f8e73['audioMessa'+'ge'])_0xc0bd34=await downloadMedia(_0x1f8e73['audioMessa'+'ge'],_0x17ce39(0x1ae)),_0x2609ec=_0x17ce39(0x1ae);else{if(_0x1f8e73[_0x17ce39(0x186)+'ssage'])_0xc0bd34=await downloadMedia(_0x1f8e73[_0x17ce39(0x186)+'ssage'],'document'),_0x2609ec='document';else{await botInstance[_0x17ce39(0x1e0)+'e'](_0xc5f4b2,{'text':'‚ö†\x20Unsuppor'+_0x17ce39(0x19c)+_0x17ce39(0x1e5)+_0x17ce39(0x1cf)+'image,\x20vid'+_0x17ce39(0x1a9)+'\x20or\x20docume'+_0x17ce39(0x1b1)});return;}}}}const _0x5681dd=await uploadToCloudinary(_0xc0bd34,_0x2609ec);await _0x170262['unlink'](_0xc0bd34);const _0x25f116={'image':_0x17ce39(0x193)+_0x17ce39(0x1d6)+_0x5681dd,'video':'üé•\x20Video\x20UR'+_0x17ce39(0x1d6)+_0x5681dd,'audio':_0x17ce39(0x1ce)+_0x17ce39(0x1e3)+_0x5681dd,'document':_0x17ce39(0x1bd)+_0x17ce39(0x1b5)+_0x5681dd},_0x523ba7=_0x25f116[_0x2609ec]||'‚úÖ\x20File\x20URL'+':\x0a'+_0x5681dd;await botInstance[_0x17ce39(0x1e0)+'e'](_0xc5f4b2,{'text':_0x523ba7}),info(name+(_0x17ce39(0x189)+_0x17ce39(0x1d7)+'ed\x20and\x20sen'+_0x17ce39(0x1c2)+'a\x20')+_0x2609ec+'\x20to\x20'+_0xc5f4b2);}catch(_0x4e24f3){error(_0x4e24f3,name+(_0x17ce39(0x1c4)+_0x17ce39(0x1cc))),_0xc0bd34&&await _0x170262[_0x17ce39(0x1c6)](_0xc0bd34)&&await _0x170262[_0x17ce39(0x1a5)](_0xc0bd34),await botInstance[_0x17ce39(0x1e0)+'e'](_0xc5f4b2,{'text':'‚ùå\x20Error\x20pr'+_0x17ce39(0x1b8)+_0x17ce39(0x1b9)+_0x17ce39(0x1a4)+_0x17ce39(0x1a1)+_0x17ce39(0x1e4)+'pi\x20key\x20in\x20'+_0x17ce39(0x1db)});}}export async function cleanup(){const _0xadf255=_0x386287;try{botInstance=null,respondedMsgIds[_0xadf255(0x196)](),info(name+(_0xadf255(0x1a3)+'p'));}catch(_0x3c1e1f){warn(name+('\x20cleanup\x20e'+_0xadf255(0x1b3))+(_0x3c1e1f?.[_0xadf255(0x1e1)]||_0x3c1e1f));}}