const _0x1061b5=_0x3ba0;(function(_0x49b7f5,_0x42f19e){const _0x3386f6=_0x3ba0,_0x4502b6=_0x49b7f5();while(!![]){try{const _0x33e532=parseInt(_0x3386f6(0x27b))/(-0x19a1+0x2*0x33d+0x1328)*(parseInt(_0x3386f6(0x225))/(-0x75*-0xa+-0x1f*-0x7b+-0x1375))+parseInt(_0x3386f6(0x2ae))/(0x1ee*0x3+-0x1*0x25c0+0x1ff9)+-parseInt(_0x3386f6(0x2b5))/(-0x1d45+0x26e*0xc+-0x3*-0xb)+parseInt(_0x3386f6(0x2b9))/(0xbc4+0x147c+-0x203b)*(-parseInt(_0x3386f6(0x26f))/(-0x146*0x2+-0x1549*0x1+0x17db))+-parseInt(_0x3386f6(0x254))/(0x3*-0xa12+0x1f99+0x57*-0x4)*(-parseInt(_0x3386f6(0x28a))/(0x151a+0x138f+-0x28a1))+parseInt(_0x3386f6(0x2cd))/(-0xd93+-0x1*-0x1303+-0x1*0x567)+-parseInt(_0x3386f6(0x2c5))/(0x65*-0x4f+0x1233*0x1+0x22b*0x6);if(_0x33e532===_0x42f19e)break;else _0x4502b6['push'](_0x4502b6['shift']());}catch(_0x13079c){_0x4502b6['push'](_0x4502b6['shift']());}}}(_0xa831,0x4806f+0x21c98+-0x5*-0x18a57));import _0x2c740c from'fs';import _0x1f6f26 from'path';import _0x44601b from'os';import{promisify}from'util';import{spawn}from'child_process';import{pipeline as _0xc14f31}from'stream';import{downloadContentFromMessage,jidNormalizedUser}from'@whiskeysockets/baileys';import{info,warn,error}from'../utils/logger.js';function _0xa831(){const _0x185a37=['ffmpeg\x20exi','ALLOW_GROU','[cc]\x20inter','type','parse\x20targ','tance','\x20generated','textInfo','o\x20convert\x20','server-con','caption','documentMe','ed\x20up','audio_inte','@s.whatsap','.png','ilable','2036338072','delete','us`','Refusing\x20t','message.','>`\x20(no\x20rep','contextInf','urrently\x20e','[cc]\x20hotRe','gt(a,1),-2','[cc]\x20strea','mkdtemp','s\x20only\x20(e.','o\x20a\x20video\x20','mimetype','t\x20availabl','onal\x20digit','<unknown>','\x22.\x20Provide','string','\x20to\x20','map','fig\x20restri','node','LOW_GROUP_','pipe','ty\x20or\x20inac','shape.\x20Ple','1.8.1-fixe','endsWith','video\x20(it\x20',')\x20or\x20a\x20val','get','video\x20note','rror:\x20','\x20video-not','\x20<number\x20o','tion.)','`\x20or\x20`cc\x201','\x20botJid=','message','COMMANDS=f','\x20a\x20sticker','\x20sent\x20to\x20','function','startsWith','-loop','webm','\x20failed:\x20','video\x20with','clear','P_COMMANDS','key','stickerMes','aac','12874glNhgd','stderr','ailed:\x20',':(oh-ih)/2','ssage','ideo\x20messa','eo\x20or\x20is\x20a','deliver\x20to','scale=\x27if(','d\x20media\x20is','close','split','ith\x20captio','\x20it\x20into\x20a','cessible).','pop','ge.','iaToFile\x20f','Conversion','toString','messageCon','-preset','jpegThumbn','out_','47XXXXXXXX','-shortest','cc.initial','y\x20use\x20cc\x20(','ssage.','\x20*videos*\x20','file.\x20cc\x20c','-c:v','in\x20check\x20f','ge\x20(or\x20a\x20v','promises','fileName','in_','\x20to\x20a\x20vide','-profile:v','video_note','\x20present\x20a','ply\x20to\x20a\x20v','baseline','mQuotedMed','[cc]\x20dupli','Only\x20group','\x20caption\x20`','27181uFZQea','in.','e\x20media\x20is','has','\x20command\x20i','catch','conversati','veryfast','a\x20video-no','ize\x20requir','text','64k','\x20which\x20can','c\x20converts',',-2)\x27:\x27if(','eStream','may\x20be\x20emp','\x20into\x20a\x20vi','.mp4','from','join',',setsar=1','deo-note.','gt(a,1),','ffmpeg','\x20reply\x20to\x20','loadConfig','6OkeyvX','unlink','\x20admins\x20ma','[cc]\x20sent\x20','convert\x20it','es\x20bot\x20ins','set\x20ALLOW_','Usage:\x20rep','3.0','-level','Failed\x20to\x20','length','218fUEbaI','mp4','\x20handler\x20e','[cc]\x20initi','download\x20t','o\x20message\x20','ot\x20itself.','k:s=','-b:a','[cc]\x20handl','gnored\x20(AL','\x20Ensure\x20th','libx264','it\x20into\x20a\x20','cted).','2624vhtqss','ly).\x20Examp','video','imageMessa','not\x20be\x20con','The\x20replie','trim','-vf','rmediate_','thumb.jpg','remoteJid',':(ow-iw)/2','a\x20video\x20me','t\x20the\x20vide','[cc]\x20clean','\x20not\x20a\x20vid','now','-crf','skipped\x20fo','ail','to\x20','OR\x20send\x20a\x20','quotedMess','ly\x20to\x20a\x20vi','values','quoted','wn)','audioMessa','o\x20send\x20the','le:\x20`cc\x2025','GROUP_COMM','g.\x202547...','sock','nal\x20error:','replace','[cc]\x20faile','3184473MKBmHk','shConfig\x20e','to\x20a\x20video','tJid\x20unkno','video-note','age','verted\x20to\x20','129644zIjgXo','n\x20`cc\x20<num','et\x20\x22','ease\x20reply','6359865tjKzBB','te.\x20Please','xtMessage','Please\x20rep','video/mp4','sage','ber>`)\x20to\x20','lavfi','[cc]\x20isadm','verts\x20*vid','e\x20with\x20`cc','p.net','26271580WGoFyA','ted\x20media\x20','[cc]\x20sendA','ANDS=true\x20','includes','g:\x20ALLOW_G','e\x20to\x20the\x20b','ge.\x20cc\x20con','10181979iGcVJO','er\x20error:\x20','\x20internati','he\x20quoted\x20','color=blac','@g.us','-c:a','extendedTe','alized\x20(bo','-notes.\x20Pl','pi\x20not\x20ava','participan','sendMessag','Converted\x20','deo\x20messag','set','tmpdir',')\x27,pad=','sendApi\x20no','2467155@g.','.\x20(You\x20sen','o\x20with\x20cap','cate\x20send\x20','videoMessa','createWrit'];_0xa831=function(){return _0x185a37;};return _0xa831();}import{getConfig,hotReloadConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';const pipeline=promisify(_0xc14f31),mkdtemp=_0x2c740c[_0x1061b5(0x247)][_0x1061b5(0x1f9)],writeFileAsync=_0x2c740c[_0x1061b5(0x247)]['writeFile'],unlink=_0x2c740c[_0x1061b5(0x247)][_0x1061b5(0x270)],rm=_0x2c740c[_0x1061b5(0x247)]['rm'],DEFAULT_SIZE=-0x25*0x86+0x1*-0x16f+0x174d;export const name='cc';export const version=_0x1061b5(0x20a)+'d';export const priority=0x1d*0xc2+0x14f0+-0x2a7c*0x1;export const configKeys=['ALLOW_GROU'+'P_COMMANDS'];export const commands=['cc'];let botRef=null,sendApi=null,ALLOW_GROUP_COMMANDS=![];const processedSendKeys=new Map(),PROCESSED_SEND_TTL_MS=(-0x2*0xb22+-0xc72+-0x1*-0x22c5)*(0x1*0x24c6+-0x4d*0x54+-0x3cd*0x2);function markSendProcessed(_0x1e194f){const _0xe11494=_0x1061b5;if(!_0x1e194f)return;if(processedSendKeys[_0xe11494(0x257)](_0x1e194f))try{clearTimeout(processedSendKeys[_0xe11494(0x20e)](_0x1e194f));}catch(_0x344436){}const _0x1986bb=setTimeout(()=>processedSendKeys[_0xe11494(0x1ef)](_0x1e194f),PROCESSED_SEND_TTL_MS);processedSendKeys[_0xe11494(0x1d3)](_0x1e194f,_0x1986bb);}function isSendProcessed(_0x5499b2){const _0x45a795=_0x1061b5;return _0x5499b2&&processedSendKeys[_0x45a795(0x257)](_0x5499b2);}function clearAllProcessedSends(){const _0x4b468a=_0x1061b5;for(const _0x4ba9a3 of processedSendKeys[_0x4b468a(0x2a2)]())try{clearTimeout(_0x4ba9a3);}catch(_0x2472e8){}processedSendKeys[_0x4b468a(0x220)]();}function setupSendApi(){const _0x53341c=_0x1061b5;if(!botRef)return;if(typeof botRef[_0x53341c(0x1d0)+'e']==='function')sendApi=async(_0x3fdf5f,_0x29748e,_0x4c159d={})=>await botRef[_0x53341c(0x1d0)+'e'](_0x3fdf5f,_0x29748e,_0x4c159d);else botRef[_0x53341c(0x2aa)]&&typeof botRef[_0x53341c(0x2aa)][_0x53341c(0x1d0)+'e']===_0x53341c(0x21a)?sendApi=async(_0x1e85f6,_0x5ac618,_0x6af72={})=>await botRef['sock'][_0x53341c(0x1d0)+'e'](_0x1e85f6,_0x5ac618,_0x6af72):sendApi=null;}async function safeSend(_0x4de2a3,_0x589c60,_0x4eae7b={}){const _0x24f6bc=_0x1061b5;if(!sendApi){warn(_0x24f6bc(0x2c7)+_0x24f6bc(0x1ce)+_0x24f6bc(0x1ed));throw new Error(_0x24f6bc(0x1d6)+_0x24f6bc(0x1fd)+'e');}return await sendApi(_0x4de2a3,_0x589c60,_0x4eae7b);}function refreshConfig(){const _0x434859=_0x1061b5;try{const _0x1c79e3=typeof getConfig===_0x434859(0x21a)?getConfig()||{}:{};ALLOW_GROUP_COMMANDS=!!_0x1c79e3[_0x434859(0x1de)+_0x434859(0x221)],info('[cc]\x20confi'+_0x434859(0x2ca)+'ROUP_COMMA'+'NDS='+ALLOW_GROUP_COMMANDS);}catch(_0xa4ee59){warn('[cc]\x20refre'+_0x434859(0x2af)+'rror:\x20'+(_0xa4ee59?.[_0x434859(0x216)]||_0xa4ee59));}}try{typeof hotReloadConfig===_0x1061b5(0x21a)&&hotReloadConfig(()=>{const _0x5ed957=_0x1061b5;try{refreshConfig();}catch(_0x263017){warn(_0x5ed957(0x1f6)+_0x5ed957(0x26e)+_0x5ed957(0x27d)+_0x5ed957(0x210)+(_0x263017?.[_0x5ed957(0x216)]||_0x263017));}});}catch(_0x54efde){}refreshConfig();function getQuotedWrap(_0x5d7a98){const _0x4ebf80=_0x1061b5;if(!_0x5d7a98||!_0x5d7a98[_0x4ebf80(0x216)])return null;const _0x4fa404=_0x5d7a98['message']?.[_0x4ebf80(0x1cb)+'xtMessage']?.[_0x4ebf80(0x1f4)+'o'];if(_0x4fa404&&_0x4fa404[_0x4ebf80(0x2a0)+_0x4ebf80(0x2b3)])return{'quoted':_0x4fa404[_0x4ebf80(0x2a0)+_0x4ebf80(0x2b3)],'quotedKey':_0x4fa404};for(const _0x335425 of Object['keys'](_0x5d7a98[_0x4ebf80(0x216)]||{})){const _0x16e857=_0x5d7a98[_0x4ebf80(0x216)][_0x335425];if(_0x16e857&&_0x16e857['contextInf'+'o']&&_0x16e857[_0x4ebf80(0x1f4)+'o'][_0x4ebf80(0x2a0)+_0x4ebf80(0x2b3)])return{'quoted':_0x16e857[_0x4ebf80(0x1f4)+'o'][_0x4ebf80(0x2a0)+_0x4ebf80(0x2b3)],'quotedKey':_0x16e857['contextInf'+'o']};}const _0x18fbe7=_0x5d7a98[_0x4ebf80(0x216)]?.[_0x4ebf80(0x1f4)+'o']?.[_0x4ebf80(0x2a0)+_0x4ebf80(0x2b3)]||_0x5d7a98[_0x4ebf80(0x216)]?.[_0x4ebf80(0x239)+_0x4ebf80(0x1e4)]?.['quotedMess'+'age'],_0x3b7989=_0x5d7a98[_0x4ebf80(0x216)]?.[_0x4ebf80(0x1f4)+'o']?.[_0x4ebf80(0x1cf)+'t']||_0x5d7a98[_0x4ebf80(0x216)]?.[_0x4ebf80(0x239)+_0x4ebf80(0x1e4)]?.[_0x4ebf80(0x1cf)+'t']||null;if(_0x18fbe7)return{'quoted':_0x18fbe7,'quotedKey':{'participant':_0x3b7989}};return null;}function isVideoNode(_0x2d697d){const _0x5139b1=_0x1061b5;if(!_0x2d697d)return![];if(_0x2d697d[_0x5139b1(0x1db)+'ge'])return!![];if(_0x2d697d[_0x5139b1(0x216)]&&_0x2d697d['message'][_0x5139b1(0x1db)+'ge'])return!![];if(_0x2d697d[_0x5139b1(0x1e8)+_0x5139b1(0x229)]&&typeof _0x2d697d[_0x5139b1(0x1e8)+'ssage']['mimetype']==='string'&&_0x2d697d[_0x5139b1(0x1e8)+'ssage'][_0x5139b1(0x1fc)][_0x5139b1(0x21b)](_0x5139b1(0x28c)))return!![];return![];}async function streamQuotedMediaToFile(_0x6bdbe8,_0x26439e){const _0x56ed1b=_0x1061b5;try{const _0x51ef4a=[{'node':_0x6bdbe8[_0x56ed1b(0x1db)+'ge'],'type':_0x56ed1b(0x28c)},{'node':_0x6bdbe8[_0x56ed1b(0x1e8)+_0x56ed1b(0x229)]&&String(_0x6bdbe8[_0x56ed1b(0x1e8)+_0x56ed1b(0x229)][_0x56ed1b(0x1fc)]||'')['startsWith'](_0x56ed1b(0x28c))?_0x6bdbe8['documentMe'+_0x56ed1b(0x229)]:null,'type':'video'},{'node':_0x6bdbe8[_0x56ed1b(0x216)]?.[_0x56ed1b(0x1db)+'ge'],'type':_0x56ed1b(0x28c)},{'node':_0x6bdbe8[_0x56ed1b(0x216)]?.[_0x56ed1b(0x1e8)+_0x56ed1b(0x229)]&&String(_0x6bdbe8[_0x56ed1b(0x216)][_0x56ed1b(0x1e8)+_0x56ed1b(0x229)][_0x56ed1b(0x1fc)]||'')[_0x56ed1b(0x21b)](_0x56ed1b(0x28c))?_0x6bdbe8[_0x56ed1b(0x216)][_0x56ed1b(0x1e8)+_0x56ed1b(0x229)]:null,'type':_0x56ed1b(0x28c)}];let _0x21cdc2=null,_0x2a0255=null;for(const _0x3473f8 of _0x51ef4a){if(_0x3473f8[_0x56ed1b(0x205)]){_0x21cdc2=_0x3473f8[_0x56ed1b(0x205)],_0x2a0255=_0x3473f8[_0x56ed1b(0x1e0)];break;}}if(!_0x21cdc2||!_0x2a0255)return null;let _0x4a4540=_0x56ed1b(0x27c);if(_0x2a0255===_0x56ed1b(0x28c))_0x4a4540=_0x56ed1b(0x27c);if(_0x21cdc2[_0x56ed1b(0x248)]){const _0x55643f=String(_0x21cdc2[_0x56ed1b(0x248)])[_0x56ed1b(0x230)]('.')[_0x56ed1b(0x234)]();if(_0x55643f&&_0x55643f[_0x56ed1b(0x27a)]<=-0xef5+-0x43*-0x22+0x617*0x1)_0x4a4540=_0x55643f;}else{if(_0x21cdc2[_0x56ed1b(0x1fc)]){if(_0x21cdc2[_0x56ed1b(0x1fc)][_0x56ed1b(0x2c9)](_0x56ed1b(0x27c)))_0x4a4540=_0x56ed1b(0x27c);else{if(_0x21cdc2[_0x56ed1b(0x1fc)][_0x56ed1b(0x2c9)](_0x56ed1b(0x21d)))_0x4a4540=_0x56ed1b(0x21d);}}}const _0x5848c3=_0x1f6f26[_0x56ed1b(0x268)](_0x26439e,_0x56ed1b(0x249)+Date[_0x56ed1b(0x29a)]()+'.'+_0x4a4540),_0x1e87e8=await downloadContentFromMessage(_0x21cdc2,_0x2a0255);if(!_0x1e87e8)return null;const _0x2fc8ea=_0x2c740c[_0x56ed1b(0x1dc)+_0x56ed1b(0x263)](_0x5848c3);return await pipeline(_0x1e87e8,_0x2fc8ea),{'path':_0x5848c3,'type':_0x2a0255,'contentNode':_0x21cdc2};}catch(_0x535932){return warn(_0x56ed1b(0x1f8)+_0x56ed1b(0x250)+_0x56ed1b(0x236)+_0x56ed1b(0x227)+(_0x535932?.[_0x56ed1b(0x216)]||_0x535932)),null;}}function spawnFFmpeg(_0xb06e3e,_0x17b990){return new Promise((_0x1eaaf5,_0x12ba5f)=>{const _0x2c5085=_0x3ba0,_0x1fa7fa=spawn(_0x2c5085(0x26c),_0xb06e3e,{'stdio':['ignore',_0x2c5085(0x207),'pipe']});let _0x2e7e32='';_0x1fa7fa[_0x2c5085(0x226)]['on']('data',_0x375eeb=>{const _0x3bb5c2=_0x2c5085;_0x2e7e32+=_0x375eeb[_0x3bb5c2(0x238)]();if(_0x17b990)_0x17b990(_0x375eeb);}),_0x1fa7fa['on'](_0x2c5085(0x22f),_0x3d5813=>{const _0xa95b3a=_0x2c5085;if(_0x3d5813===-0xad6+-0x615+0x10eb)_0x1eaaf5(_0x2e7e32);else _0x12ba5f(new Error(_0xa95b3a(0x1dd)+'t\x20code\x20'+_0x3d5813+'\x0a'+_0x2e7e32));}),_0x1fa7fa['on']('error',_0xe1a960=>_0x12ba5f(_0xe1a960));});}async function transcodeToVideoNote(_0x1cf433,_0xcb6fe2,_0x3e46d8=DEFAULT_SIZE){const _0x102af6=_0x1061b5,_0x841f21=['-y','-i',_0x1cf433,'-t','60',_0x102af6(0x291),_0x102af6(0x22d)+_0x102af6(0x26b)+_0x3e46d8+(_0x102af6(0x262)+_0x102af6(0x1f7)+',')+_0x3e46d8+_0x102af6(0x1d5)+_0x3e46d8+':'+_0x3e46d8+(_0x102af6(0x295)+_0x102af6(0x228)+_0x102af6(0x269)),'-r','30',_0x102af6(0x244),_0x102af6(0x287),_0x102af6(0x24b),_0x102af6(0x24f),_0x102af6(0x278),_0x102af6(0x277),_0x102af6(0x23a),_0x102af6(0x25b),_0x102af6(0x29b),'28','-c:a',_0x102af6(0x224),_0x102af6(0x283),_0x102af6(0x25f),_0xcb6fe2];return await spawnFFmpeg(_0x841f21),_0xcb6fe2;}function _0x3ba0(_0x1bd97e,_0x39e784){const _0xf65d55=_0xa831();return _0x3ba0=function(_0x180c4f,_0x2defb9){_0x180c4f=_0x180c4f-(0xa27+0x1*0x6e5+-0xe6*0x11);let _0x45bdc9=_0xf65d55[_0x180c4f];return _0x45bdc9;},_0x3ba0(_0x1bd97e,_0x39e784);}async function audioToVideoNote(_0x198557,_0x33241c,_0x296b69=null,_0x5e9f4f=DEFAULT_SIZE){const _0x2cfd6b=_0x1061b5,_0x4b9351=_0x1f6f26['dirname'](_0x33241c),_0x4aed22=_0x1f6f26['join'](_0x4b9351,_0x2cfd6b(0x1ea)+_0x2cfd6b(0x292)+Date[_0x2cfd6b(0x29a)]()+_0x2cfd6b(0x266)),_0x5ca81d=_0x296b69||_0x1f6f26[_0x2cfd6b(0x268)](_0x4b9351,'audio_cove'+'r_'+Date[_0x2cfd6b(0x29a)]()+_0x2cfd6b(0x1ec));!_0x296b69&&await spawnFFmpeg(['-y','-f',_0x2cfd6b(0x2c0),'-i',_0x2cfd6b(0x1c8)+_0x2cfd6b(0x282)+_0x5e9f4f+'x'+_0x5e9f4f,_0x5ca81d]);await spawnFFmpeg(['-y',_0x2cfd6b(0x21c),'1','-i',_0x5ca81d,'-i',_0x198557,_0x2cfd6b(0x244),_0x2cfd6b(0x287),'-t','60',_0x2cfd6b(0x1ca),_0x2cfd6b(0x224),_0x2cfd6b(0x283),'64k',_0x2cfd6b(0x23e),_0x2cfd6b(0x23a),_0x2cfd6b(0x25b),_0x4aed22]),await transcodeToVideoNote(_0x4aed22,_0x33241c,_0x5e9f4f);try{await unlink(_0x4aed22);}catch(_0x60f530){}if(!_0x296b69)try{await unlink(_0x5ca81d);}catch(_0x4915fe){}return _0x33241c;}function normalizeTarget(_0x184634){const _0xb81baf=_0x1061b5;if(!_0x184634)return null;let _0x2f2326=String(_0x184634)['trim']();if(_0x2f2326[_0xb81baf(0x2c9)]('@'))try{return jidNormalizedUser(_0x2f2326);}catch(_0x35cebb){return _0x2f2326;}_0x2f2326=_0x2f2326[_0xb81baf(0x2ac)](/[^\d]/g,'');if(!_0x2f2326)return null;if(_0x2f2326['length']<-0x1*0x240c+-0xaa0+0x2eb4||_0x2f2326['length']>0xa8*-0x19+0x1*-0xdd1+0x1e48)return null;return _0x2f2326+(_0xb81baf(0x1eb)+_0xb81baf(0x2c4));}export async function initialize(_0x392f67){const _0x3ad21a=_0x1061b5;if(!_0x392f67)throw new Error(_0x3ad21a(0x23f)+_0x3ad21a(0x25d)+_0x3ad21a(0x274)+_0x3ad21a(0x1e2));botRef=_0x392f67,setupSendApi(),refreshConfig();try{const _0xdf8a06=getBotJid();info(_0x3ad21a(0x27e)+'alized\x20(PM'+'\x20default;\x20'+_0x3ad21a(0x275)+_0x3ad21a(0x2a8)+_0x3ad21a(0x2c8)+'to\x20allow\x20i'+'n\x20groups).'+_0x3ad21a(0x215)+(_0xdf8a06||_0x3ad21a(0x1ff)));}catch(_0x353308){info('[cc]\x20initi'+_0x3ad21a(0x1cc)+_0x3ad21a(0x2b1)+_0x3ad21a(0x2a4));}}export async function onMessage(_0xb4987d){const _0x186205=_0x1061b5;try{if(!_0xb4987d||!_0xb4987d['key']||!_0xb4987d[_0x186205(0x216)])return;const _0x3deba5=typeof _0xb4987d['text']==='string'&&_0xb4987d[_0x186205(0x25e)][_0x186205(0x290)]()?_0xb4987d[_0x186205(0x25e)][_0x186205(0x290)]():_0xb4987d['message']?.[_0x186205(0x25a)+'on']||_0xb4987d['message']?.['extendedTe'+_0x186205(0x2bb)]?.[_0x186205(0x25e)]||_0xb4987d['message']?.['videoMessa'+'ge']?.[_0x186205(0x1e7)]||_0xb4987d[_0x186205(0x216)]?.[_0x186205(0x28d)+'ge']?.['caption']||_0xb4987d[_0x186205(0x216)]?.[_0x186205(0x1e8)+'ssage']?.['caption']||'';if(!_0x3deba5)return;const _0x7f665a=_0x3deba5[_0x186205(0x290)](),_0x22589f=_0x7f665a[_0x186205(0x230)](/\s+/),_0x356c53=_0x22589f[-0x6*-0x63+0xa9+-0x2fb]['toLowerCas'+'e']();if(!(_0x356c53==='cc'||/^\/cc\b/i['test'](_0x7f665a)))return;const _0x3580f2=_0xb4987d['key'][_0x186205(0x294)],_0x3ac257=typeof _0x3580f2===_0x186205(0x201)&&_0x3580f2[_0x186205(0x20b)](_0x186205(0x1c9));if(_0x3ac257){if(!ALLOW_GROUP_COMMANDS){info('[cc]\x20group'+_0x186205(0x258)+_0x186205(0x285)+_0x186205(0x206)+_0x186205(0x217)+'alse)');return;}let _0x3443f9=![];try{_0x3443f9=await isadmin(botRef,_0xb4987d);}catch(_0x25bb74){warn(_0x186205(0x2c1)+_0x186205(0x245)+_0x186205(0x227)+(_0x25bb74?.['message']||_0x25bb74)),_0x3443f9=![];}if(!_0x3443f9){if(sendApi)try{await safeSend(_0x3580f2,{'text':_0x186205(0x252)+_0x186205(0x271)+_0x186205(0x240)+_0x186205(0x1e6)+_0x186205(0x204)+_0x186205(0x289),'quoted':_0xb4987d['key']});}catch(_0x2d2ae1){}return;}}let _0x33b20f=_0x22589f[0x2*-0x83f+0x25d7+-0x1*0x1558]||null;if(!_0x33b20f&&_0x3deba5['includes']('\x0a')){const _0x119093=_0x3deba5[_0x186205(0x230)](/\r?\n/)[_0x186205(0x203)](_0x475dec=>_0x475dec[_0x186205(0x290)]())['filter'](Boolean);if(_0x119093['length']>=-0x4*-0x929+0xe9e+-0x3340)_0x33b20f=_0x119093[-0x1145+0x1e43+-0x13*0xaf][_0x186205(0x230)](/\s+/)[-0x15f6+-0x17*-0x17d+0xc45*-0x1];}let _0x408ecb=getQuotedWrap(_0xb4987d),_0x486263=![];!_0x408ecb&&((_0xb4987d[_0x186205(0x216)]?.[_0x186205(0x1db)+'ge']||_0xb4987d[_0x186205(0x216)]?.['documentMe'+_0x186205(0x229)]&&String(_0xb4987d[_0x186205(0x216)]['documentMe'+_0x186205(0x229)][_0x186205(0x1fc)]||'')[_0x186205(0x21b)](_0x186205(0x28c)))&&(_0x408ecb={'quoted':_0xb4987d[_0x186205(0x216)],'quotedKey':_0xb4987d[_0x186205(0x216)]?.['contextInf'+'o']||{}},_0x486263=!![]));if(!_0x33b20f){const _0x451e1b=_0x3580f2;sendApi&&await safeSend(_0x451e1b,{'text':_0x186205(0x276)+_0x186205(0x2a1)+'deo\x20messag'+_0x186205(0x2c3)+_0x186205(0x212)+'r\x20JID>`\x20â€”\x20'+_0x186205(0x29f)+_0x186205(0x21f)+_0x186205(0x253)+'cc\x20<number'+_0x186205(0x1f3)+_0x186205(0x28b)+_0x186205(0x2a7)+_0x186205(0x23d)+_0x186205(0x214)+_0x186205(0x1ee)+_0x186205(0x1d7)+_0x186205(0x1f0),'quoted':_0xb4987d[_0x186205(0x222)]});return;}if(!_0x408ecb||!_0x408ecb['quoted']){if(sendApi)await safeSend(_0x3580f2,{'text':_0x186205(0x2bc)+_0x186205(0x2a1)+_0x186205(0x1d2)+'e\x20(or\x20send'+'\x20a\x20video\x20w'+_0x186205(0x231)+_0x186205(0x2b6)+_0x186205(0x2bf)+_0x186205(0x273)+_0x186205(0x265)+_0x186205(0x26a),'quoted':_0xb4987d[_0x186205(0x222)]});return;}if(!isVideoNode(_0x408ecb[_0x186205(0x2a3)])){const _0x2698d5=_0x408ecb[_0x186205(0x2a3)];if(_0x2698d5[_0x186205(0x28d)+'ge']){if(sendApi)await safeSend(_0x3580f2,{'text':'The\x20replie'+_0x186205(0x22e)+'\x20an\x20image\x20'+'(photo).\x20c'+_0x186205(0x261)+_0x186205(0x242)+'into\x20video'+_0x186205(0x1cd)+_0x186205(0x2b8)+_0x186205(0x24a)+_0x186205(0x280)+'to\x20convert'+_0x186205(0x232)+'\x20video-not'+'e.','quoted':_0xb4987d['key']})[_0x186205(0x259)](()=>{});}else{if(_0x2698d5[_0x186205(0x223)+_0x186205(0x2be)]){if(sendApi)await safeSend(_0x3580f2,{'text':_0x186205(0x28f)+_0x186205(0x22e)+_0x186205(0x218)+_0x186205(0x260)+_0x186205(0x28e)+_0x186205(0x2b4)+_0x186205(0x25c)+_0x186205(0x2ba)+_0x186205(0x26d)+_0x186205(0x296)+_0x186205(0x241),'quoted':_0xb4987d[_0x186205(0x222)]})[_0x186205(0x259)](()=>{});}else{if(_0x2698d5[_0x186205(0x2a5)+'ge']){if(sendApi)await safeSend(_0x3580f2,{'text':'The\x20replie'+'d\x20media\x20is'+'\x20an\x20audio\x20'+_0x186205(0x243)+_0x186205(0x1f5)+'xpects\x20a\x20v'+_0x186205(0x22a)+_0x186205(0x246)+'ideo\x20docum'+'ent).\x20Plea'+'se\x20reply\x20t'+_0x186205(0x1fb)+_0x186205(0x1f2),'quoted':_0xb4987d[_0x186205(0x222)]})[_0x186205(0x259)](()=>{});}else{if(_0x2698d5['documentMe'+_0x186205(0x229)]&&_0x2698d5['documentMe'+_0x186205(0x229)][_0x186205(0x1fc)]&&_0x2698d5[_0x186205(0x1e8)+_0x186205(0x229)][_0x186205(0x1fc)][_0x186205(0x21b)]('image')){if(sendApi)await safeSend(_0x3580f2,{'text':'The\x20replie'+'d\x20document'+'\x20is\x20an\x20ima'+_0x186205(0x2cc)+_0x186205(0x2c2)+'eos*\x20only.'+'\x20Please\x20re'+_0x186205(0x24e)+_0x186205(0x22a)+_0x186205(0x235),'quoted':_0xb4987d[_0x186205(0x222)]})[_0x186205(0x259)](()=>{});}else{if(sendApi)await safeSend(_0x3580f2,{'text':_0x186205(0x28f)+_0x186205(0x22e)+_0x186205(0x299)+_0x186205(0x22b)+'n\x20unsuppor'+_0x186205(0x2c6)+_0x186205(0x209)+'ase\x20reply\x20'+_0x186205(0x2b0)+'\x20message\x20t'+_0x186205(0x1e5)+_0x186205(0x288)+_0x186205(0x2b2)+'.','quoted':_0xb4987d['key']})[_0x186205(0x259)](()=>{});}}}}return;}const _0x41ffe3=normalizeTarget(_0x33b20f);if(!_0x41ffe3){if(sendApi)await safeSend(_0x3580f2,{'text':'Could\x20not\x20'+_0x186205(0x1e1)+_0x186205(0x2b7)+_0x33b20f+(_0x186205(0x200)+_0x186205(0x1c6)+_0x186205(0x1fe)+_0x186205(0x1fa)+_0x186205(0x2a9)+_0x186205(0x20d)+'id\x20JID.'),'quoted':_0xb4987d[_0x186205(0x222)]});return;}try{const _0x415b34=getBotJid();if(_0x415b34&&_0x41ffe3===_0x415b34){if(sendApi)await safeSend(_0x3580f2,{'text':_0x186205(0x1f1)+_0x186205(0x2a6)+_0x186205(0x1e3)+_0x186205(0x211)+_0x186205(0x2cb)+_0x186205(0x281),'quoted':_0xb4987d[_0x186205(0x222)]});return;}}catch(_0x23eb88){}const _0x4ce340=String(_0xb4987d[_0x186205(0x222)]['id']||''),_0x1fec53=_0x4ce340+'::'+_0x41ffe3;if(isSendProcessed(_0x1fec53)){info(_0x186205(0x251)+_0x186205(0x1da)+_0x186205(0x29c)+'r\x20'+_0x1fec53);return;}markSendProcessed(_0x1fec53);const _0x280fb8=await mkdtemp(_0x1f6f26[_0x186205(0x268)](_0x44601b[_0x186205(0x1d4)](),'cc-'));let _0x1dfd81=null;try{const _0x513f08=_0x408ecb[_0x186205(0x2a3)],_0x12ca4b=_0x513f08?.[_0x186205(0x1db)+'ge']?.[_0x186205(0x23b)+_0x186205(0x29d)]||_0x513f08?.[_0x186205(0x1e8)+_0x186205(0x229)]?.[_0x186205(0x23b)+_0x186205(0x29d)]||_0x513f08?.[_0x186205(0x216)]?.[_0x186205(0x1db)+'ge']?.['jpegThumbn'+_0x186205(0x29d)]||null;_0x12ca4b&&(Buffer['isBuffer'](_0x12ca4b)||_0x12ca4b instanceof Uint8Array)&&(_0x1dfd81=_0x1f6f26['join'](_0x280fb8,_0x186205(0x293)),await writeFileAsync(_0x1dfd81,Buffer[_0x186205(0x267)](_0x12ca4b)));const _0x17fb1a=await streamQuotedMediaToFile(_0x513f08,_0x280fb8);if(!_0x17fb1a){if(sendApi)await safeSend(_0x3580f2,{'text':'Failed\x20to\x20'+_0x186205(0x27f)+_0x186205(0x1c7)+_0x186205(0x20c)+_0x186205(0x264)+_0x186205(0x208)+_0x186205(0x233)+_0x186205(0x286)+_0x186205(0x256)+_0x186205(0x24d)+'nd\x20try\x20aga'+_0x186205(0x255),'quoted':_0xb4987d[_0x186205(0x222)]});await rm(_0x280fb8,{'recursive':!![],'force':!![]})[_0x186205(0x259)](()=>{});return;}const {path:_0x29d235,type:_0x17c7df}=_0x17fb1a,_0xe74ce7=_0x1f6f26[_0x186205(0x268)](_0x280fb8,_0x186205(0x23c)+Date[_0x186205(0x29a)]()+_0x186205(0x266));await transcodeToVideoNote(_0x29d235,_0xe74ce7);const _0x50145a={'video':{'url':_0xe74ce7},'mimetype':_0x186205(0x2bd),'fileName':_0x186205(0x24c)+_0x186205(0x266),'ptv':!![]};try{if(!sendApi)throw new Error(_0x186205(0x1d6)+_0x186205(0x1fd)+'e');await safeSend(_0x41ffe3,_0x50145a),info(_0x186205(0x272)+_0x186205(0x20f)+_0x186205(0x202)+_0x41ffe3);if(sendApi){const _0x30e818=_0x486263?_0x186205(0x1d1)+'video-note'+_0x186205(0x219)+_0x41ffe3+(_0x186205(0x1d8)+_0x186205(0x297)+_0x186205(0x1d9)+_0x186205(0x213)):'Converted\x20'+'video-note'+'\x20sent\x20to\x20'+_0x41ffe3+'.';await safeSend(_0x3580f2,{'text':_0x30e818,'quoted':_0xb4987d[_0x186205(0x222)]})[_0x186205(0x259)](()=>{});}}catch(_0x278bea){error(_0x278bea,_0x186205(0x2ad)+'d\x20sending\x20'+_0x186205(0x29e)+_0x41ffe3+':\x20'+(_0x278bea?.[_0x186205(0x216)]||_0x278bea));if(sendApi)await safeSend(_0x3580f2,{'text':_0x186205(0x279)+_0x186205(0x22c)+'\x20'+_0x41ffe3+':\x20'+(_0x278bea?.[_0x186205(0x216)]||_0x278bea),'quoted':_0xb4987d[_0x186205(0x222)]})[_0x186205(0x259)](()=>{});}try{await unlink(_0x29d235)[_0x186205(0x259)](()=>{}),await unlink(_0xe74ce7)[_0x186205(0x259)](()=>{});if(_0x1dfd81)await unlink(_0x1dfd81)[_0x186205(0x259)](()=>{});await rm(_0x280fb8,{'recursive':!![],'force':!![]});}catch(_0x38c90a){}}catch(_0x41cd6c){error(_0x41cd6c,_0x186205(0x1df)+_0x186205(0x2ab)+'\x20'+(_0x41cd6c?.['message']||_0x41cd6c));if(sendApi)await safeSend(_0x3580f2,{'text':_0x186205(0x237)+_0x186205(0x21e)+(_0x41cd6c?.[_0x186205(0x216)]||_0x41cd6c),'quoted':_0xb4987d[_0x186205(0x222)]})[_0x186205(0x259)](()=>{});await rm(_0x280fb8,{'recursive':!![],'force':!![]})['catch'](()=>{});}}catch(_0x219482){error(_0x219482,_0x186205(0x284)+_0x186205(0x2ce)+(_0x219482?.['message']||_0x219482));}}export async function cleanup(){const _0x5d3304=_0x1061b5;botRef=null,sendApi=null,clearAllProcessedSends(),info(_0x5d3304(0x298)+_0x5d3304(0x1e9));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};