const _0x353219=_0x471e;(function(_0x189dc8,_0xae3b38){const _0xb14ff2=_0x471e,_0x46bc1d=_0x189dc8();while(!![]){try{const _0x675a35=parseInt(_0xb14ff2(0x17f))/(0x1045+-0x7*-0x1a3+-0x1bb9)+parseInt(_0xb14ff2(0x31d))/(0x2fc*0x6+-0xe*0x80+0x573*-0x2)*(parseInt(_0xb14ff2(0x36f))/(0x30*0x8+0x83b*0x1+-0x9b8))+-parseInt(_0xb14ff2(0x154))/(-0x4f*0x3a+-0x1f*-0x12a+-0x122c)+parseInt(_0xb14ff2(0x3b2))/(0x23d3+0x33+-0x2401)*(parseInt(_0xb14ff2(0x1b1))/(-0x15f+-0x15c5+0x2*0xb95))+-parseInt(_0xb14ff2(0x360))/(-0x5b8+0x13f5+-0xe36)+parseInt(_0xb14ff2(0x160))/(0x1dbf*-0x1+-0xfee*0x2+-0x1fd*-0x1f)*(parseInt(_0xb14ff2(0x12a))/(0xb1f+0x34*-0x52+-0x3e*-0x17))+parseInt(_0xb14ff2(0x33c))/(0xe17+-0x11ce+-0x3c1*-0x1);if(_0x675a35===_0xae3b38)break;else _0x46bc1d['push'](_0x46bc1d['shift']());}catch(_0x629fe3){_0x46bc1d['push'](_0x46bc1d['shift']());}}}(_0x3a8e,-0xfcc58*0x1+0x1*-0x40825+0x1ca616));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x1b3ccc from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name=_0x353219(0x153);export const version=_0x353219(0x2c8);export const priority=0x156e*-0x1+0x4*-0x8a8+0x3863;export const commands=[_0x353219(0x153),'schedule'];export const configKeys=[_0x353219(0x27f)+'K_INTERVAL'+_0x353219(0x232),_0x353219(0x166)+'ULT_TIMEZO'+'NE',_0x353219(0x1cf)+_0x353219(0x341),_0x353219(0x133)+_0x353219(0x16a)+_0x353219(0x3a9)];function _0x471e(_0x4f2407,_0x55efc4){const _0x1588ba=_0x3a8e();return _0x471e=function(_0x56d7ef,_0x515740){_0x56d7ef=_0x56d7ef-(0x17*-0x73+-0xcb*-0x30+-0x8*0x355);let _0x5bcb3e=_0x1588ba[_0x56d7ef];return _0x5bcb3e;},_0x471e(_0x4f2407,_0x55efc4);}let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(0x2154+0x8ff+-0x5*0x86b)*(-0xbc0+0x3f+0xf69),DEFAULT_TIMEZONE=_0x353219(0x1db)+_0x353219(0x1e0),SEND_RETRIES=0x1720+0x1f9e+-0x36bb,INITIAL_BACKOFF_MS=0x250d+0x168*-0x3+-0x20f*0xf;function ensureArray(_0x1978f9){const _0x58f6eb=_0x353219;if(!_0x1978f9)return[];if(Array[_0x58f6eb(0x39e)](_0x1978f9))return _0x1978f9;return[_0x1978f9];}function uniqArray(_0x262a9b){const _0x4adf45=_0x353219,_0x47fd18=new Set(),_0x2added=[];for(const _0x53b558 of _0x262a9b||[]){const _0x3dc029=String(_0x53b558||'')[_0x4adf45(0x265)]();if(!_0x3dc029)continue;!_0x47fd18[_0x4adf45(0x17c)](_0x3dc029)&&(_0x47fd18[_0x4adf45(0x2bb)](_0x3dc029),_0x2added[_0x4adf45(0x27a)](_0x3dc029));}return _0x2added;}async function tableExists(_0x158475){const _0x59d267=_0x353219;try{const _0x28ea16=await db['get'](_0x59d267(0x1ec)+_0x59d267(0x270)+'ite_master'+_0x59d267(0x132)+'e=\x27table\x27\x20'+'AND\x20name=?',[_0x158475]);return!!_0x28ea16;}catch(_0x1feae5){return warn(_0x59d267(0x2a3)+_0x59d267(0x198)+_0x59d267(0x16c)+(_0x1feae5?.['message']||_0x1feae5)),![];}}async function getTableColumns(_0x17f954){const _0x24ef7b=_0x353219;try{const _0x58dd0e=await db[_0x24ef7b(0x24c)]('PRAGMA\x20tab'+_0x24ef7b(0x309)+_0x17f954+')');return(_0x58dd0e||[])[_0x24ef7b(0x259)](_0x45b768=>_0x45b768[_0x24ef7b(0x2bc)]);}catch(_0x3bc6df){return warn(_0x24ef7b(0x300)+'tTableColu'+_0x24ef7b(0x12f)+'for\x20'+_0x17f954+':\x20'+(_0x3bc6df?.['message']||_0x3bc6df)),[];}}function resolveChatJidFromRow(_0x22062b){const _0x4e28c3=_0x353219,_0x2a325e=[_0x4e28c3(0x163),_0x4e28c3(0x333),_0x4e28c3(0x205),_0x4e28c3(0x307),_0x4e28c3(0x142),_0x4e28c3(0x256),'target_jid'];for(const _0x5ac3b5 of _0x2a325e)if(_0x5ac3b5 in _0x22062b&&_0x22062b[_0x5ac3b5])return String(_0x22062b[_0x5ac3b5]);for(const _0x3d5dc0 of Object['keys'](_0x22062b)){const _0x1d70ce=_0x22062b[_0x3d5dc0];if(typeof _0x1d70ce===_0x4e28c3(0x281)&&_0x1d70ce[_0x4e28c3(0x35e)]('@'))return _0x1d70ce;}return null;}function resolveMessageFromRow(_0x3fad50){const _0x33b46e=_0x353219,_0x218055=['message',_0x33b46e(0x11c),_0x33b46e(0x1cc),'body',_0x33b46e(0x233)];for(const _0x5723fe of _0x218055)if(_0x5723fe in _0x3fad50&&_0x3fad50[_0x5723fe]!=null)return String(_0x3fad50[_0x5723fe]);for(const _0x31b779 of Object[_0x33b46e(0x2b1)](_0x3fad50)){if(typeof _0x3fad50[_0x31b779]==='string'&&_0x3fad50[_0x31b779][_0x33b46e(0x1ea)]>0x981+0x144c+-0x1dcd&&!_0x3fad50[_0x31b779][_0x33b46e(0x35e)]('@'))return _0x3fad50[_0x31b779];}return'';}function resolveWhenFromRow(_0x2fec93){const _0x167d2f=_0x353219,_0x2eaf6e=[_0x167d2f(0x20c),_0x167d2f(0x1ce),'sendat',_0x167d2f(0x2f0),'timestamp','ts','time_at'];for(const _0x357d4e of _0x2eaf6e){if(_0x357d4e in _0x2fec93&&_0x2fec93[_0x357d4e]){const _0x5adfad=Number(_0x2fec93[_0x357d4e]);if(!Number['isNaN'](_0x5adfad)&&_0x5adfad>-0x303*-0x2476c7+-0x1*-0x324d2e21+-0x64841d76)return{'send_at':_0x5adfad};}}const _0x9ce1f=['time','hhmm',_0x167d2f(0x1ad)+'ime',_0x167d2f(0x23e)+_0x167d2f(0x252)];for(const _0x254dc7 of _0x9ce1f){if(_0x254dc7 in _0x2fec93&&_0x2fec93[_0x254dc7]){const _0x5b9328=String(_0x2fec93[_0x254dc7])[_0x167d2f(0x265)]();if(/^\d{1,2}:\d{2}$/['test'](_0x5b9328))return{'time':_0x5b9328};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x274321=_0x353219;try{const _0x55c893=await db[_0x274321(0x24c)]('SELECT\x20*\x20F'+_0x274321(0x2d1)+_0x274321(0x1df)),_0x18d776=[];for(const _0x38536a of _0x55c893||[]){const _0x1896f9=resolveChatJidFromRow(_0x38536a)||'',_0x27aab7=resolveMessageFromRow(_0x38536a)||'',_0x2acf88=resolveWhenFromRow(_0x38536a)||{};let _0x442c6a=_0x38536a[_0x274321(0x330)]||_0x38536a[_0x274321(0x372)]||_0x38536a[_0x274321(0x396)]||_0x38536a[_0x274321(0x308)]||_0x274321(0x25a);if(typeof _0x442c6a===_0x274321(0x313))_0x442c6a=_0x274321(0x289)+_0x274321(0x1e1)+_0x442c6a;const _0x266be9=_0x38536a[_0x274321(0x164)]||_0x38536a['tz']||null,_0x2177cc=_0x38536a['creator_ji'+'d']||_0x38536a['created_by']||_0x38536a['author']||_0x38536a[_0x274321(0x199)]||'';let _0x22d2cb=Number(_0x38536a[_0x274321(0x26c)]||_0x38536a['ts']||_0x38536a[_0x274321(0x32e)]||-0x2427+-0x19c7*0x1+-0x2*-0x1ef7);if(!_0x22d2cb)_0x22d2cb=Math['floor'](Date[_0x274321(0x2a9)]()/(-0x1227*-0x1+-0x1*-0x1829+0x1334*-0x2));_0x18d776['push']({'chat_jid':_0x1896f9,'message':_0x27aab7,'time':_0x2acf88[_0x274321(0x252)]||null,'send_at':_0x2acf88['send_at']||null,'frequency':_0x442c6a||_0x274321(0x25a),'timezone':_0x266be9,'last_sent':Number(_0x38536a[_0x274321(0x145)]||_0x38536a[_0x274321(0x226)]||-0x1*0x22d+-0x1*0xf9e+0x11cb)||-0x9*-0x446+0xe*0xd8+-0x3246,'creator_jid':_0x2177cc||'','created_at':_0x22d2cb});}return _0x18d776;}catch(_0x5d682c){return warn(_0x274321(0x224)+'adAndNorma'+_0x274321(0x34a)+_0x274321(0x357)+'s\x20failed:\x20'+(_0x5d682c?.[_0x274321(0x190)]||_0x5d682c)),[];}}async function ensureSchema(){const _0xbc07f4=_0x353219,_0xbae67c={'id':_0xbc07f4(0x334)+_0xbc07f4(0x2b5)+_0xbc07f4(0x2ce)+_0xbc07f4(0x323),'chat_jid':_0xbc07f4(0x33f)+'ULL','message':'TEXT\x20NOT\x20N'+'ULL','time':_0xbc07f4(0x33b),'send_at':_0xbc07f4(0x1ed),'frequency':_0xbc07f4(0x115)+_0xbc07f4(0x34c),'timezone':_0xbc07f4(0x33b),'last_sent':_0xbc07f4(0x1ed),'creator_jid':_0xbc07f4(0x33f)+_0xbc07f4(0x19d),'enabled':_0xbc07f4(0x19f)+_0xbc07f4(0x138),'created_at':_0xbc07f4(0x19f)+_0xbc07f4(0x15a)+'ftime(\x27%s\x27'+_0xbc07f4(0x3a1)};try{const _0x288572=await tableExists(_0xbc07f4(0x11d));if(!_0x288572){const _0x59fb43=Object[_0xbc07f4(0x38d)](_0xbae67c)[_0xbc07f4(0x259)](([_0x16f318,_0x4abb20])=>_0x16f318+'\x20'+_0x4abb20)[_0xbc07f4(0x146)](_0xbc07f4(0x2ad));await db[_0xbc07f4(0x2c3)](_0xbc07f4(0x140)+_0xbc07f4(0x3bc)+_0xbc07f4(0x1bf)+_0x59fb43+_0xbc07f4(0x183));try{await db[_0xbc07f4(0x2c3)](_0xbc07f4(0x24b)+'EX\x20IF\x20NOT\x20'+_0xbc07f4(0x11f)+_0xbc07f4(0x2e0)+_0xbc07f4(0x32f)+_0xbc07f4(0x1cd)+_0xbc07f4(0x32d));}catch(_0x112057){}info('[sched]\x20cr'+'eated\x20cano'+_0xbc07f4(0x36e)+_0xbc07f4(0x395)+'e'),await db[_0xbc07f4(0x2c3)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+'REATE\x20TABL'+_0xbc07f4(0x137)+_0xbc07f4(0x173)+_0xbc07f4(0x14c)+_0xbc07f4(0x1ba)+'\x20\x20\x20\x20\x20\x20\x20cha'+_0xbc07f4(0x337)+_0xbc07f4(0x32a)+_0xbc07f4(0x150)+_0xbc07f4(0x14b)+_0xbc07f4(0x2f6)+'DEFAULT\x201,'+_0xbc07f4(0x335)+_0xbc07f4(0x213)+_0xbc07f4(0x273)+_0xbc07f4(0x1f7)+'\x20\x20');return;}const _0x4bdb00=await getTableColumns(_0xbc07f4(0x11d)),_0x41bea0=_0x4bdb00[_0xbc07f4(0x35e)]('chat_jid'),_0xb6f716=_0x4bdb00[_0xbc07f4(0x35e)](_0xbc07f4(0x190))||_0x4bdb00['includes'](_0xbc07f4(0x11c))||_0x4bdb00[_0xbc07f4(0x35e)]('body')||_0x4bdb00[_0xbc07f4(0x35e)](_0xbc07f4(0x1cc)),_0x592acc=_0x4bdb00[_0xbc07f4(0x35e)]('creator_ji'+'d')||_0x4bdb00[_0xbc07f4(0x35e)](_0xbc07f4(0x244))||_0x4bdb00['includes'](_0xbc07f4(0x1b7));if(_0x41bea0&&_0xb6f716&&_0x592acc){try{await db[_0xbc07f4(0x2c3)](_0xbc07f4(0x24b)+_0xbc07f4(0x2bf)+_0xbc07f4(0x11f)+_0xbc07f4(0x2e0)+_0xbc07f4(0x32f)+_0xbc07f4(0x1cd)+'hat_jid);');}catch(_0x5b7056){}await db[_0xbc07f4(0x2c3)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+_0xbc07f4(0x20f)+_0xbc07f4(0x137)+'XISTS\x20sche'+_0xbc07f4(0x14c)+_0xbc07f4(0x1ba)+_0xbc07f4(0x11b)+_0xbc07f4(0x337)+_0xbc07f4(0x32a)+_0xbc07f4(0x150)+'\x20\x20\x20\x20enable'+_0xbc07f4(0x2f6)+_0xbc07f4(0x317)+_0xbc07f4(0x335)+'\x20timezone\x20'+_0xbc07f4(0x273)+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'\x20\x20'),info(_0xbc07f4(0x2db)+_0xbc07f4(0x382)+_0xbc07f4(0x397)+_0xbc07f4(0x1e6)+'l/adequate');return;}info(_0xbc07f4(0x371)+_0xbc07f4(0x178)+_0xbc07f4(0x157)+_0xbc07f4(0x2ea)+'ating\x20safe'+'ly');const _0x251919=await readAndNormalizeExistingSchedules();await db[_0xbc07f4(0x2c3)](_0xbc07f4(0x156)+_0xbc07f4(0x1e3)+_0xbc07f4(0x257));try{await db[_0xbc07f4(0x2c3)](_0xbc07f4(0x140)+_0xbc07f4(0x159)+_0xbc07f4(0x254)+_0xbc07f4(0x214)+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20id\x20INTEGE'+_0xbc07f4(0x38b)+'KEY\x20AUTOIN'+'CREMENT,\x0a\x20'+_0xbc07f4(0x11b)+'t_jid\x20TEXT'+'\x20NOT\x20NULL,'+_0xbc07f4(0x1c4)+_0xbc07f4(0x320)+_0xbc07f4(0x316)+_0xbc07f4(0x29a)+_0xbc07f4(0x311)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+_0xbc07f4(0x2ec)+'EGER,\x0a\x20\x20\x20\x20'+_0xbc07f4(0x30f)+_0xbc07f4(0x29d)+_0xbc07f4(0x2c2)+'ily\x27,\x0a\x20\x20\x20\x20'+_0xbc07f4(0x39f)+_0xbc07f4(0x37d)+_0xbc07f4(0x11e)+_0xbc07f4(0x218)+'EGER,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20creato'+'r_jid\x20TEXT'+'\x20NOT\x20NULL,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20e'+'nabled\x20INT'+'EGER\x20DEFAU'+_0xbc07f4(0x377)+_0xbc07f4(0x2aa)+_0xbc07f4(0x28f)+_0xbc07f4(0x29b)+'\x20(strftime'+_0xbc07f4(0x196)+'\x27))\x0a\x20\x20\x20\x20\x20\x20'+');');}catch(_0x20fb73){await db[_0xbc07f4(0x2c3)]('CREATE\x20TAB'+_0xbc07f4(0x159)+_0xbc07f4(0x254)+_0xbc07f4(0x214)+_0xbc07f4(0x319)+_0xbc07f4(0x3b6)+_0xbc07f4(0x38b)+_0xbc07f4(0x365)+_0xbc07f4(0x2ba)+_0xbc07f4(0x11b)+'t_jid\x20TEXT'+_0xbc07f4(0x284)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0xbc07f4(0x320)+'T\x20NOT\x20NULL'+_0xbc07f4(0x29a)+_0xbc07f4(0x311)+_0xbc07f4(0x1d0)+_0xbc07f4(0x2ec)+_0xbc07f4(0x34b)+'\x20\x20\x20\x20freque'+_0xbc07f4(0x246)+_0xbc07f4(0x229)+_0xbc07f4(0x302)+'T,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0xbc07f4(0x293)+_0xbc07f4(0x33a)+_0xbc07f4(0x18c)+_0xbc07f4(0x134)+_0xbc07f4(0x33f)+_0xbc07f4(0x255)+_0xbc07f4(0x1b5)+_0xbc07f4(0x33a)+'\x20\x20\x20\x20\x20\x20\x20\x20cr'+_0xbc07f4(0x373)+_0xbc07f4(0x1fd)+_0xbc07f4(0x21b)),warn('[sched]\x20cr'+_0xbc07f4(0x38e)+_0xbc07f4(0x26b)+'without\x20de'+'faults\x20as\x20'+_0xbc07f4(0x28b));}const _0x431dc9=await db[_0xbc07f4(0x36c)](_0xbc07f4(0x221)+_0xbc07f4(0x24e)+_0xbc07f4(0x361)+'t_jid,\x20mes'+_0xbc07f4(0x1c2)+_0xbc07f4(0x352)+_0xbc07f4(0x17d)+_0xbc07f4(0x16f)+',\x20last_sen'+_0xbc07f4(0x2e5)+_0xbc07f4(0x25f)+_0xbc07f4(0x20e)+_0xbc07f4(0x350)+_0xbc07f4(0x3aa)+'\x20?,\x20?,\x20?,\x20'+_0xbc07f4(0x31f)+',\x20?)');try{for(const _0x126bc7 of _0x251919){try{await _0x431dc9[_0xbc07f4(0x13d)](_0x126bc7[_0xbc07f4(0x163)]||'',_0x126bc7['message']||'',_0x126bc7['time']||null,_0x126bc7[_0xbc07f4(0x20c)]||null,_0x126bc7[_0xbc07f4(0x330)]||_0xbc07f4(0x25a),_0x126bc7['timezone']||null,_0x126bc7[_0xbc07f4(0x145)]||-0x12c0+0x1*0x13d7+-0x5d*0x3,_0x126bc7[_0xbc07f4(0x349)+'d']||'',0x9f3+0x197*0x9+0x1*-0x1841,_0x126bc7[_0xbc07f4(0x26c)]||Math['floor'](Date[_0xbc07f4(0x2a9)]()/(0x10ab*-0x2+-0xce2+0x3220)));}catch(_0x63cdca){warn('[sched]\x20ca'+_0xbc07f4(0x234)+'t\x20normaliz'+_0xbc07f4(0x384)+_0xbc07f4(0x363)+_0x126bc7[_0xbc07f4(0x163)]+':\x20'+(_0x63cdca?.['message']||_0x63cdca));}}}finally{try{await _0x431dc9[_0xbc07f4(0x26d)]();}catch(_0x221dff){}}try{const _0x279d7e=_0xbc07f4(0x2b0)+_0xbc07f4(0x23f)+Math[_0xbc07f4(0x13c)](Date[_0xbc07f4(0x2a9)]()/(0x109*-0x1e+0x11*0x1d+0x1*0x2109));await db['exec']('ALTER\x20TABL'+_0xbc07f4(0x113)+_0xbc07f4(0x2e7)+'O\x20'+_0x279d7e+';'),await db[_0xbc07f4(0x2c3)](_0xbc07f4(0x1ca)+_0xbc07f4(0x113)+_0xbc07f4(0x26f)+'ME\x20TO\x20sche'+_0xbc07f4(0x1a2));try{await db[_0xbc07f4(0x2c3)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0xbc07f4(0x11f)+'_schedules'+_0xbc07f4(0x32f)+'chedules(c'+_0xbc07f4(0x32d));}catch(_0x1534bc){}info(_0xbc07f4(0x2b2)+_0xbc07f4(0x12e)+'ne;\x20old\x20ta'+_0xbc07f4(0x18b)+_0xbc07f4(0x274)+'p');}catch(_0x551207){warn('[sched]\x20sw'+_0xbc07f4(0x3ba)+'failed:\x20'+(_0x551207?.[_0xbc07f4(0x190)]||_0x551207));throw _0x551207;}finally{await db[_0xbc07f4(0x2c3)]('PRAGMA\x20for'+_0xbc07f4(0x1e3)+_0xbc07f4(0x31e));}await db['exec'](_0xbc07f4(0x1e7)+_0xbc07f4(0x240)+_0xbc07f4(0x1a5)+_0xbc07f4(0x356)+'ler_settin'+'gs\x20(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20chat_ji'+_0xbc07f4(0x29f)+_0xbc07f4(0x30b)+_0xbc07f4(0x188)+_0xbc07f4(0x35a)+_0xbc07f4(0x13b)+_0xbc07f4(0x326)+_0xbc07f4(0x223)+_0xbc07f4(0x2c5)+'\x20\x20\x20);\x0a\x20\x20\x20\x20');}catch(_0x2b33af){error(_0x2b33af,'[sched]\x20en'+_0xbc07f4(0x120)+'\x20fatal');throw _0x2b33af;}}function refreshConfig(){const _0x1dc2ec=_0x353219;try{const _0x4f05f1=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x4f05f1['SCHED_CHEC'+_0x1dc2ec(0x219)+_0x1dc2ec(0x232)]??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x4f05f1[_0x1dc2ec(0x166)+'ULT_TIMEZO'+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x4f05f1[_0x1dc2ec(0x1cf)+_0x1dc2ec(0x341)]??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x4f05f1[_0x1dc2ec(0x133)+_0x1dc2ec(0x16a)+_0x1dc2ec(0x3a9)]??INITIAL_BACKOFF_MS),info(_0x1dc2ec(0x374)+'nfig\x20refre'+_0x1dc2ec(0x225)+_0x1dc2ec(0x21c)+CHECK_INTERVAL_MS+('ms\x20default'+_0x1dc2ec(0x123))+DEFAULT_TIMEZONE);}catch(_0x5711a5){warn(_0x1dc2ec(0x224)+_0x1dc2ec(0x193)+_0x1dc2ec(0x149)+(_0x5711a5?.[_0x1dc2ec(0x190)]||_0x5711a5));}}try{typeof hotReloadConfig===_0x353219(0x277)&&hotReloadConfig((_0x5ee8d9=[])=>{const _0x1f240c=_0x353219;try{refreshConfig();}catch(_0x1cee45){warn(_0x1f240c(0x2b7)+'tReload\x20ha'+_0x1f240c(0x185)+_0x1f240c(0x1f4)+(_0x1cee45?.['message']||_0x1cee45));}});}catch(_0x48834c){warn(_0x353219(0x2b7)+_0x353219(0x118)+_0x353219(0x2d6)+_0x353219(0x364)+_0x353219(0x30a)+(_0x48834c?.['message']||_0x48834c));}function _0x3a8e(){const _0x45e362=['REATE\x20TABL','arted\x20(ali','hed\x20delete','2\x20days,\x20et','\x20timezone\x20','edules_new','\x20set\x20to\x20','update\x20sch','umber>\x20<HH','t_sent\x20INT','K_INTERVAL','toISO','\x20\x20\x20);','rval=','t*\x0a‣\x20View\x20','catch','isCommand','rved\x20-\x20re-','INSERT\x20INT','not\x20availa','\x20\x20\x20timezon','[sched]\x20re','shed:\x20inte','sent_at','|jid|all>','eator_jid)','\x20\x20\x20\x20\x20\x20\x20\x20ti','SELECT\x20*\x20F','No\x20valid\x20i','ctReply','mm>`\x20`[Nda','o\x20one-off\x20','wId','\x20chat=',':00\x20Hello\x20','_MS','value','nnot\x20inser','s/days/min','d\x20time\x20for','d|all>\x20inl','[sched]\x20in','s\x20WHERE\x20ch','\x20found\x20acr','tchFromFin','th\x20/setdef','mezone,\x20cr','scheduled_','backup_','ATE\x20TABLE\x20','\x20->\x20','Scheduled\x20','tChatTimez','created_by','ed\x20frequen','ncy\x20TEXT,\x0a','ndleSchedC','resolveNam','fromMillis','every','CREATE\x20IND','all','normalizeT','O\x20schedule','admin\x20chec','delete\x201\x202','match','time','curring\x20id','EXISTS\x20sch','ULL,\x0a\x20\x20\x20\x20\x20','room','=\x20OFF;','livered\x20on','map','daily','fter\x20time\x20','led\x20entrie','ed\x20delete\x20','ult\x20TZ','_jid,\x20enab','days_of_we','ed\x20add\x20<HH','ted\x20target','lias|jid|a','ed\x20edit\x20<n','trim','H:mm\x20|\x20in\x20','[sched]\x20ad','opped','H:mm>\x20[Nda','trimEnd','dules_new\x20','created_at','finalize','itialized\x20','s_new\x20RENA','e\x20FROM\x20sql','HH:mm\x20|\x20YY','es.\x0a\x0a>\x20*sc','TEXT\x0a\x20\x20\x20\x20\x20','d\x20to\x20backu','rror:\x20','ed\x20edit*\x20`','function','jid|all>','nce*\x20`<HH:','push','time.','quency.','[sched]\x20de','ge...>\x20\x20\x20(','SCHED_CHEC','[sched]\x20se','string','\x203\x20OR\x20sche','\x20<number>\x20','\x20NOT\x20NULL,','\x20?,\x20?)','anaging\x20sc','d|all>)','hedules.\x20E','every_n_da','alias','fallback','mber,numbe','weekday','caption','d_at\x20INTEG','\x20|\x20YYYY-MM','d\x20delete\x201','m>\x20gp:<ali','\x20last_sent','uled\x20messa','toLowerCas','LUES\x20(?,\x20?','le*\x20`<numb','split','liver\x20recu',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ER\x20DEFAULT','ommandGrou','ncy\x20TEXT\x20D','[sched]\x20li','d\x20TEXT\x20PRI','zone','ecutorTick','Api\x20(manag','[sched]\x20ta','fromISO','when','p\x20error:\x20','\x20lines\x0agp:','\x0a\x20\x20\x20\x20\x20\x20\x20VA','now','\x20\x20\x20\x20create','s):\x0a','db_failed',',\x0a\x20\x20','\x20target(s)','ed\x20disable','schedules_','keys','[sched]\x20mi','\x20=\x20?','\x20ensure\x20fa','IMARY\x20KEY\x20','ForUser\x20er','[sched]\x20ho','[sched]\x20DB','d,\x20message','CREMENT,\x0a\x20','add','name','sForChat\x20e','ler\x20error:','EX\x20IF\x20NOT\x20','gned\x20to\x20mi','\x20failed:\x20','EFAULT\x20\x27da','exec','Please\x20pro','e\x20TEXT\x0a\x20\x20\x20','rget\x20avail','n\x20follow\x20t','2.3.4','parse\x20new\x20','\x20at\x20','enable\x20a\x20p','ur\x20default','delete:\x20','AUTOINCREM','s)\x20across\x20','xample:\x0asc','ROM\x20schedu','targets.','t\x20required','HH:mm','solving\x20co','fig\x20regist','UPDATE\x20sch','\x20|\x20all>`\x0a‣','?,\x20?)\x20ON\x20C','oUserJid','[sched]\x20sc','=\x20?','ed\x20message','N\x20hours/da','o\x20recurrin','_schedules','selectedBu','chatJid','>`\x0a‣\x20Tempo','or\x20on\x20foll','t,\x20creator',':mm|YYYY-M','s\x20RENAME\x20T','iled\x20to\x20de','once','ted\x20—\x20migr','changes','end_at\x20INT','DATETIME_M','M-DDTHH:mm','(id:','send','mMe)','_settings\x20','solveDefau','padStart','rarily\x20dis','d\x20INTEGER\x20','edit','xtMessage','hhmm','heduler\x20st','aged\x20conne','M\x20schedule','utor\x20error','d_time','[sched]\x20fa','[sched]\x20ge','uires\x20bot\x20','mezone\x20TEX','e\x20or\x20multi','Failed\x20to\x20','sched.init','@g.us','jid','recurrence','le_info(','led:\x20','MARY\x20KEY,\x0a','setZone','parse_fail','No\x20schedul','\x20\x20\x20\x20freque','isInteger','time\x20TEXT,','[sched]\x20up','number','d\x20to\x20remov','ection\x20upd','T\x20NOT\x20NULL','DEFAULT\x201,','ommandPM\x20e','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','nup\x20error:','reviously\x20','cy\x20<number','116308dpYvJs','=\x20ON;','?,\x20?,\x20?,\x20?','essage\x20TEX','startOf','as|jid|all','ENT','alias,\x20gp:','not-availa','T\x201,\x0a\x20\x20\x20\x20\x20','1\x20daily,\x20n','\x20enabled:','enabled','\x20PRIMARY\x20K','iled\x20to\x20re','hat\x20error:','hat_jid);','timestamp','_chat\x20ON\x20s','frequency','quency,\x20ti','\x5c$&','chatid','INTEGER\x20PR','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','disable','t_jid\x20TEXT','gp:<alias|','`\x0a‣\x20Change','\x20INTEGER,\x0a','TEXT','3475330oDYgSp','ring','\x20scheduled','TEXT\x20NOT\x20N',',\x20?,\x20?,\x20?,','_RETRIES','disabled\x20m','ine\x20when\x20m','zoneName','one-off\x20fo','\x20id\x20ASC','\x20daily,\x20`n','schedule.\x20','creator_ji','lizeExisti','EGER,\x0a\x20\x20\x20\x20','LT\x20\x27daily\x27','n(s).\x20Set\x20','ction.upda','\x20UPDATE\x20SE','ed_at)\x20VAL','If\x20`Ndays`',',\x20send_at,','\x0amsg:\x0a','ndexes\x20pro','Could\x20not\x20','STS\x20schedu','ngSchedule','type','ed\x20once\x20<H','abled\x20INTE','instead','hasSame','help','includes','off\x20id=','1541421CeLQXu','s_new\x20(cha','T\x20timezone','e\x20for\x20','ration\x20fai','KEY\x20AUTOIN','📅\x20*SchedHe','edule.','\x20made.','replace','one-off\x20id','slice','prepare','findings','nical\x20sche','6jRenBf','include\x20gp','[sched]\x20Le','freq','eated_at\x20I','[sched]\x20co','min','Usage:\x20sch','LT\x201,\x0a\x20\x20\x20\x20','MM-DDTHH:m','es\x20created','defaults:\x20','er>`\x0a‣\x20Re-','lastID','ne\x20TEXT,\x0a\x20','setup\x20send','s\x20(chat_ji','key','enabled\x20=\x20','hedules\x20ta','-DDTHH:mm>','ed\x20schedul','all\x20schedu','No\x20changes','vided.\x20Usa','test','onnection(','rring\x20id=','R\x20PRIMARY\x20','leFields\x20e','entries','eated\x20sche','te\x20listene','hed\x20freque','ys]\x20<messa','Deleted\x20','found\x20for\x20','<number>`\x20','dules\x20tabl','repeat','ble\x20appear','efaults.','filter','conversati','`<HH:mm\x20|\x20','ys]`\x20`<mes','livered\x20re','isArray','\x20\x20\x20\x20timezo','[sched]\x20No',',\x27now\x27))','ded\x20schedu','ates)','leByDBId\x20e','\x20when:','\x20chat:','[sched]\x20ex','update\x20fre','F_MS','UES\x20(?,\x20?,','ts\x20(','there\x0amore','m\x20error:\x20','\x20updated\x20t','nnection.u','at_jid)\x20DO','val:\x20`n=1`','25GSgdmx','\x20schedule(','*\x20`<number','days','\x20id\x20INTEGE','[sched]\x20cl','\x20days,\x20etc','‣\x20One-off\x20','ap\x20tables\x20','at_jid\x20=\x20?','LE\x20schedul','E\x20schedule','ndStoredMa','TEXT\x20DEFAU','iled:\x20','sage...>`\x0a','tReloadCon','bled\x20state','PM\x20usage:\x20','\x20\x20\x20\x20\x20\x20\x20cha','msg','schedules','\x20\x20\x20\x20\x20\x20\x20las','EXISTS\x20idx','sureSchema','[sched]\x20on','able\x20(expl','TZ=','\x20error:\x20','p:<alias|j','ltChatJids','[sched]\x20fi','day\x20+\x20Nday','>\x20<n>\x20\x20(n=','2215422hGMJdu','diff','eserved.\x0a\x0a','ours|YYYY-','gration\x20do','mns\x20error\x20','`\x0a‣\x20Set\x20re','fromMe','\x20WHERE\x20typ','SCHED_INIT','eator_jid\x20','owing\x20line','ble','E\x20IF\x20NOT\x20E','FAULT\x201','t\x20lines\x20—\x20','isValid','GER\x20DEFAUL','floor','run','sock','peat\x20inter','CREATE\x20TAB','from','chat','selectedRo','\x20freq:','last_sent','join','k\x20failed','toMillis','g\x20error:\x20','\x20scheduler','\x20\x20\x20\x20enable','duler_sett','plus','nd\x20attempt','ault.','EY,\x0a\x20\x20\x20\x20\x20\x20','requested\x20','able\x20a\x20sch','sched','2245216IazvPE','group/defa','PRAGMA\x20for','ules\x20detec','available','LE\x20IF\x20NOT\x20','FAULT\x20(str','one\x20error:','update\x20ena','s.\x0a\x0a>\x20*sch','ek:','day','8QnkXkt','DELETE\x20FRO','itial\x20exec','chat_jid','timezone','sendMessag','SCHED_DEFA','toLocaleSt',',2,3\x20OR\x20sc','enable','IAL_BACKOF','\x20done;\x20sen','error:\x20','weekly','ple\x20schedu',',\x20timezone','les\x20WHERE\x20','-send\x20clea','th:','XISTS\x20sche','[sched]\x20is',')\x20id:','r,...|all>','\x20to\x20','gacy\x20sched','essage.\x0a','gister\x20man','\x20Delete\x20on','has','\x20frequency','seMessage','118908mKSanw','dings\x20erro','1\x20ORDER\x20BY','indexOf','\x0a);','instance','ndler\x20erro','nd_at,\x20fre','for\x20','\x20\x20\x20\x20\x20\x20\x20\x20en','connection',':mm|in\x20N\x20h','ble\x20rename','\x20\x20\x20\x20\x20\x20\x20\x20cr','ezone\x20FROM','*sched\x20lis','unknown','message','participan','icit\x20targe','freshConfi','at\x20','oss\x20your\x20d','(\x27%s\x27,\x27now','\x22.\x20Use\x20gp:','bleExists\x20','creator','\x20messages\x20','g\x20at\x20','remoteJid','ULL','startsWith','INTEGER\x20DE','\x20time=','oss\x20reques','dules;','ge\x20text\x20(s','yes','IF\x20NOT\x20EXI','>`\x20`<messa','ror:\x20','imageMessa','\x20is\x20provid','[sched]\x20ha','livered\x20an','s).','schedule_t','ow\x20error:\x20','\x20default\x20c','resolve\x20gp','636654gyatrf','ber>`\x20`<n>','ids','eanup\x20erro','\x20\x20\x20enabled','e\x20#','author','db\x20delete\x20','lp\x20Command','ings\x20(\x0a\x20\x20\x20','day_of_mon','chat_jid\x20=','edulesForC','isNaN','es\x20(\x0a\x20\x20','Schedule\x20#','\x20available','sage,\x20time','ncy*\x20`<num','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','listRespon','s):\x20','ed,\x20schedu',')\x20VALUES\x20(','buttonsRes','ALTER\x20TABL','\x20gp:<alias','text','chedules(c','sendAt','SCHED_SEND','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','singleSele','reason','Failed\x20for','d\x20for\x20conn','ll>','extendedTe','mat\x20for\x20ed','status','liver\x20one-','endsWith','Africa/Nai','r\x20defaults','ame\x20line\x20a','utes>\x20<mes','les','robi','ys:',':\x20\x22','eign_keys\x20','ialize\x20req','Unsupporte','s\x20canonica','\x0a\x20\x20\x20\x20\x20\x20CRE','list','s\x20WHERE\x20id','length','set','SELECT\x20nam','INTEGER','of\x20a\x20sched','rate','in\x20N\x20hours','=2\x20every\x202','e-off\x20post','sched\x20enab','r:\x20','get','c.\x0a\x0a>\x20*sch','\x20\x20\x20);\x0a\x20\x20\x20\x20','datetime',',\x20time,\x20se','no\x20send\x20ta','unsupporte','\x20->\x20id:','NTEGER\x0a\x20\x20\x20','(listenerM','resolve\x20yo','ge...>','number,...','failed','Y\x20id\x20ASC','ge:\x20sched\x20','chat_id','vide\x20messa','ONFLICT(ch','ed\x20','ge.\x0a\x0a>\x20*sc','\x20connectio','original\x20n','send_at','delete','led,\x20creat'];_0x3a8e=function(){return _0x45e362;};return _0x3a8e();}refreshConfig();function tryBuildSendApiFromBot(_0x5ec645){const _0x406318=_0x353219;if(!_0x5ec645)return null;if(typeof _0x5ec645[_0x406318(0x165)+'e']===_0x406318(0x277))return async(_0x1c741b,_0x7a29fb)=>_0x5ec645['sendMessag'+'e'](_0x1c741b,_0x7a29fb);else{if(_0x5ec645[_0x406318(0x13e)]&&typeof _0x5ec645[_0x406318(0x13e)]['sendMessag'+'e']===_0x406318(0x277))return async(_0x4d6ace,_0x18a91c)=>_0x5ec645[_0x406318(0x13e)][_0x406318(0x165)+'e'](_0x4d6ace,_0x18a91c);}return null;}function setupSendApi(_0x5a5fa0){const _0x17b29f=_0x353219;botRef=_0x5a5fa0,sendApi=tryBuildSendApiFromBot(botRef),info(_0x17b29f(0x280)+'tupSendApi'+_0x17b29f(0x16b)+'dApi\x20'+(sendApi?_0x17b29f(0x158):_0x17b29f(0x325)+_0x17b29f(0x136)));}async function sendWithRetry(_0x4237b4,_0x5b4b9f){const _0xd978fa=_0x353219,_0x2644e1=Number(SEND_RETRIES||-0xffa+0xbc0*-0x2+-0x397*-0xb);let _0x4831a5=-0x4*0x851+-0x7f4+0x527*0x8,_0x5762c1=Number(INITIAL_BACKOFF_MS||-0x3e*0x73+0xadb*0x3+0x2c3*-0x1);while(_0x4831a5<_0x2644e1){try{const _0x58275c=_0x4237b4||null;if(!_0x58275c)throw new Error(_0xd978fa(0x1fa)+_0xd978fa(0x2c6)+_0xd978fa(0x122)+_0xd978fa(0x192)+_0xd978fa(0x2d3)+')');if(typeof sendApi===_0xd978fa(0x277))return await sendApi(_0x58275c,_0x5b4b9f),!![];if(botRef&&typeof botRef[_0xd978fa(0x165)+'e']===_0xd978fa(0x277))return await botRef[_0xd978fa(0x165)+'e'](_0x58275c,_0x5b4b9f),!![];if(botRef&&botRef[_0xd978fa(0x13e)]&&typeof botRef['sock'][_0xd978fa(0x165)+'e']===_0xd978fa(0x277))return await botRef[_0xd978fa(0x13e)][_0xd978fa(0x165)+'e'](_0x58275c,_0x5b4b9f),!![];throw new Error('no\x20sendApi'+_0xd978fa(0x1c1));}catch(_0x2c9dac){_0x4831a5++;const _0x3bbd4f=String(_0x2c9dac?.[_0xd978fa(0x190)]||'')[_0xd978fa(0x295)+'e']()[_0xd978fa(0x35e)](_0xd978fa(0x1ef))||_0x2c9dac?.[_0xd978fa(0x1d8)]===0x548*-0x1+0x168c+-0xf97;warn(_0xd978fa(0x280)+_0xd978fa(0x14e)+'\x20'+_0x4831a5+'\x20failed:\x20'+(_0x2c9dac?.[_0xd978fa(0x190)]||_0x2c9dac));if(_0x4831a5>=_0x2644e1||!_0x3bbd4f)return![];await new Promise(_0x291903=>setTimeout(_0x291903,_0x5762c1)),_0x5762c1*=-0x1*0x1526+0x1cf0+-0x7c8;try{setupSendApi(botRef);}catch(_0x467006){}}}return![];}function parseTimeToken(_0x37c4a4,_0x504384=DEFAULT_TIMEZONE){const _0x570124=_0x353219;if(!_0x37c4a4||typeof _0x37c4a4!==_0x570124(0x281))return null;const _0x41d9e0=_0x37c4a4[_0x570124(0x265)](),_0x3a50c6=_0x41d9e0[_0x570124(0x251)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x3a50c6){const _0x2499cc=Number(_0x3a50c6[-0x1f3c+-0x4be*0x2+0x28b9]),_0x2c4935=_0x3a50c6[0x21dc+0x1*0x145a+-0x1b1a*0x2][_0x570124(0x295)+'e']();let _0x2b7461=DateTime[_0x570124(0x2a9)]()[_0x570124(0x30c)](_0x504384);if(_0x2c4935['startsWith'](_0x570124(0x375))||_0x2c4935==='m')_0x2b7461=_0x2b7461['plus']({'minutes':_0x2499cc});else{if(_0x2c4935[_0x570124(0x19e)]('h')||_0x2c4935[_0x570124(0x19e)]('hr'))_0x2b7461=_0x2b7461[_0x570124(0x14d)]({'hours':_0x2499cc});else{if(_0x2c4935[_0x570124(0x19e)]('d'))_0x2b7461=_0x2b7461[_0x570124(0x14d)]({'days':_0x2499cc});}}if(_0x2b7461['isValid'])return{'type':'datetime','dt':_0x2b7461};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/[_0x570124(0x388)](_0x41d9e0)){const _0x1d6239=_0x41d9e0[_0x570124(0x369)]('\x20','T'),_0x4bb0bc=DateTime[_0x570124(0x2a4)](_0x1d6239,{'zone':_0x504384});if(_0x4bb0bc[_0x570124(0x13a)])return{'type':_0x570124(0x1f8),'dt':_0x4bb0bc};}if(/^\d{1,2}:\d{2}$/['test'](_0x41d9e0)){const [_0x261afc,_0x3e8248]=_0x41d9e0[_0x570124(0x298)](':')[_0x570124(0x259)](Number);if(Number[_0x570124(0x310)](_0x261afc)&&Number['isInteger'](_0x3e8248)&&_0x261afc>=0x1600+0x159c*0x1+-0x2b9c&&_0x261afc<=-0x17a0+-0x3*0x645+0x2a86&&_0x3e8248>=0x5*-0x629+-0x15a1+-0x346e*-0x1&&_0x3e8248<=0x1ef9+0x13*-0x7d+-0x1577)return{'type':_0x570124(0x2f9),'hhmm':String(_0x261afc)['padStart'](-0x1*0x23b+0x26da+-0x249d,'0')+':'+String(_0x3e8248)[_0x570124(0x2f4)](0x12d*-0x1+-0x144*0x13+-0x3*-0x869,'0')};}return null;}function shouldSendSlot(_0x1fdbff,_0x4f2237){const _0x24ac86=_0x353219,_0x91ce00=_0x1fdbff[_0x24ac86(0x330)]||_0x24ac86(0x25a),_0x6bfc6=_0x1fdbff['last_sent']||-0x35e*-0xa+-0xbbc+-0x15f0,_0x5c22b0=_0x6bfc6?DateTime[_0x24ac86(0x249)](_0x6bfc6*(0x8d2*0x2+0x1a21*0x1+-0x27dd))[_0x24ac86(0x30c)](_0x4f2237[_0x24ac86(0x2a0)]):null;if(!_0x5c22b0)return!![];if(_0x91ce00==='daily')return!_0x5c22b0[_0x24ac86(0x35c)](_0x4f2237,_0x24ac86(0x15f));if(_0x91ce00===_0x24ac86(0x16d))return _0x4f2237[_0x24ac86(0x12b)](_0x5c22b0,_0x24ac86(0x3b5))['days']>=-0x1*-0x1f76+0x1d99+-0x3d08;if(_0x91ce00[_0x24ac86(0x19e)]('every_n_da'+_0x24ac86(0x1e1))){const _0x59b0e7=parseInt(_0x91ce00[_0x24ac86(0x298)](':')[0x337*-0xb+-0x7*0x4c+-0x1*-0x2572],0x921+0x2350+-0x2c67);if(isNaN(_0x59b0e7)||_0x59b0e7<0x3*-0xa81+-0x1932+-0x7a*-0x77)return![];return _0x4f2237[_0x24ac86(0x12b)](_0x5c22b0,'days')['days']>=_0x59b0e7;}if(_0x91ce00['startsWith'](_0x24ac86(0x260)+_0x24ac86(0x15e))){const _0x3eeb96=_0x91ce00[_0x24ac86(0x298)](':')[-0x2e1+0x47f*-0x7+0x225b][_0x24ac86(0x298)](',')[_0x24ac86(0x259)](_0x5baddd=>parseInt(_0x5baddd,-0x502*-0x3+0x1f6b*0x1+-0x2e67))[_0x24ac86(0x399)](Boolean);return _0x3eeb96[_0x24ac86(0x35e)](_0x4f2237[_0x24ac86(0x28d)])&&!_0x5c22b0['hasSame'](_0x4f2237,_0x24ac86(0x15f));}if(_0x91ce00['startsWith'](_0x24ac86(0x1bb)+_0x24ac86(0x172))){const _0x1bdd09=parseInt(_0x91ce00[_0x24ac86(0x298)](':')[-0x1*0x25ef+0x72a*-0x2+0x3444],0x1*-0xa6+-0x1*0x9e3+0xa93);return _0x4f2237[_0x24ac86(0x15f)]===_0x1bdd09&&!_0x5c22b0[_0x24ac86(0x35c)](_0x4f2237,_0x24ac86(0x15f));}return![];}async function addScheduleRow(_0x505b45){const _0xda4047=_0x353219;try{const _0x4aacf0=await db[_0xda4047(0x13d)](_0xda4047(0x221)+_0xda4047(0x24e)+_0xda4047(0x37f)+_0xda4047(0x2b9)+_0xda4047(0x1f9)+_0xda4047(0x186)+_0xda4047(0x331)+_0xda4047(0x23d)+_0xda4047(0x228)+_0xda4047(0x2a8)+_0xda4047(0x296)+_0xda4047(0x340)+_0xda4047(0x285),[_0x505b45['chat_jid'],_0x505b45[_0xda4047(0x190)],_0x505b45[_0xda4047(0x252)],_0x505b45[_0xda4047(0x20c)],_0x505b45['frequency']||_0xda4047(0x25a),_0x505b45[_0xda4047(0x164)]||null,_0x505b45[_0xda4047(0x349)+'d']]),_0x23d9a7=_0x4aacf0?.[_0xda4047(0x37c)]||null;return info(_0xda4047(0x267)+_0xda4047(0x3a2)+'le\x20id='+_0x23d9a7+_0xda4047(0x230)+_0x505b45[_0xda4047(0x163)]+_0xda4047(0x1a0)+(_0x505b45[_0xda4047(0x252)]||_0x505b45[_0xda4047(0x20c)])),_0x23d9a7;}catch(_0x3c3925){return warn(_0xda4047(0x267)+'dScheduleR'+_0xda4047(0x1ae)+(_0x3c3925?.[_0xda4047(0x190)]||_0x3c3925)),null;}}async function listSchedulesForChat(_0x48ff87){const _0x2c30fd=_0x353219;try{const _0x1fd41c=await db[_0x2c30fd(0x24c)](_0x2c30fd(0x22a)+_0x2c30fd(0x2d1)+_0x2c30fd(0x170)+_0x2c30fd(0x1bc)+'\x20?\x20ORDER\x20B'+_0x2c30fd(0x203),[_0x48ff87]);return _0x1fd41c||[];}catch(_0x405c55){return warn(_0x2c30fd(0x29e)+'stSchedule'+_0x2c30fd(0x2bd)+_0x2c30fd(0x275)+(_0x405c55?.[_0x2c30fd(0x190)]||_0x405c55)),[];}}async function removeScheduleByDBId(_0x2f82c0){const _0x519919=_0x353219;try{const _0x1fef97=await db[_0x519919(0x13d)](_0x519919(0x161)+_0x519919(0x2fc)+_0x519919(0x1e9)+_0x519919(0x2b3),[_0x2f82c0]);return _0x1fef97?.[_0x519919(0x2eb)]?!![]:![];}catch(_0xcc540){return warn(_0x519919(0x224)+'moveSchedu'+_0x519919(0x3a4)+_0x519919(0x275)+(_0xcc540?.[_0x519919(0x190)]||_0xcc540)),![];}}async function removeAllSchedulesForChat(_0x188d20){const _0x44331c=_0x353219;try{const _0x28dcd4=await db[_0x44331c(0x13d)](_0x44331c(0x161)+'M\x20schedule'+_0x44331c(0x239)+_0x44331c(0x3bb),[_0x188d20]);return _0x28dcd4?.[_0x44331c(0x2eb)]||-0x1*-0x229d+0x9e0+-0x7*0x65b;}catch(_0x40e08d){return warn(_0x44331c(0x224)+'moveAllSch'+_0x44331c(0x1bd)+_0x44331c(0x32c)+'\x20'+(_0x40e08d?.[_0x44331c(0x190)]||_0x40e08d)),-0x176a+-0x3*-0x687+0x6d*0x9;}}async function updateScheduleFields(_0x5c02db,_0x97c5cf={}){const _0x178b36=_0x353219;try{const _0x2a2cb4=[],_0xf63fe7=[];for(const _0x3997da of Object[_0x178b36(0x2b1)](_0x97c5cf)){_0x2a2cb4[_0x178b36(0x27a)](_0x3997da+_0x178b36(0x2b3)),_0xf63fe7[_0x178b36(0x27a)](_0x97c5cf[_0x3997da]);}if(!_0x2a2cb4[_0x178b36(0x1ea)])return![];_0xf63fe7[_0x178b36(0x27a)](_0x5c02db);const _0x306ddb=_0x178b36(0x2d7)+'edules\x20SET'+'\x20'+_0x2a2cb4[_0x178b36(0x146)](',\x20')+('\x20WHERE\x20id\x20'+_0x178b36(0x2dc)),_0x323570=await db[_0x178b36(0x13d)](_0x306ddb,_0xf63fe7);return _0x323570?.[_0x178b36(0x2eb)]?!![]:![];}catch(_0x358805){return warn(_0x178b36(0x312)+'dateSchedu'+_0x178b36(0x38c)+_0x178b36(0x275)+(_0x358805?.[_0x178b36(0x190)]||_0x358805)),![];}}async function getChatTimezone(_0x4972cb){const _0x35ca4c=_0x353219;try{const _0xd6ee99=await db[_0x35ca4c(0x1f5)]('SELECT\x20tim'+_0x35ca4c(0x18d)+_0x35ca4c(0x14a)+_0x35ca4c(0x2f2)+'WHERE\x20chat'+'_jid\x20=\x20?',[_0x4972cb]);return _0xd6ee99?.[_0x35ca4c(0x164)]||null;}catch(_0xbc07e7){return warn(_0x35ca4c(0x300)+_0x35ca4c(0x243)+_0x35ca4c(0x15b)+'\x20'+(_0xbc07e7?.[_0x35ca4c(0x190)]||_0xbc07e7)),null;}}async function setChatTimezone(_0x4d62a7,_0x4a2ed5){const _0x38208e=_0x353219;try{return await db[_0x38208e(0x13d)]('INSERT\x20INT'+_0x38208e(0x24e)+'r_settings'+'\x20(chat_jid'+_0x38208e(0x16f)+_0x38208e(0x1c8)+_0x38208e(0x2d9)+_0x38208e(0x207)+_0x38208e(0x3b0)+_0x38208e(0x34f)+_0x38208e(0x362)+'=excluded.'+'timezone',[_0x4d62a7,_0x4a2ed5]),!![];}catch(_0x283f64){return warn('[sched]\x20se'+_0x38208e(0x243)+_0x38208e(0x15b)+'\x20'+(_0x283f64?.[_0x38208e(0x190)]||_0x283f64)),![];}}async function executorTick(){const _0x44d652=_0x353219;if(executorRunning)return;executorRunning=!![];try{const _0x18e245=await db['all'](_0x44d652(0x22a)+_0x44d652(0x2d1)+_0x44d652(0x170)+_0x44d652(0x381)+_0x44d652(0x181)+_0x44d652(0x346));if(!_0x18e245||_0x18e245[_0x44d652(0x1ea)]===0x1*0x1d83+0x23f5+-0x82f*0x8)return;for(const _0x5cb709 of _0x18e245){try{const _0x505958=_0x5cb709[_0x44d652(0x164)]||await getChatTimezone(_0x5cb709[_0x44d652(0x163)])||DEFAULT_TIMEZONE,_0xd51a2=DateTime[_0x44d652(0x2a9)]()[_0x44d652(0x30c)](_0x505958);if(_0x5cb709[_0x44d652(0x20c)]&&Number(_0x5cb709[_0x44d652(0x20c)])>-0x2333+0xd0d*-0x1+-0x40*-0xc1){const _0x2a46af=Number(_0x5cb709[_0x44d652(0x20c)]),_0x48a256=Math['floor'](Date['now']()/(-0x1c43+-0x2*0x126d+0x4505));if(_0x2a46af<=_0x48a256){const _0x444f1c=await sendWithRetry(_0x5cb709[_0x44d652(0x163)],{'text':_0x5cb709[_0x44d652(0x190)]});if(_0x444f1c)try{const _0x593972=await removeScheduleByDBId(_0x5cb709['id']);_0x593972?info(_0x44d652(0x27d)+_0x44d652(0x1ab)+'d\x20removed\x20'+_0x44d652(0x36a)+'='+_0x5cb709['id']+_0x44d652(0x177)+_0x5cb709[_0x44d652(0x163)]):(await updateScheduleFields(_0x5cb709['id'],{'enabled':0x0,'last_sent':_0x48a256}),warn('[sched]\x20de'+_0x44d652(0x258)+'e-off\x20id='+_0x5cb709['id']+_0x44d652(0x177)+_0x5cb709[_0x44d652(0x163)]+('\x20but\x20faile'+_0x44d652(0x314)+'e\x20from\x20DB;'+'\x20disabled\x20'+_0x44d652(0x35b))));}catch(_0x1552f0){warn(_0x44d652(0x121)+_0x44d652(0x1f2)+_0x44d652(0x171)+_0x44d652(0x31a)+'\x20'+(_0x1552f0?.['message']||_0x1552f0));try{await updateScheduleFields(_0x5cb709['id'],{'enabled':0x0,'last_sent':_0x48a256});}catch(_0x21af9c){}}else warn(_0x44d652(0x2ff)+_0x44d652(0x2e8)+_0x44d652(0x1d9)+_0x44d652(0x35f)+_0x5cb709['id']+_0x44d652(0x177)+_0x5cb709[_0x44d652(0x163)]);}continue;}if(!_0x5cb709[_0x44d652(0x252)])continue;const _0x3bfa1d=_0xd51a2['toFormat'](_0x44d652(0x2d4));if(_0x3bfa1d!==_0x5cb709['time'])continue;const _0x29841b={'id':_0x5cb709['id'],'frequency':_0x5cb709[_0x44d652(0x330)]||_0x44d652(0x25a),'last_sent':_0x5cb709[_0x44d652(0x145)]||-0x18e6+-0x8*-0x15d+-0x255*-0x6};if(!shouldSendSlot(_0x29841b,_0xd51a2))continue;const _0x36b073=await sendWithRetry(_0x5cb709[_0x44d652(0x163)],{'text':_0x5cb709[_0x44d652(0x190)]});_0x36b073?(await updateScheduleFields(_0x5cb709['id'],{'last_sent':Math[_0x44d652(0x13c)](Date['now']()/(-0x93b+-0x1edd*0x1+0x2c00))}),info(_0x44d652(0x27d)+_0x44d652(0x39d)+_0x44d652(0x253)+'='+_0x5cb709['id']+_0x44d652(0x177)+_0x5cb709[_0x44d652(0x163)]+_0x44d652(0x2ca)+_0x5cb709['time']+'\x20('+_0x505958+')')):warn(_0x44d652(0x2ff)+_0x44d652(0x2e8)+_0x44d652(0x299)+_0x44d652(0x38a)+_0x5cb709['id']+_0x44d652(0x177)+_0x5cb709[_0x44d652(0x163)]+_0x44d652(0x2ca)+_0x5cb709[_0x44d652(0x252)]);}catch(_0x21c00f){warn(_0x44d652(0x3a7)+'ecutor\x20ite'+_0x44d652(0x3ad)+(_0x21c00f?.[_0x44d652(0x190)]||_0x21c00f));}}}catch(_0x38ab79){error(_0x44d652(0x3a7)+'ecutorTick'+'\x20error:\x20'+(_0x38ab79?.['message']||_0x38ab79));}finally{executorRunning=![];}}function startSchedulerAligned(){stopScheduler();const _0x29ad6d=-0x39*0x1f+-0xb8c*0x16+-0xd63*-0x25-Date['now']()%(0x2*-0x9ae5+0x631c*0x1+0x1bd0e);setTimeout(()=>{const _0x10828f=_0x471e;executorTick()[_0x10828f(0x21e)](_0x27ab51=>warn(_0x10828f(0x238)+_0x10828f(0x162)+_0x10828f(0x2fd)+':\x20'+(_0x27ab51?.[_0x10828f(0x190)]||_0x27ab51))),schedulerIntervalHandle=setInterval(()=>{const _0x2faefc=_0x10828f;executorTick()['catch'](_0x5b2831=>warn(_0x2faefc(0x3a7)+_0x2faefc(0x2a1)+_0x2faefc(0x124)+(_0x5b2831?.['message']||_0x5b2831)));},CHECK_INTERVAL_MS),info(_0x10828f(0x2db)+_0x10828f(0x2fa)+_0x10828f(0x210)+_0x10828f(0x2c0)+'nutes)');},_0x29ad6d);}function stopScheduler(){const _0x2ba9f5=_0x353219;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x2ba9f5(0x2db)+'heduler\x20st'+_0x2ba9f5(0x268)));}function extractTextFromMessage(_0x4bfab3){const _0x1b1914=_0x353219;if(!_0x4bfab3||!_0x4bfab3[_0x1b1914(0x190)])return'';const _0x5cdea2=_0x4bfab3[_0x1b1914(0x190)];if(_0x5cdea2['conversati'+'on'])return _0x5cdea2[_0x1b1914(0x39a)+'on'];if(_0x5cdea2[_0x1b1914(0x1d6)+_0x1b1914(0x2f8)]?.[_0x1b1914(0x1cc)])return _0x5cdea2[_0x1b1914(0x1d6)+_0x1b1914(0x2f8)][_0x1b1914(0x1cc)];if(_0x5cdea2[_0x1b1914(0x1a8)+'ge']?.['caption'])return _0x5cdea2['imageMessa'+'ge'][_0x1b1914(0x28e)];if(_0x5cdea2['videoMessa'+'ge']?.[_0x1b1914(0x28e)])return _0x5cdea2['videoMessa'+'ge']['caption'];if(_0x5cdea2[_0x1b1914(0x1c9)+'ponseMessa'+'ge']?.[_0x1b1914(0x2e1)+'ttonId'])return _0x5cdea2[_0x1b1914(0x1c9)+'ponseMessa'+'ge'][_0x1b1914(0x2e1)+'ttonId'];if(_0x5cdea2['listRespon'+'seMessage']?.[_0x1b1914(0x1d1)+_0x1b1914(0x22c)]?.[_0x1b1914(0x143)+'wId'])return _0x5cdea2[_0x1b1914(0x1c5)+_0x1b1914(0x17e)][_0x1b1914(0x1d1)+'ctReply'][_0x1b1914(0x143)+_0x1b1914(0x22f)];return'';}function splitFirstLinePreserveRest(_0x11ae7c){const _0x5b9edc=_0x353219,_0x57b096=_0x11ae7c[_0x5b9edc(0x298)](/\r?\n/),_0x44a6ff=_0x57b096[_0x5b9edc(0x1ea)]>0x2e5+-0xa49+0x764?_0x57b096['shift']():'',_0x16bb24=_0x57b096[_0x5b9edc(0x146)]('\x0a'),_0x4582ce=_0x44a6ff[_0x5b9edc(0x265)]()[_0x5b9edc(0x298)](/\s+/)[_0x5b9edc(0x399)](Boolean);return{'firstLine':_0x44a6ff,'restText':_0x16bb24,'firstTokens':_0x4582ce};}function findGpAndCleanBodyFromRestAndFirst(_0x1e03a0,_0x55ddf7){const _0x45b783=_0x353219,_0x538f86=(_0x55ddf7&&_0x55ddf7['length']?_0x55ddf7:'')+'\x0a'+(_0x1e03a0||''),_0x264ce0=_0x538f86[_0x45b783(0x251)](/\bgp[:\s]+(\S+)/i),_0x541c26=_0x264ce0?_0x264ce0[0x8f*-0xb+0x16*-0x6d+-0xf84*-0x1]['trim']():null;let _0x4ecca8=(_0x55ddf7||'')['split'](/\r?\n/);if(!_0x4ecca8||_0x4ecca8[_0x45b783(0x1ea)]===-0xa4f+0x1fcf+-0xac0*0x2||_0x4ecca8[_0x45b783(0x24a)](_0x38534d=>!_0x38534d[_0x45b783(0x265)]()))return{'gpValue':_0x541c26,'cleanedBody':''};const _0x5a09a5=_0x4ecca8[_0x45b783(0x259)](_0x69144b=>_0x69144b[_0x45b783(0x369)](/^\s*gp[:\s]+\S+\s*$/i,'')['replace'](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x45b783(0x26a)]())[_0x45b783(0x399)](_0x30c057=>_0x30c057[_0x45b783(0x1ea)]>-0x21*0x53+-0x505+0xfb8),_0x4402e3=_0x5a09a5[_0x45b783(0x146)]('\x0a')[_0x45b783(0x265)]();return{'gpValue':_0x541c26,'cleanedBody':_0x4402e3};}function extractInlineAfterToken(_0x2e0953,_0x4942ba){const _0x539986=_0x353219;if(!_0x2e0953||!_0x4942ba)return'';try{const _0x6d5171=new RegExp('\x5cb'+_0x4942ba[_0x539986(0x369)](/[.*+?^${}()|[\\]\\\\]/g,_0x539986(0x332))+'\x5cb'),_0x14b049=_0x2e0953[_0x539986(0x251)](_0x6d5171);if(!_0x14b049)return'';const _0x26f6dc=_0x2e0953[_0x539986(0x182)](_0x14b049[-0x8cb*0x1+-0xfc6+-0x1891*-0x1]),_0xe74d17=_0x26f6dc+_0x14b049[-0x137+-0x1705+-0xc*-0x205][_0x539986(0x1ea)];let _0x4f0ef1=_0x2e0953[_0x539986(0x36b)](_0xe74d17)[_0x539986(0x369)](/^\s+/,'');return _0x4f0ef1=_0x4f0ef1[_0x539986(0x369)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x539986(0x265)](),_0x4f0ef1;}catch(_0x56caf2){return'';}}const USAGE=_0x353219(0x366)+_0x353219(0x1b9)+'s*\x0a\x0a>\x20*sch'+'ed\x20add*\x20`<'+_0x353219(0x271)+'YY-MM-DDTH'+_0x353219(0x266)+_0x353219(0x2de)+'ys/minutes'+_0x353219(0x1a6)+'ge...>`\x0a‣\x20'+'Message\x20ca'+_0x353219(0x2c7)+'ime\x20inline'+'\x20or\x20on\x20nex'+_0x353219(0x139)+_0x353219(0x20b)+'ewlines\x20pr'+_0x353219(0x12c)+'>\x20*sched\x20o'+_0x353219(0x279)+_0x353219(0x22d)+_0x353219(0x39c)+_0x353219(0x117)+_0x353219(0x3b9)+_0x353219(0x348)+_0x353219(0x351)+_0x353219(0x1a9)+_0x353219(0x1c7)+'les\x20for\x20to'+_0x353219(0x128)+'s\x20at\x20given'+'\x20time.\x0a\x0a>\x20'+_0x353219(0x18e)+_0x353219(0x21d)+_0x353219(0x385)+'led\x20messag'+_0x353219(0x272)+'hed\x20delete'+_0x353219(0x3b4)+'\x20|\x20number,'+_0x353219(0x201)+_0x353219(0x2d8)+_0x353219(0x17b)+_0x353219(0x303)+_0x353219(0x16e)+_0x353219(0x25c)+_0x353219(0x15d)+_0x353219(0x276)+_0x353219(0x394)+_0x353219(0x39b)+_0x353219(0x1f0)+_0x353219(0x290)+_0x353219(0x383)+_0x353219(0x339)+'\x20the\x20time\x20'+_0x353219(0x1ee)+_0x353219(0x294)+_0x353219(0x209)+_0x353219(0x390)+_0x353219(0x1c3)+_0x353219(0x1b2)+_0x353219(0x130)+_0x353219(0x13f)+_0x353219(0x3b1)+_0x353219(0x347)+'=2`\x20every\x20'+_0x353219(0x212)+_0x353219(0x1f6)+_0x353219(0x2af)+_0x353219(0x3b4)+_0x353219(0x2e3)+_0x353219(0x2f5)+_0x353219(0x152)+'eduled\x20mes'+'sage.\x0a\x0a>\x20*'+_0x353219(0x1f3)+_0x353219(0x297)+_0x353219(0x37b)+_0x353219(0x2cb)+_0x353219(0x31b)+_0x353219(0x342)+_0x353219(0x179),processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(0xe*0x1e+0x1242+-0x9e9*0x2)*(0x2*0x78b+-0x1732+0xc04);function markCmdProcessed(_0x32135){const _0x18c906=_0x353219;if(!_0x32135)return;if(processedCmdKeys['has'](_0x32135))try{clearTimeout(processedCmdKeys[_0x18c906(0x1f5)](_0x32135));}catch(_0x333a9a){}const _0x385b4a=setTimeout(()=>processedCmdKeys[_0x18c906(0x20d)](_0x32135),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x18c906(0x1eb)](_0x32135,_0x385b4a);}function isCmdProcessed(_0x5ca733){const _0x55a00f=_0x353219;return _0x5ca733&&processedCmdKeys[_0x55a00f(0x17c)](_0x5ca733);}async function resolveDefaultChatJidsForUser(_0x2f46de){const _0xf062f7=_0x353219;try{const _0x2b178c=await getDefault(_0x2f46de)['catch'](()=>null);if(!_0x2b178c||Array[_0xf062f7(0x39e)](_0x2b178c)&&_0x2b178c[_0xf062f7(0x1ea)]===-0x2*0x259+0xc1*-0x1+0x573)return[];const _0x152dcb=Array['isArray'](_0x2b178c)?_0x2b178c:[_0x2b178c],_0x31d2a2=[];for(const _0x3381d3 of _0x152dcb){try{const _0x328487=await getConnection(_0x3381d3)[_0xf062f7(0x21e)](()=>null);if(Array[_0xf062f7(0x39e)](_0x328487))_0x31d2a2[_0xf062f7(0x27a)](..._0x328487);else{if(_0x328487)_0x31d2a2[_0xf062f7(0x27a)](String(_0x328487));}}catch(_0x29684e){warn(_0xf062f7(0x224)+_0xf062f7(0x2d5)+'nnection\x20'+_0x3381d3+_0xf062f7(0x2c1)+(_0x29684e?.[_0xf062f7(0x190)]||_0x29684e));}}return uniqArray(_0x31d2a2);}catch(_0xda1875){return warn('[sched]\x20re'+_0xf062f7(0x2f3)+_0xf062f7(0x126)+_0xf062f7(0x2b6)+_0xf062f7(0x1a7)+(_0xda1875?.['message']||_0xda1875)),[];}}async function getCombinedSchedulesForChats(_0x384679){const _0x448029=_0x353219,_0x575b62=[];for(const _0x2b70db of _0x384679){const _0xe83092=await listSchedulesForChat(_0x2b70db);for(const _0x28480e of _0xe83092){_0x575b62[_0x448029(0x27a)](Object['assign']({},_0x28480e,{'chat_jid':_0x2b70db}));}}return _0x575b62;}async function resolveNumberToDbId(_0x11a238,_0x1b2f09){const _0x3c584a=_0x353219;if(!_0x11a238||!Number[_0x3c584a(0x310)](_0x11a238)||_0x11a238<-0x2*-0x167+0x1143*-0x1+-0xe76*-0x1)return null;const _0x2a613c=await getCombinedSchedulesForChats(_0x1b2f09);if(!_0x2a613c||_0x2a613c['length']<_0x11a238)return null;return _0x2a613c[_0x11a238-(-0x294+0x1*-0x20b7+0x234c)]['id'];}async function findStoredMatchFromFindings(_0x1ad778=[]){const _0x2dffaa=_0x353219;try{const _0x2b6b25=await listSudo();if(!Array['isArray'](_0x2b6b25)||_0x2b6b25[_0x2dffaa(0x1ea)]===-0x11*-0xe1+0x10e8+0x1f*-0x107)return null;const _0x59f0cf=new Set(_0x2b6b25[_0x2dffaa(0x259)](String));for(const _0x3e0e35 of _0x1ad778||[]){if(!_0x3e0e35||typeof _0x3e0e35[_0x2dffaa(0x307)]!==_0x2dffaa(0x281))continue;const _0x14524a=normalizeToJid(_0x3e0e35[_0x2dffaa(0x307)]);if(_0x14524a&&_0x59f0cf[_0x2dffaa(0x17c)](_0x14524a))return _0x14524a;if(_0x59f0cf['has'](_0x3e0e35[_0x2dffaa(0x307)]))return _0x3e0e35['jid'];const _0x53d673=String(_0x3e0e35[_0x2dffaa(0x307)])[_0x2dffaa(0x298)]('@')[-0x890*0x4+0x5*0x59d+0x1*0x62f][_0x2dffaa(0x298)](':')[0x494*-0x6+0xb5*-0x12+0x2832];if(_0x53d673)for(const _0x34b056 of _0x2b6b25){const _0x253764=String(_0x34b056)[_0x2dffaa(0x298)]('@')[-0x2477+-0x1*-0x147+0x233*0x10];if(_0x253764&&_0x253764===_0x53d673)return _0x34b056;}}return null;}catch(_0x47cc8b){return warn(_0x2dffaa(0x127)+_0x2dffaa(0x114)+_0x2dffaa(0x23b)+_0x2dffaa(0x180)+'r:\x20'+(_0x47cc8b?.[_0x2dffaa(0x190)]||_0x47cc8b)),null;}}export async function onMessage(_0x400e66){const _0x25cad6=_0x353219;try{if(!_0x400e66||!_0x400e66[_0x25cad6(0x380)]||!_0x400e66[_0x25cad6(0x190)])return;const _0xed7d1f=String(_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x19c)]||'')+'::'+String(_0x400e66[_0x25cad6(0x380)]['id']||_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x191)+'t']||'');if(isCmdProcessed(_0xed7d1f))return;markCmdProcessed(_0xed7d1f);if(!_0x400e66[_0x25cad6(0x21f)])return;const _0x118c5f=typeof _0x400e66['text']==='string'&&_0x400e66['text'][_0x25cad6(0x265)]()['length']?_0x400e66[_0x25cad6(0x1cc)]:extractTextFromMessage(_0x400e66)||'';if(!_0x118c5f)return;const _0x50e970=_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x19c)],_0x5bafed=typeof _0x50e970===_0x25cad6(0x281)&&_0x50e970[_0x25cad6(0x1da)](_0x25cad6(0x306));if(_0x5bafed){let _0x2c48c0=![];try{_0x2c48c0=await isadmin(botRef,_0x400e66);}catch(_0x13e5c4){warn(_0x25cad6(0x174)+_0x25cad6(0x24f)+_0x25cad6(0x147)),_0x2c48c0=![];}if(!_0x2c48c0)return;const _0x34af72=String(_0x118c5f)[_0x25cad6(0x265)](),{firstLine:_0x19da07,restText:_0x204fcb,firstTokens:_0x19fcda}=splitFirstLinePreserveRest(_0x34af72),_0x375368=(_0x19fcda[-0x161*0x3+0x1e1*-0x7+0x114a]||'')[_0x25cad6(0x295)+'e']();if(!commands['includes'](_0x375368))return;const _0x52f45a=(_0x19fcda[-0x10e1+-0x1ed7+0x2fb9]||'')[_0x25cad6(0x295)+'e'](),_0x199bb6=_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x191)+'t']||_0x400e66['key'][_0x25cad6(0x141)]||_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x19c)]||'',_0x4dbe61=(_0x199bb6||'')[_0x25cad6(0x298)]('@')[-0x245b+0x35*-0xb5+0x49d4],_0x221376=await resolveDefaultChatJidsForUser(_0x4dbe61),_0x3e9862=_0x50e970;if(!_0x221376||_0x221376[_0x25cad6(0x1ea)]===0x1663+0x1ff8+-0x365b){await sendWithRetry(_0x3e9862,{'text':_0x25cad6(0x355)+_0x25cad6(0x1ff)+_0x25cad6(0x2cc)+_0x25cad6(0x20a)+_0x25cad6(0x34d)+'default\x20wi'+_0x25cad6(0x23c)+_0x25cad6(0x14f)});return;}await handleSchedCommandGroup(_0x400e66,{'firstLine':_0x19da07,'restText':_0x204fcb,'firstTokens':_0x19fcda,'sub':_0x52f45a,'defaultChatJids':_0x221376,'confirmationTarget':_0x3e9862,'senderJid':_0x199bb6});return;}const _0x2cc9e3=Boolean(_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x131)]);let _0x53d2c2=null;if(_0x2cc9e3){const _0x5c003a=getBotJid();if(!_0x5c003a){warn('[sched]\x20PM'+':\x20bot\x20JID\x20'+_0x25cad6(0x222)+'ble\x20for\x20re'+'plies\x20(fro'+_0x25cad6(0x2f1));return;}_0x53d2c2=_0x5c003a;}else{let _0x547407=![];try{_0x547407=await isSudo(botRef,_0x400e66);}catch(_0x3ad796){_0x547407=![];}if(!_0x547407)return;const _0x9374ab=userJidFromCtx(_0x400e66)||{'findings':[]},_0x5a8cd6=await findStoredMatchFromFindings(_0x9374ab[_0x25cad6(0x36d)]||[]);if(!_0x5a8cd6)return;_0x53d2c2=_0x5a8cd6;}const _0x130c39=String(_0x118c5f),{firstLine:_0x12e1bc,restText:_0x24c296,firstTokens:_0x3e3cc2}=splitFirstLinePreserveRest(_0x130c39),_0x4a7a3b=(_0x3e3cc2[-0x8be+0xaa*-0x39+-0x1c*-0x1aa]||'')[_0x25cad6(0x295)+'e']();if(!commands[_0x25cad6(0x35e)](_0x4a7a3b))return;const _0x47354d=(_0x3e3cc2[0x19a2+-0x1283*-0x2+0x2b*-0x175]||'')[_0x25cad6(0x295)+'e']();if(!_0x47354d||_0x47354d===_0x25cad6(0x35d)){await sendWithRetry(_0x53d2c2,{'text':USAGE});return;}const _0x53fcb3=[_0x25cad6(0x2e9),'add','list','delete','edit',_0x25cad6(0x330),_0x25cad6(0x336),_0x25cad6(0x169)],{gpValue:_0x42ecc7,cleanedBody:_0x5a32cf}=findGpAndCleanBodyFromRestAndFirst(_0x12e1bc,_0x24c296);if(_0x53fcb3[_0x25cad6(0x35e)](_0x47354d)&&!_0x42ecc7){await sendWithRetry(_0x53d2c2,{'text':_0x25cad6(0x11a)+_0x25cad6(0x370)+':<alias|ji'+_0x25cad6(0x237)+_0x25cad6(0x343)+_0x25cad6(0x286)+_0x25cad6(0x288)+_0x25cad6(0x2d0)+'hed\x20add\x2009'+_0x25cad6(0x231)+_0x25cad6(0x3ac)+_0x25cad6(0x2a7)+_0x25cad6(0x28a)});return;}let _0x34e227=[];if(_0x42ecc7){const _0x5aa8ac=_0x42ecc7[_0x25cad6(0x265)]();if(_0x5aa8ac['toLowerCas'+'e']()===_0x25cad6(0x24c))_0x34e227=await _0x1b3ccc['getUniqueJ'+_0x25cad6(0x1b3)]();else{const _0x34b75b=await _0x1b3ccc[_0x25cad6(0x248)+'e'](_0x5aa8ac);if(_0x34b75b)_0x34e227=[_0x34b75b];else{if(_0x5aa8ac[_0x25cad6(0x35e)]('@'))_0x34e227=[_0x1b3ccc[_0x25cad6(0x24d)+_0x25cad6(0x2da)](_0x5aa8ac)];}}if(_0x53fcb3['includes'](_0x47354d)&&(!_0x34e227||_0x34e227[_0x25cad6(0x1ea)]===0x9a9*0x1+-0x21af+0x401*0x6)){await sendWithRetry(_0x53d2c2,{'text':_0x25cad6(0x355)+_0x25cad6(0x1b0)+_0x25cad6(0x1e2)+_0x42ecc7+(_0x25cad6(0x197)+_0x25cad6(0x324)+'all\x20or\x20a\x20g'+'roup\x20JID.')});return;}}await handleSchedCommandPM(_0x400e66,{'sub':_0x47354d,'firstLine':_0x12e1bc,'restText':_0x24c296,'firstTokens':_0x3e3cc2,'targetChatJids':_0x34e227,'confirmationTarget':_0x53d2c2,'senderJid':_0x400e66[_0x25cad6(0x380)][_0x25cad6(0x191)+'t']||_0x400e66[_0x25cad6(0x380)]['from']||'','cleanedBody':_0x5a32cf});return;}catch(_0x2a7989){error(_0x25cad6(0x121)+'Message\x20er'+_0x25cad6(0x1a7)+(_0x2a7989?.[_0x25cad6(0x190)]||_0x2a7989));}}async function handleSchedCommandGroup(_0x4a2cc3,{firstLine:_0x3a2f86,restText:_0x32869b,firstTokens:_0x134f0a,sub:_0x5ae129,defaultChatJids:_0x3a0996,confirmationTarget:_0x4c857d,senderJid:_0x5b7164}){const _0x34ca86=_0x353219;try{if(!_0x5ae129||_0x5ae129===_0x34ca86(0x35d)){await sendWithRetry(_0x4c857d,{'text':USAGE});return;}if(_0x5ae129===_0x34ca86(0x2e9)){const _0x1e52a4=_0x134f0a[-0xb8d*-0x3+-0x2267+-0x2*0x1f],_0x3471b7=_0x134f0a[-0x7*0x115+-0x49*0x4f+0x1e1d]&&/^\d+$/[_0x34ca86(0x388)](_0x134f0a[-0x998+0x1*0x1af3+-0x1158])?Number(_0x134f0a[-0x1*0x1abd+0xed+0xb*0x259]):null;let _0x2b3b56='';if(_0x1e52a4){const _0x3bd9e5=new RegExp('\x5cb'+_0x1e52a4[_0x34ca86(0x369)](/[.*+?^${}()|[\\]\\\\]/g,_0x34ca86(0x332))+'\x5cb'),_0x3399fe=_0x3a2f86[_0x34ca86(0x251)](_0x3bd9e5);if(_0x3399fe){const _0x85e11d=_0x3a2f86[_0x34ca86(0x182)](_0x3399fe[0x32*-0x4a+0x1bff*-0x1+0x2a73]),_0x42347e=_0x85e11d+_0x3399fe[-0xe54+-0x1*-0x1435+-0x5e1][_0x34ca86(0x1ea)];_0x2b3b56=_0x3a2f86[_0x34ca86(0x36b)](_0x42347e)['replace'](/^\s*/,'');if(_0x2b3b56&&/^\d+/[_0x34ca86(0x388)](_0x2b3b56))_0x2b3b56=_0x2b3b56[_0x34ca86(0x369)](/^\d+\s*/,'');}}const _0x149356=_0x2b3b56&&_0x32869b?_0x2b3b56+'\x0a'+_0x32869b:_0x2b3b56||_0x32869b||'';if(!_0x1e52a4||!_0x149356||_0x149356[_0x34ca86(0x265)]()[_0x34ca86(0x1ea)]===0x14c3+0x1f22+0x33e5*-0x1){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x376)+'ed\x20once\x20<H'+_0x34ca86(0x269)+_0x34ca86(0x391)+_0x34ca86(0x200)});return;}const _0x284212=[];for(const _0x2d18da of _0x3a0996){const _0x45e3b0=await getChatTimezone(_0x2d18da)||DEFAULT_TIMEZONE,_0x36cc88=parseTimeToken(_0x1e52a4,_0x45e3b0);if(!_0x36cc88){_0x284212[_0x34ca86(0x27a)]({'chat':_0x2d18da,'ok':![],'reason':_0x34ca86(0x30d)+'ed'});continue;}if(_0x36cc88[_0x34ca86(0x358)]===_0x34ca86(0x1f8)){const _0x45e809=_0x36cc88['dt'],_0x3b8d1b=Math[_0x34ca86(0x13c)](_0x45e809[_0x34ca86(0x148)]()/(0x1*-0x1795+-0x204+0x1d81*0x1)),_0xaf4c8a=await addScheduleRow({'chat_jid':_0x2d18da,'message':_0x149356,'time':null,'send_at':_0x3b8d1b,'frequency':_0x34ca86(0x2e9),'timezone':_0x45e809[_0x34ca86(0x344)]||_0x45e3b0,'creator_jid':_0x5b7164});if(_0xaf4c8a)_0x284212['push']({'chat':_0x2d18da,'ok':!![],'id':_0xaf4c8a,'when':_0x45e809['toLocaleSt'+_0x34ca86(0x33d)](DateTime['DATETIME_M'+'ED'])});else _0x284212[_0x34ca86(0x27a)]({'chat':_0x2d18da,'ok':![],'reason':_0x34ca86(0x2ac)});continue;}if(_0x36cc88[_0x34ca86(0x358)]===_0x34ca86(0x2f9)){const [_0x5f542e,_0x447920]=_0x36cc88[_0x34ca86(0x2f9)][_0x34ca86(0x298)](':')[_0x34ca86(0x259)](Number);let _0x2e04a3=DateTime[_0x34ca86(0x2a9)]()[_0x34ca86(0x30c)](_0x45e3b0),_0xbbbd84=_0x2e04a3[_0x34ca86(0x321)](_0x34ca86(0x15f))['set']({'hour':_0x5f542e,'minute':_0x447920,'second':0x0,'millisecond':0x0});if(_0x3471b7&&Number[_0x34ca86(0x310)](_0x3471b7)&&_0x3471b7>=0x18d3+0x19*-0x10d+0x173)_0xbbbd84=_0xbbbd84['plus']({'days':Number(_0x3471b7)});else{if(_0xbbbd84<=_0x2e04a3)_0xbbbd84=_0xbbbd84[_0x34ca86(0x14d)]({'days':0x1});}const _0x2787eb=Math[_0x34ca86(0x13c)](_0xbbbd84[_0x34ca86(0x148)]()/(-0x125d*-0x1+0xad4+-0x1*0x1949)),_0x2b99cd=await addScheduleRow({'chat_jid':_0x2d18da,'message':_0x149356,'time':null,'send_at':_0x2787eb,'frequency':_0x34ca86(0x2e9),'timezone':_0x45e3b0,'creator_jid':_0x5b7164});if(_0x2b99cd)_0x284212[_0x34ca86(0x27a)]({'chat':_0x2d18da,'ok':!![],'id':_0x2b99cd,'when':_0xbbbd84['toLocaleSt'+_0x34ca86(0x33d)](DateTime[_0x34ca86(0x2ed)+'ED'])});else _0x284212['push']({'chat':_0x2d18da,'ok':![],'reason':_0x34ca86(0x2ac)});continue;}_0x284212['push']({'chat':_0x2d18da,'ok':![],'reason':_0x34ca86(0x1fb)+_0x34ca86(0x2fe)});}const _0xef2653=_0x284212[_0x34ca86(0x399)](_0x2cdde6=>_0x2cdde6['ok']),_0x4b2b79=_0x284212[_0x34ca86(0x399)](_0x1aacb5=>!_0x1aacb5['ok']);let _0x5dcfd0='';if(_0xef2653[_0x34ca86(0x1ea)]){_0x5dcfd0+='Scheduled\x20'+_0x34ca86(0x345)+'r\x20'+_0xef2653[_0x34ca86(0x1ea)]+(_0x34ca86(0x1af)+_0x34ca86(0x389)+_0x34ca86(0x2ab));for(const _0x55d183 of _0xef2653)_0x5dcfd0+='•\x20'+_0x55d183[_0x34ca86(0x142)]+_0x34ca86(0x1fc)+_0x55d183['id']+_0x34ca86(0x2ca)+_0x55d183[_0x34ca86(0x2a5)]+'\x0a';}if(_0x4b2b79[_0x34ca86(0x1ea)]){_0x5dcfd0+=_0x34ca86(0x1d3)+'\x20'+_0x4b2b79[_0x34ca86(0x1ea)]+(_0x34ca86(0x1af)+_0x34ca86(0x389)+_0x34ca86(0x2ab));for(const _0x527211 of _0x4b2b79)_0x5dcfd0+='•\x20'+_0x527211[_0x34ca86(0x142)]+_0x34ca86(0x241)+_0x527211[_0x34ca86(0x1d2)]+'\x0a';}await sendWithRetry(_0x4c857d,{'text':_0x5dcfd0[_0x34ca86(0x265)]()||_0x34ca86(0x30e)+'es\x20created'+'.'});return;}if(_0x5ae129===_0x34ca86(0x2bb)){if(!_0x134f0a[-0xac*-0x10+0x2594+-0x3052]){await sendWithRetry(_0x4c857d,{'text':'Usage:\x20sch'+_0x34ca86(0x261)+_0x34ca86(0x2e6)+_0x34ca86(0x2ee)+'|in\x20N\x20hour'+_0x34ca86(0x235)+_0x34ca86(0x1de)+'sage...>'});return;}const _0x4984dd=_0x134f0a[-0xa45+0x45f*-0x2+0x21d*0x9],_0x3fa6e9=_0x134f0a[-0xaab*-0x3+-0x1de3+-0x31*0xb]&&/^\d+$/[_0x34ca86(0x388)](_0x134f0a[0x10c5+0x1*-0x1425+0x363])?Number(_0x134f0a[0x2*0x2b1+0x1330+-0x1*0x188f]):null;let _0x33260d='';const _0x497960=new RegExp('\x5cb'+_0x4984dd[_0x34ca86(0x369)](/[.*+?^${}()|[\\]\\\\]/g,_0x34ca86(0x332))+'\x5cb'),_0x2a75e5=_0x3a2f86['match'](_0x497960);if(_0x2a75e5){const _0x444fef=_0x3a2f86['indexOf'](_0x2a75e5[0xcb*0x21+0x1*-0x6c5+-0x1366]),_0x4b4e98=_0x444fef+_0x2a75e5[-0x1448+0x2660+-0x486*0x4][_0x34ca86(0x1ea)];_0x33260d=_0x3a2f86[_0x34ca86(0x36b)](_0x4b4e98)[_0x34ca86(0x369)](/^\s*/,'');if(_0x33260d&&/^\d+/['test'](_0x33260d))_0x33260d=_0x33260d[_0x34ca86(0x369)](/^\d+\s*/,'');}const _0x55a6dd=_0x33260d&&_0x32869b?_0x33260d+'\x0a'+_0x32869b:_0x33260d||_0x32869b||'';if(!_0x55a6dd||_0x55a6dd[_0x34ca86(0x265)]()[_0x34ca86(0x1ea)]===0x14b*0x1a+0x78*-0x4+-0x1fbe){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x2c4)+_0x34ca86(0x206)+_0x34ca86(0x1a3)+_0x34ca86(0x1dd)+_0x34ca86(0x25b)+_0x34ca86(0x2e4)+_0x34ca86(0x135)+_0x34ca86(0x1ac)});return;}const _0x22f15a=[];for(const _0x396e3c of _0x3a0996){const _0xc6fa49=await getChatTimezone(_0x396e3c)||DEFAULT_TIMEZONE,_0x61304c=parseTimeToken(_0x4984dd,_0xc6fa49);if(!_0x61304c){_0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':![],'reason':_0x34ca86(0x30d)+'ed'});continue;}const _0x57a608=_0x5b7164;if(_0x61304c[_0x34ca86(0x358)]===_0x34ca86(0x1f8)){const _0x2b1200=_0x61304c['dt'],_0x52d6bb=Math[_0x34ca86(0x13c)](_0x2b1200[_0x34ca86(0x148)]()/(-0x30*0xcb+0xb*-0x8e+-0x3012*-0x1)),_0x39bb9d=await addScheduleRow({'chat_jid':_0x396e3c,'message':_0x55a6dd,'time':null,'send_at':_0x52d6bb,'frequency':_0x34ca86(0x2e9),'timezone':_0x2b1200[_0x34ca86(0x344)]||_0xc6fa49,'creator_jid':_0x57a608});if(_0x39bb9d)_0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':!![],'id':_0x39bb9d,'when':_0x2b1200[_0x34ca86(0x167)+'ring'](DateTime[_0x34ca86(0x2ed)+'ED'])});else _0x22f15a['push']({'chat':_0x396e3c,'ok':![],'reason':'db_failed'});continue;}if(_0x61304c[_0x34ca86(0x358)]==='hhmm'){const _0x3d6cc7=_0x61304c['hhmm'];if(_0x3fa6e9&&Number[_0x34ca86(0x310)](_0x3fa6e9)&&_0x3fa6e9>=0x1b29+0x150c+-0x14*0x269){let _0x483982=DateTime['now']()[_0x34ca86(0x30c)](_0xc6fa49);const [_0x3dc875,_0x346527]=_0x3d6cc7[_0x34ca86(0x298)](':')[_0x34ca86(0x259)](Number);let _0xc8651d=_0x483982[_0x34ca86(0x321)](_0x34ca86(0x15f))['set']({'hour':_0x3dc875,'minute':_0x346527,'second':0x0,'millisecond':0x0});_0xc8651d=_0xc8651d[_0x34ca86(0x14d)]({'days':Number(_0x3fa6e9)});const _0x391069=Math[_0x34ca86(0x13c)](_0xc8651d[_0x34ca86(0x148)]()/(-0x1df8+0x301*0x2+0x3*0x94a)),_0x541f22=await addScheduleRow({'chat_jid':_0x396e3c,'message':_0x55a6dd,'time':null,'send_at':_0x391069,'frequency':'once','timezone':_0xc6fa49,'creator_jid':_0x57a608});if(_0x541f22)_0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':!![],'id':_0x541f22,'when':_0xc8651d[_0x34ca86(0x167)+'ring'](DateTime[_0x34ca86(0x2ed)+'ED'])});else _0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':![],'reason':_0x34ca86(0x2ac)});continue;}const _0x1245ca=await addScheduleRow({'chat_jid':_0x396e3c,'message':_0x55a6dd,'time':_0x3d6cc7,'send_at':null,'frequency':_0x34ca86(0x25a),'timezone':_0xc6fa49,'creator_jid':_0x57a608});if(_0x1245ca)_0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':!![],'id':_0x1245ca,'when':_0x3d6cc7+'\x20('+_0xc6fa49+')'});else _0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':![],'reason':_0x34ca86(0x2ac)});continue;}_0x22f15a[_0x34ca86(0x27a)]({'chat':_0x396e3c,'ok':![],'reason':_0x34ca86(0x1fb)+'d_time'});}const _0x907ec9=_0x22f15a[_0x34ca86(0x399)](_0x5c22c1=>_0x5c22c1['ok']),_0x58103c=_0x22f15a['filter'](_0x514fde=>!_0x514fde['ok']);let _0x19f365='';if(_0x907ec9[_0x34ca86(0x1ea)]){_0x19f365+=_0x34ca86(0x242)+_0x34ca86(0x187)+_0x907ec9['length']+(_0x34ca86(0x1af)+_0x34ca86(0x389)+_0x34ca86(0x2ab));for(const _0x20b930 of _0x907ec9)_0x19f365+='•\x20'+_0x20b930[_0x34ca86(0x142)]+_0x34ca86(0x1fc)+_0x20b930['id']+_0x34ca86(0x3a5)+_0x20b930[_0x34ca86(0x2a5)]+'\x0a';}if(_0x58103c[_0x34ca86(0x1ea)]){_0x19f365+=_0x34ca86(0x1d3)+'\x20'+_0x58103c[_0x34ca86(0x1ea)]+(_0x34ca86(0x1af)+'onnection('+_0x34ca86(0x2ab));for(const _0x4bd514 of _0x58103c)_0x19f365+='•\x20'+_0x4bd514[_0x34ca86(0x142)]+_0x34ca86(0x241)+_0x4bd514[_0x34ca86(0x1d2)]+'\x0a';}await sendWithRetry(_0x4c857d,{'text':_0x19f365[_0x34ca86(0x265)]()||'No\x20schedul'+'es\x20created'+'.'});return;}if(_0x5ae129==='list'){const _0x1cb674=await getCombinedSchedulesForChats(_0x3a0996);if(!_0x1cb674[_0x34ca86(0x1ea)]){await sendWithRetry(_0x4c857d,{'text':'No\x20schedul'+_0x34ca86(0x2dd)+'s\x20found\x20fo'+_0x34ca86(0x1dc)+':\x20'+_0x3a0996['join'](',\x20')});return;}const _0xe46cc=_0x1cb674[_0x34ca86(0x259)]((_0x39998a,_0x5eb5b0)=>{const _0x166a8f=_0x34ca86,_0x258723=_0x39998a['send_at']?DateTime[_0x166a8f(0x249)](Number(_0x39998a['send_at'])*(-0x23*0x103+0x1f80+-0x3*-0x29b))[_0x166a8f(0x30c)](_0x39998a[_0x166a8f(0x164)]||DEFAULT_TIMEZONE)[_0x166a8f(0x21a)]({'suppressSeconds':!![]}):_0x39998a['time']?_0x39998a['time']+'\x20('+(_0x39998a[_0x166a8f(0x164)]||_0x166a8f(0x155)+_0x166a8f(0x25e))+')':_0x166a8f(0x18f),_0x44caaa=(_0x39998a[_0x166a8f(0x190)]||'')[_0x166a8f(0x298)]('\x0a')[_0x166a8f(0x259)](_0x518455=>_0x518455[_0x166a8f(0x26a)]())[_0x166a8f(0x146)]('\x0a');return _0x5eb5b0+(0xb80+-0x1*0x119b+0x2e*0x22)+_0x166a8f(0x175)+_0x39998a['id']+_0x166a8f(0x3a6)+_0x39998a[_0x166a8f(0x163)]+_0x166a8f(0x3a5)+_0x258723+_0x166a8f(0x144)+(_0x39998a[_0x166a8f(0x330)]||_0x166a8f(0x25a))+_0x166a8f(0x328)+(_0x39998a['enabled']?_0x166a8f(0x1a4):'no')+_0x166a8f(0x353)+_0x44caaa;}),_0x3ae798=_0x34ca86(0x242)+'for\x20defaul'+_0x34ca86(0x3ab)+_0x3a0996[_0x34ca86(0x146)](',\x20')+'):\x0a\x0a'+_0xe46cc[_0x34ca86(0x146)]('\x0a\x0a');await sendWithRetry(_0x4c857d,{'text':_0x3ae798});return;}if(_0x5ae129===_0x34ca86(0x20d)){const _0x280013=_0x134f0a['slice'](-0x1*0xa42+0x17ae+-0xd6a);let _0x4e5153=_0x280013['join']('\x20');if(!_0x4e5153&&_0x32869b)_0x4e5153=_0x32869b[_0x34ca86(0x265)]();if(!_0x4e5153){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x376)+_0x34ca86(0x25d)+'<number|nu'+_0x34ca86(0x28c)+_0x34ca86(0x176)});return;}if(/^\s*all\s*$/i['test'](_0x4e5153)){let _0x29af4e=0x18*0x76+0x149*0x15+-0x260d;for(const _0x5157e8 of _0x3a0996){const _0x47c7f5=await removeAllSchedulesForChat(_0x5157e8);_0x29af4e+=_0x47c7f5;}await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x392)+_0x29af4e+('\x20schedule('+_0x34ca86(0x2cf)+_0x34ca86(0x37a))+_0x3a0996[_0x34ca86(0x146)](',\x20')});return;}const _0x4cd577=_0x4e5153[_0x34ca86(0x298)](/[\s,]+/)[_0x34ca86(0x259)](_0x53938f=>_0x53938f[_0x34ca86(0x265)]())[_0x34ca86(0x399)](Boolean),_0x404b41=_0x4cd577[_0x34ca86(0x259)](_0x2ea7bc=>Number(_0x2ea7bc))[_0x34ca86(0x399)](_0x2a1289=>!Number[_0x34ca86(0x1be)](_0x2a1289)&&Number['isInteger'](_0x2a1289)&&_0x2a1289>-0x34*0x25+0x766*0x4+-0x1614);if(!_0x404b41[_0x34ca86(0x1ea)]){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x22b)+_0x34ca86(0x354)+_0x34ca86(0x387)+'ge:\x20sched\x20'+'delete\x201\x202'+_0x34ca86(0x282)+_0x34ca86(0x291)+_0x34ca86(0x168)+_0x34ca86(0x211)+'\x20all'});return;}const _0x170b5b=[...new Set(_0x404b41)],_0x3d4d33=await getCombinedSchedulesForChats(_0x3a0996),_0x5f5056=[],_0x4cc850=[];for(const _0x47029a of _0x170b5b){if(_0x47029a<0x178d+0x18be+0x373*-0xe||_0x47029a>_0x3d4d33[_0x34ca86(0x1ea)]){_0x4cc850[_0x34ca86(0x27a)]({'n':_0x47029a,'reason':'not\x20found'});continue;}const _0x7da41b=_0x3d4d33[_0x47029a-(-0x43e+-0x1b0a+-0x1f49*-0x1)]['id'],_0x1f11f5=await removeScheduleByDBId(_0x7da41b);if(_0x1f11f5)_0x5f5056['push']({'n':_0x47029a,'id':_0x7da41b});else _0x4cc850[_0x34ca86(0x27a)]({'n':_0x47029a,'reason':'db\x20delete\x20'+_0x34ca86(0x202)});}let _0x334811='';if(_0x5f5056[_0x34ca86(0x1ea)])_0x334811+=_0x34ca86(0x392)+_0x5f5056[_0x34ca86(0x1ea)]+(_0x34ca86(0x3b3)+'s):\x20')+_0x5f5056[_0x34ca86(0x259)](_0x44b8e7=>_0x44b8e7['n']+_0x34ca86(0x2ef)+_0x44b8e7['id']+')')['join'](',\x20')+'.\x0a';if(_0x4cc850[_0x34ca86(0x1ea)])_0x334811+='Failed\x20to\x20'+'delete:\x20'+_0x4cc850[_0x34ca86(0x259)](_0x2885e1=>_0x2885e1['n']+'('+_0x2885e1['reason']+')')['join'](',\x20')+'.';await sendWithRetry(_0x4c857d,{'text':_0x334811[_0x34ca86(0x265)]()||_0x34ca86(0x386)+_0x34ca86(0x368)});return;}if(_0x5ae129==='edit'){const _0x493ea9=Number(_0x134f0a[-0x13bd+-0xb1*0x33+0x3702]),_0x52866d=_0x134f0a[-0x7e*0x27+-0x1*-0xaeb+0x84a]||(_0x32869b?_0x32869b[_0x34ca86(0x298)](/\r?\n/)[0x4bb+0x14*0xf4+-0x17cb][_0x34ca86(0x265)]():null);if(!_0x493ea9||!_0x52866d){await sendWithRetry(_0x4c857d,{'text':'Usage:\x20sch'+_0x34ca86(0x264)+_0x34ca86(0x217)+_0x34ca86(0x18a)+_0x34ca86(0x12d)+_0x34ca86(0x378)+'m>'});return;}const _0x3339c9=await getCombinedSchedulesForChats(_0x3a0996);if(!_0x3339c9||_0x3339c9[_0x34ca86(0x1ea)]<_0x493ea9){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x30e)+_0x34ca86(0x1b6)+_0x493ea9+(_0x34ca86(0x23a)+_0x34ca86(0x195)+_0x34ca86(0x398))});return;}const _0x402db0=_0x3339c9[_0x493ea9-(0x15b9+-0x62*-0x4b+0x1937*-0x2)]['id'];if(!_0x402db0){await sendWithRetry(_0x4c857d,{'text':'No\x20schedul'+_0x34ca86(0x1b6)+_0x493ea9+('\x20found\x20acr'+_0x34ca86(0x195)+'efaults.')});return;}const _0x22282c=parseTimeToken(_0x52866d,DEFAULT_TIMEZONE);if(!_0x22282c){await sendWithRetry(_0x4c857d,{'text':'Failed\x20to\x20'+_0x34ca86(0x2c9)+_0x34ca86(0x27b)});return;}if(_0x22282c['type']==='datetime'){const _0x3c25d4=_0x22282c['dt'],_0x386aa4=Math[_0x34ca86(0x13c)](_0x3c25d4[_0x34ca86(0x148)]()/(0x43*0x79+-0x9*0x19b+-0xd50)),_0x35f21b=await updateScheduleFields(_0x402db0,{'send_at':_0x386aa4,'time':null,'frequency':'once','timezone':_0x3c25d4[_0x34ca86(0x344)]||DEFAULT_TIMEZONE});if(_0x35f21b)await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x1c0)+_0x493ea9+('\x20updated\x20t'+_0x34ca86(0x22e)+_0x34ca86(0x194))+_0x3c25d4[_0x34ca86(0x167)+_0x34ca86(0x33d)](DateTime[_0x34ca86(0x2ed)+'ED'])+'\x20('+_0x3c25d4[_0x34ca86(0x344)]+')'});else await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x304)+_0x34ca86(0x216)+'edule.'});return;}else{if(_0x22282c[_0x34ca86(0x358)]===_0x34ca86(0x2f9)){const _0x508e14=_0x22282c[_0x34ca86(0x2f9)],_0x364af9=_0x3339c9[_0x493ea9-(0x124*0xc+0xfc9+0x5c*-0x52)],_0x4dda2d=_0x364af9[_0x34ca86(0x164)]||await getChatTimezone(_0x364af9[_0x34ca86(0x163)])||DEFAULT_TIMEZONE,_0x3c100a=await updateScheduleFields(_0x402db0,{'time':_0x508e14,'send_at':null,'frequency':_0x34ca86(0x25a),'timezone':_0x4dda2d});if(_0x3c100a)await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x1c0)+_0x493ea9+(_0x34ca86(0x3ae)+'o\x20recurrin'+_0x34ca86(0x19b))+_0x508e14+'\x20('+_0x4dda2d+')'});else await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x304)+_0x34ca86(0x216)+_0x34ca86(0x367)});return;}else{await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x1e5)+'d\x20time\x20for'+_0x34ca86(0x1d7)+'it.'});return;}}}if(_0x5ae129===_0x34ca86(0x330)){const _0x5954b8=Number(_0x134f0a[-0x11c9+0x10e6+-0xe5*-0x1]),_0x2c0ed5=Number(_0x134f0a[-0x2051*0x1+0x1ddf+-0x11*-0x25]);if(!_0x5954b8||!_0x2c0ed5||_0x2c0ed5<0x152c+-0x2b*0xa9+0xe*0x84){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x376)+_0x34ca86(0x245)+_0x34ca86(0x31c)+_0x34ca86(0x129)+_0x34ca86(0x327)+_0x34ca86(0x1f1)+_0x34ca86(0x3b8)+'.)'});return;}const _0x4e6472=await getCombinedSchedulesForChats(_0x3a0996);if(!_0x4e6472||_0x4e6472[_0x34ca86(0x1ea)]<_0x5954b8){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x30e)+_0x34ca86(0x1b6)+_0x5954b8+('\x20found\x20acr'+_0x34ca86(0x195)+_0x34ca86(0x398))});return;}const _0x12f0f8=_0x4e6472[_0x5954b8-(-0x1127+0x12fc+-0x1d4)]['id'];if(!_0x12f0f8){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x30e)+_0x34ca86(0x1b6)+_0x5954b8+('\x20found\x20acr'+_0x34ca86(0x195)+_0x34ca86(0x398))});return;}let _0x235305=_0x34ca86(0x25a);if(_0x2c0ed5===-0x509*-0x1+0x3d8+-0x8e0)_0x235305='daily';else _0x235305='every_n_da'+_0x34ca86(0x1e1)+_0x2c0ed5;const _0x361ab9=await updateScheduleFields(_0x12f0f8,{'frequency':_0x235305});if(_0x361ab9)await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x1c0)+_0x5954b8+(_0x34ca86(0x17d)+'\x20set\x20to\x20')+_0x235305});else await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x304)+'update\x20fre'+_0x34ca86(0x27c)});return;}if(_0x5ae129===_0x34ca86(0x336)||_0x5ae129===_0x34ca86(0x169)){const _0x2f5803=Number(_0x134f0a[-0x768+0x857+0x3*-0x4f]);if(!_0x2f5803){await sendWithRetry(_0x4c857d,{'text':'Usage:\x20sch'+_0x34ca86(0x208)+_0x5ae129+'\x20<number>'});return;}const _0x2fdf0e=await getCombinedSchedulesForChats(_0x3a0996);if(!_0x2fdf0e||_0x2fdf0e[_0x34ca86(0x1ea)]<_0x2f5803){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x30e)+_0x34ca86(0x1b6)+_0x2f5803+('\x20found\x20acr'+_0x34ca86(0x195)+_0x34ca86(0x398))});return;}const _0x31398d=_0x2fdf0e[_0x2f5803-(0xc7c+0x2*-0x1337+0x19f3)]['id'];if(!_0x31398d){await sendWithRetry(_0x4c857d,{'text':_0x34ca86(0x30e)+_0x34ca86(0x1b6)+_0x2f5803+(_0x34ca86(0x23a)+'oss\x20your\x20d'+_0x34ca86(0x398))});return;}const _0x468a8a=await updateScheduleFields(_0x31398d,{'enabled':_0x5ae129==='enable'?-0x1*0x21f4+-0x8d0+0x2ac5:-0xcf6+-0x19ba+0x26b0});if(_0x468a8a)await sendWithRetry(_0x4c857d,{'text':'Schedule\x20#'+_0x2f5803+'\x20'+_0x5ae129+'d.'});else await sendWithRetry(_0x4c857d,{'text':'Failed\x20to\x20'+_0x34ca86(0x15c)+'bled\x20state'+'.'});return;}await sendWithRetry(_0x4c857d,{'text':USAGE});}catch(_0x472135){warn(_0x34ca86(0x1aa)+_0x34ca86(0x247)+_0x34ca86(0x29c)+_0x34ca86(0x2a6)+(_0x472135?.['message']||_0x472135));}}async function handleSchedCommandPM(_0x44f84b,{sub:_0x5e438c,firstLine:_0x2d246b,restText:_0x164b5e,firstTokens:_0x14a034,targetChatJids:_0x9e6a93,confirmationTarget:_0x27440e,senderJid:_0x31ff90,cleanedBody:_0x3e0f76}){const _0x3c44a3=_0x353219;try{if(!_0x5e438c||_0x5e438c===_0x3c44a3(0x35d)){await sendWithRetry(_0x27440e,{'text':USAGE});return;}if(_0x5e438c===_0x3c44a3(0x2e9)){const _0x2a1304=_0x14a034[0x1e0f+0x7c3*-0x1+-0x164a],_0x1ebcbd=_0x14a034[-0xe10+0x21e1+-0x13ce]&&/^\d+$/[_0x3c44a3(0x388)](_0x14a034[-0x5*0x2f1+0xc9+0xdef])?Number(_0x14a034[0xb33+0x1e36+-0x2*0x14b3]):null;let _0x269758=(_0x3e0f76||'')[_0x3c44a3(0x265)]();!_0x269758&&_0x2a1304&&(_0x269758=extractInlineAfterToken(_0x2d246b,_0x2a1304));if(!_0x2a1304||!_0x269758||_0x269758[_0x3c44a3(0x265)]()['length']===0x111b*-0x1+0x2671+0x1556*-0x1){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x376)+_0x3c44a3(0x359)+_0x3c44a3(0x269)+_0x3c44a3(0x391)+_0x3c44a3(0x27e)+'include\x20gp'+':<alias|ji'+_0x3c44a3(0x287)});return;}const _0xf95886=[];for(const _0x2d50d6 of _0x9e6a93){const _0x5b1397=await getChatTimezone(_0x2d50d6)||DEFAULT_TIMEZONE,_0x14c1f4=parseTimeToken(_0x2a1304,_0x5b1397);if(!_0x14c1f4){_0xf95886[_0x3c44a3(0x27a)]({'chat':_0x2d50d6,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x14c1f4[_0x3c44a3(0x358)]===_0x3c44a3(0x1f8)){const _0x555a19=_0x14c1f4['dt'],_0x238cc3=Math['floor'](_0x555a19[_0x3c44a3(0x148)]()/(0x2180+-0x10c4+0x335*-0x4)),_0x2065e8=await addScheduleRow({'chat_jid':_0x2d50d6,'message':_0x269758,'time':null,'send_at':_0x238cc3,'frequency':_0x3c44a3(0x2e9),'timezone':_0x555a19[_0x3c44a3(0x344)]||_0x5b1397,'creator_jid':_0x31ff90});if(_0x2065e8)_0xf95886[_0x3c44a3(0x27a)]({'chat':_0x2d50d6,'ok':!![],'id':_0x2065e8,'when':_0x555a19[_0x3c44a3(0x167)+_0x3c44a3(0x33d)](DateTime[_0x3c44a3(0x2ed)+'ED'])});else _0xf95886[_0x3c44a3(0x27a)]({'chat':_0x2d50d6,'ok':![],'reason':'db_failed'});continue;}if(_0x14c1f4[_0x3c44a3(0x358)]===_0x3c44a3(0x2f9)){const [_0x32bb7d,_0xcc8274]=_0x14c1f4[_0x3c44a3(0x2f9)][_0x3c44a3(0x298)](':')[_0x3c44a3(0x259)](Number);let _0x3e087a=DateTime[_0x3c44a3(0x2a9)]()[_0x3c44a3(0x30c)](_0x5b1397),_0x5ae898=_0x3e087a[_0x3c44a3(0x321)](_0x3c44a3(0x15f))['set']({'hour':_0x32bb7d,'minute':_0xcc8274,'second':0x0,'millisecond':0x0});if(_0x1ebcbd&&Number['isInteger'](_0x1ebcbd)&&_0x1ebcbd>=0x9*-0x14d+0x3*-0x83f+-0x1*-0x2473)_0x5ae898=_0x5ae898[_0x3c44a3(0x14d)]({'days':Number(_0x1ebcbd)});else{if(_0x5ae898<=_0x3e087a)_0x5ae898=_0x5ae898[_0x3c44a3(0x14d)]({'days':0x1});}const _0x15ce3b=Math['floor'](_0x5ae898[_0x3c44a3(0x148)]()/(-0x9bb*0x1+0x23be+-0x161b)),_0x55de3f=await addScheduleRow({'chat_jid':_0x2d50d6,'message':_0x269758,'time':null,'send_at':_0x15ce3b,'frequency':_0x3c44a3(0x2e9),'timezone':_0x5b1397,'creator_jid':_0x31ff90});if(_0x55de3f)_0xf95886[_0x3c44a3(0x27a)]({'chat':_0x2d50d6,'ok':!![],'id':_0x55de3f,'when':_0x5ae898[_0x3c44a3(0x167)+_0x3c44a3(0x33d)](DateTime[_0x3c44a3(0x2ed)+'ED'])});else _0xf95886[_0x3c44a3(0x27a)]({'chat':_0x2d50d6,'ok':![],'reason':_0x3c44a3(0x2ac)});continue;}_0xf95886[_0x3c44a3(0x27a)]({'chat':_0x2d50d6,'ok':![],'reason':_0x3c44a3(0x1fb)+_0x3c44a3(0x2fe)});}const _0x17a914=_0xf95886['filter'](_0x30fa58=>_0x30fa58['ok']),_0x2a3afe=_0xf95886[_0x3c44a3(0x399)](_0x2d011d=>!_0x2d011d['ok']);let _0x24fcca='';if(_0x17a914[_0x3c44a3(0x1ea)]){_0x24fcca+='Scheduled\x20'+'one-off\x20fo'+'r\x20'+_0x17a914[_0x3c44a3(0x1ea)]+(_0x3c44a3(0x2ae)+':\x0a');for(const _0x9a9a7e of _0x17a914)_0x24fcca+='•\x20'+_0x9a9a7e[_0x3c44a3(0x142)]+_0x3c44a3(0x1fc)+_0x9a9a7e['id']+'\x20at\x20'+_0x9a9a7e[_0x3c44a3(0x2a5)]+'\x0a';}if(_0x2a3afe[_0x3c44a3(0x1ea)]){_0x24fcca+=_0x3c44a3(0x1d3)+'\x20'+_0x2a3afe[_0x3c44a3(0x1ea)]+(_0x3c44a3(0x2ae)+':\x0a');for(const _0x384a52 of _0x2a3afe)_0x24fcca+='•\x20'+_0x384a52[_0x3c44a3(0x142)]+_0x3c44a3(0x241)+_0x384a52[_0x3c44a3(0x1d2)]+'\x0a';}await sendWithRetry(_0x27440e,{'text':_0x24fcca[_0x3c44a3(0x265)]()||_0x3c44a3(0x30e)+_0x3c44a3(0x379)+'.'});return;}if(_0x5e438c===_0x3c44a3(0x2bb)){if(!_0x14a034[-0x2135+-0x12+0x2149]){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x376)+_0x3c44a3(0x261)+':mm|YYYY-M'+_0x3c44a3(0x2ee)+'|in\x20N\x20hour'+'s/days/min'+_0x3c44a3(0x1de)+'sage...>\x20g'+_0x3c44a3(0x125)+'id|all>'});return;}const _0x46d913=_0x14a034[0x9*-0x47+-0x2f*0xb9+0x2*0x123c],_0xa36a4c=_0x14a034[-0x15b2+-0x14*0x54+0x1c45*0x1]&&/^\d+$/['test'](_0x14a034[-0x19*0x16c+-0x13*-0xc1+0x153c])?Number(_0x14a034[0x1*0x26cb+-0x3*0xa94+-0x70c]):null;let _0x264db1=(_0x3e0f76||'')['trim']();!_0x264db1&&(_0x264db1=extractInlineAfterToken(_0x2d246b,_0x46d913));if(!_0x264db1||_0x264db1['trim']()[_0x3c44a3(0x1ea)]===0x90f+0x355+-0x1*0xc64){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x2c4)+_0x3c44a3(0x206)+_0x3c44a3(0x1a3)+_0x3c44a3(0x1dd)+_0x3c44a3(0x25b)+_0x3c44a3(0x2e4)+_0x3c44a3(0x135)+'s).\x20gp:<al'+'ias|jid|al'+'l>'});return;}const _0x27f96a=[];for(const _0x5cfb31 of _0x9e6a93){const _0x2a2e13=await getChatTimezone(_0x5cfb31)||DEFAULT_TIMEZONE,_0x473e08=parseTimeToken(_0x46d913,_0x2a2e13);if(!_0x473e08){_0x27f96a[_0x3c44a3(0x27a)]({'chat':_0x5cfb31,'ok':![],'reason':_0x3c44a3(0x30d)+'ed'});continue;}const _0xdaa268=_0x31ff90;if(_0x473e08['type']==='datetime'){const _0x1e865a=_0x473e08['dt'],_0x2d3d2=Math[_0x3c44a3(0x13c)](_0x1e865a[_0x3c44a3(0x148)]()/(-0x1edc+0x6*0x3a9+0xcce)),_0x2e0c02=await addScheduleRow({'chat_jid':_0x5cfb31,'message':_0x264db1,'time':null,'send_at':_0x2d3d2,'frequency':_0x3c44a3(0x2e9),'timezone':_0x1e865a[_0x3c44a3(0x344)]||_0x2a2e13,'creator_jid':_0xdaa268});if(_0x2e0c02)_0x27f96a['push']({'chat':_0x5cfb31,'ok':!![],'id':_0x2e0c02,'when':_0x1e865a[_0x3c44a3(0x167)+'ring'](DateTime[_0x3c44a3(0x2ed)+'ED'])});else _0x27f96a['push']({'chat':_0x5cfb31,'ok':![],'reason':_0x3c44a3(0x2ac)});continue;}if(_0x473e08[_0x3c44a3(0x358)]===_0x3c44a3(0x2f9)){const _0x342521=_0x473e08[_0x3c44a3(0x2f9)];if(_0xa36a4c&&Number[_0x3c44a3(0x310)](_0xa36a4c)&&_0xa36a4c>=0x5*-0xfb+-0x1dc2+0x1d*0x132){let _0x5b7587=DateTime[_0x3c44a3(0x2a9)]()[_0x3c44a3(0x30c)](_0x2a2e13);const [_0xb84e8e,_0x4f51f8]=_0x342521[_0x3c44a3(0x298)](':')['map'](Number);let _0x18aa74=_0x5b7587[_0x3c44a3(0x321)](_0x3c44a3(0x15f))[_0x3c44a3(0x1eb)]({'hour':_0xb84e8e,'minute':_0x4f51f8,'second':0x0,'millisecond':0x0});_0x18aa74=_0x18aa74[_0x3c44a3(0x14d)]({'days':Number(_0xa36a4c)});const _0x7feec3=Math['floor'](_0x18aa74['toMillis']()/(-0x96d+-0x2*-0x8bd+0x1*-0x425)),_0x26bbfa=await addScheduleRow({'chat_jid':_0x5cfb31,'message':_0x264db1,'time':null,'send_at':_0x7feec3,'frequency':_0x3c44a3(0x2e9),'timezone':_0x2a2e13,'creator_jid':_0xdaa268});if(_0x26bbfa)_0x27f96a[_0x3c44a3(0x27a)]({'chat':_0x5cfb31,'ok':!![],'id':_0x26bbfa,'when':_0x18aa74['toLocaleSt'+_0x3c44a3(0x33d)](DateTime[_0x3c44a3(0x2ed)+'ED'])});else _0x27f96a['push']({'chat':_0x5cfb31,'ok':![],'reason':'db_failed'});continue;}const _0x292836=await addScheduleRow({'chat_jid':_0x5cfb31,'message':_0x264db1,'time':_0x342521,'send_at':null,'frequency':_0x3c44a3(0x25a),'timezone':_0x2a2e13,'creator_jid':_0xdaa268});if(_0x292836)_0x27f96a[_0x3c44a3(0x27a)]({'chat':_0x5cfb31,'ok':!![],'id':_0x292836,'when':_0x342521+'\x20('+_0x2a2e13+')'});else _0x27f96a['push']({'chat':_0x5cfb31,'ok':![],'reason':'db_failed'});continue;}_0x27f96a[_0x3c44a3(0x27a)]({'chat':_0x5cfb31,'ok':![],'reason':_0x3c44a3(0x1fb)+_0x3c44a3(0x2fe)});}const _0x40fe90=_0x27f96a[_0x3c44a3(0x399)](_0x41884f=>_0x41884f['ok']),_0x2f94dd=_0x27f96a[_0x3c44a3(0x399)](_0x20bbce=>!_0x20bbce['ok']);let _0x26f954='';if(_0x40fe90[_0x3c44a3(0x1ea)]){_0x26f954+=_0x3c44a3(0x242)+_0x3c44a3(0x187)+_0x40fe90[_0x3c44a3(0x1ea)]+('\x20target(s)'+':\x0a');for(const _0x186467 of _0x40fe90)_0x26f954+='•\x20'+_0x186467[_0x3c44a3(0x142)]+_0x3c44a3(0x1fc)+_0x186467['id']+'\x20when:'+_0x186467[_0x3c44a3(0x2a5)]+'\x0a';}if(_0x2f94dd[_0x3c44a3(0x1ea)]){_0x26f954+=_0x3c44a3(0x1d3)+'\x20'+_0x2f94dd['length']+(_0x3c44a3(0x2ae)+':\x0a');for(const _0x4be16f of _0x2f94dd)_0x26f954+='•\x20'+_0x4be16f['chat']+_0x3c44a3(0x241)+_0x4be16f[_0x3c44a3(0x1d2)]+'\x0a';}await sendWithRetry(_0x27440e,{'text':_0x26f954[_0x3c44a3(0x265)]()||_0x3c44a3(0x30e)+_0x3c44a3(0x379)+'.'});return;}if(_0x5e438c===_0x3c44a3(0x1e8)){const _0x30d656=[];for(const _0x223c14 of _0x9e6a93){const _0x5e5c55=await listSchedulesForChat(_0x223c14);for(const _0x356bfd of _0x5e5c55)_0x30d656[_0x3c44a3(0x27a)]({'chatJid':_0x223c14,..._0x356bfd});}if(!_0x30d656[_0x3c44a3(0x1ea)]){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x3a0)+_0x3c44a3(0x33e)+_0x3c44a3(0x19a)+_0x3c44a3(0x393)+_0x3c44a3(0x151)+_0x3c44a3(0x2d2)});return;}let _0x1c335c='';for(const _0x2a1af8 of _0x30d656){const _0x1d8bf3=_0x2a1af8['send_at']?DateTime['fromMillis'](Number(_0x2a1af8['send_at'])*(-0x20c*0xd+0x49e*-0x3+0x2c5e))[_0x3c44a3(0x30c)](_0x2a1af8[_0x3c44a3(0x164)]||DEFAULT_TIMEZONE)[_0x3c44a3(0x21a)]({'suppressSeconds':!![]}):_0x2a1af8['time']?_0x2a1af8[_0x3c44a3(0x252)]+'\x20('+(_0x2a1af8['timezone']||_0x3c44a3(0x155)+_0x3c44a3(0x25e))+')':_0x3c44a3(0x18f),_0x21df7f=(_0x2a1af8[_0x3c44a3(0x190)]||'')[_0x3c44a3(0x298)]('\x0a')[_0x3c44a3(0x259)](_0x50377b=>_0x50377b[_0x3c44a3(0x26a)]())[_0x3c44a3(0x146)]('\x0a'),_0x21d1ad=_0x2a1af8[_0x3c44a3(0x2e2)]+':'+_0x2a1af8['id']+_0x3c44a3(0x3a5)+_0x1d8bf3+_0x3c44a3(0x144)+(_0x2a1af8[_0x3c44a3(0x330)]||_0x3c44a3(0x25a))+_0x3c44a3(0x328)+(_0x2a1af8[_0x3c44a3(0x329)]?_0x3c44a3(0x1a4):'no')+_0x3c44a3(0x353)+_0x21df7f+'\x0a\x0a';(_0x1c335c+_0x21d1ad)[_0x3c44a3(0x1ea)]>0x10f3+-0x3d5*0x1+-0x742&&(await sendWithRetry(_0x27440e,{'text':_0x1c335c[_0x3c44a3(0x265)]()}),_0x1c335c=''),_0x1c335c+=_0x21d1ad;}if(_0x1c335c[_0x3c44a3(0x265)]())await sendWithRetry(_0x27440e,{'text':_0x1c335c[_0x3c44a3(0x265)]()});return;}if(_0x5e438c===_0x3c44a3(0x20d)){const _0x4599d3=_0x14a034[_0x3c44a3(0x36b)](0x22b7+0x1*0x2f3+-0x1e2*0x14);let _0x2f6735=_0x4599d3[_0x3c44a3(0x146)]('\x20');if(!_0x2f6735&&_0x164b5e)_0x2f6735=_0x164b5e[_0x3c44a3(0x265)]();if(!_0x2f6735){await sendWithRetry(_0x27440e,{'text':'Usage:\x20sch'+_0x3c44a3(0x25d)+'<number|nu'+_0x3c44a3(0x28c)+_0x3c44a3(0x176)+_0x3c44a3(0x1cb)+_0x3c44a3(0x227)});return;}if(/^\s*all\s*$/i[_0x3c44a3(0x388)](_0x2f6735)){let _0x5c2063=0xc7*-0x21+0xec3*-0x1+-0x5c6*-0x7;for(const _0x3ed771 of _0x9e6a93){const _0x45a716=await removeAllSchedulesForChat(_0x3ed771);_0x5c2063+=_0x45a716;}await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x392)+_0x5c2063+('\x20schedule('+'s)\x20across\x20'+_0x3c44a3(0x151)+'targets.')});return;}const _0x2f99f5=_0x2f6735[_0x3c44a3(0x298)](/[\s,]+/)[_0x3c44a3(0x259)](_0x2c118a=>_0x2c118a[_0x3c44a3(0x265)]())[_0x3c44a3(0x399)](Boolean),_0x48d891=_0x2f99f5[_0x3c44a3(0x259)](_0x1be1b2=>Number(_0x1be1b2))['filter'](_0x25fbd3=>!Number[_0x3c44a3(0x1be)](_0x25fbd3)&&Number['isInteger'](_0x25fbd3)&&_0x25fbd3>-0xd*0x2ff+0x19d8+0xd1b);if(!_0x48d891[_0x3c44a3(0x1ea)]){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x22b)+'ndexes\x20pro'+_0x3c44a3(0x387)+_0x3c44a3(0x204)+_0x3c44a3(0x250)+'\x203\x20OR\x20sche'+_0x3c44a3(0x291)+_0x3c44a3(0x168)+_0x3c44a3(0x211)+'\x20all\x20gp:<a'+_0x3c44a3(0x263)+_0x3c44a3(0x1d5)});return;}const _0x4083ea=[...new Set(_0x48d891)],_0x5a39ff=await getCombinedSchedulesForChats(_0x9e6a93),_0x5a6536=[],_0x20edf7=[];for(const _0x263e2f of _0x4083ea){if(_0x263e2f<-0x21*0xd+-0x16ce+0x187c||_0x263e2f>_0x5a39ff[_0x3c44a3(0x1ea)]){_0x20edf7[_0x3c44a3(0x27a)]({'n':_0x263e2f,'reason':'not\x20found'});continue;}const _0x50ff0b=_0x5a39ff[_0x263e2f-(0x2*0xc74+0x432*-0x8+0x8a9)]['id'],_0x5e7312=await removeScheduleByDBId(_0x50ff0b);if(_0x5e7312)_0x5a6536[_0x3c44a3(0x27a)]({'n':_0x263e2f,'id':_0x50ff0b});else _0x20edf7['push']({'n':_0x263e2f,'reason':_0x3c44a3(0x1b8)+'failed'});}let _0x421b12='';if(_0x5a6536[_0x3c44a3(0x1ea)])_0x421b12+=_0x3c44a3(0x392)+_0x5a6536[_0x3c44a3(0x1ea)]+('\x20schedule('+_0x3c44a3(0x1c6))+_0x5a6536[_0x3c44a3(0x259)](_0x2705d4=>_0x2705d4['n']+_0x3c44a3(0x2ef)+_0x2705d4['id']+')')[_0x3c44a3(0x146)](',\x20')+'.\x0a';if(_0x20edf7[_0x3c44a3(0x1ea)])_0x421b12+='Failed\x20to\x20'+_0x3c44a3(0x2cd)+_0x20edf7[_0x3c44a3(0x259)](_0x1e736f=>_0x1e736f['n']+'('+_0x1e736f[_0x3c44a3(0x1d2)]+')')[_0x3c44a3(0x146)](',\x20')+'.';await sendWithRetry(_0x27440e,{'text':_0x421b12[_0x3c44a3(0x265)]()||_0x3c44a3(0x386)+_0x3c44a3(0x368)});return;}if(_0x5e438c===_0x3c44a3(0x2f7)){const _0x24d676=Number(_0x14a034[0xd90+0x175d+-0x1*0x24eb]),_0x2760c7=_0x14a034[-0x1*-0x11e6+0x4*-0x765+-0xbb1*-0x1]||(_0x164b5e?_0x164b5e[_0x3c44a3(0x298)](/\r?\n/)[0x26de+-0x87*-0x41+-0x4925][_0x3c44a3(0x265)]():null);if(!_0x24d676||!_0x2760c7){await sendWithRetry(_0x27440e,{'text':'Usage:\x20sch'+_0x3c44a3(0x264)+_0x3c44a3(0x217)+_0x3c44a3(0x18a)+_0x3c44a3(0x12d)+_0x3c44a3(0x378)+_0x3c44a3(0x292)+_0x3c44a3(0x322)+'>'});return;}const _0x577fbf=await getCombinedSchedulesForChats(_0x9e6a93);if(!_0x577fbf||_0x577fbf['length']<_0x24d676){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x30e)+_0x3c44a3(0x1b6)+_0x24d676+(_0x3c44a3(0x23a)+_0x3c44a3(0x1a1)+_0x3c44a3(0x262)+'s.')});return;}const _0xf00822=_0x577fbf[_0x24d676-(-0x112*-0x19+-0x981+-0x1140)]['id'];if(!_0xf00822){await sendWithRetry(_0x27440e,{'text':'No\x20schedul'+_0x3c44a3(0x1b6)+_0x24d676+(_0x3c44a3(0x23a)+_0x3c44a3(0x1a1)+_0x3c44a3(0x262)+'s.')});return;}const _0x4264c3=parseTimeToken(_0x2760c7,DEFAULT_TIMEZONE);if(!_0x4264c3){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x304)+_0x3c44a3(0x2c9)+_0x3c44a3(0x27b)});return;}if(_0x4264c3['type']===_0x3c44a3(0x1f8)){const _0x2954c0=_0x4264c3['dt'],_0x2f921a=Math[_0x3c44a3(0x13c)](_0x2954c0[_0x3c44a3(0x148)]()/(-0x23f7+0x2545+0x29a)),_0x44407c=await updateScheduleFields(_0xf00822,{'send_at':_0x2f921a,'time':null,'frequency':_0x3c44a3(0x2e9),'timezone':_0x2954c0['zoneName']||DEFAULT_TIMEZONE});if(_0x44407c)await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x1c0)+_0x24d676+(_0x3c44a3(0x3ae)+_0x3c44a3(0x22e)+_0x3c44a3(0x194))+_0x2954c0[_0x3c44a3(0x167)+_0x3c44a3(0x33d)](DateTime[_0x3c44a3(0x2ed)+'ED'])+'\x20('+_0x2954c0[_0x3c44a3(0x344)]+')'});else await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x304)+'update\x20sch'+'edule.'});return;}else{if(_0x4264c3['type']==='hhmm'){const _0x346e10=_0x4264c3['hhmm'],_0x53eef5=_0x577fbf[_0x24d676-(-0x107*0x11+-0x238d+0x3505)],_0xd37976=_0x53eef5[_0x3c44a3(0x164)]||await getChatTimezone(_0x53eef5['chat_jid'])||DEFAULT_TIMEZONE,_0x16f622=await updateScheduleFields(_0xf00822,{'time':_0x346e10,'send_at':null,'frequency':'daily','timezone':_0xd37976});if(_0x16f622)await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x1c0)+_0x24d676+(_0x3c44a3(0x3ae)+_0x3c44a3(0x2df)+_0x3c44a3(0x19b))+_0x346e10+'\x20('+_0xd37976+')'});else await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x304)+_0x3c44a3(0x216)+_0x3c44a3(0x367)});return;}else{await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x1e5)+_0x3c44a3(0x236)+'mat\x20for\x20ed'+'it.'});return;}}}if(_0x5e438c===_0x3c44a3(0x330)){const _0x5c6880=Number(_0x14a034[0x1*-0x646+0x82c*0x1+-0x4*0x79]),_0x51b6c2=Number(_0x14a034[0x160a+-0x398+-0x126f]);if(!_0x5c6880||!_0x51b6c2||_0x51b6c2<-0x1b*-0xb5+-0x5*0x1eb+-0x97f){await sendWithRetry(_0x27440e,{'text':'Usage:\x20sch'+_0x3c44a3(0x245)+_0x3c44a3(0x31c)+'>\x20<n>\x20\x20(n='+_0x3c44a3(0x327)+_0x3c44a3(0x1f1)+_0x3c44a3(0x3b8)+'.)\x20gp:<ali'+_0x3c44a3(0x322)+'>'});return;}const _0x5620f6=await getCombinedSchedulesForChats(_0x9e6a93);if(!_0x5620f6||_0x5620f6[_0x3c44a3(0x1ea)]<_0x5c6880){await sendWithRetry(_0x27440e,{'text':'No\x20schedul'+_0x3c44a3(0x1b6)+_0x5c6880+('\x20found\x20acr'+_0x3c44a3(0x1a1)+_0x3c44a3(0x262)+'s.')});return;}const _0x246f70=_0x5620f6[_0x5c6880-(0x2*-0x92f+0xf66+0x2f9)]['id'];if(!_0x246f70){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x30e)+_0x3c44a3(0x1b6)+_0x5c6880+(_0x3c44a3(0x23a)+_0x3c44a3(0x1a1)+_0x3c44a3(0x262)+'s.')});return;}let _0x2548d5='daily';if(_0x51b6c2===0x21ae+-0x1*0xaab+-0x1702)_0x2548d5=_0x3c44a3(0x25a);else _0x2548d5=_0x3c44a3(0x289)+'ys:'+_0x51b6c2;const _0x178c5a=await updateScheduleFields(_0x246f70,{'frequency':_0x2548d5});if(_0x178c5a)await sendWithRetry(_0x27440e,{'text':'Schedule\x20#'+_0x5c6880+(_0x3c44a3(0x17d)+_0x3c44a3(0x215))+_0x2548d5});else await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x304)+_0x3c44a3(0x3a8)+'quency.'});return;}if(_0x5e438c===_0x3c44a3(0x336)||_0x5e438c==='enable'){const _0x304a8b=Number(_0x14a034[0x208f*0x1+-0x1b03*0x1+-0x58a]);if(!_0x304a8b){await sendWithRetry(_0x27440e,{'text':'Usage:\x20sch'+'ed\x20'+_0x5e438c+(_0x3c44a3(0x283)+_0x3c44a3(0x338)+_0x3c44a3(0x278))});return;}const _0x300463=await getCombinedSchedulesForChats(_0x9e6a93);if(!_0x300463||_0x300463[_0x3c44a3(0x1ea)]<_0x304a8b){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x30e)+_0x3c44a3(0x1b6)+_0x304a8b+('\x20found\x20acr'+_0x3c44a3(0x1a1)+_0x3c44a3(0x262)+'s.')});return;}const _0x144b65=_0x300463[_0x304a8b-(-0xa6*0x3b+-0x89a+0x2edd)]['id'];if(!_0x144b65){await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x30e)+_0x3c44a3(0x1b6)+_0x304a8b+(_0x3c44a3(0x23a)+_0x3c44a3(0x1a1)+_0x3c44a3(0x262)+'s.')});return;}const _0x2ce0f2=await updateScheduleFields(_0x144b65,{'enabled':_0x5e438c===_0x3c44a3(0x169)?0x11c3+0x2*-0x126a+0x1312:-0x182f+0x6fe+-0x1b*-0xa3});if(_0x2ce0f2)await sendWithRetry(_0x27440e,{'text':'Schedule\x20#'+_0x304a8b+'\x20'+_0x5e438c+'d.'});else await sendWithRetry(_0x27440e,{'text':_0x3c44a3(0x304)+_0x3c44a3(0x15c)+_0x3c44a3(0x119)+'.'});return;}await sendWithRetry(_0x27440e,{'text':USAGE});}catch(_0x3d3841){warn(_0x3c44a3(0x1aa)+_0x3c44a3(0x247)+_0x3c44a3(0x318)+_0x3c44a3(0x275)+(_0x3d3841?.['message']||_0x3d3841));}}export async function initialize(_0x395ab4){const _0x479ae6=_0x353219;if(!_0x395ab4)throw new Error(_0x479ae6(0x305)+_0x479ae6(0x1e4)+_0x479ae6(0x301)+_0x479ae6(0x184));setupSendApi(_0x395ab4),refreshConfig();try{await ensureSchema();}catch(_0x3000a2){error(_0x479ae6(0x2b8)+_0x479ae6(0x2b4)+_0x479ae6(0x116)+(_0x3000a2?.[_0x479ae6(0x190)]||_0x3000a2));throw _0x3000a2;}try{startManagedListener({'botRef':_0x395ab4,'eventName':_0x479ae6(0x189)+'.update','handler':_0x5c7ff3=>{const _0x189e6f=_0x479ae6;try{info('[sched]\x20co'+'nnection.u'+'pdate\x20obse'+_0x189e6f(0x220)+_0x189e6f(0x37e)+_0x189e6f(0x2a2)+'ed\x20listene'+'r)'),setupSendApi(_0x395ab4);}catch(_0x1c5ee9){warn(_0x189e6f(0x374)+_0x189e6f(0x3af)+'pdate\x20hand'+_0x189e6f(0x2be)+'\x20'+(_0x1c5ee9?.[_0x189e6f(0x190)]||_0x1c5ee9));}},'moduleName':name});}catch(_0x4ae06b){warn('[sched]\x20fa'+_0x479ae6(0x32b)+_0x479ae6(0x17a)+_0x479ae6(0x2fb)+_0x479ae6(0x34e)+_0x479ae6(0x38f)+_0x479ae6(0x1f4)+(_0x4ae06b?.[_0x479ae6(0x190)]||_0x4ae06b));}startSchedulerAligned(),info(_0x479ae6(0x238)+_0x479ae6(0x26e)+_0x479ae6(0x1fe)+'anager\x20use'+_0x479ae6(0x1d4)+_0x479ae6(0x315)+_0x479ae6(0x3a3));}export async function cleanup(){const _0x45f71b=_0x353219;try{stopScheduler();try{stopManagedListener(name,_0x45f71b(0x189)+'.update');}catch(_0x25c12e){}}catch(_0x5cd665){warn(_0x45f71b(0x3b7)+_0x45f71b(0x1b4)+_0x45f71b(0x1f4)+(_0x5cd665?.['message']||_0x5cd665));}finally{botRef=null,sendApi=null,info(_0x45f71b(0x3b7)+'eaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};