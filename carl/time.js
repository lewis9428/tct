const _0x4d8508=_0x5ded;(function(_0x3c1c49,_0x18b452){const _0x43ab71=_0x5ded,_0xbbe6ca=_0x3c1c49();while(!![]){try{const _0x93def=parseInt(_0x43ab71(0x115))/(0x1d01+-0x19df*0x1+0x9*-0x59)+parseInt(_0x43ab71(0xd9))/(-0x24a4+-0x200a+0x44b0)*(-parseInt(_0x43ab71(0x112))/(0x67b+0x5*-0x390+0xb58))+-parseInt(_0x43ab71(0x123))/(0x26e8+-0x154b+-0x1199)*(-parseInt(_0x43ab71(0x12c))/(0x1*0x181a+0x2*-0x2ed+0x167*-0xd))+-parseInt(_0x43ab71(0x12e))/(0x6a2+0x2*0xc3d+0xad*-0x2e)+-parseInt(_0x43ab71(0x128))/(0x9fb+0x8d4+-0x12c8)+-parseInt(_0x43ab71(0x122))/(-0x4*0x59+-0x1e1+0xd*0x41)+-parseInt(_0x43ab71(0x11e))/(0x1283+0x13ba+0xa3*-0x3c)*(-parseInt(_0x43ab71(0x14b))/(0x199f+-0x15ce+0x3c7*-0x1));if(_0x93def===_0x18b452)break;else _0xbbe6ca['push'](_0xbbe6ca['shift']());}catch(_0x4fdcfd){_0xbbe6ca['push'](_0xbbe6ca['shift']());}}}(_0x15c9,0x71161*0x1+0x8e4cd+-0xa9116));import{readFileSync}from'fs';import{join}from'path';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid,getBotJidRaw}from'../utils/bot-state.js';export const name=_0x4d8508(0x14f);export const version=_0x4d8508(0xde);export const priority=0x1*-0x12b3+-0xd3d+0x1ffa;function _0x5ded(_0x381b05,_0x4c80ab){const _0x874dca=_0x15c9();return _0x5ded=function(_0xf66a1e,_0x18de34){_0xf66a1e=_0xf66a1e-(0x138d+0xf77*-0x1+-0x340);let _0x1f87a9=_0x874dca[_0xf66a1e];return _0x1f87a9;},_0x5ded(_0x381b05,_0x4c80ab);}let botInstance=null,respondedMsgIds=new Set(),DEFAULT_TIMEZONE=_0x4d8508(0xe5)+_0x4d8508(0xfb);const timeDataPath=join(process[_0x4d8508(0xff)](),'data',_0x4d8508(0x14f),_0x4d8508(0x10d));let COUNTRY_TIMEZONES={},CITY_MAP={};try{const timeData=JSON[_0x4d8508(0x129)](readFileSync(timeDataPath,_0x4d8508(0x14e)));COUNTRY_TIMEZONES=timeData[_0x4d8508(0x141)+_0x4d8508(0x11d)]||{},CITY_MAP=timeData[_0x4d8508(0xe6)]||{},info(name+(_0x4d8508(0x134)+_0x4d8508(0xf7)+_0x4d8508(0xda)+_0x4d8508(0xfc)));}catch(_0x39cbe2){warn(name+(_0x4d8508(0xd6)+_0x4d8508(0x146)+_0x4d8508(0xee)+_0x4d8508(0x124))+_0x39cbe2['message']),COUNTRY_TIMEZONES={'kenya':_0x4d8508(0xe5)+_0x4d8508(0xfb),'uk':_0x4d8508(0xf9)+'don','usa':_0x4d8508(0x10f)+_0x4d8508(0x148)},CITY_MAP={'nairobi':_0x4d8508(0xe5)+'robi','london':_0x4d8508(0xf9)+_0x4d8508(0x125),'new\x20york':_0x4d8508(0x10f)+_0x4d8508(0x148)};}function refreshConfig(){const _0x49fd5c=_0x4d8508;try{const _0x28bfa1=typeof getConfig==='function'?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x28bfa1[_0x49fd5c(0x142)]||_0x28bfa1['TIMEZONE_N'+_0x49fd5c(0x139)]||DEFAULT_TIMEZONE,info(name+(':\x20timezone'+_0x49fd5c(0x13b))+DEFAULT_TIMEZONE);}catch(_0x2d5d0b){warn(name+(_0x49fd5c(0x131)+_0x49fd5c(0xf4)+_0x49fd5c(0x137))+(_0x2d5d0b?.[_0x49fd5c(0xdc)]||_0x2d5d0b));}}try{typeof hotReloadConfig===_0x4d8508(0x121)&&hotReloadConfig(()=>{const _0x1aa327=_0x4d8508;try{refreshConfig();}catch(_0x5c0b9c){warn(name+(_0x1aa327(0x108)+'dConfig\x20ha'+_0x1aa327(0xec)+_0x1aa327(0x137))+(_0x5c0b9c?.['message']||_0x5c0b9c));}});}catch(_0x44dac3){warn(name+(_0x4d8508(0x108)+_0x4d8508(0x10a)+_0x4d8508(0x147)+'\x20failed:\x20')+(_0x44dac3?.[_0x4d8508(0xdc)]||_0x44dac3));}refreshConfig();function normalizeKey(_0xdc8a2){const _0x25e33a=_0x4d8508;if(!_0xdc8a2||typeof _0xdc8a2!==_0x25e33a(0x135))return'';let _0x17f7a7=_0xdc8a2['toLowerCas'+'e']()[_0x25e33a(0x150)]();return _0x17f7a7=_0x17f7a7['normalize'](_0x25e33a(0x138))['replace'](/\p{Diacritic}/gu,''),_0x17f7a7=_0x17f7a7[_0x25e33a(0xe4)](/[._/\\-]+/g,'\x20'),_0x17f7a7=_0x17f7a7[_0x25e33a(0xe4)](/\s+/g,'\x20')[_0x25e33a(0x150)](),_0x17f7a7;}function formatTimestampForZone(_0x419c66){const _0x45abd8=_0x4d8508;try{const _0x6ae9cb=DateTime[_0x45abd8(0xf0)]()['setZone'](_0x419c66);if(!_0x6ae9cb['isValid'])return{'human':'Invalid\x20ti'+'mezone','iso':null,'zoneName':_0x419c66};return{'human':_0x6ae9cb['toLocaleSt'+_0x45abd8(0xd8)](DateTime[_0x45abd8(0x107)+_0x45abd8(0x13d)+_0x45abd8(0x158)]),'iso':_0x6ae9cb['toISO'](),'zoneName':_0x6ae9cb[_0x45abd8(0xfa)]};}catch(_0x62266f){return{'human':'Error\x20form'+_0x45abd8(0x126)+'e','iso':null,'zoneName':_0x419c66};}}function buildBoxForTime(_0x193f03,_0x334ae1,_0x5aa025){const _0x452ae4=_0x4d8508;return _0x452ae4(0xf8)+_0x452ae4(0xe9)+_0x193f03+'\x0a│\x20🕒\x20'+_0x334ae1+('\x0a│\x20⌚\x20Zone:'+'\x20')+_0x5aa025+(_0x452ae4(0xf6)+_0x452ae4(0xe7));}function _0x15c9(){const _0x4d61e6=['trim','\x20cleanup\x20e','imezone\x20/\x20',',\x20sentTo=','_bot','remoteJid','\x20or\x20\x22Europ','\x20—\x20ignorin','CONDS','\x22),\x0a\x20•\x20a\x20m',':\x20Failed\x20t','(e.g.\x20\x22Nai','ring','758rOTDbJ','ppings\x20suc','@g.us','message',':\x20botInsta','1.1.0','\x20an\x20IANA\x20t','rror:\x20','toLowerCas','\x20cleaned\x20u','rror','replace','Africa/Nai','city_map','══⊷\x0a\x0a(.)','\x20to\x20know\x20i','═══⊷\x0a│\x20📍\x20',':\x20Sudo\x20che','length','ndler\x20erro','unknown','ezone\x20mapp','(or\x20IANA\x20t','now',':\x20botJid\x20n','nce\x20missin','ipping.','onfig\x20erro','ot\x20availab','\x0a╰════════','imezone\x20ma','╭─❏\x20time\x20❏','Europe/Lon','zoneName','robi','cessfully','ime\x20Kenya`','from','cwd','size',':\x20findStor',':\x20received','client',':\x20replied\x20','ry\x20name\x20(e','\x20handler\x20e','DATETIME_M',':\x20hotReloa','g\x20(PM-only','dConfig\x20re','isArray','error:\x20','time.json','.g.\x20\x22Afric','America/Ne','\x20•\x20a\x20count','add','3264gouxEQ','clear',':\x20unknown\x20','29321CrxkLT','\x20command).','has','proceed.','ajor\x20city\x20','a/Nairobi\x22','name\x20of\x20th','slice','mezones','603VSvAyC','Enter\x20the\x20',',\x20botJidRa','function','1516792zDBWjM','12FdMRxA','ings:\x20','don','atting\x20tim','startsWith','3151792BbMZNt','parse','\x20or\x20`time\x20','g;\x20cannot\x20','614545LiPpks','d\x20date.\x0a\x0aE','2916678tMIqtI','e/London\x22)','jid',':\x20refreshC','I\x20couldn\x27t','for\x20',':\x20Loaded\x20t','string','ezone.\x0aPle','r:\x20','NFD','AME','isCommand','\x20set\x20to\x20','key','ED_WITH_SE','with\x20time\x20','fromMe','xample:\x20`t','country_ti','TIMEZONE','isValid','chatId;\x20sk','robi\x22),\x0a\x20•','o\x20load\x20tim','gistration','w_York','don`','sendMessag','222960dqmXsr','\x20(origin=','e\x20country\x20','utf8','time'];_0x15c9=function(){return _0x4d61e6;};return _0x15c9();}export async function initialize(_0xc6b14e){botInstance=_0xc6b14e,info(name+(':\x20initiali'+'zed.')),refreshConfig();}async function findStoredMatchFromFindings(_0x2574bc=[]){const _0x356303=_0x4d8508;try{if(!Array[_0x356303(0x10b)](_0x2574bc)||_0x2574bc[_0x356303(0xeb)]===0x9db+0x3*-0x525+0x594)return null;const _0x12c136=await listSudo();if(!Array[_0x356303(0x10b)](_0x12c136)||_0x12c136[_0x356303(0xeb)]===-0x1c37*-0x1+0x15dc+-0x3213)return null;const _0x2da6b0=new Set(_0x12c136['map'](_0xed651a=>String(_0xed651a)));for(const _0x531132 of _0x2574bc){if(!_0x531132||!_0x531132[_0x356303(0x130)]||typeof _0x531132[_0x356303(0x130)]!==_0x356303(0x135))continue;try{const _0x2e283d=normalizeToJid(_0x531132[_0x356303(0x130)]);if(_0x2e283d&&_0x2da6b0['has'](_0x2e283d))return _0x2e283d;if(_0x2da6b0['has'](_0x531132[_0x356303(0x130)]))return _0x531132[_0x356303(0x130)];}catch(_0x3ff27e){}}return null;}catch(_0x4daf64){return warn(name+(_0x356303(0x101)+'edMatchFro'+'mFindings\x20'+_0x356303(0x10c))+(_0x4daf64?.[_0x356303(0xdc)]||_0x4daf64)),null;}}export async function onMessage(_0x18363b){const _0x572c27=_0x4d8508;try{if(!_0x18363b||!_0x18363b[_0x572c27(0x13c)])return;const _0x579d15=_0x18363b[_0x572c27(0x13c)]?.['id'];if(_0x579d15&&respondedMsgIds[_0x572c27(0x117)](_0x579d15))return;if(!_0x18363b[_0x572c27(0x13a)])return;const _0x11db67=(_0x18363b['text']||'')[_0x572c27(0x150)]();if(!_0x11db67)return;const _0x260c50=_0x11db67[_0x572c27(0xe1)+'e']();if(!_0x260c50[_0x572c27(0x127)](_0x572c27(0x14f)))return;const _0x3c138d=_0x260c50===_0x572c27(0x14f)?'':_0x11db67[_0x572c27(0xe4)](/^time\s+/i,'')[_0x572c27(0x150)]();if(_0x579d15)respondedMsgIds[_0x572c27(0x111)](_0x579d15);const _0x1c6c88=_0x18363b['remoteJid']||_0x18363b[_0x572c27(0x13c)]?.[_0x572c27(0x155)]||_0x572c27(0xed);if(_0x1c6c88===_0x572c27(0xed)){warn(name+(_0x572c27(0x114)+_0x572c27(0x144)+_0x572c27(0xf3)));return;}const _0x543f47=String(_0x1c6c88)['endsWith'](_0x572c27(0xdb));if(_0x543f47){info(name+(_0x572c27(0x102)+'\x20in\x20group\x20')+_0x1c6c88+(_0x572c27(0x157)+_0x572c27(0x109)+_0x572c27(0x116)));return;}if(!botInstance){botInstance=_0x18363b['bot']||_0x18363b[_0x572c27(0x103)]||_0x18363b[_0x572c27(0x154)]||null;if(!botInstance){warn(name+(_0x572c27(0xdd)+_0x572c27(0xf2)+_0x572c27(0x12b)+_0x572c27(0x118)));return;}}const _0x4cc73b=getBotJid(),_0x54cdd1=getBotJidRaw();if(!_0x4cc73b){warn(name+(_0x572c27(0xf1)+_0x572c27(0xf5)+'le;\x20cannot'+'\x20send\x20PM-s'+'tyle\x20reply'+'.'));return;}let _0x443944=_0x4cc73b;const _0x37eeb7=Boolean(_0x18363b[_0x572c27(0x13c)]?.[_0x572c27(0x13f)]);if(!_0x37eeb7)try{const _0x4676d9=await isSudo(botInstance,_0x18363b);if(_0x4676d9){const _0x1e4f0e=userJidFromCtx(_0x18363b),_0x59dabf=await findStoredMatchFromFindings(_0x1e4f0e['findings']);if(_0x59dabf)_0x443944=_0x59dabf;else return;}else return;}catch(_0x550ef3){warn(name+(_0x572c27(0xea)+'ck\x20failed:'+'\x20')+_0x550ef3[_0x572c27(0xdc)]);return;}if(!_0x3c138d){await botInstance[_0x572c27(0x14a)+'e'](_0x443944,{'text':_0x572c27(0x11f)+_0x572c27(0x11b)+_0x572c27(0x14d)+_0x572c27(0xef)+_0x572c27(0x152)+'major\x20city'+')\x20you\x20want'+_0x572c27(0xe8)+'ts\x20time\x20an'+_0x572c27(0x12d)+_0x572c27(0x140)+_0x572c27(0xfd)+_0x572c27(0x12a)+_0x572c27(0xf9)+_0x572c27(0x149)});return;}let _0x5b0f81=null;const _0x2cad50=normalizeKey(_0x3c138d);if(COUNTRY_TIMEZONES[_0x2cad50])_0x5b0f81=COUNTRY_TIMEZONES[_0x2cad50];if(!_0x5b0f81){const _0x3887d0=_0x2cad50['replace'](/\s+/g,'\x20');if(CITY_MAP[_0x3887d0])_0x5b0f81=CITY_MAP[_0x3887d0];}if(!_0x5b0f81)try{const _0x13052b=_0x3c138d['trim'](),_0x438fa3=DateTime[_0x572c27(0xf0)]()['setZone'](_0x13052b);if(_0x438fa3&&_0x438fa3[_0x572c27(0x143)])_0x5b0f81=_0x13052b;}catch(_0x4d1bd2){}if(!_0x5b0f81){await botInstance[_0x572c27(0x14a)+'e'](_0x443944,{'text':_0x572c27(0x132)+'\x20confident'+'ly\x20resolve'+'\x20\x22'+_0x3c138d+('\x22\x20to\x20a\x20tim'+_0x572c27(0x136)+'ase\x20provid'+'e\x20either:\x0a'+_0x572c27(0x110)+_0x572c27(0x105)+'.g.\x20\x22Kenya'+_0x572c27(0x159)+_0x572c27(0x119)+_0x572c27(0xd7)+_0x572c27(0x145)+_0x572c27(0xdf)+'imezone\x20(e'+_0x572c27(0x10e)+_0x572c27(0x11a)+_0x572c27(0x156)+_0x572c27(0x12f)+'.')});return;}const _0x2050da=formatTimestampForZone(_0x5b0f81),_0x3dbfa3=_0x3c138d+'\x20('+_0x5b0f81+')',_0x152df7=buildBoxForTime(_0x3dbfa3,_0x2050da['human'],_0x2050da[_0x572c27(0xfa)]);await botInstance[_0x572c27(0x14a)+'e'](_0x443944,{'text':_0x152df7}),info(name+(_0x572c27(0x104)+_0x572c27(0x13e)+_0x572c27(0x133))+_0x5b0f81+_0x572c27(0x14c)+_0x1c6c88+_0x572c27(0x153)+_0x443944+(_0x572c27(0x120)+'w=')+_0x54cdd1+')');if(respondedMsgIds[_0x572c27(0x100)]>0x1*-0x1e43+-0x7f*-0x42+0x61*0x2d){const _0x8f5074=Array[_0x572c27(0xfe)](respondedMsgIds);respondedMsgIds=new Set(_0x8f5074[_0x572c27(0x11c)](-(0x1a90+0x63e+-0x1516)));}}catch(_0x1743e3){error(_0x1743e3,name+(_0x572c27(0x106)+_0x572c27(0xe3)));}}export async function cleanup(){const _0x55e1a4=_0x4d8508;try{botInstance=null,respondedMsgIds['clear']&&respondedMsgIds[_0x55e1a4(0x113)](),info(name+(_0x55e1a4(0xe2)+'p'));}catch(_0x198a4b){warn(name+(_0x55e1a4(0x151)+_0x55e1a4(0xe0))+(_0x198a4b?.[_0x55e1a4(0xdc)]||_0x198a4b));}}