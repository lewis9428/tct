const _0x3dd367=_0x57fb;(function(_0x1416ea,_0x576efe){const _0x2252ea=_0x57fb,_0x3d61aa=_0x1416ea();while(!![]){try{const _0x3ed968=parseInt(_0x2252ea(0x19a))/(-0x5f*-0x25+-0x3*-0x15d+-0x1*0x11d1)*(parseInt(_0x2252ea(0x152))/(-0x7ba+0x5*-0x206+0x1*0x11da))+parseInt(_0x2252ea(0x183))/(-0xc2b+0x50e*-0x1+-0x1*-0x113c)*(-parseInt(_0x2252ea(0x1a2))/(-0xa76+-0xd52+-0x4*-0x5f3))+parseInt(_0x2252ea(0x192))/(-0x765+-0x4cc+0x2*0x61b)*(parseInt(_0x2252ea(0x1ae))/(-0x1be6*-0x1+-0x15a9+-0x637))+parseInt(_0x2252ea(0x16a))/(0x827+-0x1f*-0x11f+-0x2ae1)*(-parseInt(_0x2252ea(0x15f))/(0x1917+-0x1fa8+0x699))+-parseInt(_0x2252ea(0x170))/(-0x2170+-0xe88+0x3001)*(parseInt(_0x2252ea(0x139))/(0x1525*-0x1+0x113+0x141c))+-parseInt(_0x2252ea(0x199))/(0x2cd*0xc+-0x2006+-0x18b)+parseInt(_0x2252ea(0x181))/(0x1*0x739+-0x5f5*0x3+0xab2)*(parseInt(_0x2252ea(0x16f))/(-0x10e5+-0x21b3*0x1+-0x1*-0x32a5));if(_0x3ed968===_0x576efe)break;else _0x3d61aa['push'](_0x3d61aa['shift']());}catch(_0x62b1f8){_0x3d61aa['push'](_0x3d61aa['shift']());}}}(_0x26c2,-0xf2f9d+-0x6*-0x2b3e1+-0x81923*-0x1));import{readFileSync}from'fs';import{join}from'path';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid,getBotJidRaw}from'../utils/bot-state.js';export const name=_0x3dd367(0x164);export const version=_0x3dd367(0x1af);export const priority=-0xd2a+-0x1d*-0xa7+-0x5b7;let botInstance=null,respondedMsgIds=new Set(),DEFAULT_TIMEZONE='Africa/Nai'+_0x3dd367(0x174);const timeDataPath=join(process[_0x3dd367(0x1a4)](),_0x3dd367(0x162),_0x3dd367(0x164),_0x3dd367(0x143));let COUNTRY_TIMEZONES={},CITY_MAP={};try{const timeData=JSON['parse'](readFileSync(timeDataPath,_0x3dd367(0x14c)));COUNTRY_TIMEZONES=timeData['country_ti'+'mezones']||{},CITY_MAP=timeData[_0x3dd367(0x157)]||{},info(name+(_0x3dd367(0x131)+'imezone\x20ma'+'ppings\x20suc'+_0x3dd367(0x177)));}catch(_0x786b76){warn(name+(_0x3dd367(0x145)+_0x3dd367(0x193)+'ezone\x20mapp'+_0x3dd367(0x15b))+_0x786b76[_0x3dd367(0x166)]),COUNTRY_TIMEZONES={'kenya':_0x3dd367(0x13f)+_0x3dd367(0x174),'uk':'Europe/Lon'+_0x3dd367(0x186),'usa':'America/Ne'+_0x3dd367(0x14f)},CITY_MAP={'nairobi':_0x3dd367(0x13f)+_0x3dd367(0x174),'london':'Europe/Lon'+_0x3dd367(0x186),'new\x20york':'America/Ne'+_0x3dd367(0x14f)};}function _0x26c2(){const _0x5a57aa=[':\x20botInsta','ts\x20time\x20an','ezone.\x0aPle','3018NGCKqY','1.1.0','key','ipping.','now','text',':\x20Loaded\x20t','edMatchFro','map','human','ry\x20name\x20(e','bot','sendMessag','xample:\x20`t','3684130qaynnz','e\x20country\x20','\x22),\x0a\x20â€¢\x20a\x20m','slice','ED_WITH_SE','replace','Africa/Nai','zed.','string','jid','time.json','proceed.',':\x20Failed\x20t','\x20cleanup\x20e','Enter\x20the\x20','e\x20either:\x0a','\x20in\x20group\x20',':\x20initiali','ase\x20provid','utf8','client',':\x20refreshC','w_York','a/Nairobi\x22','Invalid\x20ti','24VlEOPk','setZone','DATETIME_M','\x0aâ•°â•â•â•â•â•â•â•â•','d\x20date.\x0a\x0aE','city_map','robi\x22),\x0a\x20â€¢',':\x20hotReloa',':\x20received','ings:\x20','\x20set\x20to\x20','â•â•â•âŠ·\x0aâ”‚\x20ðŸ“\x20','isArray','56anYvZK','nce\x20missin','has','data','length','time','name\x20of\x20th','message','\x20â€¢\x20a\x20count','clear','tyle\x20reply','841337TyKhqg','ajor\x20city\x20','isCommand','ring','endsWith','33859033mRUdSl','18ZWImfS','function','g\x20(PM-only','isValid','robi','toLocaleSt','e/London\x22)','cessfully','rror','toLowerCas','NFD','\x20â€”\x20ignorin','startsWith','atting\x20tim','I\x20couldn\x27t','TIMEZONE_N','â•­â”€â\x20time\x20â','12JmeOQS','rror:\x20','3YOoSTR','trim','\x20or\x20`time\x20','don','unknown','Error\x20form','\x20(origin=','normalize','.g.\x20\x22Kenya','gistration','remoteJid','\x20failed:\x20','chatId;\x20sk','(e.g.\x20\x22Nai','don`','985wfGOMI','o\x20load\x20tim','\x20cleaned\x20u','\x20an\x20IANA\x20t',',\x20sentTo=','imezone\x20/\x20','zoneName','401841oQmgso','37327XSkKXc','\x20command).','mezone','imezone\x20(e','from','\x20handler\x20e',':\x20Sudo\x20che','CONDS','3754568uRaWyc',':\x20findStor','cwd','\x0aâ”‚\x20âŒš\x20Zone:','r:\x20','fromMe','error:\x20','onfig\x20erro','toISO'];_0x26c2=function(){return _0x5a57aa;};return _0x26c2();}function refreshConfig(){const _0x1f02cc=_0x3dd367;try{const _0xf86cc9=typeof getConfig===_0x1f02cc(0x171)?getConfig()||{}:{};DEFAULT_TIMEZONE=_0xf86cc9['TIMEZONE']||_0xf86cc9[_0x1f02cc(0x17f)+'AME']||DEFAULT_TIMEZONE,info(name+(':\x20timezone'+_0x1f02cc(0x15c))+DEFAULT_TIMEZONE);}catch(_0x1704eb){warn(name+(_0x1f02cc(0x14e)+_0x1f02cc(0x1a9)+'r:\x20')+(_0x1704eb?.[_0x1f02cc(0x166)]||_0x1704eb));}}try{typeof hotReloadConfig==='function'&&hotReloadConfig(()=>{const _0x2ce978=_0x3dd367;try{refreshConfig();}catch(_0x3d65d2){warn(name+(_0x2ce978(0x159)+'dConfig\x20ha'+'ndler\x20erro'+_0x2ce978(0x1a6))+(_0x3d65d2?.[_0x2ce978(0x166)]||_0x3d65d2));}});}catch(_0x14e50e){warn(name+(_0x3dd367(0x159)+'dConfig\x20re'+_0x3dd367(0x18c)+_0x3dd367(0x18e))+(_0x14e50e?.[_0x3dd367(0x166)]||_0x14e50e));}function _0x57fb(_0x4a3f1c,_0xd77d3d){const _0x545e88=_0x26c2();return _0x57fb=function(_0x1f9f59,_0x46c6c1){_0x1f9f59=_0x1f9f59-(0xdd5+0x2095*0x1+0x2d3b*-0x1);let _0x159aec=_0x545e88[_0x1f9f59];return _0x159aec;},_0x57fb(_0x4a3f1c,_0xd77d3d);}refreshConfig();function normalizeKey(_0x211d1f){const _0x1aa943=_0x3dd367;if(!_0x211d1f||typeof _0x211d1f!==_0x1aa943(0x141))return'';let _0x13a6dd=_0x211d1f[_0x1aa943(0x179)+'e']()['trim']();return _0x13a6dd=_0x13a6dd[_0x1aa943(0x18a)](_0x1aa943(0x17a))[_0x1aa943(0x13e)](/\p{Diacritic}/gu,''),_0x13a6dd=_0x13a6dd[_0x1aa943(0x13e)](/[._/\\-]+/g,'\x20'),_0x13a6dd=_0x13a6dd[_0x1aa943(0x13e)](/\s+/g,'\x20')[_0x1aa943(0x184)](),_0x13a6dd;}function formatTimestampForZone(_0x410c7e){const _0x13ab64=_0x3dd367;try{const _0x42e456=DateTime[_0x13ab64(0x12f)]()[_0x13ab64(0x153)](_0x410c7e);if(!_0x42e456[_0x13ab64(0x173)])return{'human':_0x13ab64(0x151)+_0x13ab64(0x19c),'iso':null,'zoneName':_0x410c7e};return{'human':_0x42e456[_0x13ab64(0x175)+_0x13ab64(0x16d)](DateTime[_0x13ab64(0x154)+_0x13ab64(0x13d)+_0x13ab64(0x1a1)]),'iso':_0x42e456[_0x13ab64(0x1aa)](),'zoneName':_0x42e456['zoneName']};}catch(_0x1308d6){return{'human':_0x13ab64(0x188)+_0x13ab64(0x17d)+'e','iso':null,'zoneName':_0x410c7e};}}function buildBoxForTime(_0xebd9bd,_0x4d9ad0,_0x17ac12){const _0x3bfcf5=_0x3dd367;return _0x3bfcf5(0x180)+_0x3bfcf5(0x15d)+_0xebd9bd+'\x0aâ”‚\x20ðŸ•’\x20'+_0x4d9ad0+(_0x3bfcf5(0x1a5)+'\x20')+_0x17ac12+(_0x3bfcf5(0x155)+'â•â•âŠ·\x0a\x0a(.)');}export async function initialize(_0x4eea3b){const _0x5a92a4=_0x3dd367;botInstance=_0x4eea3b,info(name+(_0x5a92a4(0x14a)+_0x5a92a4(0x140))),refreshConfig();}async function findStoredMatchFromFindings(_0x49e6e3=[]){const _0x1f14d9=_0x3dd367;try{if(!Array[_0x1f14d9(0x15e)](_0x49e6e3)||_0x49e6e3[_0x1f14d9(0x163)]===-0xccf*-0x1+-0x466*-0x7+-0x2b99)return null;const _0x21bbe4=await listSudo();if(!Array[_0x1f14d9(0x15e)](_0x21bbe4)||_0x21bbe4['length']===-0x1e0b+-0x29*-0x4+-0x3*-0x9cd)return null;const _0x4edadd=new Set(_0x21bbe4[_0x1f14d9(0x133)](_0x934210=>String(_0x934210)));for(const _0x2bfe6d of _0x49e6e3){if(!_0x2bfe6d||!_0x2bfe6d[_0x1f14d9(0x142)]||typeof _0x2bfe6d['jid']!=='string')continue;try{const _0x5289cb=normalizeToJid(_0x2bfe6d[_0x1f14d9(0x142)]);if(_0x5289cb&&_0x4edadd['has'](_0x5289cb))return _0x5289cb;if(_0x4edadd[_0x1f14d9(0x161)](_0x2bfe6d['jid']))return _0x2bfe6d[_0x1f14d9(0x142)];}catch(_0x9d85df){}}return null;}catch(_0x1e88e3){return warn(name+(_0x1f14d9(0x1a3)+_0x1f14d9(0x132)+'mFindings\x20'+_0x1f14d9(0x1a8))+(_0x1e88e3?.[_0x1f14d9(0x166)]||_0x1e88e3)),null;}}export async function onMessage(_0x1bfb2a){const _0x4a4290=_0x3dd367;try{if(!_0x1bfb2a||!_0x1bfb2a[_0x4a4290(0x1b0)])return;const _0x125b14=_0x1bfb2a[_0x4a4290(0x1b0)]?.['id'];if(_0x125b14&&respondedMsgIds[_0x4a4290(0x161)](_0x125b14))return;if(!_0x1bfb2a[_0x4a4290(0x16c)])return;const _0x1f0ddf=(_0x1bfb2a[_0x4a4290(0x130)]||'')[_0x4a4290(0x184)]();if(!_0x1f0ddf)return;const _0x42afb6=_0x1f0ddf['toLowerCas'+'e']();if(!_0x42afb6[_0x4a4290(0x17c)](_0x4a4290(0x164)))return;const _0x1db333=_0x42afb6===_0x4a4290(0x164)?'':_0x1f0ddf[_0x4a4290(0x13e)](/^time\s+/i,'')[_0x4a4290(0x184)]();if(_0x125b14)respondedMsgIds['add'](_0x125b14);const _0x7b4fa3=_0x1bfb2a[_0x4a4290(0x18d)]||_0x1bfb2a[_0x4a4290(0x1b0)]?.[_0x4a4290(0x18d)]||_0x4a4290(0x187);if(_0x7b4fa3===_0x4a4290(0x187)){warn(name+(':\x20unknown\x20'+_0x4a4290(0x18f)+_0x4a4290(0x1b1)));return;}const _0x3291b6=String(_0x7b4fa3)[_0x4a4290(0x16e)]('@g.us');if(_0x3291b6){info(name+(_0x4a4290(0x15a)+_0x4a4290(0x149))+_0x7b4fa3+(_0x4a4290(0x17b)+_0x4a4290(0x172)+_0x4a4290(0x19b)));return;}if(!botInstance){botInstance=_0x1bfb2a[_0x4a4290(0x136)]||_0x1bfb2a[_0x4a4290(0x14d)]||_0x1bfb2a['_bot']||null;if(!botInstance){warn(name+(_0x4a4290(0x1ab)+_0x4a4290(0x160)+'g;\x20cannot\x20'+_0x4a4290(0x144)));return;}}const _0x3c60ad=getBotJid(),_0x215fd4=getBotJidRaw();if(!_0x3c60ad){warn(name+(':\x20botJid\x20n'+'ot\x20availab'+'le;\x20cannot'+'\x20send\x20PM-s'+_0x4a4290(0x169)+'.'));return;}let _0x9b5384=_0x3c60ad;const _0x50da71=Boolean(_0x1bfb2a[_0x4a4290(0x1b0)]?.[_0x4a4290(0x1a7)]);if(!_0x50da71)try{const _0x24c93d=await isSudo(botInstance,_0x1bfb2a);if(_0x24c93d){const _0x71d34=userJidFromCtx(_0x1bfb2a),_0x78ee78=await findStoredMatchFromFindings(_0x71d34['findings']);if(_0x78ee78)_0x9b5384=_0x78ee78;else return;}else return;}catch(_0x2be2c5){warn(name+(_0x4a4290(0x1a0)+'ck\x20failed:'+'\x20')+_0x2be2c5['message']);return;}if(!_0x1db333){await botInstance[_0x4a4290(0x137)+'e'](_0x9b5384,{'text':_0x4a4290(0x147)+_0x4a4290(0x165)+_0x4a4290(0x13a)+'(or\x20IANA\x20t'+_0x4a4290(0x197)+'major\x20city'+')\x20you\x20want'+'\x20to\x20know\x20i'+_0x4a4290(0x1ac)+_0x4a4290(0x156)+_0x4a4290(0x138)+'ime\x20Kenya`'+_0x4a4290(0x185)+'Europe/Lon'+_0x4a4290(0x191)});return;}let _0x4e4558=null;const _0x54a344=normalizeKey(_0x1db333);if(COUNTRY_TIMEZONES[_0x54a344])_0x4e4558=COUNTRY_TIMEZONES[_0x54a344];if(!_0x4e4558){const _0xbfcafb=_0x54a344[_0x4a4290(0x13e)](/\s+/g,'\x20');if(CITY_MAP[_0xbfcafb])_0x4e4558=CITY_MAP[_0xbfcafb];}if(!_0x4e4558)try{const _0x19e423=_0x1db333['trim'](),_0x250dce=DateTime[_0x4a4290(0x12f)]()[_0x4a4290(0x153)](_0x19e423);if(_0x250dce&&_0x250dce[_0x4a4290(0x173)])_0x4e4558=_0x19e423;}catch(_0x4534d3){}if(!_0x4e4558){await botInstance[_0x4a4290(0x137)+'e'](_0x9b5384,{'text':_0x4a4290(0x17e)+'\x20confident'+'ly\x20resolve'+'\x20\x22'+_0x1db333+('\x22\x20to\x20a\x20tim'+_0x4a4290(0x1ad)+_0x4a4290(0x14b)+_0x4a4290(0x148)+_0x4a4290(0x167)+_0x4a4290(0x135)+_0x4a4290(0x18b)+_0x4a4290(0x13b)+_0x4a4290(0x16b)+_0x4a4290(0x190)+_0x4a4290(0x158)+_0x4a4290(0x195)+_0x4a4290(0x19d)+'.g.\x20\x22Afric'+_0x4a4290(0x150)+'\x20or\x20\x22Europ'+_0x4a4290(0x176)+'.')});return;}const _0x82b1df=formatTimestampForZone(_0x4e4558),_0x4b0c9b=_0x1db333+'\x20('+_0x4e4558+')',_0x4b2202=buildBoxForTime(_0x4b0c9b,_0x82b1df[_0x4a4290(0x134)],_0x82b1df[_0x4a4290(0x198)]);await botInstance[_0x4a4290(0x137)+'e'](_0x9b5384,{'text':_0x4b2202}),info(name+(':\x20replied\x20'+'with\x20time\x20'+'for\x20')+_0x4e4558+_0x4a4290(0x189)+_0x7b4fa3+_0x4a4290(0x196)+_0x9b5384+(',\x20botJidRa'+'w=')+_0x215fd4+')');if(respondedMsgIds['size']>0x16f5+-0x1fd*-0x11+-0x253a){const _0x1743f9=Array[_0x4a4290(0x19e)](respondedMsgIds);respondedMsgIds=new Set(_0x1743f9[_0x4a4290(0x13c)](-(-0x17f+-0x1226+-0x1*-0x1f5d)));}}catch(_0x3a5db0){error(_0x3a5db0,name+(_0x4a4290(0x19f)+_0x4a4290(0x178)));}}export async function cleanup(){const _0xa2a56d=_0x3dd367;try{botInstance=null,respondedMsgIds['clear']&&respondedMsgIds[_0xa2a56d(0x168)](),info(name+(_0xa2a56d(0x194)+'p'));}catch(_0x19e4cb){warn(name+(_0xa2a56d(0x146)+_0xa2a56d(0x182))+(_0x19e4cb?.[_0xa2a56d(0x166)]||_0x19e4cb));}}