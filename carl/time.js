const _0x272213=_0x56a9;(function(_0x1d028a,_0x550d0a){const _0x336b4a=_0x56a9,_0xeb365f=_0x1d028a();while(!![]){try{const _0x4706fc=parseInt(_0x336b4a(0x25e))/(-0x11c4+0xf*-0x66+-0x17bf*-0x1)+parseInt(_0x336b4a(0x21e))/(0x255d+-0x1fcd+-0x58e)*(parseInt(_0x336b4a(0x1f1))/(-0x2417*-0x1+0x1b9f*0x1+-0x3fb3))+-parseInt(_0x336b4a(0x207))/(0x95*0x1d+-0x10a7+0x9*-0x6)+parseInt(_0x336b4a(0x25d))/(0x1c14+0x203f+-0x3c4e)*(-parseInt(_0x336b4a(0x22a))/(0x9d4+0x1*-0x8c0+-0x10e))+-parseInt(_0x336b4a(0x1e0))/(0x17f6+-0x2*-0x52c+-0x2247)+parseInt(_0x336b4a(0x244))/(0x1bfd+-0x1b5a+-0x9b)+-parseInt(_0x336b4a(0x234))/(-0x24*-0x10+-0x13*0x6b+0x5ba)*(-parseInt(_0x336b4a(0x255))/(-0x1b0d*0x1+-0x2*0x6ca+0x28ab));if(_0x4706fc===_0x550d0a)break;else _0xeb365f['push'](_0xeb365f['shift']());}catch(_0x261a8e){_0xeb365f['push'](_0xeb365f['shift']());}}}(_0x5b9f,0x1*0x327e6+-0x1*0x57c03+0x817e0));import{readFileSync}from'fs';import{join}from'path';function _0x5b9f(){const _0x5978d3=['human','â•­â”€â\x20time\x20â',':\x20Sudo\x20che','nce\x20missin','2381676TGoSMs','\x20set\x20to\x20','rror','\x20send\x20PM-s','cwd',',\x20sentTo=','r:\x20','has','ppings\x20suc','robi\x22),\x0a\x20â€¢','remoteJid','ring','g;\x20cannot\x20','\x0aâ”‚\x20ðŸ•’\x20','\x20â€”\x20ignorin','NFD','o\x20load\x20tim',':\x20replied\x20','\x22\x20to\x20a\x20tim','jid','tyle\x20reply','\x20(origin=','ry\x20name\x20(e','802886coAaqN','map','xample:\x20`t','for\x20','imezone\x20ma','â•â•âŠ·\x0a\x0a(.)','toISO','don','dConfig\x20re','rror:\x20','.g.\x20\x22Afric','e\x20either:\x0a','18qWMldD','\x20or\x20\x22Europ','data','Europe/Lon','mezone','mezones','w_York','le;\x20cannot','message','toLocaleSt','9eitAQq','robi',':\x20Failed\x20t','CONDS','trim','unknown','name\x20of\x20th','\x20cleanup\x20e',':\x20botInsta','imezone\x20/\x20','e\x20country\x20','isValid','client','ajor\x20city\x20','fromMe','ezone\x20mapp','3936240rEdEHK','isArray',':\x20received','string','ED_WITH_SE','replace','zoneName','\x20confident','Enter\x20the\x20','startsWith','don`',':\x20initiali',':\x20botJid\x20n','cessfully','sendMessag','ezone.\x0aPle','\x22),\x0a\x20â€¢\x20a\x20m','4024180IzdOpU','findings','AME','ase\x20provid','size','endsWith',':\x20timezone','imezone\x20(e','588035rWryou','52928mSiqsN','_bot','slice','â•â•â•âŠ·\x0aâ”‚\x20ðŸ“\x20','159488mcQsFX','length','parse','\x20failed:\x20','\x20to\x20know\x20i','time','Africa/Nai','setZone','edMatchFro','Error\x20form','@g.us','\x20an\x20IANA\x20t','ipping.','\x0aâ•°â•â•â•â•â•â•â•â•','\x20or\x20`time\x20','TIMEZONE_N','major\x20city','3ZKAUoN',':\x20unknown\x20','error:\x20','\x20â€¢\x20a\x20count','ts\x20time\x20an','key',':\x20hotReloa','now','clear','ndler\x20erro','g\x20(PM-only','chatId;\x20sk','ly\x20resolve','gistration','.g.\x20\x22Kenya',':\x20Loaded\x20t','America/Ne','a/Nairobi\x22'];_0x5b9f=function(){return _0x5978d3;};return _0x5b9f();}import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';function _0x56a9(_0x5c0b63,_0x291fea){const _0x4fb193=_0x5b9f();return _0x56a9=function(_0x2a84b0,_0x17fc9d){_0x2a84b0=_0x2a84b0-(0x169f*0x1+-0x2+-0x14c0);let _0x37b4e8=_0x4fb193[_0x2a84b0];return _0x37b4e8;},_0x56a9(_0x5c0b63,_0x291fea);}import{getConfig,hotReloadConfig}from'../utils/config.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid,getBotJidRaw}from'../utils/bot-state.js';export const name=_0x272213(0x1e5);export const version='1.1.0';export const priority=0x1*-0x136b+-0x692*-0x1+0xce3;let botInstance=null,respondedMsgIds=new Set(),DEFAULT_TIMEZONE=_0x272213(0x1e6)+_0x272213(0x235);const timeDataPath=join(process[_0x272213(0x20b)](),_0x272213(0x22c),_0x272213(0x1e5),'time.json');let COUNTRY_TIMEZONES={},CITY_MAP={};try{const timeData=JSON[_0x272213(0x1e2)](readFileSync(timeDataPath,'utf8'));COUNTRY_TIMEZONES=timeData['country_ti'+_0x272213(0x22f)]||{},CITY_MAP=timeData['city_map']||{},info(name+(_0x272213(0x200)+_0x272213(0x222)+_0x272213(0x20f)+_0x272213(0x251)));}catch(_0x44e5b7){warn(name+(_0x272213(0x236)+_0x272213(0x217)+_0x272213(0x243)+'ings:\x20')+_0x44e5b7['message']),COUNTRY_TIMEZONES={'kenya':_0x272213(0x1e6)+_0x272213(0x235),'uk':_0x272213(0x22d)+_0x272213(0x225),'usa':'America/Ne'+_0x272213(0x230)},CITY_MAP={'nairobi':_0x272213(0x1e6)+'robi','london':_0x272213(0x22d)+_0x272213(0x225),'new\x20york':_0x272213(0x201)+'w_York'};}function refreshConfig(){const _0x389f53=_0x272213;try{const _0x22e837=typeof getConfig==='function'?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x22e837['TIMEZONE']||_0x22e837[_0x389f53(0x1ef)+_0x389f53(0x257)]||DEFAULT_TIMEZONE,info(name+(_0x389f53(0x25b)+_0x389f53(0x208))+DEFAULT_TIMEZONE);}catch(_0x3de92c){warn(name+(':\x20refreshC'+'onfig\x20erro'+_0x389f53(0x20d))+(_0x3de92c?.[_0x389f53(0x232)]||_0x3de92c));}}try{typeof hotReloadConfig==='function'&&hotReloadConfig(()=>{const _0x2c4c76=_0x272213;try{refreshConfig();}catch(_0x46a53f){warn(name+(_0x2c4c76(0x1f7)+'dConfig\x20ha'+_0x2c4c76(0x1fa)+_0x2c4c76(0x20d))+(_0x46a53f?.['message']||_0x46a53f));}});}catch(_0x2c597c){warn(name+(_0x272213(0x1f7)+_0x272213(0x226)+_0x272213(0x1fe)+_0x272213(0x1e3))+(_0x2c597c?.['message']||_0x2c597c));}refreshConfig();function normalizeKey(_0x371d12){const _0x43c57b=_0x272213;if(!_0x371d12||typeof _0x371d12!==_0x43c57b(0x247))return'';let _0x4712e2=_0x371d12['toLowerCas'+'e']()[_0x43c57b(0x238)]();return _0x4712e2=_0x4712e2['normalize'](_0x43c57b(0x216))[_0x43c57b(0x249)](/\p{Diacritic}/gu,''),_0x4712e2=_0x4712e2['replace'](/[._/\\-]+/g,'\x20'),_0x4712e2=_0x4712e2[_0x43c57b(0x249)](/\s+/g,'\x20')['trim'](),_0x4712e2;}function formatTimestampForZone(_0x3a395b){const _0x37448c=_0x272213;try{const _0x1bc461=DateTime[_0x37448c(0x1f8)]()[_0x37448c(0x1e7)](_0x3a395b);if(!_0x1bc461[_0x37448c(0x23f)])return{'human':'Invalid\x20ti'+_0x37448c(0x22e),'iso':null,'zoneName':_0x3a395b};return{'human':_0x1bc461[_0x37448c(0x233)+_0x37448c(0x212)](DateTime['DATETIME_M'+_0x37448c(0x248)+_0x37448c(0x237)]),'iso':_0x1bc461[_0x37448c(0x224)](),'zoneName':_0x1bc461[_0x37448c(0x24a)]};}catch(_0x205b6b){return{'human':_0x37448c(0x1e9)+'atting\x20tim'+'e','iso':null,'zoneName':_0x3a395b};}}function buildBoxForTime(_0x1d1531,_0x46e31c,_0x2bf886){const _0x168f7c=_0x272213;return _0x168f7c(0x204)+_0x168f7c(0x1df)+_0x1d1531+_0x168f7c(0x214)+_0x46e31c+('\x0aâ”‚\x20âŒš\x20Zone:'+'\x20')+_0x2bf886+(_0x168f7c(0x1ed)+_0x168f7c(0x223));}export async function initialize(_0x386bde){const _0x47fbc7=_0x272213;botInstance=_0x386bde,info(name+(_0x47fbc7(0x24f)+'zed.')),refreshConfig();}async function findStoredMatchFromFindings(_0x57f81a=[]){const _0x14b5df=_0x272213;try{if(!Array[_0x14b5df(0x245)](_0x57f81a)||_0x57f81a['length']===-0x1*0xe14+0x4de*0x1+-0x12*-0x83)return null;const _0x4b647a=await listSudo();if(!Array[_0x14b5df(0x245)](_0x4b647a)||_0x4b647a[_0x14b5df(0x1e1)]===-0xbbb+0x260d+-0x6*0x463)return null;const _0x522b01=new Set(_0x4b647a[_0x14b5df(0x21f)](_0x29f889=>String(_0x29f889)));for(const _0x126858 of _0x57f81a){if(!_0x126858||!_0x126858[_0x14b5df(0x21a)]||typeof _0x126858[_0x14b5df(0x21a)]!==_0x14b5df(0x247))continue;try{const _0x37dbac=normalizeToJid(_0x126858[_0x14b5df(0x21a)]);if(_0x37dbac&&_0x522b01[_0x14b5df(0x20e)](_0x37dbac))return _0x37dbac;if(_0x522b01[_0x14b5df(0x20e)](_0x126858[_0x14b5df(0x21a)]))return _0x126858[_0x14b5df(0x21a)];}catch(_0x380b90){}}return null;}catch(_0x1ac75a){return warn(name+(':\x20findStor'+_0x14b5df(0x1e8)+'mFindings\x20'+_0x14b5df(0x1f3))+(_0x1ac75a?.[_0x14b5df(0x232)]||_0x1ac75a)),null;}}export async function onMessage(_0x2602fa){const _0x55c7f3=_0x272213;try{if(!_0x2602fa||!_0x2602fa[_0x55c7f3(0x1f6)])return;const _0x76f879=_0x2602fa[_0x55c7f3(0x1f6)]?.['id'];if(_0x76f879&&respondedMsgIds['has'](_0x76f879))return;if(!_0x2602fa['isCommand'])return;const _0x2f6220=(_0x2602fa['text']||'')[_0x55c7f3(0x238)]();if(!_0x2f6220)return;const _0x38b4c3=_0x2f6220['toLowerCas'+'e']();if(!_0x38b4c3[_0x55c7f3(0x24d)]('time'))return;const _0x17781a=_0x38b4c3===_0x55c7f3(0x1e5)?'':_0x2f6220['replace'](/^time\s+/i,'')[_0x55c7f3(0x238)]();if(_0x76f879)respondedMsgIds['add'](_0x76f879);const _0x4f5782=_0x2602fa[_0x55c7f3(0x211)]||_0x2602fa[_0x55c7f3(0x1f6)]?.['remoteJid']||_0x55c7f3(0x239);if(_0x4f5782===_0x55c7f3(0x239)){warn(name+(_0x55c7f3(0x1f2)+_0x55c7f3(0x1fc)+_0x55c7f3(0x1ec)));return;}const _0x48ac67=String(_0x4f5782)[_0x55c7f3(0x25a)](_0x55c7f3(0x1ea));if(_0x48ac67){info(name+(_0x55c7f3(0x246)+'\x20in\x20group\x20')+_0x4f5782+(_0x55c7f3(0x215)+_0x55c7f3(0x1fb)+'\x20command).'));return;}if(!botInstance){botInstance=_0x2602fa['bot']||_0x2602fa[_0x55c7f3(0x240)]||_0x2602fa[_0x55c7f3(0x1dd)]||null;if(!botInstance){warn(name+(_0x55c7f3(0x23c)+_0x55c7f3(0x206)+_0x55c7f3(0x213)+'proceed.'));return;}}const _0x5dd17c=getBotJid(),_0xe9913=getBotJidRaw();if(!_0x5dd17c){warn(name+(_0x55c7f3(0x250)+'ot\x20availab'+_0x55c7f3(0x231)+_0x55c7f3(0x20a)+_0x55c7f3(0x21b)+'.'));return;}let _0x52caf1=_0x5dd17c;const _0x2fb7ad=Boolean(_0x2602fa[_0x55c7f3(0x1f6)]?.[_0x55c7f3(0x242)]);if(!_0x2fb7ad)try{const _0x1ce440=await isSudo(botInstance,_0x2602fa);if(_0x1ce440){const _0x369d95=userJidFromCtx(_0x2602fa),_0x20cada=await findStoredMatchFromFindings(_0x369d95[_0x55c7f3(0x256)]);if(_0x20cada)_0x52caf1=_0x20cada;else return;}else return;}catch(_0x3d8aca){warn(name+(_0x55c7f3(0x205)+'ck\x20failed:'+'\x20')+_0x3d8aca['message']);return;}if(!_0x17781a){await botInstance[_0x55c7f3(0x252)+'e'](_0x52caf1,{'text':_0x55c7f3(0x24c)+_0x55c7f3(0x23a)+_0x55c7f3(0x23e)+'(or\x20IANA\x20t'+_0x55c7f3(0x23d)+_0x55c7f3(0x1f0)+')\x20you\x20want'+_0x55c7f3(0x1e4)+_0x55c7f3(0x1f5)+'d\x20date.\x0a\x0aE'+_0x55c7f3(0x220)+'ime\x20Kenya`'+_0x55c7f3(0x1ee)+_0x55c7f3(0x22d)+_0x55c7f3(0x24e)});return;}let _0x5594ef=null;const _0x383114=normalizeKey(_0x17781a);if(COUNTRY_TIMEZONES[_0x383114])_0x5594ef=COUNTRY_TIMEZONES[_0x383114];if(!_0x5594ef){const _0x7a2682=_0x383114[_0x55c7f3(0x249)](/\s+/g,'\x20');if(CITY_MAP[_0x7a2682])_0x5594ef=CITY_MAP[_0x7a2682];}if(!_0x5594ef)try{const _0x355acd=_0x17781a['trim'](),_0x452a1b=DateTime[_0x55c7f3(0x1f8)]()['setZone'](_0x355acd);if(_0x452a1b&&_0x452a1b['isValid'])_0x5594ef=_0x355acd;}catch(_0xf4a915){}if(!_0x5594ef){await botInstance[_0x55c7f3(0x252)+'e'](_0x52caf1,{'text':'I\x20couldn\x27t'+_0x55c7f3(0x24b)+_0x55c7f3(0x1fd)+'\x20\x22'+_0x17781a+(_0x55c7f3(0x219)+_0x55c7f3(0x253)+_0x55c7f3(0x258)+_0x55c7f3(0x229)+_0x55c7f3(0x1f4)+_0x55c7f3(0x21d)+_0x55c7f3(0x1ff)+_0x55c7f3(0x254)+_0x55c7f3(0x241)+'(e.g.\x20\x22Nai'+_0x55c7f3(0x210)+_0x55c7f3(0x1eb)+_0x55c7f3(0x25c)+_0x55c7f3(0x228)+_0x55c7f3(0x202)+_0x55c7f3(0x22b)+'e/London\x22)'+'.')});return;}const _0x297cc4=formatTimestampForZone(_0x5594ef),_0x3a95d9=_0x17781a+'\x20('+_0x5594ef+')',_0x5528fb=buildBoxForTime(_0x3a95d9,_0x297cc4[_0x55c7f3(0x203)],_0x297cc4['zoneName']);await botInstance[_0x55c7f3(0x252)+'e'](_0x52caf1,{'text':_0x5528fb}),info(name+(_0x55c7f3(0x218)+'with\x20time\x20'+_0x55c7f3(0x221))+_0x5594ef+_0x55c7f3(0x21c)+_0x4f5782+_0x55c7f3(0x20c)+_0x52caf1+(',\x20botJidRa'+'w=')+_0xe9913+')');if(respondedMsgIds[_0x55c7f3(0x259)]>0xa00+0x1731+-0x1*0xda9){const _0x5b614c=Array['from'](respondedMsgIds);respondedMsgIds=new Set(_0x5b614c[_0x55c7f3(0x1de)](-(-0x2b3*-0x4+-0x1*0x11f2+0x12de)));}}catch(_0x206212){error(_0x206212,name+('\x20handler\x20e'+_0x55c7f3(0x209)));}}export async function cleanup(){const _0x35da03=_0x272213;try{botInstance=null,respondedMsgIds[_0x35da03(0x1f9)]&&respondedMsgIds['clear'](),info(name+('\x20cleaned\x20u'+'p'));}catch(_0x171ea4){warn(name+(_0x35da03(0x23b)+_0x35da03(0x227))+(_0x171ea4?.[_0x35da03(0x232)]||_0x171ea4));}}