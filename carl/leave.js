const _0x35207a=_0x11a7;(function(_0x3f2bce,_0x486879){const _0x560b7e=_0x11a7,_0x5f0fff=_0x3f2bce();while(!![]){try{const _0x30f0fd=parseInt(_0x560b7e(0x221))/(-0x71*-0x25+0xd5b*-0x1+-0x1*0x2f9)*(-parseInt(_0x560b7e(0x261))/(-0x16af+-0x6ed+0x1d9e))+parseInt(_0x560b7e(0x1c1))/(0x1f07+0x25e+0x2*-0x10b1)+-parseInt(_0x560b7e(0x25d))/(-0x11c1+-0x22*0x12+0x1429)*(-parseInt(_0x560b7e(0x21b))/(0x1*0x220f+0x19fc+-0x3c06))+parseInt(_0x560b7e(0x18e))/(0x6b*-0x17+0x1b*0x13f+-0x7*0x36e)*(parseInt(_0x560b7e(0x252))/(0x8d9+0x6*0xc+0xa*-0xe9))+-parseInt(_0x560b7e(0x197))/(0x2*0x9b1+0x15dd+-0x2937)*(parseInt(_0x560b7e(0x1fd))/(-0x1*0x2441+-0xab4*-0x1+0x1996))+-parseInt(_0x560b7e(0x263))/(0xd78+-0x17*-0x35+-0x1231)*(-parseInt(_0x560b7e(0x226))/(0x26c1+-0x1*-0x14ed+-0x3*0x13e1))+-parseInt(_0x560b7e(0x20d))/(-0x16d2+-0x517*-0x5+0x1*-0x295)*(parseInt(_0x560b7e(0x19a))/(-0x4e*0x4c+0xa00+0xd35));if(_0x30f0fd===_0x486879)break;else _0x5f0fff['push'](_0x5f0fff['shift']());}catch(_0x3fa09c){_0x5f0fff['push'](_0x5f0fff['shift']());}}}(_0x26ec,0xb65ae+-0x5ef6*0x37+0x543*0x3ea));import _0x333e5a from'path';import _0x3f1b3c from'fs/promises';import{Tail}from'tail';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{getBotJid}from'../utils/bot-state.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import*as _0x2992a9 from'../utils/groups.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name=_0x35207a(0x1ba);export const version=_0x35207a(0x1f7);export const priority=0xc7*-0x18+-0x478+-0x82*-0x2e;export const commands=[_0x35207a(0x1d2),_0x35207a(0x1f4)];const LOG_FILE_PATH=_0x333e5a['join'](process[_0x35207a(0x229)](),_0x35207a(0x1c6),'tmp','leave_join'+_0x35207a(0x204));let botRef=null,sendApi=null,tail=null;const eventQueue=[];let isProcessingQueue=![];const PROCESS_INTERVAL_MS=0x1*-0x2c2+0x1*-0x26b0+0xa*0x457,processedIds=new Set();function shortLocalFromJid(_0x51aec6){const _0x49ea14=_0x35207a;try{return String(_0x51aec6||'')[_0x49ea14(0x19f)]('@')[-0xe*0x106+-0x75a*-0x1+-0x26*-0x2f];}catch{return _0x51aec6;}}function eventUniqueId(_0x1f095b){const _0x3356f1=_0x35207a;if(!_0x1f095b)return null;if(_0x1f095b['id'])return String(_0x1f095b['id']);return String(_0x1f095b[_0x3356f1(0x1f6)]||_0x1f095b[_0x3356f1(0x242)]||'nogroup')+':'+String(_0x1f095b['participan'+_0x3356f1(0x1ec)]||_0x1f095b[_0x3356f1(0x1cf)+'t']||_0x3356f1(0x1de))+':'+String(_0x1f095b[_0x3356f1(0x1b8)]||_0x1f095b['ts']||Date['now']());}function trimProcessedSet(){const _0x5e6fad=_0x35207a;if(processedIds[_0x5e6fad(0x240)]>-0xba5+0xec9+0x1064){const _0x3d0950=Array['from'](processedIds);processedIds[_0x5e6fad(0x200)]();for(const _0x3f1cc1 of _0x3d0950[_0x5e6fad(0x18f)](-(0x26f7+0xd7d*0x1+-0x28bc)))processedIds[_0x5e6fad(0x24a)](_0x3f1cc1);}}async function ensureSchema(){const _0x42176e=_0x35207a;await db[_0x42176e(0x23e)](_0x42176e(0x1da)+'E\x20TABLE\x20IF'+_0x42176e(0x215)+_0x42176e(0x1d9)+_0x42176e(0x1fe)+_0x42176e(0x24d)+_0x42176e(0x1e2)+_0x42176e(0x1df)+_0x42176e(0x1a5)+'\x20TEXT\x20NOT\x20'+_0x42176e(0x1ff)+_0x42176e(0x1a4)+_0x42176e(0x26e)+_0x42176e(0x22a)+'\x0a\x20\x20\x20\x20\x20\x20upd'+_0x42176e(0x20a)+_0x42176e(0x212)+_0x42176e(0x258)+_0x42176e(0x20c)),info(_0x42176e(0x243)+_0x42176e(0x267)+_0x42176e(0x20f));}async function saveLeaveToDb(_0x45414e,_0x2a6a29,_0x552059=-0x492+-0x196c+-0x1*-0x1dfe){const _0x129ca8=_0x35207a;try{const _0x3a74ef=Math['floor'](Date[_0x129ca8(0x19b)]()/(0x9ed+-0x109*-0x17+-0x1dd4));return await db[_0x129ca8(0x198)]('INSERT\x20INT'+_0x129ca8(0x1e0)+_0x129ca8(0x1ad)+_0x129ca8(0x1b1)+_0x129ca8(0x195)+_0x129ca8(0x26a)+_0x129ca8(0x246)+_0x129ca8(0x1ed)+',\x20?,\x20?)\x0a\x20\x20'+_0x129ca8(0x19d)+_0x129ca8(0x1e8)+_0x129ca8(0x25a)+_0x129ca8(0x24e)+_0x129ca8(0x191)+_0x129ca8(0x22e)+'\x20excluded.'+_0x129ca8(0x1f0)+_0x129ca8(0x1ab)+_0x129ca8(0x1b9)+_0x129ca8(0x1f2)+_0x129ca8(0x1aa)+_0x129ca8(0x1c4)+'ed_at\x20=\x20ex'+_0x129ca8(0x24b)+_0x129ca8(0x1bf),[_0x45414e,String(_0x2a6a29||''),Number(_0x552059?-0x1808+0x2*0x10a2+-0x93b:-0x189d+0x6d*-0x3b+0x31bc),_0x3a74ef]),!![];}catch(_0x4599e2){return warn(_0x129ca8(0x232)+'veLeaveToD'+_0x129ca8(0x219)+_0x129ca8(0x190)+_0x45414e+':\x20'+(_0x4599e2?.['message']||_0x4599e2)),![];}}function _0x26ec(){const _0x1112d5=['[leave]\x20on','error','off','remove','naged\x20hand','Could\x20not\x20','[leave]\x20st','exec','mentions','size','r-event\x20ha','group','[leave]\x20DB','ndStoredMa','HERE\x20group','\x0a\x20\x20\x20\x20\x20\x20\x20VA','fault\x20conn','ing','erManager','add','cluded.upd','ves\x20SET\x20en','up_jid\x20TEX','\x20UPDATE\x20SE','[leave]\x20ma','function','gistered\x20w','7IEehfH','leteLeaveF','line','message','ng\x20leave\x20l','map','ULT\x200\x0a\x20\x20\x20\x20','[leave]\x20cl','up_jid)\x20DO','length','\x20for\x20','6028072jiTCHA','remoteJid','has','catch','999916pAHQwQ','eanup\x20erro','6460270xsuGpN','led\x20failed','jid','ids','\x20schema\x20en','@g.us','groupMetad','pdated_at)','✅\x20Saved\x20','the\x20group','includes','\x20\x20INTEGER\x20','PM:\x20empty\x20','Unknown\x20gp','h\x20listener','from','5875314cfLSXH','slice','or\x20','T\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Db\x20failed\x20','[leave]\x20fi','\x20for\x20leavi','enabled,\x20u','sender','1424ttnsZU','run','[leave]\x20ha','25727oypOAt','now','sendMessag','\x20\x20\x20\x20\x20ON\x20CO','r\x20calling\x20','split','shift','test','for\x20','her\x20failed','\x20\x20enabled\x20','\x20message\x20\x20','arted\x20tail','aryLeave\x20e','✅\x20Deleted\x20','isArray','bled,\x0a\x20\x20\x20\x20','\x20\x20\x20\x20\x20\x20\x20\x20en','\x20updated_a','group_jid,','parse','push','tempts\x20fai','\x20message,\x20','ata','trim','PM:\x20includ','all','replace','UPDATE\x20lea','timestamp','abled\x20=\x20ex','leave','sage,\x20enab','ing\x20','✅\x20Leave\x20','subject','ated_at;','E\x20group_ji','1135713XcnOMl','[leave]\x20pe','ler\x20start\x20','\x20\x20\x20\x20\x20updat','sock','data','k\x20failed:\x20','string','object','itialize:\x20','rror:\x20','ed\x20to\x20','failed:\x20','\x20alias:\x20','participan','_jid\x20=\x20?','toLowerCas','lvc','equires\x20bo','[leave]\x20in','opLogWatch','gister\x20wit','r:\x20','Manager:\x20','S\x20leaves\x20(','\x0a\x20\x20\x20\x20CREAT','leave.log','\x20group\x20ent','d\x20=\x20?','nopart','KEY,\x0a\x20\x20\x20\x20\x20','O\x20leaves\x20(','[leave]\x20de','T\x20PRIMARY\x20','[leave]\x20re','\x20connectio','get','age\x20body','type','NFLICT(gro','s|jid|all>','abled\x20=\x20?,','changes','t_pn','LUES\x20(?,\x20?','[leave]\x20ge','artLogWatc','message,\x0a\x20','text','cluded.ena','ections','dellvc','endsWith','groupId','4.2.6','[leave]\x20se','ed:\x20','ng\x20','eaned\x20up.','tLeaveFrom','16470euTtwT','\x0a\x20\x20\x20\x20\x20\x20gro','NULL,\x0a\x20\x20\x20\x20','clear','Message\x20er','t\x20instance','lled','.log','dListener:','rse\x20log\x20li','isCommand','getUniqueJ','istener\x20ca','ated_at\x20IN','and\x20watchi',');\x0a\x20\x20','11676BkOTyM','nt\x20DM\x20to\x20','sured','unwatch','resolveNam','TEGER\x20DEFA','itialized\x20','ng):\x20','\x20NOT\x20EXIST','ndleVolunt','ndApi\x20fail','[leave]\x20Co','b\x20failed\x20f','join','5PhdTiL','tchFromFin','er\x20error:\x20','ith\x20listen','opManagedL','match','1wyJHek','ries.','resolve\x20de','enabled','[leave]\x20Ta','11uYfBKh','ne\x20(skippi','ndler\x20fail','cwd','DEFAULT\x200,','findings','e\x20gp:<alia','normalizeT','\x20message\x20=','ror:\x20','action','oUserJid','[leave]\x20sa','eaves\x20WHER','key','iled\x20to\x20re','disabled'];_0x26ec=function(){return _0x1112d5;};return _0x26ec();}async function deleteLeaveFromDb(_0x17c16c){const _0x406dde=_0x35207a;try{const _0x132ea2=await db['run']('DELETE\x20FRO'+'M\x20leaves\x20W'+_0x406dde(0x245)+_0x406dde(0x1d0),[_0x17c16c]);return _0x132ea2?.['changes']||0x30+-0x1d3*0x8+0x4*0x39a;}catch(_0x621833){return warn(_0x406dde(0x1e1)+_0x406dde(0x253)+'romDb\x20fail'+'ed\x20for\x20'+_0x17c16c+':\x20'+(_0x621833?.[_0x406dde(0x255)]||_0x621833)),0x771*-0x1+-0x991*-0x1+-0x220;}}async function getLeaveFromDb(_0x4f0bb9){const _0x3e3410=_0x35207a;try{const _0x392d07=await db[_0x3e3410(0x1e5)]('SELECT\x20mes'+_0x3e3410(0x1bb)+'led\x20FROM\x20l'+_0x3e3410(0x233)+'E\x20group_ji'+_0x3e3410(0x1dd),[_0x4f0bb9]);if(!_0x392d07)return null;return{'message':_0x392d07[_0x3e3410(0x255)],'enabled':Number(_0x392d07[_0x3e3410(0x224)]||0xda2+-0x1c09+0x4cd*0x3)===-0xbcf*-0x1+-0xa82+-0x2*0xa6};}catch(_0x41e921){return warn(_0x3e3410(0x1ee)+_0x3e3410(0x1fc)+_0x3e3410(0x192)+_0x3e3410(0x1a2)+_0x4f0bb9+':\x20'+(_0x41e921?.[_0x3e3410(0x255)]||_0x41e921)),null;}}async function setLeaveEnabled(_0x4ad0e5,_0x1ebb6d){const _0xc80ea2=_0x35207a;try{const _0x1ceef4=Math['floor'](Date[_0xc80ea2(0x19b)]()/(-0x1d4b+-0x11f*0x1+0x2e*0xbf)),_0x46ad81=await db[_0xc80ea2(0x198)](_0xc80ea2(0x1b7)+_0xc80ea2(0x24c)+_0xc80ea2(0x1ea)+_0xc80ea2(0x1ac)+'t\x20=\x20?\x20WHER'+_0xc80ea2(0x1c0)+_0xc80ea2(0x1dd),[Number(_0x1ebb6d?-0x84f*-0x1+0x1054+-0x18a2:0x1c2c+0x1aa+-0x1dd6),_0x1ceef4,_0x4ad0e5]);return!!_0x46ad81?.[_0xc80ea2(0x1eb)];}catch(_0x24acad){return warn(_0xc80ea2(0x1f8)+'tLeaveEnab'+_0xc80ea2(0x264)+_0xc80ea2(0x25c)+_0x4ad0e5+':\x20'+(_0x24acad?.['message']||_0x24acad)),![];}}function setupSendApi(){const _0x2df5c7=_0x35207a;if(!botRef)return;if(typeof botRef[_0x2df5c7(0x19c)+'e']==='function')sendApi=async(_0x2bf4bc,_0x4f4579)=>await botRef[_0x2df5c7(0x19c)+'e'](_0x2bf4bc,_0x4f4579);else{if(botRef[_0x2df5c7(0x1c5)]&&typeof botRef[_0x2df5c7(0x1c5)][_0x2df5c7(0x19c)+'e']===_0x2df5c7(0x250))sendApi=async(_0x4dd50a,_0x420e7b)=>await botRef[_0x2df5c7(0x1c5)][_0x2df5c7(0x19c)+'e'](_0x4dd50a,_0x420e7b);else sendApi=null;}}async function sendText(_0x1f76f1,_0x2de095,_0x5406d9=[]){const _0x30f1ab=_0x35207a;try{if(!_0x1f76f1)return null;if(!sendApi)return warn(_0x30f1ab(0x1f8)+'ndApi\x20not\x20'+'available'),null;let _0x5d44c5=typeof _0x2de095==='string'?{'text':String(_0x2de095)}:{..._0x2de095||{}};if(Array[_0x30f1ab(0x1a9)](_0x5406d9)&&_0x5406d9['length'])_0x5d44c5[_0x30f1ab(0x23f)]=_0x5406d9;return await sendApi(_0x1f76f1,_0x5d44c5);}catch(_0x17fe89){return warn(_0x30f1ab(0x1f8)+_0x30f1ab(0x217)+_0x30f1ab(0x1cc)+_0x1f76f1+':\x20'+(_0x17fe89?.[_0x30f1ab(0x255)]||_0x17fe89)),null;}}async function findStoredMatchFromFindings(_0x3b3af1=[]){const _0x56c832=_0x35207a;try{const _0x3e6520=await listSudo();if(!Array[_0x56c832(0x1a9)](_0x3e6520)||_0x3e6520[_0x56c832(0x25b)]===-0x259b+0xb3a*0x1+0x1a61)return null;const _0x24bafa=new Set(_0x3e6520[_0x56c832(0x257)](String));for(const _0x1ac868 of _0x3b3af1||[]){if(!_0x1ac868||typeof _0x1ac868[_0x56c832(0x265)]!==_0x56c832(0x1c8))continue;const _0x132ad0=normalizeToJid?normalizeToJid(_0x1ac868[_0x56c832(0x265)]):_0x1ac868['jid'];if(_0x132ad0&&_0x24bafa[_0x56c832(0x25f)](_0x132ad0))return _0x132ad0;if(_0x24bafa['has'](_0x1ac868[_0x56c832(0x265)]))return _0x1ac868[_0x56c832(0x265)];const _0xa3fea9=String(_0x1ac868[_0x56c832(0x265)])['split']('@')[-0x158b+0x1499+0x2*0x79][_0x56c832(0x19f)](':')[0x11d8+-0x1113+-0xc5];if(_0xa3fea9)for(const _0x3b7d0d of _0x3e6520){const _0x576eab=String(_0x3b7d0d)[_0x56c832(0x19f)]('@')[0x10f*0x11+-0x134b+0x53*0x4];if(_0x576eab&&_0x576eab===_0xa3fea9)return _0x3b7d0d;}}return null;}catch(_0x2403be){return warn(_0x56c832(0x193)+_0x56c832(0x244)+_0x56c832(0x21c)+'dings\x20erro'+_0x56c832(0x1d7)+(_0x2403be?.[_0x56c832(0x255)]||_0x2403be)),null;}}async function handleVoluntaryLeave(_0xd38c87){const _0xb7853=_0x35207a;try{if(!_0xd38c87||typeof _0xd38c87!==_0xb7853(0x1c9))return;const _0x3fb5a1=_0xd38c87[_0xb7853(0x230)]===_0xb7853(0x23a),_0xfaa60f=String(_0xd38c87[_0xb7853(0x1e7)]||'')[_0xb7853(0x1d1)+'e']()[_0xb7853(0x26d)](_0xb7853(0x1ba));if(!_0x3fb5a1&&!_0xfaa60f)return;const _0x1fc465=_0xd38c87['participan'+'t_pn']||_0xd38c87[_0xb7853(0x1cf)+'t'],_0x48a545=_0xd38c87[_0xb7853(0x1f6)]||_0xd38c87[_0xb7853(0x242)];if(!_0x1fc465||!_0x48a545)return;const _0x178422=eventUniqueId(_0xd38c87);if(!_0x178422)return;if(processedIds[_0xb7853(0x25f)](_0x178422))return;processedIds[_0xb7853(0x24a)](_0x178422),trimProcessedSet();const _0x36831a=getBotJid?getBotJid():null;if(_0x36831a&&String(_0x1fc465)===String(_0x36831a))return;const _0x378efd=await getLeaveFromDb(_0x48a545);if(!_0x378efd||!_0x378efd[_0xb7853(0x224)]||!_0x378efd['message'])return;let _0x5543ce=_0xb7853(0x26c);try{if(botRef&&botRef[_0xb7853(0x1c5)]&&typeof botRef['sock'][_0xb7853(0x269)+_0xb7853(0x1b2)]===_0xb7853(0x250)){const _0x421840=await botRef['sock'][_0xb7853(0x269)+'ata'](_0x48a545)[_0xb7853(0x260)](()=>null);if(_0x421840&&_0x421840[_0xb7853(0x1be)])_0x5543ce=_0x421840[_0xb7853(0x1be)];}}catch(_0x5333b5){}const _0x4b515c=String(_0x378efd[_0xb7853(0x255)]||'')['replace'](/\{group\}/g,_0x5543ce)[_0xb7853(0x1b6)](/\{user\}/g,shortLocalFromJid(_0x1fc465));await sendText(_0x1fc465,_0x4b515c,[_0x1fc465]),info(_0xb7853(0x1f8)+_0xb7853(0x20e)+_0x1fc465+(_0xb7853(0x194)+_0xb7853(0x1fa))+_0x48a545);}catch(_0x46c61c){error(_0x46c61c,_0xb7853(0x199)+_0xb7853(0x216)+_0xb7853(0x1a7)+_0xb7853(0x1cb)+(_0x46c61c?.[_0xb7853(0x255)]||_0x46c61c));}}async function processQueue(){const _0x4b9a1e=_0x35207a;if(isProcessingQueue||eventQueue[_0x4b9a1e(0x25b)]===0x15d*0x7+-0x1a54+0x10c9)return;isProcessingQueue=!![];try{while(eventQueue[_0x4b9a1e(0x25b)]>-0x3*-0xbf3+0x1ece+-0x42a7){const _0x4ebfbb=eventQueue[_0x4b9a1e(0x1a0)]();try{await handleVoluntaryLeave(_0x4ebfbb);}catch(_0x501a90){warn(_0x4b9a1e(0x1c2)+_0x4b9a1e(0x241)+_0x4b9a1e(0x228)+_0x4b9a1e(0x1f9)+(_0x501a90?.[_0x4b9a1e(0x255)]||_0x501a90));}if(eventQueue['length']>-0xff8+-0x3*-0xbe1+-0x13ab)await new Promise(_0x223e5d=>setTimeout(_0x223e5d,PROCESS_INTERVAL_MS));}}finally{isProcessingQueue=![];}}async function startLogWatcher(){const _0x41f9ff=_0x35207a;try{await _0x3f1b3c['writeFile'](LOG_FILE_PATH,'',{'flag':'a'})[_0x41f9ff(0x260)](()=>{});try{if(tail&&typeof tail[_0x41f9ff(0x210)]===_0x41f9ff(0x250))tail[_0x41f9ff(0x210)]();}catch(_0x4c8848){}tail=new Tail(LOG_FILE_PATH,{'fromBeginning':![],'follow':!![]}),tail['on'](_0x41f9ff(0x254),_0x4f0308=>{const _0x32b489=_0x41f9ff;try{if(!_0x4f0308||!_0x4f0308[_0x32b489(0x1b3)]())return;const _0x4a43de=JSON[_0x32b489(0x1ae)](_0x4f0308);eventQueue[_0x32b489(0x1af)](_0x4a43de);if(!isProcessingQueue)processQueue();}catch(_0x3dbf5f){warn(_0x32b489(0x218)+'uld\x20not\x20pa'+_0x32b489(0x206)+_0x32b489(0x227)+_0x32b489(0x214)+String(_0x4f0308)[_0x32b489(0x18f)](0x1dc3+-0x2*-0x48a+-0x26d7,0x25f+0x1505+-0x169c));}}),tail['on'](_0x41f9ff(0x238),_0x5838f6=>error(_0x5838f6,_0x41f9ff(0x225)+'il\x20error')),info('[leave]\x20st'+_0x41f9ff(0x1a6)+_0x41f9ff(0x1bc)+LOG_FILE_PATH);}catch(_0x15ba35){error(_0x15ba35,_0x41f9ff(0x23d)+_0x41f9ff(0x1ef)+_0x41f9ff(0x1a3));}}function stopLogWatcher(){const _0x9ed18c=_0x35207a;try{if(tail&&typeof tail['unwatch']===_0x9ed18c(0x250))tail[_0x9ed18c(0x210)]();tail=null,info('[leave]\x20st'+'opped\x20tail'+_0x9ed18c(0x248));}catch(_0x780d46){warn('[leave]\x20st'+_0x9ed18c(0x1d5)+_0x9ed18c(0x21d)+(_0x780d46?.[_0x9ed18c(0x255)]||_0x780d46));}}function findLvcSubcommand(_0x38c9f0){const _0x259ed3=_0x35207a,_0x2d66a6=String(_0x38c9f0||''),_0xc767a7=_0x2d66a6[_0x259ed3(0x220)](/\blvc\s+([^\s\r\n]+)/i);if(!_0xc767a7)return{'sub':null,'after':''};const _0x15c1f3=_0xc767a7[0x7*-0x1f7+0x1ae2+-0x70*0x1e][_0x259ed3(0x1d1)+'e'](),_0x374d12=_0x2d66a6['slice'](_0xc767a7['index']+_0xc767a7[-0x1ec2+-0x1166+-0xb8*-0x43]['length'])['replace'](/^[\s:\-]*/,'');return{'sub':_0x15c1f3,'after':_0x374d12};}export async function onMessage(_0x4e0bb7){const _0x407d2e=_0x35207a;try{if(!_0x4e0bb7||!_0x4e0bb7[_0x407d2e(0x207)])return;const _0x194d53=_0x4e0bb7[_0x407d2e(0x234)]?.['remoteJid']||_0x4e0bb7[_0x407d2e(0x25e)]||'',_0x28a62e=typeof _0x194d53===_0x407d2e(0x1c8)&&_0x194d53[_0x407d2e(0x1f5)](_0x407d2e(0x268)),_0x3c9e48=_0x4e0bb7['key']?.['participan'+'t']||_0x4e0bb7[_0x407d2e(0x234)]?.[_0x407d2e(0x18d)]||_0x4e0bb7[_0x407d2e(0x196)]||'',_0x5c121e=(_0x4e0bb7[_0x407d2e(0x1f1)]||'')[_0x407d2e(0x1b6)](/\r/g,'');if(!(/\blvc\b/i[_0x407d2e(0x1a1)](_0x5c121e)||/\bdellvc\b/i['test'](_0x5c121e)))return;if(/\bdellvc\b/i['test'](_0x5c121e)){if(!_0x28a62e){const _0x25402f=Boolean(_0x4e0bb7['key']?.['fromMe']);let _0x4cb709=null;if(_0x25402f)_0x4cb709=getBotJid();else{let _0x3bb2e7=![];try{_0x3bb2e7=await isSudo(botRef,_0x4e0bb7);}catch(_0x2f7e58){_0x3bb2e7=![];}if(!_0x3bb2e7)return;const _0x1d3fce=userJidFromCtx(_0x4e0bb7)||{'findings':[]},_0x52dbe6=await findStoredMatchFromFindings(_0x1d3fce[_0x407d2e(0x22b)]||[]);if(!_0x52dbe6)return;_0x4cb709=_0x52dbe6;}const _0x2b0fc4=_0x5c121e['match'](/\bgp[:\s]+(\S+)/i);if(!_0x2b0fc4){await sendText(_0x4cb709,'PM:\x20includ'+_0x407d2e(0x22c)+_0x407d2e(0x1e9));return;}const _0x5c2c81=_0x2b0fc4[-0x6ce*-0x3+-0x787+-0xce2][_0x407d2e(0x1b3)]();let _0x640734=[];if(_0x5c2c81[_0x407d2e(0x1d1)+'e']()==='all')_0x640734=await _0x2992a9['getUniqueJ'+'ids']();else{const _0x48cb93=await _0x2992a9[_0x407d2e(0x211)+'e'](_0x5c2c81);if(_0x48cb93)_0x640734=[_0x48cb93];else{if(_0x5c2c81[_0x407d2e(0x26d)]('@'))_0x640734=[_0x2992a9[_0x407d2e(0x22d)+_0x407d2e(0x231)](_0x5c2c81)];else{await sendText(_0x4cb709,_0x407d2e(0x18b)+'\x20alias:\x20'+_0x5c2c81);return;}}}let _0x154cca=-0x19ab*0x1+-0x1*0x73c+-0x1*-0x20e7;for(const _0x536498 of _0x640734)_0x154cca+=await deleteLeaveFromDb(_0x536498)||0x5d*-0x6b+-0x2067+0x4746;await sendText(_0x4cb709,_0x407d2e(0x1a8)+_0x154cca+'/'+_0x640734[_0x407d2e(0x25b)]+(_0x407d2e(0x1dc)+_0x407d2e(0x222)));return;}const _0x9c5be9=await isadmin(botRef,_0x4e0bb7)[_0x407d2e(0x260)](()=>![]);if(!_0x9c5be9)return;const _0x14e63b=String((_0x3c9e48||'')['split']('@')[0x345*-0x4+0x2477+-0x1*0x1763]||''),_0x51cbc6=await getDefault(_0x14e63b)[_0x407d2e(0x260)](()=>null);if(!_0x51cbc6){await sendText(_0x194d53,'No\x20default'+_0x407d2e(0x1e4)+'n');return;}const _0x555b2d=Array[_0x407d2e(0x1a9)](_0x51cbc6)?_0x51cbc6:[_0x51cbc6],_0xdb96af=[];for(const _0x23a705 of _0x555b2d){const _0x317eab=await getConnection(_0x23a705)[_0x407d2e(0x260)](()=>null);if(Array[_0x407d2e(0x1a9)](_0x317eab))_0xdb96af[_0x407d2e(0x1af)](..._0x317eab);else{if(_0x317eab)_0xdb96af[_0x407d2e(0x1af)](_0x317eab);}}let _0x44da7b=0x18ac+0x8*0x239+0x34*-0xd1;for(const _0x1f4e91 of _0xdb96af)_0x44da7b+=await deleteLeaveFromDb(_0x1f4e91)||0x70e+0x19ec+-0x57f*0x6;await sendText(_0x194d53,_0x407d2e(0x1a8)+_0x44da7b+'/'+_0xdb96af['length']+(_0x407d2e(0x1dc)+_0x407d2e(0x222)));return;}const {sub:_0xc0bbc,after:_0x40a30f}=findLvcSubcommand(_0x5c121e);if(!_0xc0bbc)return;if(!_0x28a62e){const _0x3b88b5=Boolean(_0x4e0bb7[_0x407d2e(0x234)]?.['fromMe']);let _0x1c9fdc=null;if(_0x3b88b5)_0x1c9fdc=getBotJid();else{let _0x4ceb12=![];try{_0x4ceb12=await isSudo(botRef,_0x4e0bb7);}catch(_0x420a5a){_0x4ceb12=![];}if(!_0x4ceb12)return;const _0x1c0d28=userJidFromCtx(_0x4e0bb7)||{'findings':[]},_0x2aa7e3=await findStoredMatchFromFindings(_0x1c0d28['findings']||[]);if(!_0x2aa7e3)return;_0x1c9fdc=_0x2aa7e3;}if(!_0x1c9fdc)return;if(_0xc0bbc==='on'||_0xc0bbc==='off'){const _0x55da3d=_0x5c121e[_0x407d2e(0x220)](/\bgp[:\s]+(\S+)/i);if(!_0x55da3d){await sendText(_0x1c9fdc,_0x407d2e(0x1b4)+_0x407d2e(0x22c)+'s|jid|all>');return;}const _0x31247c=_0x55da3d[0x14b*0x6+-0x1*-0xca7+-0x28d*0x8][_0x407d2e(0x1b3)]();let _0x426211=[];if(_0x31247c['toLowerCas'+'e']()===_0x407d2e(0x1b5))_0x426211=await _0x2992a9[_0x407d2e(0x208)+_0x407d2e(0x266)]();else{const _0x57bb42=await _0x2992a9[_0x407d2e(0x211)+'e'](_0x31247c);if(_0x57bb42)_0x426211=[_0x57bb42];else{if(_0x31247c[_0x407d2e(0x26d)]('@'))_0x426211=[_0x2992a9[_0x407d2e(0x22d)+_0x407d2e(0x231)](_0x31247c)];else{await sendText(_0x1c9fdc,_0x407d2e(0x18b)+_0x407d2e(0x1ce)+_0x31247c);return;}}}const _0x5f34a5=_0xc0bbc==='on';let _0x5c5bbb=0x1d97+0x1e14+-0x3bab;for(const _0xc420a3 of _0x426211){const _0x17338b=await getLeaveFromDb(_0xc420a3);if(!_0x17338b)continue;if(await setLeaveEnabled(_0xc420a3,_0x5f34a5))_0x5c5bbb++;}await sendText(_0x1c9fdc,_0x407d2e(0x1bd)+(_0x5f34a5?_0x407d2e(0x224):_0x407d2e(0x236))+_0x407d2e(0x25c)+_0x5c5bbb+'/'+_0x426211[_0x407d2e(0x25b)]);return;}if(_0xc0bbc===_0x407d2e(0x24a)){const _0x421de1=_0x5c121e[_0x407d2e(0x220)](/\bgp[:\s]+(\S+)/i);if(!_0x421de1){await sendText(_0x1c9fdc,_0x407d2e(0x1b4)+_0x407d2e(0x22c)+_0x407d2e(0x1e9));return;}const _0x518f74=_0x421de1[-0x3*-0xbb7+-0x1*0xc6d+0x16b7*-0x1]['trim']();let _0x28b1ba=[];if(_0x518f74[_0x407d2e(0x1d1)+'e']()===_0x407d2e(0x1b5))_0x28b1ba=await _0x2992a9[_0x407d2e(0x208)+'ids']();else{const _0x499109=await _0x2992a9[_0x407d2e(0x211)+'e'](_0x518f74);if(_0x499109)_0x28b1ba=[_0x499109];else{if(_0x518f74[_0x407d2e(0x26d)]('@'))_0x28b1ba=[_0x2992a9[_0x407d2e(0x22d)+_0x407d2e(0x231)](_0x518f74)];else{await sendText(_0x1c9fdc,'Unknown\x20gp'+_0x407d2e(0x1ce)+_0x518f74);return;}}}let _0x16f06b=_0x40a30f[_0x407d2e(0x1b3)]();_0x16f06b=_0x16f06b[_0x407d2e(0x19f)](/\r?\n/)['filter'](_0x22a1ef=>!/^gp[:\s]/i[_0x407d2e(0x1a1)](_0x22a1ef))[_0x407d2e(0x21a)]('\x0a')['trim']();if(!_0x16f06b){await sendText(_0x1c9fdc,_0x407d2e(0x18a)+'message\x20bo'+'dy');return;}let _0x5598a6=0x13e5+-0x1*-0x247+-0x162c;for(const _0x50267b of _0x28b1ba)if(await saveLeaveToDb(_0x50267b,_0x16f06b,0x8bf*0x1+0x3b3*-0x1+-0x50b))_0x5598a6++;await sendText(_0x1c9fdc,_0x407d2e(0x26b)+_0x5598a6+'/'+_0x28b1ba[_0x407d2e(0x25b)]);return;}return;}if(_0x28a62e){const _0x404431=await isadmin(botRef,_0x4e0bb7)['catch'](()=>![]);if(!_0x404431)return;const _0x39c144=String((_0x3c9e48||'')[_0x407d2e(0x19f)]('@')[-0x35*-0x5f+0x16bd*-0x1+-0x189*-0x2]||''),_0x45f951=await getDefault(_0x39c144)[_0x407d2e(0x260)](()=>null);if(!_0x45f951){await sendText(_0x194d53,'No\x20default'+_0x407d2e(0x1e4)+'n');return;}const _0x35b1c1=Array[_0x407d2e(0x1a9)](_0x45f951)?_0x45f951:[_0x45f951],_0x5d8336=[];for(const _0x5efbf1 of _0x35b1c1){const _0x3f5443=await getConnection(_0x5efbf1)[_0x407d2e(0x260)](()=>null);if(Array[_0x407d2e(0x1a9)](_0x3f5443))_0x5d8336[_0x407d2e(0x1af)](..._0x3f5443);else{if(_0x3f5443)_0x5d8336[_0x407d2e(0x1af)](_0x3f5443);}}if(!_0x5d8336[_0x407d2e(0x25b)]){await sendText(_0x194d53,_0x407d2e(0x23c)+_0x407d2e(0x223)+_0x407d2e(0x247)+_0x407d2e(0x1f3));return;}if(_0xc0bbc==='on'||_0xc0bbc===_0x407d2e(0x239)){const _0x6e41e6=_0xc0bbc==='on';let _0x5967e4=0xba0+-0x475+-0x72b*0x1;for(const _0x54c0d1 of _0x5d8336){const _0x35dda0=await getLeaveFromDb(_0x54c0d1);if(!_0x35dda0)continue;if(await setLeaveEnabled(_0x54c0d1,_0x6e41e6))_0x5967e4++;}await sendText(_0x194d53,'✅\x20Leave\x20'+(_0x6e41e6?_0x407d2e(0x224):_0x407d2e(0x236))+'\x20for\x20'+_0x5967e4+'/'+_0x5d8336[_0x407d2e(0x25b)]);return;}if(_0xc0bbc===_0x407d2e(0x24a)){const _0x417b75=_0x40a30f['trim']();if(!_0x417b75){await sendText(_0x194d53,'Empty\x20mess'+_0x407d2e(0x1e6));return;}let _0x251ea6=-0x2*0x729+-0x1*0x2222+0x3074;for(const _0x344787 of _0x5d8336)if(await saveLeaveToDb(_0x344787,_0x417b75,-0x1db5+0x1f19+0x1*-0x163))_0x251ea6++;await sendText(_0x194d53,_0x407d2e(0x26b)+_0x251ea6+'/'+_0x5d8336[_0x407d2e(0x25b)]);return;}}}catch(_0x442b91){error(_0x442b91,_0x407d2e(0x237)+_0x407d2e(0x201)+_0x407d2e(0x22f)+(_0x442b91?.[_0x407d2e(0x255)]||_0x442b91));}}let _managedRegistered=![];export async function initialize(_0x3ab6e0){const _0x22b9ec=_0x35207a;if(!_0x3ab6e0)throw new Error('[leave]\x20in'+'itialize\x20r'+_0x22b9ec(0x1d3)+_0x22b9ec(0x202));botRef=_0x3ab6e0,setupSendApi(),await ensureSchema();try{await startLogWatcher();}catch(_0x246eab){warn(_0x22b9ec(0x23d)+'artLogWatc'+_0x22b9ec(0x1a3)+'\x20during\x20in'+_0x22b9ec(0x1ca)+(_0x246eab?.['message']||_0x246eab));}try{typeof startManagedListener==='function'&&(startManagedListener({'botRef':_0x3ab6e0,'eventName':_0x22b9ec(0x1db),'handler':async()=>{const _0x40913c=_0x22b9ec;try{if(!tail)await startLogWatcher();}catch(_0x565287){warn(_0x40913c(0x24f)+_0x40913c(0x23b)+_0x40913c(0x1c3)+_0x40913c(0x1cd)+(_0x565287?.['message']||_0x565287));}},'moduleName':name}),_managedRegistered=!![],info(_0x22b9ec(0x1e3)+_0x22b9ec(0x251)+_0x22b9ec(0x21e)+_0x22b9ec(0x249)));}catch(_0x46a32d){warn('[leave]\x20fa'+_0x22b9ec(0x235)+_0x22b9ec(0x1d6)+_0x22b9ec(0x18c)+_0x22b9ec(0x1d8)+(_0x46a32d?.[_0x22b9ec(0x255)]||_0x46a32d)),_managedRegistered=![];}info(_0x22b9ec(0x1d4)+_0x22b9ec(0x213)+_0x22b9ec(0x20b)+_0x22b9ec(0x256)+'og.');}export async function cleanup(){const _0x53c3c2=_0x35207a;try{try{if(_managedRegistered&&typeof stopManagedListener===_0x53c3c2(0x250)){try{stopManagedListener(name,'leave.log');}catch(_0x6f4fc8){try{stopManagedListener(name);}catch(_0x41de74){warn('[leave]\x20st'+'opManagedL'+'istener\x20at'+_0x53c3c2(0x1b0)+'led:\x20'+(_0x41de74?.[_0x53c3c2(0x255)]||_0x6f4fc8));}}info(_0x53c3c2(0x23d)+_0x53c3c2(0x21f)+_0x53c3c2(0x209)+_0x53c3c2(0x203));}}catch(_0x10ab6a){warn('[leave]\x20cl'+_0x53c3c2(0x262)+_0x53c3c2(0x19e)+'stopManage'+_0x53c3c2(0x205)+'\x20'+(_0x10ab6a?.[_0x53c3c2(0x255)]||_0x10ab6a));}try{stopLogWatcher();}catch(_0x85a0ae){warn(_0x53c3c2(0x23d)+'opLogWatch'+'er\x20fallbac'+_0x53c3c2(0x1c7)+(_0x85a0ae?.[_0x53c3c2(0x255)]||_0x85a0ae));}}catch(_0x11775f){error(_0x11775f,_0x53c3c2(0x259)+_0x53c3c2(0x262)+_0x53c3c2(0x1d7)+(_0x11775f?.['message']||_0x11775f));}finally{eventQueue[_0x53c3c2(0x25b)]=0x58a+0xf*0x74+-0xc56,isProcessingQueue=![],processedIds[_0x53c3c2(0x200)](),botRef=null,sendApi=null,info('[leave]\x20cl'+_0x53c3c2(0x1fb));}}function _0x11a7(_0x4acac6,_0x3b5730){const _0x5bc0e9=_0x26ec();return _0x11a7=function(_0x1de316,_0x2e18ad){_0x1de316=_0x1de316-(0x1c48+-0x16a0+-0x41e);let _0x18eaf2=_0x5bc0e9[_0x1de316];return _0x18eaf2;},_0x11a7(_0x4acac6,_0x3b5730);}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};