const _0x4dccf5=_0xc438;(function(_0x313807,_0x17127c){const _0x58967c=_0xc438,_0x18bcd4=_0x313807();while(!![]){try{const _0x33374b=-parseInt(_0x58967c(0x1f0))/(0x146b+-0x14a5+0x3b)+parseInt(_0x58967c(0x19c))/(0x20d1+0x2477*0x1+-0x4546)+parseInt(_0x58967c(0x241))/(-0x859*-0x1+0x99+-0x8ef*0x1)+parseInt(_0x58967c(0x189))/(0x9d7*-0x2+0x16*0x133+-0x1ac*0x4)+parseInt(_0x58967c(0x19e))/(-0xf74+0x137f+-0xa*0x67)*(parseInt(_0x58967c(0x203))/(-0x1dd0+0x1*0x1246+-0x2e4*-0x4))+-parseInt(_0x58967c(0x213))/(-0x7*0x24b+0xd*0x1b7+-0x637)*(-parseInt(_0x58967c(0x1b1))/(0x2*0xffe+0x43*-0x70+-0xa9*0x4))+-parseInt(_0x58967c(0x1ff))/(-0x25db*-0x1+0xeeb+-0x24b*0x17);if(_0x33374b===_0x17127c)break;else _0x18bcd4['push'](_0x18bcd4['shift']());}catch(_0xf47da){_0x18bcd4['push'](_0x18bcd4['shift']());}}}(_0x5e4b,-0x4*0x17693+-0xd8caa+0x1bbd95));import _0x3215c1 from'path';import _0x1eb63c from'fs/promises';import{Tail}from'tail';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{getBotJid}from'../utils/bot-state.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import*as _0x40441d from'../utils/groups.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name=_0x4dccf5(0x237);export const version=_0x4dccf5(0x181);export const priority=-0x259a+0x14ed+0x75*0x25;export const commands=['lvc','dellvc'];const LOG_FILE_PATH=_0x3215c1[_0x4dccf5(0x19a)](process['cwd'](),_0x4dccf5(0x24c),_0x4dccf5(0x1af),_0x4dccf5(0x22b)+_0x4dccf5(0x1ab));let botRef=null,sendApi=null,tail=null;const eventQueue=[];let isProcessingQueue=![];const PROCESS_INTERVAL_MS=0x118+-0x25d2+0x26ae,processedIds=new Set();function shortLocalFromJid(_0x5d6748){const _0x25fd7c=_0x4dccf5;try{return String(_0x5d6748||'')[_0x25fd7c(0x236)]('@')[-0x21d8+0x400*0x8+-0x8*-0x3b];}catch{return _0x5d6748;}}function _0x5e4b(){const _0x19ead8=['getUniqueJ','ed_at\x20=\x20ex','match','gister\x20wit','NULL,\x0a\x20\x20\x20\x20','\x20TEXT\x20NOT\x20','groupMetad','ith\x20listen','\x20schema\x20en','includes','t\x20=\x20?\x20WHER','clear','ne\x20(skippi','isArray','subject','floor','ated_at;','Unknown\x20gp','available','[leave]\x20in','slice','leave_join','tLeaveFrom','d\x20=\x20?','t\x20instance','unwatch','timestamp','NFLICT(gro','\x20group\x20ent','now','og.','string','split','leave','message\x20bo','[leave]\x20se','remove','stopManage','\x20during\x20in','object','remoteJid','index','T\x20PRIMARY\x20','1184505TYmOch','\x0a\x20\x20\x20\x20CREAT','rse\x20log\x20li','text','\x20\x20\x20\x20\x20ON\x20CO','nt\x20DM\x20to\x20','Could\x20not\x20','\x20alias:\x20','[leave]\x20sa','test','\x20for\x20leavi','data','writeFile','tLeaveEnab','ror:\x20','fault\x20conn','normalizeT','her\x20failed','\x20connectio','4.2.6','up_jid\x20TEX','t_pn','h\x20listener','map','ing','rror:\x20','@g.us','3157284NLwhHB','romDb\x20fail','[leave]\x20DB','No\x20default','sured','ids','UPDATE\x20lea','off','resolve\x20de','ng):\x20','ed\x20for\x20','SELECT\x20mes','ed\x20to\x20','from','get','add','Message\x20er','join','[leave]\x20ge','282134rbqoEu','itialize:\x20','135sNGAib','M\x20leaves\x20W','\x20for\x20','iled\x20to\x20re','all','cluded.upd','findings','eaves\x20WHER','equires\x20bo','the\x20group','pdated_at)','[leave]\x20de','sock','.log','\x20\x20\x20\x20\x20\x20\x20\x20en','isCommand','PM:\x20empty\x20','tmp','\x20NOT\x20EXIST','80ORPRKT','filter','[leave]\x20cl','lled','E\x20group_ji','\x0a\x20\x20\x20\x20\x20\x20\x20VA','function','[leave]\x20Ta','✅\x20Leave\x20','led\x20failed','TEGER\x20DEFA','and\x20watchi','changes','tchFromFin','ndApi\x20not\x20','sender','ndler\x20fail','istener\x20at','\x0a\x20\x20\x20\x20\x20\x20gro','led:\x20','catch','endsWith','participan','leave.log','group',',\x20?,\x20?)\x0a\x20\x20','[leave]\x20pe','trim','sage,\x20enab','\x0a\x20\x20\x20\x20\x20\x20upd','replace','itialize\x20r','toLowerCas','[leave]\x20re','or\x20','resolveNam','\x20excluded.','oUserJid','line','ng\x20leave\x20l','message','nopart','type','artLogWatc','exec','\x20message\x20\x20','[leave]\x20st','[leave]\x20fi','action','opManagedL','for\x20','enabled,\x20u','up_jid)\x20DO','error','\x20\x20INTEGER\x20','ections','ler\x20start\x20','HERE\x20group','push','sendMessag','fromMe','key','✅\x20Saved\x20','74505AXFnKF','r\x20calling\x20','S\x20leaves\x20(','has','disabled','ing\x20','DEFAULT\x200,','abled\x20=\x20?,','E\x20TABLE\x20IF','opLogWatch','istener\x20ca','e\x20gp:<alia','jid','KEY,\x0a\x20\x20\x20\x20\x20','ves\x20SET\x20en','19269918OXlLuL',');\x0a\x20\x20','ated_at\x20IN','age\x20body','152946tBMZmF','dings\x20erro','length','r:\x20','Manager:\x20','shift','size','s|jid|all>','eanup\x20erro','\x20\x20\x20\x20\x20updat','✅\x20Deleted\x20','[leave]\x20on','DELETE\x20FRO','ndApi\x20fail','PM:\x20includ','k\x20failed:\x20','524013RWYXVo','er\x20fallbac','enabled'];_0x5e4b=function(){return _0x19ead8;};return _0x5e4b();}function eventUniqueId(_0x14646d){const _0x1acce2=_0x4dccf5;if(!_0x14646d)return null;if(_0x14646d['id'])return String(_0x14646d['id']);return String(_0x14646d['groupId']||_0x14646d[_0x1acce2(0x1c9)]||'nogroup')+':'+String(_0x14646d[_0x1acce2(0x1c7)+_0x1acce2(0x183)]||_0x14646d[_0x1acce2(0x1c7)+'t']||_0x1acce2(0x1da))+':'+String(_0x14646d[_0x1acce2(0x230)]||_0x14646d['ts']||Date[_0x1acce2(0x233)]());}function trimProcessedSet(){const _0x51d6e8=_0x4dccf5;if(processedIds[_0x51d6e8(0x209)]>0x40a*0x1+0x4*0x4bb+-0x36e){const _0x5ba4cb=Array[_0x51d6e8(0x196)](processedIds);processedIds[_0x51d6e8(0x221)]();for(const _0x239f99 of _0x5ba4cb[_0x51d6e8(0x22a)](-(0x157d+0x1831+0x15*-0x19e)))processedIds['add'](_0x239f99);}}async function ensureSchema(){const _0x22ef6f=_0x4dccf5;await db[_0x22ef6f(0x1dd)](_0x22ef6f(0x242)+_0x22ef6f(0x1f8)+_0x22ef6f(0x1b0)+_0x22ef6f(0x1f2)+_0x22ef6f(0x1c3)+_0x22ef6f(0x182)+_0x22ef6f(0x240)+_0x22ef6f(0x1fd)+_0x22ef6f(0x1de)+_0x22ef6f(0x21b)+_0x22ef6f(0x21a)+'\x20\x20enabled\x20'+_0x22ef6f(0x1e7)+_0x22ef6f(0x1f6)+_0x22ef6f(0x1ce)+_0x22ef6f(0x201)+_0x22ef6f(0x1bb)+'ULT\x200\x0a\x20\x20\x20\x20'+_0x22ef6f(0x200)),info(_0x22ef6f(0x18b)+_0x22ef6f(0x21e)+_0x22ef6f(0x18d));}async function saveLeaveToDb(_0x43afb4,_0x5c324b,_0x593eb9=0x12ab+0xf41+0xd*-0x29c){const _0x4c9de8=_0x4dccf5;try{const _0x543410=Math[_0x4c9de8(0x225)](Date[_0x4c9de8(0x233)]()/(-0x219+0x2154+0x577*-0x5));return await db['run']('INSERT\x20INT'+'O\x20leaves\x20('+'group_jid,'+'\x20message,\x20'+_0x4c9de8(0x1e4)+_0x4c9de8(0x1a8)+_0x4c9de8(0x1b6)+'LUES\x20(?,\x20?'+_0x4c9de8(0x1ca)+_0x4c9de8(0x245)+_0x4c9de8(0x231)+_0x4c9de8(0x1e5)+'\x20UPDATE\x20SE'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20message\x20='+_0x4c9de8(0x1d5)+'message,\x0a\x20'+_0x4c9de8(0x1ac)+'abled\x20=\x20ex'+'cluded.ena'+'bled,\x0a\x20\x20\x20\x20'+_0x4c9de8(0x20c)+_0x4c9de8(0x217)+_0x4c9de8(0x1a3)+_0x4c9de8(0x226),[_0x43afb4,String(_0x5c324b||''),Number(_0x593eb9?-0xab+0x6d7*0x5+-0x2187:0x23*0x4a+-0x41b*0x5+0x215*0x5),_0x543410]),!![];}catch(_0x2e4ec6){return warn(_0x4c9de8(0x249)+'veLeaveToD'+'b\x20failed\x20f'+_0x4c9de8(0x1d3)+_0x43afb4+':\x20'+(_0x2e4ec6?.[_0x4c9de8(0x1d9)]||_0x2e4ec6)),![];}}function _0xc438(_0x27efb9,_0x3c9c83){const _0x5ae0bb=_0x5e4b();return _0xc438=function(_0x1cb561,_0x493a91){_0x1cb561=_0x1cb561-(-0x131*-0x9+-0x12*-0x1e7+-0x2b7a);let _0x203a88=_0x5ae0bb[_0x1cb561];return _0x203a88;},_0xc438(_0x27efb9,_0x3c9c83);}async function deleteLeaveFromDb(_0x45cd8c){const _0x4c1780=_0x4dccf5;try{const _0x4642d5=await db['run'](_0x4c1780(0x20f)+_0x4c1780(0x19f)+_0x4c1780(0x1ea)+'_jid\x20=\x20?',[_0x45cd8c]);return _0x4642d5?.[_0x4c1780(0x1bd)]||0x1*-0x2c5+0x10*0x1b+0x115;}catch(_0x23dbe7){return warn(_0x4c1780(0x1a9)+'leteLeaveF'+_0x4c1780(0x18a)+_0x4c1780(0x193)+_0x45cd8c+':\x20'+(_0x23dbe7?.[_0x4c1780(0x1d9)]||_0x23dbe7)),-0x7f9+-0x18ce+0x20c7;}}async function getLeaveFromDb(_0x1480ab){const _0x175a15=_0x4dccf5;try{const _0xfe6b15=await db[_0x175a15(0x197)](_0x175a15(0x194)+_0x175a15(0x1cd)+'led\x20FROM\x20l'+_0x175a15(0x1a5)+_0x175a15(0x1b5)+_0x175a15(0x22d),[_0x1480ab]);if(!_0xfe6b15)return null;return{'message':_0xfe6b15[_0x175a15(0x1d9)],'enabled':Number(_0xfe6b15[_0x175a15(0x215)]||0xaaf+-0x2674+-0x1*-0x1bc5)===-0x549*-0x5+0x213f+-0x3bab};}catch(_0x3982f0){return warn(_0x175a15(0x19b)+_0x175a15(0x22c)+'Db\x20failed\x20'+_0x175a15(0x1e3)+_0x1480ab+':\x20'+(_0x3982f0?.[_0x175a15(0x1d9)]||_0x3982f0)),null;}}async function setLeaveEnabled(_0x191df3,_0x514a91){const _0x3089da=_0x4dccf5;try{const _0x1c5052=Math['floor'](Date[_0x3089da(0x233)]()/(-0xa7c+-0x25b2+-0x71*-0x76)),_0x427ba9=await db['run'](_0x3089da(0x18f)+_0x3089da(0x1fe)+_0x3089da(0x1f7)+'\x20updated_a'+_0x3089da(0x220)+_0x3089da(0x1b5)+'d\x20=\x20?',[Number(_0x514a91?-0x8*-0x86+-0x149a+0x9*0x1d3:-0x127f+-0xabd*-0x2+-0x2fb),_0x1c5052,_0x191df3]);return!!_0x427ba9?.[_0x3089da(0x1bd)];}catch(_0x5bf5ff){return warn(_0x3089da(0x239)+_0x3089da(0x24e)+_0x3089da(0x1ba)+_0x3089da(0x1a0)+_0x191df3+':\x20'+(_0x5bf5ff?.[_0x3089da(0x1d9)]||_0x5bf5ff)),![];}}function setupSendApi(){const _0x2b1d10=_0x4dccf5;if(!botRef)return;if(typeof botRef['sendMessag'+'e']===_0x2b1d10(0x1b7))sendApi=async(_0xef2ae7,_0x2ee832)=>await botRef[_0x2b1d10(0x1ec)+'e'](_0xef2ae7,_0x2ee832);else{if(botRef[_0x2b1d10(0x1aa)]&&typeof botRef[_0x2b1d10(0x1aa)]['sendMessag'+'e']===_0x2b1d10(0x1b7))sendApi=async(_0x11379e,_0x4da4d6)=>await botRef[_0x2b1d10(0x1aa)][_0x2b1d10(0x1ec)+'e'](_0x11379e,_0x4da4d6);else sendApi=null;}}async function sendText(_0x52bb5e,_0x4eb8de,_0x3094ad=[]){const _0x25c119=_0x4dccf5;try{if(!_0x52bb5e)return null;if(!sendApi)return warn(_0x25c119(0x239)+_0x25c119(0x1bf)+_0x25c119(0x228)),null;let _0x33fad6=typeof _0x4eb8de===_0x25c119(0x235)?{'text':String(_0x4eb8de)}:{..._0x4eb8de||{}};if(Array[_0x25c119(0x223)](_0x3094ad)&&_0x3094ad[_0x25c119(0x205)])_0x33fad6['mentions']=_0x3094ad;return await sendApi(_0x52bb5e,_0x33fad6);}catch(_0x5bbd9e){return warn('[leave]\x20se'+_0x25c119(0x210)+_0x25c119(0x195)+_0x52bb5e+':\x20'+(_0x5bbd9e?.['message']||_0x5bbd9e)),null;}}async function findStoredMatchFromFindings(_0x110bc8=[]){const _0x32506b=_0x4dccf5;try{const _0x3179d2=await listSudo();if(!Array[_0x32506b(0x223)](_0x3179d2)||_0x3179d2['length']===0x2387+-0x5*0x593+-0x7a8)return null;const _0x4eb347=new Set(_0x3179d2[_0x32506b(0x185)](String));for(const _0x490aef of _0x110bc8||[]){if(!_0x490aef||typeof _0x490aef[_0x32506b(0x1fc)]!==_0x32506b(0x235))continue;const _0x157e6f=normalizeToJid?normalizeToJid(_0x490aef[_0x32506b(0x1fc)]):_0x490aef[_0x32506b(0x1fc)];if(_0x157e6f&&_0x4eb347[_0x32506b(0x1f3)](_0x157e6f))return _0x157e6f;if(_0x4eb347[_0x32506b(0x1f3)](_0x490aef['jid']))return _0x490aef['jid'];const _0x3dd804=String(_0x490aef['jid'])[_0x32506b(0x236)]('@')[-0x1dba+-0x1*-0x1b29+-0x9*-0x49]['split'](':')[0x206d*-0x1+-0x4e1*0x3+-0x6*-0x7d8];if(_0x3dd804)for(const _0x417683 of _0x3179d2){const _0x5b4f03=String(_0x417683)['split']('@')[-0x182a+0x2602+0xdd8*-0x1];if(_0x5b4f03&&_0x5b4f03===_0x3dd804)return _0x417683;}}return null;}catch(_0x50badd){return warn(_0x32506b(0x1e0)+'ndStoredMa'+_0x32506b(0x1be)+_0x32506b(0x204)+_0x32506b(0x206)+(_0x50badd?.[_0x32506b(0x1d9)]||_0x50badd)),null;}}async function handleVoluntaryLeave(_0x3fbf1f){const _0x287ca4=_0x4dccf5;try{if(!_0x3fbf1f||typeof _0x3fbf1f!==_0x287ca4(0x23d))return;const _0x313d57=_0x3fbf1f[_0x287ca4(0x1e1)]===_0x287ca4(0x23a),_0x1d0219=String(_0x3fbf1f[_0x287ca4(0x1db)]||'')[_0x287ca4(0x1d1)+'e']()['includes'](_0x287ca4(0x237));if(!_0x313d57&&!_0x1d0219)return;const _0x218ab6=_0x3fbf1f[_0x287ca4(0x1c7)+'t_pn']||_0x3fbf1f['participan'+'t'],_0xc75dc9=_0x3fbf1f['groupId']||_0x3fbf1f[_0x287ca4(0x1c9)];if(!_0x218ab6||!_0xc75dc9)return;const _0x16c71d=eventUniqueId(_0x3fbf1f);if(!_0x16c71d)return;if(processedIds['has'](_0x16c71d))return;processedIds[_0x287ca4(0x198)](_0x16c71d),trimProcessedSet();const _0x2c60a2=getBotJid?getBotJid():null;if(_0x2c60a2&&String(_0x218ab6)===String(_0x2c60a2))return;const _0x16acda=await getLeaveFromDb(_0xc75dc9);if(!_0x16acda||!_0x16acda['enabled']||!_0x16acda[_0x287ca4(0x1d9)])return;let _0xc11687=_0x287ca4(0x1a7);try{if(botRef&&botRef[_0x287ca4(0x1aa)]&&typeof botRef[_0x287ca4(0x1aa)][_0x287ca4(0x21c)+'ata']==='function'){const _0x5a83d4=await botRef[_0x287ca4(0x1aa)][_0x287ca4(0x21c)+'ata'](_0xc75dc9)[_0x287ca4(0x1c5)](()=>null);if(_0x5a83d4&&_0x5a83d4[_0x287ca4(0x224)])_0xc11687=_0x5a83d4[_0x287ca4(0x224)];}}catch(_0x2188ac){}const _0x32c342=String(_0x16acda[_0x287ca4(0x1d9)]||'')['replace'](/\{group\}/g,_0xc11687)[_0x287ca4(0x1cf)](/\{user\}/g,shortLocalFromJid(_0x218ab6));await sendText(_0x218ab6,_0x32c342,[_0x218ab6]),info('[leave]\x20se'+_0x287ca4(0x246)+_0x218ab6+(_0x287ca4(0x24b)+'ng\x20')+_0xc75dc9);}catch(_0x274d55){error(_0x274d55,'[leave]\x20ha'+'ndleVolunt'+'aryLeave\x20e'+_0x287ca4(0x187)+(_0x274d55?.[_0x287ca4(0x1d9)]||_0x274d55));}}async function processQueue(){const _0x8dc27e=_0x4dccf5;if(isProcessingQueue||eventQueue[_0x8dc27e(0x205)]===0xd7*-0x1+-0x1*-0xee7+-0xe10)return;isProcessingQueue=!![];try{while(eventQueue['length']>0xf6a+-0x1e4*0x5+-0x5f6){const _0x58d58=eventQueue[_0x8dc27e(0x208)]();try{await handleVoluntaryLeave(_0x58d58);}catch(_0x19d0a2){warn(_0x8dc27e(0x1cb)+'r-event\x20ha'+_0x8dc27e(0x1c1)+'ed:\x20'+(_0x19d0a2?.['message']||_0x19d0a2));}if(eventQueue['length']>0x1775*0x1+-0x46d*-0x3+-0x24bc)await new Promise(_0x187e59=>setTimeout(_0x187e59,PROCESS_INTERVAL_MS));}}finally{isProcessingQueue=![];}}async function startLogWatcher(){const _0x34c4b7=_0x4dccf5;try{await _0x1eb63c[_0x34c4b7(0x24d)](LOG_FILE_PATH,'',{'flag':'a'})[_0x34c4b7(0x1c5)](()=>{});try{if(tail&&typeof tail[_0x34c4b7(0x22f)]===_0x34c4b7(0x1b7))tail[_0x34c4b7(0x22f)]();}catch(_0x4ad844){}tail=new Tail(LOG_FILE_PATH,{'fromBeginning':![],'follow':!![]}),tail['on'](_0x34c4b7(0x1d7),_0x698d2c=>{const _0x220522=_0x34c4b7;try{if(!_0x698d2c||!_0x698d2c[_0x220522(0x1cc)]())return;const _0x2c9170=JSON['parse'](_0x698d2c);eventQueue['push'](_0x2c9170);if(!isProcessingQueue)processQueue();}catch(_0x142d42){warn('[leave]\x20Co'+'uld\x20not\x20pa'+_0x220522(0x243)+_0x220522(0x222)+_0x220522(0x192)+String(_0x698d2c)[_0x220522(0x22a)](-0x1cf8+0x2*-0x1161+-0x3fba*-0x1,-0x1*0xf1b+-0x9*-0xaf+0x26f*0x4));}}),tail['on'](_0x34c4b7(0x1e6),_0x3d80ef=>error(_0x3d80ef,_0x34c4b7(0x1b8)+'il\x20error')),info(_0x34c4b7(0x1df)+'arted\x20tail'+_0x34c4b7(0x1f5)+LOG_FILE_PATH);}catch(_0xb7e68f){error(_0xb7e68f,_0x34c4b7(0x1df)+_0x34c4b7(0x1dc)+_0x34c4b7(0x17f));}}function stopLogWatcher(){const _0x117982=_0x4dccf5;try{if(tail&&typeof tail['unwatch']===_0x117982(0x1b7))tail['unwatch']();tail=null,info(_0x117982(0x1df)+'opped\x20tail'+_0x117982(0x186));}catch(_0x5bc902){warn(_0x117982(0x1df)+_0x117982(0x1f9)+'er\x20error:\x20'+(_0x5bc902?.[_0x117982(0x1d9)]||_0x5bc902));}}function findLvcSubcommand(_0x1b73a5){const _0xa3ca1f=_0x4dccf5,_0x4ed0ad=String(_0x1b73a5||''),_0x439fa6=_0x4ed0ad[_0xa3ca1f(0x218)](/\blvc\s+([^\s\r\n]+)/i);if(!_0x439fa6)return{'sub':null,'after':''};const _0x4e33ee=_0x439fa6[0xa80+-0xf32+0x1*0x4b3][_0xa3ca1f(0x1d1)+'e'](),_0x5a0770=_0x4ed0ad[_0xa3ca1f(0x22a)](_0x439fa6[_0xa3ca1f(0x23f)]+_0x439fa6[-0x5fa+0x1*0x1853+-0x1259][_0xa3ca1f(0x205)])[_0xa3ca1f(0x1cf)](/^[\s:\-]*/,'');return{'sub':_0x4e33ee,'after':_0x5a0770};}export async function onMessage(_0x38ebcf){const _0x566a28=_0x4dccf5;try{if(!_0x38ebcf||!_0x38ebcf[_0x566a28(0x1ad)])return;const _0x299cb4=_0x38ebcf[_0x566a28(0x1ee)]?.[_0x566a28(0x23e)]||_0x38ebcf[_0x566a28(0x23e)]||'',_0x1f8866=typeof _0x299cb4===_0x566a28(0x235)&&_0x299cb4[_0x566a28(0x1c6)](_0x566a28(0x188)),_0x3e9851=_0x38ebcf[_0x566a28(0x1ee)]?.[_0x566a28(0x1c7)+'t']||_0x38ebcf[_0x566a28(0x1ee)]?.[_0x566a28(0x196)]||_0x38ebcf[_0x566a28(0x1c0)]||'',_0x16febf=(_0x38ebcf[_0x566a28(0x244)]||'')['replace'](/\r/g,'');if(!(/\blvc\b/i[_0x566a28(0x24a)](_0x16febf)||/\bdellvc\b/i[_0x566a28(0x24a)](_0x16febf)))return;if(/\bdellvc\b/i[_0x566a28(0x24a)](_0x16febf)){if(!_0x1f8866){const _0x4bb76d=Boolean(_0x38ebcf[_0x566a28(0x1ee)]?.[_0x566a28(0x1ed)]);let _0x39059f=null;if(_0x4bb76d)_0x39059f=getBotJid();else{let _0x3d6d8b=![];try{_0x3d6d8b=await isSudo(botRef,_0x38ebcf);}catch(_0x556a9a){_0x3d6d8b=![];}if(!_0x3d6d8b)return;const _0x2f9543=userJidFromCtx(_0x38ebcf)||{'findings':[]},_0x2c690e=await findStoredMatchFromFindings(_0x2f9543[_0x566a28(0x1a4)]||[]);if(!_0x2c690e)return;_0x39059f=_0x2c690e;}const _0x18b146=_0x16febf[_0x566a28(0x218)](/\bgp[:\s]+(\S+)/i);if(!_0x18b146){await sendText(_0x39059f,'PM:\x20includ'+'e\x20gp:<alia'+_0x566a28(0x20a));return;}const _0x20b442=_0x18b146[-0x2620+-0x22a6+0x48c7][_0x566a28(0x1cc)]();let _0x538a30=[];if(_0x20b442[_0x566a28(0x1d1)+'e']()==='all')_0x538a30=await _0x40441d[_0x566a28(0x216)+_0x566a28(0x18e)]();else{const _0x57b45c=await _0x40441d[_0x566a28(0x1d4)+'e'](_0x20b442);if(_0x57b45c)_0x538a30=[_0x57b45c];else{if(_0x20b442['includes']('@'))_0x538a30=[_0x40441d['normalizeT'+'oUserJid'](_0x20b442)];else{await sendText(_0x39059f,_0x566a28(0x227)+'\x20alias:\x20'+_0x20b442);return;}}}let _0x2c4111=-0x43*-0x2+0x2493*0x1+-0x2519;for(const _0x26f166 of _0x538a30)_0x2c4111+=await deleteLeaveFromDb(_0x26f166)||-0x1*0xcfe+0x2706+0x4*-0x682;await sendText(_0x39059f,_0x566a28(0x20d)+_0x2c4111+'/'+_0x538a30[_0x566a28(0x205)]+(_0x566a28(0x232)+'ries.'));return;}const _0x55406c=await isadmin(botRef,_0x38ebcf)[_0x566a28(0x1c5)](()=>![]);if(!_0x55406c)return;const _0x2c5fb0=String((_0x3e9851||'')[_0x566a28(0x236)]('@')[0x25*0x59+-0xb22+-0x1bb]||''),_0x1f2653=await getDefault(_0x2c5fb0)[_0x566a28(0x1c5)](()=>null);if(!_0x1f2653){await sendText(_0x299cb4,_0x566a28(0x18c)+_0x566a28(0x180)+'n');return;}const _0x121359=Array[_0x566a28(0x223)](_0x1f2653)?_0x1f2653:[_0x1f2653],_0x5b469e=[];for(const _0x1df588 of _0x121359){const _0x256dda=await getConnection(_0x1df588)[_0x566a28(0x1c5)](()=>null);if(Array[_0x566a28(0x223)](_0x256dda))_0x5b469e['push'](..._0x256dda);else{if(_0x256dda)_0x5b469e[_0x566a28(0x1eb)](_0x256dda);}}let _0x274905=-0x5dd+-0x33*0x2a+0xe3b;for(const _0x420549 of _0x5b469e)_0x274905+=await deleteLeaveFromDb(_0x420549)||0x1ba+0x1894+-0x25*0xb6;await sendText(_0x299cb4,_0x566a28(0x20d)+_0x274905+'/'+_0x5b469e['length']+(_0x566a28(0x232)+'ries.'));return;}const {sub:_0x4a0989,after:_0x34a366}=findLvcSubcommand(_0x16febf);if(!_0x4a0989)return;if(!_0x1f8866){const _0x9a2bd2=Boolean(_0x38ebcf[_0x566a28(0x1ee)]?.[_0x566a28(0x1ed)]);let _0x86775a=null;if(_0x9a2bd2)_0x86775a=getBotJid();else{let _0x430f77=![];try{_0x430f77=await isSudo(botRef,_0x38ebcf);}catch(_0x53fb22){_0x430f77=![];}if(!_0x430f77)return;const _0x1f50a8=userJidFromCtx(_0x38ebcf)||{'findings':[]},_0x509934=await findStoredMatchFromFindings(_0x1f50a8[_0x566a28(0x1a4)]||[]);if(!_0x509934)return;_0x86775a=_0x509934;}if(!_0x86775a)return;if(_0x4a0989==='on'||_0x4a0989===_0x566a28(0x190)){const _0x527cdf=_0x16febf[_0x566a28(0x218)](/\bgp[:\s]+(\S+)/i);if(!_0x527cdf){await sendText(_0x86775a,_0x566a28(0x211)+'e\x20gp:<alia'+_0x566a28(0x20a));return;}const _0x829f4e=_0x527cdf[0x9cc+0x1d29+-0x26f4][_0x566a28(0x1cc)]();let _0x2dac90=[];if(_0x829f4e[_0x566a28(0x1d1)+'e']()===_0x566a28(0x1a2))_0x2dac90=await _0x40441d[_0x566a28(0x216)+_0x566a28(0x18e)]();else{const _0xc77a5f=await _0x40441d[_0x566a28(0x1d4)+'e'](_0x829f4e);if(_0xc77a5f)_0x2dac90=[_0xc77a5f];else{if(_0x829f4e[_0x566a28(0x21f)]('@'))_0x2dac90=[_0x40441d[_0x566a28(0x17e)+_0x566a28(0x1d6)](_0x829f4e)];else{await sendText(_0x86775a,_0x566a28(0x227)+_0x566a28(0x248)+_0x829f4e);return;}}}const _0x5d459e=_0x4a0989==='on';let _0x5f0297=0x71a+0x1*-0x14c9+0x1f*0x71;for(const _0x5359a0 of _0x2dac90){const _0x3b2a1e=await getLeaveFromDb(_0x5359a0);if(!_0x3b2a1e)continue;if(await setLeaveEnabled(_0x5359a0,_0x5d459e))_0x5f0297++;}await sendText(_0x86775a,_0x566a28(0x1b9)+(_0x5d459e?_0x566a28(0x215):_0x566a28(0x1f4))+_0x566a28(0x1a0)+_0x5f0297+'/'+_0x2dac90[_0x566a28(0x205)]);return;}if(_0x4a0989==='add'){const _0x575b78=_0x16febf['match'](/\bgp[:\s]+(\S+)/i);if(!_0x575b78){await sendText(_0x86775a,_0x566a28(0x211)+_0x566a28(0x1fb)+'s|jid|all>');return;}const _0x2de942=_0x575b78[0x7ca+0x7*0x139+0x8*-0x20b][_0x566a28(0x1cc)]();let _0x3b2b30=[];if(_0x2de942[_0x566a28(0x1d1)+'e']()==='all')_0x3b2b30=await _0x40441d[_0x566a28(0x216)+_0x566a28(0x18e)]();else{const _0x498830=await _0x40441d[_0x566a28(0x1d4)+'e'](_0x2de942);if(_0x498830)_0x3b2b30=[_0x498830];else{if(_0x2de942['includes']('@'))_0x3b2b30=[_0x40441d[_0x566a28(0x17e)+'oUserJid'](_0x2de942)];else{await sendText(_0x86775a,_0x566a28(0x227)+'\x20alias:\x20'+_0x2de942);return;}}}let _0x5b7ed8=_0x34a366['trim']();_0x5b7ed8=_0x5b7ed8[_0x566a28(0x236)](/\r?\n/)[_0x566a28(0x1b2)](_0x51afe7=>!/^gp[:\s]/i[_0x566a28(0x24a)](_0x51afe7))[_0x566a28(0x19a)]('\x0a')[_0x566a28(0x1cc)]();if(!_0x5b7ed8){await sendText(_0x86775a,_0x566a28(0x1ae)+_0x566a28(0x238)+'dy');return;}let _0x356f31=0x1*0x1d6b+-0x4c9+0x836*-0x3;for(const _0x436bc0 of _0x3b2b30)if(await saveLeaveToDb(_0x436bc0,_0x5b7ed8,0x1*-0x1f84+0x1184+0xe01*0x1))_0x356f31++;await sendText(_0x86775a,'✅\x20Saved\x20'+_0x356f31+'/'+_0x3b2b30[_0x566a28(0x205)]);return;}return;}if(_0x1f8866){const _0x92a8fd=await isadmin(botRef,_0x38ebcf)['catch'](()=>![]);if(!_0x92a8fd)return;const _0x384c4a=String((_0x3e9851||'')[_0x566a28(0x236)]('@')[0x1e25+-0xa*-0x7+-0x1e6b]||''),_0x6cae25=await getDefault(_0x384c4a)['catch'](()=>null);if(!_0x6cae25){await sendText(_0x299cb4,'No\x20default'+_0x566a28(0x180)+'n');return;}const _0x45fb84=Array['isArray'](_0x6cae25)?_0x6cae25:[_0x6cae25],_0x49f889=[];for(const _0x5ed9ae of _0x45fb84){const _0x4af32a=await getConnection(_0x5ed9ae)[_0x566a28(0x1c5)](()=>null);if(Array[_0x566a28(0x223)](_0x4af32a))_0x49f889['push'](..._0x4af32a);else{if(_0x4af32a)_0x49f889[_0x566a28(0x1eb)](_0x4af32a);}}if(!_0x49f889[_0x566a28(0x205)]){await sendText(_0x299cb4,_0x566a28(0x247)+_0x566a28(0x191)+_0x566a28(0x17d)+_0x566a28(0x1e8));return;}if(_0x4a0989==='on'||_0x4a0989===_0x566a28(0x190)){const _0x6c34b0=_0x4a0989==='on';let _0x552fda=0x5*0x78b+-0x48*-0xd+0x295f*-0x1;for(const _0x4ab74b of _0x49f889){const _0x172eea=await getLeaveFromDb(_0x4ab74b);if(!_0x172eea)continue;if(await setLeaveEnabled(_0x4ab74b,_0x6c34b0))_0x552fda++;}await sendText(_0x299cb4,_0x566a28(0x1b9)+(_0x6c34b0?_0x566a28(0x215):_0x566a28(0x1f4))+'\x20for\x20'+_0x552fda+'/'+_0x49f889[_0x566a28(0x205)]);return;}if(_0x4a0989===_0x566a28(0x198)){const _0x2f6397=_0x34a366['trim']();if(!_0x2f6397){await sendText(_0x299cb4,'Empty\x20mess'+_0x566a28(0x202));return;}let _0x1ca385=-0x19c4+-0x11*-0x49+-0x99*-0x23;for(const _0x5b7d7f of _0x49f889)if(await saveLeaveToDb(_0x5b7d7f,_0x2f6397,0x4*-0x23c+0x1cb7*0x1+-0x13c6))_0x1ca385++;await sendText(_0x299cb4,_0x566a28(0x1ef)+_0x1ca385+'/'+_0x49f889[_0x566a28(0x205)]);return;}}}catch(_0x1ba2e1){error(_0x1ba2e1,_0x566a28(0x20e)+_0x566a28(0x199)+_0x566a28(0x24f)+(_0x1ba2e1?.[_0x566a28(0x1d9)]||_0x1ba2e1));}}let _managedRegistered=![];export async function initialize(_0x188915){const _0x48e258=_0x4dccf5;if(!_0x188915)throw new Error(_0x48e258(0x229)+_0x48e258(0x1d0)+_0x48e258(0x1a6)+_0x48e258(0x22e));botRef=_0x188915,setupSendApi(),await ensureSchema();try{await startLogWatcher();}catch(_0x3e000f){warn('[leave]\x20st'+_0x48e258(0x1dc)+_0x48e258(0x17f)+_0x48e258(0x23c)+_0x48e258(0x19d)+(_0x3e000f?.['message']||_0x3e000f));}try{typeof startManagedListener==='function'&&(startManagedListener({'botRef':_0x188915,'eventName':_0x48e258(0x1c8),'handler':async()=>{const _0x38abe7=_0x48e258;try{if(!tail)await startLogWatcher();}catch(_0x376cec){warn('[leave]\x20ma'+'naged\x20hand'+_0x38abe7(0x1e9)+'failed:\x20'+(_0x376cec?.[_0x38abe7(0x1d9)]||_0x376cec));}},'moduleName':name}),_managedRegistered=!![],info(_0x48e258(0x1d2)+'gistered\x20w'+_0x48e258(0x21d)+'erManager'));}catch(_0x2aa395){warn('[leave]\x20fa'+_0x48e258(0x1a1)+_0x48e258(0x219)+_0x48e258(0x184)+_0x48e258(0x207)+(_0x2aa395?.[_0x48e258(0x1d9)]||_0x2aa395)),_managedRegistered=![];}info(_0x48e258(0x229)+'itialized\x20'+_0x48e258(0x1bc)+_0x48e258(0x1d8)+_0x48e258(0x234));}export async function cleanup(){const _0x1e13c0=_0x4dccf5;try{try{if(_managedRegistered&&typeof stopManagedListener===_0x1e13c0(0x1b7)){try{stopManagedListener(name,'leave.log');}catch(_0xd0db72){try{stopManagedListener(name);}catch(_0x42def5){warn(_0x1e13c0(0x1df)+_0x1e13c0(0x1e2)+_0x1e13c0(0x1c2)+'tempts\x20fai'+_0x1e13c0(0x1c4)+(_0x42def5?.[_0x1e13c0(0x1d9)]||_0xd0db72));}}info(_0x1e13c0(0x1df)+_0x1e13c0(0x1e2)+_0x1e13c0(0x1fa)+_0x1e13c0(0x1b4));}}catch(_0x2e05ac){warn(_0x1e13c0(0x1b3)+_0x1e13c0(0x20b)+_0x1e13c0(0x1f1)+_0x1e13c0(0x23b)+'dListener:'+'\x20'+(_0x2e05ac?.[_0x1e13c0(0x1d9)]||_0x2e05ac));}try{stopLogWatcher();}catch(_0x112207){warn(_0x1e13c0(0x1df)+_0x1e13c0(0x1f9)+_0x1e13c0(0x214)+_0x1e13c0(0x212)+(_0x112207?.[_0x1e13c0(0x1d9)]||_0x112207));}}catch(_0x462ac4){error(_0x462ac4,_0x1e13c0(0x1b3)+_0x1e13c0(0x20b)+_0x1e13c0(0x206)+(_0x462ac4?.[_0x1e13c0(0x1d9)]||_0x462ac4));}finally{eventQueue[_0x1e13c0(0x205)]=0x1658+-0x253a*-0x1+-0x3b92,isProcessingQueue=![],processedIds[_0x1e13c0(0x221)](),botRef=null,sendApi=null,info(_0x1e13c0(0x1b3)+'eaned\x20up.');}}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};