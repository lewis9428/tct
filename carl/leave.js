function _0x2d28(){const _0x22f1ce=['h\x20listener','or\x20','.log','\x20\x20\x20\x20\x20updat','\x20TEXT\x20NOT\x20','KEY,\x0a\x20\x20\x20\x20\x20','nopart','off','line','iled\x20to\x20re','8897168RMZLEk','ing','[leave]\x20de','text','itialize:\x20','NFLICT(gro','dings\x20erro','\x0a\x20\x20\x20\x20\x20\x20upd','includes','\x20alias:\x20','map','ndApi\x20fail','led\x20FROM\x20l','fault\x20conn','join','lvc','[leave]\x20sa','age\x20body','artLogWatc','shift','get','parse','floor','1051338gYaimc','\x20\x20\x20\x20\x20ON\x20CO','isCommand','\x20\x20enabled\x20','data','add','r-event\x20ha','ed\x20for\x20','pdated_at)','nogroup','equires\x20bo','[leave]\x20on','[leave]\x20fi','resolveNam','group_jid,','[leave]\x20st','opLogWatch','\x20updated_a','ves\x20SET\x20en','for\x20','test','arted\x20tail','sage,\x20enab','[leave]\x20re','erManager','sendMessag','SELECT\x20mes','[leave]\x20fa','from','\x20excluded.','4.2.6','string','up_jid)\x20DO','available','participan','\x0a\x20\x20\x20\x20\x20\x20gro','getUniqueJ','normalizeT','exec','\x20message\x20\x20','\x20message\x20=','e\x20gp:<alia','T\x20PRIMARY\x20','leave.log','[leave]\x20ge','bled,\x0a\x20\x20\x20\x20','k\x20failed:\x20','sock','sender','[leave]\x20cl','er\x20error:\x20','key','subject','disabled','leave','length','ndler\x20fail','cluded.ena','ler\x20start\x20','Empty\x20mess','ing\x20','er\x20fallbac','ed\x20to\x20','leteLeaveF','sured','[leave]\x20Co','\x20for\x20','slice','INSERT\x20INT','up_jid\x20TEX','split','eaned\x20up.','[leave]\x20in','\x20during\x20in','E\x20TABLE\x20IF','4010660YaGUsW','E\x20group_ji','group','trim','match','unwatch','Unknown\x20gp','2098840MTxHph','enabled','gister\x20wit','2911951MYNCPu','d\x20=\x20?','the\x20group','itialized\x20','ne\x20(skippi','\x20connectio','ed_at\x20=\x20ex','size','dListener:','1978352OLdTKD','toLowerCas','cwd','No\x20default','replace','resolve\x20de','opManagedL','cluded.upd','✅\x20Saved\x20','catch','run','findings','ries.','UPDATE\x20lea','5731662iBpDMy','jid','function','action','\x20\x20INTEGER\x20','abled\x20=\x20ex','stopManage','t\x20instance','istener\x20ca','Could\x20not\x20','il\x20error','mentions','\x0a\x20\x20\x20\x20\x20\x20\x20VA','PM:\x20includ','✅\x20Deleted\x20','remoteJid','[leave]\x20ha','now','ror:\x20','timestamp','TEGER\x20DEFA','aryLeave\x20e','S\x20leaves\x20(','M\x20leaves\x20W','itialize\x20r','\x20\x20\x20\x20\x20\x20\x20\x20en','isArray','ections','PM:\x20empty\x20',');\x0a\x20\x20','Message\x20er','\x20UPDATE\x20SE','t_pn','s|jid|all>','rror:\x20','has','clear','ated_at\x20IN','message','3LWiVhJ','eanup\x20erro','[leave]\x20Ta','ids','DELETE\x20FRO','[leave]\x20se','romDb\x20fail','ndStoredMa','opped\x20tail','groupMetad','index','push','tLeaveEnab','rse\x20log\x20li','and\x20watchi','message\x20bo',',\x20?,\x20?)\x0a\x20\x20','LUES\x20(?,\x20?','object','✅\x20Leave\x20','[leave]\x20pe','\x20group\x20ent','lled','failed:\x20','ng\x20','tchFromFin','error','T\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20schema\x20en','b\x20failed\x20f','NULL,\x0a\x20\x20\x20\x20','naged\x20hand','filter','tmp','groupId','_jid\x20=\x20?','eaves\x20WHER','her\x20failed'];_0x2d28=function(){return _0x22f1ce;};return _0x2d28();}function _0x214e(_0x52e900,_0x19709c){const _0x20c0a9=_0x2d28();return _0x214e=function(_0x2b8ab9,_0xb76496){_0x2b8ab9=_0x2b8ab9-(0x3fb+-0x943+0x6bf);let _0x478717=_0x20c0a9[_0x2b8ab9];return _0x478717;},_0x214e(_0x52e900,_0x19709c);}const _0x7e4203=_0x214e;(function(_0x12fd66,_0x497fb8){const _0x5d20a9=_0x214e,_0x4e474f=_0x12fd66();while(!![]){try{const _0x464890=parseInt(_0x5d20a9(0x23b))/(-0x1*-0x159d+0x2ad+-0x1849)+-parseInt(_0x5d20a9(0x1bf))/(0x5*0x39+-0x1*-0x18da+-0x1*0x19f5)+-parseInt(_0x5d20a9(0x1f4))/(0x21f+0x22a7+-0x24c3)*(parseInt(_0x5d20a9(0x1b3))/(-0x7e6*0x1+0x534+0x1*0x2b6))+parseInt(_0x5d20a9(0x1ac))/(0x29*-0xec+0x1866+-0xf*-0xe5)+parseInt(_0x5d20a9(0x1cd))/(0x15b*-0xa+-0xf*-0x104+0x6a*-0x4)+parseInt(_0x5d20a9(0x1b6))/(-0x21e+0x20e5+-0x1ec0)+-parseInt(_0x5d20a9(0x224))/(0x1939+0x1973+-0x32a4);if(_0x464890===_0x497fb8)break;else _0x4e474f['push'](_0x4e474f['shift']());}catch(_0x41f2d6){_0x4e474f['push'](_0x4e474f['shift']());}}}(_0x2d28,-0x4*-0x14f7c+-0x4d62c+-0x8*-0x1175e));import _0x5ef973 from'path';import _0xab7c0 from'fs/promises';import{Tail}from'tail';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{getBotJid}from'../utils/bot-state.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import*as _0x3f1413 from'../utils/groups.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name=_0x7e4203(0x197);export const version=_0x7e4203(0x17f);export const priority=0x2*0x9c4+0x2*0x1231+-0x37ae;export const commands=[_0x7e4203(0x233),'dellvc'];const LOG_FILE_PATH=_0x5ef973[_0x7e4203(0x232)](process[_0x7e4203(0x1c1)](),_0x7e4203(0x23f),_0x7e4203(0x215),'leave_join'+_0x7e4203(0x21c));let botRef=null,sendApi=null,tail=null;const eventQueue=[];let isProcessingQueue=![];const PROCESS_INTERVAL_MS=0xd*-0x67+-0x1e74+0x25a3,processedIds=new Set();function shortLocalFromJid(_0x75b28d){const _0x595da3=_0x7e4203;try{return String(_0x75b28d||'')[_0x595da3(0x1a7)]('@')[0x1a*-0x1f+-0x1*0x1fee+0x14*0x1c1];}catch{return _0x75b28d;}}function eventUniqueId(_0x4b7440){const _0x1c21f1=_0x7e4203;if(!_0x4b7440)return null;if(_0x4b7440['id'])return String(_0x4b7440['id']);return String(_0x4b7440[_0x1c21f1(0x216)]||_0x4b7440[_0x1c21f1(0x1ae)]||_0x1c21f1(0x244))+':'+String(_0x4b7440[_0x1c21f1(0x183)+_0x1c21f1(0x1ed)]||_0x4b7440['participan'+'t']||_0x1c21f1(0x220))+':'+String(_0x4b7440[_0x1c21f1(0x1e0)]||_0x4b7440['ts']||Date[_0x1c21f1(0x1de)]());}function trimProcessedSet(){const _0x559ae6=_0x7e4203;if(processedIds[_0x559ae6(0x1bd)]>-0x1*0x1cd+-0x2683*-0x1+-0x6*0x2dd){const _0x252e33=Array[_0x559ae6(0x17d)](processedIds);processedIds[_0x559ae6(0x1f1)]();for(const _0x4d7a4b of _0x252e33['slice'](-(-0xfc9+-0x1ab*-0x11+-0x2*0x6d)))processedIds[_0x559ae6(0x240)](_0x4d7a4b);}}async function ensureSchema(){const _0x2dc3d1=_0x7e4203;await db[_0x2dc3d1(0x187)]('\x0a\x20\x20\x20\x20CREAT'+_0x2dc3d1(0x1ab)+'\x20NOT\x20EXIST'+_0x2dc3d1(0x1e3)+_0x2dc3d1(0x184)+_0x2dc3d1(0x1a6)+_0x2dc3d1(0x18b)+_0x2dc3d1(0x21f)+_0x2dc3d1(0x188)+_0x2dc3d1(0x21e)+_0x2dc3d1(0x212)+_0x2dc3d1(0x23e)+_0x2dc3d1(0x1d1)+'DEFAULT\x200,'+_0x2dc3d1(0x22b)+_0x2dc3d1(0x1f2)+_0x2dc3d1(0x1e1)+'ULT\x200\x0a\x20\x20\x20\x20'+_0x2dc3d1(0x1ea)),info('[leave]\x20DB'+_0x2dc3d1(0x210)+_0x2dc3d1(0x1a1));}async function saveLeaveToDb(_0x5420ca,_0x41da8d,_0x3f0d11=0x1*-0x841+-0x4*0x473+0x1a0d){const _0x167f1f=_0x7e4203;try{const _0x21b035=Math[_0x167f1f(0x23a)](Date[_0x167f1f(0x1de)]()/(0x1120*0x1+0x19c4+0xa*-0x3e6));return await db[_0x167f1f(0x1c9)](_0x167f1f(0x1a5)+'O\x20leaves\x20('+_0x167f1f(0x249)+'\x20message,\x20'+'enabled,\x20u'+_0x167f1f(0x243)+_0x167f1f(0x1d9)+_0x167f1f(0x205)+_0x167f1f(0x204)+_0x167f1f(0x23c)+_0x167f1f(0x229)+_0x167f1f(0x181)+_0x167f1f(0x1ec)+_0x167f1f(0x20f)+_0x167f1f(0x189)+_0x167f1f(0x17e)+'message,\x0a\x20'+_0x167f1f(0x1e6)+_0x167f1f(0x1d2)+_0x167f1f(0x19a)+_0x167f1f(0x18e)+_0x167f1f(0x21d)+_0x167f1f(0x1bc)+_0x167f1f(0x1c6)+'ated_at;',[_0x5420ca,String(_0x41da8d||''),Number(_0x3f0d11?0x19*0x5a+0x1f19+0x3fd*-0xa:-0x1f7f+-0x1f0b+0x3e8a),_0x21b035]),!![];}catch(_0x16a782){return warn(_0x167f1f(0x234)+'veLeaveToD'+_0x167f1f(0x211)+_0x167f1f(0x21b)+_0x5420ca+':\x20'+(_0x16a782?.[_0x167f1f(0x1f3)]||_0x16a782)),![];}}async function deleteLeaveFromDb(_0x11d7fb){const _0x34aaef=_0x7e4203;try{const _0x3a69bb=await db[_0x34aaef(0x1c9)](_0x34aaef(0x1f8)+_0x34aaef(0x1e4)+'HERE\x20group'+_0x34aaef(0x217),[_0x11d7fb]);return _0x3a69bb?.['changes']||0xad3*-0x3+0xae2+0x1597;}catch(_0xf4b2c8){return warn(_0x34aaef(0x226)+_0x34aaef(0x1a0)+_0x34aaef(0x1fa)+_0x34aaef(0x242)+_0x11d7fb+':\x20'+(_0xf4b2c8?.[_0x34aaef(0x1f3)]||_0xf4b2c8)),0x3*0x841+0x47*0x55+-0x3056;}}async function getLeaveFromDb(_0x3e240a){const _0x3c7475=_0x7e4203;try{const _0x474d99=await db[_0x3c7475(0x238)](_0x3c7475(0x17b)+_0x3c7475(0x177)+_0x3c7475(0x230)+_0x3c7475(0x218)+_0x3c7475(0x1ad)+_0x3c7475(0x1b7),[_0x3e240a]);if(!_0x474d99)return null;return{'message':_0x474d99['message'],'enabled':Number(_0x474d99['enabled']||0x7e0+-0x7c5+0x1b*-0x1)===0x22a3*-0x1+-0x1*0xad7+0x2d7b*0x1};}catch(_0x4e1de8){return warn(_0x3c7475(0x18d)+'tLeaveFrom'+'Db\x20failed\x20'+_0x3c7475(0x24e)+_0x3e240a+':\x20'+(_0x4e1de8?.[_0x3c7475(0x1f3)]||_0x4e1de8)),null;}}async function setLeaveEnabled(_0x425e0e,_0x463b35){const _0x24899d=_0x7e4203;try{const _0x413919=Math[_0x24899d(0x23a)](Date[_0x24899d(0x1de)]()/(-0x1af9+0x5b1+0x1930)),_0x8a3d60=await db[_0x24899d(0x1c9)](_0x24899d(0x1cc)+_0x24899d(0x24d)+'abled\x20=\x20?,'+_0x24899d(0x24c)+'t\x20=\x20?\x20WHER'+_0x24899d(0x1ad)+_0x24899d(0x1b7),[Number(_0x463b35?0xb55+-0x1cca+0x1176:-0xa+0x1624+0x161a*-0x1),_0x413919,_0x425e0e]);return!!_0x8a3d60?.['changes'];}catch(_0x4dae10){return warn(_0x24899d(0x1f9)+_0x24899d(0x200)+'led\x20failed'+_0x24899d(0x1a3)+_0x425e0e+':\x20'+(_0x4dae10?.[_0x24899d(0x1f3)]||_0x4dae10)),![];}}function setupSendApi(){const _0x204544=_0x7e4203;if(!botRef)return;if(typeof botRef['sendMessag'+'e']===_0x204544(0x1cf))sendApi=async(_0x918456,_0x22444d)=>await botRef[_0x204544(0x17a)+'e'](_0x918456,_0x22444d);else{if(botRef[_0x204544(0x190)]&&typeof botRef[_0x204544(0x190)][_0x204544(0x17a)+'e']===_0x204544(0x1cf))sendApi=async(_0xef69f8,_0x12d2d1)=>await botRef['sock'][_0x204544(0x17a)+'e'](_0xef69f8,_0x12d2d1);else sendApi=null;}}async function sendText(_0xa663ce,_0x1d3b2a,_0x244bfd=[]){const _0x4bfeec=_0x7e4203;try{if(!_0xa663ce)return null;if(!sendApi)return warn(_0x4bfeec(0x1f9)+'ndApi\x20not\x20'+_0x4bfeec(0x182)),null;let _0x4fad6f=typeof _0x1d3b2a===_0x4bfeec(0x180)?{'text':String(_0x1d3b2a)}:{..._0x1d3b2a||{}};if(Array[_0x4bfeec(0x1e7)](_0x244bfd)&&_0x244bfd[_0x4bfeec(0x198)])_0x4fad6f[_0x4bfeec(0x1d8)]=_0x244bfd;return await sendApi(_0xa663ce,_0x4fad6f);}catch(_0x6e235){return warn('[leave]\x20se'+_0x4bfeec(0x22f)+_0x4bfeec(0x19f)+_0xa663ce+':\x20'+(_0x6e235?.[_0x4bfeec(0x1f3)]||_0x6e235)),null;}}async function findStoredMatchFromFindings(_0x3ce9bf=[]){const _0x3929cf=_0x7e4203;try{const _0x2dc53a=await listSudo();if(!Array['isArray'](_0x2dc53a)||_0x2dc53a[_0x3929cf(0x198)]===0x1bf*-0x1+0x369*-0xb+0x2742*0x1)return null;const _0x285231=new Set(_0x2dc53a[_0x3929cf(0x22e)](String));for(const _0x4f2ffb of _0x3ce9bf||[]){if(!_0x4f2ffb||typeof _0x4f2ffb[_0x3929cf(0x1ce)]!=='string')continue;const _0x3a68f1=normalizeToJid?normalizeToJid(_0x4f2ffb[_0x3929cf(0x1ce)]):_0x4f2ffb[_0x3929cf(0x1ce)];if(_0x3a68f1&&_0x285231[_0x3929cf(0x1f0)](_0x3a68f1))return _0x3a68f1;if(_0x285231['has'](_0x4f2ffb[_0x3929cf(0x1ce)]))return _0x4f2ffb[_0x3929cf(0x1ce)];const _0x4532bd=String(_0x4f2ffb[_0x3929cf(0x1ce)])[_0x3929cf(0x1a7)]('@')[0x1bf3+-0x2e9+-0x190a][_0x3929cf(0x1a7)](':')[-0x2*0xb99+-0xc94+0x1e2*0x13];if(_0x4532bd)for(const _0x5703fa of _0x2dc53a){const _0xcb2fba=String(_0x5703fa)['split']('@')[0x3d*-0x2e+0x12f1*0x2+-0x1aec];if(_0xcb2fba&&_0xcb2fba===_0x4532bd)return _0x5703fa;}}return null;}catch(_0x2220cc){return warn(_0x3929cf(0x247)+_0x3929cf(0x1fb)+_0x3929cf(0x20d)+_0x3929cf(0x22a)+'r:\x20'+(_0x2220cc?.[_0x3929cf(0x1f3)]||_0x2220cc)),null;}}async function handleVoluntaryLeave(_0x145c67){const _0x4cc35a=_0x7e4203;try{if(!_0x145c67||typeof _0x145c67!==_0x4cc35a(0x206))return;const _0x4733ef=_0x145c67[_0x4cc35a(0x1d0)]==='remove',_0x16f997=String(_0x145c67['type']||'')[_0x4cc35a(0x1c0)+'e']()[_0x4cc35a(0x22c)](_0x4cc35a(0x197));if(!_0x4733ef&&!_0x16f997)return;const _0x486a23=_0x145c67[_0x4cc35a(0x183)+_0x4cc35a(0x1ed)]||_0x145c67[_0x4cc35a(0x183)+'t'],_0x3b4985=_0x145c67[_0x4cc35a(0x216)]||_0x145c67[_0x4cc35a(0x1ae)];if(!_0x486a23||!_0x3b4985)return;const _0xcb31bb=eventUniqueId(_0x145c67);if(!_0xcb31bb)return;if(processedIds[_0x4cc35a(0x1f0)](_0xcb31bb))return;processedIds[_0x4cc35a(0x240)](_0xcb31bb),trimProcessedSet();const _0x3164bb=getBotJid?getBotJid():null;if(_0x3164bb&&String(_0x486a23)===String(_0x3164bb))return;const _0x56c498=await getLeaveFromDb(_0x3b4985);if(!_0x56c498||!_0x56c498[_0x4cc35a(0x1b4)]||!_0x56c498[_0x4cc35a(0x1f3)])return;let _0x5c4cd2=_0x4cc35a(0x1b8);try{if(botRef&&botRef[_0x4cc35a(0x190)]&&typeof botRef[_0x4cc35a(0x190)]['groupMetad'+'ata']===_0x4cc35a(0x1cf)){const _0xa3304e=await botRef[_0x4cc35a(0x190)][_0x4cc35a(0x1fd)+'ata'](_0x3b4985)[_0x4cc35a(0x1c8)](()=>null);if(_0xa3304e&&_0xa3304e[_0x4cc35a(0x195)])_0x5c4cd2=_0xa3304e[_0x4cc35a(0x195)];}}catch(_0x13ff25){}const _0x5d8053=String(_0x56c498[_0x4cc35a(0x1f3)]||'')[_0x4cc35a(0x1c3)](/\{group\}/g,_0x5c4cd2)[_0x4cc35a(0x1c3)](/\{user\}/g,shortLocalFromJid(_0x486a23));await sendText(_0x486a23,_0x5d8053,[_0x486a23]),info(_0x4cc35a(0x1f9)+'nt\x20DM\x20to\x20'+_0x486a23+('\x20for\x20leavi'+_0x4cc35a(0x20c))+_0x3b4985);}catch(_0xf432d){error(_0xf432d,_0x4cc35a(0x1dd)+'ndleVolunt'+_0x4cc35a(0x1e2)+_0x4cc35a(0x1ef)+(_0xf432d?.[_0x4cc35a(0x1f3)]||_0xf432d));}}async function processQueue(){const _0x533e31=_0x7e4203;if(isProcessingQueue||eventQueue[_0x533e31(0x198)]===0x3*-0xc6d+0x264f+-0x108)return;isProcessingQueue=!![];try{while(eventQueue[_0x533e31(0x198)]>0x84*0x8+-0x8*-0x39a+0x11*-0x1f0){const _0x4d2807=eventQueue[_0x533e31(0x237)]();try{await handleVoluntaryLeave(_0x4d2807);}catch(_0x2f396f){warn(_0x533e31(0x208)+_0x533e31(0x241)+_0x533e31(0x199)+'ed:\x20'+(_0x2f396f?.[_0x533e31(0x1f3)]||_0x2f396f));}if(eventQueue['length']>0xf8f*-0x1+0x5*-0x673+0x2fce)await new Promise(_0x1eb833=>setTimeout(_0x1eb833,PROCESS_INTERVAL_MS));}}finally{isProcessingQueue=![];}}async function startLogWatcher(){const _0x5b617d=_0x7e4203;try{await _0xab7c0['writeFile'](LOG_FILE_PATH,'',{'flag':'a'})[_0x5b617d(0x1c8)](()=>{});try{if(tail&&typeof tail[_0x5b617d(0x1b1)]===_0x5b617d(0x1cf))tail[_0x5b617d(0x1b1)]();}catch(_0x23bba3){}tail=new Tail(LOG_FILE_PATH,{'fromBeginning':![],'follow':!![]}),tail['on'](_0x5b617d(0x222),_0x3b1d3b=>{const _0x4408db=_0x5b617d;try{if(!_0x3b1d3b||!_0x3b1d3b[_0x4408db(0x1af)]())return;const _0x50dc0e=JSON[_0x4408db(0x239)](_0x3b1d3b);eventQueue[_0x4408db(0x1ff)](_0x50dc0e);if(!isProcessingQueue)processQueue();}catch(_0x119640){warn(_0x4408db(0x1a2)+'uld\x20not\x20pa'+_0x4408db(0x201)+_0x4408db(0x1ba)+'ng):\x20'+String(_0x3b1d3b)['slice'](-0x1a*-0x11e+-0x5*0x30d+0xdcb*-0x1,-0xa80+-0x1b5*-0x15+-0x1891));}}),tail['on'](_0x5b617d(0x20e),_0x2fbd2=>error(_0x2fbd2,_0x5b617d(0x1f6)+_0x5b617d(0x1d7))),info(_0x5b617d(0x24a)+_0x5b617d(0x250)+_0x5b617d(0x19d)+LOG_FILE_PATH);}catch(_0x169328){error(_0x169328,_0x5b617d(0x24a)+'artLogWatc'+_0x5b617d(0x219));}}function stopLogWatcher(){const _0x58a6fd=_0x7e4203;try{if(tail&&typeof tail[_0x58a6fd(0x1b1)]===_0x58a6fd(0x1cf))tail[_0x58a6fd(0x1b1)]();tail=null,info(_0x58a6fd(0x24a)+_0x58a6fd(0x1fc)+_0x58a6fd(0x225));}catch(_0x3089a8){warn(_0x58a6fd(0x24a)+_0x58a6fd(0x24b)+_0x58a6fd(0x193)+(_0x3089a8?.[_0x58a6fd(0x1f3)]||_0x3089a8));}}function findLvcSubcommand(_0x3629c4){const _0xb3d9ac=_0x7e4203,_0x58a003=String(_0x3629c4||''),_0x39691a=_0x58a003[_0xb3d9ac(0x1b0)](/\blvc\s+([^\s\r\n]+)/i);if(!_0x39691a)return{'sub':null,'after':''};const _0x2d3d11=_0x39691a[-0x1*-0x243e+-0x664+-0x1dd9][_0xb3d9ac(0x1c0)+'e'](),_0x44e808=_0x58a003[_0xb3d9ac(0x1a4)](_0x39691a[_0xb3d9ac(0x1fe)]+_0x39691a[-0x1db8+-0xa2e+-0x1*-0x27e6]['length'])[_0xb3d9ac(0x1c3)](/^[\s:\-]*/,'');return{'sub':_0x2d3d11,'after':_0x44e808};}export async function onMessage(_0x4bc059){const _0x29780d=_0x7e4203;try{if(!_0x4bc059||!_0x4bc059[_0x29780d(0x23d)])return;const _0x3fa669=_0x4bc059[_0x29780d(0x194)]?.['remoteJid']||_0x4bc059[_0x29780d(0x1dc)]||'',_0x113145=typeof _0x3fa669===_0x29780d(0x180)&&_0x3fa669['endsWith']('@g.us'),_0x5e97f8=_0x4bc059[_0x29780d(0x194)]?.[_0x29780d(0x183)+'t']||_0x4bc059[_0x29780d(0x194)]?.['from']||_0x4bc059[_0x29780d(0x191)]||'',_0x425645=(_0x4bc059[_0x29780d(0x227)]||'')['replace'](/\r/g,'');if(!(/\blvc\b/i['test'](_0x425645)||/\bdellvc\b/i['test'](_0x425645)))return;if(/\bdellvc\b/i[_0x29780d(0x24f)](_0x425645)){if(!_0x113145){const _0x445702=Boolean(_0x4bc059[_0x29780d(0x194)]?.['fromMe']);let _0x19ca17=null;if(_0x445702)_0x19ca17=getBotJid();else{let _0x59a2c2=![];try{_0x59a2c2=await isSudo(botRef,_0x4bc059);}catch(_0x5a7f25){_0x59a2c2=![];}if(!_0x59a2c2)return;const _0x1d881a=userJidFromCtx(_0x4bc059)||{'findings':[]},_0x11a466=await findStoredMatchFromFindings(_0x1d881a[_0x29780d(0x1ca)]||[]);if(!_0x11a466)return;_0x19ca17=_0x11a466;}const _0x56a2bb=_0x425645['match'](/\bgp[:\s]+(\S+)/i);if(!_0x56a2bb){await sendText(_0x19ca17,_0x29780d(0x1da)+'e\x20gp:<alia'+_0x29780d(0x1ee));return;}const _0x5eeb2f=_0x56a2bb[-0x98e*-0x1+0xcdc+-0x1669][_0x29780d(0x1af)]();let _0x1c7d60=[];if(_0x5eeb2f['toLowerCas'+'e']()==='all')_0x1c7d60=await _0x3f1413[_0x29780d(0x185)+_0x29780d(0x1f7)]();else{const _0xce5930=await _0x3f1413[_0x29780d(0x248)+'e'](_0x5eeb2f);if(_0xce5930)_0x1c7d60=[_0xce5930];else{if(_0x5eeb2f[_0x29780d(0x22c)]('@'))_0x1c7d60=[_0x3f1413[_0x29780d(0x186)+'oUserJid'](_0x5eeb2f)];else{await sendText(_0x19ca17,_0x29780d(0x1b2)+_0x29780d(0x22d)+_0x5eeb2f);return;}}}let _0x481853=-0xb3*0xa+-0x175d*-0x1+-0x105f*0x1;for(const _0x2f61e9 of _0x1c7d60)_0x481853+=await deleteLeaveFromDb(_0x2f61e9)||-0x539+0x232*-0x2+0x99d;await sendText(_0x19ca17,_0x29780d(0x1db)+_0x481853+'/'+_0x1c7d60[_0x29780d(0x198)]+(_0x29780d(0x209)+_0x29780d(0x1cb)));return;}const _0x73627e=await isadmin(botRef,_0x4bc059)[_0x29780d(0x1c8)](()=>![]);if(!_0x73627e)return;const _0x46f26d=String((_0x5e97f8||'')[_0x29780d(0x1a7)]('@')[0x7*0x25+-0xba6+0xaa3]||''),_0x5e93bb=await getDefault(_0x46f26d)['catch'](()=>null);if(!_0x5e93bb){await sendText(_0x3fa669,_0x29780d(0x1c2)+'\x20connectio'+'n');return;}const _0xcf6fae=Array[_0x29780d(0x1e7)](_0x5e93bb)?_0x5e93bb:[_0x5e93bb],_0x7a6f3e=[];for(const _0x24c3cf of _0xcf6fae){const _0x1b3b05=await getConnection(_0x24c3cf)[_0x29780d(0x1c8)](()=>null);if(Array[_0x29780d(0x1e7)](_0x1b3b05))_0x7a6f3e[_0x29780d(0x1ff)](..._0x1b3b05);else{if(_0x1b3b05)_0x7a6f3e[_0x29780d(0x1ff)](_0x1b3b05);}}let _0x58131b=-0x1*-0xa03+0x8b*-0x30+-0x24b*-0x7;for(const _0x23139b of _0x7a6f3e)_0x58131b+=await deleteLeaveFromDb(_0x23139b)||0x1bc4+0xe24+0x37e*-0xc;await sendText(_0x3fa669,'✅\x20Deleted\x20'+_0x58131b+'/'+_0x7a6f3e[_0x29780d(0x198)]+(_0x29780d(0x209)+'ries.'));return;}const {sub:_0x670055,after:_0x3f6771}=findLvcSubcommand(_0x425645);if(!_0x670055)return;if(!_0x113145){const _0x36e955=Boolean(_0x4bc059[_0x29780d(0x194)]?.['fromMe']);let _0x4508ee=null;if(_0x36e955)_0x4508ee=getBotJid();else{let _0xdb0b45=![];try{_0xdb0b45=await isSudo(botRef,_0x4bc059);}catch(_0x583fe6){_0xdb0b45=![];}if(!_0xdb0b45)return;const _0x4f59cd=userJidFromCtx(_0x4bc059)||{'findings':[]},_0x5081c3=await findStoredMatchFromFindings(_0x4f59cd[_0x29780d(0x1ca)]||[]);if(!_0x5081c3)return;_0x4508ee=_0x5081c3;}if(!_0x4508ee)return;if(_0x670055==='on'||_0x670055===_0x29780d(0x221)){const _0xa48754=_0x425645[_0x29780d(0x1b0)](/\bgp[:\s]+(\S+)/i);if(!_0xa48754){await sendText(_0x4508ee,_0x29780d(0x1da)+_0x29780d(0x18a)+_0x29780d(0x1ee));return;}const _0x23a276=_0xa48754[-0x2109+-0x8ad*0x1+0x29b7][_0x29780d(0x1af)]();let _0x855b7e=[];if(_0x23a276[_0x29780d(0x1c0)+'e']()==='all')_0x855b7e=await _0x3f1413['getUniqueJ'+_0x29780d(0x1f7)]();else{const _0x366292=await _0x3f1413[_0x29780d(0x248)+'e'](_0x23a276);if(_0x366292)_0x855b7e=[_0x366292];else{if(_0x23a276[_0x29780d(0x22c)]('@'))_0x855b7e=[_0x3f1413[_0x29780d(0x186)+'oUserJid'](_0x23a276)];else{await sendText(_0x4508ee,'Unknown\x20gp'+'\x20alias:\x20'+_0x23a276);return;}}}const _0x53174e=_0x670055==='on';let _0x40e074=0x2cf+0x163+-0x432;for(const _0x5209fc of _0x855b7e){const _0x382e65=await getLeaveFromDb(_0x5209fc);if(!_0x382e65)continue;if(await setLeaveEnabled(_0x5209fc,_0x53174e))_0x40e074++;}await sendText(_0x4508ee,_0x29780d(0x207)+(_0x53174e?'enabled':'disabled')+'\x20for\x20'+_0x40e074+'/'+_0x855b7e[_0x29780d(0x198)]);return;}if(_0x670055===_0x29780d(0x240)){const _0xf27f40=_0x425645[_0x29780d(0x1b0)](/\bgp[:\s]+(\S+)/i);if(!_0xf27f40){await sendText(_0x4508ee,_0x29780d(0x1da)+_0x29780d(0x18a)+_0x29780d(0x1ee));return;}const _0x25be38=_0xf27f40[0x14*0x8b+-0x11*-0x158+-0x21b3*0x1]['trim']();let _0x5677cf=[];if(_0x25be38[_0x29780d(0x1c0)+'e']()==='all')_0x5677cf=await _0x3f1413[_0x29780d(0x185)+_0x29780d(0x1f7)]();else{const _0x608fa0=await _0x3f1413[_0x29780d(0x248)+'e'](_0x25be38);if(_0x608fa0)_0x5677cf=[_0x608fa0];else{if(_0x25be38['includes']('@'))_0x5677cf=[_0x3f1413['normalizeT'+'oUserJid'](_0x25be38)];else{await sendText(_0x4508ee,_0x29780d(0x1b2)+_0x29780d(0x22d)+_0x25be38);return;}}}let _0xee6499=_0x3f6771[_0x29780d(0x1af)]();_0xee6499=_0xee6499['split'](/\r?\n/)[_0x29780d(0x214)](_0x217906=>!/^gp[:\s]/i[_0x29780d(0x24f)](_0x217906))[_0x29780d(0x232)]('\x0a')[_0x29780d(0x1af)]();if(!_0xee6499){await sendText(_0x4508ee,_0x29780d(0x1e9)+_0x29780d(0x203)+'dy');return;}let _0x48d7d7=-0x91e+-0x16cb+-0x1fe9*-0x1;for(const _0x3c132f of _0x5677cf)if(await saveLeaveToDb(_0x3c132f,_0xee6499,0xfdf*-0x2+0x1*0x1174+0x1*0xe4b))_0x48d7d7++;await sendText(_0x4508ee,'✅\x20Saved\x20'+_0x48d7d7+'/'+_0x5677cf['length']);return;}return;}if(_0x113145){const _0x36919e=await isadmin(botRef,_0x4bc059)[_0x29780d(0x1c8)](()=>![]);if(!_0x36919e)return;const _0x52859f=String((_0x5e97f8||'')[_0x29780d(0x1a7)]('@')[-0x1d7+-0x351*0x7+0x190e]||''),_0x1bb7a0=await getDefault(_0x52859f)['catch'](()=>null);if(!_0x1bb7a0){await sendText(_0x3fa669,_0x29780d(0x1c2)+_0x29780d(0x1bb)+'n');return;}const _0x46ed45=Array['isArray'](_0x1bb7a0)?_0x1bb7a0:[_0x1bb7a0],_0x3f60e9=[];for(const _0x23c0a3 of _0x46ed45){const _0x2452cd=await getConnection(_0x23c0a3)[_0x29780d(0x1c8)](()=>null);if(Array[_0x29780d(0x1e7)](_0x2452cd))_0x3f60e9[_0x29780d(0x1ff)](..._0x2452cd);else{if(_0x2452cd)_0x3f60e9[_0x29780d(0x1ff)](_0x2452cd);}}if(!_0x3f60e9['length']){await sendText(_0x3fa669,_0x29780d(0x1d6)+_0x29780d(0x1c4)+_0x29780d(0x231)+_0x29780d(0x1e8));return;}if(_0x670055==='on'||_0x670055==='off'){const _0x4ad335=_0x670055==='on';let _0x997a78=0x17e9+0x174*0x10+-0x2f29*0x1;for(const _0x386232 of _0x3f60e9){const _0x2e552a=await getLeaveFromDb(_0x386232);if(!_0x2e552a)continue;if(await setLeaveEnabled(_0x386232,_0x4ad335))_0x997a78++;}await sendText(_0x3fa669,_0x29780d(0x207)+(_0x4ad335?'enabled':_0x29780d(0x196))+_0x29780d(0x1a3)+_0x997a78+'/'+_0x3f60e9['length']);return;}if(_0x670055==='add'){const _0x3bc173=_0x3f6771[_0x29780d(0x1af)]();if(!_0x3bc173){await sendText(_0x3fa669,_0x29780d(0x19c)+_0x29780d(0x235));return;}let _0x5bb989=-0xe51*-0x1+0x2668+-0x34b9;for(const _0x3d344f of _0x3f60e9)if(await saveLeaveToDb(_0x3d344f,_0x3bc173,0x1*0x16a9+-0x5ca+-0x10de*0x1))_0x5bb989++;await sendText(_0x3fa669,_0x29780d(0x1c7)+_0x5bb989+'/'+_0x3f60e9[_0x29780d(0x198)]);return;}}}catch(_0x1426fc){error(_0x1426fc,_0x29780d(0x246)+_0x29780d(0x1eb)+_0x29780d(0x1df)+(_0x1426fc?.[_0x29780d(0x1f3)]||_0x1426fc));}}let _managedRegistered=![];export async function initialize(_0x37072e){const _0x233dac=_0x7e4203;if(!_0x37072e)throw new Error(_0x233dac(0x1a9)+_0x233dac(0x1e5)+_0x233dac(0x245)+_0x233dac(0x1d4));botRef=_0x37072e,setupSendApi(),await ensureSchema();try{await startLogWatcher();}catch(_0x5678a8){warn('[leave]\x20st'+_0x233dac(0x236)+_0x233dac(0x219)+_0x233dac(0x1aa)+_0x233dac(0x228)+(_0x5678a8?.['message']||_0x5678a8));}try{typeof startManagedListener===_0x233dac(0x1cf)&&(startManagedListener({'botRef':_0x37072e,'eventName':_0x233dac(0x18c),'handler':async()=>{const _0x37c4b8=_0x233dac;try{if(!tail)await startLogWatcher();}catch(_0x50949b){warn('[leave]\x20ma'+_0x37c4b8(0x213)+_0x37c4b8(0x19b)+_0x37c4b8(0x20b)+(_0x50949b?.[_0x37c4b8(0x1f3)]||_0x50949b));}},'moduleName':name}),_managedRegistered=!![],info(_0x233dac(0x178)+'gistered\x20w'+'ith\x20listen'+_0x233dac(0x179)));}catch(_0x2bdd8a){warn(_0x233dac(0x17c)+_0x233dac(0x223)+_0x233dac(0x1b5)+_0x233dac(0x21a)+'Manager:\x20'+(_0x2bdd8a?.['message']||_0x2bdd8a)),_managedRegistered=![];}info('[leave]\x20in'+_0x233dac(0x1b9)+_0x233dac(0x202)+'ng\x20leave\x20l'+'og.');}export async function cleanup(){const _0x5da0b9=_0x7e4203;try{try{if(_managedRegistered&&typeof stopManagedListener===_0x5da0b9(0x1cf)){try{stopManagedListener(name,'leave.log');}catch(_0x5e4811){try{stopManagedListener(name);}catch(_0xed3f48){warn(_0x5da0b9(0x24a)+_0x5da0b9(0x1c5)+'istener\x20at'+'tempts\x20fai'+'led:\x20'+(_0xed3f48?.['message']||_0x5e4811));}}info(_0x5da0b9(0x24a)+'opManagedL'+_0x5da0b9(0x1d5)+_0x5da0b9(0x20a));}}catch(_0x2a31fe){warn(_0x5da0b9(0x192)+'eanup\x20erro'+'r\x20calling\x20'+_0x5da0b9(0x1d3)+_0x5da0b9(0x1be)+'\x20'+(_0x2a31fe?.[_0x5da0b9(0x1f3)]||_0x2a31fe));}try{stopLogWatcher();}catch(_0x58c3fc){warn(_0x5da0b9(0x24a)+'opLogWatch'+_0x5da0b9(0x19e)+_0x5da0b9(0x18f)+(_0x58c3fc?.[_0x5da0b9(0x1f3)]||_0x58c3fc));}}catch(_0x49902e){error(_0x49902e,'[leave]\x20cl'+_0x5da0b9(0x1f5)+'r:\x20'+(_0x49902e?.['message']||_0x49902e));}finally{eventQueue[_0x5da0b9(0x198)]=0x1635+0x2*-0xdad+0x525,isProcessingQueue=![],processedIds[_0x5da0b9(0x1f1)](),botRef=null,sendApi=null,info(_0x5da0b9(0x192)+_0x5da0b9(0x1a8));}}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};