const _0x24faf1=_0xfd91;(function(_0xccbe50,_0x4e324a){const _0x5a3e91=_0xfd91,_0x5b6d10=_0xccbe50();while(!![]){try{const _0x28b0a6=parseInt(_0x5a3e91(0x18d))/(0x1*0x1643+0x1*-0x1fc9+0x987)*(-parseInt(_0x5a3e91(0x191))/(0x250f+0xe*-0x56+0x27d*-0xd))+-parseInt(_0x5a3e91(0x144))/(-0x10d*-0x15+0x9*0x291+-0x2d27)+-parseInt(_0x5a3e91(0x151))/(0x1da*-0x12+-0x2056+0x41ae)*(-parseInt(_0x5a3e91(0x127))/(-0x1c6b+0x1709*0x1+-0x3*-0x1cd))+parseInt(_0x5a3e91(0x11f))/(0x25*-0xfd+0x42c*0x9+-0x7*0x23)*(parseInt(_0x5a3e91(0x140))/(-0x43*-0x5f+-0xd32+-0x5*0x254))+parseInt(_0x5a3e91(0x177))/(0xdf3*-0x1+0x3c5*0x9+-0x353*0x6)+parseInt(_0x5a3e91(0xf2))/(-0xc9+-0x24e*-0xe+-0x1f72)*(parseInt(_0x5a3e91(0x138))/(-0x2e*-0x2+0x1094*0x1+-0x10e6))+parseInt(_0x5a3e91(0x1af))/(-0x333+-0x2*-0xc01+-0x14c4)*(-parseInt(_0x5a3e91(0x185))/(-0x109e+0x1d4f+-0x437*0x3));if(_0x28b0a6===_0x4e324a)break;else _0x5b6d10['push'](_0x5b6d10['shift']());}catch(_0x1ee77f){_0x5b6d10['push'](_0x5b6d10['shift']());}}}(_0xa3f0,-0x73421*-0x2+0x13a17*-0x9+0x25f*0x240));import _0x19f640 from'path';import _0x4e361b from'fs/promises';import{Tail}from'tail';import{info,warn,error}from'../utils/logger.js';function _0xa3f0(){const _0x4b4240=['No\x20default','resolve\x20de','string','1127xLbfow','\x20\x20\x20\x20\x20\x20\x20\x20en','resolveNam','groupId','212631Meyhyz','_jid\x20=\x20?','\x20TEXT\x20NOT\x20','[leave]\x20ma','\x20message\x20\x20','bled,\x0a\x20\x20\x20\x20','iled\x20to\x20re','LUES\x20(?,\x20?','ndApi\x20fail','ated_at\x20IN','veLeaveToD','leave',');\x0a\x20\x20','252744leLsmp','.log','key','itialize\x20r','oUserJid','endsWith','\x20schema\x20en','rror:\x20','dings\x20erro','now','groupMetad','from','ler\x20start\x20','ated_at;','[leave]\x20ha','led\x20FROM\x20l','normalizeT','participan','isArray','✅\x20Saved\x20','lvc','Db\x20failed\x20','parse','lled','r\x20calling\x20','cluded.upd','ves\x20SET\x20en','enabled','tLeaveFrom','the\x20group','equires\x20bo','getUniqueJ','[leave]\x20sa','ed_at\x20=\x20ex','tLeaveEnab','\x20for\x20','group','e\x20gp:<alia','7641192pYsiJw','join','S\x20leaves\x20(','\x20group\x20ent','arted\x20tail','remove','ata','\x0a\x20\x20\x20\x20CREAT','ed\x20for\x20','led\x20failed','unwatch','DELETE\x20FRO','✅\x20Deleted\x20','artLogWatc','21480hBFbke','type','leave.log','E\x20TABLE\x20IF','ing','t_pn','group_jid,','dellvc','257zBlRbH','opped\x20tail','T\x0a\x20\x20\x20\x20\x20\x20\x20\x20','all','7996zoyBYV','leave_join','ndler\x20fail','[leave]\x20re','k\x20failed:\x20','\x20updated_a','istener\x20at','NFLICT(gro','✅\x20Leave\x20','[leave]\x20st','exec','HERE\x20group','isCommand','[leave]\x20se','tchFromFin','ng):\x20','[leave]\x20in','test','er\x20fallbac','istener\x20ca','eaves\x20WHER','\x20UPDATE\x20SE','line','sage,\x20enab','size','writeFile','r:\x20','opManagedL','toLowerCas','\x20message\x20=','7546Enlzbu','sendMessag','fromMe','b\x20failed\x20f','available','gister\x20wit','ries.','slice','cluded.ena','\x20alias:\x20','run','subject','erManager','ndApi\x20not\x20','[leave]\x20cl','ng\x20leave\x20l','M\x20leaves\x20W','function','for\x20','or\x20','tmp','nopart','ed:\x20','data','s|jid|all>','\x20\x20INTEGER\x20','Empty\x20mess','PM:\x20includ','ng\x20','sured','rse\x20log\x20li','index','failed:\x20','og.','jid','error','@g.us','ids','trim','DEFAULT\x200,','9ezYkeU','up_jid\x20TEX','enabled,\x20u','pdated_at)','abled\x20=\x20ex','naged\x20hand','replace','[leave]\x20fi','floor','remoteJid','action','ror:\x20','timestamp','TEGER\x20DEFA','object','E\x20group_ji','opLogWatch','ne\x20(skippi','message','aryLeave\x20e','stopManage','age\x20body','Message\x20er','Unknown\x20gp','map','includes','push','\x0a\x20\x20\x20\x20\x20\x20\x20VA','ith\x20listen','disabled','clear','\x20message,\x20','match','sender','sock','itialize:\x20','ULT\x200\x0a\x20\x20\x20\x20','message,\x0a\x20','off','r-event\x20ha','length','eanup\x20erro','\x20\x20\x20\x20\x20updat','message\x20bo','ing\x20','28686sQsEMj','[leave]\x20Ta','get','er\x20error:\x20','\x20connectio','\x0a\x20\x20\x20\x20\x20\x20upd','\x20NOT\x20EXIST','mentions','65IPobbF','gistered\x20w','itialized\x20','has','changes','add','NULL,\x0a\x20\x20\x20\x20','O\x20leaves\x20(','[leave]\x20DB','split','filter','\x20\x20enabled\x20','nogroup','ections','\x20during\x20in','t\x20=\x20?\x20WHER','led:\x20','3501580zrkGAy','fault\x20conn','catch','romDb\x20fail','[leave]\x20fa'];_0xa3f0=function(){return _0x4b4240;};return _0xa3f0();}import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{getBotJid}from'../utils/bot-state.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import*as _0x11f21b from'../utils/groups.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';function _0xfd91(_0x37e1a8,_0x4b9dc4){const _0x32066d=_0xa3f0();return _0xfd91=function(_0x104c59,_0x2a5de8){_0x104c59=_0x104c59-(0x280+0x1c8a+0xd*-0x253);let _0x18c3e5=_0x32066d[_0x104c59];return _0x18c3e5;},_0xfd91(_0x37e1a8,_0x4b9dc4);}export const name=_0x24faf1(0x14f);export const version='4.2.6';export const priority=-0x45c+-0x12c8+0x1760;export const commands=[_0x24faf1(0x165),_0x24faf1(0x18c)];const LOG_FILE_PATH=_0x19f640[_0x24faf1(0x178)](process['cwd'](),_0x24faf1(0xe1),_0x24faf1(0xde),_0x24faf1(0x192)+_0x24faf1(0x152));let botRef=null,sendApi=null,tail=null;const eventQueue=[];let isProcessingQueue=![];const PROCESS_INTERVAL_MS=-0x3d*-0x79+-0x172a+-0x3b7,processedIds=new Set();function shortLocalFromJid(_0x5a2be7){const _0x3fb2c1=_0x24faf1;try{return String(_0x5a2be7||'')[_0x3fb2c1(0x130)]('@')[-0x22f5+0x2646+0x11b*-0x3];}catch{return _0x5a2be7;}}function eventUniqueId(_0x3ed35b){const _0xd402f0=_0x24faf1;if(!_0x3ed35b)return null;if(_0x3ed35b['id'])return String(_0x3ed35b['id']);return String(_0x3ed35b[_0xd402f0(0x143)]||_0x3ed35b[_0xd402f0(0x175)]||_0xd402f0(0x133))+':'+String(_0x3ed35b[_0xd402f0(0x162)+_0xd402f0(0x18a)]||_0x3ed35b[_0xd402f0(0x162)+'t']||_0xd402f0(0xdf))+':'+String(_0x3ed35b[_0xd402f0(0xfe)]||_0x3ed35b['ts']||Date[_0xd402f0(0x15a)]());}function trimProcessedSet(){const _0x38238a=_0x24faf1;if(processedIds[_0x38238a(0x1a9)]>0x3ab+0xe*0x161+-0x371*0x1){const _0x2dc9c9=Array[_0x38238a(0x15c)](processedIds);processedIds[_0x38238a(0x110)]();for(const _0x240b0e of _0x2dc9c9[_0x38238a(0x1b6)](-(-0x1*-0x1041+0xf*0x14b+-0x17ee*0x1)))processedIds[_0x38238a(0x12c)](_0x240b0e);}}async function ensureSchema(){const _0x33dea4=_0x24faf1;await db[_0x33dea4(0x19b)](_0x33dea4(0x17e)+_0x33dea4(0x188)+_0x33dea4(0x125)+_0x33dea4(0x179)+'\x0a\x20\x20\x20\x20\x20\x20gro'+_0x33dea4(0xf3)+'T\x20PRIMARY\x20'+'KEY,\x0a\x20\x20\x20\x20\x20'+_0x33dea4(0x148)+_0x33dea4(0x146)+_0x33dea4(0x12d)+_0x33dea4(0x132)+_0x33dea4(0xe3)+_0x33dea4(0xf1)+_0x33dea4(0x124)+_0x33dea4(0x14d)+_0x33dea4(0xff)+_0x33dea4(0x116)+_0x33dea4(0x150)),info(_0x33dea4(0x12f)+_0x33dea4(0x157)+_0x33dea4(0xe7));}async function saveLeaveToDb(_0x28df95,_0x36ffab,_0x7dd235=-0x1eb4+-0x2*0x567+0x2982){const _0x115653=_0x24faf1;try{const _0x1805a3=Math[_0x115653(0xfa)](Date[_0x115653(0x15a)]()/(0x20b5+0xf86+-0x2c53));return await db[_0x115653(0xd4)]('INSERT\x20INT'+_0x115653(0x12e)+_0x115653(0x18b)+_0x115653(0x111)+_0x115653(0xf4)+_0x115653(0xf5)+_0x115653(0x10d)+_0x115653(0x14b)+',\x20?,\x20?)\x0a\x20\x20'+'\x20\x20\x20\x20\x20ON\x20CO'+_0x115653(0x198)+'up_jid)\x20DO'+_0x115653(0x1a6)+_0x115653(0x18f)+_0x115653(0x1ae)+'\x20excluded.'+_0x115653(0x117)+_0x115653(0x141)+_0x115653(0xf6)+_0x115653(0x1b7)+_0x115653(0x149)+_0x115653(0x11c)+_0x115653(0x172)+_0x115653(0x16a)+_0x115653(0x15e),[_0x28df95,String(_0x36ffab||''),Number(_0x7dd235?0xe4f+-0x65b*0x4+0x58f*0x2:0x22*-0x10f+-0x35b+0x1*0x2759),_0x1805a3]),!![];}catch(_0x427c7a){return warn(_0x115653(0x171)+_0x115653(0x14e)+_0x115653(0x1b2)+_0x115653(0xdd)+_0x28df95+':\x20'+(_0x427c7a?.[_0x115653(0x104)]||_0x427c7a)),![];}}async function deleteLeaveFromDb(_0x52cbdd){const _0xc27394=_0x24faf1;try{const _0x25090c=await db['run'](_0xc27394(0x182)+_0xc27394(0xda)+_0xc27394(0x19c)+_0xc27394(0x145),[_0x52cbdd]);return _0x25090c?.[_0xc27394(0x12b)]||0xdf2+-0x3*-0xccf+-0x7b*0x6d;}catch(_0xaf99aa){return warn('[leave]\x20de'+'leteLeaveF'+_0xc27394(0x13b)+_0xc27394(0x17f)+_0x52cbdd+':\x20'+(_0xaf99aa?.[_0xc27394(0x104)]||_0xaf99aa)),0x25bc+-0x79b*-0x1+0x35*-0xdb;}}async function getLeaveFromDb(_0x197008){const _0x28223f=_0x24faf1;try{const _0x542c8f=await db[_0x28223f(0x121)]('SELECT\x20mes'+_0x28223f(0x1a8)+_0x28223f(0x160)+_0x28223f(0x1a5)+'E\x20group_ji'+'d\x20=\x20?',[_0x197008]);if(!_0x542c8f)return null;return{'message':_0x542c8f[_0x28223f(0x104)],'enabled':Number(_0x542c8f[_0x28223f(0x16c)]||-0xe2*0x12+-0x511*-0x1+-0xad3*-0x1)===-0x14bd+0x2217+0x473*-0x3};}catch(_0x2a2e83){return warn('[leave]\x20ge'+_0x28223f(0x16d)+_0x28223f(0x166)+_0x28223f(0xdc)+_0x197008+':\x20'+(_0x2a2e83?.[_0x28223f(0x104)]||_0x2a2e83)),null;}}async function setLeaveEnabled(_0xc270b6,_0x14b9c7){const _0x396b6d=_0x24faf1;try{const _0x3432df=Math[_0x396b6d(0xfa)](Date[_0x396b6d(0x15a)]()/(-0x12e1+-0x3*-0xce9+-0xff2)),_0x7b7d88=await db['run']('UPDATE\x20lea'+_0x396b6d(0x16b)+'abled\x20=\x20?,'+_0x396b6d(0x196)+_0x396b6d(0x136)+_0x396b6d(0x101)+'d\x20=\x20?',[Number(_0x14b9c7?-0x18d6+0xd*0x282+0x1*-0x7c3:0x8bd*0x4+0x1*0x24d9+-0x47cd),_0x3432df,_0xc270b6]);return!!_0x7b7d88?.['changes'];}catch(_0x4b9cd7){return warn(_0x396b6d(0x19e)+_0x396b6d(0x173)+_0x396b6d(0x180)+'\x20for\x20'+_0xc270b6+':\x20'+(_0x4b9cd7?.[_0x396b6d(0x104)]||_0x4b9cd7)),![];}}function setupSendApi(){const _0x51ad07=_0x24faf1;if(!botRef)return;if(typeof botRef['sendMessag'+'e']===_0x51ad07(0xdb))sendApi=async(_0x52832f,_0x2f0a94)=>await botRef[_0x51ad07(0x1b0)+'e'](_0x52832f,_0x2f0a94);else{if(botRef['sock']&&typeof botRef[_0x51ad07(0x114)][_0x51ad07(0x1b0)+'e']===_0x51ad07(0xdb))sendApi=async(_0x24b43b,_0x38768f)=>await botRef[_0x51ad07(0x114)][_0x51ad07(0x1b0)+'e'](_0x24b43b,_0x38768f);else sendApi=null;}}async function sendText(_0x126f64,_0x2a8360,_0x698772=[]){const _0x51c6d3=_0x24faf1;try{if(!_0x126f64)return null;if(!sendApi)return warn('[leave]\x20se'+_0x51c6d3(0xd7)+_0x51c6d3(0x1b3)),null;let _0x98a72f=typeof _0x2a8360==='string'?{'text':String(_0x2a8360)}:{..._0x2a8360||{}};if(Array['isArray'](_0x698772)&&_0x698772['length'])_0x98a72f[_0x51c6d3(0x126)]=_0x698772;return await sendApi(_0x126f64,_0x98a72f);}catch(_0x477e88){return warn('[leave]\x20se'+_0x51c6d3(0x14c)+'ed\x20to\x20'+_0x126f64+':\x20'+(_0x477e88?.[_0x51c6d3(0x104)]||_0x477e88)),null;}}async function findStoredMatchFromFindings(_0x4ca303=[]){const _0x5e68b5=_0x24faf1;try{const _0x6d9bd6=await listSudo();if(!Array[_0x5e68b5(0x163)](_0x6d9bd6)||_0x6d9bd6[_0x5e68b5(0x11a)]===-0x102d+-0x355*0x4+0x1d81)return null;const _0x1ba6cf=new Set(_0x6d9bd6[_0x5e68b5(0x10a)](String));for(const _0x5e8907 of _0x4ca303||[]){if(!_0x5e8907||typeof _0x5e8907[_0x5e68b5(0xec)]!==_0x5e68b5(0x13f))continue;const _0x1fc17d=normalizeToJid?normalizeToJid(_0x5e8907[_0x5e68b5(0xec)]):_0x5e8907[_0x5e68b5(0xec)];if(_0x1fc17d&&_0x1ba6cf['has'](_0x1fc17d))return _0x1fc17d;if(_0x1ba6cf[_0x5e68b5(0x12a)](_0x5e8907[_0x5e68b5(0xec)]))return _0x5e8907[_0x5e68b5(0xec)];const _0x4d5071=String(_0x5e8907['jid'])[_0x5e68b5(0x130)]('@')[-0x1c1b+-0x1f3f+0x3b5a][_0x5e68b5(0x130)](':')[-0x1*0x8c3+0x29*0xe+0x685];if(_0x4d5071)for(const _0x44e66d of _0x6d9bd6){const _0x35b63c=String(_0x44e66d)['split']('@')[-0xf7*-0x17+0x2e*0x2f+-0x1f*0xfd];if(_0x35b63c&&_0x35b63c===_0x4d5071)return _0x44e66d;}}return null;}catch(_0x369be0){return warn(_0x5e68b5(0xf9)+'ndStoredMa'+_0x5e68b5(0x19f)+_0x5e68b5(0x159)+_0x5e68b5(0x1ab)+(_0x369be0?.['message']||_0x369be0)),null;}}async function handleVoluntaryLeave(_0x5bde0a){const _0x55a659=_0x24faf1;try{if(!_0x5bde0a||typeof _0x5bde0a!==_0x55a659(0x100))return;const _0xaf6814=_0x5bde0a[_0x55a659(0xfc)]===_0x55a659(0x17c),_0x3374e6=String(_0x5bde0a[_0x55a659(0x186)]||'')[_0x55a659(0x1ad)+'e']()[_0x55a659(0x10b)](_0x55a659(0x14f));if(!_0xaf6814&&!_0x3374e6)return;const _0x312060=_0x5bde0a[_0x55a659(0x162)+_0x55a659(0x18a)]||_0x5bde0a[_0x55a659(0x162)+'t'],_0x52f4d3=_0x5bde0a[_0x55a659(0x143)]||_0x5bde0a[_0x55a659(0x175)];if(!_0x312060||!_0x52f4d3)return;const _0x1e1dda=eventUniqueId(_0x5bde0a);if(!_0x1e1dda)return;if(processedIds['has'](_0x1e1dda))return;processedIds[_0x55a659(0x12c)](_0x1e1dda),trimProcessedSet();const _0x413749=getBotJid?getBotJid():null;if(_0x413749&&String(_0x312060)===String(_0x413749))return;const _0x15b554=await getLeaveFromDb(_0x52f4d3);if(!_0x15b554||!_0x15b554['enabled']||!_0x15b554[_0x55a659(0x104)])return;let _0x49a3b9=_0x55a659(0x16e);try{if(botRef&&botRef[_0x55a659(0x114)]&&typeof botRef['sock'][_0x55a659(0x15b)+_0x55a659(0x17d)]==='function'){const _0x10ffc9=await botRef[_0x55a659(0x114)][_0x55a659(0x15b)+_0x55a659(0x17d)](_0x52f4d3)[_0x55a659(0x13a)](()=>null);if(_0x10ffc9&&_0x10ffc9[_0x55a659(0xd5)])_0x49a3b9=_0x10ffc9[_0x55a659(0xd5)];}}catch(_0x49227d){}const _0x37aea9=String(_0x15b554[_0x55a659(0x104)]||'')[_0x55a659(0xf8)](/\{group\}/g,_0x49a3b9)[_0x55a659(0xf8)](/\{user\}/g,shortLocalFromJid(_0x312060));await sendText(_0x312060,_0x37aea9,[_0x312060]),info(_0x55a659(0x19e)+'nt\x20DM\x20to\x20'+_0x312060+('\x20for\x20leavi'+_0x55a659(0xe6))+_0x52f4d3);}catch(_0x7a690a){error(_0x7a690a,_0x55a659(0x15f)+'ndleVolunt'+_0x55a659(0x105)+_0x55a659(0x158)+(_0x7a690a?.[_0x55a659(0x104)]||_0x7a690a));}}async function processQueue(){const _0x4c19a0=_0x24faf1;if(isProcessingQueue||eventQueue['length']===0xb1*-0x9+-0x1d88+-0x9*-0x3f9)return;isProcessingQueue=!![];try{while(eventQueue[_0x4c19a0(0x11a)]>-0x208*0x1+0x1a47+0x3*-0x815){const _0x38fa97=eventQueue['shift']();try{await handleVoluntaryLeave(_0x38fa97);}catch(_0x2d409b){warn('[leave]\x20pe'+_0x4c19a0(0x119)+_0x4c19a0(0x193)+_0x4c19a0(0xe0)+(_0x2d409b?.[_0x4c19a0(0x104)]||_0x2d409b));}if(eventQueue[_0x4c19a0(0x11a)]>0x8*0x450+0x4*-0x24e+0x652*-0x4)await new Promise(_0x386356=>setTimeout(_0x386356,PROCESS_INTERVAL_MS));}}finally{isProcessingQueue=![];}}async function startLogWatcher(){const _0x43bdf8=_0x24faf1;try{await _0x4e361b[_0x43bdf8(0x1aa)](LOG_FILE_PATH,'',{'flag':'a'})[_0x43bdf8(0x13a)](()=>{});try{if(tail&&typeof tail[_0x43bdf8(0x181)]==='function')tail[_0x43bdf8(0x181)]();}catch(_0x369110){}tail=new Tail(LOG_FILE_PATH,{'fromBeginning':![],'follow':!![]}),tail['on'](_0x43bdf8(0x1a7),_0x2c3d5a=>{const _0x29f5af=_0x43bdf8;try{if(!_0x2c3d5a||!_0x2c3d5a[_0x29f5af(0xf0)]())return;const _0x1a441f=JSON[_0x29f5af(0x167)](_0x2c3d5a);eventQueue['push'](_0x1a441f);if(!isProcessingQueue)processQueue();}catch(_0x26d129){warn('[leave]\x20Co'+'uld\x20not\x20pa'+_0x29f5af(0xe8)+_0x29f5af(0x103)+_0x29f5af(0x1a0)+String(_0x2c3d5a)['slice'](-0x59f*0x2+-0x1*-0x1c3f+-0x1101,-0xc+0xbf+-0x1*-0x15));}}),tail['on'](_0x43bdf8(0xed),_0x4189c0=>error(_0x4189c0,_0x43bdf8(0x120)+'il\x20error')),info(_0x43bdf8(0x19a)+_0x43bdf8(0x17b)+_0x43bdf8(0x11e)+LOG_FILE_PATH);}catch(_0x1631f6){error(_0x1631f6,'[leave]\x20st'+'artLogWatc'+'her\x20failed');}}function stopLogWatcher(){const _0x3ed4c0=_0x24faf1;try{if(tail&&typeof tail['unwatch']==='function')tail['unwatch']();tail=null,info(_0x3ed4c0(0x19a)+_0x3ed4c0(0x18e)+_0x3ed4c0(0x189));}catch(_0x52ef3c){warn(_0x3ed4c0(0x19a)+_0x3ed4c0(0x102)+_0x3ed4c0(0x122)+(_0x52ef3c?.[_0x3ed4c0(0x104)]||_0x52ef3c));}}function findLvcSubcommand(_0x24ea69){const _0x2387f5=_0x24faf1,_0x43a856=String(_0x24ea69||''),_0x490be9=_0x43a856['match'](/\blvc\s+([^\s\r\n]+)/i);if(!_0x490be9)return{'sub':null,'after':''};const _0x524764=_0x490be9[-0x175*0xd+0x1557+-0x265]['toLowerCas'+'e'](),_0xc23e06=_0x43a856[_0x2387f5(0x1b6)](_0x490be9[_0x2387f5(0xe9)]+_0x490be9[-0x357+0x1367+-0x808*0x2][_0x2387f5(0x11a)])[_0x2387f5(0xf8)](/^[\s:\-]*/,'');return{'sub':_0x524764,'after':_0xc23e06};}export async function onMessage(_0x243638){const _0x588968=_0x24faf1;try{if(!_0x243638||!_0x243638[_0x588968(0x19d)])return;const _0x38a331=_0x243638['key']?.[_0x588968(0xfb)]||_0x243638[_0x588968(0xfb)]||'',_0x23c31f=typeof _0x38a331===_0x588968(0x13f)&&_0x38a331[_0x588968(0x156)](_0x588968(0xee)),_0x3ebcc6=_0x243638[_0x588968(0x153)]?.[_0x588968(0x162)+'t']||_0x243638[_0x588968(0x153)]?.[_0x588968(0x15c)]||_0x243638[_0x588968(0x113)]||'',_0x380f36=(_0x243638['text']||'')[_0x588968(0xf8)](/\r/g,'');if(!(/\blvc\b/i[_0x588968(0x1a2)](_0x380f36)||/\bdellvc\b/i['test'](_0x380f36)))return;if(/\bdellvc\b/i['test'](_0x380f36)){if(!_0x23c31f){const _0x1ba59a=Boolean(_0x243638['key']?.[_0x588968(0x1b1)]);let _0x10de3a=null;if(_0x1ba59a)_0x10de3a=getBotJid();else{let _0x4249ad=![];try{_0x4249ad=await isSudo(botRef,_0x243638);}catch(_0x3eb0ae){_0x4249ad=![];}if(!_0x4249ad)return;const _0x3eb389=userJidFromCtx(_0x243638)||{'findings':[]},_0x5db854=await findStoredMatchFromFindings(_0x3eb389['findings']||[]);if(!_0x5db854)return;_0x10de3a=_0x5db854;}const _0x2b5fb7=_0x380f36[_0x588968(0x112)](/\bgp[:\s]+(\S+)/i);if(!_0x2b5fb7){await sendText(_0x10de3a,_0x588968(0xe5)+'e\x20gp:<alia'+'s|jid|all>');return;}const _0x1c7ce9=_0x2b5fb7[-0x2218*0x1+-0x1bd5+-0x3dee*-0x1][_0x588968(0xf0)]();let _0x513a69=[];if(_0x1c7ce9[_0x588968(0x1ad)+'e']()===_0x588968(0x190))_0x513a69=await _0x11f21b[_0x588968(0x170)+'ids']();else{const _0x391df8=await _0x11f21b[_0x588968(0x142)+'e'](_0x1c7ce9);if(_0x391df8)_0x513a69=[_0x391df8];else{if(_0x1c7ce9[_0x588968(0x10b)]('@'))_0x513a69=[_0x11f21b['normalizeT'+_0x588968(0x155)](_0x1c7ce9)];else{await sendText(_0x10de3a,_0x588968(0x109)+'\x20alias:\x20'+_0x1c7ce9);return;}}}let _0x4ea8c9=0x827*-0x3+0x2435+-0x8*0x178;for(const _0x555f02 of _0x513a69)_0x4ea8c9+=await deleteLeaveFromDb(_0x555f02)||-0x1*-0x565+-0x936+-0x3d1*-0x1;await sendText(_0x10de3a,_0x588968(0x183)+_0x4ea8c9+'/'+_0x513a69[_0x588968(0x11a)]+(_0x588968(0x17a)+_0x588968(0x1b5)));return;}const _0xe085ee=await isadmin(botRef,_0x243638)[_0x588968(0x13a)](()=>![]);if(!_0xe085ee)return;const _0x2eaf22=String((_0x3ebcc6||'')[_0x588968(0x130)]('@')[-0xea5*0x1+0xdf5+0xb0]||''),_0x370670=await getDefault(_0x2eaf22)[_0x588968(0x13a)](()=>null);if(!_0x370670){await sendText(_0x38a331,_0x588968(0x13d)+_0x588968(0x123)+'n');return;}const _0x3b4b5b=Array[_0x588968(0x163)](_0x370670)?_0x370670:[_0x370670],_0x238930=[];for(const _0xe3a8e3 of _0x3b4b5b){const _0x28d557=await getConnection(_0xe3a8e3)['catch'](()=>null);if(Array[_0x588968(0x163)](_0x28d557))_0x238930['push'](..._0x28d557);else{if(_0x28d557)_0x238930[_0x588968(0x10c)](_0x28d557);}}let _0xac8a58=0x4f*-0x7+-0x1b45+0x1d6e;for(const _0x30e809 of _0x238930)_0xac8a58+=await deleteLeaveFromDb(_0x30e809)||-0x263c+0xc93+0x19a9;await sendText(_0x38a331,_0x588968(0x183)+_0xac8a58+'/'+_0x238930[_0x588968(0x11a)]+(_0x588968(0x17a)+'ries.'));return;}const {sub:_0x91094f,after:_0x1fd45f}=findLvcSubcommand(_0x380f36);if(!_0x91094f)return;if(!_0x23c31f){const _0x1cc306=Boolean(_0x243638[_0x588968(0x153)]?.[_0x588968(0x1b1)]);let _0x184358=null;if(_0x1cc306)_0x184358=getBotJid();else{let _0x411c91=![];try{_0x411c91=await isSudo(botRef,_0x243638);}catch(_0x4387c9){_0x411c91=![];}if(!_0x411c91)return;const _0x51a7e1=userJidFromCtx(_0x243638)||{'findings':[]},_0x17c996=await findStoredMatchFromFindings(_0x51a7e1['findings']||[]);if(!_0x17c996)return;_0x184358=_0x17c996;}if(!_0x184358)return;if(_0x91094f==='on'||_0x91094f===_0x588968(0x118)){const _0x120b0a=_0x380f36['match'](/\bgp[:\s]+(\S+)/i);if(!_0x120b0a){await sendText(_0x184358,_0x588968(0xe5)+_0x588968(0x176)+_0x588968(0xe2));return;}const _0x328a3a=_0x120b0a[-0x2593*0x1+0xb6*0x17+0x1a*0xd1][_0x588968(0xf0)]();let _0x48ca81=[];if(_0x328a3a[_0x588968(0x1ad)+'e']()===_0x588968(0x190))_0x48ca81=await _0x11f21b[_0x588968(0x170)+_0x588968(0xef)]();else{const _0x495c13=await _0x11f21b['resolveNam'+'e'](_0x328a3a);if(_0x495c13)_0x48ca81=[_0x495c13];else{if(_0x328a3a[_0x588968(0x10b)]('@'))_0x48ca81=[_0x11f21b['normalizeT'+_0x588968(0x155)](_0x328a3a)];else{await sendText(_0x184358,_0x588968(0x109)+_0x588968(0xd3)+_0x328a3a);return;}}}const _0x2779d5=_0x91094f==='on';let _0xf458f1=0x5*-0x65c+0x546*0x6+0x1*0x28;for(const _0x5b719b of _0x48ca81){const _0x4c78b1=await getLeaveFromDb(_0x5b719b);if(!_0x4c78b1)continue;if(await setLeaveEnabled(_0x5b719b,_0x2779d5))_0xf458f1++;}await sendText(_0x184358,_0x588968(0x199)+(_0x2779d5?_0x588968(0x16c):'disabled')+_0x588968(0x174)+_0xf458f1+'/'+_0x48ca81[_0x588968(0x11a)]);return;}if(_0x91094f===_0x588968(0x12c)){const _0x207dcc=_0x380f36[_0x588968(0x112)](/\bgp[:\s]+(\S+)/i);if(!_0x207dcc){await sendText(_0x184358,_0x588968(0xe5)+'e\x20gp:<alia'+_0x588968(0xe2));return;}const _0x25d033=_0x207dcc[0xa6f*-0x1+-0x269d+-0x310d*-0x1]['trim']();let _0xf59bc6=[];if(_0x25d033[_0x588968(0x1ad)+'e']()===_0x588968(0x190))_0xf59bc6=await _0x11f21b['getUniqueJ'+_0x588968(0xef)]();else{const _0x231eeb=await _0x11f21b[_0x588968(0x142)+'e'](_0x25d033);if(_0x231eeb)_0xf59bc6=[_0x231eeb];else{if(_0x25d033[_0x588968(0x10b)]('@'))_0xf59bc6=[_0x11f21b[_0x588968(0x161)+_0x588968(0x155)](_0x25d033)];else{await sendText(_0x184358,_0x588968(0x109)+_0x588968(0xd3)+_0x25d033);return;}}}let _0x2b4b23=_0x1fd45f[_0x588968(0xf0)]();_0x2b4b23=_0x2b4b23[_0x588968(0x130)](/\r?\n/)[_0x588968(0x131)](_0x5881c7=>!/^gp[:\s]/i['test'](_0x5881c7))[_0x588968(0x178)]('\x0a')[_0x588968(0xf0)]();if(!_0x2b4b23){await sendText(_0x184358,'PM:\x20empty\x20'+_0x588968(0x11d)+'dy');return;}let _0x51a30e=-0x222f+0x1cce*-0x1+0x3efd;for(const _0x339f5b of _0xf59bc6)if(await saveLeaveToDb(_0x339f5b,_0x2b4b23,-0xd1*0x23+-0x16ed+-0x125*-0x2d))_0x51a30e++;await sendText(_0x184358,_0x588968(0x164)+_0x51a30e+'/'+_0xf59bc6['length']);return;}return;}if(_0x23c31f){const _0x5de623=await isadmin(botRef,_0x243638)[_0x588968(0x13a)](()=>![]);if(!_0x5de623)return;const _0x2bef62=String((_0x3ebcc6||'')['split']('@')[0x21fa+-0x1*-0x4d9+-0x3*0xcf1]||''),_0x5d4e46=await getDefault(_0x2bef62)[_0x588968(0x13a)](()=>null);if(!_0x5d4e46){await sendText(_0x38a331,_0x588968(0x13d)+'\x20connectio'+'n');return;}const _0x3dc1e1=Array[_0x588968(0x163)](_0x5d4e46)?_0x5d4e46:[_0x5d4e46],_0x2aeb11=[];for(const _0x149441 of _0x3dc1e1){const _0x3c23b5=await getConnection(_0x149441)['catch'](()=>null);if(Array['isArray'](_0x3c23b5))_0x2aeb11[_0x588968(0x10c)](..._0x3c23b5);else{if(_0x3c23b5)_0x2aeb11[_0x588968(0x10c)](_0x3c23b5);}}if(!_0x2aeb11[_0x588968(0x11a)]){await sendText(_0x38a331,'Could\x20not\x20'+_0x588968(0x13e)+_0x588968(0x139)+_0x588968(0x134));return;}if(_0x91094f==='on'||_0x91094f===_0x588968(0x118)){const _0x4d524c=_0x91094f==='on';let _0x3140a6=0x27*-0x6d+0x520+0xb7b;for(const _0x65cb03 of _0x2aeb11){const _0x54ba9a=await getLeaveFromDb(_0x65cb03);if(!_0x54ba9a)continue;if(await setLeaveEnabled(_0x65cb03,_0x4d524c))_0x3140a6++;}await sendText(_0x38a331,_0x588968(0x199)+(_0x4d524c?_0x588968(0x16c):_0x588968(0x10f))+_0x588968(0x174)+_0x3140a6+'/'+_0x2aeb11[_0x588968(0x11a)]);return;}if(_0x91094f===_0x588968(0x12c)){const _0x556503=_0x1fd45f[_0x588968(0xf0)]();if(!_0x556503){await sendText(_0x38a331,_0x588968(0xe4)+_0x588968(0x107));return;}let _0x4c5157=0x551+-0x6d9*-0x4+-0x20b5;for(const _0x473fcd of _0x2aeb11)if(await saveLeaveToDb(_0x473fcd,_0x556503,-0x4d4+-0xd4e*-0x2+-0x15c7))_0x4c5157++;await sendText(_0x38a331,_0x588968(0x164)+_0x4c5157+'/'+_0x2aeb11[_0x588968(0x11a)]);return;}}}catch(_0x46c1df){error(_0x46c1df,'[leave]\x20on'+_0x588968(0x108)+_0x588968(0xfd)+(_0x46c1df?.[_0x588968(0x104)]||_0x46c1df));}}let _managedRegistered=![];export async function initialize(_0xf0bb60){const _0x51e2d9=_0x24faf1;if(!_0xf0bb60)throw new Error(_0x51e2d9(0x1a1)+_0x51e2d9(0x154)+_0x51e2d9(0x16f)+'t\x20instance');botRef=_0xf0bb60,setupSendApi(),await ensureSchema();try{await startLogWatcher();}catch(_0x5a9200){warn(_0x51e2d9(0x19a)+_0x51e2d9(0x184)+'her\x20failed'+_0x51e2d9(0x135)+_0x51e2d9(0x115)+(_0x5a9200?.[_0x51e2d9(0x104)]||_0x5a9200));}try{typeof startManagedListener===_0x51e2d9(0xdb)&&(startManagedListener({'botRef':_0xf0bb60,'eventName':_0x51e2d9(0x187),'handler':async()=>{const _0x4fa3be=_0x51e2d9;try{if(!tail)await startLogWatcher();}catch(_0x21e28f){warn(_0x4fa3be(0x147)+_0x4fa3be(0xf7)+_0x4fa3be(0x15d)+_0x4fa3be(0xea)+(_0x21e28f?.[_0x4fa3be(0x104)]||_0x21e28f));}},'moduleName':name}),_managedRegistered=!![],info(_0x51e2d9(0x194)+_0x51e2d9(0x128)+_0x51e2d9(0x10e)+_0x51e2d9(0xd6)));}catch(_0x3f47e1){warn(_0x51e2d9(0x13c)+_0x51e2d9(0x14a)+_0x51e2d9(0x1b4)+'h\x20listener'+'Manager:\x20'+(_0x3f47e1?.['message']||_0x3f47e1)),_managedRegistered=![];}info(_0x51e2d9(0x1a1)+_0x51e2d9(0x129)+'and\x20watchi'+_0x51e2d9(0xd9)+_0x51e2d9(0xeb));}export async function cleanup(){const _0x22c26c=_0x24faf1;try{try{if(_managedRegistered&&typeof stopManagedListener===_0x22c26c(0xdb)){try{stopManagedListener(name,_0x22c26c(0x187));}catch(_0x23d7c2){try{stopManagedListener(name);}catch(_0x7dfb97){warn('[leave]\x20st'+'opManagedL'+_0x22c26c(0x197)+'tempts\x20fai'+_0x22c26c(0x137)+(_0x7dfb97?.[_0x22c26c(0x104)]||_0x23d7c2));}}info(_0x22c26c(0x19a)+_0x22c26c(0x1ac)+_0x22c26c(0x1a4)+_0x22c26c(0x168));}}catch(_0x2568cb){warn(_0x22c26c(0xd8)+'eanup\x20erro'+_0x22c26c(0x169)+_0x22c26c(0x106)+'dListener:'+'\x20'+(_0x2568cb?.[_0x22c26c(0x104)]||_0x2568cb));}try{stopLogWatcher();}catch(_0x579aaa){warn(_0x22c26c(0x19a)+_0x22c26c(0x102)+_0x22c26c(0x1a3)+_0x22c26c(0x195)+(_0x579aaa?.['message']||_0x579aaa));}}catch(_0x3c856d){error(_0x3c856d,_0x22c26c(0xd8)+_0x22c26c(0x11b)+_0x22c26c(0x1ab)+(_0x3c856d?.[_0x22c26c(0x104)]||_0x3c856d));}finally{eventQueue['length']=0x55*0x23+-0x9*-0x168+-0x1*0x1847,isProcessingQueue=![],processedIds[_0x22c26c(0x110)](),botRef=null,sendApi=null,info('[leave]\x20cl'+'eaned\x20up.');}}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};