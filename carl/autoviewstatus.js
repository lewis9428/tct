const _0x557954=_0x5e66;function _0x1565(){const _0x198d2a=[':\x20viewed\x20s','ID\x20unavail','singleSele','led\x20to\x20dis','XT\x20PRIMARY','.upsert\x20ha','sock','INSERT\x20INT','wer','res\x20bot\x20in','0\x0a\x20\x20\x20\x20\x20\x20);','videoMessa','Status\x20Vie','autoviewst','toLocaleSt','has\x20no\x20col',':\x20cleaned\x20','key,\x20value','tatus\x20off|','ror:\x20','SELECT\x20val','disable','isArray',':\x20ensure\x20d','le_info(\x27s',',\x20updated_','\x20\x20\x20\x20key\x20TE','DISABLED','led\x20to\x20ena','refs\x20WHERE','INSERT\x20OR\x20','bled\x20row:\x20','selectedBu','split','gistration','141274thAyYb',':\x20ensurePr','o\x20mark\x20sta',':\x20onMessag','get','O\x20statusvi','r:\x20',':\x20inner\x20lo',':\x20cleanup\x20',':\x20failed\x20t','\x0aTimezone:','onfig\x20erro','eply\x20to\x20ow','tatus]\x20ena','EXISTS\x20sta',':\x20saveEnab','true','setZone','CONDS','[autoviews','status','>\x20enable\x0a','30FUvpIR','sendMessag','text','has','map','caption','tatus\x20stat','e\x20error:\x20',':\x20DB\x20init\x20','ctReply','ledToDb\x20er','us\x20\x20\x20\x20\x20\x20\x20-','catch','E\x20SET\x20valu','NFLICT(key','adcast','xcluded.up','messages.u','wer\x0a\x0aState','remoteJid','zoneName','\x20\x20\x20\x20value\x20','led\x27','LE\x20IF\x20NOT\x20','E\x20statusvi','all','ponseMessa','abled','\x20at\x20',':\x20refreshC','function','hod\x20availa','TEXT\x20NOT\x20N','ring','iew_prefs\x20','updated_at','ble','\x27,\x20?,\x20?)\x0a\x20','DATETIME_M','status-vie','message','umn','length','Africa/Nai','tatus]\x20dis','participan','TO\x20statusv','DD\x20COLUMN\x20','AUTOVIEWST','lize\x20requi','2hgwqSR','>\x20disable\x0a','readMessag','selectedRo','tatus]\x20fai','stance','efs\x20(\x0a\x20\x20\x20\x20','led\x27\x20LIMIT','conversati','imageMessa','robi','floor','state','read','bled','tatus\x20from','efsTable\x20e',':\x20sendConf','.value,\x20up','name','\x20autoviews','trim','led:\x20','ENABLED','includes','tatusview_','fromMe','status@bro','ULL,\x0a\x20\x20\x20\x20\x20','wId','d:\x20','3644205jgEubQ',':\x20messages','now','ndler\x20erro','5054144pVgPaZ','ledToDb\x20fa','_at\x20INTEGE','value','extendedTe','psert','listRespon','toLowerCas','>\x20show\x20sta','\x20\x20\x20\x20\x20ON\x20CO','ue\x20FROM\x20st','tus\x20as\x20rea','e)\x20VALUES\x20','\x20failed:\x20','false','fromMillis','seMessage','REPLACE\x20IN','(key,\x20valu','ATUS','no\x20column','string','\x20(\x27enabled','error:\x20','enable','wer.initia','1229469SiAWtA','ted_at\x20col','bled\x20row\x20f','\x20INTEGER\x20D','llback\x20fai','556780Rlqwvw','key','atus','ew_prefs\x20(','dated_at','PRAGMA\x20tab','5636844WEZtuD','ble\x20for\x20co','xtMessage','e=excluded','1175448VRwenb','failed:\x20','R\x20DEFAULT\x20','\x20key=\x27enab','off','run','ttonId','rror:\x20','\x20?)','set'];_0x1565=function(){return _0x198d2a;};return _0x1565();}(function(_0x2c54d3,_0x146de1){const _0x2f433d=_0x5e66,_0x513d88=_0x2c54d3();while(!![]){try{const _0x38b215=-parseInt(_0x2f433d(0x1a5))/(-0x4d*-0x1f+0x38b*-0x4+-0x12*-0x45)+parseInt(_0x2f433d(0x224))/(-0x1*0x26f0+0x1129*0x1+-0x3*-0x743)*(parseInt(_0x2f433d(0x1a0))/(-0x1*-0x1eb1+0x815+-0x26c3))+-parseInt(_0x2f433d(0x1af))/(-0xbbe+0x2564+-0x22*0xc1)+parseInt(_0x2f433d(0x182))/(0x2*0xf01+-0x2a*0x15+-0x2d*0x97)+-parseInt(_0x2f433d(0x1f2))/(-0xc99+0x13da+-0x73b)*(-parseInt(_0x2f433d(0x1dc))/(0x1df*-0x3+-0x3f0*0x3+-0x1174*-0x1))+parseInt(_0x2f433d(0x186))/(-0x23b4*-0x1+0xcb1+-0x305d)+-parseInt(_0x2f433d(0x1ab))/(-0x1d5f*0x1+-0x1cca*0x1+0x3a32);if(_0x38b215===_0x146de1)break;else _0x513d88['push'](_0x513d88['shift']());}catch(_0x842c65){_0x513d88['push'](_0x513d88['shift']());}}}(_0x1565,-0xa8a96+0x10118+-0xa6*-0x17fd));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x557954(0x219)+_0x557954(0x1c1);export const version='1.0.4';function _0x5e66(_0x51ac41,_0x3ac021){const _0x45378f=_0x1565();return _0x5e66=function(_0x48605a,_0x3bfe61){_0x48605a=_0x48605a-(0x1b85+0x2*-0x1235+-0x20f*-0x5);let _0x5e4ab2=_0x45378f[_0x48605a];return _0x5e4ab2;},_0x5e66(_0x51ac41,_0x3ac021);}export const priority=0x3*0x6be+0xa15+0x1e4a*-0x1;export const configKeys=[_0x557954(0x222)+_0x557954(0x199)];export const commands=[_0x557954(0x1c6)+_0x557954(0x1a7)];let botRef=null,DEFAULT_TIMEZONE=_0x557954(0x21d)+_0x557954(0x16d),CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![],messageHandler=null;function refreshConfig(){const _0x3e72b7=_0x557954;try{const _0x432580=typeof getConfig===_0x3e72b7(0x210)?getConfig()||{}:{};CFG[_0x3e72b7(0x222)+'ATUS']=typeof _0x432580[_0x3e72b7(0x222)+_0x3e72b7(0x199)]!=='undefined'?!!_0x432580['AUTOVIEWST'+_0x3e72b7(0x199)]:CFG[_0x3e72b7(0x222)+_0x3e72b7(0x199)];}catch(_0x2a391d){warn(name+(_0x3e72b7(0x20f)+_0x3e72b7(0x1e7)+'r:\x20')+(_0x2a391d?.[_0x3e72b7(0x21a)]||_0x2a391d));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0x44c9fe){warn(name+(':\x20hotReloa'+'dConfig\x20re'+_0x557954(0x1db)+_0x557954(0x193))+(_0x44c9fe?.[_0x557954(0x21a)]||_0x44c9fe));}refreshConfig();async function ensurePrefsTable(){const _0x8ce9a1=_0x557954;try{let _0x457f5e=[];try{const _0x37f888=await db[_0x8ce9a1(0x20b)](_0x8ce9a1(0x1aa)+_0x8ce9a1(0x1d1)+_0x8ce9a1(0x17c)+'prefs\x27)');_0x457f5e=(_0x37f888||[])[_0x8ce9a1(0x1f6)](_0x561a7e=>_0x561a7e[_0x8ce9a1(0x176)]);}catch(_0x361c7b){_0x457f5e=[];}if(!_0x457f5e[_0x8ce9a1(0x21c)])await db['exec']('CREATE\x20TAB'+_0x8ce9a1(0x209)+_0x8ce9a1(0x1ea)+'tusview_pr'+_0x8ce9a1(0x169)+_0x8ce9a1(0x1d3)+_0x8ce9a1(0x1bd)+'\x20KEY,\x0a\x20\x20\x20\x20'+_0x8ce9a1(0x207)+_0x8ce9a1(0x212)+_0x8ce9a1(0x17f)+'\x20\x20\x20updated'+_0x8ce9a1(0x188)+_0x8ce9a1(0x1b1)+_0x8ce9a1(0x1c3)),_0x457f5e=[_0x8ce9a1(0x1a6),_0x8ce9a1(0x189),_0x8ce9a1(0x215)];else{if(!_0x457f5e['includes']('updated_at'))try{await db[_0x8ce9a1(0x1b4)]('ALTER\x20TABL'+_0x8ce9a1(0x20a)+'ew_prefs\x20A'+_0x8ce9a1(0x221)+_0x8ce9a1(0x215)+_0x8ce9a1(0x1a3)+'EFAULT\x200');}catch(_0x547b8b){warn(name+(_0x8ce9a1(0x1e5)+'o\x20add\x20upda'+_0x8ce9a1(0x1a1)+'umn:\x20')+(_0x547b8b?.[_0x8ce9a1(0x21a)]||_0x547b8b));}}try{const _0x25fe53=await db[_0x8ce9a1(0x1e0)](_0x8ce9a1(0x1cd)+'ue\x20FROM\x20st'+'atusview_p'+_0x8ce9a1(0x1d6)+'\x20key=\x27enab'+_0x8ce9a1(0x208));if(!_0x25fe53){const _0xe26c88=Math['floor'](Date[_0x8ce9a1(0x184)]()/(0x2355+0x89e+-0x280b));try{await db['run'](_0x8ce9a1(0x1c0)+_0x8ce9a1(0x1e1)+_0x8ce9a1(0x1a8)+_0x8ce9a1(0x1ca)+_0x8ce9a1(0x1d2)+'at)\x20VALUES'+_0x8ce9a1(0x19c)+'\x27,\x27false\x27,'+_0x8ce9a1(0x1b7),[_0xe26c88]);}catch(_0x11deb1){try{await db[_0x8ce9a1(0x1b4)](_0x8ce9a1(0x1d7)+_0x8ce9a1(0x197)+_0x8ce9a1(0x220)+_0x8ce9a1(0x214)+'(key,\x20valu'+_0x8ce9a1(0x192)+'(\x27enabled\x27'+',\x27false\x27)');}catch(_0x1b7d25){warn(name+(':\x20failed\x20t'+'o\x20insert\x20d'+'efault\x20ena'+_0x8ce9a1(0x1d8))+(_0x1b7d25?.[_0x8ce9a1(0x21a)]||_0x1b7d25));}}}}catch(_0x446845){warn(name+(_0x8ce9a1(0x1d0)+'efault\x20ena'+_0x8ce9a1(0x1a2)+'ailed:\x20')+(_0x446845?.['message']||_0x446845));}}catch(_0x5d563a){warn(name+(_0x8ce9a1(0x1dd)+_0x8ce9a1(0x173)+_0x8ce9a1(0x1b6))+(_0x5d563a?.['message']||_0x5d563a));throw _0x5d563a;}}async function readEnabledFromDb(){const _0x480320=_0x557954;try{const _0x4249f4=await db[_0x480320(0x1e0)](_0x480320(0x1cd)+_0x480320(0x190)+'atusview_p'+_0x480320(0x1d6)+_0x480320(0x1b2)+_0x480320(0x16a)+'\x201');if(!_0x4249f4)return![];const _0x3f8459=String(_0x4249f4[_0x480320(0x189)])[_0x480320(0x18d)+'e']();return _0x3f8459==='true'||_0x3f8459==='1';}catch(_0x5ba8f0){return warn(name+(':\x20readEnab'+'ledFromDb\x20'+_0x480320(0x19d))+(_0x5ba8f0?.[_0x480320(0x21a)]||_0x5ba8f0)),![];}}async function saveEnabledToDb(_0x49bffd){const _0x220f2a=_0x557954;try{const _0x2ccd5e=_0x49bffd?_0x220f2a(0x1ec):'false',_0x2f77c2=Math[_0x220f2a(0x16e)](Date['now']()/(0x8dc+-0x2317+0x1*0x1e23));return await db[_0x220f2a(0x1b4)](_0x220f2a(0x1c0)+'O\x20statusvi'+_0x220f2a(0x1a8)+_0x220f2a(0x1ca)+_0x220f2a(0x1d2)+'at)\x20VALUES'+_0x220f2a(0x19c)+_0x220f2a(0x217)+_0x220f2a(0x18f)+_0x220f2a(0x200)+')\x20DO\x20UPDAT'+_0x220f2a(0x1ff)+_0x220f2a(0x1ae)+_0x220f2a(0x175)+'dated_at=e'+_0x220f2a(0x202)+_0x220f2a(0x1a9),[_0x2ccd5e,_0x2f77c2]),!![];}catch(_0x22c0bc){const _0x22d35d=String(_0x22c0bc?.[_0x220f2a(0x21a)]||'')[_0x220f2a(0x18d)+'e']();if(_0x22d35d['includes'](_0x220f2a(0x1c8)+_0x220f2a(0x21b))||_0x22d35d[_0x220f2a(0x17b)](_0x220f2a(0x19a)))try{return await db[_0x220f2a(0x1b4)](_0x220f2a(0x1d7)+_0x220f2a(0x197)+'TO\x20statusv'+_0x220f2a(0x214)+_0x220f2a(0x198)+'e)\x20VALUES\x20'+'(\x27enabled\x27'+',\x20?)',[_0x49bffd?_0x220f2a(0x1ec):_0x220f2a(0x194)]),!![];}catch(_0x464e5a){return warn(name+(_0x220f2a(0x1eb)+_0x220f2a(0x187)+_0x220f2a(0x1a4)+_0x220f2a(0x179))+(_0x464e5a?.['message']||_0x464e5a)),![];}return warn(name+(_0x220f2a(0x1eb)+_0x220f2a(0x1fc)+_0x220f2a(0x1cc))+(_0x22c0bc?.['message']||_0x22c0bc)),![];}}function formatTimestamp(_0x56a8bd=Date[_0x557954(0x184)](),_0x1ec9dd=DEFAULT_TIMEZONE){const _0x9347bc=_0x557954;try{const _0x2e0cb3=DateTime[_0x9347bc(0x195)](_0x56a8bd)[_0x9347bc(0x1ed)](_0x1ec9dd);if(!_0x2e0cb3['isValid'])return new Date(_0x56a8bd)[_0x9347bc(0x1c7)+_0x9347bc(0x213)]();return _0x2e0cb3[_0x9347bc(0x1c7)+'ring'](DateTime[_0x9347bc(0x218)+'ED_WITH_SE'+_0x9347bc(0x1ee)])+'\x20('+_0x2e0cb3[_0x9347bc(0x206)]+')';}catch(_0x26cac9){return new Date(_0x56a8bd)[_0x9347bc(0x1c7)+_0x9347bc(0x213)]();}}function createMessageHandler(){return async function _0x8bffb8(_0x4464ad){const _0xcf6c8d=_0x5e66;try{if(shuttingDown)return;refreshConfig();const _0x1b5228=await readEnabledFromDb();if(!_0x1b5228)return;const {messages:_0x4b7cdb}=_0x4464ad||{};if(!Array[_0xcf6c8d(0x1cf)](_0x4b7cdb)||_0x4b7cdb[_0xcf6c8d(0x21c)]===-0x1*-0xc56+0x493*-0x1+-0x1*0x7c3)return;for(const _0x52c00e of _0x4b7cdb){try{if(!_0x52c00e||!_0x52c00e[_0xcf6c8d(0x1a6)])continue;const _0x3387ec=_0x52c00e[_0xcf6c8d(0x1a6)]['remoteJid']||_0x52c00e[_0xcf6c8d(0x205)]||'',_0x3d3d0e=_0x52c00e[_0xcf6c8d(0x1a6)]['participan'+'t']||null;if(_0x3387ec!==_0xcf6c8d(0x17e)+_0xcf6c8d(0x201)||!_0x3d3d0e)continue;const _0x52ab2f=formatTimestamp(Date[_0xcf6c8d(0x184)](),DEFAULT_TIMEZONE);info(name+(_0xcf6c8d(0x1b9)+_0xcf6c8d(0x172)+'\x20')+_0x3d3d0e+_0xcf6c8d(0x20e)+_0x52ab2f);try{if(typeof botRef?.[_0xcf6c8d(0x1bf)]?.[_0xcf6c8d(0x226)+'es']==='function')await botRef[_0xcf6c8d(0x1bf)]['readMessag'+'es']([_0x52c00e[_0xcf6c8d(0x1a6)]]);else{if(typeof botRef?.[_0xcf6c8d(0x1bf)]?.['read']===_0xcf6c8d(0x210))await botRef[_0xcf6c8d(0x1bf)][_0xcf6c8d(0x170)]([_0x52c00e['key']]);else typeof botRef?.[_0xcf6c8d(0x226)+'es']===_0xcf6c8d(0x210)&&await botRef['readMessag'+'es']([_0x52c00e[_0xcf6c8d(0x1a6)]]);}}catch(_0x142223){warn(name+(_0xcf6c8d(0x1e5)+_0xcf6c8d(0x1de)+_0xcf6c8d(0x191)+_0xcf6c8d(0x181))+(_0x142223?.[_0xcf6c8d(0x21a)]||_0x142223));}}catch(_0x1313f){warn(name+(_0xcf6c8d(0x1e3)+'op\x20error:\x20')+(_0x1313f?.[_0xcf6c8d(0x21a)]||_0x1313f));}}}catch(_0x685e89){warn(name+(_0xcf6c8d(0x183)+_0xcf6c8d(0x1be)+_0xcf6c8d(0x185)+_0xcf6c8d(0x1e2))+(_0x685e89?.[_0xcf6c8d(0x21a)]||_0x685e89));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x912*-0x3+-0x502*0x2+-0x1114)*(0x18*-0xd3+-0x6*-0x186+0xe8c);function markCmdProcessed(_0x365d32){const _0x24f15f=_0x557954;if(!_0x365d32)return;if(processedCmdKeys[_0x24f15f(0x1f5)](_0x365d32))try{clearTimeout(processedCmdKeys[_0x24f15f(0x1e0)](_0x365d32));}catch(_0x178292){};const _0x5e25f2=setTimeout(()=>processedCmdKeys['delete'](_0x365d32),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x24f15f(0x1b8)](_0x365d32,_0x5e25f2);}function isCmdProcessed(_0x460121){const _0x2aa8bc=_0x557954;return _0x460121&&processedCmdKeys[_0x2aa8bc(0x1f5)](_0x460121);}export async function onMessage(_0x2f0c36){const _0x4a4a27=_0x557954;try{if(!_0x2f0c36||!_0x2f0c36[_0x4a4a27(0x1a6)]||!_0x2f0c36[_0x4a4a27(0x21a)]||!_0x2f0c36['isCommand'])return;if(isJidGroup(_0x2f0c36[_0x4a4a27(0x1a6)][_0x4a4a27(0x205)]))return;const _0xf6d220=_0x2f0c36[_0x4a4a27(0x1a6)][_0x4a4a27(0x17d)],_0x26fbd2=await isSudo(botRef,_0x2f0c36)[_0x4a4a27(0x1fe)](()=>![]);if(!_0xf6d220&&!_0x26fbd2)return;let _0x2e9af5;if(_0xf6d220){_0x2e9af5=getBotJid();if(!_0x2e9af5){warn(name+(':\x20cannot\x20r'+_0x4a4a27(0x1e8)+'ner\x20(bot\x20J'+_0x4a4a27(0x1ba)+'able).'));return;}}else _0x2e9af5=_0x2f0c36[_0x4a4a27(0x1a6)][_0x4a4a27(0x205)];const _0x166807=String(_0x2f0c36['key'][_0x4a4a27(0x205)]||'')+'::'+String(_0x2f0c36['key']['id']||_0x2f0c36['key'][_0x4a4a27(0x21f)+'t']||'');if(isCmdProcessed(_0x166807))return;markCmdProcessed(_0x166807);const _0x4ccfaa=typeof _0x2f0c36[_0x4a4a27(0x1f4)]===_0x4a4a27(0x19b)&&_0x2f0c36['text']['trim']()[_0x4a4a27(0x21c)]?_0x2f0c36['text'][_0x4a4a27(0x178)]():function _0xa73266(_0x153131){const _0x32d3eb=_0x4a4a27;if(!_0x153131||!_0x153131[_0x32d3eb(0x21a)])return'';const _0x21f235=_0x153131[_0x32d3eb(0x21a)];if(_0x21f235['conversati'+'on'])return _0x21f235[_0x32d3eb(0x16b)+'on'];if(_0x21f235[_0x32d3eb(0x18a)+'xtMessage']?.[_0x32d3eb(0x1f4)])return _0x21f235[_0x32d3eb(0x18a)+_0x32d3eb(0x1ad)][_0x32d3eb(0x1f4)];if(_0x21f235[_0x32d3eb(0x16c)+'ge']?.[_0x32d3eb(0x1f7)])return _0x21f235[_0x32d3eb(0x16c)+'ge'][_0x32d3eb(0x1f7)];if(_0x21f235[_0x32d3eb(0x1c4)+'ge']?.[_0x32d3eb(0x1f7)])return _0x21f235[_0x32d3eb(0x1c4)+'ge'][_0x32d3eb(0x1f7)];if(_0x21f235['buttonsRes'+_0x32d3eb(0x20c)+'ge']?.[_0x32d3eb(0x1d9)+_0x32d3eb(0x1b5)])return _0x21f235['buttonsRes'+'ponseMessa'+'ge'][_0x32d3eb(0x1d9)+'ttonId'];if(_0x21f235[_0x32d3eb(0x18c)+_0x32d3eb(0x196)]?.['singleSele'+_0x32d3eb(0x1fb)]?.[_0x32d3eb(0x166)+_0x32d3eb(0x180)])return _0x21f235['listRespon'+_0x32d3eb(0x196)][_0x32d3eb(0x1bb)+'ctReply'][_0x32d3eb(0x166)+_0x32d3eb(0x180)];return'';}(_0x2f0c36)||'';if(!_0x4ccfaa)return;const _0x5078df=(_0x4ccfaa['split'](/\r?\n/)[0x1bc*0x15+-0x1*-0x260e+0x1*-0x4a7a]||'')[_0x4a4a27(0x178)](),_0x22101f=_0x5078df[_0x4a4a27(0x1da)](/\s+/),_0x5a4fd6=(_0x22101f[0x1*0x26cb+-0x2272+-0x459]||'')[_0x4a4a27(0x18d)+'e']();if(!commands[_0x4a4a27(0x17b)](_0x5a4fd6))return;const _0x18b172=(_0x22101f[0x1904+-0x101f*-0x1+-0x2922]||'')[_0x4a4a27(0x18d)+'e']();if(['on',_0x4a4a27(0x19e),_0x4a4a27(0x1ec),'1'][_0x4a4a27(0x17b)](_0x18b172)){const _0x3362b3=await saveEnabledToDb(!![]);if(_0x3362b3)await sendConfirmation(_0x2e9af5,_0x4a4a27(0x1ef)+_0x4a4a27(0x1e9)+_0x4a4a27(0x171));else await sendConfirmation(_0x2e9af5,_0x4a4a27(0x1ef)+_0x4a4a27(0x167)+_0x4a4a27(0x1d5)+_0x4a4a27(0x216));return;}if([_0x4a4a27(0x1b3),_0x4a4a27(0x1ce),_0x4a4a27(0x194),'0']['includes'](_0x18b172)){const _0x361e22=await saveEnabledToDb(![]);if(_0x361e22)await sendConfirmation(_0x2e9af5,'[autoviews'+_0x4a4a27(0x21e)+_0x4a4a27(0x20d));else await sendConfirmation(_0x2e9af5,'[autoviews'+_0x4a4a27(0x167)+_0x4a4a27(0x1bc)+'able');return;}if(_0x18b172===_0x4a4a27(0x1f0)||_0x18b172===_0x4a4a27(0x16f)||!_0x18b172){const _0x16f3ff=await readEnabledFromDb(),_0xda2990=_0x16f3ff?_0x4a4a27(0x17a):_0x4a4a27(0x1d4);await sendConfirmation(_0x2e9af5,_0x4a4a27(0x1c5)+_0x4a4a27(0x204)+':\x20'+_0xda2990+(_0x4a4a27(0x1e6)+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x2e9af5,'Usage\x20(PM\x20'+'only):\x0a'+(_0x4a4a27(0x177)+'tatus\x20on|e'+'nable\x20\x20\x20\x20-'+_0x4a4a27(0x1f1))+(_0x4a4a27(0x177)+_0x4a4a27(0x1cb)+'disable\x20\x20-'+_0x4a4a27(0x225))+(_0x4a4a27(0x177)+_0x4a4a27(0x1f8)+_0x4a4a27(0x1fd)+_0x4a4a27(0x18e)+'te'));}catch(_0x248a7d){warn(name+(_0x4a4a27(0x1df)+_0x4a4a27(0x1f9))+(_0x248a7d?.[_0x4a4a27(0x21a)]||_0x248a7d));}}async function sendConfirmation(_0x5d0b99,_0x3dd776){const _0x2f2ec1=_0x557954;try{if(!_0x5d0b99)return;if(botRef&&botRef[_0x2f2ec1(0x1bf)]&&typeof botRef[_0x2f2ec1(0x1bf)][_0x2f2ec1(0x1f3)+'e']===_0x2f2ec1(0x210))await botRef['sock']['sendMessag'+'e'](_0x5d0b99,{'text':_0x3dd776});else botRef&&typeof botRef[_0x2f2ec1(0x1f3)+'e']===_0x2f2ec1(0x210)?await botRef[_0x2f2ec1(0x1f3)+'e'](_0x5d0b99,{'text':_0x3dd776}):warn(name+(':\x20no\x20sendM'+'essage\x20met'+_0x2f2ec1(0x211)+_0x2f2ec1(0x1ac)+'nfirmation'));}catch(_0x19cf06){warn(name+(_0x2f2ec1(0x174)+'irmation\x20f'+'ailed:\x20')+(_0x19cf06?.[_0x2f2ec1(0x21a)]||_0x19cf06));}}export async function initialize(_0x14c65a){const _0x47fab2=_0x557954;if(!_0x14c65a)throw new Error('status-vie'+_0x47fab2(0x19f)+_0x47fab2(0x223)+_0x47fab2(0x1c2)+_0x47fab2(0x168));botRef=_0x14c65a,shuttingDown=![],refreshConfig(),await ensurePrefsTable()['catch'](_0x2b73ee=>{const _0x26c95f=_0x47fab2;warn(name+(_0x26c95f(0x1fa)+_0x26c95f(0x1b0))+(_0x2b73ee?.[_0x26c95f(0x21a)]||_0x2b73ee));}),messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':_0x47fab2(0x203)+'psert','handler':messageHandler,'moduleName':name}),info(name+(':\x20initiali'+'zed.'));}export async function cleanup(){const _0x31a6d0=_0x557954;try{stopManagedListener(name,_0x31a6d0(0x203)+_0x31a6d0(0x18b)),shuttingDown=!![],messageHandler=null;}catch(_0x54ed07){warn(name+(_0x31a6d0(0x1e4)+_0x31a6d0(0x19d))+(_0x54ed07?.[_0x31a6d0(0x21a)]||_0x54ed07));}finally{botRef=null,info(name+(_0x31a6d0(0x1c9)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};