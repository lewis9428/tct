const _0x1efb7a=_0x78bf;(function(_0x3765b6,_0x5098e1){const _0x37923b=_0x78bf,_0x5c9daa=_0x3765b6();while(!![]){try{const _0x4c0b76=-parseInt(_0x37923b(0x250))/(-0x4b6*0x6+0x591+0x4*0x5ad)*(-parseInt(_0x37923b(0x265))/(0x1205+0x3*-0xc91+0x13b0))+parseInt(_0x37923b(0x1ce))/(-0x3*0x7d6+0x16d*0x7+0xd8a)+parseInt(_0x37923b(0x1e5))/(0x1*-0x1e7f+-0x1*-0x25b1+-0x72e)*(-parseInt(_0x37923b(0x255))/(-0x1bab*0x1+0xd77+-0x14b*-0xb))+-parseInt(_0x37923b(0x273))/(-0x8f6+0x21b3+-0x13*0x14d)*(parseInt(_0x37923b(0x1d8))/(0x45f*0x3+-0x21a*-0x1+-0x1b*0x90))+-parseInt(_0x37923b(0x22d))/(-0x2246+0xd47+0x1507)+parseInt(_0x37923b(0x281))/(-0x1d55+-0x1*-0x1251+0xb0d)+parseInt(_0x37923b(0x204))/(-0xa52+-0x1a*0xc1+0x3b*0x82);if(_0x4c0b76===_0x5098e1)break;else _0x5c9daa['push'](_0x5c9daa['shift']());}catch(_0x4366dd){_0x5c9daa['push'](_0x5c9daa['shift']());}}}(_0x2b39,0x41845*0x2+0xd406*-0x2+0x1caf*0x7));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x1efb7a(0x20f)+_0x1efb7a(0x226);export const version=_0x1efb7a(0x25f);export const priority=-0x1eed*-0x1+0x1faf+0x8f1*-0x7;export const configKeys=[_0x1efb7a(0x1bf)+_0x1efb7a(0x1d7)];export const commands=['autoviewst'+'atus'];let botRef=null,DEFAULT_TIMEZONE='Africa/Nai'+_0x1efb7a(0x212),CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![],messageHandler=null;function refreshConfig(){const _0xc7d4ac=_0x1efb7a;try{const _0x224ce0=typeof getConfig===_0xc7d4ac(0x260)?getConfig()||{}:{};CFG[_0xc7d4ac(0x1bf)+_0xc7d4ac(0x1d7)]=typeof _0x224ce0[_0xc7d4ac(0x1bf)+'ATUS']!=='undefined'?!!_0x224ce0[_0xc7d4ac(0x1bf)+'ATUS']:CFG[_0xc7d4ac(0x1bf)+_0xc7d4ac(0x1d7)];}catch(_0x1e7125){warn(name+(_0xc7d4ac(0x1df)+_0xc7d4ac(0x259)+_0xc7d4ac(0x1f7))+(_0x1e7125?.[_0xc7d4ac(0x22a)]||_0x1e7125));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0x5bb7a9){warn(name+(_0x1efb7a(0x23b)+_0x1efb7a(0x26f)+_0x1efb7a(0x20a)+_0x1efb7a(0x280))+(_0x5bb7a9?.[_0x1efb7a(0x22a)]||_0x5bb7a9));}refreshConfig();function _0x2b39(){const _0x493f25=['name','SELECT\x20val','DISABLED','conversati','stance','nfirmation','\x20failed:\x20','923832TxfUGe','DATETIME_M','umn:\x20','ew_prefs\x20(','>\x20enable\x0a','failed:\x20','ble','dated_at','zed.','AUTOVIEWST','llback\x20fai','TEXT\x20NOT\x20N',':\x20cleaned\x20','all','ew_prefs\x20A',':\x20ensurePr','get','\x20INTEGER\x20D','floor','isArray','ENABLED','R\x20DEFAULT\x20','O\x20statusvi','now','915819YCNJOF','participan','ALTER\x20TABL','NFLICT(key','toLowerCas','.upsert\x20ha','ttonId','abled','TO\x20statusv','ATUS','82810oShSKh','eply\x20to\x20ow','refs\x20WHERE','tusview_pr',':\x20readEnab','xtMessage','bled',':\x20refreshC','(key,\x20valu','ted_at\x20col',',\x20updated_','sock','le_info(\x27s','4EtCHue','ble\x20for\x20co','\x20at\x20','ledToDb\x20fa','psert','extendedTe','ponseMessa','tatus]\x20ena','essage\x20met','LE\x20IF\x20NOT\x20',',\x27false\x27)','updated_at','isCommand','wer\x0a\x0aState','caption','E\x20statusvi','text','irmation\x20f','r:\x20','0\x0a\x20\x20\x20\x20\x20\x20);','trim','ror:\x20','us\x20\x20\x20\x20\x20\x20\x20-','wId','delete','EXISTS\x20sta','run','ring','o\x20insert\x20d','imageMessa','ED_WITH_SE','2468610peVabb','(\x27enabled\x27','\x20(\x27enabled','xcluded.up','iew_prefs\x20','catch','gistration','fromMillis',':\x20ensure\x20d','includes','selectedBu','status-vie','false','string','robi','tatus\x20from','enable','value','bled\x20row\x20f','\x20\x20\x20\x20value\x20',':\x20DB\x20init\x20','CREATE\x20TAB','ID\x20unavail','rror:\x20','tatus\x20off|','ctReply','prefs\x27)','res\x20bot\x20in','zoneName','tatus]\x20fai','messages.u',':\x20failed\x20t',':\x20viewed\x20s','length','wer','setZone','XT\x20PRIMARY','op\x20error:\x20','message','listRespon','\x20autoviews','1992928MKqgVC','DD\x20COLUMN\x20','efsTable\x20e',':\x20no\x20sendM','videoMessa','read','true','at)\x20VALUES','hod\x20availa','has','PRAGMA\x20tab','able','ue\x20FROM\x20st','set',':\x20hotReloa',':\x20sendConf','lize\x20requi','no\x20column','error:\x20','.value,\x20up','adcast','key','sendMessag','split','tatus\x20on|e','remoteJid','led\x20to\x20ena',')\x20DO\x20UPDAT','efs\x20(\x0a\x20\x20\x20\x20','nable\x20\x20\x20\x20-','buttonsRes','seMessage','\x20\x20\x20\x20\x20ON\x20CO','bled\x20row:\x20','[autoviews','459473rURgwk','REPLACE\x20IN','o\x20add\x20upda','atusview_p','\x20KEY,\x0a\x20\x20\x20\x20','3692915yzNSqT',':\x20messages','e\x20error:\x20','ner\x20(bot\x20J','onfig\x20erro','selectedRo','able).','tatusview_','toLocaleSt','singleSele','1.0.4','function','ailed:\x20','e)\x20VALUES\x20',':\x20cannot\x20r','CONDS','4uLxyMx','\x20key=\x27enab','e=excluded','readMessag','only):\x0a','\x27,\x20?,\x20?)\x0a\x20','disable\x20\x20-','INSERT\x20INT','isValid','>\x20show\x20sta','dConfig\x20re',':\x20onMessag',':\x20cleanup\x20',',\x20?)','54tkZePd','efault\x20ena','status@bro','ULL,\x0a\x20\x20\x20\x20\x20','disable','exec','_at\x20INTEGE'];_0x2b39=function(){return _0x493f25;};return _0x2b39();}async function ensurePrefsTable(){const _0x21f89e=_0x1efb7a;try{let _0x222cc6=[];try{const _0x4bd93e=await db[_0x21f89e(0x1c3)](_0x21f89e(0x237)+_0x21f89e(0x1e4)+_0x21f89e(0x25c)+_0x21f89e(0x21e));_0x222cc6=(_0x4bd93e||[])['map'](_0x21e181=>_0x21e181[_0x21f89e(0x27a)]);}catch(_0x24fb7a){_0x222cc6=[];}if(!_0x222cc6[_0x21f89e(0x225)])await db[_0x21f89e(0x278)](_0x21f89e(0x219)+_0x21f89e(0x1ee)+_0x21f89e(0x1fe)+_0x21f89e(0x1db)+_0x21f89e(0x249)+'\x20\x20\x20\x20key\x20TE'+_0x21f89e(0x228)+_0x21f89e(0x254)+_0x21f89e(0x217)+_0x21f89e(0x1c1)+_0x21f89e(0x276)+'\x20\x20\x20updated'+_0x21f89e(0x279)+_0x21f89e(0x1cb)+_0x21f89e(0x1f8)),_0x222cc6=[_0x21f89e(0x242),_0x21f89e(0x215),_0x21f89e(0x1f0)];else{if(!_0x222cc6['includes']('updated_at'))try{await db['run'](_0x21f89e(0x1d0)+_0x21f89e(0x1f4)+_0x21f89e(0x1c4)+_0x21f89e(0x22e)+_0x21f89e(0x1f0)+_0x21f89e(0x1c7)+'EFAULT\x200');}catch(_0x468eaa){warn(name+(_0x21f89e(0x223)+_0x21f89e(0x252)+_0x21f89e(0x1e1)+_0x21f89e(0x1b8))+(_0x468eaa?.[_0x21f89e(0x22a)]||_0x468eaa));}}try{const _0x516671=await db[_0x21f89e(0x1c6)]('SELECT\x20val'+_0x21f89e(0x239)+'atusview_p'+_0x21f89e(0x1da)+_0x21f89e(0x266)+'led\x27');if(!_0x516671){const _0x3175ba=Math[_0x21f89e(0x1c8)](Date['now']()/(0x1170+0xab0+-0x3e*0x64));try{await db[_0x21f89e(0x1ff)]('INSERT\x20INT'+'O\x20statusvi'+_0x21f89e(0x1b9)+'key,\x20value'+_0x21f89e(0x1e2)+_0x21f89e(0x234)+_0x21f89e(0x206)+'\x27,\x27false\x27,'+'\x20?)',[_0x3175ba]);}catch(_0x347e60){try{await db[_0x21f89e(0x1ff)]('INSERT\x20OR\x20'+_0x21f89e(0x251)+_0x21f89e(0x1d6)+'iew_prefs\x20'+'(key,\x20valu'+_0x21f89e(0x262)+_0x21f89e(0x205)+_0x21f89e(0x1ef));}catch(_0x4cb03a){warn(name+(':\x20failed\x20t'+_0x21f89e(0x201)+_0x21f89e(0x274)+_0x21f89e(0x24e))+(_0x4cb03a?.[_0x21f89e(0x22a)]||_0x4cb03a));}}}}catch(_0x51e970){warn(name+(_0x21f89e(0x20c)+_0x21f89e(0x274)+_0x21f89e(0x216)+_0x21f89e(0x261))+(_0x51e970?.[_0x21f89e(0x22a)]||_0x51e970));}}catch(_0x1e1a69){warn(name+(_0x21f89e(0x1c5)+_0x21f89e(0x22f)+_0x21f89e(0x21b))+(_0x1e1a69?.[_0x21f89e(0x22a)]||_0x1e1a69));throw _0x1e1a69;}}async function readEnabledFromDb(){const _0x19840f=_0x1efb7a;try{const _0x5cb9b3=await db[_0x19840f(0x1c6)](_0x19840f(0x27b)+_0x19840f(0x239)+_0x19840f(0x253)+_0x19840f(0x1da)+_0x19840f(0x266)+'led\x27\x20LIMIT'+'\x201');if(!_0x5cb9b3)return![];const _0x47a2e5=String(_0x5cb9b3[_0x19840f(0x215)])['toLowerCas'+'e']();return _0x47a2e5===_0x19840f(0x233)||_0x47a2e5==='1';}catch(_0x14ef84){return warn(name+(_0x19840f(0x1dc)+'ledFromDb\x20'+_0x19840f(0x23f))+(_0x14ef84?.[_0x19840f(0x22a)]||_0x14ef84)),![];}}function _0x78bf(_0x1f2f56,_0x19f9b0){const _0x4218ab=_0x2b39();return _0x78bf=function(_0x42d939,_0x556f44){_0x42d939=_0x42d939-(0x1129+-0x1621+-0x1d*-0x3b);let _0x565c3f=_0x4218ab[_0x42d939];return _0x565c3f;},_0x78bf(_0x1f2f56,_0x19f9b0);}async function saveEnabledToDb(_0x2a707f){const _0x82c973=_0x1efb7a;try{const _0x1f27fd=_0x2a707f?_0x82c973(0x233):_0x82c973(0x210),_0x25a3aa=Math[_0x82c973(0x1c8)](Date['now']()/(-0x8cc+-0x8c6+-0x157a*-0x1));return await db[_0x82c973(0x1ff)](_0x82c973(0x26c)+_0x82c973(0x1cc)+_0x82c973(0x1b9)+'key,\x20value'+',\x20updated_'+_0x82c973(0x234)+'\x20(\x27enabled'+_0x82c973(0x26a)+_0x82c973(0x24d)+_0x82c973(0x1d1)+_0x82c973(0x248)+'E\x20SET\x20valu'+_0x82c973(0x267)+_0x82c973(0x240)+'dated_at=e'+_0x82c973(0x207)+_0x82c973(0x1bd),[_0x1f27fd,_0x25a3aa]),!![];}catch(_0x51d535){const _0xb973a7=String(_0x51d535?.['message']||'')['toLowerCas'+'e']();if(_0xb973a7[_0x82c973(0x20d)]('has\x20no\x20col'+'umn')||_0xb973a7[_0x82c973(0x20d)](_0x82c973(0x23e)))try{return await db[_0x82c973(0x1ff)]('INSERT\x20OR\x20'+_0x82c973(0x251)+'TO\x20statusv'+_0x82c973(0x208)+_0x82c973(0x1e0)+_0x82c973(0x262)+_0x82c973(0x205)+_0x82c973(0x272),[_0x2a707f?_0x82c973(0x233):'false']),!![];}catch(_0x1b29eb){return warn(name+(':\x20saveEnab'+_0x82c973(0x1e8)+_0x82c973(0x1c0)+'led:\x20')+(_0x1b29eb?.[_0x82c973(0x22a)]||_0x1b29eb)),![];}return warn(name+(':\x20saveEnab'+'ledToDb\x20er'+_0x82c973(0x1fa))+(_0x51d535?.['message']||_0x51d535)),![];}}function formatTimestamp(_0x1e5dc2=Date[_0x1efb7a(0x1cd)](),_0xfb3117=DEFAULT_TIMEZONE){const _0x49e13e=_0x1efb7a;try{const _0x5869cc=DateTime[_0x49e13e(0x20b)](_0x1e5dc2)[_0x49e13e(0x227)](_0xfb3117);if(!_0x5869cc[_0x49e13e(0x26d)])return new Date(_0x1e5dc2)[_0x49e13e(0x25d)+_0x49e13e(0x200)]();return _0x5869cc[_0x49e13e(0x25d)+_0x49e13e(0x200)](DateTime[_0x49e13e(0x1b7)+_0x49e13e(0x203)+_0x49e13e(0x264)])+'\x20('+_0x5869cc[_0x49e13e(0x220)]+')';}catch(_0x426d96){return new Date(_0x1e5dc2)[_0x49e13e(0x25d)+_0x49e13e(0x200)]();}}function createMessageHandler(){return async function _0x493674(_0x531694){const _0x56a89d=_0x78bf;try{if(shuttingDown)return;refreshConfig();const _0x5801d6=await readEnabledFromDb();if(!_0x5801d6)return;const {messages:_0x36a59f}=_0x531694||{};if(!Array[_0x56a89d(0x1c9)](_0x36a59f)||_0x36a59f[_0x56a89d(0x225)]===-0x435*0x8+-0x1ddd+0x3f85)return;for(const _0x49ccb4 of _0x36a59f){try{if(!_0x49ccb4||!_0x49ccb4[_0x56a89d(0x242)])continue;const _0x3c30b6=_0x49ccb4[_0x56a89d(0x242)][_0x56a89d(0x246)]||_0x49ccb4[_0x56a89d(0x246)]||'',_0x51006e=_0x49ccb4['key']['participan'+'t']||null;if(_0x3c30b6!==_0x56a89d(0x275)+_0x56a89d(0x241)||!_0x51006e)continue;const _0x1852a0=formatTimestamp(Date[_0x56a89d(0x1cd)](),DEFAULT_TIMEZONE);info(name+(_0x56a89d(0x224)+_0x56a89d(0x213)+'\x20')+_0x51006e+_0x56a89d(0x1e7)+_0x1852a0);try{if(typeof botRef?.[_0x56a89d(0x1e3)]?.[_0x56a89d(0x268)+'es']===_0x56a89d(0x260))await botRef[_0x56a89d(0x1e3)][_0x56a89d(0x268)+'es']([_0x49ccb4[_0x56a89d(0x242)]]);else{if(typeof botRef?.[_0x56a89d(0x1e3)]?.['read']===_0x56a89d(0x260))await botRef[_0x56a89d(0x1e3)][_0x56a89d(0x232)]([_0x49ccb4[_0x56a89d(0x242)]]);else typeof botRef?.[_0x56a89d(0x268)+'es']===_0x56a89d(0x260)&&await botRef['readMessag'+'es']([_0x49ccb4['key']]);}}catch(_0x19175c){warn(name+(_0x56a89d(0x223)+'o\x20mark\x20sta'+'tus\x20as\x20rea'+'d:\x20')+(_0x19175c?.[_0x56a89d(0x22a)]||_0x19175c));}}catch(_0x33ff73){warn(name+(':\x20inner\x20lo'+_0x56a89d(0x229))+(_0x33ff73?.[_0x56a89d(0x22a)]||_0x33ff73));}}}catch(_0x5301a0){warn(name+(_0x56a89d(0x256)+_0x56a89d(0x1d3)+'ndler\x20erro'+_0x56a89d(0x1f7))+(_0x5301a0?.[_0x56a89d(0x22a)]||_0x5301a0));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(0x4*0x10b+-0x178d+0x137f)*(0x21c6+0x13f6+-0xc*0x427);function markCmdProcessed(_0x1d79bd){const _0x35e07d=_0x1efb7a;if(!_0x1d79bd)return;if(processedCmdKeys[_0x35e07d(0x236)](_0x1d79bd))try{clearTimeout(processedCmdKeys['get'](_0x1d79bd));}catch(_0x5c201e){};const _0x344e11=setTimeout(()=>processedCmdKeys[_0x35e07d(0x1fd)](_0x1d79bd),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x35e07d(0x23a)](_0x1d79bd,_0x344e11);}function isCmdProcessed(_0x1e034c){const _0x29cce2=_0x1efb7a;return _0x1e034c&&processedCmdKeys[_0x29cce2(0x236)](_0x1e034c);}export async function onMessage(_0x91df6){const _0x500679=_0x1efb7a;try{if(!_0x91df6||!_0x91df6['key']||!_0x91df6[_0x500679(0x22a)]||!_0x91df6[_0x500679(0x1f1)])return;if(isJidGroup(_0x91df6['key']['remoteJid']))return;const _0x29564e=_0x91df6[_0x500679(0x242)]['fromMe'],_0x2ec4a0=await isSudo(botRef,_0x91df6)[_0x500679(0x209)](()=>![]);if(!_0x29564e&&!_0x2ec4a0)return;let _0x522e17;if(_0x29564e){_0x522e17=getBotJid();if(!_0x522e17){warn(name+(_0x500679(0x263)+_0x500679(0x1d9)+_0x500679(0x258)+_0x500679(0x21a)+_0x500679(0x25b)));return;}}else _0x522e17=_0x91df6[_0x500679(0x242)]['remoteJid'];const _0x38bdaf=String(_0x91df6['key'][_0x500679(0x246)]||'')+'::'+String(_0x91df6[_0x500679(0x242)]['id']||_0x91df6[_0x500679(0x242)][_0x500679(0x1cf)+'t']||'');if(isCmdProcessed(_0x38bdaf))return;markCmdProcessed(_0x38bdaf);const _0x299aae=typeof _0x91df6[_0x500679(0x1f5)]===_0x500679(0x211)&&_0x91df6['text']['trim']()[_0x500679(0x225)]?_0x91df6[_0x500679(0x1f5)]['trim']():function _0x2d956c(_0x28f2ce){const _0xb9946a=_0x500679;if(!_0x28f2ce||!_0x28f2ce[_0xb9946a(0x22a)])return'';const _0x1b4145=_0x28f2ce[_0xb9946a(0x22a)];if(_0x1b4145[_0xb9946a(0x27d)+'on'])return _0x1b4145[_0xb9946a(0x27d)+'on'];if(_0x1b4145[_0xb9946a(0x1ea)+_0xb9946a(0x1dd)]?.[_0xb9946a(0x1f5)])return _0x1b4145[_0xb9946a(0x1ea)+_0xb9946a(0x1dd)][_0xb9946a(0x1f5)];if(_0x1b4145[_0xb9946a(0x202)+'ge']?.['caption'])return _0x1b4145[_0xb9946a(0x202)+'ge']['caption'];if(_0x1b4145[_0xb9946a(0x231)+'ge']?.[_0xb9946a(0x1f3)])return _0x1b4145['videoMessa'+'ge'][_0xb9946a(0x1f3)];if(_0x1b4145[_0xb9946a(0x24b)+_0xb9946a(0x1eb)+'ge']?.[_0xb9946a(0x20e)+_0xb9946a(0x1d4)])return _0x1b4145[_0xb9946a(0x24b)+_0xb9946a(0x1eb)+'ge'][_0xb9946a(0x20e)+_0xb9946a(0x1d4)];if(_0x1b4145[_0xb9946a(0x22b)+_0xb9946a(0x24c)]?.[_0xb9946a(0x25e)+_0xb9946a(0x21d)]?.[_0xb9946a(0x25a)+_0xb9946a(0x1fc)])return _0x1b4145[_0xb9946a(0x22b)+_0xb9946a(0x24c)][_0xb9946a(0x25e)+'ctReply'][_0xb9946a(0x25a)+'wId'];return'';}(_0x91df6)||'';if(!_0x299aae)return;const _0x5af55e=(_0x299aae[_0x500679(0x244)](/\r?\n/)[-0xfea+0x1a20+-0x2*0x51b]||'')[_0x500679(0x1f9)](),_0x2d1b87=_0x5af55e['split'](/\s+/),_0x4276bb=(_0x2d1b87[0x16f2+0x98f*0x1+-0x35*0x9d]||'')[_0x500679(0x1d2)+'e']();if(!commands[_0x500679(0x20d)](_0x4276bb))return;const _0x5a6686=(_0x2d1b87[-0xa7*-0x11+0xe7e*0x1+-0x1994]||'')[_0x500679(0x1d2)+'e']();if(['on',_0x500679(0x214),'true','1'][_0x500679(0x20d)](_0x5a6686)){const _0xd2745d=await saveEnabledToDb(!![]);if(_0xd2745d)await sendConfirmation(_0x522e17,_0x500679(0x24f)+_0x500679(0x1ec)+_0x500679(0x1de));else await sendConfirmation(_0x522e17,_0x500679(0x24f)+_0x500679(0x221)+_0x500679(0x247)+_0x500679(0x1bc));return;}if(['off',_0x500679(0x277),_0x500679(0x210),'0'][_0x500679(0x20d)](_0x5a6686)){const _0x210569=await saveEnabledToDb(![]);if(_0x210569)await sendConfirmation(_0x522e17,_0x500679(0x24f)+'tatus]\x20dis'+_0x500679(0x1d5));else await sendConfirmation(_0x522e17,_0x500679(0x24f)+_0x500679(0x221)+'led\x20to\x20dis'+_0x500679(0x238));return;}if(_0x5a6686==='status'||_0x5a6686==='state'||!_0x5a6686){const _0x25b635=await readEnabledFromDb(),_0xa903a6=_0x25b635?_0x500679(0x1ca):_0x500679(0x27c);await sendConfirmation(_0x522e17,'Status\x20Vie'+_0x500679(0x1f2)+':\x20'+_0xa903a6+('\x0aTimezone:'+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x522e17,'Usage\x20(PM\x20'+_0x500679(0x269)+(_0x500679(0x22c)+_0x500679(0x245)+_0x500679(0x24a)+_0x500679(0x1ba))+('\x20autoviews'+_0x500679(0x21c)+_0x500679(0x26b)+'>\x20disable\x0a')+(_0x500679(0x22c)+'tatus\x20stat'+_0x500679(0x1fb)+_0x500679(0x26e)+'te'));}catch(_0x1d97de){warn(name+(_0x500679(0x270)+_0x500679(0x257))+(_0x1d97de?.['message']||_0x1d97de));}}async function sendConfirmation(_0x2450ed,_0x10b914){const _0x4839e5=_0x1efb7a;try{if(!_0x2450ed)return;if(botRef&&botRef[_0x4839e5(0x1e3)]&&typeof botRef['sock'][_0x4839e5(0x243)+'e']===_0x4839e5(0x260))await botRef['sock'][_0x4839e5(0x243)+'e'](_0x2450ed,{'text':_0x10b914});else botRef&&typeof botRef['sendMessag'+'e']===_0x4839e5(0x260)?await botRef['sendMessag'+'e'](_0x2450ed,{'text':_0x10b914}):warn(name+(_0x4839e5(0x230)+_0x4839e5(0x1ed)+_0x4839e5(0x235)+_0x4839e5(0x1e6)+_0x4839e5(0x27f)));}catch(_0x32c583){warn(name+(_0x4839e5(0x23c)+_0x4839e5(0x1f6)+_0x4839e5(0x261))+(_0x32c583?.['message']||_0x32c583));}}export async function initialize(_0x50cc81){const _0x1f753a=_0x1efb7a;if(!_0x50cc81)throw new Error('status-vie'+'wer.initia'+_0x1f753a(0x23d)+_0x1f753a(0x21f)+_0x1f753a(0x27e));botRef=_0x50cc81,shuttingDown=![],refreshConfig(),await ensurePrefsTable()['catch'](_0xba87a5=>{const _0x12f16c=_0x1f753a;warn(name+(_0x12f16c(0x218)+_0x12f16c(0x1bb))+(_0xba87a5?.[_0x12f16c(0x22a)]||_0xba87a5));}),messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':_0x1f753a(0x222)+_0x1f753a(0x1e9),'handler':messageHandler,'moduleName':name}),info(name+(':\x20initiali'+_0x1f753a(0x1be)));}export async function cleanup(){const _0x29edf1=_0x1efb7a;try{stopManagedListener(name,_0x29edf1(0x222)+'psert'),shuttingDown=!![],messageHandler=null;}catch(_0x2f70af){warn(name+(_0x29edf1(0x271)+_0x29edf1(0x23f))+(_0x2f70af?.[_0x29edf1(0x22a)]||_0x2f70af));}finally{botRef=null,info(name+(_0x29edf1(0x1c2)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};