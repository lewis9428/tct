const _0x41b0d1=_0x5aaa;function _0xe798(){const _0x21e97b=['abled','O\x20statusvi','undefined','set','key,\x20value','led\x27\x20LIMIT','disable\x20\x20-','fromMe','tatus\x20on|e','llback\x20fai','>\x20enable\x0a',':\x20onMessag','dConfig\x20re','bled\x20row:\x20','status','psert','o\x20insert\x20d','exec','\x20\x20\x20\x20key\x20TE','imageMessa','REPLACE\x20IN','e)\x20VALUES\x20','only):\x0a','false','toLowerCas','ttonId','DISABLED','EXISTS\x20sta','op\x20error:\x20',',\x20?)','tatus]\x20dis','status@bro','updated_at','trim','zoneName','toLocaleSt',',\x20updated_','wer','stance','wer\x0a\x0aState','zed.','gistration','\x27,\x27false\x27,','enable','ailed:\x20','2qBdGHa',',\x27false\x27)',':\x20saveEnab',':\x20readEnab','DATETIME_M',':\x20cleaned\x20','tatus\x20off|','split','INSERT\x20OR\x20','message','0\x0a\x20\x20\x20\x20\x20\x20);','isArray','map','led\x20to\x20dis','wer.initia','true','failed:\x20',':\x20failed\x20t','function','nfirmation','\x0aTimezone:','ENABLED','onfig\x20erro','prefs\x27)','CONDS','videoMessa','efs\x20(\x0a\x20\x20\x20\x20','caption','dated_at=e','off','iew_prefs\x20','le_info(\x27s','ew_prefs\x20A','text','length','robi','\x20KEY,\x0a\x20\x20\x20\x20','status-vie','ctReply','AUTOVIEWST','selectedRo','conversati','error:\x20','\x20INTEGER\x20D','umn','now','132909dqPwom','696028XZDnMI','\x20(\x27enabled','lize\x20requi','\x20\x20\x20updated','Africa/Nai','wId','ID\x20unavail','read','sendMessag','isValid',')\x20DO\x20UPDAT','includes','ner\x20(bot\x20J','catch','ponseMessa',':\x20ensure\x20d','\x20autoviews','key','bled\x20row\x20f','\x27,\x20?,\x20?)\x0a\x20','singleSele','E\x20statusvi',':\x20inner\x20lo','376mtSltY','floor','>\x20disable\x0a','readMessag','\x20\x20\x20\x20value\x20','\x20\x20\x20\x20\x20ON\x20CO','tatusview_','string','isCommand','atus','tatus]\x20fai','selectedBu','EFAULT\x200','e\x20error:\x20',':\x20sendConf','atusview_p','messages.u','ew_prefs\x20(','ror:\x20','[autoviews','SELECT\x20val','3703191rJefrW','ue\x20FROM\x20st','_at\x20INTEGE','E\x20SET\x20valu','able','.upsert\x20ha','get','15984027brAgww','dated_at','efault\x20ena','at)\x20VALUES','ED_WITH_SE','umn:\x20','r:\x20','ble','.value,\x20up',':\x20viewed\x20s','eply\x20to\x20ow','rror:\x20',':\x20cannot\x20r','Status\x20Vie','ted_at\x20col','ledFromDb\x20',':\x20DB\x20init\x20','ALTER\x20TABL','able).','XT\x20PRIMARY',':\x20no\x20sendM','us\x20\x20\x20\x20\x20\x20\x20-','d:\x20','7589484ykTtDi','DD\x20COLUMN\x20','participan','run','extendedTe','hod\x20availa',':\x20messages','essage\x20met','tatus\x20stat','xtMessage','TEXT\x20NOT\x20N','value','ledToDb\x20fa','\x20key=\x27enab','4265090wgRIrs','delete','o\x20mark\x20sta','(key,\x20valu','4293316DovUez','no\x20column','(\x27enabled\x27','state','\x20at\x20','ledToDb\x20er','R\x20DEFAULT\x20','xcluded.up','ndler\x20erro','TO\x20statusv','has',':\x20ensurePr','efsTable\x20e','remoteJid','ATUS','ring','adcast','autoviewst','seMessage','\x20?)','o\x20add\x20upda','sock','Usage\x20(PM\x20'];_0xe798=function(){return _0x21e97b;};return _0xe798();}(function(_0x48d8dc,_0x17023a){const _0x2e1f43=_0x5aaa,_0x23ca69=_0x48d8dc();while(!![]){try{const _0x187dc1=parseInt(_0x2e1f43(0xed))/(-0x1*0xeb7+-0xd*-0x2d5+-0x1*0x1619)+-parseInt(_0x2e1f43(0x18d))/(0x17*-0x10f+-0x1591*-0x1+0x2ca)*(-parseInt(_0x2e1f43(0x119))/(0x1*-0x66a+-0x1ad9+0x2*0x10a3))+parseInt(_0x2e1f43(0x149))/(0x22d1+-0x1bd6*-0x1+-0x3ea3)+-parseInt(_0x2e1f43(0x145))/(0x2*0x1296+0x1174*0x1+-0x369b)+parseInt(_0x2e1f43(0x137))/(0x5*0x59e+-0x502*0x4+-0x808)+-parseInt(_0x2e1f43(0xec))/(0x1eda*-0x1+0x26ab*-0x1+-0x22c6*-0x2)*(parseInt(_0x2e1f43(0x104))/(-0x1e59+0x853*0x1+-0x1*-0x160e))+-parseInt(_0x2e1f43(0x120))/(0x990+0x1*-0x847+0x1*-0x140);if(_0x187dc1===_0x17023a)break;else _0x23ca69['push'](_0x23ca69['shift']());}catch(_0x50787e){_0x23ca69['push'](_0x23ca69['shift']());}}}(_0xe798,-0xf6068+0x82036+0x12a72c));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x41b0d1(0xe3)+_0x41b0d1(0x185);export const version='1.0.4';export const priority=-0x1*0xb63+-0x201d+0x1*0x2b85;export const configKeys=[_0x41b0d1(0xe5)+'ATUS'];function _0x5aaa(_0x5499d5,_0x538da9){const _0x3776b8=_0xe798();return _0x5aaa=function(_0x118ef4,_0x21cae6){_0x118ef4=_0x118ef4-(0x10c8+0x1678+-0x12a*0x21);let _0x87e8c1=_0x3776b8[_0x118ef4];return _0x87e8c1;},_0x5aaa(_0x5499d5,_0x538da9);}export const commands=[_0x41b0d1(0x15a)+_0x41b0d1(0x10d)];let botRef=null,DEFAULT_TIMEZONE=_0x41b0d1(0xf1)+_0x41b0d1(0xe1),CFG={'AUTOVIEWSTATUS':![]},shuttingDown=![],messageHandler=null;function refreshConfig(){const _0x180af2=_0x41b0d1;try{const _0xa7d5b9=typeof getConfig==='function'?getConfig()||{}:{};CFG[_0x180af2(0xe5)+_0x180af2(0x157)]=typeof _0xa7d5b9['AUTOVIEWST'+_0x180af2(0x157)]!==_0x180af2(0x162)?!!_0xa7d5b9['AUTOVIEWST'+_0x180af2(0x157)]:CFG['AUTOVIEWST'+_0x180af2(0x157)];}catch(_0x19207a){warn(name+(':\x20refreshC'+_0x180af2(0x1a3)+_0x180af2(0x126))+(_0x19207a?.['message']||_0x19207a));}}try{hotReloadConfig&&hotReloadConfig(()=>{refreshConfig();});}catch(_0x425b1d){warn(name+(':\x20hotReloa'+_0x41b0d1(0x16c)+_0x41b0d1(0x189)+'\x20failed:\x20')+(_0x425b1d?.['message']||_0x425b1d));}refreshConfig();async function ensurePrefsTable(){const _0x1a592f=_0x41b0d1;try{let _0x4cb9f9=[];try{const _0x4522dd=await db['all']('PRAGMA\x20tab'+_0x1a592f(0xdd)+_0x1a592f(0x10a)+_0x1a592f(0x1a4));_0x4cb9f9=(_0x4522dd||[])[_0x1a592f(0x199)](_0x19c21b=>_0x19c21b['name']);}catch(_0x4c9914){_0x4cb9f9=[];}if(!_0x4cb9f9['length'])await db[_0x1a592f(0x171)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x1a592f(0x17b)+'tusview_pr'+_0x1a592f(0xd8)+_0x1a592f(0x172)+_0x1a592f(0x133)+_0x1a592f(0xe2)+_0x1a592f(0x108)+_0x1a592f(0x141)+'ULL,\x0a\x20\x20\x20\x20\x20'+_0x1a592f(0xf0)+_0x1a592f(0x11b)+_0x1a592f(0x14f)+_0x1a592f(0x197)),_0x4cb9f9=[_0x1a592f(0xfe),_0x1a592f(0x142),'updated_at'];else{if(!_0x4cb9f9[_0x1a592f(0xf8)](_0x1a592f(0x180)))try{await db[_0x1a592f(0x13a)](_0x1a592f(0x131)+_0x1a592f(0x102)+_0x1a592f(0xde)+_0x1a592f(0x138)+_0x1a592f(0x180)+_0x1a592f(0xe9)+_0x1a592f(0x110));}catch(_0x2adb30){warn(name+(_0x1a592f(0x19e)+_0x1a592f(0x15d)+_0x1a592f(0x12e)+_0x1a592f(0x125))+(_0x2adb30?.[_0x1a592f(0x196)]||_0x2adb30));}}try{const _0x3eb15a=await db[_0x1a592f(0x11f)](_0x1a592f(0x118)+_0x1a592f(0x11a)+_0x1a592f(0x113)+'refs\x20WHERE'+_0x1a592f(0x144)+'led\x27');if(!_0x3eb15a){const _0x26e38e=Math[_0x1a592f(0x105)](Date['now']()/(0x86*-0x37+0x1*0x1643+0xa6f*0x1));try{await db[_0x1a592f(0x13a)]('INSERT\x20INT'+'O\x20statusvi'+'ew_prefs\x20('+_0x1a592f(0x164)+_0x1a592f(0x184)+_0x1a592f(0x123)+_0x1a592f(0xee)+_0x1a592f(0x18a)+_0x1a592f(0x15c),[_0x26e38e]);}catch(_0x23f770){try{await db[_0x1a592f(0x13a)]('INSERT\x20OR\x20'+_0x1a592f(0x174)+_0x1a592f(0x152)+_0x1a592f(0xdc)+_0x1a592f(0x148)+_0x1a592f(0x175)+_0x1a592f(0x14b)+_0x1a592f(0x18e));}catch(_0x224ec1){warn(name+(':\x20failed\x20t'+_0x1a592f(0x170)+_0x1a592f(0x122)+_0x1a592f(0x16d))+(_0x224ec1?.['message']||_0x224ec1));}}}}catch(_0x2a4a4e){warn(name+(_0x1a592f(0xfc)+'efault\x20ena'+_0x1a592f(0xff)+_0x1a592f(0x18c))+(_0x2a4a4e?.[_0x1a592f(0x196)]||_0x2a4a4e));}}catch(_0x414df0){warn(name+(_0x1a592f(0x154)+_0x1a592f(0x155)+_0x1a592f(0x12b))+(_0x414df0?.[_0x1a592f(0x196)]||_0x414df0));throw _0x414df0;}}async function readEnabledFromDb(){const _0x455098=_0x41b0d1;try{const _0x27497b=await db[_0x455098(0x11f)](_0x455098(0x118)+'ue\x20FROM\x20st'+_0x455098(0x113)+'refs\x20WHERE'+_0x455098(0x144)+_0x455098(0x165)+'\x201');if(!_0x27497b)return![];const _0x406d29=String(_0x27497b[_0x455098(0x142)])[_0x455098(0x178)+'e']();return _0x406d29===_0x455098(0x19c)||_0x406d29==='1';}catch(_0x18c727){return warn(name+(_0x455098(0x190)+_0x455098(0x12f)+_0x455098(0xe8))+(_0x18c727?.[_0x455098(0x196)]||_0x18c727)),![];}}async function saveEnabledToDb(_0x5f5114){const _0x109ff8=_0x41b0d1;try{const _0x4a5a06=_0x5f5114?_0x109ff8(0x19c):_0x109ff8(0x177),_0x9006a7=Math[_0x109ff8(0x105)](Date[_0x109ff8(0xeb)]()/(0x21*0xf1+0x1*-0x35e+-0x17cb));return await db[_0x109ff8(0x13a)]('INSERT\x20INT'+_0x109ff8(0x161)+_0x109ff8(0x115)+_0x109ff8(0x164)+_0x109ff8(0x184)+_0x109ff8(0x123)+_0x109ff8(0xee)+_0x109ff8(0x100)+_0x109ff8(0x109)+'NFLICT(key'+_0x109ff8(0xf7)+_0x109ff8(0x11c)+'e=excluded'+_0x109ff8(0x128)+_0x109ff8(0xda)+_0x109ff8(0x150)+_0x109ff8(0x121),[_0x4a5a06,_0x9006a7]),!![];}catch(_0x42553f){const _0x5e7f20=String(_0x42553f?.[_0x109ff8(0x196)]||'')[_0x109ff8(0x178)+'e']();if(_0x5e7f20[_0x109ff8(0xf8)]('has\x20no\x20col'+_0x109ff8(0xea))||_0x5e7f20[_0x109ff8(0xf8)](_0x109ff8(0x14a)))try{return await db['run'](_0x109ff8(0x195)+'REPLACE\x20IN'+_0x109ff8(0x152)+_0x109ff8(0xdc)+_0x109ff8(0x148)+_0x109ff8(0x175)+_0x109ff8(0x14b)+_0x109ff8(0x17d),[_0x5f5114?_0x109ff8(0x19c):_0x109ff8(0x177)]),!![];}catch(_0x24c214){return warn(name+(':\x20saveEnab'+_0x109ff8(0x143)+_0x109ff8(0x169)+'led:\x20')+(_0x24c214?.[_0x109ff8(0x196)]||_0x24c214)),![];}return warn(name+(_0x109ff8(0x18f)+_0x109ff8(0x14e)+_0x109ff8(0x116))+(_0x42553f?.['message']||_0x42553f)),![];}}function formatTimestamp(_0x1ad8b0=Date[_0x41b0d1(0xeb)](),_0x1165b5=DEFAULT_TIMEZONE){const _0x3aefd8=_0x41b0d1;try{const _0x5b42b3=DateTime['fromMillis'](_0x1ad8b0)['setZone'](_0x1165b5);if(!_0x5b42b3[_0x3aefd8(0xf6)])return new Date(_0x1ad8b0)['toLocaleSt'+_0x3aefd8(0x158)]();return _0x5b42b3[_0x3aefd8(0x183)+'ring'](DateTime[_0x3aefd8(0x191)+_0x3aefd8(0x124)+_0x3aefd8(0xd6)])+'\x20('+_0x5b42b3[_0x3aefd8(0x182)]+')';}catch(_0xb8d74a){return new Date(_0x1ad8b0)[_0x3aefd8(0x183)+_0x3aefd8(0x158)]();}}function createMessageHandler(){return async function _0x4ca50c(_0x1d8dcc){const _0xe61829=_0x5aaa;try{if(shuttingDown)return;refreshConfig();const _0x4af4e3=await readEnabledFromDb();if(!_0x4af4e3)return;const {messages:_0x35553a}=_0x1d8dcc||{};if(!Array[_0xe61829(0x198)](_0x35553a)||_0x35553a['length']===-0x1c71+-0x9f*-0x1+-0x3*-0x946)return;for(const _0x55695c of _0x35553a){try{if(!_0x55695c||!_0x55695c[_0xe61829(0xfe)])continue;const _0x609f92=_0x55695c['key']['remoteJid']||_0x55695c[_0xe61829(0x156)]||'',_0x2a3b65=_0x55695c[_0xe61829(0xfe)]['participan'+'t']||null;if(_0x609f92!==_0xe61829(0x17f)+_0xe61829(0x159)||!_0x2a3b65)continue;const _0x5bf763=formatTimestamp(Date[_0xe61829(0xeb)](),DEFAULT_TIMEZONE);info(name+(_0xe61829(0x129)+'tatus\x20from'+'\x20')+_0x2a3b65+_0xe61829(0x14d)+_0x5bf763);try{if(typeof botRef?.[_0xe61829(0x15e)]?.[_0xe61829(0x107)+'es']===_0xe61829(0x19f))await botRef[_0xe61829(0x15e)][_0xe61829(0x107)+'es']([_0x55695c[_0xe61829(0xfe)]]);else{if(typeof botRef?.[_0xe61829(0x15e)]?.[_0xe61829(0xf4)]===_0xe61829(0x19f))await botRef['sock']['read']([_0x55695c['key']]);else typeof botRef?.[_0xe61829(0x107)+'es']===_0xe61829(0x19f)&&await botRef[_0xe61829(0x107)+'es']([_0x55695c['key']]);}}catch(_0x5cebec){warn(name+(_0xe61829(0x19e)+_0xe61829(0x147)+'tus\x20as\x20rea'+_0xe61829(0x136))+(_0x5cebec?.[_0xe61829(0x196)]||_0x5cebec));}}catch(_0x3a71e8){warn(name+(_0xe61829(0x103)+_0xe61829(0x17c))+(_0x3a71e8?.[_0xe61829(0x196)]||_0x3a71e8));}}}catch(_0x55a782){warn(name+(_0xe61829(0x13d)+_0xe61829(0x11e)+_0xe61829(0x151)+_0xe61829(0x126))+(_0x55a782?.['message']||_0x55a782));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x23ed*0x1+0x1*-0x2531+0xda*0x56)*(0x142*0x16+0x40+-0x1804);function markCmdProcessed(_0x215e45){const _0x3af1ce=_0x41b0d1;if(!_0x215e45)return;if(processedCmdKeys[_0x3af1ce(0x153)](_0x215e45))try{clearTimeout(processedCmdKeys[_0x3af1ce(0x11f)](_0x215e45));}catch(_0x42aebb){};const _0x5c37f1=setTimeout(()=>processedCmdKeys[_0x3af1ce(0x146)](_0x215e45),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x3af1ce(0x163)](_0x215e45,_0x5c37f1);}function isCmdProcessed(_0x291e68){const _0x3a1098=_0x41b0d1;return _0x291e68&&processedCmdKeys[_0x3a1098(0x153)](_0x291e68);}export async function onMessage(_0x2d7d23){const _0x59f159=_0x41b0d1;try{if(!_0x2d7d23||!_0x2d7d23[_0x59f159(0xfe)]||!_0x2d7d23[_0x59f159(0x196)]||!_0x2d7d23[_0x59f159(0x10c)])return;if(isJidGroup(_0x2d7d23[_0x59f159(0xfe)][_0x59f159(0x156)]))return;const _0x1de906=_0x2d7d23['key'][_0x59f159(0x167)],_0x2fd91b=await isSudo(botRef,_0x2d7d23)['catch'](()=>![]);if(!_0x1de906&&!_0x2fd91b)return;let _0x623c81;if(_0x1de906){_0x623c81=getBotJid();if(!_0x623c81){warn(name+(_0x59f159(0x12c)+_0x59f159(0x12a)+_0x59f159(0xf9)+_0x59f159(0xf3)+_0x59f159(0x132)));return;}}else _0x623c81=_0x2d7d23[_0x59f159(0xfe)][_0x59f159(0x156)];const _0x2542fa=String(_0x2d7d23['key']['remoteJid']||'')+'::'+String(_0x2d7d23[_0x59f159(0xfe)]['id']||_0x2d7d23[_0x59f159(0xfe)][_0x59f159(0x139)+'t']||'');if(isCmdProcessed(_0x2542fa))return;markCmdProcessed(_0x2542fa);const _0x44ce85=typeof _0x2d7d23[_0x59f159(0xdf)]===_0x59f159(0x10b)&&_0x2d7d23[_0x59f159(0xdf)][_0x59f159(0x181)]()[_0x59f159(0xe0)]?_0x2d7d23['text'][_0x59f159(0x181)]():function _0x4a7613(_0x4fc36d){const _0xf1ae09=_0x59f159;if(!_0x4fc36d||!_0x4fc36d[_0xf1ae09(0x196)])return'';const _0x625f5e=_0x4fc36d[_0xf1ae09(0x196)];if(_0x625f5e[_0xf1ae09(0xe7)+'on'])return _0x625f5e[_0xf1ae09(0xe7)+'on'];if(_0x625f5e[_0xf1ae09(0x13b)+_0xf1ae09(0x140)]?.['text'])return _0x625f5e[_0xf1ae09(0x13b)+'xtMessage'][_0xf1ae09(0xdf)];if(_0x625f5e[_0xf1ae09(0x173)+'ge']?.[_0xf1ae09(0xd9)])return _0x625f5e[_0xf1ae09(0x173)+'ge'][_0xf1ae09(0xd9)];if(_0x625f5e[_0xf1ae09(0xd7)+'ge']?.[_0xf1ae09(0xd9)])return _0x625f5e[_0xf1ae09(0xd7)+'ge'][_0xf1ae09(0xd9)];if(_0x625f5e['buttonsRes'+_0xf1ae09(0xfb)+'ge']?.[_0xf1ae09(0x10f)+_0xf1ae09(0x179)])return _0x625f5e['buttonsRes'+_0xf1ae09(0xfb)+'ge']['selectedBu'+'ttonId'];if(_0x625f5e['listRespon'+_0xf1ae09(0x15b)]?.[_0xf1ae09(0x101)+_0xf1ae09(0xe4)]?.[_0xf1ae09(0xe6)+_0xf1ae09(0xf2)])return _0x625f5e['listRespon'+_0xf1ae09(0x15b)]['singleSele'+_0xf1ae09(0xe4)]['selectedRo'+'wId'];return'';}(_0x2d7d23)||'';if(!_0x44ce85)return;const _0x2cbda1=(_0x44ce85[_0x59f159(0x194)](/\r?\n/)[-0xa32+-0x4*0x5ff+0x46*0x7d]||'')[_0x59f159(0x181)](),_0x16e369=_0x2cbda1[_0x59f159(0x194)](/\s+/),_0x51bd91=(_0x16e369[-0x2*0xda2+-0x1*-0x129e+0x8a6]||'')['toLowerCas'+'e']();if(!commands[_0x59f159(0xf8)](_0x51bd91))return;const _0x454b6b=(_0x16e369[-0x570*-0x2+-0x3d5*0x3+0xa0]||'')['toLowerCas'+'e']();if(['on',_0x59f159(0x18b),'true','1'][_0x59f159(0xf8)](_0x454b6b)){const _0x180460=await saveEnabledToDb(!![]);if(_0x180460)await sendConfirmation(_0x623c81,_0x59f159(0x117)+'tatus]\x20ena'+'bled');else await sendConfirmation(_0x623c81,_0x59f159(0x117)+_0x59f159(0x10e)+'led\x20to\x20ena'+_0x59f159(0x127));return;}if([_0x59f159(0xdb),'disable',_0x59f159(0x177),'0'][_0x59f159(0xf8)](_0x454b6b)){const _0x454880=await saveEnabledToDb(![]);if(_0x454880)await sendConfirmation(_0x623c81,_0x59f159(0x117)+_0x59f159(0x17e)+_0x59f159(0x160));else await sendConfirmation(_0x623c81,_0x59f159(0x117)+'tatus]\x20fai'+_0x59f159(0x19a)+_0x59f159(0x11d));return;}if(_0x454b6b===_0x59f159(0x16e)||_0x454b6b===_0x59f159(0x14c)||!_0x454b6b){const _0x5244a0=await readEnabledFromDb(),_0x54dbd0=_0x5244a0?_0x59f159(0x1a2):_0x59f159(0x17a);await sendConfirmation(_0x623c81,_0x59f159(0x12d)+_0x59f159(0x187)+':\x20'+_0x54dbd0+(_0x59f159(0x1a1)+'\x20')+DEFAULT_TIMEZONE);return;}await sendConfirmation(_0x623c81,_0x59f159(0x15f)+_0x59f159(0x176)+(_0x59f159(0xfd)+_0x59f159(0x168)+'nable\x20\x20\x20\x20-'+_0x59f159(0x16a))+(_0x59f159(0xfd)+_0x59f159(0x193)+_0x59f159(0x166)+_0x59f159(0x106))+(_0x59f159(0xfd)+_0x59f159(0x13f)+_0x59f159(0x135)+'>\x20show\x20sta'+'te'));}catch(_0x657cdc){warn(name+(_0x59f159(0x16b)+_0x59f159(0x111))+(_0x657cdc?.['message']||_0x657cdc));}}async function sendConfirmation(_0x5a12f5,_0x11c27e){const _0x2e0017=_0x41b0d1;try{if(!_0x5a12f5)return;if(botRef&&botRef['sock']&&typeof botRef[_0x2e0017(0x15e)][_0x2e0017(0xf5)+'e']===_0x2e0017(0x19f))await botRef['sock']['sendMessag'+'e'](_0x5a12f5,{'text':_0x11c27e});else botRef&&typeof botRef[_0x2e0017(0xf5)+'e']===_0x2e0017(0x19f)?await botRef[_0x2e0017(0xf5)+'e'](_0x5a12f5,{'text':_0x11c27e}):warn(name+(_0x2e0017(0x134)+_0x2e0017(0x13e)+_0x2e0017(0x13c)+'ble\x20for\x20co'+_0x2e0017(0x1a0)));}catch(_0x36a605){warn(name+(_0x2e0017(0x112)+'irmation\x20f'+'ailed:\x20')+(_0x36a605?.['message']||_0x36a605));}}export async function initialize(_0x21d7e9){const _0x1862a7=_0x41b0d1;if(!_0x21d7e9)throw new Error(_0x1862a7(0xe3)+_0x1862a7(0x19b)+_0x1862a7(0xef)+'res\x20bot\x20in'+_0x1862a7(0x186));botRef=_0x21d7e9,shuttingDown=![],refreshConfig(),await ensurePrefsTable()[_0x1862a7(0xfa)](_0x5c83d6=>{const _0x4a60bf=_0x1862a7;warn(name+(_0x4a60bf(0x130)+_0x4a60bf(0x19d))+(_0x5c83d6?.[_0x4a60bf(0x196)]||_0x5c83d6));}),messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':_0x1862a7(0x114)+_0x1862a7(0x16f),'handler':messageHandler,'moduleName':name}),info(name+(':\x20initiali'+_0x1862a7(0x188)));}export async function cleanup(){const _0x5b5cb9=_0x41b0d1;try{stopManagedListener(name,_0x5b5cb9(0x114)+_0x5b5cb9(0x16f)),shuttingDown=!![],messageHandler=null;}catch(_0xfcabec){warn(name+(':\x20cleanup\x20'+_0x5b5cb9(0xe8))+(_0xfcabec?.[_0x5b5cb9(0x196)]||_0xfcabec));}finally{botRef=null,info(name+(_0x5b5cb9(0x192)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};