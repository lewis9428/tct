const _0xb7f522=_0x34ae;(function(_0x3742d2,_0x1406e8){const _0x2d3b28=_0x34ae,_0x6eea1f=_0x3742d2();while(!![]){try{const _0x2ec8f2=parseInt(_0x2d3b28(0x221))/(-0x120c+0x132d*-0x2+-0x3*-0x12cd)+parseInt(_0x2d3b28(0x2d3))/(-0x1a4b+0x1161+0x8ec)*(-parseInt(_0x2d3b28(0x212))/(0x237*0x3+-0x791*0x3+0x1011))+parseInt(_0x2d3b28(0x2f8))/(-0x26ab+-0x121+-0xc4*-0x34)*(parseInt(_0x2d3b28(0x1c7))/(0x82c+0x143a*0x1+-0x1c61))+-parseInt(_0x2d3b28(0x2d9))/(0xb*0x378+-0x1253+0xb*-0x1cd)+parseInt(_0x2d3b28(0x27e))/(0x5*0x5de+0x3b*-0x15+-0x1878)+parseInt(_0x2d3b28(0x21a))/(-0x766+-0x1*0x21e3+0x2951)+-parseInt(_0x2d3b28(0x30c))/(-0x1*0x22c1+0x203*-0x10+0x1*0x42fa)*(parseInt(_0x2d3b28(0x269))/(0x1*0x938+-0x1487+0xb59));if(_0x2ec8f2===_0x1406e8)break;else _0x6eea1f['push'](_0x6eea1f['shift']());}catch(_0x2efd7c){_0x6eea1f['push'](_0x6eea1f['shift']());}}}(_0x3ab2,-0xa*-0x1000+0xc91*-0x5+0x177ef*0x1));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x454d29 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0xb7f522(0x16d);export const version='2.3.2';export const priority=0x4cf*0x8+0x71a*0x5+-0x61*0xc2;export const configKeys=[_0xb7f522(0x1c3)];export const commands=['listlock',_0xb7f522(0x344),'unlockall',_0xb7f522(0x2d7),_0xb7f522(0x1e5),_0xb7f522(0x260),_0xb7f522(0x2bb),_0xb7f522(0x241),_0xb7f522(0x23f)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0xb7f522(0x2b4)+_0xb7f522(0x23b)+_0xb7f522(0x38b)+_0xb7f522(0x33b),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x178990){const _0x3e1ed2=_0xb7f522;if(!_0x178990)return[];const _0x5e89ae=new Set(),_0x3e36e5=[];for(const _0x2f5de5 of _0x178990){const _0x3feae0=_0x2f5de5===undefined||_0x2f5de5===null?'':String(_0x2f5de5)['trim']();if(!_0x3feae0)continue;!_0x5e89ae[_0x3e1ed2(0x335)](_0x3feae0)&&(_0x5e89ae[_0x3e1ed2(0x18b)](_0x3feae0),_0x3e36e5[_0x3e1ed2(0x171)](_0x3feae0));}return _0x3e36e5;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0x15*0xa7+-0x18d2+0xd*0xdb,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(-0x3*-0x877+-0xaf9+-0x38c*0x4)*(-0x31d*-0x9+-0x14b7+-0x366);function _0x34ae(_0x1c099a,_0x9cbb20){const _0x21b567=_0x3ab2();return _0x34ae=function(_0x42540c,_0x5ea41a){_0x42540c=_0x42540c-(0x5*0x625+-0x218f+0x433);let _0x5b06c6=_0x21b567[_0x42540c];return _0x5b06c6;},_0x34ae(_0x1c099a,_0x9cbb20);}function markProcessed(_0x239d92){const _0x41600d=_0xb7f522;if(!_0x239d92)return;if(processedMessageKeys[_0x41600d(0x335)](_0x239d92))try{clearTimeout(processedMessageKeys[_0x41600d(0x2cf)](_0x239d92));}catch(_0x4c1ee2){}const _0x443a94=setTimeout(()=>processedMessageKeys[_0x41600d(0x254)](_0x239d92),DEDUPE_TTL_MS);processedMessageKeys[_0x41600d(0x201)](_0x239d92,_0x443a94);}function isProcessed(_0x17e882){const _0x205188=_0xb7f522;return _0x17e882&&processedMessageKeys[_0x205188(0x335)](_0x17e882);}const sleep=_0x43908f=>new Promise(_0x56da6c=>setTimeout(_0x56da6c,_0x43908f));function nowSec(){const _0x49c056=_0xb7f522;return Math[_0x49c056(0x200)](Date[_0x49c056(0x18d)]()/(0x1*0x13c5+-0x1cd*-0x1+-0x22*0x85));}function escapeRegex(_0x476dc5){const _0x1f129c=_0xb7f522;return String(_0x476dc5||'')[_0x1f129c(0x3a4)](/[.*+?^${}()|[\]\\]/g,_0x1f129c(0x390));}function normalizeForMatch(_0x32528d){const _0x231145=_0xb7f522;let _0x303b7b=String(_0x32528d||'');try{_0x303b7b=_0x303b7b['normalize'](_0x231145(0x30e));}catch(_0x18fab0){}if(CFG[_0x231145(0x353)+'REMOVE_DIA'+_0x231145(0x31f)])try{_0x303b7b=_0x303b7b[_0x231145(0x2f3)]('NFD')[_0x231145(0x3a4)](/\p{M}/gu,'')[_0x231145(0x2f3)]('NFKC');}catch(_0x1ef40f){}return _0x303b7b[_0x231145(0x190)+'e']();}class AhoCorasick{constructor(_0x4801cd=[]){const _0x2633b0=_0xb7f522;this[_0x2633b0(0x16f)]=[{'next':{},'fail':0x0,'output':[]}];if(_0x4801cd&&_0x4801cd[_0x2633b0(0x1ee)])this[_0x2633b0(0x1b0)](_0x4801cd);}[_0xb7f522(0x1b0)](_0x46b5df){const _0x1b8685=_0xb7f522;this['nodes']=[{'next':{},'fail':0x0,'output':[]}];for(const _0x15040a of _0x46b5df){let _0x278d85=-0x1a3c+0x7cc+0x1270;for(const _0x52c78f of _0x15040a){const _0x120f2b=_0x52c78f;!this[_0x1b8685(0x16f)][_0x278d85][_0x1b8685(0x31c)][_0x120f2b]&&(this[_0x1b8685(0x16f)][_0x278d85]['next'][_0x120f2b]=this[_0x1b8685(0x16f)][_0x1b8685(0x1ee)],this[_0x1b8685(0x16f)][_0x1b8685(0x171)]({'next':{},'fail':0x0,'output':[]})),_0x278d85=this[_0x1b8685(0x16f)][_0x278d85][_0x1b8685(0x31c)][_0x120f2b];}this[_0x1b8685(0x16f)][_0x278d85][_0x1b8685(0x1ec)][_0x1b8685(0x171)](_0x15040a);}const _0x3a21b4=[];for(const _0x14746f in this[_0x1b8685(0x16f)][0xdc7*-0x2+0x562+0x4*0x58b][_0x1b8685(0x31c)]){const _0x4c38a4=this[_0x1b8685(0x16f)][-0x96e+-0x2c7+-0xc35*-0x1][_0x1b8685(0x31c)][_0x14746f];this[_0x1b8685(0x16f)][_0x4c38a4][_0x1b8685(0x1da)]=0x2139+0x19b*-0x3+0x6*-0x4bc,_0x3a21b4[_0x1b8685(0x171)](_0x4c38a4);}while(_0x3a21b4['length']){const _0x4d5c0e=_0x3a21b4[_0x1b8685(0x16e)]();for(const _0x58e2d1 in this[_0x1b8685(0x16f)][_0x4d5c0e][_0x1b8685(0x31c)]){const _0x4e610b=this[_0x1b8685(0x16f)][_0x4d5c0e]['next'][_0x58e2d1];let _0x25c779=this[_0x1b8685(0x16f)][_0x4d5c0e][_0x1b8685(0x1da)];while(_0x25c779&&!this[_0x1b8685(0x16f)][_0x25c779][_0x1b8685(0x31c)][_0x58e2d1])_0x25c779=this[_0x1b8685(0x16f)][_0x25c779][_0x1b8685(0x1da)];if(this[_0x1b8685(0x16f)][_0x25c779][_0x1b8685(0x31c)][_0x58e2d1])this[_0x1b8685(0x16f)][_0x4e610b][_0x1b8685(0x1da)]=this['nodes'][_0x25c779][_0x1b8685(0x31c)][_0x58e2d1];else this[_0x1b8685(0x16f)][_0x4e610b]['fail']=0x745*-0x5+0x3d*0x17+0x9*0x36e;this[_0x1b8685(0x16f)][_0x4e610b]['output'][_0x1b8685(0x171)](...this['nodes'][this[_0x1b8685(0x16f)][_0x4e610b]['fail']][_0x1b8685(0x1ec)]),_0x3a21b4[_0x1b8685(0x171)](_0x4e610b);}}}[_0xb7f522(0x382)](_0x203029){const _0x324b1f=_0xb7f522,_0x16aecf=[];let _0x1ec946=-0x833+-0x529+-0x6*-0x23a;for(let _0x8ab223=-0xb3d+-0x34d*-0xb+-0xc89*0x2;_0x8ab223<_0x203029['length'];_0x8ab223++){const _0x3db134=_0x203029[_0x8ab223];while(_0x1ec946&&!this[_0x324b1f(0x16f)][_0x1ec946][_0x324b1f(0x31c)][_0x3db134])_0x1ec946=this[_0x324b1f(0x16f)][_0x1ec946][_0x324b1f(0x1da)];if(this[_0x324b1f(0x16f)][_0x1ec946][_0x324b1f(0x31c)][_0x3db134])_0x1ec946=this[_0x324b1f(0x16f)][_0x1ec946][_0x324b1f(0x31c)][_0x3db134];else _0x1ec946=0x23d2+0x211+-0xb7*0x35;if(this[_0x324b1f(0x16f)][_0x1ec946][_0x324b1f(0x1ec)][_0x324b1f(0x1ee)])for(const _0x544fe6 of this[_0x324b1f(0x16f)][_0x1ec946][_0x324b1f(0x1ec)]){_0x16aecf[_0x324b1f(0x171)]({'keyword':_0x544fe6,'index':_0x8ab223-_0x544fe6[_0x324b1f(0x1ee)]+(0x239*-0xa+0x1*-0x254f+0x2*0x1dc5)});}}return _0x16aecf;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x5cc0bd){const _0x67fa=_0xb7f522,_0xbaa70=String(_0x5cc0bd||'')[_0x67fa(0x162)](),_0x15d236=escapeRegex(_0xbaa70);try{const _0x161826=_0x67fa(0x2fe)+_0x67fa(0x297)+_0x15d236+(_0x67fa(0x1b5)+_0x67fa(0x2ce));return new RegExp(_0x161826,'iu');}catch(_0x4112ea){try{return new RegExp('\x5cb'+_0x15d236+'\x5cb','i');}catch(_0x3fd1f){return new RegExp(_0x15d236,'i');}}}function wildcardToRegex(_0x19eb50){const _0x200044=_0xb7f522,_0x100ebc=String(_0x19eb50||'')[_0x200044(0x162)](),_0x4a9130=_0x100ebc[_0x200044(0x3a4)](/\*/g,'')['length']>-0xb4e+0x29*-0x4f+0x17f5;if(!_0x4a9130)throw new Error(_0x200044(0x21f)+'ust\x20contai'+_0x200044(0x226)+_0x200044(0x375)+'\x20*');const _0x3e8cc3=_0x100ebc['split']('*')[_0x200044(0x1f6)](_0x2e02b4=>escapeRegex(_0x2e02b4)),_0x5a5fef=_0x3e8cc3[_0x200044(0x232)](_0x200044(0x26d)+_0x200044(0x365));try{const _0x2ad501='(?<![\x5cp{L}'+_0x200044(0x297)+_0x5a5fef+(_0x200044(0x1b5)+'p{N}_])');return new RegExp(_0x2ad501,'iu');}catch(_0x5158cd){const _0x30a7a2=_0x3e8cc3['join']('.*');try{return new RegExp(''+_0x30a7a2,'i');}catch(_0x21d9e3){return new RegExp(_0x3e8cc3[_0x200044(0x232)](''),'i');}}}function setupSendApi(){const _0x564c09=_0xb7f522;if(!botRef)return;if(typeof botRef['sendMessag'+'e']===_0x564c09(0x22b))sendApi=async(_0x5f5d46,_0x316a97)=>await botRef[_0x564c09(0x211)+'e'](_0x5f5d46,_0x316a97);else botRef[_0x564c09(0x1e4)]&&typeof botRef['sock'][_0x564c09(0x211)+'e']===_0x564c09(0x22b)?sendApi=async(_0x2ad78c,_0x40936b)=>await botRef['sock'][_0x564c09(0x211)+'e'](_0x2ad78c,_0x40936b):sendApi=null;}async function sendText(_0x807f53,_0xce79b5,_0x478455=[]){const _0x44d50b=_0xb7f522;if(!_0xce79b5||!_0x807f53)return;const _0x33db18={'text':String(_0xce79b5)};if(Array[_0x44d50b(0x2ca)](_0x478455)&&_0x478455[_0x44d50b(0x1ee)])_0x33db18[_0x44d50b(0x1cf)]=_0x478455;try{if(!sendApi){warn('[lock]\x20sen'+_0x44d50b(0x164)+_0x44d50b(0x246));return;}await sendApi(_0x807f53,_0x33db18);}catch(_0x5eccf1){warn(_0x44d50b(0x1fa)+_0x44d50b(0x389)+_0x44d50b(0x17c)+_0x807f53+':\x20'+(_0x5eccf1?.[_0x44d50b(0x21e)]||_0x5eccf1));}}async function tableExists(_0x11bc2d){const _0x53d0e7=_0xb7f522;try{const _0x4e18bb=await db['get'](_0x53d0e7(0x2d8)+_0x53d0e7(0x258)+_0x53d0e7(0x230)+'\x20WHERE\x20typ'+_0x53d0e7(0x29b)+_0x53d0e7(0x1cd),[_0x11bc2d]);return!!_0x4e18bb;}catch(_0x2495ca){return warn(_0x53d0e7(0x374)+'leExists\x20e'+_0x53d0e7(0x16b)+(_0x2495ca?.['message']||_0x2495ca)),![];}}async function getTableColumns(_0x4febfe){const _0x3641c1=_0xb7f522;try{const _0xf86fd=await db[_0x3641c1(0x2b3)](_0x3641c1(0x292)+_0x3641c1(0x36f)+_0x4febfe+')');return(_0xf86fd||[])[_0x3641c1(0x1f6)](_0x6220cd=>_0x6220cd[_0x3641c1(0x1a8)]);}catch(_0x4fdef2){return warn(_0x3641c1(0x24c)+_0x3641c1(0x1d5)+_0x3641c1(0x278)+'or\x20'+_0x4febfe+':\x20'+(_0x4fdef2?.[_0x3641c1(0x21e)]||_0x4fdef2)),[];}}async function readAndNormalizeExistingLocks(){const _0x1635ad=_0xb7f522;try{const _0x3e4967=await db[_0x1635ad(0x2b3)](_0x1635ad(0x2f1)+_0x1635ad(0x178)),_0x20b6ea=new Map();for(const _0x4e472c of _0x3e4967||[]){const _0x46c3c8=[_0x1635ad(0x282),_0x1635ad(0x3a3),_0x1635ad(0x1ff),_0x1635ad(0x32f),'chat'],_0x323a20=[_0x1635ad(0x333),_0x1635ad(0x26e),_0x1635ad(0x28e),_0x1635ad(0x313),'value',_0x1635ad(0x32d),_0x1635ad(0x21e)];let _0x1806b2=null;for(const _0x1d1a87 of _0x46c3c8)if(_0x1d1a87 in _0x4e472c&&_0x4e472c[_0x1d1a87]){_0x1806b2=String(_0x4e472c[_0x1d1a87]);break;}let _0x58d14e=null;for(const _0xf1596e of _0x323a20)if(_0xf1596e in _0x4e472c&&_0x4e472c[_0xf1596e]){_0x58d14e=String(_0x4e472c[_0xf1596e]);break;}if(!_0x1806b2||!_0x58d14e)for(const _0x5d6473 of Object['keys'](_0x4e472c)){const _0x336efb=_0x4e472c[_0x5d6473];if(!_0x1806b2&&typeof _0x336efb===_0x1635ad(0x309)&&_0x336efb[_0x1635ad(0x252)]('@'))_0x1806b2=_0x336efb;if(!_0x58d14e&&typeof _0x336efb===_0x1635ad(0x309)&&_0x336efb['length']<0x22*0x29+-0x11c2+-0x6*-0x250&&!_0x336efb['includes']('@'))_0x58d14e=_0x336efb;}if(!_0x1806b2||!_0x58d14e)continue;let _0x3e1955=_0x58d14e[_0x1635ad(0x162)](),_0x3a92ad=_0x1635ad(0x249);if(_0x3e1955[_0x1635ad(0x190)+'e']()[_0x1635ad(0x2dc)](_0x1635ad(0x30d)))_0x3a92ad='regex',_0x3e1955=_0x3e1955[_0x1635ad(0x1f1)](0x1*0x265a+0x20f3*0x1+0x101*-0x47)[_0x1635ad(0x162)]();else{if(_0x3e1955[_0x1635ad(0x252)]('*'))_0x3a92ad=_0x1635ad(0x392);else _0x3a92ad=_0x1635ad(0x249);}const _0x513eb3=_0x4e472c['created_by']||_0x4e472c[_0x1635ad(0x2e5)]||_0x4e472c[_0x1635ad(0x210)]||_0x4e472c[_0x1635ad(0x1c6)]||'',_0x591fef=Number(_0x4e472c[_0x1635ad(0x39c)]||_0x4e472c['ts']||_0x4e472c[_0x1635ad(0x35a)]||-0x419*-0x6+0x95f*0x3+-0x34b3)||nowSec(),_0xe48dc1=_0x1806b2+'||'+_0x3e1955;if(!_0x20b6ea[_0x1635ad(0x335)](_0xe48dc1))_0x20b6ea[_0x1635ad(0x201)](_0xe48dc1,{'chat_jid':_0x1806b2,'phrase':_0x3e1955,'type':_0x3a92ad,'created_by':_0x513eb3,'created_at':_0x591fef,'hit_count':Number(_0x4e472c[_0x1635ad(0x32b)]||-0x2*-0x12b5+0x7*0x21+-0x1*0x2651)});else{const _0x1d9e56=_0x20b6ea[_0x1635ad(0x2cf)](_0xe48dc1);_0x1d9e56[_0x1635ad(0x39c)]=Math[_0x1635ad(0x27f)](_0x1d9e56[_0x1635ad(0x39c)]||_0x591fef,_0x591fef),_0x1d9e56[_0x1635ad(0x32b)]=(_0x1d9e56[_0x1635ad(0x32b)]||0x1*-0x1724+-0x7ef+0xb9*0x2b)+(Number(_0x4e472c['hit_count'])||0x1*-0x1284+0xb09+0x77b);}}return Array[_0x1635ad(0x395)](_0x20b6ea[_0x1635ad(0x351)]());}catch(_0x3cb112){return warn(_0x1635ad(0x341)+_0x1635ad(0x3a1)+_0x1635ad(0x18c)+_0x1635ad(0x1a2)+_0x1635ad(0x21b)+(_0x3cb112?.[_0x1635ad(0x21e)]||_0x3cb112)),[];}}async function ensureSchema(){const _0x3917ce=_0xb7f522,_0x130fde={'id':_0x3917ce(0x303)+_0x3917ce(0x28a)+_0x3917ce(0x239)+_0x3917ce(0x372),'chat_jid':'TEXT\x20NOT\x20N'+_0x3917ce(0x253),'phrase':'TEXT\x20NOT\x20N'+_0x3917ce(0x253),'type':_0x3917ce(0x317)+_0x3917ce(0x343)+'\x27','created_by':'TEXT\x20DEFAU'+_0x3917ce(0x2e6),'created_at':'INTEGER\x20DE'+_0x3917ce(0x2cb),'hit_count':_0x3917ce(0x337)+_0x3917ce(0x2cb),'is_valid_regex':_0x3917ce(0x337)+_0x3917ce(0x17a)};try{const _0x58780c=await tableExists(_0x3917ce(0x2ed));if(!_0x58780c){const _0xf9aa92=Object[_0x3917ce(0x2cd)](_0x130fde)['map'](([_0x3970ad,_0x5a1dd6])=>_0x3970ad+'\x20'+_0x5a1dd6)['join'](_0x3917ce(0x2c6));await db[_0x3917ce(0x272)](_0x3917ce(0x1bb)+_0x3917ce(0x36a)+_0x3917ce(0x319)+_0x3917ce(0x300)+_0xf9aa92+(_0x3917ce(0x24b)+'\x20\x20UNIQUE(c'+'hat_jid,\x20p'+_0x3917ce(0x33e)+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20\x20\x20'));try{await db['exec'](_0x3917ce(0x31d)+_0x3917ce(0x208)+_0x3917ce(0x1f7)+'_locks_cha'+'t\x20ON\x20locks'+_0x3917ce(0x1dc)+';');}catch(_0x3910a1){}try{await db[_0x3917ce(0x272)](_0x3917ce(0x173)+'QUE\x20INDEX\x20'+_0x3917ce(0x1c4)+_0x3917ce(0x396)+_0x3917ce(0x20d)+_0x3917ce(0x37c)+_0x3917ce(0x37a)+'phrase);');}catch(_0x3c6a09){}info(_0x3917ce(0x270)+_0x3917ce(0x383)+_0x3917ce(0x357)+_0x3917ce(0x256));try{await db[_0x3917ce(0x272)](_0x3917ce(0x26b)+_0x3917ce(0x318)+'EXISTS\x20loc'+_0x3917ce(0x1a0)+'hat_jid\x20TE'+_0x3917ce(0x2bd)+_0x3917ce(0x177)+_0x3917ce(0x220)+_0x3917ce(0x1fd)+');');}catch(_0xd450a4){}return;}const _0x3e1e63=await getTableColumns(_0x3917ce(0x2ed)),_0x5b3bd6=_0x3e1e63['includes'](_0x3917ce(0x282)),_0x1dea77=_0x3e1e63[_0x3917ce(0x252)](_0x3917ce(0x333)),_0x48efe8=_0x3e1e63[_0x3917ce(0x252)](_0x3917ce(0x19f));if(_0x5b3bd6&&_0x1dea77&&_0x48efe8){if(!_0x3e1e63[_0x3917ce(0x252)](_0x3917ce(0x31e)+_0x3917ce(0x1c2)))try{await db[_0x3917ce(0x272)](_0x3917ce(0x2ef)+_0x3917ce(0x214)+_0x3917ce(0x345)+_0x3917ce(0x2f2)+_0x3917ce(0x187)+'R\x20DEFAULT\x20'+'1;'),info('[lock]\x20add'+_0x3917ce(0x27c)+_0x3917ce(0x350)+_0x3917ce(0x181)+_0x3917ce(0x238));}catch(_0x450276){warn('[lock]\x20fai'+'led\x20to\x20add'+'\x20is_valid_'+_0x3917ce(0x2b5)+_0x3917ce(0x21c)+(_0x450276?.[_0x3917ce(0x21e)]||_0x450276));}try{await db[_0x3917ce(0x272)](_0x3917ce(0x31d)+_0x3917ce(0x208)+_0x3917ce(0x1f7)+_0x3917ce(0x366)+'t\x20ON\x20locks'+_0x3917ce(0x1dc)+';');}catch(_0x369a0f){}try{await db[_0x3917ce(0x272)](_0x3917ce(0x173)+_0x3917ce(0x34e)+_0x3917ce(0x1c4)+_0x3917ce(0x396)+_0x3917ce(0x20d)+'\x20ON\x20locks('+_0x3917ce(0x37a)+'phrase);');}catch(_0x3795eb){}try{await db[_0x3917ce(0x272)](_0x3917ce(0x26b)+_0x3917ce(0x318)+_0x3917ce(0x1e9)+_0x3917ce(0x1a0)+_0x3917ce(0x167)+_0x3917ce(0x2bd)+_0x3917ce(0x177)+_0x3917ce(0x220)+'\x20DEFAULT\x200'+');');}catch(_0xc50557){}info(_0x3917ce(0x186)+_0x3917ce(0x227)+_0x3917ce(0x394)+'onical\x20(en'+_0x3917ce(0x361)+_0x3917ce(0x2ad)+_0x3917ce(0x368));return;}info(_0x3917ce(0x237)+_0x3917ce(0x165)+'table\x20dete'+'cted\x20->\x20pe'+'rforming\x20s'+_0x3917ce(0x2d4)+_0x3917ce(0x1e0));const _0x26ba86=await readAndNormalizeExistingLocks();await db[_0x3917ce(0x272)](_0x3917ce(0x3a2)+_0x3917ce(0x312)+_0x3917ce(0x264));try{await db[_0x3917ce(0x272)](_0x3917ce(0x26b)+_0x3917ce(0x318)+_0x3917ce(0x1e9)+'ks_new\x20(\x0a\x20'+_0x3917ce(0x1dd)+'INTEGER\x20PR'+'IMARY\x20KEY\x20'+_0x3917ce(0x239)+_0x3917ce(0x360)+_0x3917ce(0x34d)+'d\x20TEXT\x20NOT'+_0x3917ce(0x310)+_0x3917ce(0x332)+'e\x20TEXT\x20NOT'+_0x3917ce(0x310)+'\x20\x20\x20\x20\x20type\x20'+'TEXT\x20DEFAU'+_0x3917ce(0x343)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x3917ce(0x1d1)+_0x3917ce(0x17d)+_0x3917ce(0x2ba)+'\x20\x20\x20\x20\x20\x20\x20cre'+_0x3917ce(0x28c)+_0x3917ce(0x231)+'ULT\x200,\x0a\x20\x20\x20'+_0x3917ce(0x391)+_0x3917ce(0x2b8)+_0x3917ce(0x2ae)+_0x3917ce(0x189)+_0x3917ce(0x17f)+_0x3917ce(0x1df)+_0x3917ce(0x19c)+'LT\x201,\x0a\x20\x20\x20\x20'+_0x3917ce(0x161)+_0x3917ce(0x1bd)+_0x3917ce(0x29e)+_0x3917ce(0x393));}catch(_0x5d323a){await db['exec']('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x3917ce(0x1e9)+_0x3917ce(0x35f)+_0x3917ce(0x1dd)+_0x3917ce(0x303)+'IMARY\x20KEY\x20'+_0x3917ce(0x239)+'ENT,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20chat_ji'+_0x3917ce(0x290)+_0x3917ce(0x310)+_0x3917ce(0x332)+_0x3917ce(0x209)+_0x3917ce(0x310)+'\x20\x20\x20\x20\x20type\x20'+_0x3917ce(0x317)+_0x3917ce(0x343)+'\x27,\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x3917ce(0x1d1)+_0x3917ce(0x17d)+_0x3917ce(0x2ba)+_0x3917ce(0x1d9)+_0x3917ce(0x28c)+_0x3917ce(0x231)+_0x3917ce(0x385)+_0x3917ce(0x391)+_0x3917ce(0x2b8)+_0x3917ce(0x2ae)+_0x3917ce(0x189)+'\x20\x20is_valid'+_0x3917ce(0x1df)+_0x3917ce(0x19c)+'LT\x201\x0a\x20\x20\x20\x20\x20'+_0x3917ce(0x172)),warn(_0x3917ce(0x270)+_0x3917ce(0x383)+_0x3917ce(0x306)+'ut\x20UNIQUE\x20'+_0x3917ce(0x2ac)+'k');}const _0x399bd2=await db['prepare']('INSERT\x20INT'+_0x3917ce(0x247)+_0x3917ce(0x315)+_0x3917ce(0x229)+_0x3917ce(0x29c)+_0x3917ce(0x163)+_0x3917ce(0x367)+_0x3917ce(0x244)+',\x20is_valid'+_0x3917ce(0x34f)+'LUES\x20(?,\x20?'+_0x3917ce(0x287)+_0x3917ce(0x24d));try{for(const _0x2ed1e6 of _0x26ba86){try{let _0x1d090a=0x19fd+0x1008+0x2a04*-0x1;if(_0x2ed1e6[_0x3917ce(0x19f)]==='regex')try{new RegExp(_0x2ed1e6[_0x3917ce(0x333)]);}catch(_0x248cab){_0x1d090a=-0x5f*-0x5e+-0xa24+-0x18be;}await _0x399bd2[_0x3917ce(0x37e)](_0x2ed1e6[_0x3917ce(0x282)],_0x2ed1e6[_0x3917ce(0x333)],_0x2ed1e6[_0x3917ce(0x19f)]||'normal',_0x2ed1e6[_0x3917ce(0x2af)]||'',Number(_0x2ed1e6[_0x3917ce(0x39c)]||nowSec()),Number(_0x2ed1e6[_0x3917ce(0x32b)]||-0x2a9*0x7+0xbbf+0x6e*0x10),_0x1d090a);}catch(_0x11cf1b){warn(_0x3917ce(0x2c5)+'ration\x20ins'+_0x3917ce(0x16a)+_0x3917ce(0x1b7)+_0x2ed1e6[_0x3917ce(0x282)]+'@'+_0x2ed1e6[_0x3917ce(0x333)]+':\x20'+(_0x11cf1b?.[_0x3917ce(0x21e)]||_0x11cf1b));}}}finally{try{await _0x399bd2[_0x3917ce(0x2ff)]();}catch(_0x30984b){}}try{const _0x39c187=_0x3917ce(0x1e1)+_0x3917ce(0x222)+Math['floor'](Date[_0x3917ce(0x18d)]()/(-0x1fce+0x2*0xdb5+0x84c));await db[_0x3917ce(0x272)](_0x3917ce(0x2ef)+_0x3917ce(0x195)+_0x3917ce(0x286)+_0x39c187+';'),await db[_0x3917ce(0x272)]('ALTER\x20TABL'+'E\x20locks_ne'+'w\x20RENAME\x20T'+_0x3917ce(0x1cb));try{await db[_0x3917ce(0x272)]('CREATE\x20IND'+_0x3917ce(0x208)+_0x3917ce(0x1f7)+'_locks_cha'+_0x3917ce(0x22e)+_0x3917ce(0x1dc)+';');}catch(_0x358fee){}try{await db[_0x3917ce(0x272)](_0x3917ce(0x173)+_0x3917ce(0x34e)+'IF\x20NOT\x20EXI'+_0x3917ce(0x396)+_0x3917ce(0x20d)+_0x3917ce(0x37c)+'chat_jid,\x20'+_0x3917ce(0x1a4));}catch(_0xdbb156){}try{await db[_0x3917ce(0x272)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x3917ce(0x1e9)+_0x3917ce(0x1a0)+_0x3917ce(0x167)+_0x3917ce(0x2bd)+_0x3917ce(0x177)+_0x3917ce(0x220)+_0x3917ce(0x1fd)+');');}catch(_0x4fa2bb){}info('[lock]\x20mig'+_0x3917ce(0x2f4)+_0x3917ce(0x262)+_0x3917ce(0x217)+'amed\x20to\x20ba'+_0x3917ce(0x18f));}catch(_0x4e0a50){warn(_0x3917ce(0x2c5)+'ration\x20swa'+_0x3917ce(0x2a4)+(_0x4e0a50?.[_0x3917ce(0x21e)]||_0x4e0a50));throw _0x4e0a50;}finally{await db[_0x3917ce(0x272)](_0x3917ce(0x3a2)+'eign_keys\x20'+_0x3917ce(0x2ab));}return;}catch(_0xbe4108){error(_0xbe4108,'[lock]\x20ens'+_0x3917ce(0x26a)+_0x3917ce(0x38c));throw _0xbe4108;}}async function addLock(_0x3ac9ae,_0x3d9911,_0x42a7a3){const _0x23d53c=_0xb7f522;try{if(!_0x3ac9ae||!_0x3d9911)return![];let _0x25a7c8=String(_0x3d9911)[_0x23d53c(0x162)]();if(!_0x25a7c8)return![];let _0xa8b0cd=_0x23d53c(0x249),_0x130f23=0x883+-0x1aca+0x1248;if(_0x25a7c8['toLowerCas'+'e']()['startsWith'](_0x23d53c(0x30d))){_0xa8b0cd=_0x23d53c(0x225),_0x25a7c8=_0x25a7c8['slice'](0x2f*-0xbf+0x100+-0x2217*-0x1)[_0x23d53c(0x162)]();try{new RegExp(_0x25a7c8),_0x130f23=-0x1b8b+0x1*0x607+0x1585;}catch(_0x5a5968){_0x130f23=0x2*0xd51+0x22df+-0xeb*0x43,warn(_0x23d53c(0x15f)+'Lock:\x20inva'+_0x23d53c(0x273)+'provided:\x20'+_0x25a7c8);}}else _0x25a7c8[_0x23d53c(0x252)]('*')?_0xa8b0cd=_0x23d53c(0x392):_0xa8b0cd=_0x23d53c(0x249);try{const _0x58be99=await db[_0x23d53c(0x37e)](_0x23d53c(0x321)+_0x23d53c(0x39d)+_0x23d53c(0x192)+_0x23d53c(0x1a7)+_0x23d53c(0x1d4)+_0x23d53c(0x26c)+_0x23d53c(0x1de)+_0x23d53c(0x1db)+_0x23d53c(0x352)+'ex)\x0a\x20\x20\x20\x20\x20\x20'+_0x23d53c(0x1e6)+'(?,\x20?,\x20?,\x20'+_0x23d53c(0x168)+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x23d53c(0x21d)+_0x23d53c(0x2e3)+_0x23d53c(0x1e3)+_0x23d53c(0x196)+_0x23d53c(0x2a1)+_0x23d53c(0x283)+_0x23d53c(0x20e)+_0x23d53c(0x2da)+_0x23d53c(0x1fe)+_0x23d53c(0x1ac)+_0x23d53c(0x347)+_0x23d53c(0x169)+_0x23d53c(0x219)+'\x20\x20\x20\x20create'+_0x23d53c(0x193)+'luded.crea'+_0x23d53c(0x1e7)+_0x23d53c(0x2a5)+_0x23d53c(0x2f2)+_0x23d53c(0x1fb)+'uded.is_va'+_0x23d53c(0x331),[_0x3ac9ae,_0x25a7c8,_0xa8b0cd,_0x42a7a3||'',nowSec(),_0x130f23]);return ahoCache[_0x23d53c(0x254)](_0x3ac9ae),info(_0x23d53c(0x15f)+_0x23d53c(0x1f9)+_0x25a7c8+_0x23d53c(0x280)+_0x3ac9ae+_0x23d53c(0x1c5)+_0xa8b0cd+_0x23d53c(0x294)+_0x130f23+')'),!![];}catch(_0x2fef89){warn(_0x23d53c(0x279)+_0x23d53c(0x384)+_0x23d53c(0x39e)+_0x23d53c(0x23d)+_0x23d53c(0x19d)+(_0x2fef89?.[_0x23d53c(0x21e)]||_0x2fef89));try{const _0x1ed5e9=await db[_0x23d53c(0x2cf)](_0x23d53c(0x234)+_0x23d53c(0x3a0)+_0x23d53c(0x370)+_0x23d53c(0x34c)+_0x23d53c(0x2d1)+_0x23d53c(0x2c9),[_0x3ac9ae,_0x25a7c8]);return _0x1ed5e9?await db[_0x23d53c(0x37e)]('UPDATE\x20loc'+_0x23d53c(0x31b)+_0x23d53c(0x2eb)+_0x23d53c(0x1c9)+_0x23d53c(0x20b)+_0x23d53c(0x320)+'s_valid_re'+'gex\x20=\x20?\x20WH'+'ERE\x20id\x20=\x20?',[_0xa8b0cd,_0x42a7a3||'',nowSec(),_0x130f23,_0x1ed5e9['id']]):await db['run'](_0x23d53c(0x321)+_0x23d53c(0x39d)+'hat_jid,\x20p'+_0x23d53c(0x1a7)+_0x23d53c(0x1d4)+_0x23d53c(0x26c)+_0x23d53c(0x1de)+'_count,\x20is'+'_valid_reg'+_0x23d53c(0x354)+'\x20(?,\x20?,\x20?,'+'\x20?,\x20?,\x200,\x20'+'?)',[_0x3ac9ae,_0x25a7c8,_0xa8b0cd,_0x42a7a3||'',nowSec(),_0x130f23]),ahoCache[_0x23d53c(0x254)](_0x3ac9ae),!![];}catch(_0x35f2a1){return error(_0x35f2a1,_0x23d53c(0x15f)+_0x23d53c(0x2f7)+'ack\x20failed'+_0x23d53c(0x1b7)+_0x25a7c8+'\x20@\x20'+_0x3ac9ae),![];}}}catch(_0x5a5fbb){return error(_0x5a5fbb,_0x23d53c(0x15f)+_0x23d53c(0x377)+'d\x20for\x20'+_0x3d9911+'\x20@\x20'+_0x3ac9ae),![];}}async function deleteLockByPhrase(_0x442746,_0x551b76){const _0x440d8c=_0xb7f522;try{if(!_0x442746||!_0x551b76)return 0x6e5+-0x9b1+0x2cc;const _0x5c60d4=String(_0x551b76||'')[_0x440d8c(0x162)]();if(!_0x5c60d4)return 0x1*0x16a7+-0x66*-0xa+0x3*-0x8e1;if(_0x5c60d4['toLowerCas'+'e']()[_0x440d8c(0x2dc)](_0x440d8c(0x30d))){const _0x44b3b9=_0x5c60d4[_0x440d8c(0x1f1)](0x1b0a*-0x1+0x1217+-0x8f9*-0x1)['trim'](),_0xd8860f=await db[_0x440d8c(0x37e)](_0x440d8c(0x29f)+_0x440d8c(0x35c)+_0x440d8c(0x373)+_0x440d8c(0x22a)+'\x20type\x20=\x20\x27r'+'egex\x27\x20AND\x20'+'phrase\x20=\x20?',[_0x442746,_0x44b3b9]);if(_0xd8860f?.[_0x440d8c(0x255)])ahoCache['delete'](_0x442746);return _0xd8860f?.[_0x440d8c(0x255)]||-0x160f*-0x1+-0x17e1*-0x1+-0x24c*0x14;}let _0x1a798a=await db[_0x440d8c(0x37e)]('DELETE\x20FRO'+_0x440d8c(0x35c)+'ERE\x20chat_j'+_0x440d8c(0x22a)+_0x440d8c(0x25b)+'?',[_0x442746,_0x5c60d4]);if(_0x1a798a?.['changes'])return ahoCache[_0x440d8c(0x254)](_0x442746),_0x1a798a['changes'];return-0x482+0x13*-0xcb+0x1393;}catch(_0x477fa0){return warn(_0x440d8c(0x1f5)+_0x440d8c(0x267)+'hrase\x20erro'+_0x440d8c(0x2ee)+(_0x477fa0?.[_0x440d8c(0x21e)]||_0x477fa0)),0x63c+-0x1d2d+0x16f1;}}async function deleteLockById(_0x51817f,_0xbb7f12){const _0x1b1a9c=_0xb7f522;try{const _0x106ad7=await db[_0x1b1a9c(0x37e)](_0x1b1a9c(0x29f)+_0x1b1a9c(0x35c)+_0x1b1a9c(0x373)+_0x1b1a9c(0x22a)+_0x1b1a9c(0x324),[_0x51817f,_0xbb7f12]);if(_0x106ad7?.['changes'])ahoCache['delete'](_0x51817f);return _0x106ad7?.['changes']||-0xca5+-0x115*-0xb+-0x2*-0x5f;}catch(_0x368850){return warn(_0x1b1a9c(0x1f5)+_0x1b1a9c(0x30f)+_0x1b1a9c(0x245)+(_0x368850?.['message']||_0x368850)),0x2420+0x23fd+0x1*-0x481d;}}async function deleteAllLocksForChat(_0x1075ad){const _0x1bce1a=_0xb7f522;try{const _0xbda38b=await db[_0x1bce1a(0x37e)](_0x1bce1a(0x29f)+_0x1bce1a(0x35c)+_0x1bce1a(0x373)+'id\x20=\x20?',[_0x1075ad]);if(_0xbda38b?.[_0x1bce1a(0x255)])ahoCache[_0x1bce1a(0x254)](_0x1075ad);return _0xbda38b?.[_0x1bce1a(0x255)]||-0x33d+0x1460+-0x1123;}catch(_0x45d489){return warn('[lock]\x20del'+'eteAllLock'+_0x1bce1a(0x205)+'rror:\x20'+(_0x45d489?.[_0x1bce1a(0x21e)]||_0x45d489)),-0x1ae1+0x20de+0x7*-0xdb;}}async function listLocksForChat(_0x127091){const _0x298a8d=_0xb7f522;try{const _0x2b4568=await db['all'](_0x298a8d(0x32e)+_0x298a8d(0x198)+'ype,\x20creat'+_0x298a8d(0x2a0)+_0x298a8d(0x34a)+_0x298a8d(0x301)+_0x298a8d(0x31e)+_0x298a8d(0x326)+_0x298a8d(0x358)+_0x298a8d(0x1ed)+_0x298a8d(0x223)+_0x298a8d(0x34b),[_0x127091]);return _0x2b4568||[];}catch(_0x3037ed){return warn(_0x3037ed,_0x298a8d(0x275)+_0x298a8d(0x215)+_0x298a8d(0x191)+_0x298a8d(0x1bc)+_0x127091+':\x20'+(_0x3037ed?.[_0x298a8d(0x21e)]||_0x3037ed)),[];}}async function setLockNotify(_0x51521f,_0x1d1622){const _0x28ea30=_0xb7f522;try{if(!_0x51521f)return![];return await db['run'](_0x28ea30(0x321)+_0x28ea30(0x362)+_0x28ea30(0x2e8)+_0x28ea30(0x38e)+_0x28ea30(0x166)+_0x28ea30(0x307)+'\x20\x20\x20ON\x20CONF'+_0x28ea30(0x268)+_0x28ea30(0x2a2)+'DATE\x20SET\x20n'+_0x28ea30(0x39f)+_0x28ea30(0x338)+'ify;',[_0x51521f,_0x1d1622?0x2136+-0x265*0xc+-0x479*0x1:-0x1666+0x2*-0xad+0x17c0]),!![];}catch(_0x17e13a){return warn(_0x28ea30(0x2d0)+_0x28ea30(0x1ef)+_0x28ea30(0x188)+'r\x20'+_0x51521f+':\x20'+(_0x17e13a?.[_0x28ea30(0x21e)]||_0x17e13a)),![];}}async function getLockNotify(_0x3773c0){const _0x51f1e3=_0xb7f522;try{if(!_0x3773c0)return 0x412+0x1*0x208c+-0x249e;const _0x14b78f=await db[_0x51f1e3(0x2cf)](_0x51f1e3(0x346)+_0x51f1e3(0x298)+'ock_prefs\x20'+_0x51f1e3(0x257)+_0x51f1e3(0x18a),[_0x3773c0]);return _0x14b78f?Number(_0x14b78f[_0x51f1e3(0x30a)])?0x22fb+0x1c85+-0x3f7f:-0xb58+0x115c+-0x604:0x164d+0x20d2*0x1+-0x371f;}catch(_0x38c8d4){return warn(_0x51f1e3(0x24c)+_0x51f1e3(0x1ef)+_0x51f1e3(0x188)+'r\x20'+_0x3773c0+':\x20'+(_0x38c8d4?.['message']||_0x38c8d4)),-0x2073+0x9*-0x232+0x3435;}}async function deleteWithRetry(_0x882a04,_0x36345d=0xc*-0x59+0x2*0x869+-0xca4,_0x3d3e08=0x225*0x11+0x2*-0xefb+-0x553){const _0x3df4e8=_0xb7f522,_0x32494f=_0x882a04[_0x3df4e8(0x1f2)]?.['remoteJid'];if(!_0x32494f)return![];let _0x244c6c=_0x3d3e08;for(let _0xdb218b=0x202b+0x19e9+-0x3a13;_0xdb218b<=Math[_0x3df4e8(0x2c2)](0x19a1+0x243+0x3b*-0x79,_0x36345d);_0xdb218b++){try{if(!sendApi)return warn(_0x3df4e8(0x1f5)+_0x3df4e8(0x194)+_0x3df4e8(0x218)+_0x3df4e8(0x1c8)+_0x3df4e8(0x24f)),![];return await sendApi(_0x32494f,{'delete':_0x882a04[_0x3df4e8(0x1f2)]}),!![];}catch(_0x1ccb86){if(_0xdb218b<_0x36345d){await sleep(_0x244c6c),_0x244c6c*=0x1bf1*0x1+-0xc02+0x54f*-0x3;continue;}return warn(_0x3df4e8(0x1f5)+_0x3df4e8(0x194)+_0x3df4e8(0x1be)+'\x20'+(_0x1ccb86?.[_0x3df4e8(0x21e)]||_0x1ccb86)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x37c9a9){const _0x407c61=_0xb7f522;if(!CFG[_0x407c61(0x274)+'NG'])return;try{const _0x1e85ac=_0x37c9a9[_0x407c61(0x1f2)]?.[_0x407c61(0x15e)+'t']||_0x37c9a9['key']?.[_0x407c61(0x395)]||'',_0x5b3f64=_0x37c9a9[_0x407c61(0x1f2)][_0x407c61(0x336)],_0x7644fc=_0x1e85ac?'@'+String(_0x1e85ac)[_0x407c61(0x277)]('@')[-0xce3+0x222f+0x553*-0x4]:_0x407c61(0x1a1),_0x1e5968=String(CFG['WARNING_ME'+_0x407c61(0x248)]||DEFAULTS[_0x407c61(0x288)+_0x407c61(0x248)])['replace'](/\{user\}/gi,_0x7644fc);if(!sendApi){warn(_0x407c61(0x1fa)+_0x407c61(0x1f0)+_0x407c61(0x174)+'available');return;}const _0x1a84a5=await sendApi(_0x5b3f64,{'text':_0x1e5968,'mentions':_0x1e85ac?[_0x1e85ac]:[]});_0x1a84a5?.[_0x407c61(0x1f2)]&&CFG[_0x407c61(0x28f)+_0x407c61(0x397)]&&CFG[_0x407c61(0x28f)+_0x407c61(0x397)]>-0x1*-0x1e95+-0x224e+0x3b9&&setTimeout(async()=>{const _0xbcb64a=_0x407c61;try{await sendApi(_0x5b3f64,{'delete':_0x1a84a5[_0xbcb64a(0x1f2)]});}catch(_0x78dd4d){}},CFG[_0x407c61(0x28f)+_0x407c61(0x397)]);}catch(_0x3febaf){warn(_0x407c61(0x1fa)+_0x407c61(0x228)+_0x407c61(0x266)+(_0x3febaf?.[_0x407c61(0x21e)]||_0x3febaf));}}async function processChatQueue(_0xe87524){const _0x5bab22=_0xb7f522;while((perChatQueue['get'](_0xe87524)||[])['length']>-0x2*-0x132b+-0xb0a+0x4*-0x6d3&&!shuttingDown){const _0x4d48f7=Math[_0x5bab22(0x2c2)](0x428*0x9+0x1c2c+0x1*-0x4193,CFG[_0x5bab22(0x2a3)]||-0x20d7*-0x1+-0x97d*0x3+0x3*-0x175),_0x3eb6a8=perChatQueue['get'](_0xe87524)||[],_0x5a5365=_0x3eb6a8[_0x5bab22(0x2e2)](-0x1f79+0x24d2+0x1*-0x559,_0x4d48f7);for(const _0x1daf75 of _0x5a5365){try{const _0x5e0993=await deleteWithRetry(_0x1daf75)[_0x5bab22(0x2e9)](()=>![]);_0x5e0993&&await sendWarningAndMaybeDelete(_0x1daf75)['catch'](()=>{});}catch(_0x4bae12){warn(_0x5bab22(0x388)+'cessChatQu'+_0x5bab22(0x2f0)+_0x5bab22(0x16b)+(_0x4bae12?.[_0x5bab22(0x21e)]||_0x4bae12));}}(perChatQueue[_0x5bab22(0x2cf)](_0xe87524)||[])[_0x5bab22(0x1ee)]>0xe*-0x1c1+-0x112a+-0x3*-0xde8&&await sleep(Math[_0x5bab22(0x2c2)](0x1*-0x2403+-0x2191+0x4594,CFG[_0x5bab22(0x1f3)+_0x5bab22(0x22d)]||-0x288+0x23f8*-0x1+0x4*0x9d2));}if((perChatQueue[_0x5bab22(0x2cf)](_0xe87524)||[])[_0x5bab22(0x1ee)]===-0x33e+-0x150a+-0x1848*-0x1)perChatQueue[_0x5bab22(0x254)](_0xe87524);}function tryStartProcessingForChat(_0x4645f7){const _0x3b5d84=_0xb7f522;if(perChatProcessing[_0x3b5d84(0x2cf)](_0x4645f7))return;if(activeChats>=(CFG[_0x3b5d84(0x1d7)+_0x3b5d84(0x240)]||0xed1+-0x1*-0x1393+-0x2263*0x1)){setTimeout(()=>tryStartProcessingForChat(_0x4645f7),-0x2*-0xbf1+-0x748+-0x1004);return;}activeChats++,perChatProcessing[_0x3b5d84(0x201)](_0x4645f7,!![]),((async()=>{const _0x5f1f3d=_0x3b5d84;try{await processChatQueue(_0x4645f7);}catch(_0x335d6e){warn(_0x5f1f3d(0x388)+'cessChatQu'+_0x5f1f3d(0x1a5)+(_0x335d6e?.['message']||_0x335d6e));}finally{perChatProcessing[_0x5f1f3d(0x254)](_0x4645f7),activeChats=Math[_0x5f1f3d(0x2c2)](-0x17fa+0x24d7+-0xcdd,activeChats-(-0x1b4+0x1f*0xaf+0x9be*-0x2));if((perChatQueue[_0x5f1f3d(0x2cf)](_0x4645f7)||[])['length'])setImmediate(()=>tryStartProcessingForChat(_0x4645f7));}})());}function enqueueDeletion(_0x1f408f){const _0x34b725=_0xb7f522,_0x3a536d=_0x1f408f[_0x34b725(0x1f2)]?.[_0x34b725(0x336)];if(!_0x3a536d)return;if(!perChatQueue[_0x34b725(0x335)](_0x3a536d))perChatQueue[_0x34b725(0x201)](_0x3a536d,[]);const _0x3286e3=perChatQueue[_0x34b725(0x2cf)](_0x3a536d);if(_0x3286e3[_0x34b725(0x1ee)]>=(CFG[_0x34b725(0x236)+'UEUE_LIMIT']||DEFAULTS[_0x34b725(0x236)+_0x34b725(0x2b2)]))_0x3286e3[_0x34b725(0x16e)]();_0x3286e3['push'](_0x1f408f);if(!perChatProcessing[_0x34b725(0x2cf)](_0x3a536d))tryStartProcessingForChat(_0x3a536d);}function extractTextFromMessage(_0x4c243a){const _0x23b051=_0xb7f522;if(!_0x4c243a||!_0x4c243a[_0x23b051(0x21e)])return'';const _0x1d2733=_0x4c243a[_0x23b051(0x21e)];if(_0x1d2733[_0x23b051(0x202)+'on'])return _0x1d2733[_0x23b051(0x202)+'on'];if(_0x1d2733['extendedTe'+'xtMessage']?.[_0x23b051(0x20f)])return _0x1d2733[_0x23b051(0x18e)+_0x23b051(0x235)][_0x23b051(0x20f)];if(_0x1d2733[_0x23b051(0x180)+'ge']?.[_0x23b051(0x378)])return _0x1d2733[_0x23b051(0x180)+'ge']['caption'];if(_0x1d2733['videoMessa'+'ge']?.[_0x23b051(0x378)])return _0x1d2733[_0x23b051(0x284)+'ge'][_0x23b051(0x378)];if(_0x1d2733['buttonsRes'+_0x23b051(0x2e1)+'ge']?.[_0x23b051(0x348)+_0x23b051(0x37f)])return _0x1d2733[_0x23b051(0x289)+_0x23b051(0x2e1)+'ge'][_0x23b051(0x348)+_0x23b051(0x37f)];return'';}function splitRestForGp(_0x2a17c4){const _0x56483b=_0xb7f522;if(!_0x2a17c4)return{'left':'','gp':null};const _0x1fe4a7=_0x2a17c4[_0x56483b(0x2bc)](/\bgp[:\s]+(.+)$/i);if(_0x1fe4a7){const _0x1027e6=_0x2a17c4[_0x56483b(0x1f1)](0x8*0x469+0x1402+0x2a*-0x151,_0x1fe4a7[_0x56483b(0x2ec)])[_0x56483b(0x162)](),_0x10e371=_0x1fe4a7[-0x2572+-0x1*-0x1e0b+0x6*0x13c][_0x56483b(0x162)]();return{'left':_0x1027e6,'gp':_0x10e371};}const _0x342651=_0x2a17c4[_0x56483b(0x277)](/\s+/)[_0x56483b(0x1ba)](Boolean);if(_0x342651['length']>-0x7fa*0x3+0x1a9e+-0x1*0x2af){const _0x3ca886=_0x342651[_0x342651[_0x56483b(0x1ee)]-(0xce*-0x9+-0x1486+0x1*0x1bc5)];if(_0x3ca886[_0x56483b(0x190)+'e']()===_0x56483b(0x2b3)||_0x3ca886[_0x56483b(0x252)]('@'))return _0x342651['pop'](),{'left':_0x342651[_0x56483b(0x232)]('\x20')['trim'](),'gp':_0x3ca886};}return{'left':_0x2a17c4[_0x56483b(0x162)](),'gp':null};}function parseLockCommandOneLine(_0x10119a){const _0x2c2b80=_0xb7f522,_0x4b82fc=(_0x10119a||'')[_0x2c2b80(0x277)](/\r?\n/)[0x1fe9+-0xc7*0x9+-0x18ea][_0x2c2b80(0x162)]();let _0x241368=_0x4b82fc[_0x2c2b80(0x3a4)](/^\/?lock\b/i,'')[_0x2c2b80(0x162)]();const {left:_0x428039,gp:_0x2050d7}=splitRestForGp(_0x241368),_0x5de909=(_0x428039||'')[_0x2c2b80(0x277)](',')[_0x2c2b80(0x1f6)](_0x16fb5e=>_0x16fb5e[_0x2c2b80(0x162)]())[_0x2c2b80(0x1ba)](Boolean);return{'triggers':_0x5de909,'gp':_0x2050d7};}function parseUnlockCommandOneLine(_0x1f805a){const _0x13857d=_0xb7f522,_0x1029d6=(_0x1f805a||'')[_0x13857d(0x277)](/\r?\n/)[0x4f2*0x5+-0x1ea9+-0x31*-0x1f][_0x13857d(0x162)]();let _0x41ba8c=_0x1029d6['replace'](/^\/?unlock\b/i,'')[_0x13857d(0x162)]();const {left:_0x5d12c5,gp:_0x101174}=splitRestForGp(_0x41ba8c),_0x587ed2=(_0x5d12c5||'')[_0x13857d(0x277)](',')['map'](_0x15528e=>_0x15528e[_0x13857d(0x162)]())[_0x13857d(0x1ba)](Boolean);return{'parts':_0x587ed2,'gp':_0x101174};}function parseListCommandOneLine(_0x3ad882){const _0x5f3968=_0xb7f522,_0x4be8ff=(_0x3ad882||'')[_0x5f3968(0x277)](/\r?\n/)[-0xd31+0xbcc+-0x7*-0x33][_0x5f3968(0x162)]();let _0x29ea62=_0x4be8ff[_0x5f3968(0x3a4)](/^\/?listlock\b/i,'')['trim']();const {left:_0x4ce88b,gp:_0x3d2a15}=splitRestForGp(_0x29ea62),_0x1a5ba1=_0x3d2a15||(_0x4ce88b?_0x4ce88b:null);return{'gp':_0x1a5ba1};}function parseLockNotifyCommandOneLine(_0x2d5bbe){const _0x18577b=_0xb7f522,_0x3b5fe2=(_0x2d5bbe||'')[_0x18577b(0x277)](/\r?\n/)[0x780+-0xe85+0x1*0x705][_0x18577b(0x162)]();let _0x24765c=_0x3b5fe2[_0x18577b(0x3a4)](/^\/?locknotify\b/i,'')[_0x18577b(0x162)]();const {left:_0x371b7d,gp:_0x3dcf78}=splitRestForGp(_0x24765c),_0xdbeb51=(_0x371b7d||'')[_0x18577b(0x190)+'e']();let _0x449a5a=null;if(_0xdbeb51[_0x18577b(0x252)]('on'))_0x449a5a='on';else{if(_0xdbeb51[_0x18577b(0x252)](_0x18577b(0x35e)))_0x449a5a=_0x18577b(0x35e);}return{'mode':_0x449a5a,'gp':_0x3dcf78};}function _0x3ab2(){const _0xb7b76f=['\x20by\x20@','earch\x20fail','t\x20resolve\x20','hit_count','UPDATE\x20loc','body','SELECT\x20id,','jid','\x201\x20WHERE\x20i','lid_regex;','\x20\x20\x20\x20\x20phras','phrase','ias','has','remoteJid','INTEGER\x20DE','cluded.not','same\x20line.','dRegexes\x20e','owed.','eck\x20failed','✔️\x20Locknoti','hrase)\x0a\x20\x20\x20','ks\x20SET\x20is_','d\x20regex\x20fo','[lock]\x20rea','chatJid','LT\x20\x27normal','unlock','D\x20COLUMN\x20i','SELECT\x20not','=\x20excluded','selectedBu','lete_prefs','ated_at,\x20h','\x20BY\x20id','t_jid\x20=\x20?\x20','\x20\x20\x20chat_ji','QUE\x20INDEX\x20','_regex)\x20VA','d_regex\x20co','values','_valid_reg','NORMALIZE_','ex)\x20VALUES','dmin\x20check','efault\x20con','\x20table\x20(ca','locks\x20WHER','|jid|all>\x0a','timestamp','chFromFind','M\x20locks\x20WH','normalizeT','off','ks_new\x20(\x0a\x20','ENT,\x0a\x20\x20\x20\x20\x20','sured\x20indi','O\x20lock_pre','getUniqueJ','valid_rege','}_]*','_locks_cha','reated_at,','mns)','\x20lock(s).','REATE\x20TABL','y\x20[on|off]','o\x20delete\x20l','DEFAULT_EN','our\x20defaul','le_info(','\x20WHERE\x20cha','ocknotify\x20','ENT','ERE\x20chat_j','[lock]\x20tab','rs\x20besides','ng\x20default','Lock\x20faile','caption','❌\x20PM:\x20incl','chat_jid,\x20','[lock]\x20isa','\x20ON\x20locks(','ard\x20for\x20id','run','ttonId','ude\x20gp\x20in\x20','E\x20id\x20=\x20?','search','ated\x20locks','CONFLICT\x20i','ULT\x200,\x0a\x20\x20\x20','r\x20id=','lock.initi','[lock]\x20pro','dText\x20fail','[lock]\x20ini','is\x20not\x20all','fatal',',phrase2','id,\x20notify','d|all>','\x5c$&','\x20\x20\x20\x20\x20hit_c','wildcard','\x20\x20\x20\x20\x20);','lready\x20can','from','STS\x20idx_lo','L_MS','❌\x20PM\x20one-l','ue(s).','\x20phrase\x20FR','ks\x20SET\x20hit','created_at','O\x20locks\x20(c','nsert\x20fail','otify\x20=\x20ex','FROM\x20locks','dAndNormal','PRAGMA\x20for','chatid','replace','olving\x20con','participan','[lock]\x20add','gp\x20alias/j','\x20\x20\x20\x20UNIQUE','trim','ated_by,\x20c','dApi\x20not\x20a','acy\x20locks\x20',')\x20VALUES\x20(','hat_jid\x20TE','?,\x20?,\x200,\x20?','.created_b','ert\x20failed','rror:\x20','ine\x20usage:','lock','shift','nodes','\x20lock\x20entr','push','\x20);','CREATE\x20UNI','sendApi\x20un','id:\x20\x22','gger2>\x20gp:','\x20KEY,\x20noti','ROM\x20locks','line\x20usage','FAULT\x201','your\x20defau','ed\x20to\x20','y\x20TEXT\x20DEF','fy\x20','\x20\x20is_valid','imageMessa','lumn\x20to\x20lo','size','efault\x20val','\x20gp:<alias','tal','[lock]\x20loc','gex\x20INTEGE','\x20failed\x20fo','\x200,\x0a\x20\x20\x20\x20\x20\x20','_jid\x20=\x20?','add','izeExistin','now','extendedTe','ckup','toLowerCas','hat\x20error\x20','hat_jid,\x20p','d_at\x20=\x20exc','eteWithRet','E\x20locks\x20RE','\x20DO\x20UPDATE','\x20locks\x20loa','\x20phrase,\x20t','\x20regex\x20id=','_count\x20=\x20h','knotify\x20gp','EGER\x20DEFAU','ck):\x20','quested\x20ta','type','k_prefs\x20(c','{user}','gLocks\x20fai','Keywords','phrase);','eue\x20fail:\x20','isCommand','hrase,\x20typ','name','uild\x20faile','serialized','✔️\x20Deleted\x20','reated_by\x20','lid\x20stored',',2\x20OR\x20unlo','\x20WHERE\x20key','build','fig\x20load\x20f','aned\x20up','egex\x27','\x20lock(s)\x20f','(?![\x5cp{L}\x5c','lock\x20bad1,','\x20for\x20','s\x20for\x20your','\x20DEFAULT\x20c','filter','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','for\x20','(chat_jid,','ry\x20failed:','nection\x20','test',':\x20unlockal','egex','LOCKS','IF\x20NOT\x20EXI','\x20(type=','user','2305wfxTGf','i\x20unavaila','ated_by\x20=\x20','alidation\x20','O\x20locks;','l\x20gp:<alia','AND\x20name=?','d\x20locknoti','mentions','\x20set\x20for\x20','\x20created_b','\x0aMatched:\x20',':\x20locknoti','e,\x20created','TableColum','\x0aMessage:\x0a','GLOBAL_CON','SELECT\x20val','\x20\x20\x20\x20\x20\x20\x20cre','fail','_count,\x20is','(chat_jid)','\x20\x20\x20\x20\x20\x20\x20id\x20','ed_at,\x20hit','_regex\x20INT','ion','locks_back','fromMe','d,\x20phrase)','sock','delock','\x20\x20\x20VALUES\x20','ted_at,\x0a\x20\x20','endsWith','EXISTS\x20loc','\x20locks\x20for','ch\x20in\x20','output','E\x20chat_jid','length','LockNotify','dWarning:\x20','slice','key','BATCH_DELA',':\x20lock\x20<tr','[lock]\x20del','map','EXISTS\x20idx','t\x20connecti','ed\x20lock\x20\x22','[lock]\x20sen','gex\x20=\x20excl','find','\x20DEFAULT\x200','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','chat_id','floor','set','conversati','[lock]\x20con','rom\x20your\x20d','sForChat\x20e','led\x20to\x20sen','listlock','EX\x20IF\x20NOT\x20','e\x20TEXT\x20NOT','.\x20Please\x20c','?,\x20created','se,comma-s','cks_unique','\x20=\x20exclude','text','author','sendMessag','36RhQSMv','roup-only)','E\x20locks\x20AD','tLocksForC','✔️\x20[lock]\x20l','\x20table\x20ren','ry:\x20sendAp','y,\x0a\x20\x20\x20\x20\x20\x20\x20','1886968eRLweW','led:\x20','mn:\x20','\x20ON\x20CONFLI','message','Wildcard\x20m','fy\x20INTEGER','192086wZpMjb','up_','\x20=\x20?\x20ORDER','<alias|jid','regex','n\x20characte','ks\x20table\x20a','dWarning\x20f','d,\x20phrase,','id\x20=\x20?\x20AND','function','[lock]\x20res','Y_MS','t\x20ON\x20locks','❌\x20Unknown\x20','ite_master','TEGER\x20DEFA','join','❌\x20PM:\x20one-','SELECT\x20id\x20','xtMessage','PER_CHAT_Q','[lock]\x20leg','cks\x20table','AUTOINCREM','oUserJid','that\x20word\x20','REGEX)','ed\x20(fallba','ion(s):\x20','locknotify','CURRENCY','clearlocks','\x20your\x20defa','s).','\x20hit_count','d\x20error:\x20','vailable','O\x20locks_ne','SSAGE','normal','ABLED',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[lock]\x20get','\x20?,\x20?)',':\x20unlock\x20<','ble','[lock]\x20ski','r\x20default\x20','includes','ULL','delete','changes','nonical)','WHERE\x20chat','e\x20FROM\x20sql','oaded\x20','REMOVE_DIA','\x20phrase\x20=\x20','resolveNam','gp:<alias|','nection(s)','HERE\x20type\x20','unlocklock','\x20default\x20c','plete;\x20old','it_count\x20+','=\x20OFF;','toISOStrin','ailed:\x20','eteLockByP','LICT(chat_','1114970IYhnIN','ureSchema\x20','CREATE\x20TAB','_by,\x20creat','[\x5cp{L}\x5cp{N','word','onnection(','[lock]\x20cre','s|jid|all>','exec','lid\x20regex\x20','SEND_WARNI','[lock]\x20lis','tion(s):\x20','split','ns\x20error\x20f','[lock]\x20ON\x20','findings','@g.us','ed\x20is_vali','\x22:\x20','922600tPaqxZ','min','\x22\x20@\x20',':<alias|ji','chat_jid','\x20\x20\x20\x20\x20\x20type','videoMessa','\x20gp:alias','NAME\x20TO\x20',',\x20?,\x20?,\x20?,','WARNING_ME','buttonsRes','IMARY\x20KEY\x20','[lock]\x20Aho','ated_at\x20IN','gex','trigger','WARNING_TT','d\x20TEXT\x20NOT','❌\x20Usage\x20(g','PRAGMA\x20tab','[lock]\x20cle',',\x20valid=','ies\x20to\x20you','\x20Example:\x20','\x5cp{N}_])','ify\x20FROM\x20l','clear','[lock]\x20unl','e=\x27table\x27\x20','\x20type,\x20cre','This\x20toggl','\x20phrase)\x0a\x20','DELETE\x20FRO','ed_by,\x20cre','\x20SET\x0a\x20\x20\x20\x20\x20','jid)\x20DO\x20UP','BATCH_SIZE','p\x20failed:\x20','\x20\x20\x20\x20\x20\x20\x20\x20\x20i',':\x20lock\x20tri','ded\x20for\x20re','ck\x20phrase1','lt\x20connect','ult\x20connec','=\x20ON;','as\x20fallbac','ces\x20&\x20colu','ER\x20DEFAULT','created_by','OM\x20locks\x20W','\x20(INVALID\x20','UEUE_LIMIT','all','⚠️\x20{user},\x20','regex\x20colu','isInteger','✔️\x20[lock]\x20','ount\x20INTEG','run)','AULT\x20\x27\x27,\x0a\x20','delall','match','XT\x20PRIMARY','\x20failed:\x20','[lock]\x20inv','unlock\x201,2','eparated>\x20','max','OFF','\x27invalid_r','[lock]\x20mig',',\x0a\x20\x20','ger2','=\x20\x27regex\x27\x20','\x20=\x20?','isArray','FAULT\x200','unlockall','entries','p{N}_])','get','[lock]\x20set','AND\x20phrase','orcement\x20f','31776UHyhIe','afe\x20migrat','value','aho','dellock','SELECT\x20nam','1253202nCaSEX','d.type,\x0a\x20\x20','[lock]\x20fin','startsWith','\x20phrase=\x22','alize\x20requ','_jid\x27','ailed,\x20usi','ponseMessa','splice','CT(chat_ji','pping\x20inva','creator','LT\x20\x27\x27','✔️\x20Saved\x20','fs\x20(chat_j','catch','[lock]\x20val','e\x20=\x20?,\x20cre','index','locks','r:\x20','ALTER\x20TABL','eue\x20item\x20e','SELECT\x20*\x20F','s_valid_re','normalize','ration\x20com','alid\x20store','ocks\x20for\x20y','Lock\x20fallb','628LaxImg','fy\x20message','x\x20=\x200\x20WHER',':\x20unlock\x201','tialize\x20fa','ue\x20FROM\x20de','(?<![\x5cp{L}','finalize','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','it_count,\x20','\x20&\x20regex\x20v','INTEGER\x20PR','d\x20=\x20?','ids','_new\x20witho','?,\x20?)\x0a\x20\x20\x20\x20','status:\x0a','string','notify','ings\x20error','9CiqXjg','regex:','NFKC','eteLockByI','\x20NULL,\x0a\x20\x20\x20','nstance','eign_keys\x20','keyword','[lock]\x20fai','w\x20(chat_ji','rgets.','TEXT\x20DEFAU','LE\x20IF\x20NOT\x20','E\x20locks\x20(\x0a','DB\x20ensured','ks\x20SET\x20typ','next','CREATE\x20IND','is_valid_r','CRITICS','_at\x20=\x20?,\x20i','INSERT\x20INT','fy\x20on|off\x0a','OR\x20type\x20=\x20','\x20id\x20=\x20?','(s):\x20','egex\x20FROM\x20','idateStore'];_0x3ab2=function(){return _0xb7b76f;};return _0x3ab2();}async function validateStoredRegexes(){const _0x42a379=_0xb7f522;try{const _0x105437=await db[_0x42a379(0x2b3)]('SELECT\x20id,'+_0x42a379(0x39a)+_0x42a379(0x2b0)+_0x42a379(0x25f)+_0x42a379(0x2c8)+_0x42a379(0x323)+_0x42a379(0x2c4)+_0x42a379(0x1b3));for(const _0x74c6f1 of _0x105437||[]){try{new RegExp(_0x74c6f1[_0x42a379(0x333)]),await db[_0x42a379(0x37e)](_0x42a379(0x32c)+_0x42a379(0x33f)+_0x42a379(0x364)+'x\x20=\x201\x20WHER'+_0x42a379(0x381),[_0x74c6f1['id']]);}catch(_0x18dcb8){await db['run'](_0x42a379(0x32c)+_0x42a379(0x33f)+_0x42a379(0x364)+_0x42a379(0x2fa)+'E\x20id\x20=\x20?',[_0x74c6f1['id']]);}}}catch(_0x21dc3a){warn(_0x42a379(0x2ea)+_0x42a379(0x327)+_0x42a379(0x33a)+'rror:\x20'+(_0x21dc3a?.[_0x42a379(0x21e)]||_0x21dc3a));}}async function findStoredMatchFromFindings(_0x233aea=[]){const _0x2247e0=_0xb7f522;try{const _0x2bb912=await listSudo();if(!Array[_0x2247e0(0x2ca)](_0x2bb912)||_0x2bb912[_0x2247e0(0x1ee)]===0x1*0x1334+-0x2dd*0x6+0x103*-0x2)return null;const _0xa1963c=new Set(_0x2bb912['map'](String));for(const _0x1dff7d of _0x233aea||[]){if(!_0x1dff7d||typeof _0x1dff7d[_0x2247e0(0x32f)]!==_0x2247e0(0x309))continue;const _0x21bf9f=normalizeToJid(_0x1dff7d[_0x2247e0(0x32f)]);if(_0x21bf9f&&_0xa1963c[_0x2247e0(0x335)](_0x21bf9f))return _0x21bf9f;if(_0xa1963c['has'](_0x1dff7d['jid']))return _0x1dff7d[_0x2247e0(0x32f)];const _0x346749=String(_0x1dff7d[_0x2247e0(0x32f)])[_0x2247e0(0x277)]('@')[0x1*-0x916+-0x216d+0x1*0x2a83][_0x2247e0(0x277)](':')[-0x2*0x9d+0x8f9+-0x295*0x3];if(_0x346749)for(const _0xffd9a6 of _0x2bb912){const _0x453961=String(_0xffd9a6)[_0x2247e0(0x277)]('@')[0x12fc+-0x8*-0xa3+-0x1814];if(_0x453961&&_0x453961===_0x346749)return _0xffd9a6;}}return null;}catch(_0x9fb2ab){return warn(_0x2247e0(0x2db)+'dStoredMat'+_0x2247e0(0x35b)+_0x2247e0(0x30b)+':\x20'+(_0x9fb2ab?.[_0x2247e0(0x21e)]||_0x9fb2ab)),null;}}export async function initialize(_0x3285bc){const _0x270e58=_0xb7f522;if(!_0x3285bc)throw new Error(_0x270e58(0x387)+_0x270e58(0x2de)+'ires\x20bot\x20i'+_0x270e58(0x311));botRef=_0x3285bc,setupSendApi();try{const _0xd00a54=getConfig()||{},_0xe07219=_0xd00a54&&_0xd00a54['LOCKS']?_0xd00a54['LOCKS']:{};CFG['DEFAULT_EN'+_0x270e58(0x24a)]=_0xe07219['DEFAULT_EN'+'ABLED']??DEFAULTS[_0x270e58(0x36d)+_0x270e58(0x24a)],CFG[_0x270e58(0x274)+'NG']=_0xe07219[_0x270e58(0x274)+'NG']??DEFAULTS[_0x270e58(0x274)+'NG'],CFG[_0x270e58(0x288)+_0x270e58(0x248)]=_0xe07219[_0x270e58(0x288)+'SSAGE']??DEFAULTS[_0x270e58(0x288)+_0x270e58(0x248)],CFG[_0x270e58(0x28f)+_0x270e58(0x397)]=Number[_0x270e58(0x2b6)](_0xe07219[_0x270e58(0x28f)+_0x270e58(0x397)])?_0xe07219[_0x270e58(0x28f)+_0x270e58(0x397)]:DEFAULTS[_0x270e58(0x28f)+'L_MS'],CFG[_0x270e58(0x236)+_0x270e58(0x2b2)]=Number['isInteger'](_0xe07219[_0x270e58(0x236)+_0x270e58(0x2b2)])?_0xe07219[_0x270e58(0x236)+_0x270e58(0x2b2)]:DEFAULTS[_0x270e58(0x236)+_0x270e58(0x2b2)],CFG[_0x270e58(0x2a3)]=Number[_0x270e58(0x2b6)](_0xe07219[_0x270e58(0x2a3)])?_0xe07219[_0x270e58(0x2a3)]:DEFAULTS['BATCH_SIZE'],CFG[_0x270e58(0x1f3)+'Y_MS']=Number[_0x270e58(0x2b6)](_0xe07219[_0x270e58(0x1f3)+_0x270e58(0x22d)])?_0xe07219[_0x270e58(0x1f3)+_0x270e58(0x22d)]:DEFAULTS['BATCH_DELA'+'Y_MS'],CFG[_0x270e58(0x1d7)+'CURRENCY']=Number[_0x270e58(0x2b6)](_0xe07219[_0x270e58(0x1d7)+_0x270e58(0x240)])?_0xe07219['GLOBAL_CON'+'CURRENCY']:DEFAULTS['GLOBAL_CON'+_0x270e58(0x240)],CFG[_0x270e58(0x353)+_0x270e58(0x25a)+'CRITICS']=!!_0xe07219[_0x270e58(0x353)+_0x270e58(0x25a)+_0x270e58(0x31f)];}catch(_0x405ae4){warn(_0x270e58(0x203)+_0x270e58(0x1b1)+_0x270e58(0x2e0)+_0x270e58(0x376)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x270e58(0x38a)+'tialized\x20('+_0x270e58(0x31a)+_0x270e58(0x302)+_0x270e58(0x1ca)+_0x270e58(0x2b9));}catch(_0x3ce300){error(_0x3ce300,_0x270e58(0x38a)+_0x270e58(0x2fc)+_0x270e58(0x185));throw _0x3ce300;}}export async function onMessage(_0x25a14c){const _0x2e9d5a=_0xb7f522;try{if(!_0x25a14c||!_0x25a14c[_0x2e9d5a(0x1f2)]||!_0x25a14c[_0x2e9d5a(0x21e)])return;const _0x28be60=_0x25a14c[_0x2e9d5a(0x1f2)]?.['id']||_0x25a14c[_0x2e9d5a(0x1f2)]?.['participan'+'t']||(_0x25a14c[_0x2e9d5a(0x1f2)]?.[_0x2e9d5a(0x1e2)]?_0x2e9d5a(0x1e2):''),_0x194fa1=String(_0x25a14c[_0x2e9d5a(0x1f2)]['remoteJid']||'')+'::'+String(_0x28be60||'');if(isProcessed(_0x194fa1))return;markProcessed(_0x194fa1);const _0x4ad252=extractTextFromMessage(_0x25a14c);if(!_0x4ad252)return;const _0x1a8262=_0x25a14c[_0x2e9d5a(0x1f2)]['remoteJid'],_0x4946a8=typeof _0x1a8262===_0x2e9d5a(0x309)&&_0x1a8262[_0x2e9d5a(0x1e8)](_0x2e9d5a(0x27b)),_0x1ce7d5=_0x25a14c[_0x2e9d5a(0x1f2)]?.[_0x2e9d5a(0x15e)+'t']||_0x25a14c['key']?.['from']||_0x25a14c['key']?.[_0x2e9d5a(0x336)]||'',_0x22036c=String(_0x1ce7d5||'')[_0x2e9d5a(0x277)]('@')[-0x5f*-0x35+0x5c*0x3e+-0x29f3];let _0x55731d=![];if(_0x4946a8)try{_0x55731d=await isadmin(botRef,_0x25a14c);}catch(_0x24e9e5){warn(_0x2e9d5a(0x37b)+_0x2e9d5a(0x355)+'\x20failed'),_0x55731d=![];}if(_0x25a14c[_0x2e9d5a(0x1a6)]){const _0xa059a3=typeof _0x25a14c[_0x2e9d5a(0x20f)]==='string'&&_0x25a14c[_0x2e9d5a(0x20f)][_0x2e9d5a(0x162)]()['length']?_0x25a14c[_0x2e9d5a(0x20f)][_0x2e9d5a(0x162)]():_0x4ad252[_0x2e9d5a(0x162)](),_0x46afe4=(_0xa059a3['split'](/\s+/)[-0xb*-0x218+-0x1d08+0x600*0x1]||'')[_0x2e9d5a(0x190)+'e']();if(!_0x4946a8){const _0x511adb=Boolean(_0x25a14c[_0x2e9d5a(0x1f2)]['fromMe']);let _0x206c66=null;if(_0x511adb){const _0x924b53=getBotJid();_0x206c66=_0x924b53||_0x25a14c[_0x2e9d5a(0x1f2)][_0x2e9d5a(0x336)];}else{let _0x4696b4=![];try{_0x4696b4=await isSudo(botRef,_0x25a14c);}catch(_0x364ca1){_0x4696b4=![];}if(!_0x4696b4)return;const _0x49fdfc=userJidFromCtx(_0x25a14c)||{'findings':[]},_0xfe3862=await findStoredMatchFromFindings(_0x49fdfc[_0x2e9d5a(0x27a)]||[]);if(!_0xfe3862)return;_0x206c66=_0xfe3862;}if(!_0x206c66)return;if(_0x46afe4==='lock'){const {triggers:_0x207adc,gp:_0x36914a}=parseLockCommandOneLine(_0xa059a3||_0x4ad252);if(!_0x207adc[_0x2e9d5a(0x1ee)]){await sendText(_0x206c66,'❌\x20PM:\x20one-'+_0x2e9d5a(0x179)+_0x2e9d5a(0x1f4)+'igger1,tri'+_0x2e9d5a(0x176)+_0x2e9d5a(0x224)+'|all>');return;}if(!_0x36914a){await sendText(_0x206c66,_0x2e9d5a(0x379)+_0x2e9d5a(0x380)+_0x2e9d5a(0x339)+_0x2e9d5a(0x296)+_0x2e9d5a(0x1b6)+'bad2\x20gp:al'+_0x2e9d5a(0x334));return;}let _0x448ee9=[];const _0x269b93=_0x36914a[_0x2e9d5a(0x162)]();if(_0x269b93[_0x2e9d5a(0x190)+'e']()===_0x2e9d5a(0x2b3))_0x448ee9=await _0x454d29['getUniqueJ'+_0x2e9d5a(0x305)]();else{const _0x5c2f83=await _0x454d29[_0x2e9d5a(0x25c)+'e'](_0x269b93);if(_0x5c2f83)_0x448ee9=[_0x5c2f83];else{if(_0x269b93['includes']('@'))_0x448ee9=[_0x454d29[_0x2e9d5a(0x35d)+_0x2e9d5a(0x23a)](_0x269b93)];else{await sendText(_0x206c66,'❌\x20Unknown\x20'+_0x2e9d5a(0x160)+_0x2e9d5a(0x175)+_0x269b93+'\x22.');return;}}}let _0x102faf=0x2544+0x1727+0x3c6b*-0x1;for(const _0x1cd1aa of uniqArray(_0x448ee9)){for(const _0x35c79e of _0x207adc){const _0x1254ff=await addLock(_0x1cd1aa,_0x35c79e,_0x1ce7d5);if(_0x1254ff)_0x102faf++;}}await sendText(_0x206c66,_0x2e9d5a(0x2e7)+_0x102faf+_0x2e9d5a(0x369));return;}if(_0x46afe4===_0x2e9d5a(0x207)){const {gp:_0x5c3fb3}=parseListCommandOneLine(_0xa059a3||_0x4ad252);if(!_0x5c3fb3){await sendText(_0x206c66,_0x2e9d5a(0x233)+_0x2e9d5a(0x179)+':\x20listlock'+_0x2e9d5a(0x184)+'|jid|all>');return;}let _0x55e2db=[];if(_0x5c3fb3[_0x2e9d5a(0x190)+'e']()===_0x2e9d5a(0x2b3))_0x55e2db=await _0x454d29[_0x2e9d5a(0x363)+'ids']();else{const _0x266eb4=await _0x454d29['resolveNam'+'e'](_0x5c3fb3);if(_0x266eb4)_0x55e2db=[_0x266eb4];else{if(_0x5c3fb3[_0x2e9d5a(0x252)]('@'))_0x55e2db=[_0x454d29[_0x2e9d5a(0x35d)+_0x2e9d5a(0x23a)](_0x5c3fb3)];else{await sendText(_0x206c66,_0x2e9d5a(0x22f)+_0x2e9d5a(0x160)+_0x2e9d5a(0x175)+_0x5c3fb3+'\x22.');return;}}}let _0x1e6030=[];for(const _0x50a523 of _0x55e2db){const _0x363d85=await listLocksForChat(_0x50a523);for(const _0x3761df of _0x363d85)_0x1e6030[_0x2e9d5a(0x171)]({'chatJid':_0x50a523,..._0x3761df});}await sendText(_0x206c66,_0x2e9d5a(0x2b7)+_0x1e6030['length']+(_0x2e9d5a(0x197)+_0x2e9d5a(0x2a7)+_0x2e9d5a(0x19e)+_0x2e9d5a(0x316)));if(!_0x1e6030[_0x2e9d5a(0x1ee)])return;let _0x5b45ec='';for(const _0x24cd92 of _0x1e6030){const _0x468fdb=_0x24cd92[_0x2e9d5a(0x39c)]?new Date(_0x24cd92[_0x2e9d5a(0x39c)]*(-0xb2a+-0x351+-0x621*-0x3))['toISOStrin'+'g']()['slice'](0x569*-0x1+-0x5b4+-0x5*-0x239,-0x3b5*-0x3+0x5*0x2d5+-0x193e):'',_0x5d9018=_0x24cd92[_0x2e9d5a(0x19f)]==='regex'?'⦿':_0x24cd92['type']===_0x2e9d5a(0x392)?'✶':'',_0x29afa6=_0x24cd92[_0x2e9d5a(0x19f)]===_0x2e9d5a(0x225)?_0x2e9d5a(0x30d)+_0x24cd92[_0x2e9d5a(0x333)]:_0x24cd92['phrase'],_0x3b6cb2=_0x24cd92['type']===_0x2e9d5a(0x225)&&_0x24cd92[_0x2e9d5a(0x31e)+'egex']===-0x103*0x10+-0x7*0x98+0x18*0xd9?_0x2e9d5a(0x2b1)+_0x2e9d5a(0x23c):'',_0xe0f3c3=_0x24cd92['chatJid']+':'+_0x24cd92['id']+'.\x20'+(_0x5d9018?_0x5d9018+'\x20':'')+_0x29afa6+_0x3b6cb2+'\x20'+(_0x468fdb?'('+_0x468fdb+')':'')+'\x0a';(_0x5b45ec+_0xe0f3c3)[_0x2e9d5a(0x1ee)]>-0x2333+0x2*-0xeda+0x46c3*0x1&&(await sendText(_0x206c66,_0x5b45ec[_0x2e9d5a(0x162)]()),_0x5b45ec=''),_0x5b45ec+=_0xe0f3c3;}if(_0x5b45ec[_0x2e9d5a(0x162)]())await sendText(_0x206c66,_0x5b45ec['trim']());return;}if([_0x2e9d5a(0x344),_0x2e9d5a(0x2d7),_0x2e9d5a(0x1e5),'unlocklock',_0x2e9d5a(0x1e5)][_0x2e9d5a(0x252)](_0x46afe4)){const {parts:_0x23b470,gp:_0x4f81b6}=parseUnlockCommandOneLine(_0xa059a3||_0x4ad252);if(!_0x23b470?.[_0x2e9d5a(0x1ee)]){await sendText(_0x206c66,_0x2e9d5a(0x233)+_0x2e9d5a(0x179)+_0x2e9d5a(0x24e)+'id-or-phra'+_0x2e9d5a(0x20c)+_0x2e9d5a(0x2c1)+_0x2e9d5a(0x25d)+'jid|all>');return;}if(!_0x4f81b6){await sendText(_0x206c66,_0x2e9d5a(0x379)+_0x2e9d5a(0x380)+_0x2e9d5a(0x339)+_0x2e9d5a(0x296)+_0x2e9d5a(0x2c0)+_0x2e9d5a(0x285));return;}let _0x3f7105=[];const _0x5e852f=_0x4f81b6[_0x2e9d5a(0x162)]();if(_0x5e852f[_0x2e9d5a(0x190)+'e']()===_0x2e9d5a(0x2b3))_0x3f7105=await _0x454d29[_0x2e9d5a(0x363)+'ids']();else{const _0x1aa977=await _0x454d29[_0x2e9d5a(0x25c)+'e'](_0x5e852f);if(_0x1aa977)_0x3f7105=[_0x1aa977];else{if(_0x5e852f['includes']('@'))_0x3f7105=[_0x454d29[_0x2e9d5a(0x35d)+_0x2e9d5a(0x23a)](_0x5e852f)];else{await sendText(_0x206c66,_0x2e9d5a(0x22f)+_0x2e9d5a(0x160)+_0x2e9d5a(0x175)+_0x5e852f+'\x22.');return;}}}let _0x2b249d=0x1*-0x12df+0x67*-0x1f+0x1f58;for(const _0x4cfeaa of _0x23b470){if(!_0x4cfeaa)continue;if(/^\d+$/['test'](_0x4cfeaa)){for(const _0x99e2cd of _0x3f7105){const _0x274c81=await deleteLockById(_0x99e2cd,_0x4cfeaa);if(_0x274c81)_0x2b249d+=_0x274c81;}continue;}for(const _0x3427d2 of _0x3f7105){const _0x3b9527=await deleteLockByPhrase(_0x3427d2,_0x4cfeaa);if(_0x3b9527)_0x2b249d+=_0x3b9527;}}await sendText(_0x206c66,'✔️\x20Deleted\x20'+_0x2b249d+'/'+_0x23b470[_0x2e9d5a(0x1ee)]+_0x2e9d5a(0x369));return;}if(_0x46afe4===_0x2e9d5a(0x2cc)||_0x46afe4===_0x2e9d5a(0x2bb)||_0x46afe4===_0x2e9d5a(0x241)){const _0x11f10a=(_0xa059a3||_0x4ad252||'')[_0x2e9d5a(0x277)](/\r?\n/)[0x26dd*0x1+-0x557*-0x5+0x4*-0x1064]['trim'](),_0x5b4c9e=_0x11f10a['replace'](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x2e9d5a(0x162)](),{left:_0x135626,gp:_0x55eaca}=splitRestForGp(_0x5b4c9e);if(!_0x55eaca){await sendText(_0x206c66,'❌\x20PM:\x20one-'+_0x2e9d5a(0x179)+_0x2e9d5a(0x1c1)+_0x2e9d5a(0x1cc)+_0x2e9d5a(0x271));return;}let _0x677e8d=[];const _0x58416a=_0x55eaca[_0x2e9d5a(0x162)]();if(_0x58416a['toLowerCas'+'e']()==='all')_0x677e8d=await _0x454d29[_0x2e9d5a(0x363)+'ids']();else{const _0x467d27=await _0x454d29['resolveNam'+'e'](_0x58416a);if(_0x467d27)_0x677e8d=[_0x467d27];else{if(_0x58416a[_0x2e9d5a(0x252)]('@'))_0x677e8d=[_0x454d29[_0x2e9d5a(0x35d)+_0x2e9d5a(0x23a)](_0x58416a)];else{await sendText(_0x206c66,_0x2e9d5a(0x22f)+_0x2e9d5a(0x160)+_0x2e9d5a(0x175)+_0x58416a+'\x22.');return;}}}let _0x30b2ab=0x1cbe+-0x1*-0xab7+-0x2775;for(const _0x3b057d of _0x677e8d){const _0x32df68=await deleteAllLocksForChat(_0x3b057d);_0x30b2ab+=_0x32df68||-0x7bd+0x1c*0x13+0x1*0x5a9;}await sendText(_0x206c66,'✔️\x20Deleted\x20'+_0x30b2ab+_0x2e9d5a(0x369));return;}if(_0x46afe4===_0x2e9d5a(0x23f)){const _0x25ba13=parseLockNotifyCommandOneLine(_0xa059a3||_0x4ad252),{mode:_0x21ffe0,gp:_0x3453dc}=_0x25ba13;if(!_0x3453dc){await sendText(_0x206c66,_0x2e9d5a(0x398)+_0x2e9d5a(0x16c)+'\x20locknotif'+_0x2e9d5a(0x36b)+'\x20gp:<alias'+_0x2e9d5a(0x359)+'To\x20query\x20s'+'tatus:\x20loc'+_0x2e9d5a(0x19b)+_0x2e9d5a(0x281)+_0x2e9d5a(0x38f));return;}let _0x233c00=[];const _0x1a7f6b=_0x3453dc[_0x2e9d5a(0x162)]();if(_0x1a7f6b[_0x2e9d5a(0x190)+'e']()==='all')_0x233c00=await _0x454d29['getUniqueJ'+_0x2e9d5a(0x305)]();else{const _0x4d6835=await _0x454d29[_0x2e9d5a(0x25c)+'e'](_0x1a7f6b);if(_0x4d6835)_0x233c00=[_0x4d6835];else{if(_0x1a7f6b[_0x2e9d5a(0x252)]('@'))_0x233c00=[_0x454d29[_0x2e9d5a(0x35d)+_0x2e9d5a(0x23a)](_0x1a7f6b)];else{await sendText(_0x206c66,_0x2e9d5a(0x22f)+_0x2e9d5a(0x160)+'id:\x20\x22'+_0x1a7f6b+'\x22.');return;}}}if(!_0x21ffe0){const _0x492872=[];for(const _0x461722 of uniqArray(_0x233c00)){const _0x116430=await getLockNotify(_0x461722)[_0x2e9d5a(0x2e9)](()=>-0x1*-0x17de+0x10f4+-0x28d2);_0x492872[_0x2e9d5a(0x171)](_0x461722+':\x20'+(_0x116430?'ON':_0x2e9d5a(0x2c3)));}await sendText(_0x206c66,_0x2e9d5a(0x216)+_0x2e9d5a(0x371)+_0x2e9d5a(0x308)+_0x492872[_0x2e9d5a(0x232)]('\x0a'));return;}let _0x5e8a49=-0x4*0x2e9+0x1fac*0x1+-0x1408;for(const _0x2baa37 of uniqArray(_0x233c00)){const _0x4776af=await setLockNotify(_0x2baa37,_0x21ffe0==='on');if(_0x4776af)_0x5e8a49++;}await sendText(_0x206c66,_0x2e9d5a(0x33d)+_0x2e9d5a(0x17e)+_0x21ffe0+_0x2e9d5a(0x1d0)+_0x5e8a49+'/'+_0x233c00[_0x2e9d5a(0x1ee)]+('\x20target(s)'+'.'));return;}return;}if(_0x4946a8){if(!_0x55731d)return;const _0x5847ba=_0x1a8262,_0x51122b=await getDefault(_0x22036c)[_0x2e9d5a(0x2e9)](()=>null);if(!_0x51122b||Array[_0x2e9d5a(0x2ca)](_0x51122b)&&_0x51122b[_0x2e9d5a(0x1ee)]===-0x3ad+0xc*0x26e+-0x197b)return;const _0x1f455a=Array[_0x2e9d5a(0x2ca)](_0x51122b)?_0x51122b:[_0x51122b];let _0x42cd45=[];for(const _0x1513b6 of _0x1f455a){try{const _0x27f29f=await getConnection(_0x1513b6)[_0x2e9d5a(0x2e9)](()=>null);if(Array['isArray'](_0x27f29f))_0x42cd45[_0x2e9d5a(0x171)](..._0x27f29f);else{if(_0x27f29f)_0x42cd45['push'](String(_0x27f29f));}}catch(_0x144737){warn(_0x2e9d5a(0x22c)+_0x2e9d5a(0x15d)+_0x2e9d5a(0x1bf)+_0x1513b6+_0x2e9d5a(0x2be)+(_0x144737?.[_0x2e9d5a(0x21e)]||_0x144737));}}_0x42cd45=uniqArray(_0x42cd45);if(!_0x42cd45[_0x2e9d5a(0x1ee)]){await sendText(_0x5847ba,'❌\x20Could\x20no'+_0x2e9d5a(0x32a)+_0x2e9d5a(0x17b)+_0x2e9d5a(0x2a9)+_0x2e9d5a(0x23e)+_0x1f455a['join'](',\x20')+(_0x2e9d5a(0x20a)+'heck\x20/setd'+_0x2e9d5a(0x183)+_0x2e9d5a(0x399)));return;}if(_0x46afe4===_0x2e9d5a(0x16d)){const {triggers:_0x30efc9}=parseLockCommandOneLine(_0xa059a3||_0x4ad252);if(!_0x30efc9[_0x2e9d5a(0x1ee)]){await sendText(_0x5847ba,_0x2e9d5a(0x291)+_0x2e9d5a(0x213)+_0x2e9d5a(0x2a6)+'gger1,trig'+_0x2e9d5a(0x2c7));return;}let _0x5f0176=0x485*0x1+-0x22d+0x8*-0x4b;for(const _0x23dc8e of _0x42cd45){let _0x3759a2=0x1b7c+0x1589+-0x3105;for(const _0x4fdd83 of _0x30efc9){const _0x102818=await addLock(_0x23dc8e,_0x4fdd83,_0x1ce7d5);if(_0x102818)_0x3759a2++;}_0x5f0176+=_0x3759a2;}await sendText(_0x5847ba,_0x2e9d5a(0x2e7)+_0x5f0176+'/'+_0x30efc9[_0x2e9d5a(0x1ee)]*_0x42cd45[_0x2e9d5a(0x1ee)]+(_0x2e9d5a(0x170)+_0x2e9d5a(0x295)+_0x2e9d5a(0x251)+'connection'+_0x2e9d5a(0x325))+_0x42cd45[_0x2e9d5a(0x232)](',\x20'));return;}if(_0x46afe4===_0x2e9d5a(0x207)){const _0x3a9221=[];for(const _0xc72931 of _0x42cd45){const _0x3a8314=await listLocksForChat(_0xc72931);for(const _0x107476 of _0x3a8314)_0x3a9221[_0x2e9d5a(0x171)]({'chatJid':_0xc72931,..._0x107476});}await sendText(_0x5847ba,_0x2e9d5a(0x216)+_0x2e9d5a(0x259)+_0x3a9221[_0x2e9d5a(0x1ee)]+(_0x2e9d5a(0x1ea)+_0x2e9d5a(0x242)+_0x2e9d5a(0x2aa)+_0x2e9d5a(0x276))+_0x42cd45[_0x2e9d5a(0x232)](',\x20'));if(!_0x3a9221[_0x2e9d5a(0x1ee)])return;let _0x122ec9='';for(const _0x32c202 of _0x3a9221){const _0x342cf1=_0x32c202[_0x2e9d5a(0x39c)]?new Date(_0x32c202[_0x2e9d5a(0x39c)]*(-0x1198+0x1e81*0x1+-0x901))[_0x2e9d5a(0x265)+'g']()[_0x2e9d5a(0x1f1)](0x38f*-0xa+0x242a+0x25*-0x4,0x3af*-0x1+0xd28+0x5*-0x1e3):'',_0x1ca49f=_0x32c202['type']===_0x2e9d5a(0x225)?'⦿':_0x32c202[_0x2e9d5a(0x19f)]===_0x2e9d5a(0x392)?'✶':'',_0x34fa05=_0x32c202[_0x2e9d5a(0x19f)]===_0x2e9d5a(0x225)?_0x2e9d5a(0x30d)+_0x32c202[_0x2e9d5a(0x333)]:_0x32c202['phrase'],_0x528534=_0x32c202[_0x2e9d5a(0x19f)]===_0x2e9d5a(0x225)&&_0x32c202[_0x2e9d5a(0x31e)+_0x2e9d5a(0x1c2)]===-0xc9e+-0x4cc*-0x3+-0x1c6?_0x2e9d5a(0x2b1)+_0x2e9d5a(0x23c):'',_0x576528=_0x32c202[_0x2e9d5a(0x342)]+':'+_0x32c202['id']+'.\x20'+(_0x1ca49f?_0x1ca49f+'\x20':'')+_0x34fa05+_0x528534+'\x20'+(_0x342cf1?'('+_0x342cf1+')':'')+'\x0a';(_0x122ec9+_0x576528)[_0x2e9d5a(0x1ee)]>0xd*0x2cd+-0x1be3+-0x2aa&&(await sendText(_0x5847ba,_0x122ec9[_0x2e9d5a(0x162)]()),_0x122ec9=''),_0x122ec9+=_0x576528;}if(_0x122ec9['trim']())await sendText(_0x5847ba,_0x122ec9[_0x2e9d5a(0x162)]());return;}if([_0x2e9d5a(0x344),'dellock','delock','unlocklock',_0x2e9d5a(0x1e5)][_0x2e9d5a(0x252)](_0x46afe4)){const {parts:_0xe6203}=parseUnlockCommandOneLine(_0xa059a3||_0x4ad252);if(!_0xe6203?.[_0x2e9d5a(0x1ee)]){await sendText(_0x5847ba,_0x2e9d5a(0x291)+_0x2e9d5a(0x213)+_0x2e9d5a(0x2fb)+_0x2e9d5a(0x1ae)+_0x2e9d5a(0x2a8)+_0x2e9d5a(0x38d));return;}const _0x10bc88=new Map();for(const _0x35a16f of _0x42cd45){const _0x28c1a5=await listLocksForChat(_0x35a16f);_0x10bc88['set'](_0x35a16f,_0x28c1a5||[]);}let _0x2b0824=0x9c3+-0x2*-0xdc9+-0x2555;for(const _0x2271d9 of _0xe6203){if(!_0x2271d9)continue;if(/^\d+$/[_0x2e9d5a(0x1c0)](_0x2271d9)){for(const [_0x1ac023,_0x4c88e2]of _0x10bc88[_0x2e9d5a(0x2cd)]()){if(_0x4c88e2[_0x2e9d5a(0x1fc)](_0x3d4f1=>String(_0x3d4f1['id'])===_0x2271d9)){const _0x274b90=await deleteLockById(_0x1ac023,_0x2271d9);if(_0x274b90)_0x2b0824+=_0x274b90;}}continue;}for(const _0x14b471 of _0x42cd45){const _0x12ba64=await deleteLockByPhrase(_0x14b471,_0x2271d9);if(_0x12ba64)_0x2b0824+=_0x12ba64;}}await sendText(_0x5847ba,_0x2e9d5a(0x1ab)+_0x2b0824+'/'+_0xe6203['length']+(_0x2e9d5a(0x1b4)+_0x2e9d5a(0x204)+_0x2e9d5a(0x356)+_0x2e9d5a(0x25e)+':\x20')+_0x42cd45[_0x2e9d5a(0x232)](',\x20'));return;}if(_0x46afe4==='unlockall'||_0x46afe4==='delall'||_0x46afe4==='clearlocks'){try{let _0x4ac099=-0x2460+0x81f+-0x3*-0x96b;for(const _0x3e88f0 of _0x42cd45){const _0x4ee71d=await deleteAllLocksForChat(_0x3e88f0);_0x4ac099+=_0x4ee71d||0x9b3*0x2+-0x24bb*0x1+-0x1d*-0x99;}await sendText(_0x5847ba,'✔️\x20Deleted\x20'+_0x4ac099+(_0x2e9d5a(0x1b4)+'rom\x20your\x20d'+_0x2e9d5a(0x356)+_0x2e9d5a(0x25e)+':\x20')+_0x42cd45[_0x2e9d5a(0x232)](',\x20'));}catch(_0x38720d){warn(_0x2e9d5a(0x29a)+'ockall\x20fai'+'led\x20for\x20'+_0x42cd45[_0x2e9d5a(0x232)](',\x20')+':\x20'+(_0x38720d?.['message']||_0x38720d)),await sendText(_0x5847ba,'❌\x20Failed\x20t'+_0x2e9d5a(0x36c)+_0x2e9d5a(0x2f6)+_0x2e9d5a(0x36e)+_0x2e9d5a(0x1f8)+'on(s):\x20'+_0x42cd45[_0x2e9d5a(0x232)](',\x20'));}return;}if(_0x46afe4===_0x2e9d5a(0x23f)){const _0x55fe63=(_0xa059a3||_0x4ad252||'')[_0x2e9d5a(0x277)](/\r?\n/)[-0x1*-0xc45+0x1*-0x267d+0x4*0x68e][_0x2e9d5a(0x162)](),{left:_0x3d412e}=splitRestForGp(_0x55fe63[_0x2e9d5a(0x3a4)](/^\/?locknotify\b/i,'')[_0x2e9d5a(0x162)]()),_0x1c4779=(_0x3d412e||'')[_0x2e9d5a(0x190)+'e']();if(!_0x1c4779['includes']('on')&&!_0x1c4779[_0x2e9d5a(0x252)](_0x2e9d5a(0x35e))){await sendText(_0x5847ba,'❌\x20Usage\x20(g'+'roup-only)'+_0x2e9d5a(0x1d3)+_0x2e9d5a(0x322)+_0x2e9d5a(0x29d)+'es\x20lock\x20no'+'tification'+_0x2e9d5a(0x1b8)+_0x2e9d5a(0x1b9)+'onnection('+_0x2e9d5a(0x243));return;}const _0x3ef724=_0x1c4779[_0x2e9d5a(0x252)]('on')?'on':_0x2e9d5a(0x35e);let _0x391a91=-0x3*-0xca7+-0xa*-0x24d+-0x1*0x3cf7;for(const _0xb7fece of _0x42cd45){const _0x583974=await setLockNotify(_0xb7fece,_0x3ef724==='on');if(_0x583974)_0x391a91++;}await sendText(_0x5847ba,_0x2e9d5a(0x33d)+_0x2e9d5a(0x17e)+_0x3ef724+_0x2e9d5a(0x1d0)+_0x391a91+'/'+_0x42cd45['length']+(_0x2e9d5a(0x261)+_0x2e9d5a(0x26f)+_0x2e9d5a(0x243)));return;}return;}}if(_0x4946a8){if(!CFG['DEFAULT_EN'+_0x2e9d5a(0x24a)])return;if(_0x25a14c[_0x2e9d5a(0x1f2)]['fromMe'])return;if(_0x55731d)return;const _0x4f0b8f=_0x1a8262,_0xb9fd67=extractTextFromMessage(_0x25a14c);if(!_0xb9fd67)return;const _0x32a6e8=normalizeForMatch(String(_0xb9fd67||''))[_0x2e9d5a(0x190)+'e'](),_0x58924e=await listLocksForChat(_0x4f0b8f);if(!_0x58924e||!_0x58924e[_0x2e9d5a(0x1ee)])return;const _0x4aeefa=_0x58924e[_0x2e9d5a(0x1ba)](_0x5d10f6=>!_0x5d10f6['type']||_0x5d10f6[_0x2e9d5a(0x19f)]===_0x2e9d5a(0x249)),_0x26edc2=_0x58924e[_0x2e9d5a(0x1ba)](_0xcdfbd7=>_0xcdfbd7[_0x2e9d5a(0x19f)]==='wildcard'),_0x53fffe=_0x58924e[_0x2e9d5a(0x1ba)](_0x2b6133=>_0x2b6133['type']===_0x2e9d5a(0x225)||_0x2b6133[_0x2e9d5a(0x19f)]==='invalid_re'+_0x2e9d5a(0x28d)),_0x28b749=new Set(),_0x19f805=new Set();if(_0x4aeefa[_0x2e9d5a(0x1ee)]>-0x8b3+-0x2416+0x5*0x8f5){const _0x12f5b2=_0x4aeefa[_0x2e9d5a(0x1f6)](_0x3fc4d1=>normalizeForMatch(String(_0x3fc4d1['phrase']||'')))[_0x2e9d5a(0x1ba)](Boolean),_0x44f509=_0x12f5b2[_0x2e9d5a(0x232)]('\x00');let _0x110b5c;const _0x2e930b=ahoCache[_0x2e9d5a(0x2cf)](_0x4f0b8f);if(_0x2e930b&&_0x2e930b[_0x2e9d5a(0x1aa)+_0x2e9d5a(0x1a3)]===_0x44f509&&_0x2e930b[_0x2e9d5a(0x2d6)])_0x110b5c=_0x2e930b[_0x2e9d5a(0x2d6)];else try{_0x110b5c=new AhoCorasick(_0x12f5b2),ahoCache[_0x2e9d5a(0x201)](_0x4f0b8f,{'serializedKeywords':_0x44f509,'aho':_0x110b5c});}catch(_0x428e2b){warn(_0x2e9d5a(0x28b)+'Corasick\x20b'+_0x2e9d5a(0x1a9)+'d\x20for\x20'+_0x4f0b8f+':\x20'+(_0x428e2b?.['message']||_0x428e2b)),_0x110b5c=null;}if(_0x110b5c)try{const _0x3183d1=_0x110b5c['search'](_0x32a6e8);for(const _0x343297 of _0x3183d1){const _0x18a240=_0x343297[_0x2e9d5a(0x313)],_0x532a24=_0x343297['index'],_0x34c94f=_0x532a24+_0x18a240[_0x2e9d5a(0x1ee)],_0x295859=_0x532a24===-0x12a*-0x9+-0x305+-0x775||!/\w/[_0x2e9d5a(0x1c0)](_0x32a6e8[_0x532a24-(-0x2358+0xc*-0x1de+0x39c1)]),_0x3613e8=_0x34c94f===_0x32a6e8['length']||!/\w/[_0x2e9d5a(0x1c0)](_0x32a6e8[_0x34c94f]);if(_0x295859&&_0x3613e8)for(const _0x34d48a of _0x4aeefa){const _0x306004=normalizeForMatch(String(_0x34d48a[_0x2e9d5a(0x333)]||''));if(_0x306004===_0x18a240)try{const _0x330803=wholeWordRegexForPhrase(_0x306004);_0x330803['test'](_0x32a6e8)&&(_0x28b749[_0x2e9d5a(0x18b)](_0x34d48a['id']),_0x19f805[_0x2e9d5a(0x18b)](_0x34d48a[_0x2e9d5a(0x333)]));}catch(_0x76dd64){_0x28b749[_0x2e9d5a(0x18b)](_0x34d48a['id']),_0x19f805[_0x2e9d5a(0x18b)](_0x34d48a[_0x2e9d5a(0x333)]);}}else for(const _0x2081c3 of _0x4aeefa){try{const _0x563bea=wholeWordRegexForPhrase(normalizeForMatch(String(_0x2081c3['phrase']||'')));_0x563bea[_0x2e9d5a(0x1c0)](_0x32a6e8)&&(_0x28b749[_0x2e9d5a(0x18b)](_0x2081c3['id']),_0x19f805[_0x2e9d5a(0x18b)](_0x2081c3[_0x2e9d5a(0x333)]));}catch(_0x5690fe){}}}}catch(_0x8e5a5b){warn('[lock]\x20Aho'+'Corasick\x20s'+_0x2e9d5a(0x329)+'ed:\x20'+(_0x8e5a5b?.[_0x2e9d5a(0x21e)]||_0x8e5a5b));for(const _0x447c75 of _0x4aeefa){try{const _0x23a6db=wholeWordRegexForPhrase(normalizeForMatch(String(_0x447c75[_0x2e9d5a(0x333)]||'')));_0x23a6db[_0x2e9d5a(0x1c0)](_0x32a6e8)&&(_0x28b749['add'](_0x447c75['id']),_0x19f805[_0x2e9d5a(0x18b)](_0x447c75['phrase']));}catch(_0x2d45da){}}}else for(const _0x2d442a of _0x4aeefa){try{const _0x51a341=wholeWordRegexForPhrase(normalizeForMatch(String(_0x2d442a['phrase']||'')));_0x51a341[_0x2e9d5a(0x1c0)](_0x32a6e8)&&(_0x28b749[_0x2e9d5a(0x18b)](_0x2d442a['id']),_0x19f805['add'](_0x2d442a[_0x2e9d5a(0x333)]));}catch(_0x174522){}}}if(_0x26edc2[_0x2e9d5a(0x1ee)]>-0x1*0xc01+-0x1254+0x1e55)for(const _0xc3cf2a of _0x26edc2){try{const _0xab9b31=wildcardToRegex(String(_0xc3cf2a[_0x2e9d5a(0x333)]||''));_0xab9b31[_0x2e9d5a(0x1c0)](_0x32a6e8)&&(_0x28b749[_0x2e9d5a(0x18b)](_0xc3cf2a['id']),_0x19f805[_0x2e9d5a(0x18b)](_0xc3cf2a[_0x2e9d5a(0x333)]));}catch(_0x5de5e4){warn(_0x2e9d5a(0x2bf)+'alid\x20wildc'+_0x2e9d5a(0x37d)+'='+_0xc3cf2a['id']+_0x2e9d5a(0x2dd)+_0xc3cf2a[_0x2e9d5a(0x333)]+_0x2e9d5a(0x27d)+(_0x5de5e4?.[_0x2e9d5a(0x21e)]||_0x5de5e4));}}if(_0x53fffe[_0x2e9d5a(0x1ee)]>-0x1*0x247f+-0xf7*-0x5+0x1*0x1fac)for(const _0x5f2c92 of _0x53fffe){try{if(_0x5f2c92[_0x2e9d5a(0x31e)+_0x2e9d5a(0x1c2)]===0x12f+-0x6e1+0x5b2){warn(_0x2e9d5a(0x250)+_0x2e9d5a(0x2e4)+_0x2e9d5a(0x1ad)+_0x2e9d5a(0x199)+_0x5f2c92['id']+'\x20phrase=\x22'+_0x5f2c92[_0x2e9d5a(0x333)]+'\x22');continue;}const _0x163cb9=new RegExp(_0x5f2c92['phrase'],'iu');_0x163cb9[_0x2e9d5a(0x1c0)](_0x32a6e8)&&(_0x28b749[_0x2e9d5a(0x18b)](_0x5f2c92['id']),_0x19f805[_0x2e9d5a(0x18b)](_0x2e9d5a(0x30d)+_0x5f2c92[_0x2e9d5a(0x333)]));}catch(_0xd32ad2){warn('[lock]\x20inv'+_0x2e9d5a(0x2f5)+_0x2e9d5a(0x340)+_0x2e9d5a(0x386)+_0x5f2c92['id']+'\x20phrase=\x22'+_0x5f2c92['phrase']+'\x22:\x20'+(_0xd32ad2?.['message']||_0xd32ad2));try{await db['run'](_0x2e9d5a(0x32c)+_0x2e9d5a(0x33f)+_0x2e9d5a(0x364)+'x\x20=\x200\x20WHER'+_0x2e9d5a(0x381),[_0x5f2c92['id']]);}catch(_0x4f6439){}}}if(_0x28b749[_0x2e9d5a(0x182)]>-0x16e2+-0x4*-0x4b1+0x41e)try{try{const _0x547b31=await getLockNotify(_0x4f0b8f)[_0x2e9d5a(0x2e9)](()=>-0x1*-0xb15+-0x3*-0x89b+-0x24e6);if(_0x547b31)try{const _0x13bba0=await db[_0x2e9d5a(0x2cf)](_0x2e9d5a(0x1d8)+_0x2e9d5a(0x2fd)+_0x2e9d5a(0x349)+_0x2e9d5a(0x1af)+'\x20=\x20\x27target'+_0x2e9d5a(0x2df));let _0x2a2c92=_0x13bba0?.[_0x2e9d5a(0x2d5)]||null;if(!_0x2a2c92){const _0xf77f6a=getBotJid();_0x2a2c92=_0xf77f6a||null;}if(_0x2a2c92){const _0x5aab01=Array[_0x2e9d5a(0x395)](_0x19f805)['slice'](-0x1333+0x1531+0xa*-0x33,0x1e7c+0xe0+0xfab*-0x2)['join'](',\x20'),_0x58e9d4=_0x22036c||String(_0x1ce7d5||'')['split']('@')[-0x15de+-0x1*-0x2294+-0xcb6]||'unknown',_0x36b2af=String(_0xb9fd67||'')[_0x2e9d5a(0x162)](),_0x55469e='[lock]\x20Mat'+_0x2e9d5a(0x1eb)+_0x4f0b8f+_0x2e9d5a(0x328)+_0x58e9d4+_0x2e9d5a(0x1d2)+_0x5aab01+_0x2e9d5a(0x1d6)+_0x36b2af;await sendText(_0x2a2c92,_0x55469e,_0x1ce7d5?[_0x1ce7d5]:[]);}}catch(_0x1dbba4){warn(_0x2e9d5a(0x314)+_0x2e9d5a(0x206)+_0x2e9d5a(0x1ce)+_0x2e9d5a(0x2f9)+':\x20'+(_0x1dbba4?.['message']||_0x1dbba4));}}catch(_0x31d87c){warn('[lock]\x20loc'+'knotify\x20ch'+_0x2e9d5a(0x33c)+':\x20'+(_0x31d87c?.[_0x2e9d5a(0x21e)]||_0x31d87c));}enqueueDeletion(_0x25a14c);for(const _0x51c3ce of _0x28b749){try{await db[_0x2e9d5a(0x37e)]('UPDATE\x20loc'+_0x2e9d5a(0x39b)+_0x2e9d5a(0x19a)+_0x2e9d5a(0x263)+_0x2e9d5a(0x330)+_0x2e9d5a(0x304),[_0x51c3ce]);}catch(_0x3a4aaf){}}}catch(_0x3e022d){warn('[lock]\x20enf'+_0x2e9d5a(0x2d2)+_0x2e9d5a(0x266)+(_0x3e022d?.[_0x2e9d5a(0x21e)]||_0x3e022d));}}}catch(_0x258931){error(_0x258931,'[lock]\x20han'+'dler\x20error'+':\x20'+(_0x258931?.['message']||_0x258931));}}export async function cleanup(){const _0x2fa287=_0xb7f522;shuttingDown=!![];for(const _0x1e4ad9 of processedMessageKeys['values']())try{clearTimeout(_0x1e4ad9);}catch(_0x349049){}processedMessageKeys[_0x2fa287(0x299)](),perChatQueue['clear'](),perChatProcessing[_0x2fa287(0x299)](),activeChats=0x1*-0x13d+-0x1*-0xa0d+-0x8d0,botRef=null,sendApi=null,ahoCache[_0x2fa287(0x299)](),info(_0x2fa287(0x293)+_0x2fa287(0x1b2));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};