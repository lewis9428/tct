const _0x564249=_0x219e;(function(_0x39b3a8,_0x546b6e){const _0x1a533a=_0x219e,_0x2b5ff3=_0x39b3a8();while(!![]){try{const _0x4f1933=-parseInt(_0x1a533a(0x207))/(-0x1bfb+0x5e4+0x2*0xb0c)+-parseInt(_0x1a533a(0x1fa))/(-0x975*0x3+-0x320+0x1f81)+-parseInt(_0x1a533a(0x2ef))/(-0x105f+-0x1283+-0x1*-0x22e5)+-parseInt(_0x1a533a(0x1cd))/(-0x2c8*-0x5+-0x14dd+0x6f9)+-parseInt(_0x1a533a(0x382))/(-0x1352+-0x14aa+0x2801)+parseInt(_0x1a533a(0x328))/(0x241d+0x1ff1*-0x1+-0x2*0x213)*(parseInt(_0x1a533a(0x315))/(-0x557*0x5+-0x172b+-0x35*-0xf1))+parseInt(_0x1a533a(0x257))/(-0x1a34+-0x3*-0x99b+0x1*-0x295);if(_0x4f1933===_0x546b6e)break;else _0x2b5ff3['push'](_0x2b5ff3['shift']());}catch(_0x4abc65){_0x2b5ff3['push'](_0x2b5ff3['shift']());}}}(_0x4f24,0x47d9a+0x129e51+0x3*-0x487ae));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x4c376c from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';function _0x4f24(){const _0x32bfff=['\x20@\x20','(?<![\x5cp{L}','gp\x20alias/j','p{N}_])','SELECT\x20val','UEUE_LIMIT','\x20\x20\x20ON\x20CONF','NFD','PRAGMA\x20tab','\x20(INVALID\x20','notify','s\x20for\x20your','=\x20ON;','1913001SnKPwM','delete','\x20phrase\x20=\x20','next','\x20WHERE\x20typ','\x20\x20\x20chat_ji','id:\x20\x22','dText\x20fail','O\x20locks\x20(c','onical\x20(en',':\x20lock\x20<tr','fig\x20load\x20f','xtMessage','ailed:\x20','id\x20=\x20?\x20AND','\x20(?,\x20?,\x20?,','[lock]\x20mig','\x20\x20\x20\x20\x20phras','.created_b','ckup','O\x20locks;','(chat_jid,','ureSchema\x20','ard\x20for\x20id','\x20created_b','unlock','phrase\x20=\x20?','led:\x20','uild\x20faile','up_','timestamp','gLocks\x20fai','INTEGER\x20DE','dStoredMat','[lock]\x20val','\x20for\x20','invalid_re','listlock','56gohDpg','ck):\x20','SELECT\x20id\x20','hat_jid\x20TE','extendedTe','d,\x20phrase,','_at\x20=\x20?,\x20i','olving\x20con','aho','_regex)\x20VA','cessChatQu','aned\x20up','ed_at,\x20hit','jid)\x20DO\x20UP','lid\x20stored','LT\x20\x27\x27','ust\x20contai','\x0aMatched:\x20','earch\x20fail','606564OfVfOL','toISOStrin','nodes','k_prefs\x20(c','type','led\x20to\x20add','[lock]\x20set','videoMessa','egex','regex\x20colu','e\x20=\x20?,\x20cre','alid\x20store','\x5cp{N}_])','dAndNormal','=\x20excluded','same\x20line.','SELECT\x20id,','O\x20lock_pre','ULT\x200,\x0a\x20\x20\x20','heck\x20/setd','\x20\x20is_valid','hrase,\x20typ','ger2','eteWithRet','ert\x20failed','\x20\x20\x20\x20create','✔️\x20Saved\x20','ids','ttonId','\x20\x20\x20\x20\x20);','changes','e,\x20created','nstance','ify\x20FROM\x20l','sock','[lock]\x20lis','nonical)','buttonsRes','❌\x20Unknown\x20','ration\x20swa','rs\x20besides','ERE\x20chat_j','isInteger','TEXT\x20NOT\x20N','ENT','length','[lock]\x20get',':<alias|ji','M\x20locks\x20WH','d\x20for\x20','AND\x20phrase','\x20WHERE\x20key','ude\x20gp\x20in\x20','our\x20defaul','CREATE\x20TAB','hit_count','d.type,\x0a\x20\x20','LT\x20\x27normal','SELECT\x20not','[lock]\x20leg','SSAGE','mns)','[lock]\x20inv','eck\x20failed','d\x20TEXT\x20NOT','delock','TEGER\x20DEFA','ks_new\x20(\x0a\x20','replace','ount\x20INTEG','chFromFind','o\x20delete\x20l','✔️\x20[lock]\x20l','\x20\x20\x20\x20\x20type\x20','ailed,\x20usi','add','now','Corasick\x20b','name','hrase\x20erro','alid\x20wildc','tatus:\x20loc','clearlocks','off','cluded.not',',2\x20OR\x20unlo','t\x20ON\x20locks','\x20DEFAULT\x20c','SELECT\x20*\x20F','[lock]\x20tab','5141515tMaRZG','\x20\x20\x20\x20','ted_at,\x0a\x20\x20','endsWith','izeExistin','[lock]\x20enf','ed\x20is_vali','eue\x20fail:\x20','s).','resolveNam','\x20\x20\x20\x20\x20hit_c','\x20by\x20@','onnection(','values','\x20\x20\x20\x20\x20);\x0a\x20\x20','\x20KEY,\x20noti','sForChat\x20e','[lock]\x20ens','lid\x20regex\x20','\x20(type=','\x20set\x20for\x20','CONFLICT\x20i','ROM\x20locks','run','\x20id\x20=\x20?','\x27invalid_r','\x20NULL,\x0a\x20\x20\x20','|jid|all>\x0a','E\x20locks\x20(\x0a','ed:\x20','es\x20lock\x20no','findings','[lock]\x20unl','creator',')\x20VALUES\x20(','function','\x20\x20\x20\x20\x20\x20\x20cre','keyword','GLOBAL_CON','\x20=\x20exclude','WARNING_TT','=\x20\x27regex\x27\x20','hat_jid,\x20p','luded.crea','test','[lock]\x20cre','provided:\x20','REATE\x20TABL',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','remoteJid','ires\x20bot\x20i','[lock]\x20del','dellock','⚠️\x20{user},\x20','}_]*','hrase)\x0a\x20\x20\x20','\x20phrase,\x20t','nection(s)','\x22:\x20','led\x20to\x20sen','\x20table\x20ren','[lock]\x20sen','join','dWarning:\x20','d\x20error:\x20','gex\x20=\x20?\x20WH','FROM\x20locks','EX\x20IF\x20NOT\x20','t\x20resolve\x20','get','E\x20locks\x20RE','d,\x20phrase)','regex','amed\x20to\x20ba','entries','gger2>\x20gp:','isArray','\x20hit_count','E\x20chat_jid','ch\x20in\x20','dApi\x20not\x20a','reated_by\x20','knotify\x20ch','\x20?,\x20?)','ration\x20com','word','acy\x20locks\x20','This\x20toggl','_valid_reg','E\x20locks\x20AD','selectedBu','tialized\x20(','STS\x20idx_lo',':\x20listlock','\x20\x20\x20\x20\x20\x20type','\x20table\x20(ca','keys','egex\x27','orcement\x20f','lock\x20bad1,','efault\x20con','cks\x20table','trim','\x20default\x20c','ERE\x20id\x20=\x20?','rforming\x20s','alize\x20requ','_count,\x20is','?,\x20created','❌\x20Usage\x20(g','❌\x20PM:\x20one-','\x20locks\x20for','LT\x201\x0a\x20\x20\x20\x20\x20','unlocklock','LICT(chat_','includes','sured\x20indi','igger1,tri','w\x20(chat_ji','as\x20fallbac',':\x20unlockal','✔️\x20Locknoti','\x20failed\x20fo','shift','CRITICS','normalizeT','gger1,trig','locknotify','FAULT\x201','REMOVE_DIA','✔️\x20Deleted\x20','{user}','id-or-phra','E\x20id\x20=\x20?','normal','lete_prefs','toLowerCas','3656388cBzlXV','[lock]\x20Aho','AND\x20name=?','prepare','exec','INSERT\x20INT','otify\x20=\x20ex','finalize','EXISTS\x20idx','ite_master','ENT,\x0a\x20\x20\x20\x20\x20','e=\x27table\x27\x20','max','[lock]\x20han','ks\x20table\x20a','\x20gp:<alias','fy\x20','ry:\x20sendAp','cted\x20->\x20pe','it_count,\x20','❌\x20Could\x20no','map','ULL','d_at\x20=\x20exc','[lock]\x20loc','NAME\x20TO\x20','unlockall','[lock]\x20isa','leExists\x20e','ex)\x20VALUES','PRAGMA\x20for','gex\x20INTEGE','ify;','[lock]\x20ini','\x20=\x20?\x20ORDER','EXISTS\x20loc','dWarning\x20f','push','fs\x20(chat_j','pop','\x20target(s)',',\x0a\x20\x20','Wildcard\x20m','fromMe','participan','472010XXIuLT','\x20your\x20defa','oaded\x20','ER\x20DEFAULT','clear','cks_unique','QUE\x20INDEX\x20','ue\x20FROM\x20de','that\x20word\x20','ed\x20(fallba','d\x20regex\x20fo','led\x20for\x20','set','16301PeeuLB','phrase);','\x20locks\x20loa',':\x20locknoti','sendMessag','ype,\x20creat',',\x20valid=','LT\x201,\x0a\x20\x20\x20\x20','lumn\x20to\x20lo','IMARY\x20KEY\x20','[lock]\x20Mat','[lock]\x20fai','your\x20defau','filter','BATCH_SIZE','locks','lid_regex;','ded\x20for\x20re','roup-only)','AULT\x20\x27\x27,\x0a\x20','chatJid','gp:<alias|','available','|jid|all>','O\x20locks_ne','\x20Example:\x20','\x20type\x20=\x20\x27r','ALTER\x20TABL','lt\x20connect','ck\x20phrase1','slice','[lock]\x20rea','?,\x20?)\x0a\x20\x20\x20\x20','IF\x20NOT\x20EXI','from','\x20SET\x0a\x20\x20\x20\x20\x20','eteLockByI','\x20failed:\x20',':\x20unlock\x20<','\x20BY\x20id','lready\x20can','PER_CHAT_Q','\x20DO\x20UPDATE','\x200,\x0a\x20\x20\x20\x20\x20\x20','chat_jid,\x20','x\x20=\x201\x20WHER','CREATE\x20UNI','alidation\x20','(chat_jid)','=\x20OFF;','reated_at,','tal','TableColum','for\x20','ks\x20SET\x20is_','ated_at\x20IN','caption','x\x20=\x200\x20WHER','search','is\x20not\x20all','created_by','NORMALIZE_','gex\x20=\x20excl','NFKC','To\x20query\x20s','s_valid_re','\x20\x20\x20\x20\x20\x20\x20id\x20','AUTOINCREM','?,\x20?,\x200,\x20?','is_valid_r','ockall\x20fai','HERE\x20type\x20','message','text','regex:','catch','SEND_WARNI','fy\x20INTEGER','has','connection','21179696QwQEln','mentions','LockNotify','_locks_cha','fy\x20message','dRegexes\x20e','imageMessa','y\x20TEXT\x20DEF','OR\x20type\x20=\x20','valid_rege','table\x20dete','phrase','ine\x20usage:','_jid\x27','❌\x20Failed\x20t','r:\x20','chat','conversati','ed\x20lock\x20\x22','ue(s).','.\x20Please\x20c','output','tification','[lock]\x20fin','y,\x0a\x20\x20\x20\x20\x20\x20\x20','LOCKS','ult\x20connec','rror:\x20','D\x20COLUMN\x20i','eteAllLock','\x20phrase=\x22','vailable','fy\x20on|off\x0a','\x20);','y\x20[on|off]','[\x5cp{L}\x5cp{N','Corasick\x20s','@g.us','se,comma-s',',\x20is_valid','\x20gp:alias','Lock\x20faile','\x20\x20\x20VALUES\x20','INTEGER\x20PR','ble','startsWith','ated_by\x20=\x20','[lock]\x20add','L_MS','\x20DEFAULT\x200','2.3.2','d|all>','plete;\x20old','[lock]\x20res','\x20lock(s)\x20f',',phrase2','BATCH_DELA','\x20WHERE\x20cha','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20ON\x20locks(','gex','d\x20locknoti','created_at','lock.initi','dmin\x20check','id\x20=\x20?','EGER\x20DEFAU','egex\x27\x20AND\x20','tialize\x20fa','ated_by,\x20c','TEXT\x20DEFAU','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','fail','idateStore','ex)\x0a\x20\x20\x20\x20\x20\x20','DEFAULT_EN','_jid\x20=\x20?',',\x20?,\x20?,\x20?,','jid','eue\x20item\x20e','eign_keys\x20','ed_by,\x20cre','fatal','ack\x20failed','ut\x20UNIQUE\x20','ABLED','LE\x20IF\x20NOT\x20','e\x20TEXT\x20NOT','_by,\x20creat','LUES\x20(?,\x20?','CURRENCY','ponseMessa','\x20lock(s).','normalize','\x20=\x20\x27target','split','string','line\x20usage','UPDATE\x20loc','nsert\x20fail','\x201\x20WHERE\x20i','chat_jid','s|jid|all>','CREATE\x20IND','ry\x20failed:','key',':\x20lock\x20tri','ration\x20ins','\x20locknotif','(?,\x20?,\x20?,\x20','delall','sendApi\x20un','\x20=\x20?','ks\x20SET\x20hit','❌\x20PM:\x20incl','\x22\x20@\x20','Lock\x20fallb','OM\x20locks\x20W','dler\x20error','oUserJid','min','getUniqueJ','wildcard','_regex\x20INT','afe\x20migrat','Y_MS','[lock]\x20ON\x20','build','WARNING_ME','value','_count\x20=\x20h','\x20regex\x20id=','ated\x20locks','XT\x20PRIMARY','lock','(?![\x5cp{L}\x5c','DELETE\x20FRO','[lock]\x20pro','all'];_0x4f24=function(){return _0x32bfff;};return _0x4f24();}export const name='lock';export const version=_0x564249(0x289);export const priority=0x935+0x905*-0x2+-0x94d*-0x1;export const configKeys=[_0x564249(0x270)];export const commands=['listlock',_0x564249(0x308),_0x564249(0x1e7),_0x564249(0x3b6),_0x564249(0x369),'unlocklock','delall',_0x564249(0x37a),'locknotify'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x564249(0x3b7)+_0x564249(0x202)+_0x564249(0x242)+'owed.','WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x5095d2){const _0x23cf12=_0x564249;if(!_0x5095d2)return[];const _0x24e63a=new Set(),_0x515d1f=[];for(const _0x14490d of _0x5095d2){const _0x1e9b56=_0x14490d===undefined||_0x14490d===null?'':String(_0x14490d)[_0x23cf12(0x3e8)]();if(!_0x1e9b56)continue;!_0x24e63a[_0x23cf12(0x255)](_0x1e9b56)&&(_0x24e63a[_0x23cf12(0x373)](_0x1e9b56),_0x515d1f[_0x23cf12(0x1f2)](_0x1e9b56));}return _0x515d1f;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x55e+-0x1a2a+0x1f88,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(0x91*-0x5+0x1*0x17c8+-0x1*0x14b7)*(0x1199+0x1*-0x1cc3+0x506*0x3);function markProcessed(_0xeee1d2){const _0x1a8bbb=_0x564249;if(!_0xeee1d2)return;if(processedMessageKeys[_0x1a8bbb(0x255)](_0xeee1d2))try{clearTimeout(processedMessageKeys[_0x1a8bbb(0x3c7)](_0xeee1d2));}catch(_0x25bc76){}const _0x4eb00a=setTimeout(()=>processedMessageKeys['delete'](_0xeee1d2),DEDUPE_TTL_MS);processedMessageKeys[_0x1a8bbb(0x206)](_0xeee1d2,_0x4eb00a);}function isProcessed(_0x2b242b){const _0xb0cddc=_0x564249;return _0x2b242b&&processedMessageKeys[_0xb0cddc(0x255)](_0x2b242b);}const sleep=_0x304f5b=>new Promise(_0x37ac8e=>setTimeout(_0x37ac8e,_0x304f5b));function nowSec(){const _0x2deaf0=_0x564249;return Math['floor'](Date[_0x2deaf0(0x374)]()/(-0x1*0x1bf6+-0x1481*-0x1+0x1*0xb5d));}function escapeRegex(_0x562d77){const _0x5ae1ca=_0x564249;return String(_0x562d77||'')[_0x5ae1ca(0x36c)](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}function normalizeForMatch(_0x3037f3){const _0x5dc6f8=_0x564249;let _0xf2f05d=String(_0x3037f3||'');try{_0xf2f05d=_0xf2f05d[_0x5dc6f8(0x2b4)](_0x5dc6f8(0x246));}catch(_0x6ff131){}if(CFG[_0x5dc6f8(0x244)+_0x5dc6f8(0x1c5)+_0x5dc6f8(0x3fe)])try{_0xf2f05d=_0xf2f05d['normalize'](_0x5dc6f8(0x2e9))['replace'](/\p{M}/gu,'')[_0x5dc6f8(0x2b4)](_0x5dc6f8(0x246));}catch(_0x130eae){}return _0xf2f05d[_0x5dc6f8(0x1cc)+'e']();}class AhoCorasick{constructor(_0x35c958=[]){const _0xf62bf5=_0x564249;this[_0xf62bf5(0x32a)]=[{'next':{},'fail':0x0,'output':[]}];if(_0x35c958&&_0x35c958[_0xf62bf5(0x355)])this[_0xf62bf5(0x2d6)](_0x35c958);}[_0x564249(0x2d6)](_0x5b6ef4){const _0x18c9d5=_0x564249;this[_0x18c9d5(0x32a)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x1fa5a0 of _0x5b6ef4){let _0x44281f=-0xf2a+0x1d57+-0x13*0xbf;for(const _0x392411 of _0x1fa5a0){const _0x395ed4=_0x392411;!this[_0x18c9d5(0x32a)][_0x44281f][_0x18c9d5(0x2f2)][_0x395ed4]&&(this[_0x18c9d5(0x32a)][_0x44281f][_0x18c9d5(0x2f2)][_0x395ed4]=this['nodes'][_0x18c9d5(0x355)],this['nodes']['push']({'next':{},'fail':0x0,'output':[]})),_0x44281f=this['nodes'][_0x44281f][_0x18c9d5(0x2f2)][_0x395ed4];}this['nodes'][_0x44281f][_0x18c9d5(0x26c)]['push'](_0x1fa5a0);}const _0x30908e=[];for(const _0x497ad2 in this[_0x18c9d5(0x32a)][-0x1cbd+0x1bfa+0x3*0x41][_0x18c9d5(0x2f2)]){const _0x22e562=this[_0x18c9d5(0x32a)][0x69b+0x1*-0x1997+-0x36*-0x5a]['next'][_0x497ad2];this[_0x18c9d5(0x32a)][_0x22e562][_0x18c9d5(0x29f)]=-0x120d+-0x29c+0x29*0x81,_0x30908e[_0x18c9d5(0x1f2)](_0x22e562);}while(_0x30908e[_0x18c9d5(0x355)]){const _0x17a6ff=_0x30908e[_0x18c9d5(0x3fd)]();for(const _0xe1734 in this[_0x18c9d5(0x32a)][_0x17a6ff][_0x18c9d5(0x2f2)]){const _0x525359=this[_0x18c9d5(0x32a)][_0x17a6ff][_0x18c9d5(0x2f2)][_0xe1734];let _0x3a562b=this[_0x18c9d5(0x32a)][_0x17a6ff][_0x18c9d5(0x29f)];while(_0x3a562b&&!this[_0x18c9d5(0x32a)][_0x3a562b]['next'][_0xe1734])_0x3a562b=this[_0x18c9d5(0x32a)][_0x3a562b][_0x18c9d5(0x29f)];if(this[_0x18c9d5(0x32a)][_0x3a562b][_0x18c9d5(0x2f2)][_0xe1734])this['nodes'][_0x525359][_0x18c9d5(0x29f)]=this[_0x18c9d5(0x32a)][_0x3a562b]['next'][_0xe1734];else this[_0x18c9d5(0x32a)][_0x525359]['fail']=0x1*0x134c+-0x2*0x10b5+0xe1e;this[_0x18c9d5(0x32a)][_0x525359][_0x18c9d5(0x26c)][_0x18c9d5(0x1f2)](...this[_0x18c9d5(0x32a)][this['nodes'][_0x525359][_0x18c9d5(0x29f)]][_0x18c9d5(0x26c)]),_0x30908e[_0x18c9d5(0x1f2)](_0x525359);}}}[_0x564249(0x241)](_0x15b848){const _0x138953=_0x564249,_0x3c5288=[];let _0x1faa48=0x131d*-0x1+0x49*-0x6b+0x31a0;for(let _0x17769c=-0x2510+-0x257b+-0x4a8b*-0x1;_0x17769c<_0x15b848[_0x138953(0x355)];_0x17769c++){const _0x141cae=_0x15b848[_0x17769c];while(_0x1faa48&&!this[_0x138953(0x32a)][_0x1faa48]['next'][_0x141cae])_0x1faa48=this[_0x138953(0x32a)][_0x1faa48]['fail'];if(this['nodes'][_0x1faa48][_0x138953(0x2f2)][_0x141cae])_0x1faa48=this['nodes'][_0x1faa48][_0x138953(0x2f2)][_0x141cae];else _0x1faa48=0x67*0x10+0x1e8b+0x24fb*-0x1;if(this['nodes'][_0x1faa48][_0x138953(0x26c)][_0x138953(0x355)])for(const _0x680794 of this[_0x138953(0x32a)][_0x1faa48][_0x138953(0x26c)]){_0x3c5288['push']({'keyword':_0x680794,'index':_0x17769c-_0x680794[_0x138953(0x355)]+(-0x3f5+0x3*-0x2c1+0xc39)});}}return _0x3c5288;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x4652c1){const _0xaaf575=_0x564249,_0x28f362=String(_0x4652c1||'')[_0xaaf575(0x3e8)](),_0x43402c=escapeRegex(_0x28f362);try{const _0x49c610=_0xaaf575(0x2e3)+_0xaaf575(0x334)+_0x43402c+(_0xaaf575(0x2de)+'p{N}_])');return new RegExp(_0x49c610,'iu');}catch(_0x2aa983){try{return new RegExp('\x5cb'+_0x43402c+'\x5cb','i');}catch(_0xe9a45b){return new RegExp(_0x43402c,'i');}}}function wildcardToRegex(_0x48288a){const _0x44fe97=_0x564249,_0x2b3a66=String(_0x48288a||'')[_0x44fe97(0x3e8)](),_0x5a2ef9=_0x2b3a66[_0x44fe97(0x36c)](/\*/g,'')['length']>0x1a70+-0x1567*-0x1+-0x2fd7;if(!_0x5a2ef9)throw new Error(_0x44fe97(0x1f7)+_0x44fe97(0x325)+'n\x20characte'+_0x44fe97(0x350)+'\x20*');const _0x9563a9=_0x2b3a66['split']('*')[_0x44fe97(0x1e2)](_0x367826=>escapeRegex(_0x367826)),_0x16ebe9=_0x9563a9[_0x44fe97(0x3c0)](_0x44fe97(0x27a)+_0x44fe97(0x3b8));try{const _0x5e5069=_0x44fe97(0x2e3)+'\x5cp{N}_])'+_0x16ebe9+('(?![\x5cp{L}\x5c'+_0x44fe97(0x2e5));return new RegExp(_0x5e5069,'iu');}catch(_0x221738){const _0x29d684=_0x9563a9[_0x44fe97(0x3c0)]('.*');try{return new RegExp(''+_0x29d684,'i');}catch(_0x1eac8b){return new RegExp(_0x9563a9['join'](''),'i');}}}function setupSendApi(){const _0x25a1e9=_0x564249;if(!botRef)return;if(typeof botRef[_0x25a1e9(0x20b)+'e']===_0x25a1e9(0x3a5))sendApi=async(_0x40ad1f,_0x5f53d4)=>await botRef['sendMessag'+'e'](_0x40ad1f,_0x5f53d4);else botRef[_0x25a1e9(0x34a)]&&typeof botRef[_0x25a1e9(0x34a)][_0x25a1e9(0x20b)+'e']===_0x25a1e9(0x3a5)?sendApi=async(_0x33d74b,_0x5cb80d)=>await botRef[_0x25a1e9(0x34a)][_0x25a1e9(0x20b)+'e'](_0x33d74b,_0x5cb80d):sendApi=null;}async function sendText(_0x1bd051,_0x59519e,_0x1efc9f=[]){const _0x4df07b=_0x564249;if(!_0x59519e||!_0x1bd051)return;const _0x4bfcdd={'text':String(_0x59519e)};if(Array['isArray'](_0x1efc9f)&&_0x1efc9f[_0x4df07b(0x355)])_0x4bfcdd[_0x4df07b(0x258)]=_0x1efc9f;try{if(!sendApi){warn('[lock]\x20sen'+_0x4df07b(0x3d2)+_0x4df07b(0x276));return;}await sendApi(_0x1bd051,_0x4bfcdd);}catch(_0x5e459c){warn(_0x4df07b(0x3bf)+_0x4df07b(0x2f6)+'ed\x20to\x20'+_0x1bd051+':\x20'+(_0x5e459c?.[_0x4df07b(0x24f)]||_0x5e459c));}}async function tableExists(_0x56c84d){const _0x18d310=_0x564249;try{const _0xe22c1d=await db[_0x18d310(0x3c7)]('SELECT\x20nam'+'e\x20FROM\x20sql'+_0x18d310(0x1d6)+_0x18d310(0x2f3)+_0x18d310(0x1d8)+_0x18d310(0x1cf),[_0x56c84d]);return!!_0xe22c1d;}catch(_0x138be0){return warn(_0x18d310(0x381)+_0x18d310(0x1e9)+_0x18d310(0x272)+(_0x138be0?.['message']||_0x138be0)),![];}}async function getTableColumns(_0x3d675e){const _0x1b89b5=_0x564249;try{const _0x3d4cf1=await db['all'](_0x1b89b5(0x2ea)+'le_info('+_0x3d675e+')');return(_0x3d4cf1||[])['map'](_0x5eb958=>_0x5eb958[_0x1b89b5(0x376)]);}catch(_0x3913c3){return warn(_0x1b89b5(0x356)+_0x1b89b5(0x23b)+'ns\x20error\x20f'+'or\x20'+_0x3d675e+':\x20'+(_0x3913c3?.[_0x1b89b5(0x24f)]||_0x3913c3)),[];}}async function readAndNormalizeExistingLocks(){const _0x30170e=_0x564249;try{const _0x13fe69=await db[_0x30170e(0x2e1)](_0x30170e(0x380)+_0x30170e(0x398)),_0x42b6e1=new Map();for(const _0xe7903 of _0x13fe69||[]){const _0x21183d=[_0x30170e(0x2bc),'chatid','chat_id',_0x30170e(0x2a5),_0x30170e(0x267)],_0x4f1279=['phrase',_0x30170e(0x3d7),'trigger',_0x30170e(0x3a7),'value','body',_0x30170e(0x24f)];let _0x5f3b33=null;for(const _0x591539 of _0x21183d)if(_0x591539 in _0xe7903&&_0xe7903[_0x591539]){_0x5f3b33=String(_0xe7903[_0x591539]);break;}let _0x2ab9be=null;for(const _0x19bad6 of _0x4f1279)if(_0x19bad6 in _0xe7903&&_0xe7903[_0x19bad6]){_0x2ab9be=String(_0xe7903[_0x19bad6]);break;}if(!_0x5f3b33||!_0x2ab9be)for(const _0x57a90a of Object[_0x30170e(0x3e2)](_0xe7903)){const _0x1e9c40=_0xe7903[_0x57a90a];if(!_0x5f3b33&&typeof _0x1e9c40===_0x30170e(0x2b7)&&_0x1e9c40[_0x30170e(0x3f5)]('@'))_0x5f3b33=_0x1e9c40;if(!_0x2ab9be&&typeof _0x1e9c40===_0x30170e(0x2b7)&&_0x1e9c40['length']<-0x4f0*0x1+-0x13e0*0x1+-0x2*-0xd30&&!_0x1e9c40['includes']('@'))_0x2ab9be=_0x1e9c40;}if(!_0x5f3b33||!_0x2ab9be)continue;let _0xc0b254=_0x2ab9be['trim'](),_0x170a9c=_0x30170e(0x1ca);if(_0xc0b254[_0x30170e(0x1cc)+'e']()[_0x30170e(0x284)](_0x30170e(0x251)))_0x170a9c=_0x30170e(0x3ca),_0xc0b254=_0xc0b254[_0x30170e(0x225)](0x1037+0xead+-0x1ede)[_0x30170e(0x3e8)]();else{if(_0xc0b254[_0x30170e(0x3f5)]('*'))_0x170a9c='wildcard';else _0x170a9c=_0x30170e(0x1ca);}const _0xbef771=_0xe7903[_0x30170e(0x243)]||_0xe7903[_0x30170e(0x3a3)]||_0xe7903['author']||_0xe7903['user']||'',_0x1f3407=Number(_0xe7903[_0x30170e(0x295)]||_0xe7903['ts']||_0xe7903[_0x30170e(0x30d)]||0x7*-0xb+-0x162f+0x167c)||nowSec(),_0x406bff=_0x5f3b33+'||'+_0xc0b254;if(!_0x42b6e1[_0x30170e(0x255)](_0x406bff))_0x42b6e1[_0x30170e(0x206)](_0x406bff,{'chat_jid':_0x5f3b33,'phrase':_0xc0b254,'type':_0x170a9c,'created_by':_0xbef771,'created_at':_0x1f3407,'hit_count':Number(_0xe7903['hit_count']||0x1a2c+0x954+-0x8*0x470)});else{const _0x1d251a=_0x42b6e1[_0x30170e(0x3c7)](_0x406bff);_0x1d251a['created_at']=Math[_0x30170e(0x2cf)](_0x1d251a[_0x30170e(0x295)]||_0x1f3407,_0x1f3407),_0x1d251a[_0x30170e(0x35f)]=(_0x1d251a[_0x30170e(0x35f)]||-0xa*-0x238+0x1db*-0xb+-0x41*0x7)+(Number(_0xe7903[_0x30170e(0x35f)])||-0x1*-0x98f+0x1171+-0x8*0x360);}}return Array[_0x30170e(0x229)](_0x42b6e1[_0x30170e(0x38f)]());}catch(_0x47dde4){return warn(_0x30170e(0x226)+_0x30170e(0x335)+_0x30170e(0x386)+_0x30170e(0x30e)+_0x30170e(0x30a)+(_0x47dde4?.[_0x30170e(0x24f)]||_0x47dde4)),[];}}async function ensureSchema(){const _0x310795=_0x564249,_0x46c6f7={'id':_0x310795(0x282)+_0x310795(0x210)+_0x310795(0x24a)+_0x310795(0x354),'chat_jid':_0x310795(0x353)+_0x310795(0x1e3),'phrase':_0x310795(0x353)+_0x310795(0x1e3),'type':_0x310795(0x29d)+_0x310795(0x361)+'\x27','created_by':_0x310795(0x29d)+_0x310795(0x324),'created_at':'INTEGER\x20DE'+'FAULT\x200','hit_count':_0x310795(0x30f)+'FAULT\x200','is_valid_regex':_0x310795(0x30f)+_0x310795(0x402)};try{const _0x25ec9b=await tableExists(_0x310795(0x216));if(!_0x25ec9b){const _0x2844fe=Object[_0x310795(0x3cc)](_0x46c6f7)[_0x310795(0x1e2)](([_0x9136c8,_0x2bac77])=>_0x9136c8+'\x20'+_0x2bac77)[_0x310795(0x3c0)](_0x310795(0x1f6));await db[_0x310795(0x1d1)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+_0x310795(0x3b1)+_0x310795(0x39e)+_0x310795(0x291)+_0x2844fe+(_0x310795(0x3b2)+'\x20\x20UNIQUE(c'+'hat_jid,\x20p'+_0x310795(0x3b9)+_0x310795(0x390)+_0x310795(0x383)));try{await db['exec']('CREATE\x20IND'+_0x310795(0x3c5)+_0x310795(0x1d5)+_0x310795(0x25a)+_0x310795(0x37e)+_0x310795(0x237)+';');}catch(_0x1de6c6){}try{await db['exec']('CREATE\x20UNI'+_0x310795(0x200)+'IF\x20NOT\x20EXI'+_0x310795(0x3de)+_0x310795(0x1ff)+_0x310795(0x292)+_0x310795(0x233)+_0x310795(0x208));}catch(_0x4b43dc){}info(_0x310795(0x3af)+_0x310795(0x2db)+_0x310795(0x3e1)+_0x310795(0x34c));try{await db[_0x310795(0x1d1)](_0x310795(0x35e)+_0x310795(0x2ad)+_0x310795(0x1f0)+_0x310795(0x32b)+_0x310795(0x318)+_0x310795(0x2dc)+_0x310795(0x391)+'fy\x20INTEGER'+'\x20DEFAULT\x200'+');');}catch(_0x5e4ce6){}return;}const _0x59b2e9=await getTableColumns('locks'),_0xd5ffdb=_0x59b2e9[_0x310795(0x3f5)](_0x310795(0x2bc)),_0x3d74c1=_0x59b2e9['includes'](_0x310795(0x262)),_0x29ed5d=_0x59b2e9['includes']('type');if(_0xd5ffdb&&_0x3d74c1&&_0x29ed5d){if(!_0x59b2e9[_0x310795(0x3f5)](_0x310795(0x24c)+'egex'))try{await db[_0x310795(0x1d1)](_0x310795(0x222)+_0x310795(0x3db)+_0x310795(0x273)+_0x310795(0x248)+_0x310795(0x1ec)+'R\x20DEFAULT\x20'+'1;'),info(_0x310795(0x286)+_0x310795(0x388)+'d_regex\x20co'+_0x310795(0x20f)+_0x310795(0x3e7));}catch(_0x3d3708){warn(_0x310795(0x212)+_0x310795(0x32d)+'\x20is_valid_'+_0x310795(0x331)+'mn:\x20'+(_0x3d3708?.['message']||_0x3d3708));}try{await db[_0x310795(0x1d1)](_0x310795(0x2be)+_0x310795(0x3c5)+_0x310795(0x1d5)+'_locks_cha'+'t\x20ON\x20locks'+_0x310795(0x237)+';');}catch(_0x21af03){}try{await db['exec'](_0x310795(0x235)+_0x310795(0x200)+_0x310795(0x228)+'STS\x20idx_lo'+_0x310795(0x1ff)+_0x310795(0x292)+_0x310795(0x233)+'phrase);');}catch(_0x3128c4){}try{await db[_0x310795(0x1d1)]('CREATE\x20TAB'+_0x310795(0x2ad)+_0x310795(0x1f0)+_0x310795(0x32b)+_0x310795(0x318)+_0x310795(0x2dc)+_0x310795(0x391)+'fy\x20INTEGER'+_0x310795(0x288)+');');}catch(_0x33dec1){}info(_0x310795(0x1e5)+_0x310795(0x1db)+_0x310795(0x22f)+_0x310795(0x2f8)+_0x310795(0x3f6)+'ces\x20&\x20colu'+_0x310795(0x365));return;}info(_0x310795(0x363)+_0x310795(0x3d8)+_0x310795(0x261)+_0x310795(0x1df)+_0x310795(0x3eb)+_0x310795(0x2d3)+'ion');const _0x10514d=await readAndNormalizeExistingLocks();await db[_0x310795(0x1d1)](_0x310795(0x1eb)+_0x310795(0x2a7)+_0x310795(0x238));try{await db[_0x310795(0x1d1)](_0x310795(0x35e)+_0x310795(0x2ad)+_0x310795(0x1f0)+_0x310795(0x36b)+_0x310795(0x249)+_0x310795(0x282)+_0x310795(0x210)+_0x310795(0x24a)+_0x310795(0x1d7)+_0x310795(0x2f4)+_0x310795(0x368)+'\x20NULL,\x0a\x20\x20\x20'+_0x310795(0x300)+_0x310795(0x2ae)+_0x310795(0x39c)+_0x310795(0x371)+_0x310795(0x29d)+_0x310795(0x361)+_0x310795(0x29e)+_0x310795(0x307)+_0x310795(0x25e)+_0x310795(0x21a)+_0x310795(0x3a6)+'ated_at\x20IN'+'TEGER\x20DEFA'+_0x310795(0x33a)+_0x310795(0x38c)+_0x310795(0x36d)+_0x310795(0x1fd)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x310795(0x33c)+_0x310795(0x2d2)+_0x310795(0x299)+_0x310795(0x20e)+'\x20\x20\x20\x20UNIQUE'+_0x310795(0x304)+'\x20phrase)\x0a\x20'+_0x310795(0x345));}catch(_0x1984d0){await db[_0x310795(0x1d1)](_0x310795(0x35e)+_0x310795(0x2ad)+_0x310795(0x1f0)+_0x310795(0x36b)+_0x310795(0x249)+'INTEGER\x20PR'+_0x310795(0x210)+'AUTOINCREM'+_0x310795(0x1d7)+_0x310795(0x2f4)+_0x310795(0x368)+_0x310795(0x39c)+'\x20\x20\x20\x20\x20phras'+'e\x20TEXT\x20NOT'+_0x310795(0x39c)+_0x310795(0x371)+_0x310795(0x29d)+_0x310795(0x361)+_0x310795(0x29e)+_0x310795(0x307)+'y\x20TEXT\x20DEF'+'AULT\x20\x27\x27,\x0a\x20'+_0x310795(0x3a6)+_0x310795(0x23e)+_0x310795(0x36a)+_0x310795(0x33a)+_0x310795(0x38c)+'ount\x20INTEG'+_0x310795(0x1fd)+_0x310795(0x232)+_0x310795(0x33c)+_0x310795(0x2d2)+_0x310795(0x299)+_0x310795(0x3f2)+_0x310795(0x278)),warn('[lock]\x20cre'+'ated\x20locks'+'_new\x20witho'+_0x310795(0x2ab)+_0x310795(0x3f9)+'k');}const _0x44efbc=await db[_0x310795(0x1d0)](_0x310795(0x1d2)+_0x310795(0x21f)+_0x310795(0x3f8)+_0x310795(0x31a)+'\x20type,\x20cre'+_0x310795(0x29c)+_0x310795(0x239)+_0x310795(0x3cf)+_0x310795(0x27e)+_0x310795(0x31e)+_0x310795(0x2b0)+_0x310795(0x2a4)+_0x310795(0x3d5));try{for(const _0x168f28 of _0x10514d){try{let _0x22e729=-0xf90+0x4cb+0xac6;if(_0x168f28['type']===_0x310795(0x3ca))try{new RegExp(_0x168f28[_0x310795(0x262)]);}catch(_0x4da20e){_0x22e729=-0x1*0x16f7+0xc2a+0xacd;}await _0x44efbc['run'](_0x168f28[_0x310795(0x2bc)],_0x168f28['phrase'],_0x168f28[_0x310795(0x32c)]||_0x310795(0x1ca),_0x168f28[_0x310795(0x243)]||'',Number(_0x168f28[_0x310795(0x295)]||nowSec()),Number(_0x168f28[_0x310795(0x35f)]||0xc5+-0x1fba+0x1ef5),_0x22e729);}catch(_0x9c88d1){warn(_0x310795(0x2ff)+_0x310795(0x2c2)+_0x310795(0x340)+_0x310795(0x312)+_0x168f28[_0x310795(0x2bc)]+'@'+_0x168f28['phrase']+':\x20'+(_0x9c88d1?.['message']||_0x9c88d1));}}}finally{try{await _0x44efbc[_0x310795(0x1d4)]();}catch(_0x2e42f7){}}try{const _0x4078ff='locks_back'+_0x310795(0x30c)+Math['floor'](Date[_0x310795(0x374)]()/(0x34*0x55+0x47*-0x65+-0x1*-0xea7));await db[_0x310795(0x1d1)]('ALTER\x20TABL'+_0x310795(0x3c8)+_0x310795(0x1e6)+_0x4078ff+';'),await db[_0x310795(0x1d1)]('ALTER\x20TABL'+'E\x20locks_ne'+'w\x20RENAME\x20T'+_0x310795(0x303));try{await db['exec'](_0x310795(0x2be)+_0x310795(0x3c5)+'EXISTS\x20idx'+_0x310795(0x25a)+_0x310795(0x37e)+_0x310795(0x237)+';');}catch(_0x39ec67){}try{await db[_0x310795(0x1d1)](_0x310795(0x235)+'QUE\x20INDEX\x20'+_0x310795(0x228)+_0x310795(0x3de)+'cks_unique'+_0x310795(0x292)+_0x310795(0x233)+_0x310795(0x208));}catch(_0x291bf9){}try{await db[_0x310795(0x1d1)](_0x310795(0x35e)+_0x310795(0x2ad)+_0x310795(0x1f0)+_0x310795(0x32b)+_0x310795(0x318)+_0x310795(0x2dc)+'\x20KEY,\x20noti'+_0x310795(0x254)+_0x310795(0x288)+');');}catch(_0x5a811b){}info('[lock]\x20mig'+_0x310795(0x3d6)+_0x310795(0x28b)+_0x310795(0x3be)+_0x310795(0x3cb)+_0x310795(0x302));}catch(_0xafb30a){warn(_0x310795(0x2ff)+_0x310795(0x34f)+'p\x20failed:\x20'+(_0xafb30a?.[_0x310795(0x24f)]||_0xafb30a));throw _0xafb30a;}finally{await db['exec']('PRAGMA\x20for'+_0x310795(0x2a7)+_0x310795(0x2ee));}return;}catch(_0xfbb13a){error(_0xfbb13a,_0x310795(0x393)+_0x310795(0x305)+_0x310795(0x2a9));throw _0xfbb13a;}}async function addLock(_0x21419d,_0x574f1e,_0x258ba0){const _0x5592d3=_0x564249;try{if(!_0x21419d||!_0x574f1e)return![];let _0x4c1d08=String(_0x574f1e)[_0x5592d3(0x3e8)]();if(!_0x4c1d08)return![];let _0x248d0e=_0x5592d3(0x1ca),_0xd6d801=0x8*-0x307+-0x2*-0xab2+0x2d5*0x1;if(_0x4c1d08[_0x5592d3(0x1cc)+'e']()[_0x5592d3(0x284)](_0x5592d3(0x251))){_0x248d0e=_0x5592d3(0x3ca),_0x4c1d08=_0x4c1d08[_0x5592d3(0x225)](-0x1*0x10f6+0x3*-0xa73+0x1*0x3055)[_0x5592d3(0x3e8)]();try{new RegExp(_0x4c1d08),_0xd6d801=-0xbbf+-0x1*0x10d+0x1*0xccd;}catch(_0x16fc60){_0xd6d801=-0x10a2+-0x1*0xfd1+0x2073,warn(_0x5592d3(0x286)+'Lock:\x20inva'+_0x5592d3(0x394)+_0x5592d3(0x3b0)+_0x4c1d08);}}else _0x4c1d08['includes']('*')?_0x248d0e=_0x5592d3(0x2d1):_0x248d0e=_0x5592d3(0x1ca);try{const _0xf2ff95=await db[_0x5592d3(0x399)](_0x5592d3(0x1d2)+_0x5592d3(0x2f7)+_0x5592d3(0x3ac)+_0x5592d3(0x33d)+_0x5592d3(0x347)+_0x5592d3(0x2af)+_0x5592d3(0x321)+_0x5592d3(0x3ed)+_0x5592d3(0x3da)+_0x5592d3(0x2a1)+_0x5592d3(0x281)+_0x5592d3(0x2c4)+_0x5592d3(0x24b)+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ON\x20CONFLI'+'CT(chat_ji'+_0x5592d3(0x3c9)+_0x5592d3(0x231)+_0x5592d3(0x22a)+_0x5592d3(0x3e0)+_0x5592d3(0x3a9)+_0x5592d3(0x360)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+_0x5592d3(0x3d3)+_0x5592d3(0x336)+_0x5592d3(0x301)+_0x5592d3(0x26f)+_0x5592d3(0x341)+_0x5592d3(0x1e4)+_0x5592d3(0x3ad)+_0x5592d3(0x384)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x5592d3(0x248)+_0x5592d3(0x245)+'uded.is_va'+_0x5592d3(0x217),[_0x21419d,_0x4c1d08,_0x248d0e,_0x258ba0||'',nowSec(),_0xd6d801]);return ahoCache['delete'](_0x21419d),info(_0x5592d3(0x286)+_0x5592d3(0x269)+_0x4c1d08+_0x5592d3(0x2ca)+_0x21419d+_0x5592d3(0x395)+_0x248d0e+_0x5592d3(0x20d)+_0xd6d801+')'),!![];}catch(_0x138b89){warn(_0x5592d3(0x2d5)+_0x5592d3(0x397)+_0x5592d3(0x2ba)+_0x5592d3(0x203)+_0x5592d3(0x316)+(_0x138b89?.[_0x5592d3(0x24f)]||_0x138b89));try{const _0x5854dc=await db[_0x5592d3(0x3c7)](_0x5592d3(0x317)+_0x5592d3(0x3c4)+_0x5592d3(0x290)+'t_jid\x20=\x20?\x20'+_0x5592d3(0x35a)+_0x5592d3(0x2c7),[_0x21419d,_0x4c1d08]);return _0x5854dc?await db[_0x5592d3(0x399)](_0x5592d3(0x2b9)+'ks\x20SET\x20typ'+_0x5592d3(0x332)+_0x5592d3(0x285)+_0x5592d3(0x3ee)+_0x5592d3(0x31b)+_0x5592d3(0x248)+_0x5592d3(0x3c3)+_0x5592d3(0x3ea),[_0x248d0e,_0x258ba0||'',nowSec(),_0xd6d801,_0x5854dc['id']]):await db[_0x5592d3(0x399)](_0x5592d3(0x1d2)+_0x5592d3(0x2f7)+_0x5592d3(0x3ac)+_0x5592d3(0x33d)+_0x5592d3(0x347)+'_by,\x20creat'+'ed_at,\x20hit'+_0x5592d3(0x3ed)+'_valid_reg'+_0x5592d3(0x1ea)+_0x5592d3(0x2fe)+'\x20?,\x20?,\x200,\x20'+'?)',[_0x21419d,_0x4c1d08,_0x248d0e,_0x258ba0||'',nowSec(),_0xd6d801]),ahoCache[_0x5592d3(0x2f0)](_0x21419d),!![];}catch(_0x197a4d){return error(_0x197a4d,_0x5592d3(0x286)+_0x5592d3(0x2cb)+_0x5592d3(0x2aa)+_0x5592d3(0x312)+_0x4c1d08+_0x5592d3(0x2e2)+_0x21419d),![];}}}catch(_0xda934e){return error(_0xda934e,_0x5592d3(0x286)+_0x5592d3(0x280)+_0x5592d3(0x359)+_0x574f1e+_0x5592d3(0x2e2)+_0x21419d),![];}}async function deleteLockByPhrase(_0x45e22b,_0x244fe5){const _0x1f96d2=_0x564249;try{if(!_0x45e22b||!_0x244fe5)return-0x1*0x2327+-0x302+0x1*0x2629;const _0x4d6610=String(_0x244fe5||'')[_0x1f96d2(0x3e8)]();if(!_0x4d6610)return-0x1abe+-0x127c+0x676*0x7;if(_0x4d6610[_0x1f96d2(0x1cc)+'e']()[_0x1f96d2(0x284)](_0x1f96d2(0x251))){const _0x521497=_0x4d6610['slice'](0x5*-0x646+0x1363+0xc01)['trim'](),_0x48dbc4=await db[_0x1f96d2(0x399)](_0x1f96d2(0x2df)+_0x1f96d2(0x358)+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+_0x1f96d2(0x221)+_0x1f96d2(0x29a)+_0x1f96d2(0x309),[_0x45e22b,_0x521497]);if(_0x48dbc4?.[_0x1f96d2(0x346)])ahoCache[_0x1f96d2(0x2f0)](_0x45e22b);return _0x48dbc4?.[_0x1f96d2(0x346)]||-0x2074+0x75*0x31+0xa0f;}let _0x3ab3ba=await db['run'](_0x1f96d2(0x2df)+_0x1f96d2(0x358)+'ERE\x20chat_j'+_0x1f96d2(0x2fd)+_0x1f96d2(0x2f1)+'?',[_0x45e22b,_0x4d6610]);if(_0x3ab3ba?.[_0x1f96d2(0x346)])return ahoCache['delete'](_0x45e22b),_0x3ab3ba['changes'];return 0x13ab+0x2*0xe21+0x1*-0x2fed;}catch(_0x1b0148){return warn('[lock]\x20del'+'eteLockByP'+_0x1f96d2(0x377)+_0x1f96d2(0x266)+(_0x1b0148?.[_0x1f96d2(0x24f)]||_0x1b0148)),0x1007+-0x22df+0x648*0x3;}}async function deleteLockById(_0x5175ff,_0x1abf9b){const _0x12f8a5=_0x564249;try{const _0x2a26f2=await db[_0x12f8a5(0x399)]('DELETE\x20FRO'+_0x12f8a5(0x358)+'ERE\x20chat_j'+_0x12f8a5(0x2fd)+_0x12f8a5(0x39a),[_0x5175ff,_0x1abf9b]);if(_0x2a26f2?.[_0x12f8a5(0x346)])ahoCache[_0x12f8a5(0x2f0)](_0x5175ff);return _0x2a26f2?.[_0x12f8a5(0x346)]||0xcf1*-0x3+0xc32+-0x1aa1*-0x1;}catch(_0x89cdd){return warn(_0x12f8a5(0x3b5)+_0x12f8a5(0x22b)+_0x12f8a5(0x3c2)+(_0x89cdd?.[_0x12f8a5(0x24f)]||_0x89cdd)),-0x1875+0x141d+0x116*0x4;}}async function deleteAllLocksForChat(_0x593595){const _0x4074db=_0x564249;try{const _0x29a1ce=await db[_0x4074db(0x399)](_0x4074db(0x2df)+_0x4074db(0x358)+_0x4074db(0x351)+_0x4074db(0x298),[_0x593595]);if(_0x29a1ce?.[_0x4074db(0x346)])ahoCache['delete'](_0x593595);return _0x29a1ce?.[_0x4074db(0x346)]||-0x159*0x5+-0x1fbc+0x2679;}catch(_0x159c17){return warn(_0x4074db(0x3b5)+_0x4074db(0x274)+_0x4074db(0x392)+_0x4074db(0x272)+(_0x159c17?.[_0x4074db(0x24f)]||_0x159c17)),-0x1*0x1ead+-0xd7*-0x11+0x1066;}}async function listLocksForChat(_0x514228){const _0x34f15f=_0x564249;try{const _0x46a7d4=await db['all'](_0x34f15f(0x338)+_0x34f15f(0x3ba)+_0x34f15f(0x20c)+_0x34f15f(0x2a8)+'ated_at,\x20h'+_0x34f15f(0x1e0)+_0x34f15f(0x24c)+'egex\x20FROM\x20'+'locks\x20WHER'+_0x34f15f(0x3d0)+_0x34f15f(0x1ef)+_0x34f15f(0x22e),[_0x514228]);return _0x46a7d4||[];}catch(_0x4ffdf9){return warn(_0x4ffdf9,_0x34f15f(0x34b)+'tLocksForC'+'hat\x20error\x20'+_0x34f15f(0x23c)+_0x514228+':\x20'+(_0x4ffdf9?.[_0x34f15f(0x24f)]||_0x4ffdf9)),[];}}function _0x219e(_0x26b843,_0x5655b5){const _0x3aed07=_0x4f24();return _0x219e=function(_0x19aba8,_0x2784db){_0x19aba8=_0x19aba8-(-0x1*0x1189+-0x4*0x8d4+-0x2*-0x1b4f);let _0x4c3ce6=_0x3aed07[_0x19aba8];return _0x4c3ce6;},_0x219e(_0x26b843,_0x5655b5);}async function setLockNotify(_0x108846,_0x36643c){const _0x40fcaf=_0x564249;try{if(!_0x108846)return![];return await db[_0x40fcaf(0x399)]('INSERT\x20INT'+_0x40fcaf(0x339)+_0x40fcaf(0x1f3)+'id,\x20notify'+_0x40fcaf(0x3a4)+_0x40fcaf(0x227)+_0x40fcaf(0x2e8)+_0x40fcaf(0x3f4)+_0x40fcaf(0x322)+'DATE\x20SET\x20n'+_0x40fcaf(0x1d3)+_0x40fcaf(0x37c)+_0x40fcaf(0x1ed),[_0x108846,_0x36643c?0x206+0x26*0x23+-0x737:0x3d*0x17+0xd*-0xfb+0x2*0x3a2]),!![];}catch(_0x25d413){return warn(_0x40fcaf(0x32e)+_0x40fcaf(0x259)+_0x40fcaf(0x3fc)+'r\x20'+_0x108846+':\x20'+(_0x25d413?.['message']||_0x25d413)),![];}}async function getLockNotify(_0xc4e55f){const _0x1d53d2=_0x564249;try{if(!_0xc4e55f)return-0x1*0x707+-0x1ad7+0x21de;const _0x531a92=await db[_0x1d53d2(0x3c7)](_0x1d53d2(0x362)+_0x1d53d2(0x349)+'ock_prefs\x20'+'WHERE\x20chat'+_0x1d53d2(0x2a3),[_0xc4e55f]);return _0x531a92?Number(_0x531a92[_0x1d53d2(0x2ec)])?0x1f07+0x256f+-0x2bd*0x19:0x1bbc+0x1048+0x272*-0x12:0xf1c+-0x3ee*-0x8+0x7c2*-0x6;}catch(_0x33a7ae){return warn('[lock]\x20get'+_0x1d53d2(0x259)+_0x1d53d2(0x3fc)+'r\x20'+_0xc4e55f+':\x20'+(_0x33a7ae?.[_0x1d53d2(0x24f)]||_0x33a7ae)),0x85d+-0x1091*-0x2+-0x297f;}}async function deleteWithRetry(_0x593eef,_0x35501a=0x2674*-0x1+-0x26e1+0x5f3*0xd,_0xb28c85=0x66*-0x5d+-0x5*-0x42b+0x1163){const _0x8c1e5f=_0x564249,_0x22057d=_0x593eef['key']?.[_0x8c1e5f(0x3b3)];if(!_0x22057d)return![];let _0x317d62=_0xb28c85;for(let _0x20daca=-0x3*0x6e3+0x6*0x211+0x1*0x844;_0x20daca<=Math[_0x8c1e5f(0x1d9)](0x234c+0x21fa*0x1+-0x4545,_0x35501a);_0x20daca++){try{if(!sendApi)return warn(_0x8c1e5f(0x3b5)+_0x8c1e5f(0x33f)+_0x8c1e5f(0x1de)+'i\x20unavaila'+_0x8c1e5f(0x283)),![];return await sendApi(_0x22057d,{'delete':_0x593eef[_0x8c1e5f(0x2c0)]}),!![];}catch(_0x417643){if(_0x20daca<_0x35501a){await sleep(_0x317d62),_0x317d62*=-0xb*-0xef+-0xf83+-0x15*-0x40;continue;}return warn(_0x8c1e5f(0x3b5)+_0x8c1e5f(0x33f)+_0x8c1e5f(0x2bf)+'\x20'+(_0x417643?.[_0x8c1e5f(0x24f)]||_0x417643)),![];}}return![];}async function sendWarningAndMaybeDelete(_0xd87d18){const _0x25ccfb=_0x564249;if(!CFG[_0x25ccfb(0x253)+'NG'])return;try{const _0x3fbf14=_0xd87d18[_0x25ccfb(0x2c0)]?.[_0x25ccfb(0x1f9)+'t']||_0xd87d18['key']?.[_0x25ccfb(0x229)]||'',_0x4958a2=_0xd87d18[_0x25ccfb(0x2c0)][_0x25ccfb(0x3b3)],_0x177398=_0x3fbf14?'@'+String(_0x3fbf14)[_0x25ccfb(0x2b6)]('@')[-0x7*0x54f+-0x1177+-0x1*-0x36a0]:_0x25ccfb(0x1c7),_0x2b9cca=String(CFG[_0x25ccfb(0x2d7)+_0x25ccfb(0x364)]||DEFAULTS[_0x25ccfb(0x2d7)+_0x25ccfb(0x364)])[_0x25ccfb(0x36c)](/\{user\}/gi,_0x177398);if(!sendApi){warn(_0x25ccfb(0x3bf)+_0x25ccfb(0x3c1)+_0x25ccfb(0x2c6)+_0x25ccfb(0x21d));return;}const _0x53a49e=await sendApi(_0x4958a2,{'text':_0x2b9cca,'mentions':_0x3fbf14?[_0x3fbf14]:[]});_0x53a49e?.['key']&&CFG['WARNING_TT'+_0x25ccfb(0x287)]&&CFG[_0x25ccfb(0x3aa)+_0x25ccfb(0x287)]>0x1b75*0x1+-0xa2d+-0x1148&&setTimeout(async()=>{try{await sendApi(_0x4958a2,{'delete':_0x53a49e['key']});}catch(_0x590ff8){}},CFG[_0x25ccfb(0x3aa)+_0x25ccfb(0x287)]);}catch(_0x1d2c97){warn('[lock]\x20sen'+_0x25ccfb(0x1f1)+_0x25ccfb(0x2fc)+(_0x1d2c97?.['message']||_0x1d2c97));}}async function processChatQueue(_0x3d1b2f){const _0x199d47=_0x564249;while((perChatQueue[_0x199d47(0x3c7)](_0x3d1b2f)||[])[_0x199d47(0x355)]>-0x364*-0x3+0x12b4+-0x1ce0&&!shuttingDown){const _0x2c0fda=Math[_0x199d47(0x1d9)](0x1*-0x10e5+-0x1c1e+-0x56*-0x86,CFG[_0x199d47(0x215)]||-0x1*0x1a89+-0x6be+0x2148),_0x5cd1bd=perChatQueue[_0x199d47(0x3c7)](_0x3d1b2f)||[],_0x197f6e=_0x5cd1bd['splice'](-0xe35+0x250b+-0x25*0x9e,_0x2c0fda);for(const _0x18c29c of _0x197f6e){try{const _0x27381b=await deleteWithRetry(_0x18c29c)['catch'](()=>![]);_0x27381b&&await sendWarningAndMaybeDelete(_0x18c29c)['catch'](()=>{});}catch(_0x29d575){warn(_0x199d47(0x2e0)+_0x199d47(0x31f)+_0x199d47(0x2a6)+_0x199d47(0x272)+(_0x29d575?.[_0x199d47(0x24f)]||_0x29d575));}}(perChatQueue[_0x199d47(0x3c7)](_0x3d1b2f)||[])[_0x199d47(0x355)]>0x24ce*0x1+0x8d2+-0x2da0&&await sleep(Math[_0x199d47(0x1d9)](-0xa7e+-0x8b5*-0x2+-0x6ec,CFG[_0x199d47(0x28f)+_0x199d47(0x2d4)]||-0x3*0x949+-0x1198+0x2d*0x107));}if((perChatQueue['get'](_0x3d1b2f)||[])[_0x199d47(0x355)]===0x2347*-0x1+-0x56*0x6d+-0xe61*-0x5)perChatQueue[_0x199d47(0x2f0)](_0x3d1b2f);}function tryStartProcessingForChat(_0x4205a5){const _0x1da18f=_0x564249;if(perChatProcessing[_0x1da18f(0x3c7)](_0x4205a5))return;if(activeChats>=(CFG['GLOBAL_CON'+'CURRENCY']||0x8f8+-0x2148+0x1851)){setTimeout(()=>tryStartProcessingForChat(_0x4205a5),0x3e*0x9d+-0x92b+-0x1c45);return;}activeChats++,perChatProcessing[_0x1da18f(0x206)](_0x4205a5,!![]),((async()=>{const _0x24f1f0=_0x1da18f;try{await processChatQueue(_0x4205a5);}catch(_0x17941f){warn(_0x24f1f0(0x2e0)+_0x24f1f0(0x31f)+_0x24f1f0(0x389)+(_0x17941f?.[_0x24f1f0(0x24f)]||_0x17941f));}finally{perChatProcessing[_0x24f1f0(0x2f0)](_0x4205a5),activeChats=Math['max'](-0x4*0x7f4+-0xad7+0x2aa7,activeChats-(0x1f61*0x1+-0x1e2f*0x1+-0x131));if((perChatQueue['get'](_0x4205a5)||[])[_0x24f1f0(0x355)])setImmediate(()=>tryStartProcessingForChat(_0x4205a5));}})());}function enqueueDeletion(_0x533327){const _0x2a4bbb=_0x564249,_0x46692e=_0x533327['key']?.['remoteJid'];if(!_0x46692e)return;if(!perChatQueue['has'](_0x46692e))perChatQueue['set'](_0x46692e,[]);const _0x513d66=perChatQueue['get'](_0x46692e);if(_0x513d66[_0x2a4bbb(0x355)]>=(CFG[_0x2a4bbb(0x230)+_0x2a4bbb(0x2e7)]||DEFAULTS[_0x2a4bbb(0x230)+_0x2a4bbb(0x2e7)]))_0x513d66[_0x2a4bbb(0x3fd)]();_0x513d66['push'](_0x533327);if(!perChatProcessing[_0x2a4bbb(0x3c7)](_0x46692e))tryStartProcessingForChat(_0x46692e);}function extractTextFromMessage(_0x573627){const _0x2e71ac=_0x564249;if(!_0x573627||!_0x573627[_0x2e71ac(0x24f)])return'';const _0x238272=_0x573627['message'];if(_0x238272[_0x2e71ac(0x268)+'on'])return _0x238272[_0x2e71ac(0x268)+'on'];if(_0x238272[_0x2e71ac(0x319)+_0x2e71ac(0x2fb)]?.[_0x2e71ac(0x250)])return _0x238272[_0x2e71ac(0x319)+_0x2e71ac(0x2fb)][_0x2e71ac(0x250)];if(_0x238272[_0x2e71ac(0x25d)+'ge']?.[_0x2e71ac(0x23f)])return _0x238272['imageMessa'+'ge']['caption'];if(_0x238272[_0x2e71ac(0x32f)+'ge']?.['caption'])return _0x238272['videoMessa'+'ge'][_0x2e71ac(0x23f)];if(_0x238272[_0x2e71ac(0x34d)+_0x2e71ac(0x2b2)+'ge']?.[_0x2e71ac(0x3dc)+_0x2e71ac(0x344)])return _0x238272[_0x2e71ac(0x34d)+_0x2e71ac(0x2b2)+'ge'][_0x2e71ac(0x3dc)+'ttonId'];return'';}function splitRestForGp(_0x1e1e49){const _0x3c4b8f=_0x564249;if(!_0x1e1e49)return{'left':'','gp':null};const _0x5b8ab5=_0x1e1e49['match'](/\bgp[:\s]+(.+)$/i);if(_0x5b8ab5){const _0x571922=_0x1e1e49[_0x3c4b8f(0x225)](-0x9*0x152+0x47*0x2b+0x1*-0xb,_0x5b8ab5['index'])['trim'](),_0x270e4a=_0x5b8ab5[-0xf0b+-0x117b+0xb*0x2f5][_0x3c4b8f(0x3e8)]();return{'left':_0x571922,'gp':_0x270e4a};}const _0x34d627=_0x1e1e49[_0x3c4b8f(0x2b6)](/\s+/)['filter'](Boolean);if(_0x34d627[_0x3c4b8f(0x355)]>0xb5+0x26*-0xac+-0xc6a*-0x2){const _0xd3d15d=_0x34d627[_0x34d627[_0x3c4b8f(0x355)]-(0x47e+-0xae5*0x3+0x1c32)];if(_0xd3d15d[_0x3c4b8f(0x1cc)+'e']()===_0x3c4b8f(0x2e1)||_0xd3d15d[_0x3c4b8f(0x3f5)]('@'))return _0x34d627[_0x3c4b8f(0x1f4)](),{'left':_0x34d627[_0x3c4b8f(0x3c0)]('\x20')['trim'](),'gp':_0xd3d15d};}return{'left':_0x1e1e49[_0x3c4b8f(0x3e8)](),'gp':null};}function parseLockCommandOneLine(_0xbd73ca){const _0x259e51=_0x564249,_0x46a190=(_0xbd73ca||'')[_0x259e51(0x2b6)](/\r?\n/)[-0x1d25*-0x1+-0x11*0x149+-0x74c]['trim']();let _0x391e4e=_0x46a190[_0x259e51(0x36c)](/^\/?lock\b/i,'')[_0x259e51(0x3e8)]();const {left:_0x589d31,gp:_0x5e97f9}=splitRestForGp(_0x391e4e),_0x275249=(_0x589d31||'')[_0x259e51(0x2b6)](',')['map'](_0x1d9a8f=>_0x1d9a8f[_0x259e51(0x3e8)]())[_0x259e51(0x214)](Boolean);return{'triggers':_0x275249,'gp':_0x5e97f9};}function parseUnlockCommandOneLine(_0x2cf61c){const _0x3bf9e6=_0x564249,_0x3b9b46=(_0x2cf61c||'')[_0x3bf9e6(0x2b6)](/\r?\n/)[0x1eb5+-0x3b*-0x61+-0x30*0x11b][_0x3bf9e6(0x3e8)]();let _0x293f09=_0x3b9b46[_0x3bf9e6(0x36c)](/^\/?unlock\b/i,'')[_0x3bf9e6(0x3e8)]();const {left:_0x4d88f8,gp:_0x34d843}=splitRestForGp(_0x293f09),_0xe39816=(_0x4d88f8||'')[_0x3bf9e6(0x2b6)](',')[_0x3bf9e6(0x1e2)](_0x48af3d=>_0x48af3d[_0x3bf9e6(0x3e8)]())[_0x3bf9e6(0x214)](Boolean);return{'parts':_0xe39816,'gp':_0x34d843};}function parseListCommandOneLine(_0x15a7bb){const _0x548675=_0x564249,_0x208697=(_0x15a7bb||'')[_0x548675(0x2b6)](/\r?\n/)[-0x5*0x5f3+-0x101b+-0x16ed*-0x2]['trim']();let _0x40f74c=_0x208697['replace'](/^\/?listlock\b/i,'')[_0x548675(0x3e8)]();const {left:_0x33486a,gp:_0x2b6846}=splitRestForGp(_0x40f74c),_0x2308f9=_0x2b6846||(_0x33486a?_0x33486a:null);return{'gp':_0x2308f9};}function parseLockNotifyCommandOneLine(_0x33f95c){const _0x3f0d98=_0x564249,_0x136b54=(_0x33f95c||'')['split'](/\r?\n/)[-0x2*-0x45f+-0x14f3+0xc35]['trim']();let _0x351142=_0x136b54[_0x3f0d98(0x36c)](/^\/?locknotify\b/i,'')[_0x3f0d98(0x3e8)]();const {left:_0x3df725,gp:_0x4207d9}=splitRestForGp(_0x351142),_0x288f0f=(_0x3df725||'')[_0x3f0d98(0x1cc)+'e']();let _0xd9d102=null;if(_0x288f0f[_0x3f0d98(0x3f5)]('on'))_0xd9d102='on';else{if(_0x288f0f[_0x3f0d98(0x3f5)]('off'))_0xd9d102=_0x3f0d98(0x37b);}return{'mode':_0xd9d102,'gp':_0x4207d9};}async function validateStoredRegexes(){const _0x1def98=_0x564249;try{const _0x16baf4=await db[_0x1def98(0x2e1)](_0x1def98(0x338)+'\x20phrase\x20FR'+_0x1def98(0x2cc)+_0x1def98(0x24e)+_0x1def98(0x3ab)+_0x1def98(0x25f)+_0x1def98(0x39b)+_0x1def98(0x3e3));for(const _0x50482d of _0x16baf4||[]){try{new RegExp(_0x50482d[_0x1def98(0x262)]),await db[_0x1def98(0x399)](_0x1def98(0x2b9)+_0x1def98(0x23d)+_0x1def98(0x260)+_0x1def98(0x234)+_0x1def98(0x1c9),[_0x50482d['id']]);}catch(_0x3d5681){await db[_0x1def98(0x399)](_0x1def98(0x2b9)+_0x1def98(0x23d)+_0x1def98(0x260)+_0x1def98(0x240)+_0x1def98(0x1c9),[_0x50482d['id']]);}}}catch(_0x14d4d1){warn(_0x1def98(0x311)+_0x1def98(0x2a0)+_0x1def98(0x25c)+_0x1def98(0x272)+(_0x14d4d1?.[_0x1def98(0x24f)]||_0x14d4d1));}}async function findStoredMatchFromFindings(_0x44b1e3=[]){const _0x15b517=_0x564249;try{const _0x154914=await listSudo();if(!Array[_0x15b517(0x3ce)](_0x154914)||_0x154914[_0x15b517(0x355)]===-0x466*-0x5+-0x5*-0xde+-0x1a54)return null;const _0x21fc65=new Set(_0x154914[_0x15b517(0x1e2)](String));for(const _0x36d4e0 of _0x44b1e3||[]){if(!_0x36d4e0||typeof _0x36d4e0[_0x15b517(0x2a5)]!==_0x15b517(0x2b7))continue;const _0x3d1ffa=normalizeToJid(_0x36d4e0['jid']);if(_0x3d1ffa&&_0x21fc65[_0x15b517(0x255)](_0x3d1ffa))return _0x3d1ffa;if(_0x21fc65[_0x15b517(0x255)](_0x36d4e0['jid']))return _0x36d4e0[_0x15b517(0x2a5)];const _0x4cb230=String(_0x36d4e0[_0x15b517(0x2a5)])['split']('@')[0x1484+-0x8*-0x258+-0x2744][_0x15b517(0x2b6)](':')[0x4*0x204+0x9*-0x3d9+0x1a91];if(_0x4cb230)for(const _0x5703d4 of _0x154914){const _0x31d746=String(_0x5703d4)[_0x15b517(0x2b6)]('@')[0x22b+0x1d51+0x26c*-0xd];if(_0x31d746&&_0x31d746===_0x4cb230)return _0x5703d4;}}return null;}catch(_0x4081c9){return warn(_0x15b517(0x26e)+_0x15b517(0x310)+_0x15b517(0x36e)+'ings\x20error'+':\x20'+(_0x4081c9?.[_0x15b517(0x24f)]||_0x4081c9)),null;}}export async function initialize(_0x3ccc50){const _0x478de8=_0x564249;if(!_0x3ccc50)throw new Error(_0x478de8(0x296)+_0x478de8(0x3ec)+_0x478de8(0x3b4)+_0x478de8(0x348));botRef=_0x3ccc50,setupSendApi();try{const _0x1069a7=getConfig()||{},_0x1441bd=_0x1069a7&&_0x1069a7[_0x478de8(0x270)]?_0x1069a7[_0x478de8(0x270)]:{};CFG['DEFAULT_EN'+_0x478de8(0x2ac)]=_0x1441bd[_0x478de8(0x2a2)+_0x478de8(0x2ac)]??DEFAULTS[_0x478de8(0x2a2)+'ABLED'],CFG[_0x478de8(0x253)+'NG']=_0x1441bd[_0x478de8(0x253)+'NG']??DEFAULTS[_0x478de8(0x253)+'NG'],CFG['WARNING_ME'+_0x478de8(0x364)]=_0x1441bd['WARNING_ME'+_0x478de8(0x364)]??DEFAULTS[_0x478de8(0x2d7)+'SSAGE'],CFG[_0x478de8(0x3aa)+_0x478de8(0x287)]=Number[_0x478de8(0x352)](_0x1441bd['WARNING_TT'+_0x478de8(0x287)])?_0x1441bd[_0x478de8(0x3aa)+_0x478de8(0x287)]:DEFAULTS[_0x478de8(0x3aa)+_0x478de8(0x287)],CFG[_0x478de8(0x230)+_0x478de8(0x2e7)]=Number[_0x478de8(0x352)](_0x1441bd[_0x478de8(0x230)+'UEUE_LIMIT'])?_0x1441bd[_0x478de8(0x230)+_0x478de8(0x2e7)]:DEFAULTS[_0x478de8(0x230)+_0x478de8(0x2e7)],CFG[_0x478de8(0x215)]=Number[_0x478de8(0x352)](_0x1441bd[_0x478de8(0x215)])?_0x1441bd[_0x478de8(0x215)]:DEFAULTS['BATCH_SIZE'],CFG[_0x478de8(0x28f)+_0x478de8(0x2d4)]=Number['isInteger'](_0x1441bd[_0x478de8(0x28f)+_0x478de8(0x2d4)])?_0x1441bd[_0x478de8(0x28f)+_0x478de8(0x2d4)]:DEFAULTS[_0x478de8(0x28f)+_0x478de8(0x2d4)],CFG['GLOBAL_CON'+_0x478de8(0x2b1)]=Number[_0x478de8(0x352)](_0x1441bd[_0x478de8(0x3a8)+_0x478de8(0x2b1)])?_0x1441bd[_0x478de8(0x3a8)+_0x478de8(0x2b1)]:DEFAULTS['GLOBAL_CON'+_0x478de8(0x2b1)],CFG[_0x478de8(0x244)+_0x478de8(0x1c5)+_0x478de8(0x3fe)]=!!_0x1441bd['NORMALIZE_'+_0x478de8(0x1c5)+'CRITICS'];}catch(_0x1eacaf){warn('[lock]\x20con'+_0x478de8(0x2fa)+_0x478de8(0x372)+'ng\x20default'+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x478de8(0x1ee)+_0x478de8(0x3dd)+'DB\x20ensured'+'\x20&\x20regex\x20v'+_0x478de8(0x236)+'run)');}catch(_0xfaaa8c){error(_0xfaaa8c,_0x478de8(0x1ee)+_0x478de8(0x29b)+_0x478de8(0x23a));throw _0xfaaa8c;}}export async function onMessage(_0x56f03c){const _0x2f9797=_0x564249;try{if(!_0x56f03c||!_0x56f03c['key']||!_0x56f03c['message'])return;const _0x138a3e=_0x56f03c[_0x2f9797(0x2c0)]?.['id']||_0x56f03c[_0x2f9797(0x2c0)]?.['participan'+'t']||(_0x56f03c['key']?.[_0x2f9797(0x1f8)]?_0x2f9797(0x1f8):''),_0x4a69fa=String(_0x56f03c[_0x2f9797(0x2c0)][_0x2f9797(0x3b3)]||'')+'::'+String(_0x138a3e||'');if(isProcessed(_0x4a69fa))return;markProcessed(_0x4a69fa);const _0x28cb09=extractTextFromMessage(_0x56f03c);if(!_0x28cb09)return;const _0x2d5f4b=_0x56f03c[_0x2f9797(0x2c0)][_0x2f9797(0x3b3)],_0x37372e=typeof _0x2d5f4b===_0x2f9797(0x2b7)&&_0x2d5f4b[_0x2f9797(0x385)](_0x2f9797(0x27c)),_0x383061=_0x56f03c[_0x2f9797(0x2c0)]?.[_0x2f9797(0x1f9)+'t']||_0x56f03c[_0x2f9797(0x2c0)]?.[_0x2f9797(0x229)]||_0x56f03c['key']?.[_0x2f9797(0x3b3)]||'',_0x2462f6=String(_0x383061||'')[_0x2f9797(0x2b6)]('@')[-0xf*0x166+0x2a7*0x1+0x1253];let _0x19299a=![];if(_0x37372e)try{_0x19299a=await isadmin(botRef,_0x56f03c);}catch(_0xe8219e){warn(_0x2f9797(0x1e8)+_0x2f9797(0x297)+'\x20failed'),_0x19299a=![];}if(_0x56f03c['isCommand']){const _0x403108=typeof _0x56f03c[_0x2f9797(0x250)]===_0x2f9797(0x2b7)&&_0x56f03c['text']['trim']()[_0x2f9797(0x355)]?_0x56f03c[_0x2f9797(0x250)][_0x2f9797(0x3e8)]():_0x28cb09[_0x2f9797(0x3e8)](),_0x40a1b3=(_0x403108[_0x2f9797(0x2b6)](/\s+/)[-0x26bf+0xd50*0x1+0x196f*0x1]||'')[_0x2f9797(0x1cc)+'e']();if(!_0x37372e){const _0x324036=Boolean(_0x56f03c[_0x2f9797(0x2c0)][_0x2f9797(0x1f8)]);let _0x40d9f3=null;if(_0x324036){const _0x98997d=getBotJid();_0x40d9f3=_0x98997d||_0x56f03c['key']['remoteJid'];}else{let _0x911660=![];try{_0x911660=await isSudo(botRef,_0x56f03c);}catch(_0x45661d){_0x911660=![];}if(!_0x911660)return;const _0x234e50=userJidFromCtx(_0x56f03c)||{'findings':[]},_0x2b3bbd=await findStoredMatchFromFindings(_0x234e50[_0x2f9797(0x3a1)]||[]);if(!_0x2b3bbd)return;_0x40d9f3=_0x2b3bbd;}if(!_0x40d9f3)return;if(_0x40a1b3===_0x2f9797(0x2dd)){const {triggers:_0x45e171,gp:_0x2c2d83}=parseLockCommandOneLine(_0x403108||_0x28cb09);if(!_0x45e171['length']){await sendText(_0x40d9f3,'❌\x20PM:\x20one-'+_0x2f9797(0x2b8)+_0x2f9797(0x2f9)+_0x2f9797(0x3f7)+_0x2f9797(0x3cd)+'<alias|jid'+'|all>');return;}if(!_0x2c2d83){await sendText(_0x40d9f3,_0x2f9797(0x2c9)+'ude\x20gp\x20in\x20'+_0x2f9797(0x337)+_0x2f9797(0x220)+_0x2f9797(0x3e5)+'bad2\x20gp:al'+'ias');return;}let _0x19842e=[];const _0x5ac559=_0x2c2d83[_0x2f9797(0x3e8)]();if(_0x5ac559['toLowerCas'+'e']()===_0x2f9797(0x2e1))_0x19842e=await _0x4c376c['getUniqueJ'+_0x2f9797(0x343)]();else{const _0x5f1070=await _0x4c376c[_0x2f9797(0x38b)+'e'](_0x5ac559);if(_0x5f1070)_0x19842e=[_0x5f1070];else{if(_0x5ac559[_0x2f9797(0x3f5)]('@'))_0x19842e=[_0x4c376c[_0x2f9797(0x3ff)+_0x2f9797(0x2ce)](_0x5ac559)];else{await sendText(_0x40d9f3,_0x2f9797(0x34e)+'gp\x20alias/j'+_0x2f9797(0x2f5)+_0x5ac559+'\x22.');return;}}}let _0x5e26ae=-0x156d*0x1+-0x17*0xe+0x16af;for(const _0x49f697 of uniqArray(_0x19842e)){for(const _0xc2a68c of _0x45e171){const _0x11e8ed=await addLock(_0x49f697,_0xc2a68c,_0x383061);if(_0x11e8ed)_0x5e26ae++;}}await sendText(_0x40d9f3,'✔️\x20Saved\x20'+_0x5e26ae+_0x2f9797(0x2b3));return;}if(_0x40a1b3===_0x2f9797(0x314)){const {gp:_0x38bdcc}=parseListCommandOneLine(_0x403108||_0x28cb09);if(!_0x38bdcc){await sendText(_0x40d9f3,_0x2f9797(0x3f0)+'line\x20usage'+_0x2f9797(0x3df)+_0x2f9797(0x1dc)+_0x2f9797(0x21e));return;}let _0x1b0ac0=[];if(_0x38bdcc[_0x2f9797(0x1cc)+'e']()===_0x2f9797(0x2e1))_0x1b0ac0=await _0x4c376c[_0x2f9797(0x2d0)+_0x2f9797(0x343)]();else{const _0x14b9bb=await _0x4c376c[_0x2f9797(0x38b)+'e'](_0x38bdcc);if(_0x14b9bb)_0x1b0ac0=[_0x14b9bb];else{if(_0x38bdcc[_0x2f9797(0x3f5)]('@'))_0x1b0ac0=[_0x4c376c['normalizeT'+_0x2f9797(0x2ce)](_0x38bdcc)];else{await sendText(_0x40d9f3,_0x2f9797(0x34e)+_0x2f9797(0x2e4)+_0x2f9797(0x2f5)+_0x38bdcc+'\x22.');return;}}}let _0x227310=[];for(const _0x44ac28 of _0x1b0ac0){const _0x23c7d5=await listLocksForChat(_0x44ac28);for(const _0x1809f8 of _0x23c7d5)_0x227310['push']({'chatJid':_0x44ac28,..._0x1809f8});}await sendText(_0x40d9f3,'✔️\x20[lock]\x20'+_0x227310[_0x2f9797(0x355)]+(_0x2f9797(0x209)+_0x2f9797(0x218)+'quested\x20ta'+'rgets.'));if(!_0x227310[_0x2f9797(0x355)])return;let _0x59f2ac='';for(const _0xc90746 of _0x227310){const _0x56ffa9=_0xc90746[_0x2f9797(0x295)]?new Date(_0xc90746[_0x2f9797(0x295)]*(0xef*0x8+-0x2*-0x412+-0xbb4))[_0x2f9797(0x329)+'g']()[_0x2f9797(0x225)](0x1496+-0x1769+0x2d3*0x1,-0x784+-0xbb3*0x1+0x1341):'',_0x1e497c=_0xc90746[_0x2f9797(0x32c)]==='regex'?'⦿':_0xc90746[_0x2f9797(0x32c)]===_0x2f9797(0x2d1)?'✶':'',_0x7dfa7e=_0xc90746[_0x2f9797(0x32c)]==='regex'?_0x2f9797(0x251)+_0xc90746[_0x2f9797(0x262)]:_0xc90746[_0x2f9797(0x262)],_0x46c1f6=_0xc90746['type']==='regex'&&_0xc90746['is_valid_r'+_0x2f9797(0x330)]===-0x25b2+-0x6a5+-0x2c57*-0x1?_0x2f9797(0x2eb)+'REGEX)':'',_0x421685=_0xc90746[_0x2f9797(0x21b)]+':'+_0xc90746['id']+'.\x20'+(_0x1e497c?_0x1e497c+'\x20':'')+_0x7dfa7e+_0x46c1f6+'\x20'+(_0x56ffa9?'('+_0x56ffa9+')':'')+'\x0a';(_0x59f2ac+_0x421685)[_0x2f9797(0x355)]>-0x341+-0x13e+0xa5b&&(await sendText(_0x40d9f3,_0x59f2ac['trim']()),_0x59f2ac=''),_0x59f2ac+=_0x421685;}if(_0x59f2ac['trim']())await sendText(_0x40d9f3,_0x59f2ac['trim']());return;}if(['unlock',_0x2f9797(0x3b6),_0x2f9797(0x369),_0x2f9797(0x3f3),_0x2f9797(0x369)][_0x2f9797(0x3f5)](_0x40a1b3)){const {parts:_0x353e36,gp:_0x49cccc}=parseUnlockCommandOneLine(_0x403108||_0x28cb09);if(!_0x353e36?.[_0x2f9797(0x355)]){await sendText(_0x40d9f3,_0x2f9797(0x3f0)+_0x2f9797(0x2b8)+_0x2f9797(0x22d)+_0x2f9797(0x1c8)+_0x2f9797(0x27d)+'eparated>\x20'+_0x2f9797(0x21c)+'jid|all>');return;}if(!_0x49cccc){await sendText(_0x40d9f3,_0x2f9797(0x2c9)+_0x2f9797(0x35c)+_0x2f9797(0x337)+_0x2f9797(0x220)+'unlock\x201,2'+_0x2f9797(0x27f));return;}let _0x6a41f0=[];const _0xf1d38c=_0x49cccc[_0x2f9797(0x3e8)]();if(_0xf1d38c[_0x2f9797(0x1cc)+'e']()===_0x2f9797(0x2e1))_0x6a41f0=await _0x4c376c[_0x2f9797(0x2d0)+_0x2f9797(0x343)]();else{const _0x388c8e=await _0x4c376c[_0x2f9797(0x38b)+'e'](_0xf1d38c);if(_0x388c8e)_0x6a41f0=[_0x388c8e];else{if(_0xf1d38c[_0x2f9797(0x3f5)]('@'))_0x6a41f0=[_0x4c376c[_0x2f9797(0x3ff)+_0x2f9797(0x2ce)](_0xf1d38c)];else{await sendText(_0x40d9f3,_0x2f9797(0x34e)+'gp\x20alias/j'+'id:\x20\x22'+_0xf1d38c+'\x22.');return;}}}let _0x23907f=-0x1*0x17fe+0x1b10+-0x312;for(const _0x34a6fc of _0x353e36){if(!_0x34a6fc)continue;if(/^\d+$/[_0x2f9797(0x3ae)](_0x34a6fc)){for(const _0x1ecc2c of _0x6a41f0){const _0x45702d=await deleteLockById(_0x1ecc2c,_0x34a6fc);if(_0x45702d)_0x23907f+=_0x45702d;}continue;}for(const _0x3bbfc6 of _0x6a41f0){const _0x907f5a=await deleteLockByPhrase(_0x3bbfc6,_0x34a6fc);if(_0x907f5a)_0x23907f+=_0x907f5a;}}await sendText(_0x40d9f3,_0x2f9797(0x1c6)+_0x23907f+'/'+_0x353e36[_0x2f9797(0x355)]+_0x2f9797(0x2b3));return;}if(_0x40a1b3===_0x2f9797(0x1e7)||_0x40a1b3===_0x2f9797(0x2c5)||_0x40a1b3===_0x2f9797(0x37a)){const _0x5f5a6e=(_0x403108||_0x28cb09||'')[_0x2f9797(0x2b6)](/\r?\n/)[-0x7f*-0x5+-0x1*-0x48b+-0x3a*0x1f][_0x2f9797(0x3e8)](),_0x2c85c4=_0x5f5a6e[_0x2f9797(0x36c)](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x2f9797(0x3e8)](),{left:_0x3cef3f,gp:_0x1a22bf}=splitRestForGp(_0x2c85c4);if(!_0x1a22bf){await sendText(_0x40d9f3,_0x2f9797(0x3f0)+_0x2f9797(0x2b8)+_0x2f9797(0x3fa)+'l\x20gp:<alia'+_0x2f9797(0x2bd));return;}let _0x582928=[];const _0x25636e=_0x1a22bf[_0x2f9797(0x3e8)]();if(_0x25636e[_0x2f9797(0x1cc)+'e']()===_0x2f9797(0x2e1))_0x582928=await _0x4c376c['getUniqueJ'+_0x2f9797(0x343)]();else{const _0x38a3bf=await _0x4c376c['resolveNam'+'e'](_0x25636e);if(_0x38a3bf)_0x582928=[_0x38a3bf];else{if(_0x25636e['includes']('@'))_0x582928=[_0x4c376c[_0x2f9797(0x3ff)+'oUserJid'](_0x25636e)];else{await sendText(_0x40d9f3,_0x2f9797(0x34e)+_0x2f9797(0x2e4)+'id:\x20\x22'+_0x25636e+'\x22.');return;}}}let _0x1f3f40=0x1af5+-0x4*-0x602+-0x10ff*0x3;for(const _0x31115b of _0x582928){const _0x252ed7=await deleteAllLocksForChat(_0x31115b);_0x1f3f40+=_0x252ed7||0xf*0x4a+0x23*-0xcf+-0x5*-0x4cb;}await sendText(_0x40d9f3,_0x2f9797(0x1c6)+_0x1f3f40+_0x2f9797(0x2b3));return;}if(_0x40a1b3===_0x2f9797(0x401)){const _0x5e5a25=parseLockNotifyCommandOneLine(_0x403108||_0x28cb09),{mode:_0x1daf87,gp:_0x2e87ac}=_0x5e5a25;if(!_0x2e87ac){await sendText(_0x40d9f3,'❌\x20PM\x20one-l'+_0x2f9797(0x263)+_0x2f9797(0x2c3)+_0x2f9797(0x279)+_0x2f9797(0x1dc)+_0x2f9797(0x39d)+_0x2f9797(0x247)+_0x2f9797(0x379)+'knotify\x20gp'+_0x2f9797(0x357)+_0x2f9797(0x28a));return;}let _0xf1a12f=[];const _0x56977d=_0x2e87ac[_0x2f9797(0x3e8)]();if(_0x56977d[_0x2f9797(0x1cc)+'e']()===_0x2f9797(0x2e1))_0xf1a12f=await _0x4c376c['getUniqueJ'+'ids']();else{const _0x9710fa=await _0x4c376c[_0x2f9797(0x38b)+'e'](_0x56977d);if(_0x9710fa)_0xf1a12f=[_0x9710fa];else{if(_0x56977d[_0x2f9797(0x3f5)]('@'))_0xf1a12f=[_0x4c376c[_0x2f9797(0x3ff)+'oUserJid'](_0x56977d)];else{await sendText(_0x40d9f3,'❌\x20Unknown\x20'+_0x2f9797(0x2e4)+_0x2f9797(0x2f5)+_0x56977d+'\x22.');return;}}}if(!_0x1daf87){const _0x4564b9=[];for(const _0x5e1c78 of uniqArray(_0xf1a12f)){const _0x8717d8=await getLockNotify(_0x5e1c78)[_0x2f9797(0x252)](()=>-0x1*0xd73+-0x908+-0x47f*-0x5);_0x4564b9[_0x2f9797(0x1f2)](_0x5e1c78+':\x20'+(_0x8717d8?'ON':'OFF'));}await sendText(_0x40d9f3,_0x2f9797(0x370)+'ocknotify\x20'+'status:\x0a'+_0x4564b9[_0x2f9797(0x3c0)]('\x0a'));return;}let _0x1a90fe=0xda6*0x2+-0x1*-0x1295+-0x2de1;for(const _0x559819 of uniqArray(_0xf1a12f)){const _0x1dabe7=await setLockNotify(_0x559819,_0x1daf87==='on');if(_0x1dabe7)_0x1a90fe++;}await sendText(_0x40d9f3,_0x2f9797(0x3fb)+_0x2f9797(0x1dd)+_0x1daf87+_0x2f9797(0x396)+_0x1a90fe+'/'+_0xf1a12f['length']+(_0x2f9797(0x1f5)+'.'));return;}return;}if(_0x37372e){if(!_0x19299a)return;const _0x282c4f=_0x2d5f4b,_0x3d1cd4=await getDefault(_0x2462f6)[_0x2f9797(0x252)](()=>null);if(!_0x3d1cd4||Array[_0x2f9797(0x3ce)](_0x3d1cd4)&&_0x3d1cd4['length']===-0x1b3b+-0xe94+0x29cf)return;const _0x3b5d06=Array[_0x2f9797(0x3ce)](_0x3d1cd4)?_0x3d1cd4:[_0x3d1cd4];let _0x279569=[];for(const _0x4247a5 of _0x3b5d06){try{const _0x3022be=await getConnection(_0x4247a5)[_0x2f9797(0x252)](()=>null);if(Array[_0x2f9797(0x3ce)](_0x3022be))_0x279569[_0x2f9797(0x1f2)](..._0x3022be);else{if(_0x3022be)_0x279569['push'](String(_0x3022be));}}catch(_0xa6d137){warn(_0x2f9797(0x28c)+_0x2f9797(0x31c)+'nection\x20'+_0x4247a5+_0x2f9797(0x22c)+(_0xa6d137?.[_0x2f9797(0x24f)]||_0xa6d137));}}_0x279569=uniqArray(_0x279569);if(!_0x279569[_0x2f9797(0x355)]){await sendText(_0x282c4f,_0x2f9797(0x1e1)+_0x2f9797(0x3c6)+_0x2f9797(0x213)+_0x2f9797(0x223)+'ion(s):\x20'+_0x3b5d06[_0x2f9797(0x3c0)](',\x20')+(_0x2f9797(0x26b)+_0x2f9797(0x33b)+'efault\x20val'+_0x2f9797(0x26a)));return;}if(_0x40a1b3===_0x2f9797(0x2dd)){const {triggers:_0xa2c28f}=parseLockCommandOneLine(_0x403108||_0x28cb09);if(!_0xa2c28f[_0x2f9797(0x355)]){await sendText(_0x282c4f,_0x2f9797(0x3ef)+_0x2f9797(0x219)+_0x2f9797(0x2c1)+_0x2f9797(0x400)+_0x2f9797(0x33e));return;}let _0x3946c7=0x8ef+0x1052+-0xf*0x1af;for(const _0x3993aa of _0x279569){let _0x2cfc5f=0x5a*0x21+0x917+0x1*-0x14b1;for(const _0x4c9c72 of _0xa2c28f){const _0x2c5f08=await addLock(_0x3993aa,_0x4c9c72,_0x383061);if(_0x2c5f08)_0x2cfc5f++;}_0x3946c7+=_0x2cfc5f;}await sendText(_0x282c4f,_0x2f9797(0x342)+_0x3946c7+'/'+_0xa2c28f[_0x2f9797(0x355)]*_0x279569['length']+('\x20lock\x20entr'+'ies\x20to\x20you'+'r\x20default\x20'+_0x2f9797(0x256)+'(s):\x20')+_0x279569[_0x2f9797(0x3c0)](',\x20'));return;}if(_0x40a1b3===_0x2f9797(0x314)){const _0x4fb565=[];for(const _0x54f337 of _0x279569){const _0x1657b4=await listLocksForChat(_0x54f337);for(const _0x19f5c7 of _0x1657b4)_0x4fb565[_0x2f9797(0x1f2)]({'chatJid':_0x54f337,..._0x19f5c7});}await sendText(_0x282c4f,_0x2f9797(0x370)+_0x2f9797(0x1fc)+_0x4fb565['length']+(_0x2f9797(0x3f1)+_0x2f9797(0x1fb)+_0x2f9797(0x271)+'tion(s):\x20')+_0x279569[_0x2f9797(0x3c0)](',\x20'));if(!_0x4fb565['length'])return;let _0x210578='';for(const _0x298e51 of _0x4fb565){const _0x4e3da9=_0x298e51['created_at']?new Date(_0x298e51['created_at']*(0x3*0x8d6+0xb87*-0x3+0xbfb*0x1))[_0x2f9797(0x329)+'g']()[_0x2f9797(0x225)](0x5fc*-0x1+-0xb*-0x35+0x3b5,0x17*-0x7b+-0x19b9+0x24d0):'',_0x16ffaa=_0x298e51[_0x2f9797(0x32c)]===_0x2f9797(0x3ca)?'⦿':_0x298e51[_0x2f9797(0x32c)]===_0x2f9797(0x2d1)?'✶':'',_0x1ef3e4=_0x298e51[_0x2f9797(0x32c)]===_0x2f9797(0x3ca)?_0x2f9797(0x251)+_0x298e51['phrase']:_0x298e51[_0x2f9797(0x262)],_0x4251a7=_0x298e51[_0x2f9797(0x32c)]===_0x2f9797(0x3ca)&&_0x298e51[_0x2f9797(0x24c)+_0x2f9797(0x330)]===0x2*0x5a9+0x4*-0x945+-0x13a*-0x15?_0x2f9797(0x2eb)+'REGEX)':'',_0x3712cf=_0x298e51[_0x2f9797(0x21b)]+':'+_0x298e51['id']+'.\x20'+(_0x16ffaa?_0x16ffaa+'\x20':'')+_0x1ef3e4+_0x4251a7+'\x20'+(_0x4e3da9?'('+_0x4e3da9+')':'')+'\x0a';(_0x210578+_0x3712cf)['length']>0x1635+0x15e1*0x1+-0x263a&&(await sendText(_0x282c4f,_0x210578[_0x2f9797(0x3e8)]()),_0x210578=''),_0x210578+=_0x3712cf;}if(_0x210578[_0x2f9797(0x3e8)]())await sendText(_0x282c4f,_0x210578[_0x2f9797(0x3e8)]());return;}if([_0x2f9797(0x308),_0x2f9797(0x3b6),'delock',_0x2f9797(0x3f3),_0x2f9797(0x369)]['includes'](_0x40a1b3)){const {parts:_0x4c7c52}=parseUnlockCommandOneLine(_0x403108||_0x28cb09);if(!_0x4c7c52?.[_0x2f9797(0x355)]){await sendText(_0x282c4f,_0x2f9797(0x3ef)+'roup-only)'+':\x20unlock\x201'+_0x2f9797(0x37d)+_0x2f9797(0x224)+_0x2f9797(0x28e));return;}const _0x1461bb=new Map();for(const _0x3a3d92 of _0x279569){const _0x4244db=await listLocksForChat(_0x3a3d92);_0x1461bb[_0x2f9797(0x206)](_0x3a3d92,_0x4244db||[]);}let _0x11327f=0x20*-0x130+-0xbed*-0x1+0x1a13;for(const _0x2d33cc of _0x4c7c52){if(!_0x2d33cc)continue;if(/^\d+$/[_0x2f9797(0x3ae)](_0x2d33cc)){for(const [_0x236010,_0x5067fb]of _0x1461bb[_0x2f9797(0x3cc)]()){if(_0x5067fb['find'](_0x35e9ae=>String(_0x35e9ae['id'])===_0x2d33cc)){const _0x2403fb=await deleteLockById(_0x236010,_0x2d33cc);if(_0x2403fb)_0x11327f+=_0x2403fb;}}continue;}for(const _0x2419a2 of _0x279569){const _0x44bdbe=await deleteLockByPhrase(_0x2419a2,_0x2d33cc);if(_0x44bdbe)_0x11327f+=_0x44bdbe;}}await sendText(_0x282c4f,_0x2f9797(0x1c6)+_0x11327f+'/'+_0x4c7c52[_0x2f9797(0x355)]+('\x20lock(s)\x20f'+'rom\x20your\x20d'+_0x2f9797(0x3e6)+'nection(s)'+':\x20')+_0x279569[_0x2f9797(0x3c0)](',\x20'));return;}if(_0x40a1b3===_0x2f9797(0x1e7)||_0x40a1b3==='delall'||_0x40a1b3===_0x2f9797(0x37a)){try{let _0x255064=0x212c+-0x40a*-0x6+-0x3968;for(const _0x4cc927 of _0x279569){const _0x29a09a=await deleteAllLocksForChat(_0x4cc927);_0x255064+=_0x29a09a||-0xc*0x4f+-0x1cee+0x20a2;}await sendText(_0x282c4f,_0x2f9797(0x1c6)+_0x255064+(_0x2f9797(0x28d)+'rom\x20your\x20d'+_0x2f9797(0x3e6)+_0x2f9797(0x3bb)+':\x20')+_0x279569[_0x2f9797(0x3c0)](',\x20'));}catch(_0x24a819){warn(_0x2f9797(0x3a2)+_0x2f9797(0x24d)+_0x2f9797(0x205)+_0x279569['join'](',\x20')+':\x20'+(_0x24a819?.[_0x2f9797(0x24f)]||_0x24a819)),await sendText(_0x282c4f,_0x2f9797(0x265)+_0x2f9797(0x36f)+'ocks\x20for\x20y'+_0x2f9797(0x35d)+'t\x20connecti'+'on(s):\x20'+_0x279569[_0x2f9797(0x3c0)](',\x20'));}return;}if(_0x40a1b3===_0x2f9797(0x401)){const _0x293b85=(_0x403108||_0x28cb09||'')['split'](/\r?\n/)[0x1d7c*-0x1+0x6d9+0x16a3][_0x2f9797(0x3e8)](),{left:_0xac97b0}=splitRestForGp(_0x293b85['replace'](/^\/?locknotify\b/i,'')[_0x2f9797(0x3e8)]()),_0x5b56bb=(_0xac97b0||'')[_0x2f9797(0x1cc)+'e']();if(!_0x5b56bb[_0x2f9797(0x3f5)]('on')&&!_0x5b56bb[_0x2f9797(0x3f5)](_0x2f9797(0x37b))){await sendText(_0x282c4f,_0x2f9797(0x3ef)+_0x2f9797(0x219)+_0x2f9797(0x20a)+_0x2f9797(0x277)+_0x2f9797(0x3d9)+_0x2f9797(0x3a0)+_0x2f9797(0x26d)+_0x2f9797(0x2ed)+_0x2f9797(0x37f)+'onnection('+_0x2f9797(0x38a));return;}const _0x3cc6df=_0x5b56bb[_0x2f9797(0x3f5)]('on')?'on':_0x2f9797(0x37b);let _0x380cc2=-0x3b7+-0x55*0x5b+0x56*0x65;for(const _0x43ec91 of _0x279569){const _0x4737f7=await setLockNotify(_0x43ec91,_0x3cc6df==='on');if(_0x4737f7)_0x380cc2++;}await sendText(_0x282c4f,_0x2f9797(0x3fb)+_0x2f9797(0x1dd)+_0x3cc6df+'\x20set\x20for\x20'+_0x380cc2+'/'+_0x279569[_0x2f9797(0x355)]+(_0x2f9797(0x3e9)+_0x2f9797(0x38e)+_0x2f9797(0x38a)));return;}return;}}if(_0x37372e){if(!CFG[_0x2f9797(0x2a2)+_0x2f9797(0x2ac)])return;if(_0x56f03c[_0x2f9797(0x2c0)][_0x2f9797(0x1f8)])return;if(_0x19299a)return;const _0x4353db=_0x2d5f4b,_0x9d3b60=extractTextFromMessage(_0x56f03c);if(!_0x9d3b60)return;const _0x45c88e=normalizeForMatch(String(_0x9d3b60||''))[_0x2f9797(0x1cc)+'e'](),_0x376177=await listLocksForChat(_0x4353db);if(!_0x376177||!_0x376177[_0x2f9797(0x355)])return;const _0x5d4a31=_0x376177['filter'](_0x1a0387=>!_0x1a0387[_0x2f9797(0x32c)]||_0x1a0387[_0x2f9797(0x32c)]==='normal'),_0x241ff6=_0x376177[_0x2f9797(0x214)](_0x9660c0=>_0x9660c0[_0x2f9797(0x32c)]===_0x2f9797(0x2d1)),_0x1783de=_0x376177[_0x2f9797(0x214)](_0x1671e4=>_0x1671e4[_0x2f9797(0x32c)]==='regex'||_0x1671e4['type']===_0x2f9797(0x313)+_0x2f9797(0x293)),_0x41c25b=new Set(),_0x49d912=new Set();if(_0x5d4a31[_0x2f9797(0x355)]>-0x21*-0x1b+0x3f4+0xad*-0xb){const _0x2c01d2=_0x5d4a31[_0x2f9797(0x1e2)](_0x103ad3=>normalizeForMatch(String(_0x103ad3['phrase']||'')))[_0x2f9797(0x214)](Boolean),_0x13e90b=_0x2c01d2['join']('\x00');let _0x337672;const _0xac291b=ahoCache[_0x2f9797(0x3c7)](_0x4353db);if(_0xac291b&&_0xac291b['serialized'+'Keywords']===_0x13e90b&&_0xac291b[_0x2f9797(0x31d)])_0x337672=_0xac291b[_0x2f9797(0x31d)];else try{_0x337672=new AhoCorasick(_0x2c01d2),ahoCache[_0x2f9797(0x206)](_0x4353db,{'serializedKeywords':_0x13e90b,'aho':_0x337672});}catch(_0x1e40b5){warn(_0x2f9797(0x1ce)+_0x2f9797(0x375)+_0x2f9797(0x30b)+_0x2f9797(0x359)+_0x4353db+':\x20'+(_0x1e40b5?.['message']||_0x1e40b5)),_0x337672=null;}if(_0x337672)try{const _0x227610=_0x337672['search'](_0x45c88e);for(const _0x50ad55 of _0x227610){const _0x516e10=_0x50ad55['keyword'],_0x64c7d7=_0x50ad55['index'],_0x22143e=_0x64c7d7+_0x516e10['length'],_0x500859=_0x64c7d7===-0x1d1d+0x188+0x1b95||!/\w/[_0x2f9797(0x3ae)](_0x45c88e[_0x64c7d7-(0x99*0x3f+-0x19de+-0xbc8)]),_0x1696f2=_0x22143e===_0x45c88e[_0x2f9797(0x355)]||!/\w/['test'](_0x45c88e[_0x22143e]);if(_0x500859&&_0x1696f2)for(const _0x135d11 of _0x5d4a31){const _0x16f177=normalizeForMatch(String(_0x135d11[_0x2f9797(0x262)]||''));if(_0x16f177===_0x516e10)try{const _0x481b23=wholeWordRegexForPhrase(_0x16f177);_0x481b23[_0x2f9797(0x3ae)](_0x45c88e)&&(_0x41c25b[_0x2f9797(0x373)](_0x135d11['id']),_0x49d912['add'](_0x135d11['phrase']));}catch(_0xcd39cc){_0x41c25b[_0x2f9797(0x373)](_0x135d11['id']),_0x49d912[_0x2f9797(0x373)](_0x135d11[_0x2f9797(0x262)]);}}else for(const _0xa99be2 of _0x5d4a31){try{const _0x1a0b0c=wholeWordRegexForPhrase(normalizeForMatch(String(_0xa99be2[_0x2f9797(0x262)]||'')));_0x1a0b0c[_0x2f9797(0x3ae)](_0x45c88e)&&(_0x41c25b[_0x2f9797(0x373)](_0xa99be2['id']),_0x49d912[_0x2f9797(0x373)](_0xa99be2[_0x2f9797(0x262)]));}catch(_0x2d256){}}}}catch(_0x389fee){warn(_0x2f9797(0x1ce)+_0x2f9797(0x27b)+_0x2f9797(0x327)+_0x2f9797(0x39f)+(_0x389fee?.[_0x2f9797(0x24f)]||_0x389fee));for(const _0x811162 of _0x5d4a31){try{const _0x46fd5f=wholeWordRegexForPhrase(normalizeForMatch(String(_0x811162[_0x2f9797(0x262)]||'')));_0x46fd5f['test'](_0x45c88e)&&(_0x41c25b[_0x2f9797(0x373)](_0x811162['id']),_0x49d912['add'](_0x811162[_0x2f9797(0x262)]));}catch(_0x5d020b){}}}else for(const _0x457e99 of _0x5d4a31){try{const _0xc4b04e=wholeWordRegexForPhrase(normalizeForMatch(String(_0x457e99[_0x2f9797(0x262)]||'')));_0xc4b04e[_0x2f9797(0x3ae)](_0x45c88e)&&(_0x41c25b['add'](_0x457e99['id']),_0x49d912[_0x2f9797(0x373)](_0x457e99[_0x2f9797(0x262)]));}catch(_0x56d082){}}}if(_0x241ff6['length']>-0x20bd+0xba6*0x3+-0x235)for(const _0x583066 of _0x241ff6){try{const _0x44eac5=wildcardToRegex(String(_0x583066[_0x2f9797(0x262)]||''));_0x44eac5[_0x2f9797(0x3ae)](_0x45c88e)&&(_0x41c25b[_0x2f9797(0x373)](_0x583066['id']),_0x49d912[_0x2f9797(0x373)](_0x583066[_0x2f9797(0x262)]));}catch(_0x8d7862){warn(_0x2f9797(0x366)+_0x2f9797(0x378)+_0x2f9797(0x306)+'='+_0x583066['id']+_0x2f9797(0x275)+_0x583066[_0x2f9797(0x262)]+_0x2f9797(0x3bc)+(_0x8d7862?.[_0x2f9797(0x24f)]||_0x8d7862));}}if(_0x1783de[_0x2f9797(0x355)]>-0x4*0x676+-0x59*0x64+0x3c9c)for(const _0xe8746d of _0x1783de){try{if(_0xe8746d[_0x2f9797(0x24c)+_0x2f9797(0x330)]===-0x23e7+0x963+0x1*0x1a84){warn('[lock]\x20ski'+'pping\x20inva'+_0x2f9797(0x323)+_0x2f9797(0x2da)+_0xe8746d['id']+_0x2f9797(0x275)+_0xe8746d[_0x2f9797(0x262)]+'\x22');continue;}const _0x228159=new RegExp(_0xe8746d[_0x2f9797(0x262)],'iu');_0x228159[_0x2f9797(0x3ae)](_0x45c88e)&&(_0x41c25b[_0x2f9797(0x373)](_0xe8746d['id']),_0x49d912[_0x2f9797(0x373)](_0x2f9797(0x251)+_0xe8746d[_0x2f9797(0x262)]));}catch(_0x5e38d7){warn(_0x2f9797(0x366)+_0x2f9797(0x333)+_0x2f9797(0x204)+'r\x20id='+_0xe8746d['id']+_0x2f9797(0x275)+_0xe8746d['phrase']+_0x2f9797(0x3bc)+(_0x5e38d7?.['message']||_0x5e38d7));try{await db[_0x2f9797(0x399)](_0x2f9797(0x2b9)+_0x2f9797(0x23d)+_0x2f9797(0x260)+_0x2f9797(0x240)+_0x2f9797(0x1c9),[_0xe8746d['id']]);}catch(_0x3593f0){}}}if(_0x41c25b['size']>-0xe49+0x13d6+0x31*-0x1d)try{try{const _0x18ddd6=await getLockNotify(_0x4353db)[_0x2f9797(0x252)](()=>0x1*-0x24b9+0x1877*-0x1+0x10*0x3d3);if(_0x18ddd6)try{const _0x4ec7b0=await db[_0x2f9797(0x3c7)](_0x2f9797(0x2e6)+_0x2f9797(0x201)+_0x2f9797(0x1cb)+_0x2f9797(0x35b)+_0x2f9797(0x2b5)+_0x2f9797(0x264));let _0x4545cd=_0x4ec7b0?.[_0x2f9797(0x2d8)]||null;if(!_0x4545cd){const _0x4bdded=getBotJid();_0x4545cd=_0x4bdded||null;}if(_0x4545cd){const _0x4e26b1=Array[_0x2f9797(0x229)](_0x49d912)['slice'](-0x2409+0x2226+0x1e3,0x127*-0x11+-0x11b*-0x15+-0x39a)[_0x2f9797(0x3c0)](',\x20'),_0x1d95e8=_0x2462f6||String(_0x383061||'')[_0x2f9797(0x2b6)]('@')[-0x11ba+-0x8de*0x1+-0x1a98*-0x1]||'unknown',_0x1390da=String(_0x9d3b60||'')['trim'](),_0x453d11=_0x2f9797(0x211)+_0x2f9797(0x3d1)+_0x4353db+_0x2f9797(0x38d)+_0x1d95e8+_0x2f9797(0x326)+_0x4e26b1+'\x0aMessage:\x0a'+_0x1390da;await sendText(_0x4545cd,_0x453d11,_0x383061?[_0x383061]:[]);}}catch(_0xaa9d75){warn('[lock]\x20fai'+_0x2f9797(0x3bd)+_0x2f9797(0x294)+_0x2f9797(0x25b)+':\x20'+(_0xaa9d75?.['message']||_0xaa9d75));}}catch(_0xeab2e6){warn(_0x2f9797(0x1e5)+_0x2f9797(0x3d4)+_0x2f9797(0x367)+':\x20'+(_0xeab2e6?.['message']||_0xeab2e6));}enqueueDeletion(_0x56f03c);for(const _0x2b522a of _0x41c25b){try{await db[_0x2f9797(0x399)](_0x2f9797(0x2b9)+_0x2f9797(0x2c8)+_0x2f9797(0x2d9)+'it_count\x20+'+_0x2f9797(0x2bb)+'d\x20=\x20?',[_0x2b522a]);}catch(_0x469f71){}}}catch(_0x23f9f3){warn(_0x2f9797(0x387)+_0x2f9797(0x3e4)+_0x2f9797(0x2fc)+(_0x23f9f3?.[_0x2f9797(0x24f)]||_0x23f9f3));}}}catch(_0x3bd2d5){error(_0x3bd2d5,_0x2f9797(0x1da)+_0x2f9797(0x2cd)+':\x20'+(_0x3bd2d5?.[_0x2f9797(0x24f)]||_0x3bd2d5));}}export async function cleanup(){const _0x523baf=_0x564249;shuttingDown=!![];for(const _0x308cbd of processedMessageKeys['values']())try{clearTimeout(_0x308cbd);}catch(_0x45b362){}processedMessageKeys[_0x523baf(0x1fe)](),perChatQueue[_0x523baf(0x1fe)](),perChatProcessing[_0x523baf(0x1fe)](),activeChats=0x148+0x59*-0x1c+-0x2*-0x43a,botRef=null,sendApi=null,ahoCache[_0x523baf(0x1fe)](),info('[lock]\x20cle'+_0x523baf(0x320));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};