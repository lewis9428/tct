const _0x554c8d=_0x1a26;(function(_0x2e4917,_0xe0bd59){const _0x34cd4f=_0x1a26,_0x27c0fe=_0x2e4917();while(!![]){try{const _0x35ac52=-parseInt(_0x34cd4f(0x174))/(-0x23ed+-0x15ab+-0x3*-0x1333)*(-parseInt(_0x34cd4f(0x1ae))/(-0xe72+0x647+0x82d))+-parseInt(_0x34cd4f(0x178))/(0x26*-0x23+0x1*-0x1e83+-0x7f*-0x48)*(-parseInt(_0x34cd4f(0x300))/(0x14bd*-0x1+0x8c4*-0x4+0x37d1))+-parseInt(_0x34cd4f(0x31e))/(0x4f+0x6d*-0x59+-0x1*-0x259b)+parseInt(_0x34cd4f(0x268))/(0xb*0x15e+0x25c8+-0x34cc)*(parseInt(_0x34cd4f(0x2e8))/(-0x1b2b+-0x1*0x1070+0x5*0x8ba))+parseInt(_0x34cd4f(0x1f3))/(0x4e9*-0x2+-0x15f0+-0x1fca*-0x1)+-parseInt(_0x34cd4f(0x31d))/(0x4*0x3e6+0x44*-0x1f+0x7d*-0xf)+parseInt(_0x34cd4f(0x1ec))/(-0x16a0+-0x579*-0x6+-0xa2c)*(-parseInt(_0x34cd4f(0x34b))/(0x2100+-0x13*0x9c+-0x1561));if(_0x35ac52===_0xe0bd59)break;else _0x27c0fe['push'](_0x27c0fe['shift']());}catch(_0xc50739){_0x27c0fe['push'](_0x27c0fe['shift']());}}}(_0x4a0a,-0x3*0x3dc43+-0x9a7df+-0xfd85*-0x1d));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x5f4f20 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='lock';export const version=_0x554c8d(0x3a8);export const priority=0x24e5+-0x713*-0x4+0x15*-0x315;export const configKeys=['LOCKS'];export const commands=[_0x554c8d(0x29f),'unlock',_0x554c8d(0x3ab),_0x554c8d(0x323),'delock',_0x554c8d(0x267),_0x554c8d(0x24a),_0x554c8d(0x39f),'locknotify'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x554c8d(0x33e)+'that\x20word\x20'+_0x554c8d(0x227)+_0x554c8d(0x21a),'WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x162b8f){const _0xe5c32a=_0x554c8d;if(!_0x162b8f)return[];const _0x10a9e8=new Set(),_0x101638=[];for(const _0x3cf927 of _0x162b8f){const _0x12a6b2=_0x3cf927===undefined||_0x3cf927===null?'':String(_0x3cf927)['trim']();if(!_0x12a6b2)continue;!_0x10a9e8[_0xe5c32a(0x1f1)](_0x12a6b2)&&(_0x10a9e8[_0xe5c32a(0x1f5)](_0x12a6b2),_0x101638['push'](_0x12a6b2));}return _0x101638;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0xafa*-0x2+-0x1d*0x135+0x823*0x7,shuttingDown=![];function _0x1a26(_0x31b681,_0x592fb5){const _0x5e666c=_0x4a0a();return _0x1a26=function(_0x179e47,_0x5cb868){_0x179e47=_0x179e47-(-0xe*-0xd3+-0x1ca3+0x1287);let _0x52396d=_0x5e666c[_0x179e47];return _0x52396d;},_0x1a26(_0x31b681,_0x592fb5);}const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(0x25f8+-0x1*-0x2126+-0xd3*0x56)*(-0x6eb+-0x1aff*0x1+-0x5e*-0x67);function markProcessed(_0x580e04){const _0x8a7ed7=_0x554c8d;if(!_0x580e04)return;if(processedMessageKeys[_0x8a7ed7(0x1f1)](_0x580e04))try{clearTimeout(processedMessageKeys[_0x8a7ed7(0x342)](_0x580e04));}catch(_0x5c1d9b){}const _0x34f472=setTimeout(()=>processedMessageKeys['delete'](_0x580e04),DEDUPE_TTL_MS);processedMessageKeys[_0x8a7ed7(0x335)](_0x580e04,_0x34f472);}function isProcessed(_0x520043){return _0x520043&&processedMessageKeys['has'](_0x520043);}const sleep=_0x26a743=>new Promise(_0x35ad76=>setTimeout(_0x35ad76,_0x26a743));function nowSec(){const _0x461d5b=_0x554c8d;return Math[_0x461d5b(0x33d)](Date[_0x461d5b(0x17b)]()/(-0xb34+-0x22e+0x114a));}function escapeRegex(_0x3a7283){const _0x303fb7=_0x554c8d;return String(_0x3a7283||'')[_0x303fb7(0x338)](/[.*+?^${}()|[\]\\]/g,_0x303fb7(0x370));}function normalizeForMatch(_0x582792){const _0x2189c0=_0x554c8d;let _0x46d489=String(_0x582792||'');try{_0x46d489=_0x46d489['normalize'](_0x2189c0(0x19b));}catch(_0x73a9a9){}if(CFG['NORMALIZE_'+_0x2189c0(0x2ec)+'CRITICS'])try{_0x46d489=_0x46d489[_0x2189c0(0x1ac)]('NFD')[_0x2189c0(0x338)](/\p{M}/gu,'')['normalize']('NFKC');}catch(_0x3c6787){}return _0x46d489['toLowerCas'+'e']();}function _0x4a0a(){const _0x13c8d9=['_by,\x20creat','ult\x20connec','E\x20id\x20=\x20?','map',',2\x20OR\x20unlo','caption','includes','\x20hit_count','\x20id\x20=\x20?','jid|all>','TEXT\x20NOT\x20N','L_MS','type','toISOStrin','alid\x20store','gger2>\x20gp:','hat_jid\x20TE','onnection(','author','mns)','\x20WHERE\x20cha','\x20phrase,\x20t','[lock]\x20tab','dApi\x20not\x20a','10156270YzZeYs','ks_new\x20(\x0a\x20','resolveNam','\x0aMatched:\x20','\x5cp{N}_])','has','y,\x0a\x20\x20\x20\x20\x20\x20\x20','485736BvcBhT','d_regex\x20co','add','TEXT\x20DEFAU',',\x0a\x20\x20','O\x20locks_ne','WARNING_TT','our\x20defaul','\x20(?,\x20?,\x20?,','nodes','chFromFind','exec','nstance','notify','timestamp','gex','This\x20toggl','s).','O\x20lock_pre','as\x20fallbac','s\x20for\x20your','SELECT\x20id,','fromMe','tatus:\x20loc','Keywords','alidation\x20','\x20(INVALID\x20','\x201\x20WHERE\x20i','d,\x20phrase)','\x20phrase)\x0a\x20','connection','regex\x20colu','\x200,\x0a\x20\x20\x20\x20\x20\x20','_valid_reg','o\x20delete\x20l','cks_unique','SELECT\x20val','\x20failed\x20fo','\x20failed:\x20','owed.','❌\x20Usage\x20(g','[lock]\x20ski','ount\x20INTEG','✔️\x20Deleted\x20','d\x20TEXT\x20NOT','nsert\x20fail','✔️\x20Locknoti',':\x20unlock\x20<','Lock\x20fallb','rforming\x20s','x\x20=\x201\x20WHER','locks','is\x20not\x20all','min','❌\x20Could\x20no','ry\x20failed:','your\x20defau','rom\x20your\x20d','ies\x20to\x20you','INTEGER\x20DE','DATE\x20SET\x20n','unlock\x201,2','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','ue\x20FROM\x20de','Wildcard\x20m','name','[lock]\x20add','\x20regex\x20id=',')\x20VALUES\x20(','alid\x20wildc','phrase',':\x20lock\x20<tr','cted\x20->\x20pe','ROM\x20locks','tLocksForC','ite_master','build','from','phrase);','ude\x20gp\x20in\x20','ard\x20for\x20id','[lock]\x20unl','chatid','plete;\x20old','_count,\x20is','up_','eue\x20fail:\x20','delall','ULL','led\x20for\x20','invalid_re','=\x20ON;','ttonId',':\x20unlockal',',\x20?,\x20?,\x20?,','ded\x20for\x20re','lid_regex;','=\x20excluded','BATCH_DELA','LT\x20\x27normal','is_valid_r','ion','d_at\x20=\x20exc','QUE\x20INDEX\x20','IMARY\x20KEY\x20','LOCKS','efault\x20con','CONFLICT\x20i','[lock]\x20Mat','egex','ble','output','✔️\x20[lock]\x20','quested\x20ta','\x20gp:<alias','\x20WHERE\x20typ','unlocklock','6RYNOkF','ces\x20&\x20colu','dText\x20fail','k_prefs\x20(c','status:\x0a','[lock]\x20fin','_new\x20witho','gex\x20INTEGE','DELETE\x20FRO','aho','gex\x20=\x20excl','AND\x20name=?','[lock]\x20mig','prepare','\x27invalid_r','INSERT\x20INT','ires\x20bot\x20i','delock','cks\x20table','Lock\x20faile','eteAllLock','created_by','led:\x20','roup-only)','trim','EXISTS\x20loc','dler\x20error','\x20\x20\x20\x20\x20hit_c','filter','[lock]\x20pro','imageMessa','\x20NULL,\x0a\x20\x20\x20',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ock_prefs\x20','R\x20DEFAULT\x20','jid)\x20DO\x20UP','?,\x20created','lock','O\x20locks\x20(c','[lock]\x20han','ings\x20error','se,comma-s','\x20\x20\x20ON\x20CONF','ated_at,\x20h','\x22:\x20','match','values','DEFAULT_EN','\x20\x20\x20\x20\x20\x20\x20id\x20','egex\x20FROM\x20','SELECT\x20not','fy\x20INTEGER','d\x20regex\x20fo','e\x20TEXT\x20NOT','y\x20TEXT\x20DEF','listlock','OR\x20type\x20=\x20','[lock]\x20set','[lock]\x20Aho','e,\x20created','ify;','STS\x20idx_lo','keys','\x20);','dWarning:\x20','E\x20locks_ne','uild\x20faile','ks\x20SET\x20hit','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','?,\x20?,\x200,\x20?','(?,\x20?,\x20?,\x20','chat_jid','WARNING_ME','w\x20(chat_ji','[lock]\x20leg','ias','LICT(chat_','valid_rege','buttonsRes','@g.us','nection\x20','extendedTe','gLocks\x20fai','olving\x20con','ify\x20FROM\x20l','amed\x20to\x20ba','CREATE\x20IND','ype,\x20creat','le_info(','HERE\x20type\x20','tion(s):\x20','D\x20COLUMN\x20i','\x20=\x20\x27target','hit_count','ER\x20DEFAULT','creator','\x20locks\x20loa','REGEX)','ion(s):\x20','changes','on(s):\x20','CREATE\x20UNI','\x20set\x20for\x20',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[lock]\x20con','id-or-phra','off','NAME\x20TO\x20','egex\x27','endsWith',',\x20valid=','t\x20connecti','keyword',',\x20is_valid','\x20lock\x20entr','\x20\x20\x20\x20\x20\x20\x20cre','ated_by,\x20c','id\x20=\x20?\x20AND','startsWith','uded.is_va','❌\x20PM:\x20incl','\x20\x20\x20\x20\x20type\x20','eign_keys\x20','test','ks\x20SET\x20typ','es\x20lock\x20no','tialize\x20fa','split','3699542FWzdbG','INTEGER\x20PR','EX\x20IF\x20NOT\x20','LockNotify','REMOVE_DIA','\x20DO\x20UPDATE','selectedBu','ex)\x20VALUES','nection(s)','ABLED','PER_CHAT_Q',':\x20listlock','ut\x20UNIQUE\x20','ponseMessa','key','created_at','eteWithRet','LUES\x20(?,\x20?','[lock]\x20ini','ack\x20failed','mentions','isCommand','fatal','for\x20','8272FFxGRL','[lock]\x20get','\x20default\x20c','provided:\x20','text','line\x20usage','search','✔️\x20[lock]\x20l','GLOBAL_CON','DB\x20ensured','fail','lock.initi','ex)\x0a\x20\x20\x20\x20\x20\x20','E\x20chat_jid','s|jid|all>','\x20lock(s).','<alias|jid','pop','\x20type,\x20cre','string','fig\x20load\x20f','[lock]\x20sen','PRAGMA\x20tab','ration\x20com','\x20phrase=\x22','tialized\x20(','\x20\x20\x20\x20\x20);','fy\x20','it_count,\x20','3543777yuPVOz','480235blJHYk','ocknotify\x20','function','p{N}_])','same\x20line.','dellock','push','\x20(type=','wildcard','r:\x20','fs\x20(chat_j','locks\x20WHER','d.type,\x0a\x20\x20','UEUE_LIMIT','=\x20OFF;','\x20\x20\x20\x20UNIQUE','_regex)\x20VA','phrase\x20=\x20?','conversati','ckup','vailable','ue(s).','delete','set','\x20is_valid_','isArray','replace','ine\x20usage:','lt\x20connect','[lock]\x20inv','\x20for\x20','floor','⚠️\x20{user},\x20','acy\x20locks\x20','splice','_at\x20=\x20?,\x20i','get','IF\x20NOT\x20EXI','\x20\x20is_valid','run','\x20@\x20','ureSchema\x20','user','[lock]\x20fai','ENT','11sfjoai','ns\x20error\x20f','word','.\x20Please\x20c','EGER\x20DEFAU','[lock]\x20res','AULT\x20\x27\x27,\x0a\x20','ids','_jid\x20=\x20?','cessChatQu','\x20?,\x20?)','ENT,\x0a\x20\x20\x20\x20\x20','d\x20=\x20?','serialized','reated_at,','=\x20\x27regex\x27\x20','d\x20for\x20','gger1,trig','getUniqueJ','igger1,tri','tal','knotify\x20gp','CURRENCY','locknotify','\x20DEFAULT\x20c',':\x20locknoti','t\x20ON\x20locks','unlock','join','chatJid','oUserJid','remoteJid','unknown','_count\x20=\x20h','\x20\x20\x20chat_ji','hat_jid,\x20p','pping\x20inva','\x5c$&','nonical)','ockall\x20fai','ated_at\x20IN','it_count\x20+','ration\x20swa','ULT\x200,\x0a\x20\x20\x20','hrase\x20erro','TEGER\x20DEFA','eparated>\x20','slice','}_]*','CRITICS','max','sendMessag','catch','ed\x20is_vali','hat\x20error\x20','lready\x20can','❌\x20PM:\x20one-','gp\x20alias/j','mn:\x20','ed\x20(fallba','chat','[lock]\x20cle','\x20KEY,\x20noti','\x20\x20\x20\x20\x20);\x0a\x20\x20','ERE\x20id\x20=\x20?','\x20failed','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','normal','XT\x20PRIMARY','oaded\x20','s_valid_re','clear','LT\x201,\x0a\x20\x20\x20\x20','participan','n\x20characte','jid','leExists\x20e','cluded.not','FROM\x20locks','[lock]\x20lis','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sured\x20indi','value','SELECT\x20*\x20F','clearlocks','dmin\x20check','ch\x20in\x20','xtMessage','all','index','chat_jid,\x20','\x20phrase\x20=\x20','or\x20','2.3.2','r\x20default\x20','e=\x27table\x27\x20','unlockall','e\x20=\x20?,\x20cre','sock','y\x20[on|off]','LE\x20IF\x20NOT\x20','regex','❌\x20Failed\x20t','CT(chat_ji','\x20=\x20exclude','E\x20locks\x20RE','available','1ahwUUT','ailed:\x20','earch\x20fail','ger2','1206gDPrFo','message','UPDATE\x20loc','now','|jid|all>\x0a','l\x20gp:<alia','otify\x20=\x20ex','\x20DEFAULT\x200','fy\x20message','SSAGE','id,\x20notify','_locks_cha','aned\x20up','isInteger','EXISTS\x20idx','regex:','rs\x20besides','[lock]\x20isa','(chat_jid,','hrase)\x0a\x20\x20\x20','{user}','shift','ks\x20table\x20a','id:\x20\x22','AND\x20phrase','t_jid\x20=\x20?\x20','ERE\x20chat_j','Y_MS','\x20=\x20?','[lock]\x20ON\x20','ed_at,\x20hit','\x20table\x20(ca','❌\x20Unknown\x20','[lock]\x20loc','\x20phrase\x20FR','NFKC','led\x20to\x20add','TableColum','CREATE\x20TAB','fy\x20on|off\x0a','sendApi\x20un','OFF','rror:\x20','\x20BY\x20id','\x20?,\x20?,\x200,\x20','dWarning\x20f','next','\x20&\x20regex\x20v','PRAGMA\x20for','\x20lock(s)\x20f','toLowerCas','_regex\x20INT','normalize','izeExistin','1150426HViNSq','[lock]\x20del','\x20created_b','M\x20locks\x20WH','length','ALTER\x20TABL','ated\x20locks','gp:<alias|','d|all>','NORMALIZE_','\x20locks\x20for','ks\x20SET\x20is_','BATCH_SIZE','w\x20RENAME\x20T','heck\x20/setd','ust\x20contai','SEND_WARNI','\x20\x20UNIQUE(c','\x20ON\x20locks(','FAULT\x200','REATE\x20TABL',',phrase2','(?<![\x5cp{L}','.created_b','ration\x20ins','[lock]\x20val','t\x20resolve\x20','entries','(s):\x20','\x20\x20\x20\x20\x20\x20type','|jid|all>','\x20your\x20defa','✔️\x20Saved\x20','AUTOINCREM','normalizeT','[\x5cp{L}\x5cp{N','onical\x20(en','lete_prefs'];_0x4a0a=function(){return _0x13c8d9;};return _0x4a0a();}class AhoCorasick{constructor(_0xd5e326=[]){const _0x5429ac=_0x554c8d;this['nodes']=[{'next':{},'fail':0x0,'output':[]}];if(_0xd5e326&&_0xd5e326[_0x5429ac(0x1b2)])this[_0x5429ac(0x23f)](_0xd5e326);}[_0x554c8d(0x23f)](_0x43f19f){const _0xf6c266=_0x554c8d;this[_0xf6c266(0x1fc)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x180300 of _0x43f19f){let _0x382291=0x18d*0x3+0x107*0x8+-0xcdf;for(const _0x30e700 of _0x180300){const _0x37d058=_0x30e700;!this[_0xf6c266(0x1fc)][_0x382291][_0xf6c266(0x1a6)][_0x37d058]&&(this[_0xf6c266(0x1fc)][_0x382291]['next'][_0x37d058]=this['nodes'][_0xf6c266(0x1b2)],this[_0xf6c266(0x1fc)]['push']({'next':{},'fail':0x0,'output':[]})),_0x382291=this['nodes'][_0x382291][_0xf6c266(0x1a6)][_0x37d058];}this['nodes'][_0x382291][_0xf6c266(0x262)][_0xf6c266(0x324)](_0x180300);}const _0x73f4ca=[];for(const _0x4aafc9 in this[_0xf6c266(0x1fc)][-0xdc8+0x1e9d+-0x10d5][_0xf6c266(0x1a6)]){const _0x44273a=this[_0xf6c266(0x1fc)][0x2a2+0x115*0x1+-0x3b7][_0xf6c266(0x1a6)][_0x4aafc9];this['nodes'][_0x44273a]['fail']=0xb*0x265+0x281*0x1+-0x1cd8,_0x73f4ca[_0xf6c266(0x324)](_0x44273a);}while(_0x73f4ca[_0xf6c266(0x1b2)]){const _0x153a41=_0x73f4ca[_0xf6c266(0x18d)]();for(const _0x198f46 in this[_0xf6c266(0x1fc)][_0x153a41][_0xf6c266(0x1a6)]){const _0x3312ef=this['nodes'][_0x153a41][_0xf6c266(0x1a6)][_0x198f46];let _0x3b7d81=this['nodes'][_0x153a41][_0xf6c266(0x30a)];while(_0x3b7d81&&!this['nodes'][_0x3b7d81]['next'][_0x198f46])_0x3b7d81=this[_0xf6c266(0x1fc)][_0x3b7d81]['fail'];if(this[_0xf6c266(0x1fc)][_0x3b7d81][_0xf6c266(0x1a6)][_0x198f46])this['nodes'][_0x3312ef][_0xf6c266(0x30a)]=this[_0xf6c266(0x1fc)][_0x3b7d81][_0xf6c266(0x1a6)][_0x198f46];else this[_0xf6c266(0x1fc)][_0x3312ef][_0xf6c266(0x30a)]=-0x21e7+0x32f+0x1eb8;this['nodes'][_0x3312ef][_0xf6c266(0x262)]['push'](...this['nodes'][this[_0xf6c266(0x1fc)][_0x3312ef]['fail']]['output']),_0x73f4ca[_0xf6c266(0x324)](_0x3312ef);}}}[_0x554c8d(0x306)](_0x5418b7){const _0x179f87=_0x554c8d,_0x26cf27=[];let _0x450e6e=0x1*0x3af+0x1b09*-0x1+0x175a;for(let _0x10f89d=0x209b+-0x7f*0x3+-0x1f1e;_0x10f89d<_0x5418b7[_0x179f87(0x1b2)];_0x10f89d++){const _0x25776e=_0x5418b7[_0x10f89d];while(_0x450e6e&&!this[_0x179f87(0x1fc)][_0x450e6e][_0x179f87(0x1a6)][_0x25776e])_0x450e6e=this['nodes'][_0x450e6e][_0x179f87(0x30a)];if(this[_0x179f87(0x1fc)][_0x450e6e][_0x179f87(0x1a6)][_0x25776e])_0x450e6e=this[_0x179f87(0x1fc)][_0x450e6e][_0x179f87(0x1a6)][_0x25776e];else _0x450e6e=0x1857+-0x1*0x749+0x25*-0x76;if(this[_0x179f87(0x1fc)][_0x450e6e]['output']['length'])for(const _0x46855a of this['nodes'][_0x450e6e][_0x179f87(0x262)]){_0x26cf27[_0x179f87(0x324)]({'keyword':_0x46855a,'index':_0x10f89d-_0x46855a['length']+(-0xc88+0xc71*-0x1+0x18fa)});}}return _0x26cf27;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x58651a){const _0x5233f0=_0x554c8d,_0x358f27=String(_0x58651a||'')[_0x5233f0(0x280)](),_0x5ca385=escapeRegex(_0x358f27);try{const _0x3693a1=_0x5233f0(0x1c4)+_0x5233f0(0x1f0)+_0x5ca385+('(?![\x5cp{L}\x5c'+_0x5233f0(0x321));return new RegExp(_0x3693a1,'iu');}catch(_0x46548c){try{return new RegExp('\x5cb'+_0x5ca385+'\x5cb','i');}catch(_0x3752bb){return new RegExp(_0x5ca385,'i');}}}function wildcardToRegex(_0x4eb819){const _0x418206=_0x554c8d,_0x293353=String(_0x4eb819||'')[_0x418206(0x280)](),_0xdf1205=_0x293353[_0x418206(0x338)](/\*/g,'')[_0x418206(0x1b2)]>0x4e*-0x64+-0x20fd*-0x1+-0x1*0x285;if(!_0xdf1205)throw new Error(_0x418206(0x233)+_0x418206(0x1bd)+_0x418206(0x395)+_0x418206(0x188)+'\x20*');const _0x29bcee=_0x293353[_0x418206(0x2e7)]('*')[_0x418206(0x1d7)](_0x2495ad=>escapeRegex(_0x2495ad)),_0x4433d1=_0x29bcee[_0x418206(0x367)](_0x418206(0x1d1)+_0x418206(0x37b));try{const _0x108393=_0x418206(0x1c4)+_0x418206(0x1f0)+_0x4433d1+('(?![\x5cp{L}\x5c'+_0x418206(0x321));return new RegExp(_0x108393,'iu');}catch(_0x5bcb01){const _0x240fef=_0x29bcee[_0x418206(0x367)]('.*');try{return new RegExp(''+_0x240fef,'i');}catch(_0x2b71b7){return new RegExp(_0x29bcee[_0x418206(0x367)](''),'i');}}}function setupSendApi(){const _0x4e241e=_0x554c8d;if(!botRef)return;if(typeof botRef[_0x4e241e(0x37e)+'e']===_0x4e241e(0x320))sendApi=async(_0xf206fa,_0x4b471a)=>await botRef[_0x4e241e(0x37e)+'e'](_0xf206fa,_0x4b471a);else botRef[_0x4e241e(0x3ad)]&&typeof botRef[_0x4e241e(0x3ad)][_0x4e241e(0x37e)+'e']===_0x4e241e(0x320)?sendApi=async(_0x2b1a79,_0x4bef21)=>await botRef[_0x4e241e(0x3ad)][_0x4e241e(0x37e)+'e'](_0x2b1a79,_0x4bef21):sendApi=null;}async function sendText(_0x283a02,_0x3adf2c,_0x1b6e2a=[]){const _0x26e21e=_0x554c8d;if(!_0x3adf2c||!_0x283a02)return;const _0x4aa267={'text':String(_0x3adf2c)};if(Array['isArray'](_0x1b6e2a)&&_0x1b6e2a[_0x26e21e(0x1b2)])_0x4aa267[_0x26e21e(0x2fc)]=_0x1b6e2a;try{if(!sendApi){warn(_0x26e21e(0x315)+_0x26e21e(0x1eb)+_0x26e21e(0x332));return;}await sendApi(_0x283a02,_0x4aa267);}catch(_0x420434){warn('[lock]\x20sen'+_0x26e21e(0x26a)+'ed\x20to\x20'+_0x283a02+':\x20'+(_0x420434?.[_0x26e21e(0x179)]||_0x420434));}}async function tableExists(_0x237311){const _0x4f0a68=_0x554c8d;try{const _0x31f022=await db[_0x4f0a68(0x342)]('SELECT\x20nam'+'e\x20FROM\x20sql'+_0x4f0a68(0x23e)+_0x4f0a68(0x266)+_0x4f0a68(0x3aa)+_0x4f0a68(0x273),[_0x237311]);return!!_0x31f022;}catch(_0x5a6346){return warn(_0x4f0a68(0x1ea)+_0x4f0a68(0x397)+_0x4f0a68(0x1a2)+(_0x5a6346?.[_0x4f0a68(0x179)]||_0x5a6346)),![];}}async function getTableColumns(_0x53c842){const _0x31860f=_0x554c8d;try{const _0x281969=await db[_0x31860f(0x3a3)](_0x31860f(0x316)+_0x31860f(0x2c0)+_0x53c842+')');return(_0x281969||[])[_0x31860f(0x1d7)](_0x38aa18=>_0x38aa18[_0x31860f(0x234)]);}catch(_0x2ab86f){return warn(_0x31860f(0x301)+_0x31860f(0x19d)+_0x31860f(0x34c)+_0x31860f(0x3a7)+_0x53c842+':\x20'+(_0x2ab86f?.[_0x31860f(0x179)]||_0x2ab86f)),[];}}async function readAndNormalizeExistingLocks(){const _0x5e8dc3=_0x554c8d;try{const _0x4f92f5=await db[_0x5e8dc3(0x3a3)](_0x5e8dc3(0x39e)+_0x5e8dc3(0x23c)),_0x469e46=new Map();for(const _0x2ba20e of _0x4f92f5||[]){const _0x2127ad=['chat_jid',_0x5e8dc3(0x245),'chat_id','jid',_0x5e8dc3(0x387)],_0x44f802=['phrase',_0x5e8dc3(0x34d),'trigger',_0x5e8dc3(0x2d8),'value','body',_0x5e8dc3(0x179)];let _0x28dad0=null;for(const _0xe7634e of _0x2127ad)if(_0xe7634e in _0x2ba20e&&_0x2ba20e[_0xe7634e]){_0x28dad0=String(_0x2ba20e[_0xe7634e]);break;}let _0x26801f=null;for(const _0x5f52f4 of _0x44f802)if(_0x5f52f4 in _0x2ba20e&&_0x2ba20e[_0x5f52f4]){_0x26801f=String(_0x2ba20e[_0x5f52f4]);break;}if(!_0x28dad0||!_0x26801f)for(const _0x2a2820 of Object[_0x5e8dc3(0x2a6)](_0x2ba20e)){const _0x571077=_0x2ba20e[_0x2a2820];if(!_0x28dad0&&typeof _0x571077===_0x5e8dc3(0x313)&&_0x571077[_0x5e8dc3(0x1da)]('@'))_0x28dad0=_0x571077;if(!_0x26801f&&typeof _0x571077==='string'&&_0x571077[_0x5e8dc3(0x1b2)]<-0x46b+-0x18ba+0x1eb5&&!_0x571077[_0x5e8dc3(0x1da)]('@'))_0x26801f=_0x571077;}if(!_0x28dad0||!_0x26801f)continue;let _0xeb12b4=_0x26801f[_0x5e8dc3(0x280)](),_0x2c5bbd=_0x5e8dc3(0x38e);if(_0xeb12b4[_0x5e8dc3(0x1aa)+'e']()[_0x5e8dc3(0x2de)](_0x5e8dc3(0x187)))_0x2c5bbd='regex',_0xeb12b4=_0xeb12b4[_0x5e8dc3(0x37a)](0xb*-0x239+0x1618+-0x57*-0x7)[_0x5e8dc3(0x280)]();else{if(_0xeb12b4[_0x5e8dc3(0x1da)]('*'))_0x2c5bbd='wildcard';else _0x2c5bbd=_0x5e8dc3(0x38e);}const _0x534f6e=_0x2ba20e[_0x5e8dc3(0x27d)]||_0x2ba20e[_0x5e8dc3(0x2c7)]||_0x2ba20e[_0x5e8dc3(0x1e6)]||_0x2ba20e[_0x5e8dc3(0x348)]||'',_0x2cfc59=Number(_0x2ba20e['created_at']||_0x2ba20e['ts']||_0x2ba20e[_0x5e8dc3(0x201)]||-0x1*0xe2f+-0x1eba+0x2ce9)||nowSec(),_0x5a49f3=_0x28dad0+'||'+_0xeb12b4;if(!_0x469e46['has'](_0x5a49f3))_0x469e46[_0x5e8dc3(0x335)](_0x5a49f3,{'chat_jid':_0x28dad0,'phrase':_0xeb12b4,'type':_0x2c5bbd,'created_by':_0x534f6e,'created_at':_0x2cfc59,'hit_count':Number(_0x2ba20e[_0x5e8dc3(0x2c5)]||0x21*0xfb+-0x1f44+-0x117)});else{const _0x2b62d3=_0x469e46[_0x5e8dc3(0x342)](_0x5a49f3);_0x2b62d3[_0x5e8dc3(0x2f7)]=Math[_0x5e8dc3(0x228)](_0x2b62d3[_0x5e8dc3(0x2f7)]||_0x2cfc59,_0x2cfc59),_0x2b62d3['hit_count']=(_0x2b62d3[_0x5e8dc3(0x2c5)]||-0x92*0x23+0x13*0xeb+0x285)+(Number(_0x2ba20e[_0x5e8dc3(0x2c5)])||-0x1046*0x2+-0xdfd*0x1+0x273*0x13);}}return Array['from'](_0x469e46[_0x5e8dc3(0x296)]());}catch(_0xdf3ebd){return warn('[lock]\x20rea'+'dAndNormal'+_0x5e8dc3(0x1ad)+_0x5e8dc3(0x2ba)+_0x5e8dc3(0x27e)+(_0xdf3ebd?.['message']||_0xdf3ebd)),[];}}async function ensureSchema(){const _0x35baa5=_0x554c8d,_0x5646bd={'id':_0x35baa5(0x2e9)+_0x35baa5(0x25b)+_0x35baa5(0x1cf)+_0x35baa5(0x34a),'chat_jid':_0x35baa5(0x1de)+_0x35baa5(0x24b),'phrase':'TEXT\x20NOT\x20N'+_0x35baa5(0x24b),'type':_0x35baa5(0x1f6)+_0x35baa5(0x256)+'\x27','created_by':_0x35baa5(0x1f6)+'LT\x20\x27\x27','created_at':'INTEGER\x20DE'+_0x35baa5(0x1c1),'hit_count':_0x35baa5(0x22e)+'FAULT\x200','is_valid_regex':_0x35baa5(0x22e)+'FAULT\x201'};try{const _0x46404c=await tableExists('locks');if(!_0x46404c){const _0x122743=Object[_0x35baa5(0x1c9)](_0x5646bd)[_0x35baa5(0x1d7)](([_0x39fe88,_0x54546b])=>_0x39fe88+'\x20'+_0x54546b)[_0x35baa5(0x367)](_0x35baa5(0x1f7));await db['exec']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20C'+_0x35baa5(0x1c2)+'E\x20locks\x20(\x0a'+_0x35baa5(0x39b)+_0x122743+(_0x35baa5(0x2cf)+_0x35baa5(0x1bf)+'hat_jid,\x20p'+_0x35baa5(0x18b)+_0x35baa5(0x38a)+'\x20\x20\x20\x20'));try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x2be)+_0x35baa5(0x2ea)+_0x35baa5(0x186)+'_locks_cha'+_0x35baa5(0x365)+'(chat_jid)'+';');}catch(_0x1cf578){}try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x2cd)+'QUE\x20INDEX\x20'+'IF\x20NOT\x20EXI'+'STS\x20idx_lo'+_0x35baa5(0x216)+_0x35baa5(0x1c0)+_0x35baa5(0x3a5)+'phrase);');}catch(_0x99cd04){}info('[lock]\x20cre'+_0x35baa5(0x1b4)+_0x35baa5(0x197)+_0x35baa5(0x371));try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x19e)+_0x35baa5(0x3af)+_0x35baa5(0x281)+_0x35baa5(0x26b)+_0x35baa5(0x1e4)+'XT\x20PRIMARY'+'\x20KEY,\x20noti'+_0x35baa5(0x29b)+_0x35baa5(0x17f)+');');}catch(_0x26f373){}return;}const _0x1a1918=await getTableColumns(_0x35baa5(0x226)),_0x38a9f8=_0x1a1918['includes'](_0x35baa5(0x2af)),_0x3767de=_0x1a1918[_0x35baa5(0x1da)](_0x35baa5(0x239)),_0x3f5130=_0x1a1918[_0x35baa5(0x1da)](_0x35baa5(0x1e0));if(_0x38a9f8&&_0x3767de&&_0x3f5130){if(!_0x1a1918[_0x35baa5(0x1da)](_0x35baa5(0x257)+_0x35baa5(0x260)))try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x1b3)+'E\x20locks\x20AD'+_0x35baa5(0x2c3)+_0x35baa5(0x391)+_0x35baa5(0x26f)+_0x35baa5(0x28a)+'1;'),info(_0x35baa5(0x235)+_0x35baa5(0x380)+_0x35baa5(0x1f4)+'lumn\x20to\x20lo'+_0x35baa5(0x27a));}catch(_0x512c66){warn('[lock]\x20fai'+_0x35baa5(0x19c)+_0x35baa5(0x336)+_0x35baa5(0x212)+_0x35baa5(0x385)+(_0x512c66?.[_0x35baa5(0x179)]||_0x512c66));}try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x2be)+'EX\x20IF\x20NOT\x20'+_0x35baa5(0x186)+_0x35baa5(0x183)+_0x35baa5(0x365)+'(chat_jid)'+';');}catch(_0x9e28fc){}try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x2cd)+_0x35baa5(0x25a)+_0x35baa5(0x343)+'STS\x20idx_lo'+_0x35baa5(0x216)+_0x35baa5(0x1c0)+_0x35baa5(0x3a5)+_0x35baa5(0x241));}catch(_0x557a38){}try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x19e)+_0x35baa5(0x3af)+_0x35baa5(0x281)+_0x35baa5(0x26b)+'hat_jid\x20TE'+_0x35baa5(0x38f)+_0x35baa5(0x389)+'fy\x20INTEGER'+_0x35baa5(0x17f)+');');}catch(_0x43e9a8){}info(_0x35baa5(0x199)+_0x35baa5(0x18e)+_0x35baa5(0x382)+_0x35baa5(0x1d2)+_0x35baa5(0x39c)+_0x35baa5(0x269)+_0x35baa5(0x1e7));return;}info(_0x35baa5(0x2b2)+_0x35baa5(0x33f)+'table\x20dete'+_0x35baa5(0x23b)+_0x35baa5(0x224)+'afe\x20migrat'+_0x35baa5(0x258));const _0x40fd84=await readAndNormalizeExistingLocks();await db['exec'](_0x35baa5(0x1a8)+_0x35baa5(0x2e2)+_0x35baa5(0x32c));try{await db['exec'](_0x35baa5(0x19e)+_0x35baa5(0x3af)+_0x35baa5(0x281)+_0x35baa5(0x1ed)+'\x20\x20\x20\x20\x20\x20\x20id\x20'+_0x35baa5(0x2e9)+_0x35baa5(0x25b)+'AUTOINCREM'+_0x35baa5(0x356)+'\x20\x20\x20chat_ji'+'d\x20TEXT\x20NOT'+_0x35baa5(0x287)+'\x20\x20\x20\x20\x20phras'+_0x35baa5(0x29d)+_0x35baa5(0x287)+_0x35baa5(0x2e1)+_0x35baa5(0x1f6)+_0x35baa5(0x256)+_0x35baa5(0x38d)+_0x35baa5(0x1b0)+_0x35baa5(0x29e)+_0x35baa5(0x351)+_0x35baa5(0x2db)+_0x35baa5(0x373)+_0x35baa5(0x378)+_0x35baa5(0x376)+'\x20\x20\x20\x20\x20hit_c'+_0x35baa5(0x21d)+_0x35baa5(0x2c6)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x35baa5(0x344)+_0x35baa5(0x1ab)+_0x35baa5(0x34f)+_0x35baa5(0x393)+_0x35baa5(0x32d)+_0x35baa5(0x18a)+_0x35baa5(0x210)+_0x35baa5(0x31a));}catch(_0x38f125){await db[_0x35baa5(0x1fe)](_0x35baa5(0x19e)+_0x35baa5(0x3af)+_0x35baa5(0x281)+_0x35baa5(0x1ed)+_0x35baa5(0x298)+_0x35baa5(0x2e9)+_0x35baa5(0x25b)+_0x35baa5(0x1cf)+_0x35baa5(0x356)+_0x35baa5(0x36d)+_0x35baa5(0x21f)+'\x20NULL,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20phras'+_0x35baa5(0x29d)+'\x20NULL,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20type\x20'+_0x35baa5(0x1f6)+_0x35baa5(0x256)+_0x35baa5(0x38d)+_0x35baa5(0x1b0)+_0x35baa5(0x29e)+_0x35baa5(0x351)+_0x35baa5(0x2db)+_0x35baa5(0x373)+_0x35baa5(0x378)+_0x35baa5(0x376)+_0x35baa5(0x283)+_0x35baa5(0x21d)+'ER\x20DEFAULT'+_0x35baa5(0x213)+_0x35baa5(0x344)+_0x35baa5(0x1ab)+_0x35baa5(0x34f)+'LT\x201\x0a\x20\x20\x20\x20\x20'+_0x35baa5(0x2a7)),warn('[lock]\x20cre'+_0x35baa5(0x1b4)+_0x35baa5(0x26e)+_0x35baa5(0x2f4)+_0x35baa5(0x206)+'k');}const _0x135741=await db[_0x35baa5(0x275)]('INSERT\x20INT'+_0x35baa5(0x1f8)+_0x35baa5(0x2b1)+'d,\x20phrase,'+_0x35baa5(0x312)+_0x35baa5(0x2dc)+_0x35baa5(0x359)+_0x35baa5(0x1db)+_0x35baa5(0x2d9)+_0x35baa5(0x32e)+_0x35baa5(0x2f9)+_0x35baa5(0x251)+_0x35baa5(0x355));try{for(const _0xfedc4a of _0x40fd84){try{let _0x37346c=-0x1838*0x1+0x1d27+-0x4ee;if(_0xfedc4a['type']===_0x35baa5(0x16e))try{new RegExp(_0xfedc4a['phrase']);}catch(_0x893faf){_0x37346c=0x24+0xd0e*-0x1+-0x72*-0x1d;}await _0x135741[_0x35baa5(0x345)](_0xfedc4a[_0x35baa5(0x2af)],_0xfedc4a[_0x35baa5(0x239)],_0xfedc4a[_0x35baa5(0x1e0)]||'normal',_0xfedc4a[_0x35baa5(0x27d)]||'',Number(_0xfedc4a[_0x35baa5(0x2f7)]||nowSec()),Number(_0xfedc4a[_0x35baa5(0x2c5)]||0x1e*-0x4e+0x2*0xbba+-0xe50),_0x37346c);}catch(_0x55b8c8){warn(_0x35baa5(0x274)+_0x35baa5(0x1c6)+'ert\x20failed'+_0x35baa5(0x33c)+_0xfedc4a['chat_jid']+'@'+_0xfedc4a['phrase']+':\x20'+(_0x55b8c8?.['message']||_0x55b8c8));}}}finally{try{await _0x135741['finalize']();}catch(_0x362c4f){}}try{const _0x302888='locks_back'+_0x35baa5(0x248)+Math[_0x35baa5(0x33d)](Date[_0x35baa5(0x17b)]()/(-0x1*-0x10a3+0x685+-0x1340));await db[_0x35baa5(0x1fe)]('ALTER\x20TABL'+_0x35baa5(0x172)+_0x35baa5(0x2d3)+_0x302888+';'),await db[_0x35baa5(0x1fe)]('ALTER\x20TABL'+_0x35baa5(0x2a9)+_0x35baa5(0x1bb)+'O\x20locks;');try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x2be)+_0x35baa5(0x2ea)+_0x35baa5(0x186)+'_locks_cha'+_0x35baa5(0x365)+'(chat_jid)'+';');}catch(_0x593632){}try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x2cd)+_0x35baa5(0x25a)+_0x35baa5(0x343)+_0x35baa5(0x2a5)+'cks_unique'+_0x35baa5(0x1c0)+_0x35baa5(0x3a5)+_0x35baa5(0x241));}catch(_0x55e370){}try{await db[_0x35baa5(0x1fe)](_0x35baa5(0x19e)+_0x35baa5(0x3af)+_0x35baa5(0x281)+_0x35baa5(0x26b)+'hat_jid\x20TE'+_0x35baa5(0x38f)+'\x20KEY,\x20noti'+'fy\x20INTEGER'+_0x35baa5(0x17f)+');');}catch(_0x278942){}info(_0x35baa5(0x274)+_0x35baa5(0x317)+_0x35baa5(0x246)+'\x20table\x20ren'+_0x35baa5(0x2bd)+_0x35baa5(0x331));}catch(_0x565a6d){warn(_0x35baa5(0x274)+_0x35baa5(0x375)+'p\x20failed:\x20'+(_0x565a6d?.['message']||_0x565a6d));throw _0x565a6d;}finally{await db[_0x35baa5(0x1fe)](_0x35baa5(0x1a8)+_0x35baa5(0x2e2)+_0x35baa5(0x24e));}return;}catch(_0x294216){error(_0x294216,'[lock]\x20ens'+_0x35baa5(0x347)+_0x35baa5(0x2fe));throw _0x294216;}}async function addLock(_0xe30bbb,_0x3f356a,_0x20c180){const _0x70cf3b=_0x554c8d;try{if(!_0xe30bbb||!_0x3f356a)return![];let _0x335fc1=String(_0x3f356a)[_0x70cf3b(0x280)]();if(!_0x335fc1)return![];let _0x426542='normal',_0x375a45=-0x5bb*0x1+0x10f*-0x1+0x6cb;if(_0x335fc1['toLowerCas'+'e']()[_0x70cf3b(0x2de)]('regex:')){_0x426542=_0x70cf3b(0x16e),_0x335fc1=_0x335fc1[_0x70cf3b(0x37a)](0xc*0xce+0x1a3e*-0x1+0x109c)[_0x70cf3b(0x280)]();try{new RegExp(_0x335fc1),_0x375a45=-0x6f*0x29+0x1fe+0xfca;}catch(_0x549936){_0x375a45=-0x191c+0xc*-0x22f+-0x4*-0xcd4,warn(_0x70cf3b(0x235)+'Lock:\x20inva'+'lid\x20regex\x20'+_0x70cf3b(0x303)+_0x335fc1);}}else _0x335fc1[_0x70cf3b(0x1da)]('*')?_0x426542=_0x70cf3b(0x326):_0x426542=_0x70cf3b(0x38e);try{const _0x25d189=await db['run'](_0x70cf3b(0x277)+'O\x20locks\x20(c'+_0x70cf3b(0x36e)+'hrase,\x20typ'+_0x70cf3b(0x2a3)+'_by,\x20creat'+_0x70cf3b(0x196)+_0x70cf3b(0x247)+_0x70cf3b(0x214)+_0x70cf3b(0x30c)+'\x20\x20\x20VALUES\x20'+_0x70cf3b(0x2ae)+_0x70cf3b(0x2ad)+_0x70cf3b(0x288)+'\x20ON\x20CONFLI'+_0x70cf3b(0x170)+_0x70cf3b(0x20f)+_0x70cf3b(0x2ed)+'\x20SET\x0a\x20\x20\x20\x20\x20'+_0x70cf3b(0x1cb)+_0x70cf3b(0x171)+_0x70cf3b(0x32a)+_0x70cf3b(0x231)+'reated_by\x20'+_0x70cf3b(0x254)+_0x70cf3b(0x1c5)+_0x70cf3b(0x1f2)+'\x20\x20\x20\x20create'+_0x70cf3b(0x259)+'luded.crea'+'ted_at,\x0a\x20\x20'+_0x70cf3b(0x2ac)+_0x70cf3b(0x391)+_0x70cf3b(0x272)+_0x70cf3b(0x2df)+_0x70cf3b(0x253),[_0xe30bbb,_0x335fc1,_0x426542,_0x20c180||'',nowSec(),_0x375a45]);return ahoCache['delete'](_0xe30bbb),info('[lock]\x20add'+'ed\x20lock\x20\x22'+_0x335fc1+'\x22\x20@\x20'+_0xe30bbb+_0x70cf3b(0x325)+_0x426542+_0x70cf3b(0x2d6)+_0x375a45+')'),!![];}catch(_0x19565e){warn(_0x70cf3b(0x195)+_0x70cf3b(0x25e)+_0x70cf3b(0x220)+_0x70cf3b(0x386)+'ck):\x20'+(_0x19565e?.[_0x70cf3b(0x179)]||_0x19565e));try{const _0x13b396=await db[_0x70cf3b(0x342)]('SELECT\x20id\x20'+_0x70cf3b(0x399)+_0x70cf3b(0x1e8)+_0x70cf3b(0x191)+_0x70cf3b(0x190)+_0x70cf3b(0x194),[_0xe30bbb,_0x335fc1]);return _0x13b396?await db[_0x70cf3b(0x345)](_0x70cf3b(0x17a)+_0x70cf3b(0x2e4)+_0x70cf3b(0x3ac)+'ated_by\x20=\x20'+_0x70cf3b(0x28c)+_0x70cf3b(0x341)+_0x70cf3b(0x391)+'gex\x20=\x20?\x20WH'+_0x70cf3b(0x38b),[_0x426542,_0x20c180||'',nowSec(),_0x375a45,_0x13b396['id']]):await db[_0x70cf3b(0x345)](_0x70cf3b(0x277)+_0x70cf3b(0x28e)+_0x70cf3b(0x36e)+'hrase,\x20typ'+_0x70cf3b(0x2a3)+_0x70cf3b(0x1d4)+'ed_at,\x20hit'+_0x70cf3b(0x247)+'_valid_reg'+_0x70cf3b(0x2ef)+_0x70cf3b(0x1fb)+_0x70cf3b(0x1a4)+'?)',[_0xe30bbb,_0x335fc1,_0x426542,_0x20c180||'',nowSec(),_0x375a45]),ahoCache[_0x70cf3b(0x334)](_0xe30bbb),!![];}catch(_0x5b5b14){return error(_0x5b5b14,'[lock]\x20add'+_0x70cf3b(0x223)+_0x70cf3b(0x2fb)+_0x70cf3b(0x33c)+_0x335fc1+_0x70cf3b(0x346)+_0xe30bbb),![];}}}catch(_0x6de744){return error(_0x6de744,_0x70cf3b(0x235)+_0x70cf3b(0x27b)+_0x70cf3b(0x35b)+_0x3f356a+_0x70cf3b(0x346)+_0xe30bbb),![];}}async function deleteLockByPhrase(_0x2822ce,_0xa00351){const _0x5f27db=_0x554c8d;try{if(!_0x2822ce||!_0xa00351)return-0x1152*0x1+0x734*-0x2+0xfdd*0x2;const _0x5503ef=String(_0xa00351||'')[_0x5f27db(0x280)]();if(!_0x5503ef)return 0x295+0x11*0x16c+-0x1ac1;if(_0x5503ef[_0x5f27db(0x1aa)+'e']()[_0x5f27db(0x2de)](_0x5f27db(0x187))){const _0x1b8415=_0x5503ef[_0x5f27db(0x37a)](0x1*-0xab7+-0x1*0xe0d+-0x1*-0x18ca)[_0x5f27db(0x280)](),_0x40e6ac=await db[_0x5f27db(0x345)](_0x5f27db(0x270)+_0x5f27db(0x1b1)+_0x5f27db(0x192)+_0x5f27db(0x2dd)+'\x20type\x20=\x20\x27r'+'egex\x27\x20AND\x20'+_0x5f27db(0x32f),[_0x2822ce,_0x1b8415]);if(_0x40e6ac?.[_0x5f27db(0x2cb)])ahoCache[_0x5f27db(0x334)](_0x2822ce);return _0x40e6ac?.[_0x5f27db(0x2cb)]||-0x23a6+0x1f74+-0x166*-0x3;}let _0x48423=await db[_0x5f27db(0x345)](_0x5f27db(0x270)+_0x5f27db(0x1b1)+'ERE\x20chat_j'+_0x5f27db(0x2dd)+_0x5f27db(0x3a6)+'?',[_0x2822ce,_0x5503ef]);if(_0x48423?.[_0x5f27db(0x2cb)])return ahoCache['delete'](_0x2822ce),_0x48423[_0x5f27db(0x2cb)];return-0x197e+-0x1e91+0x380f;}catch(_0x455ff8){return warn(_0x5f27db(0x1af)+'eteLockByP'+_0x5f27db(0x377)+_0x5f27db(0x327)+(_0x455ff8?.[_0x5f27db(0x179)]||_0x455ff8)),-0x1dfb+-0x8cb+0x26c6;}}async function deleteLockById(_0x24b871,_0x4778d2){const _0x12198b=_0x554c8d;try{const _0x3d39af=await db[_0x12198b(0x345)](_0x12198b(0x270)+'M\x20locks\x20WH'+_0x12198b(0x192)+_0x12198b(0x2dd)+_0x12198b(0x1dc),[_0x24b871,_0x4778d2]);if(_0x3d39af?.['changes'])ahoCache['delete'](_0x24b871);return _0x3d39af?.[_0x12198b(0x2cb)]||0x4af+-0xe02+0x953;}catch(_0x220f87){return warn(_0x12198b(0x1af)+'eteLockByI'+'d\x20error:\x20'+(_0x220f87?.[_0x12198b(0x179)]||_0x220f87)),0x137*0x2+-0xb65+0x8f7;}}async function deleteAllLocksForChat(_0x2ef064){const _0x180de6=_0x554c8d;try{const _0x123f98=await db[_0x180de6(0x345)]('DELETE\x20FRO'+_0x180de6(0x1b1)+_0x180de6(0x192)+'id\x20=\x20?',[_0x2ef064]);if(_0x123f98?.['changes'])ahoCache[_0x180de6(0x334)](_0x2ef064);return _0x123f98?.[_0x180de6(0x2cb)]||-0x137+0x25dd+-0x1253*0x2;}catch(_0x16909f){return warn(_0x180de6(0x1af)+_0x180de6(0x27c)+'sForChat\x20e'+'rror:\x20'+(_0x16909f?.[_0x180de6(0x179)]||_0x16909f)),0x1a9a+-0x2057+-0x5bd*-0x1;}}async function listLocksForChat(_0x23acb4){const _0x35d5f3=_0x554c8d;try{const _0x23ff1b=await db[_0x35d5f3(0x3a3)](_0x35d5f3(0x208)+_0x35d5f3(0x1e9)+_0x35d5f3(0x2bf)+'ed_by,\x20cre'+_0x35d5f3(0x293)+_0x35d5f3(0x31c)+_0x35d5f3(0x257)+_0x35d5f3(0x299)+_0x35d5f3(0x329)+_0x35d5f3(0x30d)+'\x20=\x20?\x20ORDER'+_0x35d5f3(0x1a3),[_0x23acb4]);return _0x23ff1b||[];}catch(_0x121e7b){return warn(_0x121e7b,_0x35d5f3(0x39a)+_0x35d5f3(0x23d)+_0x35d5f3(0x381)+_0x35d5f3(0x2ff)+_0x23acb4+':\x20'+(_0x121e7b?.[_0x35d5f3(0x179)]||_0x121e7b)),[];}}async function setLockNotify(_0x32701f,_0x574074){const _0x3dcd79=_0x554c8d;try{if(!_0x32701f)return![];return await db['run'](_0x3dcd79(0x277)+_0x3dcd79(0x205)+_0x3dcd79(0x328)+_0x3dcd79(0x182)+_0x3dcd79(0x237)+'?,\x20?)\x0a\x20\x20\x20\x20'+_0x3dcd79(0x292)+_0x3dcd79(0x2b4)+_0x3dcd79(0x28b)+_0x3dcd79(0x22f)+_0x3dcd79(0x17e)+_0x3dcd79(0x398)+_0x3dcd79(0x2a4),[_0x32701f,_0x574074?-0x152b*0x1+-0x555+-0x1*-0x1a81:0x1620*0x1+0x115*0x24+0xa2e*-0x6]),!![];}catch(_0xbab8a7){return warn(_0x3dcd79(0x2a1)+_0x3dcd79(0x2eb)+'\x20failed\x20fo'+'r\x20'+_0x32701f+':\x20'+(_0xbab8a7?.[_0x3dcd79(0x179)]||_0xbab8a7)),![];}}async function getLockNotify(_0x40294a){const _0x5ec390=_0x554c8d;try{if(!_0x40294a)return-0x1798+-0x1501+0x2c99;const _0x59effb=await db[_0x5ec390(0x342)](_0x5ec390(0x29a)+_0x5ec390(0x2bc)+_0x5ec390(0x289)+'WHERE\x20chat'+_0x5ec390(0x353),[_0x40294a]);return _0x59effb?Number(_0x59effb[_0x5ec390(0x200)])?0xdef*-0x2+0x521+0xb5f*0x2:0x187e*-0x1+-0xec9+0x2747:0x3*0x1bc+-0x38e+-0x1a6*0x1;}catch(_0x25f379){return warn(_0x5ec390(0x301)+'LockNotify'+_0x5ec390(0x218)+'r\x20'+_0x40294a+':\x20'+(_0x25f379?.[_0x5ec390(0x179)]||_0x25f379)),0x53a+-0x1a3+-0x397;}}async function deleteWithRetry(_0x9da3df,_0x282cc9=-0x300*0x1+0x7*0x145+-0x5e1,_0x364841=0x1dab+-0x2540+-0x9*-0xf9){const _0x77a340=_0x554c8d,_0x411abd=_0x9da3df[_0x77a340(0x2f6)]?.[_0x77a340(0x36a)];if(!_0x411abd)return![];let _0x25e50b=_0x364841;for(let _0x528b87=0x8e1+-0x6ea*0x1+-0x1f6;_0x528b87<=Math[_0x77a340(0x37d)](0x83d+-0xe87+0x3*0x219,_0x282cc9);_0x528b87++){try{if(!sendApi)return warn(_0x77a340(0x1af)+_0x77a340(0x2f8)+'ry:\x20sendAp'+'i\x20unavaila'+_0x77a340(0x261)),![];return await sendApi(_0x411abd,{'delete':_0x9da3df[_0x77a340(0x2f6)]}),!![];}catch(_0x161f89){if(_0x528b87<_0x282cc9){await sleep(_0x25e50b),_0x25e50b*=0xb38+0x11*0x1c4+-0xdbe*0x3;continue;}return warn(_0x77a340(0x1af)+'eteWithRet'+_0x77a340(0x22a)+'\x20'+(_0x161f89?.['message']||_0x161f89)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x46c0ef){const _0x3aa148=_0x554c8d;if(!CFG[_0x3aa148(0x1be)+'NG'])return;try{const _0x2ba5b6=_0x46c0ef[_0x3aa148(0x2f6)]?.[_0x3aa148(0x394)+'t']||_0x46c0ef[_0x3aa148(0x2f6)]?.[_0x3aa148(0x240)]||'',_0x53b07d=_0x46c0ef[_0x3aa148(0x2f6)]['remoteJid'],_0x5c82fd=_0x2ba5b6?'@'+String(_0x2ba5b6)['split']('@')[-0x544*-0x2+-0x35*0x1c+-0x4bc]:_0x3aa148(0x18c),_0x1353ef=String(CFG['WARNING_ME'+_0x3aa148(0x181)]||DEFAULTS[_0x3aa148(0x2b0)+_0x3aa148(0x181)])[_0x3aa148(0x338)](/\{user\}/gi,_0x5c82fd);if(!sendApi){warn(_0x3aa148(0x315)+_0x3aa148(0x2a8)+_0x3aa148(0x1a0)+_0x3aa148(0x173));return;}const _0x60ab42=await sendApi(_0x53b07d,{'text':_0x1353ef,'mentions':_0x2ba5b6?[_0x2ba5b6]:[]});_0x60ab42?.[_0x3aa148(0x2f6)]&&CFG['WARNING_TT'+_0x3aa148(0x1df)]&&CFG['WARNING_TT'+'L_MS']>-0x1*0x227b+-0x5*-0x17f+0x1b00&&setTimeout(async()=>{try{await sendApi(_0x53b07d,{'delete':_0x60ab42['key']});}catch(_0x517386){}},CFG[_0x3aa148(0x1f9)+_0x3aa148(0x1df)]);}catch(_0x1075c4){warn(_0x3aa148(0x315)+_0x3aa148(0x1a5)+_0x3aa148(0x175)+(_0x1075c4?.[_0x3aa148(0x179)]||_0x1075c4));}}async function processChatQueue(_0x80ac29){const _0x5b343d=_0x554c8d;while((perChatQueue[_0x5b343d(0x342)](_0x80ac29)||[])['length']>0x137e+0xe6+-0x1464&&!shuttingDown){const _0x53f1a1=Math[_0x5b343d(0x37d)](-0x1dcc+-0x4*0x72c+0x1e3*0x1f,CFG[_0x5b343d(0x1ba)]||0xc32+-0x261c+0x52f*0x5),_0x4e394c=perChatQueue[_0x5b343d(0x342)](_0x80ac29)||[],_0x562066=_0x4e394c[_0x5b343d(0x340)](-0x259a+-0x22d9+0x4873,_0x53f1a1);for(const _0x4afa93 of _0x562066){try{const _0x5713fa=await deleteWithRetry(_0x4afa93)[_0x5b343d(0x37f)](()=>![]);_0x5713fa&&await sendWarningAndMaybeDelete(_0x4afa93)[_0x5b343d(0x37f)](()=>{});}catch(_0x5110a3){warn(_0x5b343d(0x285)+'cessChatQu'+'eue\x20item\x20e'+_0x5b343d(0x1a2)+(_0x5110a3?.['message']||_0x5110a3));}}(perChatQueue[_0x5b343d(0x342)](_0x80ac29)||[])['length']>-0x1752+-0x2*-0x3fd+-0x7ac*-0x2&&await sleep(Math[_0x5b343d(0x37d)](-0x7d5*0x1+-0x1846+0x201b,CFG['BATCH_DELA'+_0x5b343d(0x193)]||0x1b36+-0x617+-0x1457));}if((perChatQueue[_0x5b343d(0x342)](_0x80ac29)||[])[_0x5b343d(0x1b2)]===0x219b+-0xb49+-0x1652)perChatQueue[_0x5b343d(0x334)](_0x80ac29);}function tryStartProcessingForChat(_0x5bcf6c){const _0x1d0da5=_0x554c8d;if(perChatProcessing[_0x1d0da5(0x342)](_0x5bcf6c))return;if(activeChats>=(CFG[_0x1d0da5(0x308)+_0x1d0da5(0x361)]||-0x1ca0+-0x1638+-0x1*-0x32d9)){setTimeout(()=>tryStartProcessingForChat(_0x5bcf6c),0x1f56+0x3a*-0x12+-0x2*0xd56);return;}activeChats++,perChatProcessing['set'](_0x5bcf6c,!![]),((async()=>{const _0x423e67=_0x1d0da5;try{await processChatQueue(_0x5bcf6c);}catch(_0x1e3c43){warn('[lock]\x20pro'+_0x423e67(0x354)+_0x423e67(0x249)+(_0x1e3c43?.[_0x423e67(0x179)]||_0x1e3c43));}finally{perChatProcessing[_0x423e67(0x334)](_0x5bcf6c),activeChats=Math[_0x423e67(0x37d)](0x1*0x22ef+0x12d9+-0x35c8,activeChats-(-0x11b2+0x423*-0x7+0x2ea8));if((perChatQueue[_0x423e67(0x342)](_0x5bcf6c)||[])[_0x423e67(0x1b2)])setImmediate(()=>tryStartProcessingForChat(_0x5bcf6c));}})());}function enqueueDeletion(_0x2b5654){const _0x93adf7=_0x554c8d,_0x4336df=_0x2b5654[_0x93adf7(0x2f6)]?.['remoteJid'];if(!_0x4336df)return;if(!perChatQueue['has'](_0x4336df))perChatQueue[_0x93adf7(0x335)](_0x4336df,[]);const _0x13bf0d=perChatQueue[_0x93adf7(0x342)](_0x4336df);if(_0x13bf0d[_0x93adf7(0x1b2)]>=(CFG[_0x93adf7(0x2f2)+_0x93adf7(0x32b)]||DEFAULTS[_0x93adf7(0x2f2)+_0x93adf7(0x32b)]))_0x13bf0d[_0x93adf7(0x18d)]();_0x13bf0d[_0x93adf7(0x324)](_0x2b5654);if(!perChatProcessing[_0x93adf7(0x342)](_0x4336df))tryStartProcessingForChat(_0x4336df);}function extractTextFromMessage(_0x573455){const _0x48dc94=_0x554c8d;if(!_0x573455||!_0x573455[_0x48dc94(0x179)])return'';const _0x2926c9=_0x573455[_0x48dc94(0x179)];if(_0x2926c9[_0x48dc94(0x330)+'on'])return _0x2926c9['conversati'+'on'];if(_0x2926c9[_0x48dc94(0x2b9)+_0x48dc94(0x3a2)]?.['text'])return _0x2926c9[_0x48dc94(0x2b9)+_0x48dc94(0x3a2)]['text'];if(_0x2926c9[_0x48dc94(0x286)+'ge']?.[_0x48dc94(0x1d9)])return _0x2926c9[_0x48dc94(0x286)+'ge']['caption'];if(_0x2926c9['videoMessa'+'ge']?.['caption'])return _0x2926c9['videoMessa'+'ge'][_0x48dc94(0x1d9)];if(_0x2926c9['buttonsRes'+_0x48dc94(0x2f5)+'ge']?.[_0x48dc94(0x2ee)+'ttonId'])return _0x2926c9[_0x48dc94(0x2b6)+_0x48dc94(0x2f5)+'ge'][_0x48dc94(0x2ee)+_0x48dc94(0x24f)];return'';}function splitRestForGp(_0x3555a4){const _0x1dc9c1=_0x554c8d;if(!_0x3555a4)return{'left':'','gp':null};const _0x123455=_0x3555a4[_0x1dc9c1(0x295)](/\bgp[:\s]+(.+)$/i);if(_0x123455){const _0x351962=_0x3555a4[_0x1dc9c1(0x37a)](-0x875+-0x1*-0x1b7f+0x130a*-0x1,_0x123455[_0x1dc9c1(0x3a4)])[_0x1dc9c1(0x280)](),_0x9e50d5=_0x123455[0x2*0x1200+0x39f*0x3+0x176e*-0x2][_0x1dc9c1(0x280)]();return{'left':_0x351962,'gp':_0x9e50d5};}const _0x356b8d=_0x3555a4[_0x1dc9c1(0x2e7)](/\s+/)['filter'](Boolean);if(_0x356b8d[_0x1dc9c1(0x1b2)]>-0xf69+0x19e2+-0xa78){const _0x2497fb=_0x356b8d[_0x356b8d[_0x1dc9c1(0x1b2)]-(0x1caa+0x191e+0x27*-0x161)];if(_0x2497fb[_0x1dc9c1(0x1aa)+'e']()===_0x1dc9c1(0x3a3)||_0x2497fb['includes']('@'))return _0x356b8d[_0x1dc9c1(0x311)](),{'left':_0x356b8d[_0x1dc9c1(0x367)]('\x20')[_0x1dc9c1(0x280)](),'gp':_0x2497fb};}return{'left':_0x3555a4[_0x1dc9c1(0x280)](),'gp':null};}function parseLockCommandOneLine(_0x56c060){const _0x389b24=_0x554c8d,_0x6c251e=(_0x56c060||'')['split'](/\r?\n/)[0x4cc+-0x1dce+0x123*0x16][_0x389b24(0x280)]();let _0x2e37be=_0x6c251e['replace'](/^\/?lock\b/i,'')[_0x389b24(0x280)]();const {left:_0x108321,gp:_0x205340}=splitRestForGp(_0x2e37be),_0x4affeb=(_0x108321||'')['split'](',')[_0x389b24(0x1d7)](_0x5577cd=>_0x5577cd['trim']())[_0x389b24(0x284)](Boolean);return{'triggers':_0x4affeb,'gp':_0x205340};}function parseUnlockCommandOneLine(_0x4ac3ba){const _0x9bc269=_0x554c8d,_0x4c680a=(_0x4ac3ba||'')[_0x9bc269(0x2e7)](/\r?\n/)[-0x2264+0x1d5e+0x506]['trim']();let _0x105e5e=_0x4c680a[_0x9bc269(0x338)](/^\/?unlock\b/i,'')[_0x9bc269(0x280)]();const {left:_0x2ec8e3,gp:_0x134b45}=splitRestForGp(_0x105e5e),_0x289a18=(_0x2ec8e3||'')[_0x9bc269(0x2e7)](',')[_0x9bc269(0x1d7)](_0x153af3=>_0x153af3[_0x9bc269(0x280)]())[_0x9bc269(0x284)](Boolean);return{'parts':_0x289a18,'gp':_0x134b45};}function parseListCommandOneLine(_0x17c7a7){const _0x5b5aaa=_0x554c8d,_0x381a1e=(_0x17c7a7||'')[_0x5b5aaa(0x2e7)](/\r?\n/)[0x2b2+0x7e2*-0x1+0x530][_0x5b5aaa(0x280)]();let _0x46b98a=_0x381a1e[_0x5b5aaa(0x338)](/^\/?listlock\b/i,'')[_0x5b5aaa(0x280)]();const {left:_0x24d2ee,gp:_0x2e0a62}=splitRestForGp(_0x46b98a),_0x3b4fc9=_0x2e0a62||(_0x24d2ee?_0x24d2ee:null);return{'gp':_0x3b4fc9};}function parseLockNotifyCommandOneLine(_0x45cc09){const _0x1811f2=_0x554c8d,_0x281530=(_0x45cc09||'')[_0x1811f2(0x2e7)](/\r?\n/)[-0x1a*0xaf+-0x223f*0x1+0x3405][_0x1811f2(0x280)]();let _0x1fbe94=_0x281530[_0x1811f2(0x338)](/^\/?locknotify\b/i,'')['trim']();const {left:_0x17794f,gp:_0x320a4c}=splitRestForGp(_0x1fbe94),_0x4b25de=(_0x17794f||'')[_0x1811f2(0x1aa)+'e']();let _0x2fc4b1=null;if(_0x4b25de[_0x1811f2(0x1da)]('on'))_0x2fc4b1='on';else{if(_0x4b25de[_0x1811f2(0x1da)](_0x1811f2(0x2d2)))_0x2fc4b1='off';}return{'mode':_0x2fc4b1,'gp':_0x320a4c};}async function validateStoredRegexes(){const _0x1725c4=_0x554c8d;try{const _0x5de61b=await db[_0x1725c4(0x3a3)](_0x1725c4(0x208)+_0x1725c4(0x19a)+'OM\x20locks\x20W'+_0x1725c4(0x2c1)+_0x1725c4(0x35a)+_0x1725c4(0x2a0)+_0x1725c4(0x276)+_0x1725c4(0x2d4));for(const _0x5d8196 of _0x5de61b||[]){try{new RegExp(_0x5d8196[_0x1725c4(0x239)]),await db[_0x1725c4(0x345)]('UPDATE\x20loc'+_0x1725c4(0x1b9)+'valid_rege'+_0x1725c4(0x225)+_0x1725c4(0x1d6),[_0x5d8196['id']]);}catch(_0x1506bc){await db[_0x1725c4(0x345)](_0x1725c4(0x17a)+_0x1725c4(0x1b9)+_0x1725c4(0x2b5)+'x\x20=\x200\x20WHER'+'E\x20id\x20=\x20?',[_0x5d8196['id']]);}}}catch(_0x49b476){warn(_0x1725c4(0x1c7)+'idateStore'+'dRegexes\x20e'+_0x1725c4(0x1a2)+(_0x49b476?.[_0x1725c4(0x179)]||_0x49b476));}}async function findStoredMatchFromFindings(_0x18cbf0=[]){const _0x2b648c=_0x554c8d;try{const _0x39bc46=await listSudo();if(!Array[_0x2b648c(0x337)](_0x39bc46)||_0x39bc46[_0x2b648c(0x1b2)]===0x22b4*0x1+0x1*-0x16a9+-0xc0b)return null;const _0x2f90f2=new Set(_0x39bc46[_0x2b648c(0x1d7)](String));for(const _0x1284e9 of _0x18cbf0||[]){if(!_0x1284e9||typeof _0x1284e9[_0x2b648c(0x396)]!==_0x2b648c(0x313))continue;const _0x5dbde4=normalizeToJid(_0x1284e9['jid']);if(_0x5dbde4&&_0x2f90f2[_0x2b648c(0x1f1)](_0x5dbde4))return _0x5dbde4;if(_0x2f90f2[_0x2b648c(0x1f1)](_0x1284e9['jid']))return _0x1284e9[_0x2b648c(0x396)];const _0x33f870=String(_0x1284e9['jid'])['split']('@')[0xaa1*-0x1+0x1c5e+-0xef*0x13][_0x2b648c(0x2e7)](':')[0x1f*-0x11f+-0x7d3+0x2a94];if(_0x33f870)for(const _0xe75e48 of _0x39bc46){const _0x1bb3b9=String(_0xe75e48)[_0x2b648c(0x2e7)]('@')[0x13a6*0x1+0x1*0xe05+-0x21ab];if(_0x1bb3b9&&_0x1bb3b9===_0x33f870)return _0xe75e48;}}return null;}catch(_0x2221e2){return warn(_0x2b648c(0x26d)+'dStoredMat'+_0x2b648c(0x1fd)+_0x2b648c(0x290)+':\x20'+(_0x2221e2?.[_0x2b648c(0x179)]||_0x2221e2)),null;}}export async function initialize(_0x201aca){const _0x1d9e40=_0x554c8d;if(!_0x201aca)throw new Error(_0x1d9e40(0x30b)+'alize\x20requ'+_0x1d9e40(0x278)+_0x1d9e40(0x1ff));botRef=_0x201aca,setupSendApi();try{const _0x5d004b=getConfig()||{},_0x5a394e=_0x5d004b&&_0x5d004b[_0x1d9e40(0x25c)]?_0x5d004b[_0x1d9e40(0x25c)]:{};CFG[_0x1d9e40(0x297)+_0x1d9e40(0x2f1)]=_0x5a394e[_0x1d9e40(0x297)+_0x1d9e40(0x2f1)]??DEFAULTS[_0x1d9e40(0x297)+_0x1d9e40(0x2f1)],CFG[_0x1d9e40(0x1be)+'NG']=_0x5a394e[_0x1d9e40(0x1be)+'NG']??DEFAULTS[_0x1d9e40(0x1be)+'NG'],CFG[_0x1d9e40(0x2b0)+_0x1d9e40(0x181)]=_0x5a394e[_0x1d9e40(0x2b0)+_0x1d9e40(0x181)]??DEFAULTS['WARNING_ME'+'SSAGE'],CFG['WARNING_TT'+'L_MS']=Number[_0x1d9e40(0x185)](_0x5a394e['WARNING_TT'+'L_MS'])?_0x5a394e['WARNING_TT'+'L_MS']:DEFAULTS[_0x1d9e40(0x1f9)+'L_MS'],CFG[_0x1d9e40(0x2f2)+_0x1d9e40(0x32b)]=Number[_0x1d9e40(0x185)](_0x5a394e[_0x1d9e40(0x2f2)+_0x1d9e40(0x32b)])?_0x5a394e[_0x1d9e40(0x2f2)+_0x1d9e40(0x32b)]:DEFAULTS[_0x1d9e40(0x2f2)+_0x1d9e40(0x32b)],CFG[_0x1d9e40(0x1ba)]=Number[_0x1d9e40(0x185)](_0x5a394e['BATCH_SIZE'])?_0x5a394e[_0x1d9e40(0x1ba)]:DEFAULTS['BATCH_SIZE'],CFG[_0x1d9e40(0x255)+_0x1d9e40(0x193)]=Number[_0x1d9e40(0x185)](_0x5a394e[_0x1d9e40(0x255)+_0x1d9e40(0x193)])?_0x5a394e[_0x1d9e40(0x255)+_0x1d9e40(0x193)]:DEFAULTS['BATCH_DELA'+_0x1d9e40(0x193)],CFG[_0x1d9e40(0x308)+_0x1d9e40(0x361)]=Number[_0x1d9e40(0x185)](_0x5a394e[_0x1d9e40(0x308)+_0x1d9e40(0x361)])?_0x5a394e['GLOBAL_CON'+_0x1d9e40(0x361)]:DEFAULTS[_0x1d9e40(0x308)+_0x1d9e40(0x361)],CFG['NORMALIZE_'+'REMOVE_DIA'+_0x1d9e40(0x37c)]=!!_0x5a394e[_0x1d9e40(0x1b7)+_0x1d9e40(0x2ec)+'CRITICS'];}catch(_0x25e7a8){warn(_0x1d9e40(0x2d0)+_0x1d9e40(0x314)+'ailed,\x20usi'+'ng\x20default'+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info(_0x1d9e40(0x2fa)+_0x1d9e40(0x319)+_0x1d9e40(0x309)+_0x1d9e40(0x1a7)+_0x1d9e40(0x20c)+'run)');}catch(_0x4d7e93){error(_0x4d7e93,_0x1d9e40(0x2fa)+_0x1d9e40(0x2e6)+_0x1d9e40(0x35f));throw _0x4d7e93;}}export async function onMessage(_0x5ef09b){const _0x1e3fb3=_0x554c8d;try{if(!_0x5ef09b||!_0x5ef09b[_0x1e3fb3(0x2f6)]||!_0x5ef09b[_0x1e3fb3(0x179)])return;const _0x13570a=_0x5ef09b[_0x1e3fb3(0x2f6)]?.['id']||_0x5ef09b[_0x1e3fb3(0x2f6)]?.[_0x1e3fb3(0x394)+'t']||(_0x5ef09b[_0x1e3fb3(0x2f6)]?.['fromMe']?_0x1e3fb3(0x209):''),_0x429df8=String(_0x5ef09b[_0x1e3fb3(0x2f6)]['remoteJid']||'')+'::'+String(_0x13570a||'');if(isProcessed(_0x429df8))return;markProcessed(_0x429df8);const _0x504a15=extractTextFromMessage(_0x5ef09b);if(!_0x504a15)return;const _0x48b926=_0x5ef09b[_0x1e3fb3(0x2f6)][_0x1e3fb3(0x36a)],_0x195cbb=typeof _0x48b926==='string'&&_0x48b926[_0x1e3fb3(0x2d5)](_0x1e3fb3(0x2b7)),_0xbe6b6c=_0x5ef09b[_0x1e3fb3(0x2f6)]?.[_0x1e3fb3(0x394)+'t']||_0x5ef09b[_0x1e3fb3(0x2f6)]?.[_0x1e3fb3(0x240)]||_0x5ef09b['key']?.[_0x1e3fb3(0x36a)]||'',_0x59eae9=String(_0xbe6b6c||'')['split']('@')[-0x14fb+-0x114b*-0x1+0x8*0x76];let _0x391f90=![];if(_0x195cbb)try{_0x391f90=await isadmin(botRef,_0x5ef09b);}catch(_0x2b11fc){warn(_0x1e3fb3(0x189)+_0x1e3fb3(0x3a0)+_0x1e3fb3(0x38c)),_0x391f90=![];}if(_0x5ef09b[_0x1e3fb3(0x2fd)]){const _0x5d7e45=typeof _0x5ef09b['text']===_0x1e3fb3(0x313)&&_0x5ef09b[_0x1e3fb3(0x304)][_0x1e3fb3(0x280)]()[_0x1e3fb3(0x1b2)]?_0x5ef09b[_0x1e3fb3(0x304)]['trim']():_0x504a15[_0x1e3fb3(0x280)](),_0x3fdb80=(_0x5d7e45[_0x1e3fb3(0x2e7)](/\s+/)[0x1541+0x10*0x240+-0x1*0x3941]||'')[_0x1e3fb3(0x1aa)+'e']();if(!_0x195cbb){const _0x280f28=Boolean(_0x5ef09b[_0x1e3fb3(0x2f6)][_0x1e3fb3(0x209)]);let _0x30278b=null;if(_0x280f28){const _0x4f7913=getBotJid();_0x30278b=_0x4f7913||_0x5ef09b[_0x1e3fb3(0x2f6)][_0x1e3fb3(0x36a)];}else{let _0x1f4133=![];try{_0x1f4133=await isSudo(botRef,_0x5ef09b);}catch(_0x52da80){_0x1f4133=![];}if(!_0x1f4133)return;const _0x5c8eda=userJidFromCtx(_0x5ef09b)||{'findings':[]},_0x23594f=await findStoredMatchFromFindings(_0x5c8eda['findings']||[]);if(!_0x23594f)return;_0x30278b=_0x23594f;}if(!_0x30278b)return;if(_0x3fdb80==='lock'){const {triggers:_0x366a7e,gp:_0x271a8f}=parseLockCommandOneLine(_0x5d7e45||_0x504a15);if(!_0x366a7e['length']){await sendText(_0x30278b,_0x1e3fb3(0x383)+'line\x20usage'+_0x1e3fb3(0x23a)+_0x1e3fb3(0x35e)+_0x1e3fb3(0x1e3)+_0x1e3fb3(0x310)+'|all>');return;}if(!_0x271a8f){await sendText(_0x30278b,_0x1e3fb3(0x2e0)+_0x1e3fb3(0x242)+_0x1e3fb3(0x322)+'\x20Example:\x20'+'lock\x20bad1,'+'bad2\x20gp:al'+_0x1e3fb3(0x2b3));return;}let _0x240106=[];const _0x466107=_0x271a8f[_0x1e3fb3(0x280)]();if(_0x466107['toLowerCas'+'e']()==='all')_0x240106=await _0x5f4f20[_0x1e3fb3(0x35d)+_0x1e3fb3(0x352)]();else{const _0x19adc0=await _0x5f4f20['resolveNam'+'e'](_0x466107);if(_0x19adc0)_0x240106=[_0x19adc0];else{if(_0x466107['includes']('@'))_0x240106=[_0x5f4f20[_0x1e3fb3(0x1d0)+_0x1e3fb3(0x369)](_0x466107)];else{await sendText(_0x30278b,'❌\x20Unknown\x20'+'gp\x20alias/j'+_0x1e3fb3(0x18f)+_0x466107+'\x22.');return;}}}let _0x2b3d87=0x289*0x6+0xa*0xad+-0x15f8;for(const _0x32571d of uniqArray(_0x240106)){for(const _0x312488 of _0x366a7e){const _0x159625=await addLock(_0x32571d,_0x312488,_0xbe6b6c);if(_0x159625)_0x2b3d87++;}}await sendText(_0x30278b,_0x1e3fb3(0x1ce)+_0x2b3d87+_0x1e3fb3(0x30f));return;}if(_0x3fdb80===_0x1e3fb3(0x29f)){const {gp:_0x29287b}=parseListCommandOneLine(_0x5d7e45||_0x504a15);if(!_0x29287b){await sendText(_0x30278b,_0x1e3fb3(0x383)+'line\x20usage'+_0x1e3fb3(0x2f3)+_0x1e3fb3(0x265)+_0x1e3fb3(0x1cc));return;}let _0x39dd61=[];if(_0x29287b['toLowerCas'+'e']()===_0x1e3fb3(0x3a3))_0x39dd61=await _0x5f4f20[_0x1e3fb3(0x35d)+'ids']();else{const _0x12c451=await _0x5f4f20[_0x1e3fb3(0x1ee)+'e'](_0x29287b);if(_0x12c451)_0x39dd61=[_0x12c451];else{if(_0x29287b[_0x1e3fb3(0x1da)]('@'))_0x39dd61=[_0x5f4f20['normalizeT'+'oUserJid'](_0x29287b)];else{await sendText(_0x30278b,'❌\x20Unknown\x20'+_0x1e3fb3(0x384)+_0x1e3fb3(0x18f)+_0x29287b+'\x22.');return;}}}let _0x39f741=[];for(const _0x5014be of _0x39dd61){const _0x521a9b=await listLocksForChat(_0x5014be);for(const _0x4d7f35 of _0x521a9b)_0x39f741['push']({'chatJid':_0x5014be,..._0x4d7f35});}await sendText(_0x30278b,_0x1e3fb3(0x263)+_0x39f741['length']+(_0x1e3fb3(0x2c8)+_0x1e3fb3(0x252)+_0x1e3fb3(0x264)+'rgets.'));if(!_0x39f741['length'])return;let _0x133da9='';for(const _0x13ff5d of _0x39f741){const _0x60173=_0x13ff5d['created_at']?new Date(_0x13ff5d['created_at']*(-0x1305+0x3cb*-0x2+-0x6b*-0x49))[_0x1e3fb3(0x1e1)+'g']()['slice'](-0x1b*0x15+-0x380+0x85*0xb,-0x25ff+0x2124+-0xb3*-0x7):'',_0x59f9cf=_0x13ff5d[_0x1e3fb3(0x1e0)]==='regex'?'⦿':_0x13ff5d[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x326)?'✶':'',_0x583f60=_0x13ff5d[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x16e)?'regex:'+_0x13ff5d[_0x1e3fb3(0x239)]:_0x13ff5d[_0x1e3fb3(0x239)],_0xbe1716=_0x13ff5d[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x16e)&&_0x13ff5d[_0x1e3fb3(0x257)+_0x1e3fb3(0x260)]===0x34*0x36+-0x37*0x8b+0x7*0x2b3?'\x20(INVALID\x20'+_0x1e3fb3(0x2c9):'',_0x59175d=_0x13ff5d[_0x1e3fb3(0x368)]+':'+_0x13ff5d['id']+'.\x20'+(_0x59f9cf?_0x59f9cf+'\x20':'')+_0x583f60+_0xbe1716+'\x20'+(_0x60173?'('+_0x60173+')':'')+'\x0a';(_0x133da9+_0x59175d)[_0x1e3fb3(0x1b2)]>0x1*-0x7fb+0x19dd+0x26*-0x51&&(await sendText(_0x30278b,_0x133da9['trim']()),_0x133da9=''),_0x133da9+=_0x59175d;}if(_0x133da9['trim']())await sendText(_0x30278b,_0x133da9[_0x1e3fb3(0x280)]());return;}if([_0x1e3fb3(0x366),_0x1e3fb3(0x323),'delock',_0x1e3fb3(0x267),_0x1e3fb3(0x279)][_0x1e3fb3(0x1da)](_0x3fdb80)){const {parts:_0x29ff4b,gp:_0x117eb9}=parseUnlockCommandOneLine(_0x5d7e45||_0x504a15);if(!_0x29ff4b?.[_0x1e3fb3(0x1b2)]){await sendText(_0x30278b,_0x1e3fb3(0x383)+_0x1e3fb3(0x305)+_0x1e3fb3(0x222)+_0x1e3fb3(0x2d1)+_0x1e3fb3(0x291)+_0x1e3fb3(0x379)+_0x1e3fb3(0x1b5)+_0x1e3fb3(0x1dd));return;}if(!_0x117eb9){await sendText(_0x30278b,'❌\x20PM:\x20incl'+'ude\x20gp\x20in\x20'+_0x1e3fb3(0x322)+'\x20Example:\x20'+_0x1e3fb3(0x230)+'\x20gp:alias');return;}let _0x48c6d6=[];const _0x53ce74=_0x117eb9['trim']();if(_0x53ce74[_0x1e3fb3(0x1aa)+'e']()===_0x1e3fb3(0x3a3))_0x48c6d6=await _0x5f4f20[_0x1e3fb3(0x35d)+_0x1e3fb3(0x352)]();else{const _0x5088b4=await _0x5f4f20[_0x1e3fb3(0x1ee)+'e'](_0x53ce74);if(_0x5088b4)_0x48c6d6=[_0x5088b4];else{if(_0x53ce74['includes']('@'))_0x48c6d6=[_0x5f4f20[_0x1e3fb3(0x1d0)+'oUserJid'](_0x53ce74)];else{await sendText(_0x30278b,_0x1e3fb3(0x198)+'gp\x20alias/j'+_0x1e3fb3(0x18f)+_0x53ce74+'\x22.');return;}}}let _0x5692d0=-0x17*-0xc7+-0xad3+0x387*-0x2;for(const _0x2fd4aa of _0x29ff4b){if(!_0x2fd4aa)continue;if(/^\d+$/[_0x1e3fb3(0x2e3)](_0x2fd4aa)){for(const _0x121dfc of _0x48c6d6){const _0x2fe818=await deleteLockById(_0x121dfc,_0x2fd4aa);if(_0x2fe818)_0x5692d0+=_0x2fe818;}continue;}for(const _0x3c21ac of _0x48c6d6){const _0x39177c=await deleteLockByPhrase(_0x3c21ac,_0x2fd4aa);if(_0x39177c)_0x5692d0+=_0x39177c;}}await sendText(_0x30278b,'✔️\x20Deleted\x20'+_0x5692d0+'/'+_0x29ff4b['length']+_0x1e3fb3(0x30f));return;}if(_0x3fdb80===_0x1e3fb3(0x3ab)||_0x3fdb80===_0x1e3fb3(0x24a)||_0x3fdb80==='clearlocks'){const _0x5ba567=(_0x5d7e45||_0x504a15||'')[_0x1e3fb3(0x2e7)](/\r?\n/)[-0x25*0x4+-0x13b*0xf+-0x1*-0x1309]['trim'](),_0x1a8cd9=_0x5ba567[_0x1e3fb3(0x338)](/^\/?(unlockall|delall|clearlocks)\b/i,'')[_0x1e3fb3(0x280)](),{left:_0x514978,gp:_0x22547a}=splitRestForGp(_0x1a8cd9);if(!_0x22547a){await sendText(_0x30278b,_0x1e3fb3(0x383)+_0x1e3fb3(0x305)+_0x1e3fb3(0x250)+_0x1e3fb3(0x17d)+_0x1e3fb3(0x30e));return;}let _0x7781fc=[];const _0x438cf7=_0x22547a['trim']();if(_0x438cf7['toLowerCas'+'e']()===_0x1e3fb3(0x3a3))_0x7781fc=await _0x5f4f20[_0x1e3fb3(0x35d)+_0x1e3fb3(0x352)]();else{const _0x3b737f=await _0x5f4f20['resolveNam'+'e'](_0x438cf7);if(_0x3b737f)_0x7781fc=[_0x3b737f];else{if(_0x438cf7['includes']('@'))_0x7781fc=[_0x5f4f20[_0x1e3fb3(0x1d0)+_0x1e3fb3(0x369)](_0x438cf7)];else{await sendText(_0x30278b,_0x1e3fb3(0x198)+_0x1e3fb3(0x384)+_0x1e3fb3(0x18f)+_0x438cf7+'\x22.');return;}}}let _0x39a820=-0x823*-0x1+-0x7*0x1f3+0x582;for(const _0x42ec02 of _0x7781fc){const _0x266458=await deleteAllLocksForChat(_0x42ec02);_0x39a820+=_0x266458||-0x1*0x1591+-0x1382+-0xdb1*-0x3;}await sendText(_0x30278b,'✔️\x20Deleted\x20'+_0x39a820+_0x1e3fb3(0x30f));return;}if(_0x3fdb80===_0x1e3fb3(0x362)){const _0x14a3d2=parseLockNotifyCommandOneLine(_0x5d7e45||_0x504a15),{mode:_0x3e6304,gp:_0x4d6696}=_0x14a3d2;if(!_0x4d6696){await sendText(_0x30278b,'❌\x20PM\x20one-l'+_0x1e3fb3(0x339)+'\x20locknotif'+_0x1e3fb3(0x3ae)+'\x20gp:<alias'+_0x1e3fb3(0x17c)+'To\x20query\x20s'+_0x1e3fb3(0x20a)+_0x1e3fb3(0x360)+':<alias|ji'+_0x1e3fb3(0x1b6));return;}let _0x547a90=[];const _0xf7d38e=_0x4d6696[_0x1e3fb3(0x280)]();if(_0xf7d38e[_0x1e3fb3(0x1aa)+'e']()===_0x1e3fb3(0x3a3))_0x547a90=await _0x5f4f20[_0x1e3fb3(0x35d)+_0x1e3fb3(0x352)]();else{const _0x34423e=await _0x5f4f20[_0x1e3fb3(0x1ee)+'e'](_0xf7d38e);if(_0x34423e)_0x547a90=[_0x34423e];else{if(_0xf7d38e[_0x1e3fb3(0x1da)]('@'))_0x547a90=[_0x5f4f20['normalizeT'+_0x1e3fb3(0x369)](_0xf7d38e)];else{await sendText(_0x30278b,_0x1e3fb3(0x198)+'gp\x20alias/j'+'id:\x20\x22'+_0xf7d38e+'\x22.');return;}}}if(!_0x3e6304){const _0x38025e=[];for(const _0x50ebe5 of uniqArray(_0x547a90)){const _0x4d659e=await getLockNotify(_0x50ebe5)[_0x1e3fb3(0x37f)](()=>0x1*-0x1365+0x19cb+-0x4e*0x15);_0x38025e['push'](_0x50ebe5+':\x20'+(_0x4d659e?'ON':_0x1e3fb3(0x1a1)));}await sendText(_0x30278b,_0x1e3fb3(0x307)+_0x1e3fb3(0x31f)+_0x1e3fb3(0x26c)+_0x38025e[_0x1e3fb3(0x367)]('\x0a'));return;}let _0x27f392=0x1ad0+-0xf48+0x8*-0x171;for(const _0x1df6a3 of uniqArray(_0x547a90)){const _0x4cbe88=await setLockNotify(_0x1df6a3,_0x3e6304==='on');if(_0x4cbe88)_0x27f392++;}await sendText(_0x30278b,_0x1e3fb3(0x221)+_0x1e3fb3(0x31b)+_0x3e6304+_0x1e3fb3(0x2ce)+_0x27f392+'/'+_0x547a90[_0x1e3fb3(0x1b2)]+('\x20target(s)'+'.'));return;}return;}if(_0x195cbb){if(!_0x391f90)return;const _0x41f292=_0x48b926,_0x103fb0=await getDefault(_0x59eae9)['catch'](()=>null);if(!_0x103fb0||Array[_0x1e3fb3(0x337)](_0x103fb0)&&_0x103fb0[_0x1e3fb3(0x1b2)]===-0x1991+-0x1*0x1b67+0x34f8)return;const _0x2c7af1=Array[_0x1e3fb3(0x337)](_0x103fb0)?_0x103fb0:[_0x103fb0];let _0x46051e=[];for(const _0x2d1834 of _0x2c7af1){try{const _0x3cd836=await getConnection(_0x2d1834)[_0x1e3fb3(0x37f)](()=>null);if(Array[_0x1e3fb3(0x337)](_0x3cd836))_0x46051e[_0x1e3fb3(0x324)](..._0x3cd836);else{if(_0x3cd836)_0x46051e[_0x1e3fb3(0x324)](String(_0x3cd836));}}catch(_0x4ea46c){warn(_0x1e3fb3(0x350)+_0x1e3fb3(0x2bb)+_0x1e3fb3(0x2b8)+_0x2d1834+_0x1e3fb3(0x219)+(_0x4ea46c?.[_0x1e3fb3(0x179)]||_0x4ea46c));}}_0x46051e=uniqArray(_0x46051e);if(!_0x46051e['length']){await sendText(_0x41f292,_0x1e3fb3(0x229)+_0x1e3fb3(0x1c8)+_0x1e3fb3(0x22b)+_0x1e3fb3(0x33a)+_0x1e3fb3(0x2ca)+_0x2c7af1[_0x1e3fb3(0x367)](',\x20')+(_0x1e3fb3(0x34e)+_0x1e3fb3(0x1bc)+'efault\x20val'+_0x1e3fb3(0x333)));return;}if(_0x3fdb80===_0x1e3fb3(0x28d)){const {triggers:_0x3e14fa}=parseLockCommandOneLine(_0x5d7e45||_0x504a15);if(!_0x3e14fa[_0x1e3fb3(0x1b2)]){await sendText(_0x41f292,_0x1e3fb3(0x21b)+_0x1e3fb3(0x27f)+':\x20lock\x20tri'+_0x1e3fb3(0x35c)+_0x1e3fb3(0x177));return;}let _0x614068=0x1*-0x1825+-0x20b+0x4*0x68c;for(const _0x5058d8 of _0x46051e){let _0x1e297c=0xddf*-0x1+-0x1fb9+0x2d98;for(const _0x2ffbf5 of _0x3e14fa){const _0x208263=await addLock(_0x5058d8,_0x2ffbf5,_0xbe6b6c);if(_0x208263)_0x1e297c++;}_0x614068+=_0x1e297c;}await sendText(_0x41f292,_0x1e3fb3(0x1ce)+_0x614068+'/'+_0x3e14fa[_0x1e3fb3(0x1b2)]*_0x46051e[_0x1e3fb3(0x1b2)]+(_0x1e3fb3(0x2da)+_0x1e3fb3(0x22d)+_0x1e3fb3(0x3a9)+_0x1e3fb3(0x211)+_0x1e3fb3(0x1ca))+_0x46051e[_0x1e3fb3(0x367)](',\x20'));return;}if(_0x3fdb80==='listlock'){const _0x2abf4d=[];for(const _0x46ae62 of _0x46051e){const _0x369cc7=await listLocksForChat(_0x46ae62);for(const _0xf4b708 of _0x369cc7)_0x2abf4d['push']({'chatJid':_0x46ae62,..._0xf4b708});}await sendText(_0x41f292,_0x1e3fb3(0x307)+_0x1e3fb3(0x390)+_0x2abf4d[_0x1e3fb3(0x1b2)]+(_0x1e3fb3(0x1b8)+_0x1e3fb3(0x1cd)+_0x1e3fb3(0x1d5)+_0x1e3fb3(0x2c2))+_0x46051e[_0x1e3fb3(0x367)](',\x20'));if(!_0x2abf4d[_0x1e3fb3(0x1b2)])return;let _0x1c36a4='';for(const _0xd64ba0 of _0x2abf4d){const _0x5f3072=_0xd64ba0[_0x1e3fb3(0x2f7)]?new Date(_0xd64ba0['created_at']*(-0x1*-0x26a9+0xc84+-0x2f45))[_0x1e3fb3(0x1e1)+'g']()[_0x1e3fb3(0x37a)](-0x1821+-0x1c6*0x2+0x1bad,0x5ee+-0x1a0f+0x142b):'',_0x3a4ef4=_0xd64ba0[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x16e)?'⦿':_0xd64ba0[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x326)?'✶':'',_0x4f8535=_0xd64ba0[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x16e)?_0x1e3fb3(0x187)+_0xd64ba0[_0x1e3fb3(0x239)]:_0xd64ba0[_0x1e3fb3(0x239)],_0x18bbb5=_0xd64ba0[_0x1e3fb3(0x1e0)]==='regex'&&_0xd64ba0[_0x1e3fb3(0x257)+'egex']===0x6*-0x623+0x1889*-0x1+0x3d5b*0x1?_0x1e3fb3(0x20d)+_0x1e3fb3(0x2c9):'',_0x2ea602=_0xd64ba0['chatJid']+':'+_0xd64ba0['id']+'.\x20'+(_0x3a4ef4?_0x3a4ef4+'\x20':'')+_0x4f8535+_0x18bbb5+'\x20'+(_0x5f3072?'('+_0x5f3072+')':'')+'\x0a';(_0x1c36a4+_0x2ea602)['length']>0x44*0x67+-0x7e7+-0xd99&&(await sendText(_0x41f292,_0x1c36a4[_0x1e3fb3(0x280)]()),_0x1c36a4=''),_0x1c36a4+=_0x2ea602;}if(_0x1c36a4[_0x1e3fb3(0x280)]())await sendText(_0x41f292,_0x1c36a4[_0x1e3fb3(0x280)]());return;}if(['unlock',_0x1e3fb3(0x323),_0x1e3fb3(0x279),_0x1e3fb3(0x267),'delock'][_0x1e3fb3(0x1da)](_0x3fdb80)){const {parts:_0x4e8166}=parseUnlockCommandOneLine(_0x5d7e45||_0x504a15);if(!_0x4e8166?.[_0x1e3fb3(0x1b2)]){await sendText(_0x41f292,'❌\x20Usage\x20(g'+_0x1e3fb3(0x27f)+':\x20unlock\x201'+_0x1e3fb3(0x1d8)+'ck\x20phrase1'+_0x1e3fb3(0x1c3));return;}const _0x214b3b=new Map();for(const _0x4be973 of _0x46051e){const _0x572e38=await listLocksForChat(_0x4be973);_0x214b3b['set'](_0x4be973,_0x572e38||[]);}let _0xf703da=0x46+0x221d*0x1+-0x2263;for(const _0x44cffd of _0x4e8166){if(!_0x44cffd)continue;if(/^\d+$/[_0x1e3fb3(0x2e3)](_0x44cffd)){for(const [_0x1d6e7a,_0x3ac2d8]of _0x214b3b['entries']()){if(_0x3ac2d8['find'](_0x56515a=>String(_0x56515a['id'])===_0x44cffd)){const _0xe07249=await deleteLockById(_0x1d6e7a,_0x44cffd);if(_0xe07249)_0xf703da+=_0xe07249;}}continue;}for(const _0x9f3ad1 of _0x46051e){const _0x31225c=await deleteLockByPhrase(_0x9f3ad1,_0x44cffd);if(_0x31225c)_0xf703da+=_0x31225c;}}await sendText(_0x41f292,_0x1e3fb3(0x21e)+_0xf703da+'/'+_0x4e8166['length']+(_0x1e3fb3(0x1a9)+_0x1e3fb3(0x22c)+_0x1e3fb3(0x25d)+_0x1e3fb3(0x2f0)+':\x20')+_0x46051e[_0x1e3fb3(0x367)](',\x20'));return;}if(_0x3fdb80===_0x1e3fb3(0x3ab)||_0x3fdb80===_0x1e3fb3(0x24a)||_0x3fdb80==='clearlocks'){try{let _0x1224a7=0x161*0x19+-0x86*0x43+-0x99*-0x1;for(const _0x2ec812 of _0x46051e){const _0x429d71=await deleteAllLocksForChat(_0x2ec812);_0x1224a7+=_0x429d71||-0x12b6+0x1*0x1645+-0x38f;}await sendText(_0x41f292,'✔️\x20Deleted\x20'+_0x1224a7+(_0x1e3fb3(0x1a9)+_0x1e3fb3(0x22c)+'efault\x20con'+'nection(s)'+':\x20')+_0x46051e['join'](',\x20'));}catch(_0x1f5ff4){warn(_0x1e3fb3(0x244)+_0x1e3fb3(0x372)+_0x1e3fb3(0x24c)+_0x46051e['join'](',\x20')+':\x20'+(_0x1f5ff4?.['message']||_0x1f5ff4)),await sendText(_0x41f292,_0x1e3fb3(0x16f)+_0x1e3fb3(0x215)+'ocks\x20for\x20y'+_0x1e3fb3(0x1fa)+_0x1e3fb3(0x2d7)+_0x1e3fb3(0x2cc)+_0x46051e[_0x1e3fb3(0x367)](',\x20'));}return;}if(_0x3fdb80===_0x1e3fb3(0x362)){const _0x19380d=(_0x5d7e45||_0x504a15||'')[_0x1e3fb3(0x2e7)](/\r?\n/)[-0x1*-0x2ca+-0x1*0x2529+0x225f][_0x1e3fb3(0x280)](),{left:_0x3c2259}=splitRestForGp(_0x19380d[_0x1e3fb3(0x338)](/^\/?locknotify\b/i,'')[_0x1e3fb3(0x280)]()),_0x478780=(_0x3c2259||'')[_0x1e3fb3(0x1aa)+'e']();if(!_0x478780['includes']('on')&&!_0x478780[_0x1e3fb3(0x1da)](_0x1e3fb3(0x2d2))){await sendText(_0x41f292,_0x1e3fb3(0x21b)+'roup-only)'+_0x1e3fb3(0x364)+_0x1e3fb3(0x19f)+_0x1e3fb3(0x203)+_0x1e3fb3(0x2e5)+'tification'+_0x1e3fb3(0x207)+_0x1e3fb3(0x363)+'onnection('+_0x1e3fb3(0x204));return;}const _0x213f78=_0x478780[_0x1e3fb3(0x1da)]('on')?'on':_0x1e3fb3(0x2d2);let _0x3dada3=0x1c7b*-0x1+0x2*-0x349+-0x9*-0x3e5;for(const _0x2ff99d of _0x46051e){const _0x39da6b=await setLockNotify(_0x2ff99d,_0x213f78==='on');if(_0x39da6b)_0x3dada3++;}await sendText(_0x41f292,_0x1e3fb3(0x221)+_0x1e3fb3(0x31b)+_0x213f78+_0x1e3fb3(0x2ce)+_0x3dada3+'/'+_0x46051e['length']+(_0x1e3fb3(0x302)+_0x1e3fb3(0x1e5)+_0x1e3fb3(0x204)));return;}return;}}if(_0x195cbb){if(!CFG[_0x1e3fb3(0x297)+_0x1e3fb3(0x2f1)])return;if(_0x5ef09b[_0x1e3fb3(0x2f6)][_0x1e3fb3(0x209)])return;if(_0x391f90)return;const _0x5a6927=_0x48b926,_0x5aa771=extractTextFromMessage(_0x5ef09b);if(!_0x5aa771)return;const _0x1dbc40=normalizeForMatch(String(_0x5aa771||''))[_0x1e3fb3(0x1aa)+'e'](),_0x5f484e=await listLocksForChat(_0x5a6927);if(!_0x5f484e||!_0x5f484e[_0x1e3fb3(0x1b2)])return;const _0x56ecda=_0x5f484e['filter'](_0x19b200=>!_0x19b200['type']||_0x19b200['type']===_0x1e3fb3(0x38e)),_0x51a2b2=_0x5f484e[_0x1e3fb3(0x284)](_0x174eb6=>_0x174eb6[_0x1e3fb3(0x1e0)]===_0x1e3fb3(0x326)),_0x385173=_0x5f484e[_0x1e3fb3(0x284)](_0x1bb743=>_0x1bb743['type']==='regex'||_0x1bb743['type']===_0x1e3fb3(0x24d)+_0x1e3fb3(0x202)),_0x4c908e=new Set(),_0x41dde1=new Set();if(_0x56ecda[_0x1e3fb3(0x1b2)]>0x2224+0x1fd6+-0x41fa){const _0x517e61=_0x56ecda[_0x1e3fb3(0x1d7)](_0x1813ae=>normalizeForMatch(String(_0x1813ae[_0x1e3fb3(0x239)]||'')))[_0x1e3fb3(0x284)](Boolean),_0x126d3e=_0x517e61['join']('\x00');let _0x4e5546;const _0x59efd1=ahoCache[_0x1e3fb3(0x342)](_0x5a6927);if(_0x59efd1&&_0x59efd1[_0x1e3fb3(0x358)+_0x1e3fb3(0x20b)]===_0x126d3e&&_0x59efd1[_0x1e3fb3(0x271)])_0x4e5546=_0x59efd1[_0x1e3fb3(0x271)];else try{_0x4e5546=new AhoCorasick(_0x517e61),ahoCache[_0x1e3fb3(0x335)](_0x5a6927,{'serializedKeywords':_0x126d3e,'aho':_0x4e5546});}catch(_0x3aa6fb){warn(_0x1e3fb3(0x2a2)+'Corasick\x20b'+_0x1e3fb3(0x2aa)+_0x1e3fb3(0x35b)+_0x5a6927+':\x20'+(_0x3aa6fb?.[_0x1e3fb3(0x179)]||_0x3aa6fb)),_0x4e5546=null;}if(_0x4e5546)try{const _0x4b51a5=_0x4e5546[_0x1e3fb3(0x306)](_0x1dbc40);for(const _0x2ca61b of _0x4b51a5){const _0x1907da=_0x2ca61b[_0x1e3fb3(0x2d8)],_0x1ed85a=_0x2ca61b[_0x1e3fb3(0x3a4)],_0x17e61c=_0x1ed85a+_0x1907da[_0x1e3fb3(0x1b2)],_0x2b7b31=_0x1ed85a===0x1995+0x49*-0x67+0xa*0x61||!/\w/[_0x1e3fb3(0x2e3)](_0x1dbc40[_0x1ed85a-(-0x382*0x2+0x1*-0x1273+0x1978)]),_0xf5356f=_0x17e61c===_0x1dbc40[_0x1e3fb3(0x1b2)]||!/\w/[_0x1e3fb3(0x2e3)](_0x1dbc40[_0x17e61c]);if(_0x2b7b31&&_0xf5356f)for(const _0x1c2337 of _0x56ecda){const _0x37867a=normalizeForMatch(String(_0x1c2337[_0x1e3fb3(0x239)]||''));if(_0x37867a===_0x1907da)try{const _0x26ffc1=wholeWordRegexForPhrase(_0x37867a);_0x26ffc1['test'](_0x1dbc40)&&(_0x4c908e['add'](_0x1c2337['id']),_0x41dde1[_0x1e3fb3(0x1f5)](_0x1c2337[_0x1e3fb3(0x239)]));}catch(_0x5292eb){_0x4c908e[_0x1e3fb3(0x1f5)](_0x1c2337['id']),_0x41dde1['add'](_0x1c2337[_0x1e3fb3(0x239)]);}}else for(const _0xda41f5 of _0x56ecda){try{const _0xb8c006=wholeWordRegexForPhrase(normalizeForMatch(String(_0xda41f5[_0x1e3fb3(0x239)]||'')));_0xb8c006[_0x1e3fb3(0x2e3)](_0x1dbc40)&&(_0x4c908e[_0x1e3fb3(0x1f5)](_0xda41f5['id']),_0x41dde1['add'](_0xda41f5['phrase']));}catch(_0x530f87){}}}}catch(_0x2342b2){warn(_0x1e3fb3(0x2a2)+'Corasick\x20s'+_0x1e3fb3(0x176)+'ed:\x20'+(_0x2342b2?.['message']||_0x2342b2));for(const _0x1e52ac of _0x56ecda){try{const _0x4a38cc=wholeWordRegexForPhrase(normalizeForMatch(String(_0x1e52ac[_0x1e3fb3(0x239)]||'')));_0x4a38cc[_0x1e3fb3(0x2e3)](_0x1dbc40)&&(_0x4c908e[_0x1e3fb3(0x1f5)](_0x1e52ac['id']),_0x41dde1[_0x1e3fb3(0x1f5)](_0x1e52ac[_0x1e3fb3(0x239)]));}catch(_0x5c0045){}}}else for(const _0x1ed098 of _0x56ecda){try{const _0x4a7341=wholeWordRegexForPhrase(normalizeForMatch(String(_0x1ed098[_0x1e3fb3(0x239)]||'')));_0x4a7341[_0x1e3fb3(0x2e3)](_0x1dbc40)&&(_0x4c908e[_0x1e3fb3(0x1f5)](_0x1ed098['id']),_0x41dde1[_0x1e3fb3(0x1f5)](_0x1ed098[_0x1e3fb3(0x239)]));}catch(_0x315ab5){}}}if(_0x51a2b2[_0x1e3fb3(0x1b2)]>0x1bfb+0xd9+-0x1cd4)for(const _0x28adc9 of _0x51a2b2){try{const _0x48ae21=wildcardToRegex(String(_0x28adc9[_0x1e3fb3(0x239)]||''));_0x48ae21[_0x1e3fb3(0x2e3)](_0x1dbc40)&&(_0x4c908e[_0x1e3fb3(0x1f5)](_0x28adc9['id']),_0x41dde1[_0x1e3fb3(0x1f5)](_0x28adc9['phrase']));}catch(_0x2ae194){warn(_0x1e3fb3(0x33b)+_0x1e3fb3(0x238)+_0x1e3fb3(0x243)+'='+_0x28adc9['id']+'\x20phrase=\x22'+_0x28adc9[_0x1e3fb3(0x239)]+_0x1e3fb3(0x294)+(_0x2ae194?.['message']||_0x2ae194));}}if(_0x385173['length']>0x1*0x2069+0xc01+-0x5*0x8e2)for(const _0x184620 of _0x385173){try{if(_0x184620[_0x1e3fb3(0x257)+_0x1e3fb3(0x260)]===-0x6a0+-0x5bc*0x1+0xc5c){warn(_0x1e3fb3(0x21c)+_0x1e3fb3(0x36f)+'lid\x20stored'+_0x1e3fb3(0x236)+_0x184620['id']+_0x1e3fb3(0x318)+_0x184620[_0x1e3fb3(0x239)]+'\x22');continue;}const _0x266e0a=new RegExp(_0x184620[_0x1e3fb3(0x239)],'iu');_0x266e0a['test'](_0x1dbc40)&&(_0x4c908e[_0x1e3fb3(0x1f5)](_0x184620['id']),_0x41dde1[_0x1e3fb3(0x1f5)](_0x1e3fb3(0x187)+_0x184620[_0x1e3fb3(0x239)]));}catch(_0x20bff0){warn(_0x1e3fb3(0x33b)+_0x1e3fb3(0x1e2)+_0x1e3fb3(0x29c)+'r\x20id='+_0x184620['id']+_0x1e3fb3(0x318)+_0x184620[_0x1e3fb3(0x239)]+_0x1e3fb3(0x294)+(_0x20bff0?.[_0x1e3fb3(0x179)]||_0x20bff0));try{await db['run'](_0x1e3fb3(0x17a)+_0x1e3fb3(0x1b9)+_0x1e3fb3(0x2b5)+'x\x20=\x200\x20WHER'+_0x1e3fb3(0x1d6),[_0x184620['id']]);}catch(_0x5389c9){}}}if(_0x4c908e['size']>0x1*0x1b13+0x22e3+-0x3df6)try{try{const _0x2ddbaa=await getLockNotify(_0x5a6927)[_0x1e3fb3(0x37f)](()=>0x1782+-0xc75*-0x1+-0x23f7);if(_0x2ddbaa)try{const _0x49883f=await db[_0x1e3fb3(0x342)](_0x1e3fb3(0x217)+_0x1e3fb3(0x232)+_0x1e3fb3(0x1d3)+'\x20WHERE\x20key'+_0x1e3fb3(0x2c4)+'_jid\x27');let _0x51b201=_0x49883f?.[_0x1e3fb3(0x39d)]||null;if(!_0x51b201){const _0x199888=getBotJid();_0x51b201=_0x199888||null;}if(_0x51b201){const _0x90100=Array[_0x1e3fb3(0x240)](_0x41dde1)[_0x1e3fb3(0x37a)](0x55*-0x35+-0x2128+0x32c1,0x8a9+0x17*0xc9+-0x1ab2)[_0x1e3fb3(0x367)](',\x20'),_0x2ab2d1=_0x59eae9||String(_0xbe6b6c||'')[_0x1e3fb3(0x2e7)]('@')[0x19cd+-0x612+-0x13bb]||_0x1e3fb3(0x36b),_0x3b47fd=String(_0x5aa771||'')[_0x1e3fb3(0x280)](),_0x34a895=_0x1e3fb3(0x25f)+_0x1e3fb3(0x3a1)+_0x5a6927+'\x20by\x20@'+_0x2ab2d1+_0x1e3fb3(0x1ef)+_0x90100+'\x0aMessage:\x0a'+_0x3b47fd;await sendText(_0x51b201,_0x34a895,_0xbe6b6c?[_0xbe6b6c]:[]);}}catch(_0x374d30){warn(_0x1e3fb3(0x349)+'led\x20to\x20sen'+'d\x20locknoti'+_0x1e3fb3(0x180)+':\x20'+(_0x374d30?.[_0x1e3fb3(0x179)]||_0x374d30));}}catch(_0x4e76b3){warn(_0x1e3fb3(0x199)+'knotify\x20ch'+'eck\x20failed'+':\x20'+(_0x4e76b3?.['message']||_0x4e76b3));}enqueueDeletion(_0x5ef09b);for(const _0x315f04 of _0x4c908e){try{await db[_0x1e3fb3(0x345)](_0x1e3fb3(0x17a)+_0x1e3fb3(0x2ab)+_0x1e3fb3(0x36c)+_0x1e3fb3(0x374)+_0x1e3fb3(0x20e)+_0x1e3fb3(0x357),[_0x315f04]);}catch(_0x1bfd3a){}}}catch(_0x57aa1c){warn('[lock]\x20enf'+'orcement\x20f'+'ailed:\x20'+(_0x57aa1c?.[_0x1e3fb3(0x179)]||_0x57aa1c));}}}catch(_0x361c12){error(_0x361c12,_0x1e3fb3(0x28f)+_0x1e3fb3(0x282)+':\x20'+(_0x361c12?.[_0x1e3fb3(0x179)]||_0x361c12));}}export async function cleanup(){const _0x5cf679=_0x554c8d;shuttingDown=!![];for(const _0x3316f8 of processedMessageKeys[_0x5cf679(0x296)]())try{clearTimeout(_0x3316f8);}catch(_0x3ba87d){}processedMessageKeys[_0x5cf679(0x392)](),perChatQueue[_0x5cf679(0x392)](),perChatProcessing[_0x5cf679(0x392)](),activeChats=0x1551*0x1+-0x560*-0x4+0x71*-0x61,botRef=null,sendApi=null,ahoCache[_0x5cf679(0x392)](),info(_0x5cf679(0x388)+_0x5cf679(0x184));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};