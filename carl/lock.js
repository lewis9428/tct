const _0x23c891=_0x37fc;(function(_0x4925a3,_0x4538f1){const _0x98e699=_0x37fc,_0x2dfd43=_0x4925a3();while(!![]){try{const _0xf2e2d4=parseInt(_0x98e699(0x274))/(-0x1e9a*-0x1+0x56*0x67+-0x4133)*(parseInt(_0x98e699(0x20b))/(-0x4*-0x7ea+0x10b8+0x29*-0x12e))+parseInt(_0x98e699(0x2f0))/(-0x376*0x7+-0x19*-0x51+0x17c*0xb)*(-parseInt(_0x98e699(0x278))/(0xa4+-0x4*0x7d3+-0x1a*-0x12e))+parseInt(_0x98e699(0x183))/(-0x11c3*0x1+-0x79*0x43+0x3173)+-parseInt(_0x98e699(0x28a))/(-0x1ad+-0x10da+0x3*0x62f)+-parseInt(_0x98e699(0x19f))/(-0xe*-0x84+-0x1*-0x24ff+-0x2c30)*(-parseInt(_0x98e699(0x35d))/(0x1504+-0x7*0x64+-0x1240))+-parseInt(_0x98e699(0x324))/(0x1b5d+-0x5*0x48f+-0x489)*(-parseInt(_0x98e699(0x1b8))/(0xec9*0x1+0x2618+-0x34d7))+-parseInt(_0x98e699(0x1c3))/(-0x400*-0x7+0x18f1+0x11a2*-0x3)*(parseInt(_0x98e699(0x381))/(0x1257+-0x394+-0xeb7));if(_0xf2e2d4===_0x4538f1)break;else _0x2dfd43['push'](_0x2dfd43['shift']());}catch(_0x35b2b8){_0x2dfd43['push'](_0x2dfd43['shift']());}}}(_0x3fd2,0x5c3f3+-0x5c88b+-0xd17d3*-0x1));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x2261a2 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x23c891(0x217);export const version=_0x23c891(0x16a);export const priority=0x1*0xf85+-0x2*-0x10ed+-0x30e7;export const configKeys=[_0x23c891(0x340)];export const commands=[_0x23c891(0x2f2),_0x23c891(0x1a1),'unlockall','dellock','delock',_0x23c891(0x30d),_0x23c891(0x1be),'clearlocks','locknotify'];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x23c891(0x18a)+_0x23c891(0x17f)+_0x23c891(0x273)+'owed.','WARNING_TTL_MS':0x1388,'PER_CHAT_QUEUE_LIMIT':0x1f4,'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x1f4,'GLOBAL_CONCURRENCY':0x3,'NORMALIZE_REMOVE_DIACRITICS':![]};let CFG={...DEFAULTS};function uniqArray(_0x46ef09){const _0x4c3e8b=_0x23c891;if(!_0x46ef09)return[];const _0x54b76d=new Set(),_0x65281f=[];for(const _0x5e77dc of _0x46ef09){const _0x54693a=_0x5e77dc===undefined||_0x5e77dc===null?'':String(_0x5e77dc)[_0x4c3e8b(0x34e)]();if(!_0x54693a)continue;!_0x54b76d[_0x4c3e8b(0x187)](_0x54693a)&&(_0x54b76d[_0x4c3e8b(0x27b)](_0x54693a),_0x65281f[_0x4c3e8b(0x27f)](_0x54693a));}return _0x65281f;}const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x1426+-0x124b*0x2+0x2*0x1c5e,shuttingDown=![];const processedMessageKeys=new Map(),DEDUPE_TTL_MS=(-0x1*0x263f+-0x2*-0x475+-0x9db*-0x3)*(0xee*0x25+-0x1d*0xa9+-0x19f*0x7);function markProcessed(_0x340433){const _0x5e707e=_0x23c891;if(!_0x340433)return;if(processedMessageKeys[_0x5e707e(0x187)](_0x340433))try{clearTimeout(processedMessageKeys[_0x5e707e(0x252)](_0x340433));}catch(_0x36b1dd){}const _0x4fa246=setTimeout(()=>processedMessageKeys[_0x5e707e(0x172)](_0x340433),DEDUPE_TTL_MS);processedMessageKeys[_0x5e707e(0x26b)](_0x340433,_0x4fa246);}function isProcessed(_0x5caa1e){const _0x13191b=_0x23c891;return _0x5caa1e&&processedMessageKeys[_0x13191b(0x187)](_0x5caa1e);}const sleep=_0x4ad11f=>new Promise(_0x3c657d=>setTimeout(_0x3c657d,_0x4ad11f));function nowSec(){const _0x5b11a7=_0x23c891;return Math[_0x5b11a7(0x2c6)](Date['now']()/(0x5db*0x1+0x83*0x6+-0x1*0x505));}function escapeRegex(_0x429a75){return String(_0x429a75||'')['replace'](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}function normalizeForMatch(_0x3fce41){const _0x14e1b8=_0x23c891;let _0x3b6389=String(_0x3fce41||'');try{_0x3b6389=_0x3b6389[_0x14e1b8(0x2d7)](_0x14e1b8(0x176));}catch(_0x288740){}if(CFG[_0x14e1b8(0x1d3)+_0x14e1b8(0x353)+_0x14e1b8(0x375)])try{_0x3b6389=_0x3b6389['normalize'](_0x14e1b8(0x31d))[_0x14e1b8(0x23f)](/\p{M}/gu,'')[_0x14e1b8(0x2d7)](_0x14e1b8(0x176));}catch(_0x15b466){}return _0x3b6389[_0x14e1b8(0x36c)+'e']();}class AhoCorasick{constructor(_0x43897b=[]){const _0x37064e=_0x23c891;this['nodes']=[{'next':{},'fail':0x0,'output':[]}];if(_0x43897b&&_0x43897b['length'])this[_0x37064e(0x2ef)](_0x43897b);}[_0x23c891(0x2ef)](_0x39dec9){const _0x30d0ee=_0x23c891;this[_0x30d0ee(0x270)]=[{'next':{},'fail':0x0,'output':[]}];for(const _0x197d62 of _0x39dec9){let _0x1d20ed=-0x2282+-0x24*0xa6+0x39da;for(const _0x22abf4 of _0x197d62){const _0x3bc080=_0x22abf4;!this[_0x30d0ee(0x270)][_0x1d20ed][_0x30d0ee(0x2e2)][_0x3bc080]&&(this['nodes'][_0x1d20ed]['next'][_0x3bc080]=this['nodes'][_0x30d0ee(0x1d9)],this[_0x30d0ee(0x270)][_0x30d0ee(0x27f)]({'next':{},'fail':0x0,'output':[]})),_0x1d20ed=this[_0x30d0ee(0x270)][_0x1d20ed][_0x30d0ee(0x2e2)][_0x3bc080];}this[_0x30d0ee(0x270)][_0x1d20ed]['output'][_0x30d0ee(0x27f)](_0x197d62);}const _0x42e68e=[];for(const _0x63b1a0 in this[_0x30d0ee(0x270)][-0x1*-0x11c2+0x61a+0x1*-0x17dc][_0x30d0ee(0x2e2)]){const _0x37740d=this[_0x30d0ee(0x270)][-0x471+-0x24*0x27+0x9ed][_0x30d0ee(0x2e2)][_0x63b1a0];this['nodes'][_0x37740d][_0x30d0ee(0x1ab)]=-0x3*0x18b+0x8a8+-0x407,_0x42e68e[_0x30d0ee(0x27f)](_0x37740d);}while(_0x42e68e['length']){const _0x4c9d53=_0x42e68e[_0x30d0ee(0x2e8)]();for(const _0x2cc56d in this[_0x30d0ee(0x270)][_0x4c9d53][_0x30d0ee(0x2e2)]){const _0x4612f0=this['nodes'][_0x4c9d53][_0x30d0ee(0x2e2)][_0x2cc56d];let _0x55e7cd=this[_0x30d0ee(0x270)][_0x4c9d53][_0x30d0ee(0x1ab)];while(_0x55e7cd&&!this[_0x30d0ee(0x270)][_0x55e7cd][_0x30d0ee(0x2e2)][_0x2cc56d])_0x55e7cd=this['nodes'][_0x55e7cd][_0x30d0ee(0x1ab)];if(this[_0x30d0ee(0x270)][_0x55e7cd][_0x30d0ee(0x2e2)][_0x2cc56d])this[_0x30d0ee(0x270)][_0x4612f0]['fail']=this[_0x30d0ee(0x270)][_0x55e7cd][_0x30d0ee(0x2e2)][_0x2cc56d];else this['nodes'][_0x4612f0][_0x30d0ee(0x1ab)]=-0x5b3+0x26db+-0x2128;this['nodes'][_0x4612f0][_0x30d0ee(0x243)][_0x30d0ee(0x27f)](...this[_0x30d0ee(0x270)][this[_0x30d0ee(0x270)][_0x4612f0][_0x30d0ee(0x1ab)]][_0x30d0ee(0x243)]),_0x42e68e[_0x30d0ee(0x27f)](_0x4612f0);}}}[_0x23c891(0x2f9)](_0x51a2ed){const _0x39459d=_0x23c891,_0x5ad678=[];let _0x3637ea=0x1ad1+0x2b6+0x1*-0x1d87;for(let _0x1f5a8b=-0x1e49+0x75e+-0x16eb*-0x1;_0x1f5a8b<_0x51a2ed[_0x39459d(0x1d9)];_0x1f5a8b++){const _0x13cbc8=_0x51a2ed[_0x1f5a8b];while(_0x3637ea&&!this[_0x39459d(0x270)][_0x3637ea][_0x39459d(0x2e2)][_0x13cbc8])_0x3637ea=this['nodes'][_0x3637ea]['fail'];if(this['nodes'][_0x3637ea][_0x39459d(0x2e2)][_0x13cbc8])_0x3637ea=this[_0x39459d(0x270)][_0x3637ea][_0x39459d(0x2e2)][_0x13cbc8];else _0x3637ea=-0xde*0x21+0x515*0x2+0x1*0x1274;if(this[_0x39459d(0x270)][_0x3637ea][_0x39459d(0x243)][_0x39459d(0x1d9)])for(const _0x181e74 of this[_0x39459d(0x270)][_0x3637ea]['output']){_0x5ad678[_0x39459d(0x27f)]({'keyword':_0x181e74,'index':_0x1f5a8b-_0x181e74[_0x39459d(0x1d9)]+(-0x2fa+-0x1626+-0x1921*-0x1)});}}return _0x5ad678;}}const ahoCache=new Map();function wholeWordRegexForPhrase(_0x49bbc5){const _0x4f7eb9=_0x23c891,_0x58d17c=String(_0x49bbc5||'')[_0x4f7eb9(0x34e)](),_0x17d47b=escapeRegex(_0x58d17c);try{const _0x21c30b=_0x4f7eb9(0x16b)+'\x5cp{N}_])'+_0x17d47b+(_0x4f7eb9(0x1ff)+_0x4f7eb9(0x396));return new RegExp(_0x21c30b,'iu');}catch(_0x502062){try{return new RegExp('\x5cb'+_0x17d47b+'\x5cb','i');}catch(_0x85771b){return new RegExp(_0x17d47b,'i');}}}function wildcardToRegex(_0x2338e1){const _0x1ade31=_0x23c891,_0x11ad61=String(_0x2338e1||'')[_0x1ade31(0x34e)](),_0x2f96dc=_0x11ad61[_0x1ade31(0x23f)](/\*/g,'')[_0x1ade31(0x1d9)]>0x4f1+-0x4*0x4ff+0x1*0xf0b;if(!_0x2f96dc)throw new Error(_0x1ade31(0x265)+_0x1ade31(0x1d4)+_0x1ade31(0x16d)+_0x1ade31(0x2b9)+'\x20*');const _0x5cce23=_0x11ad61[_0x1ade31(0x2d5)]('*')[_0x1ade31(0x34f)](_0x3ad433=>escapeRegex(_0x3ad433)),_0x4759de=_0x5cce23[_0x1ade31(0x2bb)](_0x1ade31(0x2db)+'}_]*');try{const _0x9001e1=_0x1ade31(0x16b)+'\x5cp{N}_])'+_0x4759de+(_0x1ade31(0x1ff)+_0x1ade31(0x396));return new RegExp(_0x9001e1,'iu');}catch(_0x40768e){const _0x459260=_0x5cce23[_0x1ade31(0x2bb)]('.*');try{return new RegExp(''+_0x459260,'i');}catch(_0x128bbd){return new RegExp(_0x5cce23[_0x1ade31(0x2bb)](''),'i');}}}function setupSendApi(){const _0x1587fc=_0x23c891;if(!botRef)return;if(typeof botRef[_0x1587fc(0x2c7)+'e']===_0x1587fc(0x2b1))sendApi=async(_0x483cb5,_0x49f0df)=>await botRef[_0x1587fc(0x2c7)+'e'](_0x483cb5,_0x49f0df);else botRef[_0x1587fc(0x218)]&&typeof botRef[_0x1587fc(0x218)]['sendMessag'+'e']===_0x1587fc(0x2b1)?sendApi=async(_0x227d21,_0x5550f7)=>await botRef[_0x1587fc(0x218)]['sendMessag'+'e'](_0x227d21,_0x5550f7):sendApi=null;}async function sendText(_0x16a018,_0x9f0531,_0x247214=[]){const _0xfc341b=_0x23c891;if(!_0x9f0531||!_0x16a018)return;const _0x19ab9e={'text':String(_0x9f0531)};if(Array[_0xfc341b(0x37a)](_0x247214)&&_0x247214[_0xfc341b(0x1d9)])_0x19ab9e[_0xfc341b(0x2ad)]=_0x247214;try{if(!sendApi){warn(_0xfc341b(0x2c1)+_0xfc341b(0x186)+_0xfc341b(0x29a));return;}await sendApi(_0x16a018,_0x19ab9e);}catch(_0x1010e7){warn(_0xfc341b(0x2c1)+'dText\x20fail'+_0xfc341b(0x21e)+_0x16a018+':\x20'+(_0x1010e7?.[_0xfc341b(0x2ba)]||_0x1010e7));}}async function tableExists(_0x48c6b5){const _0x1b3f3f=_0x23c891;try{const _0x5b6410=await db[_0x1b3f3f(0x252)](_0x1b3f3f(0x221)+_0x1b3f3f(0x22e)+_0x1b3f3f(0x196)+_0x1b3f3f(0x287)+_0x1b3f3f(0x1b7)+_0x1b3f3f(0x19d),[_0x48c6b5]);return!!_0x5b6410;}catch(_0x21b698){return warn('[lock]\x20tab'+'leExists\x20e'+_0x1b3f3f(0x1c5)+(_0x21b698?.[_0x1b3f3f(0x2ba)]||_0x21b698)),![];}}async function getTableColumns(_0x48fcc7){const _0x5875ec=_0x23c891;try{const _0x4f49dd=await db[_0x5875ec(0x352)](_0x5875ec(0x201)+_0x5875ec(0x35b)+_0x48fcc7+')');return(_0x4f49dd||[])[_0x5875ec(0x34f)](_0x15def6=>_0x15def6[_0x5875ec(0x288)]);}catch(_0x3a4e36){return warn('[lock]\x20get'+_0x5875ec(0x334)+_0x5875ec(0x260)+_0x5875ec(0x38c)+_0x48fcc7+':\x20'+(_0x3a4e36?.[_0x5875ec(0x2ba)]||_0x3a4e36)),[];}}async function readAndNormalizeExistingLocks(){const _0x25f1ec=_0x23c891;try{const _0xb36d34=await db[_0x25f1ec(0x352)](_0x25f1ec(0x36a)+_0x25f1ec(0x205)),_0x5bd4ec=new Map();for(const _0x24454a of _0xb36d34||[]){const _0x25aae1=['chat_jid',_0x25f1ec(0x304),_0x25f1ec(0x1a3),_0x25f1ec(0x228),_0x25f1ec(0x347)],_0x284ef4=[_0x25f1ec(0x325),_0x25f1ec(0x1fa),_0x25f1ec(0x38a),_0x25f1ec(0x254),'value','body',_0x25f1ec(0x2ba)];let _0x44fed9=null;for(const _0x3fa29f of _0x25aae1)if(_0x3fa29f in _0x24454a&&_0x24454a[_0x3fa29f]){_0x44fed9=String(_0x24454a[_0x3fa29f]);break;}let _0x8cb637=null;for(const _0x4d2906 of _0x284ef4)if(_0x4d2906 in _0x24454a&&_0x24454a[_0x4d2906]){_0x8cb637=String(_0x24454a[_0x4d2906]);break;}if(!_0x44fed9||!_0x8cb637)for(const _0x43dfa5 of Object[_0x25f1ec(0x1fb)](_0x24454a)){const _0x34d1bd=_0x24454a[_0x43dfa5];if(!_0x44fed9&&typeof _0x34d1bd===_0x25f1ec(0x2e4)&&_0x34d1bd[_0x25f1ec(0x21b)]('@'))_0x44fed9=_0x34d1bd;if(!_0x8cb637&&typeof _0x34d1bd===_0x25f1ec(0x2e4)&&_0x34d1bd[_0x25f1ec(0x1d9)]<0x1*0x1+-0x122d*-0x1+0x58a*-0x3&&!_0x34d1bd[_0x25f1ec(0x21b)]('@'))_0x8cb637=_0x34d1bd;}if(!_0x44fed9||!_0x8cb637)continue;let _0x482516=_0x8cb637[_0x25f1ec(0x34e)](),_0x1f99ce=_0x25f1ec(0x1e2);if(_0x482516['toLowerCas'+'e']()[_0x25f1ec(0x343)](_0x25f1ec(0x34a)))_0x1f99ce=_0x25f1ec(0x188),_0x482516=_0x482516[_0x25f1ec(0x269)](-0x18b6+0x1*-0x5cf+0x1e8b)['trim']();else{if(_0x482516[_0x25f1ec(0x21b)]('*'))_0x1f99ce='wildcard';else _0x1f99ce=_0x25f1ec(0x1e2);}const _0x1f343d=_0x24454a[_0x25f1ec(0x1d1)]||_0x24454a[_0x25f1ec(0x2a8)]||_0x24454a[_0x25f1ec(0x308)]||_0x24454a[_0x25f1ec(0x369)]||'',_0x17a5fa=Number(_0x24454a[_0x25f1ec(0x2f5)]||_0x24454a['ts']||_0x24454a[_0x25f1ec(0x333)]||-0x1c88+0xbea+0x109e)||nowSec(),_0x4450a0=_0x44fed9+'||'+_0x482516;if(!_0x5bd4ec[_0x25f1ec(0x187)](_0x4450a0))_0x5bd4ec[_0x25f1ec(0x26b)](_0x4450a0,{'chat_jid':_0x44fed9,'phrase':_0x482516,'type':_0x1f99ce,'created_by':_0x1f343d,'created_at':_0x17a5fa,'hit_count':Number(_0x24454a['hit_count']||0x176d+-0x6d6+-0x1097)});else{const _0x62038a=_0x5bd4ec[_0x25f1ec(0x252)](_0x4450a0);_0x62038a[_0x25f1ec(0x2f5)]=Math[_0x25f1ec(0x35e)](_0x62038a[_0x25f1ec(0x2f5)]||_0x17a5fa,_0x17a5fa),_0x62038a[_0x25f1ec(0x24d)]=(_0x62038a[_0x25f1ec(0x24d)]||0x39a*0x8+-0x202c+0x35c)+(Number(_0x24454a[_0x25f1ec(0x24d)])||0x16ea+0xdd1+-0x24bb*0x1);}}return Array['from'](_0x5bd4ec[_0x25f1ec(0x387)]());}catch(_0x59a304){return warn(_0x25f1ec(0x2c3)+_0x25f1ec(0x194)+_0x25f1ec(0x207)+_0x25f1ec(0x2f3)+_0x25f1ec(0x1da)+(_0x59a304?.['message']||_0x59a304)),[];}}async function ensureSchema(){const _0x351cd8=_0x23c891,_0x39aaa2={'id':'INTEGER\x20PR'+'IMARY\x20KEY\x20'+_0x351cd8(0x1bb)+_0x351cd8(0x27d),'chat_jid':_0x351cd8(0x19c)+_0x351cd8(0x33d),'phrase':_0x351cd8(0x19c)+_0x351cd8(0x33d),'type':'TEXT\x20DEFAU'+'LT\x20\x27normal'+'\x27','created_by':_0x351cd8(0x285)+_0x351cd8(0x38d),'created_at':_0x351cd8(0x245)+_0x351cd8(0x268),'hit_count':_0x351cd8(0x245)+'FAULT\x200','is_valid_regex':_0x351cd8(0x245)+_0x351cd8(0x23d)};try{const _0x52cc59=await tableExists('locks');if(!_0x52cc59){const _0x3f77e5=Object[_0x351cd8(0x1ea)](_0x39aaa2)[_0x351cd8(0x34f)](([_0x5018f8,_0x28e3cd])=>_0x5018f8+'\x20'+_0x28e3cd)[_0x351cd8(0x2bb)](',\x0a\x20\x20');await db[_0x351cd8(0x388)](_0x351cd8(0x21d)+_0x351cd8(0x398)+'E\x20locks\x20(\x0a'+_0x351cd8(0x357)+_0x3f77e5+(',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x351cd8(0x1e7)+'hat_jid,\x20p'+_0x351cd8(0x1f9)+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+_0x351cd8(0x319)));try{await db[_0x351cd8(0x388)]('CREATE\x20IND'+'EX\x20IF\x20NOT\x20'+_0x351cd8(0x37b)+'_locks_cha'+_0x351cd8(0x32b)+_0x351cd8(0x1ed)+';');}catch(_0x485107){}try{await db[_0x351cd8(0x388)]('CREATE\x20UNI'+_0x351cd8(0x2b2)+'IF\x20NOT\x20EXI'+_0x351cd8(0x2fe)+_0x351cd8(0x32a)+_0x351cd8(0x348)+'chat_jid,\x20'+_0x351cd8(0x26a));}catch(_0x3de110){}info(_0x351cd8(0x1fd)+'ated\x20locks'+_0x351cd8(0x266)+_0x351cd8(0x339));try{await db['exec'](_0x351cd8(0x192)+'LE\x20IF\x20NOT\x20'+_0x351cd8(0x2ea)+_0x351cd8(0x33a)+_0x351cd8(0x307)+_0x351cd8(0x238)+_0x351cd8(0x2da)+_0x351cd8(0x2cb)+_0x351cd8(0x385)+');');}catch(_0x3ad95b){}return;}const _0x2818a8=await getTableColumns(_0x351cd8(0x1d7)),_0x454a05=_0x2818a8[_0x351cd8(0x21b)](_0x351cd8(0x38f)),_0x4cc2dc=_0x2818a8['includes'](_0x351cd8(0x325)),_0x4d9fc3=_0x2818a8[_0x351cd8(0x21b)](_0x351cd8(0x276));if(_0x454a05&&_0x4cc2dc&&_0x4d9fc3){if(!_0x2818a8[_0x351cd8(0x21b)]('is_valid_r'+_0x351cd8(0x229)))try{await db[_0x351cd8(0x388)](_0x351cd8(0x1e3)+_0x351cd8(0x2dc)+_0x351cd8(0x1a6)+_0x351cd8(0x390)+_0x351cd8(0x25e)+_0x351cd8(0x313)+'1;'),info(_0x351cd8(0x336)+_0x351cd8(0x2dd)+_0x351cd8(0x215)+_0x351cd8(0x361)+_0x351cd8(0x328));}catch(_0x52f33c){warn(_0x351cd8(0x1f0)+_0x351cd8(0x17d)+_0x351cd8(0x327)+'regex\x20colu'+_0x351cd8(0x33e)+(_0x52f33c?.[_0x351cd8(0x2ba)]||_0x52f33c));}try{await db['exec'](_0x351cd8(0x1aa)+'EX\x20IF\x20NOT\x20'+_0x351cd8(0x37b)+_0x351cd8(0x393)+'t\x20ON\x20locks'+_0x351cd8(0x1ed)+';');}catch(_0x2ae47e){}try{await db[_0x351cd8(0x388)](_0x351cd8(0x259)+_0x351cd8(0x2b2)+_0x351cd8(0x21f)+'STS\x20idx_lo'+_0x351cd8(0x32a)+'\x20ON\x20locks('+_0x351cd8(0x1ac)+_0x351cd8(0x26a));}catch(_0x4a52d3){}try{await db[_0x351cd8(0x388)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x351cd8(0x2ea)+_0x351cd8(0x33a)+_0x351cd8(0x307)+_0x351cd8(0x238)+_0x351cd8(0x2da)+_0x351cd8(0x2cb)+'\x20DEFAULT\x200'+');');}catch(_0x19decc){}info('[lock]\x20loc'+_0x351cd8(0x3a2)+_0x351cd8(0x175)+'onical\x20(en'+_0x351cd8(0x31f)+'ces\x20&\x20colu'+_0x351cd8(0x19a));return;}info('[lock]\x20leg'+_0x351cd8(0x2aa)+_0x351cd8(0x2a1)+_0x351cd8(0x224)+_0x351cd8(0x22c)+_0x351cd8(0x235)+_0x351cd8(0x1cd));const _0x424ba1=await readAndNormalizeExistingLocks();await db[_0x351cd8(0x388)](_0x351cd8(0x2df)+_0x351cd8(0x212)+_0x351cd8(0x25c));try{await db[_0x351cd8(0x388)]('CREATE\x20TAB'+_0x351cd8(0x30f)+'EXISTS\x20loc'+_0x351cd8(0x350)+'\x20\x20\x20\x20\x20\x20\x20id\x20'+_0x351cd8(0x200)+_0x351cd8(0x337)+_0x351cd8(0x1bb)+_0x351cd8(0x29b)+'\x20\x20\x20chat_ji'+_0x351cd8(0x338)+_0x351cd8(0x35a)+_0x351cd8(0x2e6)+_0x351cd8(0x39a)+_0x351cd8(0x35a)+_0x351cd8(0x1b1)+_0x351cd8(0x285)+_0x351cd8(0x19e)+_0x351cd8(0x2d4)+_0x351cd8(0x222)+_0x351cd8(0x292)+_0x351cd8(0x1a7)+'\x20\x20\x20\x20\x20\x20\x20cre'+_0x351cd8(0x362)+_0x351cd8(0x2bd)+_0x351cd8(0x1e0)+'\x20\x20\x20\x20\x20hit_c'+'ount\x20INTEG'+_0x351cd8(0x330)+_0x351cd8(0x36f)+'\x20\x20is_valid'+_0x351cd8(0x2c9)+_0x351cd8(0x1f4)+_0x351cd8(0x1a0)+_0x351cd8(0x214)+'(chat_jid,'+'\x20phrase)\x0a\x20'+_0x351cd8(0x298));}catch(_0x1c2f11){await db['exec'](_0x351cd8(0x192)+_0x351cd8(0x30f)+_0x351cd8(0x2ea)+_0x351cd8(0x350)+_0x351cd8(0x35f)+_0x351cd8(0x200)+'IMARY\x20KEY\x20'+_0x351cd8(0x1bb)+_0x351cd8(0x29b)+_0x351cd8(0x384)+_0x351cd8(0x338)+_0x351cd8(0x35a)+'\x20\x20\x20\x20\x20phras'+_0x351cd8(0x39a)+'\x20NULL,\x0a\x20\x20\x20'+_0x351cd8(0x1b1)+_0x351cd8(0x285)+'LT\x20\x27normal'+_0x351cd8(0x2d4)+_0x351cd8(0x222)+_0x351cd8(0x292)+_0x351cd8(0x1a7)+_0x351cd8(0x1c7)+'ated_at\x20IN'+'TEGER\x20DEFA'+_0x351cd8(0x1e0)+_0x351cd8(0x2b4)+_0x351cd8(0x34d)+'ER\x20DEFAULT'+_0x351cd8(0x36f)+'\x20\x20is_valid'+_0x351cd8(0x2c9)+_0x351cd8(0x1f4)+_0x351cd8(0x233)+_0x351cd8(0x394)),warn(_0x351cd8(0x1fd)+_0x351cd8(0x1d6)+'_new\x20witho'+_0x351cd8(0x261)+_0x351cd8(0x240)+'k');}const _0x532bf1=await db[_0x351cd8(0x24b)](_0x351cd8(0x36b)+'O\x20locks_ne'+_0x351cd8(0x170)+_0x351cd8(0x253)+_0x351cd8(0x257)+_0x351cd8(0x20e)+'reated_at,'+_0x351cd8(0x2e3)+_0x351cd8(0x312)+'_regex)\x20VA'+_0x351cd8(0x2b7)+_0x351cd8(0x2a9)+_0x351cd8(0x22b));try{for(const _0xd91c22 of _0x424ba1){try{let _0x5a5b0a=-0x16*0xd9+0x774+0xb33;if(_0xd91c22[_0x351cd8(0x276)]===_0x351cd8(0x188))try{new RegExp(_0xd91c22[_0x351cd8(0x325)]);}catch(_0xadba05){_0x5a5b0a=-0x1*0x5ce+0x24dc+-0x1f0e;}await _0x532bf1['run'](_0xd91c22['chat_jid'],_0xd91c22[_0x351cd8(0x325)],_0xd91c22[_0x351cd8(0x276)]||_0x351cd8(0x1e2),_0xd91c22[_0x351cd8(0x1d1)]||'',Number(_0xd91c22[_0x351cd8(0x2f5)]||nowSec()),Number(_0xd91c22[_0x351cd8(0x24d)]||0x11be+-0xfb*0x1+-0x10c3),_0x5a5b0a);}catch(_0xf0adf2){warn(_0x351cd8(0x2d3)+_0x351cd8(0x2d2)+'ert\x20failed'+_0x351cd8(0x1bf)+_0xd91c22[_0x351cd8(0x38f)]+'@'+_0xd91c22[_0x351cd8(0x325)]+':\x20'+(_0xf0adf2?.[_0x351cd8(0x2ba)]||_0xf0adf2));}}}finally{try{await _0x532bf1['finalize']();}catch(_0x5e2766){}}try{const _0x353f78=_0x351cd8(0x1e4)+_0x351cd8(0x1a5)+Math[_0x351cd8(0x2c6)](Date[_0x351cd8(0x2be)]()/(-0xaeb+-0x1963*0x1+0x2836));await db[_0x351cd8(0x388)](_0x351cd8(0x1e3)+'E\x20locks\x20RE'+_0x351cd8(0x30e)+_0x353f78+';'),await db[_0x351cd8(0x388)](_0x351cd8(0x1e3)+_0x351cd8(0x2ed)+_0x351cd8(0x370)+'O\x20locks;');try{await db[_0x351cd8(0x388)](_0x351cd8(0x1aa)+'EX\x20IF\x20NOT\x20'+_0x351cd8(0x37b)+_0x351cd8(0x393)+'t\x20ON\x20locks'+'(chat_jid)'+';');}catch(_0x1743b6){}try{await db[_0x351cd8(0x388)]('CREATE\x20UNI'+_0x351cd8(0x2b2)+'IF\x20NOT\x20EXI'+_0x351cd8(0x2fe)+'cks_unique'+_0x351cd8(0x348)+_0x351cd8(0x1ac)+_0x351cd8(0x26a));}catch(_0x1338b7){}try{await db['exec'](_0x351cd8(0x192)+_0x351cd8(0x30f)+'EXISTS\x20loc'+'k_prefs\x20(c'+'hat_jid\x20TE'+'XT\x20PRIMARY'+_0x351cd8(0x2da)+_0x351cd8(0x2cb)+_0x351cd8(0x385)+');');}catch(_0x47fcdd){}info('[lock]\x20mig'+_0x351cd8(0x2cc)+_0x351cd8(0x17b)+_0x351cd8(0x209)+'amed\x20to\x20ba'+'ckup');}catch(_0x3a59f8){warn('[lock]\x20mig'+_0x351cd8(0x24a)+_0x351cd8(0x346)+(_0x3a59f8?.['message']||_0x3a59f8));throw _0x3a59f8;}finally{await db[_0x351cd8(0x388)](_0x351cd8(0x2df)+_0x351cd8(0x212)+'=\x20ON;');}return;}catch(_0x510674){error(_0x510674,_0x351cd8(0x1dd)+'ureSchema\x20'+_0x351cd8(0x2f4));throw _0x510674;}}async function addLock(_0x476b0a,_0x109670,_0x3c70ab){const _0x17fddf=_0x23c891;try{if(!_0x476b0a||!_0x109670)return![];let _0x395f54=String(_0x109670)[_0x17fddf(0x34e)]();if(!_0x395f54)return![];let _0x304a8a='normal',_0x2cdacb=-0xb5e+-0xd2*-0x26+-0x13cd;if(_0x395f54[_0x17fddf(0x36c)+'e']()['startsWith']('regex:')){_0x304a8a='regex',_0x395f54=_0x395f54['slice'](-0x2d3*-0xd+0xf5a+0x3*-0x1159)['trim']();try{new RegExp(_0x395f54),_0x2cdacb=0x13*-0x63+0xb*0x105+-0x3dd;}catch(_0x5ca630){_0x2cdacb=-0x713*-0x3+0x95c+-0x1*0x1e95,warn('[lock]\x20add'+_0x17fddf(0x363)+_0x17fddf(0x16f)+_0x17fddf(0x2e7)+_0x395f54);}}else _0x395f54['includes']('*')?_0x304a8a=_0x17fddf(0x242):_0x304a8a=_0x17fddf(0x1e2);try{const _0xc5c73f=await db[_0x17fddf(0x248)]('INSERT\x20INT'+_0x17fddf(0x380)+_0x17fddf(0x199)+_0x17fddf(0x358)+_0x17fddf(0x28b)+'_by,\x20creat'+_0x17fddf(0x1bd)+_0x17fddf(0x23e)+'_valid_reg'+_0x17fddf(0x289)+_0x17fddf(0x185)+'(?,\x20?,\x20?,\x20'+_0x17fddf(0x179)+_0x17fddf(0x1ee)+_0x17fddf(0x1e6)+_0x17fddf(0x27e)+_0x17fddf(0x26c)+'\x20DO\x20UPDATE'+_0x17fddf(0x191)+_0x17fddf(0x1f7)+_0x17fddf(0x32e)+_0x17fddf(0x32c)+_0x17fddf(0x1b0)+_0x17fddf(0x2fc)+_0x17fddf(0x24c)+'.created_b'+_0x17fddf(0x33b)+'\x20\x20\x20\x20create'+'d_at\x20=\x20exc'+_0x17fddf(0x2e9)+_0x17fddf(0x246)+_0x17fddf(0x1ca)+_0x17fddf(0x390)+'gex\x20=\x20excl'+_0x17fddf(0x2a3)+_0x17fddf(0x300),[_0x476b0a,_0x395f54,_0x304a8a,_0x3c70ab||'',nowSec(),_0x2cdacb]);return ahoCache[_0x17fddf(0x172)](_0x476b0a),info(_0x17fddf(0x336)+_0x17fddf(0x173)+_0x395f54+_0x17fddf(0x376)+_0x476b0a+'\x20(type='+_0x304a8a+_0x17fddf(0x22a)+_0x2cdacb+')'),!![];}catch(_0x569b71){warn(_0x17fddf(0x2ce)+_0x17fddf(0x210)+_0x17fddf(0x22f)+_0x17fddf(0x181)+'ck):\x20'+(_0x569b71?.['message']||_0x569b71));try{const _0x25b228=await db[_0x17fddf(0x252)]('SELECT\x20id\x20'+'FROM\x20locks'+_0x17fddf(0x1f5)+'t_jid\x20=\x20?\x20'+_0x17fddf(0x31e)+_0x17fddf(0x223),[_0x476b0a,_0x395f54]);return _0x25b228?await db['run'](_0x17fddf(0x354)+_0x17fddf(0x197)+_0x17fddf(0x329)+'ated_by\x20=\x20'+_0x17fddf(0x25f)+_0x17fddf(0x249)+_0x17fddf(0x390)+'gex\x20=\x20?\x20WH'+'ERE\x20id\x20=\x20?',[_0x304a8a,_0x3c70ab||'',nowSec(),_0x2cdacb,_0x25b228['id']]):await db[_0x17fddf(0x248)](_0x17fddf(0x36b)+'O\x20locks\x20(c'+'hat_jid,\x20p'+_0x17fddf(0x358)+_0x17fddf(0x28b)+_0x17fddf(0x2ff)+_0x17fddf(0x1bd)+_0x17fddf(0x23e)+_0x17fddf(0x37d)+'ex)\x20VALUES'+_0x17fddf(0x171)+_0x17fddf(0x17e)+'?)',[_0x476b0a,_0x395f54,_0x304a8a,_0x3c70ab||'',nowSec(),_0x2cdacb]),ahoCache[_0x17fddf(0x172)](_0x476b0a),!![];}catch(_0x1cef13){return error(_0x1cef13,'[lock]\x20add'+_0x17fddf(0x1ae)+'ack\x20failed'+_0x17fddf(0x1bf)+_0x395f54+_0x17fddf(0x303)+_0x476b0a),![];}}}catch(_0x392319){return error(_0x392319,_0x17fddf(0x336)+_0x17fddf(0x174)+'d\x20for\x20'+_0x109670+_0x17fddf(0x303)+_0x476b0a),![];}}async function deleteLockByPhrase(_0x2d81ed,_0x573dda){const _0x1841b4=_0x23c891;try{if(!_0x2d81ed||!_0x573dda)return 0x61a+-0x12ce+-0x21e*-0x6;const _0x23ec46=String(_0x573dda||'')[_0x1841b4(0x34e)]();if(!_0x23ec46)return 0x1efd*-0x1+-0x2a5*-0xb+0x1e6;if(_0x23ec46[_0x1841b4(0x36c)+'e']()[_0x1841b4(0x343)]('regex:')){const _0x1c3a4f=_0x23ec46[_0x1841b4(0x269)](-0x3*-0x10d+0x1006+-0x1327)[_0x1841b4(0x34e)](),_0x560764=await db['run']('DELETE\x20FRO'+_0x1841b4(0x1a8)+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+_0x1841b4(0x30b)+_0x1841b4(0x3a0)+_0x1841b4(0x1e9),[_0x2d81ed,_0x1c3a4f]);if(_0x560764?.['changes'])ahoCache[_0x1841b4(0x172)](_0x2d81ed);return _0x560764?.['changes']||-0x1d49+0x16d1+0x2*0x33c;}let _0x1136f9=await db['run'](_0x1841b4(0x359)+'M\x20locks\x20WH'+'ERE\x20chat_j'+'id\x20=\x20?\x20AND'+_0x1841b4(0x22d)+'?',[_0x2d81ed,_0x23ec46]);if(_0x1136f9?.[_0x1841b4(0x202)])return ahoCache[_0x1841b4(0x172)](_0x2d81ed),_0x1136f9[_0x1841b4(0x202)];return 0x31f*-0xa+-0x13f*0x8+0x292e;}catch(_0x30c171){return warn(_0x1841b4(0x39b)+_0x1841b4(0x379)+_0x1841b4(0x367)+_0x1841b4(0x2e0)+(_0x30c171?.['message']||_0x30c171)),-0xb7c+-0x3d*0x71+0x2669;}}async function deleteLockById(_0x1607fe,_0x1b097a){const _0x4970c8=_0x23c891;try{const _0x3ec80e=await db['run'](_0x4970c8(0x359)+_0x4970c8(0x1a8)+_0x4970c8(0x198)+'id\x20=\x20?\x20AND'+_0x4970c8(0x368),[_0x1607fe,_0x1b097a]);if(_0x3ec80e?.[_0x4970c8(0x202)])ahoCache[_0x4970c8(0x172)](_0x1607fe);return _0x3ec80e?.[_0x4970c8(0x202)]||0x169a+0x7*0x4eb+0xd*-0x463;}catch(_0x53d1bc){return warn(_0x4970c8(0x39b)+_0x4970c8(0x386)+_0x4970c8(0x341)+(_0x53d1bc?.['message']||_0x53d1bc)),0x7*-0x4ab+0x1321*0x1+-0x6*-0x242;}}async function deleteAllLocksForChat(_0x24524f){const _0x3deb9b=_0x23c891;try{const _0x3c1da0=await db['run'](_0x3deb9b(0x359)+'M\x20locks\x20WH'+_0x3deb9b(0x198)+_0x3deb9b(0x206),[_0x24524f]);if(_0x3c1da0?.[_0x3deb9b(0x202)])ahoCache['delete'](_0x24524f);return _0x3c1da0?.['changes']||-0x2100+0x42e+0x1cd2*0x1;}catch(_0x4242a2){return warn(_0x3deb9b(0x39b)+'eteAllLock'+_0x3deb9b(0x2c8)+_0x3deb9b(0x1c5)+(_0x4242a2?.[_0x3deb9b(0x2ba)]||_0x4242a2)),-0x614+0x1cf6+0x16e2*-0x1;}}async function listLocksForChat(_0x3c06dd){const _0x191880=_0x23c891;try{const _0x29e6c3=await db['all'](_0x191880(0x290)+_0x191880(0x23b)+_0x191880(0x16e)+'ed_by,\x20cre'+_0x191880(0x18b)+'it_count,\x20'+'is_valid_r'+_0x191880(0x1df)+_0x191880(0x256)+_0x191880(0x2e5)+'\x20=\x20?\x20ORDER'+_0x191880(0x216),[_0x3c06dd]);return _0x29e6c3||[];}catch(_0x4db33c){return warn(_0x4db33c,_0x191880(0x315)+_0x191880(0x399)+'hat\x20error\x20'+_0x191880(0x1d2)+_0x3c06dd+':\x20'+(_0x4db33c?.['message']||_0x4db33c)),[];}}async function setLockNotify(_0x44e0e5,_0x3d7e37){const _0xab1009=_0x23c891;try{if(!_0x44e0e5)return![];return await db[_0xab1009(0x248)](_0xab1009(0x36b)+_0xab1009(0x25b)+_0xab1009(0x2c2)+_0xab1009(0x21a)+_0xab1009(0x204)+_0xab1009(0x17a)+_0xab1009(0x18d)+_0xab1009(0x391)+_0xab1009(0x309)+_0xab1009(0x389)+_0xab1009(0x35c)+_0xab1009(0x182)+_0xab1009(0x2bc),[_0x44e0e5,_0x3d7e37?-0xf43+0xe*-0x2ab+0x349e:0x1*0xa33+0x1624+-0x2057]),!![];}catch(_0x8fb25){return warn(_0xab1009(0x1d0)+'LockNotify'+_0xab1009(0x247)+'r\x20'+_0x44e0e5+':\x20'+(_0x8fb25?.[_0xab1009(0x2ba)]||_0x8fb25)),![];}}async function getLockNotify(_0x228916){const _0x194ebc=_0x23c891;try{if(!_0x228916)return 0x3da*0x1+-0x6*0x339+0xf7c;const _0x24ff1a=await db[_0x194ebc(0x252)](_0x194ebc(0x373)+_0x194ebc(0x2cf)+'ock_prefs\x20'+_0x194ebc(0x250)+_0x194ebc(0x25d),[_0x228916]);return _0x24ff1a?Number(_0x24ff1a['notify'])?-0xb5*-0x33+0x55*0x15+-0x2b07:0x12cd+0x19e2*0x1+-0x171*0x1f:0x21c*-0x2+-0x12fa+0xb99*0x2;}catch(_0x1624ea){return warn(_0x194ebc(0x1b9)+_0x194ebc(0x28e)+_0x194ebc(0x247)+'r\x20'+_0x228916+':\x20'+(_0x1624ea?.[_0x194ebc(0x2ba)]||_0x1624ea)),-0x278+0x22bb*-0x1+0x2533;}}async function deleteWithRetry(_0x4ae5ee,_0x238fc4=-0x119e+0x1b*0xe6+-0x6a2,_0x595bea=0x69a+-0x12a3+0x15*0xa1){const _0x538545=_0x23c891,_0x350acc=_0x4ae5ee[_0x538545(0x19b)]?.[_0x538545(0x26f)];if(!_0x350acc)return![];let _0x2d29e4=_0x595bea;for(let _0x3b4e1d=0xd58*0x1+0x2*0xab4+-0x22bf;_0x3b4e1d<=Math[_0x538545(0x1fc)](0x178e+0x2*-0x800+-0x78d,_0x238fc4);_0x3b4e1d++){try{if(!sendApi)return warn(_0x538545(0x39b)+'eteWithRet'+'ry:\x20sendAp'+_0x538545(0x282)+'ble'),![];return await sendApi(_0x350acc,{'delete':_0x4ae5ee[_0x538545(0x19b)]}),!![];}catch(_0x1a8d18){if(_0x3b4e1d<_0x238fc4){await sleep(_0x2d29e4),_0x2d29e4*=-0xb*0x25f+-0x10*0xdf+0x2807;continue;}return warn(_0x538545(0x39b)+_0x538545(0x267)+_0x538545(0x227)+'\x20'+(_0x1a8d18?.[_0x538545(0x2ba)]||_0x1a8d18)),![];}}return![];}async function sendWarningAndMaybeDelete(_0x2480a5){const _0x3f938d=_0x23c891;if(!CFG[_0x3f938d(0x18f)+'NG'])return;try{const _0x34a61f=_0x2480a5['key']?.[_0x3f938d(0x3a1)+'t']||_0x2480a5[_0x3f938d(0x19b)]?.[_0x3f938d(0x372)]||'',_0x83f4ac=_0x2480a5[_0x3f938d(0x19b)]['remoteJid'],_0x2c242b=_0x34a61f?'@'+String(_0x34a61f)['split']('@')[0x6b5*-0x1+0x29*-0x6d+0x407*0x6]:'{user}',_0x1a281=String(CFG['WARNING_ME'+_0x3f938d(0x37e)]||DEFAULTS[_0x3f938d(0x28d)+_0x3f938d(0x37e)])['replace'](/\{user\}/gi,_0x2c242b);if(!sendApi){warn(_0x3f938d(0x2c1)+_0x3f938d(0x189)+_0x3f938d(0x1dc)+'available');return;}const _0x3c8506=await sendApi(_0x83f4ac,{'text':_0x1a281,'mentions':_0x34a61f?[_0x34a61f]:[]});_0x3c8506?.[_0x3f938d(0x19b)]&&CFG['WARNING_TT'+_0x3f938d(0x281)]&&CFG['WARNING_TT'+_0x3f938d(0x281)]>-0x11*0x2f+-0x1159*-0x2+-0x1f93&&setTimeout(async()=>{try{await sendApi(_0x83f4ac,{'delete':_0x3c8506['key']});}catch(_0x51d5f8){}},CFG[_0x3f938d(0x29f)+_0x3f938d(0x281)]);}catch(_0x1fd9c4){warn('[lock]\x20sen'+_0x3f938d(0x230)+_0x3f938d(0x1f8)+(_0x1fd9c4?.[_0x3f938d(0x2ba)]||_0x1fd9c4));}}async function processChatQueue(_0x32ac4a){const _0x359b2b=_0x23c891;while((perChatQueue[_0x359b2b(0x252)](_0x32ac4a)||[])[_0x359b2b(0x1d9)]>-0xe87+0x4*-0x482+-0x208f*-0x1&&!shuttingDown){const _0x55121e=Math[_0x359b2b(0x1fc)](0x5d*0x9+-0xce5*0x3+-0x1*-0x236b,CFG[_0x359b2b(0x311)]||0x19*0x30+-0x1*0x1273+0xdc4),_0x44a186=perChatQueue['get'](_0x32ac4a)||[],_0x50be3f=_0x44a186[_0x359b2b(0x219)](-0x35*0x4a+-0x1ec2+0x3d7*0xc,_0x55121e);for(const _0x23fbf4 of _0x50be3f){try{const _0x5e418b=await deleteWithRetry(_0x23fbf4)[_0x359b2b(0x34b)](()=>![]);_0x5e418b&&await sendWarningAndMaybeDelete(_0x23fbf4)[_0x359b2b(0x34b)](()=>{});}catch(_0x53228f){warn(_0x359b2b(0x28f)+_0x359b2b(0x277)+_0x359b2b(0x1f1)+_0x359b2b(0x1c5)+(_0x53228f?.[_0x359b2b(0x2ba)]||_0x53228f));}}(perChatQueue[_0x359b2b(0x252)](_0x32ac4a)||[])[_0x359b2b(0x1d9)]>-0xa9*-0x2e+-0x69d+-0x17c1&&await sleep(Math['max'](-0x1*0x2363+-0xc5*0x16+0x1*0x3451,CFG[_0x359b2b(0x1a9)+_0x359b2b(0x371)]||0x2080+-0x9de+-0x15da*0x1));}if((perChatQueue[_0x359b2b(0x252)](_0x32ac4a)||[])[_0x359b2b(0x1d9)]===-0x333+-0x4*-0x301+0x3d*-0x25)perChatQueue[_0x359b2b(0x172)](_0x32ac4a);}function tryStartProcessingForChat(_0x863a8a){const _0x460649=_0x23c891;if(perChatProcessing['get'](_0x863a8a))return;if(activeChats>=(CFG[_0x460649(0x1d8)+'CURRENCY']||0x1*0x23f+-0x10ba+0xe7c)){setTimeout(()=>tryStartProcessingForChat(_0x863a8a),-0x1111+0x2e6*0x7+-0x2a3);return;}activeChats++,perChatProcessing['set'](_0x863a8a,!![]),((async()=>{const _0x51bd78=_0x460649;try{await processChatQueue(_0x863a8a);}catch(_0x2cb8bd){warn(_0x51bd78(0x28f)+_0x51bd78(0x277)+_0x51bd78(0x29d)+(_0x2cb8bd?.[_0x51bd78(0x2ba)]||_0x2cb8bd));}finally{perChatProcessing[_0x51bd78(0x172)](_0x863a8a),activeChats=Math[_0x51bd78(0x1fc)](-0x143*-0x1+0xe25+0x22*-0x74,activeChats-(-0x5f*-0x33+-0x19df+0x6f3));if((perChatQueue[_0x51bd78(0x252)](_0x863a8a)||[])[_0x51bd78(0x1d9)])setImmediate(()=>tryStartProcessingForChat(_0x863a8a));}})());}function enqueueDeletion(_0x32c596){const _0x5e0642=_0x23c891,_0xf6aae6=_0x32c596['key']?.[_0x5e0642(0x26f)];if(!_0xf6aae6)return;if(!perChatQueue[_0x5e0642(0x187)](_0xf6aae6))perChatQueue[_0x5e0642(0x26b)](_0xf6aae6,[]);const _0x594ef8=perChatQueue[_0x5e0642(0x252)](_0xf6aae6);if(_0x594ef8['length']>=(CFG[_0x5e0642(0x2ec)+'UEUE_LIMIT']||DEFAULTS[_0x5e0642(0x2ec)+_0x5e0642(0x195)]))_0x594ef8[_0x5e0642(0x2e8)]();_0x594ef8[_0x5e0642(0x27f)](_0x32c596);if(!perChatProcessing[_0x5e0642(0x252)](_0xf6aae6))tryStartProcessingForChat(_0xf6aae6);}function extractTextFromMessage(_0xd670ed){const _0xba06c5=_0x23c891;if(!_0xd670ed||!_0xd670ed[_0xba06c5(0x2ba)])return'';const _0x3bc11f=_0xd670ed[_0xba06c5(0x2ba)];if(_0x3bc11f[_0xba06c5(0x2b8)+'on'])return _0x3bc11f[_0xba06c5(0x2b8)+'on'];if(_0x3bc11f[_0xba06c5(0x225)+_0xba06c5(0x2f6)]?.[_0xba06c5(0x258)])return _0x3bc11f['extendedTe'+'xtMessage']['text'];if(_0x3bc11f['imageMessa'+'ge']?.['caption'])return _0x3bc11f['imageMessa'+'ge']['caption'];if(_0x3bc11f[_0xba06c5(0x24e)+'ge']?.['caption'])return _0x3bc11f[_0xba06c5(0x24e)+'ge'][_0xba06c5(0x237)];if(_0x3bc11f[_0xba06c5(0x1b5)+_0xba06c5(0x395)+'ge']?.['selectedBu'+_0xba06c5(0x356)])return _0x3bc11f[_0xba06c5(0x1b5)+_0xba06c5(0x395)+'ge'][_0xba06c5(0x293)+_0xba06c5(0x356)];return'';}function splitRestForGp(_0x543602){const _0x49fa65=_0x23c891;if(!_0x543602)return{'left':'','gp':null};const _0x3d3443=_0x543602[_0x49fa65(0x20c)](/\bgp[:\s]+(.+)$/i);if(_0x3d3443){const _0x134cac=_0x543602[_0x49fa65(0x269)](0x1ed7+0x297+-0x216e,_0x3d3443['index'])['trim'](),_0x509eb9=_0x3d3443[0x1*0x7e3+0x22ae*-0x1+0x1acc][_0x49fa65(0x34e)]();return{'left':_0x134cac,'gp':_0x509eb9};}const _0x3c1e0b=_0x543602['split'](/\s+/)[_0x49fa65(0x39d)](Boolean);if(_0x3c1e0b[_0x49fa65(0x1d9)]>0x323*0xb+-0x4bd+-0x1dc3){const _0x10027e=_0x3c1e0b[_0x3c1e0b['length']-(0x2617+0x1a3b+-0x4051)];if(_0x10027e['toLowerCas'+'e']()===_0x49fa65(0x352)||_0x10027e[_0x49fa65(0x21b)]('@'))return _0x3c1e0b[_0x49fa65(0x32f)](),{'left':_0x3c1e0b[_0x49fa65(0x2bb)]('\x20')[_0x49fa65(0x34e)](),'gp':_0x10027e};}return{'left':_0x543602[_0x49fa65(0x34e)](),'gp':null};}function parseLockCommandOneLine(_0x1659b0){const _0x554ac3=_0x23c891,_0x5b88fd=(_0x1659b0||'')[_0x554ac3(0x2d5)](/\r?\n/)[-0x17d5+-0x966+0x213b]['trim']();let _0x53d634=_0x5b88fd[_0x554ac3(0x23f)](/^\/?lock\b/i,'')[_0x554ac3(0x34e)]();const {left:_0x3f9325,gp:_0x939df5}=splitRestForGp(_0x53d634),_0x348f9a=(_0x3f9325||'')[_0x554ac3(0x2d5)](',')[_0x554ac3(0x34f)](_0x3d3770=>_0x3d3770['trim']())[_0x554ac3(0x39d)](Boolean);return{'triggers':_0x348f9a,'gp':_0x939df5};}function parseUnlockCommandOneLine(_0x582f34){const _0x58e010=_0x23c891,_0x39e577=(_0x582f34||'')[_0x58e010(0x2d5)](/\r?\n/)[0x1016+-0xcb5+-0x1*0x361][_0x58e010(0x34e)]();let _0x5d778d=_0x39e577[_0x58e010(0x23f)](/^\/?unlock\b/i,'')[_0x58e010(0x34e)]();const {left:_0x2d6582,gp:_0x5b057a}=splitRestForGp(_0x5d778d),_0x246bbc=(_0x2d6582||'')['split'](',')['map'](_0x10bbc6=>_0x10bbc6[_0x58e010(0x34e)]())[_0x58e010(0x39d)](Boolean);return{'parts':_0x246bbc,'gp':_0x5b057a};}function parseListCommandOneLine(_0x2ad7fb){const _0x54b8fd=_0x23c891,_0x42ceba=(_0x2ad7fb||'')['split'](/\r?\n/)[0x59*0x59+0xca1*-0x1+-0x1250][_0x54b8fd(0x34e)]();let _0x5754b5=_0x42ceba[_0x54b8fd(0x23f)](/^\/?listlock\b/i,'')[_0x54b8fd(0x34e)]();const {left:_0x57a5b9,gp:_0x5176df}=splitRestForGp(_0x5754b5),_0x1fb61a=_0x5176df||(_0x57a5b9?_0x57a5b9:null);return{'gp':_0x1fb61a};}function parseLockNotifyCommandOneLine(_0x32188f){const _0x32dc4a=_0x23c891,_0x572227=(_0x32188f||'')['split'](/\r?\n/)[0x473+0x10*0x90+-0x1*0xd73][_0x32dc4a(0x34e)]();let _0x3e2bca=_0x572227[_0x32dc4a(0x23f)](/^\/?locknotify\b/i,'')[_0x32dc4a(0x34e)]();const {left:_0x5bd6b2,gp:_0xbbdb1d}=splitRestForGp(_0x3e2bca),_0x2b30cb=(_0x5bd6b2||'')[_0x32dc4a(0x36c)+'e']();let _0x3fcd0d=null;if(_0x2b30cb['includes']('on'))_0x3fcd0d='on';else{if(_0x2b30cb[_0x32dc4a(0x21b)]('off'))_0x3fcd0d=_0x32dc4a(0x236);}return{'mode':_0x3fcd0d,'gp':_0xbbdb1d};}async function validateStoredRegexes(){const _0x4bee29=_0x23c891;try{const _0x39905c=await db[_0x4bee29(0x352)]('SELECT\x20id,'+_0x4bee29(0x27c)+_0x4bee29(0x18e)+_0x4bee29(0x378)+_0x4bee29(0x203)+_0x4bee29(0x29c)+_0x4bee29(0x1cf)+_0x4bee29(0x31b));for(const _0x2cf61c of _0x39905c||[]){try{new RegExp(_0x2cf61c[_0x4bee29(0x325)]),await db['run'](_0x4bee29(0x354)+_0x4bee29(0x1db)+_0x4bee29(0x23a)+_0x4bee29(0x1c8)+_0x4bee29(0x2fb),[_0x2cf61c['id']]);}catch(_0x319f99){await db['run'](_0x4bee29(0x354)+'ks\x20SET\x20is_'+_0x4bee29(0x23a)+'x\x20=\x200\x20WHER'+_0x4bee29(0x2fb),[_0x2cf61c['id']]);}}}catch(_0x7a1c46){warn(_0x4bee29(0x301)+_0x4bee29(0x263)+_0x4bee29(0x33c)+_0x4bee29(0x1c5)+(_0x7a1c46?.[_0x4bee29(0x2ba)]||_0x7a1c46));}}function _0x3fd2(){const _0x3f2c46=['lete_prefs','ch\x20in\x20','\x20(INVALID\x20','buttonsRes','ue\x20FROM\x20de','e=\x27table\x27\x20','10ImnjiD','[lock]\x20get','fromMe','AUTOINCREM','fy\x20message','ed_at,\x20hit','delall','\x20for\x20','✔️\x20[lock]\x20l','d\x20regex\x20fo','y\x20[on|off]','419089ZEVxHJ','it_count\x20+','rror:\x20','nstance','\x20\x20\x20\x20\x20\x20\x20cre','x\x20=\x201\x20WHER','[lock]\x20fin','\x20\x20\x20\x20\x20\x20\x20\x20\x20i','gex','[lock]\x20enf','ion','ings\x20error','\x27invalid_r','[lock]\x20set','created_by','for\x20','NORMALIZE_','ust\x20contai','_count\x20=\x20h','ated\x20locks','locks','GLOBAL_CON','length','led:\x20','ks\x20SET\x20is_','sendApi\x20un','[lock]\x20ens','d\x20=\x20?','egex\x20FROM\x20','ULT\x200,\x0a\x20\x20\x20','o\x20delete\x20l','normal','ALTER\x20TABL','locks_back',':\x20unlock\x201','\x20ON\x20CONFLI','\x20\x20UNIQUE(c','ine\x20usage:','phrase\x20=\x20?','entries','t\x20resolve\x20','onnection(','(chat_jid)',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20','dler\x20error','[lock]\x20fai','eue\x20item\x20e','CURRENCY','tialized\x20(','EGER\x20DEFAU','\x20WHERE\x20cha','\x201\x20WHERE\x20i','\x20\x20\x20\x20\x20\x20type','ailed:\x20','hrase)\x0a\x20\x20\x20','word','keys','max','[lock]\x20cre','led\x20for\x20','(?![\x5cp{L}\x5c','INTEGER\x20PR','PRAGMA\x20tab','changes','=\x20\x27regex\x27\x20',')\x20VALUES\x20(','ROM\x20locks','id\x20=\x20?','izeExistin','run)','\x20table\x20ren','dStoredMat','70714FwajdK','match','same\x20line.','ated_by,\x20c','delock','CONFLICT\x20i','ion(s):\x20','eign_keys\x20','\x20=\x20\x27target','\x20\x20\x20\x20UNIQUE','d_regex\x20co','\x20BY\x20id','lock','sock','splice','id,\x20notify','includes','isInteger','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','ed\x20to\x20','IF\x20NOT\x20EXI','DEFAULT_EN','SELECT\x20nam','\x20created_b','\x20=\x20?','cted\x20->\x20pe','extendedTe','rom\x20your\x20d','ry\x20failed:','jid','egex',',\x20valid=','\x20?,\x20?)','rforming\x20s','\x20phrase\x20=\x20','e\x20FROM\x20sql','nsert\x20fail','dWarning\x20f',':<alias|ji','ng\x20default','LT\x201\x0a\x20\x20\x20\x20\x20','olving\x20con','afe\x20migrat','off','caption','XT\x20PRIMARY','oUserJid','valid_rege','\x20phrase,\x20t','on(s):\x20','FAULT\x201','_count,\x20is','replace','as\x20fallbac','|jid|all>','wildcard','output','ocknotify\x20','INTEGER\x20DE','ted_at,\x0a\x20\x20','\x20failed\x20fo','run','_at\x20=\x20?,\x20i','ration\x20swa','prepare','=\x20excluded','hit_count','videoMessa','\x20gp:alias','WHERE\x20chat','\x20WHERE\x20key','get','d,\x20phrase,','keyword','❌\x20Unknown\x20','locks\x20WHER','\x20type,\x20cre','text','CREATE\x20UNI','d\x20for\x20','O\x20lock_pre','=\x20OFF;','_jid\x20=\x20?','gex\x20INTEGE','?,\x20created','ns\x20error\x20f','ut\x20UNIQUE\x20','lt\x20connect','idateStore','fig\x20load\x20f','Wildcard\x20m','\x20table\x20(ca','eteWithRet','FAULT\x200','slice','phrase);','set','d,\x20phrase)','resolveNam','\x0aMessage:\x0a','remoteJid','nodes','|all>','nection(s)','is\x20not\x20all','23zVblYt','id:\x20\x22','type','cessChatQu','16iZkaUl','ABLED','✔️\x20[lock]\x20','add','\x20phrase\x20FR','ENT','CT(chat_ji','push',':\x20unlockal','L_MS','i\x20unavaila','✔️\x20Locknoti','[lock]\x20loc','TEXT\x20DEFAU','[lock]\x20han','\x20WHERE\x20typ','name','ex)\x0a\x20\x20\x20\x20\x20\x20','647088qRWfJy','e,\x20created','se,comma-s','WARNING_ME','LockNotify','[lock]\x20pro','SELECT\x20id,','ies\x20to\x20you','y\x20TEXT\x20DEF','selectedBu','line\x20usage','<alias|jid','ias','REGEX)','\x20\x20\x20\x20\x20);','ids','vailable','ENT,\x0a\x20\x20\x20\x20\x20','OR\x20type\x20=\x20','eue\x20fail:\x20','_jid\x27','WARNING_TT',':\x20lock\x20tri','table\x20dete','|jid|all>\x0a','uded.is_va','test','❌\x20PM:\x20one-','\x20failed','pping\x20inva','creator',',\x20?,\x20?,\x20?,','acy\x20locks\x20','connection','roup-only)','mentions','value','quested\x20ta','❌\x20PM:\x20incl','function','QUE\x20INDEX\x20','s|jid|all>','\x20\x20\x20\x20\x20hit_c','endsWith','tialize\x20fa','LUES\x20(?,\x20?','conversati','rs\x20besides','message','join','ify;','TEGER\x20DEFA','now','uild\x20faile','\x20locknotif','[lock]\x20sen','fs\x20(chat_j','[lock]\x20rea','gp\x20alias/j','gger1,trig','floor','sendMessag','sForChat\x20e','_regex\x20INT','❌\x20Could\x20no','fy\x20INTEGER','ration\x20com','s\x20for\x20your','[lock]\x20ON\x20','ify\x20FROM\x20l','clearlocks','earch\x20fail','ration\x20ins','[lock]\x20mig','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','split','❌\x20Failed\x20t','normalize','[lock]\x20cle','dmin\x20check','\x20KEY,\x20noti','[\x5cp{L}\x5cp{N','E\x20locks\x20AD','ed\x20is_vali','[lock]\x20res','PRAGMA\x20for','r:\x20','ockall\x20fai','next','\x20hit_count','string','E\x20chat_jid','\x20\x20\x20\x20\x20phras','provided:\x20','shift','luded.crea','EXISTS\x20loc','chatJid','PER_CHAT_Q','E\x20locks_ne','bad2\x20gp:al','build','476436ikvTKV','oaded\x20','listlock','gLocks\x20fai','fatal','created_at','xtMessage','✔️\x20Saved\x20','efault\x20con','search','fy\x20','E\x20id\x20=\x20?','reated_by\x20','locknotify','STS\x20idx_lo','_by,\x20creat','lid_regex;','[lock]\x20val','dellock','\x20@\x20','chatid','index','[lock]\x20ini','hat_jid\x20TE','author','jid)\x20DO\x20UP','fy\x20on|off\x0a','\x20type\x20=\x20\x27r','lock.initi','unlocklock','NAME\x20TO\x20','LE\x20IF\x20NOT\x20','tification','BATCH_SIZE',',\x20is_valid','R\x20DEFAULT\x20','x\x20=\x200\x20WHER','[lock]\x20lis','nection\x20','[lock]\x20Aho','\x20target(s)','\x20\x20\x20\x20','ude\x20gp\x20in\x20','egex\x27','\x20set\x20for\x20','NFD','AND\x20phrase','sured\x20indi','is_valid_r','ger2','OFF','led\x20to\x20sen','9644841gtlizY','phrase','clear','\x20is_valid_','cks\x20table','e\x20=\x20?,\x20cre','cks_unique','t\x20ON\x20locks','d.type,\x0a\x20\x20','[lock]\x20inv','\x20=\x20exclude','pop','ER\x20DEFAULT','id-or-phra','SELECT\x20val','timestamp','TableColum','lid\x20stored','[lock]\x20add','IMARY\x20KEY\x20','d\x20TEXT\x20NOT','nonical)','k_prefs\x20(c','y,\x0a\x20\x20\x20\x20\x20\x20\x20','dRegexes\x20e','ULL','mn:\x20','status:\x0a','LOCKS','d\x20error:\x20','\x20lock(s).','startsWith','Corasick\x20b','\x20lock(s)\x20f','p\x20failed:\x20','chat','\x20ON\x20locks(','chFromFind','regex:','catch','[lock]\x20Mat','ount\x20INTEG','trim','map','ks_new\x20(\x0a\x20','eparated>\x20','all','REMOVE_DIA','UPDATE\x20loc','[lock]\x20isa','ttonId','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','hrase,\x20typ','DELETE\x20FRO','\x20NULL,\x0a\x20\x20\x20','le_info(','otify\x20=\x20ex','16MRJaiy','min','\x20\x20\x20\x20\x20\x20\x20id\x20','ed:\x20','lumn\x20to\x20lo','ated_at\x20IN','Lock:\x20inva','igger1,tri','d\x20locknoti','rgets.','hrase\x20erro','\x20id\x20=\x20?','user','SELECT\x20*\x20F','INSERT\x20INT','toLowerCas','ailed,\x20usi','tion(s):\x20','\x200,\x0a\x20\x20\x20\x20\x20\x20','w\x20RENAME\x20T','Y_MS','from','SELECT\x20not','\x20gp:<alias','CRITICS','\x22\x20@\x20','\x20phrase=\x22','HERE\x20type\x20','eteLockByP','isArray','EXISTS\x20idx','gp:<alias|','_valid_reg','SSAGE','t\x20connecti','O\x20locks\x20(c','276mPVRmF',',2\x20OR\x20unlo','[lock]\x20ski','\x20\x20\x20chat_ji','\x20DEFAULT\x200','eteLockByI','values','exec','DATE\x20SET\x20n','trigger','getUniqueJ','or\x20','LT\x20\x27\x27','efault\x20val','chat_jid','s_valid_re','LICT(chat_','find','_locks_cha','\x20);','ponseMessa','p{N}_])','unlockall','REATE\x20TABL','tLocksForC','e\x20TEXT\x20NOT','[lock]\x20del','aned\x20up','filter','isCommand','[lock]\x20con','egex\x27\x20AND\x20','participan','ks\x20table\x20a','alid\x20wildc','2.3.2','(?<![\x5cp{L}','toISOStrin','n\x20characte','ype,\x20creat','lid\x20regex\x20','w\x20(chat_ji','\x20(?,\x20?,\x20?,','delete','ed\x20lock\x20\x22','Lock\x20faile','lready\x20can','NFKC','\x20lock\x20entr','DB\x20ensured','?,\x20?,\x200,\x20?','?,\x20?)\x0a\x20\x20\x20\x20','plete;\x20old','\x22:\x20','led\x20to\x20add','\x20?,\x20?,\x200,\x20','that\x20word\x20','alize\x20requ','ed\x20(fallba','cluded.not','23720lBmogd','unknown','\x20\x20\x20VALUES\x20','dApi\x20not\x20a','has','regex','dWarning:\x20','⚠️\x20{user},\x20','ated_at,\x20h','lock\x20bad1,','\x20\x20\x20ON\x20CONF','OM\x20locks\x20W','SEND_WARNI','normalizeT','\x20SET\x0a\x20\x20\x20\x20\x20','CREATE\x20TAB','Keywords','dAndNormal','UEUE_LIMIT','ite_master','ks\x20SET\x20typ','ERE\x20chat_j','hat_jid,\x20p','mns)','key','TEXT\x20NOT\x20N','AND\x20name=?','LT\x20\x27normal','2053310PgSbdc','LT\x201,\x0a\x20\x20\x20\x20','unlock','✔️\x20Deleted\x20','chat_id','r\x20id=','up_','D\x20COLUMN\x20i','AULT\x20\x27\x27,\x0a\x20','M\x20locks\x20WH','BATCH_DELA','CREATE\x20IND','fail','chat_jid,\x20','\x20Example:\x20','Lock\x20fallb','heck\x20/setd','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','\x20\x20\x20\x20\x20type\x20'];_0x3fd2=function(){return _0x3f2c46;};return _0x3fd2();}async function findStoredMatchFromFindings(_0x2ff479=[]){const _0x30ac43=_0x23c891;try{const _0x469620=await listSudo();if(!Array[_0x30ac43(0x37a)](_0x469620)||_0x469620['length']===-0xd*-0x275+-0x2602+0x611)return null;const _0x4448a6=new Set(_0x469620[_0x30ac43(0x34f)](String));for(const _0x5b5299 of _0x2ff479||[]){if(!_0x5b5299||typeof _0x5b5299[_0x30ac43(0x228)]!=='string')continue;const _0x4c40b7=normalizeToJid(_0x5b5299['jid']);if(_0x4c40b7&&_0x4448a6[_0x30ac43(0x187)](_0x4c40b7))return _0x4c40b7;if(_0x4448a6['has'](_0x5b5299[_0x30ac43(0x228)]))return _0x5b5299[_0x30ac43(0x228)];const _0x5a7933=String(_0x5b5299[_0x30ac43(0x228)])[_0x30ac43(0x2d5)]('@')[0x189d*-0x1+-0x1e96+-0x43f*-0xd][_0x30ac43(0x2d5)](':')[0x1*-0x2296+0x4*-0x4bf+0x1ac9*0x2];if(_0x5a7933)for(const _0x33cdfd of _0x469620){const _0x9699fc=String(_0x33cdfd)['split']('@')[0x1*0x1e77+-0x5d9*0x3+-0x33b*0x4];if(_0x9699fc&&_0x9699fc===_0x5a7933)return _0x33cdfd;}}return null;}catch(_0x46b496){return warn(_0x30ac43(0x1c9)+_0x30ac43(0x20a)+_0x30ac43(0x349)+_0x30ac43(0x1ce)+':\x20'+(_0x46b496?.[_0x30ac43(0x2ba)]||_0x46b496)),null;}}export async function initialize(_0x15ccd0){const _0x5e64a8=_0x23c891;if(!_0x15ccd0)throw new Error(_0x5e64a8(0x30c)+_0x5e64a8(0x180)+'ires\x20bot\x20i'+_0x5e64a8(0x1c6));botRef=_0x15ccd0,setupSendApi();try{const _0x2b7a97=getConfig()||{},_0x38b0ca=_0x2b7a97&&_0x2b7a97['LOCKS']?_0x2b7a97[_0x5e64a8(0x340)]:{};CFG['DEFAULT_EN'+_0x5e64a8(0x279)]=_0x38b0ca['DEFAULT_EN'+_0x5e64a8(0x279)]??DEFAULTS[_0x5e64a8(0x220)+_0x5e64a8(0x279)],CFG[_0x5e64a8(0x18f)+'NG']=_0x38b0ca[_0x5e64a8(0x18f)+'NG']??DEFAULTS['SEND_WARNI'+'NG'],CFG[_0x5e64a8(0x28d)+'SSAGE']=_0x38b0ca['WARNING_ME'+_0x5e64a8(0x37e)]??DEFAULTS['WARNING_ME'+_0x5e64a8(0x37e)],CFG[_0x5e64a8(0x29f)+_0x5e64a8(0x281)]=Number['isInteger'](_0x38b0ca[_0x5e64a8(0x29f)+_0x5e64a8(0x281)])?_0x38b0ca[_0x5e64a8(0x29f)+'L_MS']:DEFAULTS[_0x5e64a8(0x29f)+_0x5e64a8(0x281)],CFG[_0x5e64a8(0x2ec)+_0x5e64a8(0x195)]=Number[_0x5e64a8(0x21c)](_0x38b0ca[_0x5e64a8(0x2ec)+'UEUE_LIMIT'])?_0x38b0ca[_0x5e64a8(0x2ec)+'UEUE_LIMIT']:DEFAULTS[_0x5e64a8(0x2ec)+_0x5e64a8(0x195)],CFG[_0x5e64a8(0x311)]=Number[_0x5e64a8(0x21c)](_0x38b0ca[_0x5e64a8(0x311)])?_0x38b0ca['BATCH_SIZE']:DEFAULTS[_0x5e64a8(0x311)],CFG[_0x5e64a8(0x1a9)+_0x5e64a8(0x371)]=Number[_0x5e64a8(0x21c)](_0x38b0ca[_0x5e64a8(0x1a9)+_0x5e64a8(0x371)])?_0x38b0ca[_0x5e64a8(0x1a9)+_0x5e64a8(0x371)]:DEFAULTS[_0x5e64a8(0x1a9)+'Y_MS'],CFG[_0x5e64a8(0x1d8)+_0x5e64a8(0x1f2)]=Number[_0x5e64a8(0x21c)](_0x38b0ca[_0x5e64a8(0x1d8)+_0x5e64a8(0x1f2)])?_0x38b0ca['GLOBAL_CON'+_0x5e64a8(0x1f2)]:DEFAULTS[_0x5e64a8(0x1d8)+_0x5e64a8(0x1f2)],CFG['NORMALIZE_'+_0x5e64a8(0x353)+_0x5e64a8(0x375)]=!!_0x38b0ca[_0x5e64a8(0x1d3)+_0x5e64a8(0x353)+_0x5e64a8(0x375)];}catch(_0x35f7ba){warn(_0x5e64a8(0x39f)+_0x5e64a8(0x264)+_0x5e64a8(0x36d)+_0x5e64a8(0x232)+'s'),CFG={...DEFAULTS};}try{await ensureSchema(),await validateStoredRegexes(),info('[lock]\x20ini'+_0x5e64a8(0x1f3)+_0x5e64a8(0x178)+'\x20&\x20regex\x20v'+'alidation\x20'+_0x5e64a8(0x208));}catch(_0xe0afd9){error(_0xe0afd9,_0x5e64a8(0x306)+_0x5e64a8(0x2b6)+'tal');throw _0xe0afd9;}}function _0x37fc(_0x57127c,_0x3ee042){const _0x3f450b=_0x3fd2();return _0x37fc=function(_0x42a145,_0x590195){_0x42a145=_0x42a145-(0x1*-0x707+0x1f*0x24+0x415);let _0x373c2f=_0x3f450b[_0x42a145];return _0x373c2f;},_0x37fc(_0x57127c,_0x3ee042);}export async function onMessage(_0x54087f){const _0x5aa703=_0x23c891;try{if(!_0x54087f||!_0x54087f['key']||!_0x54087f[_0x5aa703(0x2ba)])return;const _0x4a7acb=_0x54087f['key']?.['id']||_0x54087f[_0x5aa703(0x19b)]?.[_0x5aa703(0x3a1)+'t']||(_0x54087f[_0x5aa703(0x19b)]?.[_0x5aa703(0x1ba)]?'fromMe':''),_0x3ffbed=String(_0x54087f['key'][_0x5aa703(0x26f)]||'')+'::'+String(_0x4a7acb||'');if(isProcessed(_0x3ffbed))return;markProcessed(_0x3ffbed);const _0x359525=extractTextFromMessage(_0x54087f);if(!_0x359525)return;const _0x4bae9d=_0x54087f['key'][_0x5aa703(0x26f)],_0x3b594a=typeof _0x4bae9d===_0x5aa703(0x2e4)&&_0x4bae9d[_0x5aa703(0x2b5)]('@g.us'),_0x4a1eca=_0x54087f['key']?.['participan'+'t']||_0x54087f[_0x5aa703(0x19b)]?.[_0x5aa703(0x372)]||_0x54087f['key']?.[_0x5aa703(0x26f)]||'',_0x8e5fb5=String(_0x4a1eca||'')['split']('@')[0x3*0x5a5+-0x1d39*-0x1+-0x2e28];let _0x48d13a=![];if(_0x3b594a)try{_0x48d13a=await isadmin(botRef,_0x54087f);}catch(_0x486377){warn(_0x5aa703(0x355)+_0x5aa703(0x2d9)+_0x5aa703(0x2a6)),_0x48d13a=![];}if(_0x54087f[_0x5aa703(0x39e)]){const _0x28f443=typeof _0x54087f[_0x5aa703(0x258)]===_0x5aa703(0x2e4)&&_0x54087f[_0x5aa703(0x258)]['trim']()[_0x5aa703(0x1d9)]?_0x54087f[_0x5aa703(0x258)][_0x5aa703(0x34e)]():_0x359525[_0x5aa703(0x34e)](),_0x4fea42=(_0x28f443['split'](/\s+/)[-0xa2d+0x887*-0x1+0x12b4]||'')[_0x5aa703(0x36c)+'e']();if(!_0x3b594a){const _0x28c558=Boolean(_0x54087f[_0x5aa703(0x19b)][_0x5aa703(0x1ba)]);let _0x53e068=null;if(_0x28c558){const _0x4a7800=getBotJid();_0x53e068=_0x4a7800||_0x54087f[_0x5aa703(0x19b)][_0x5aa703(0x26f)];}else{let _0x494e00=![];try{_0x494e00=await isSudo(botRef,_0x54087f);}catch(_0x589e32){_0x494e00=![];}if(!_0x494e00)return;const _0x501dba=userJidFromCtx(_0x54087f)||{'findings':[]},_0x9cc0a4=await findStoredMatchFromFindings(_0x501dba['findings']||[]);if(!_0x9cc0a4)return;_0x53e068=_0x9cc0a4;}if(!_0x53e068)return;if(_0x4fea42==='lock'){const {triggers:_0x476272,gp:_0x5e54e8}=parseLockCommandOneLine(_0x28f443||_0x359525);if(!_0x476272['length']){await sendText(_0x53e068,'❌\x20PM:\x20one-'+_0x5aa703(0x294)+':\x20lock\x20<tr'+_0x5aa703(0x364)+'gger2>\x20gp:'+_0x5aa703(0x295)+_0x5aa703(0x271));return;}if(!_0x5e54e8){await sendText(_0x53e068,'❌\x20PM:\x20incl'+_0x5aa703(0x31a)+_0x5aa703(0x20d)+_0x5aa703(0x1ad)+_0x5aa703(0x18c)+_0x5aa703(0x2ee)+_0x5aa703(0x296));return;}let _0x29ee3f=[];const _0x52e2db=_0x5e54e8[_0x5aa703(0x34e)]();if(_0x52e2db[_0x5aa703(0x36c)+'e']()===_0x5aa703(0x352))_0x29ee3f=await _0x2261a2[_0x5aa703(0x38b)+_0x5aa703(0x299)]();else{const _0x217391=await _0x2261a2['resolveNam'+'e'](_0x52e2db);if(_0x217391)_0x29ee3f=[_0x217391];else{if(_0x52e2db[_0x5aa703(0x21b)]('@'))_0x29ee3f=[_0x2261a2['normalizeT'+_0x5aa703(0x239)](_0x52e2db)];else{await sendText(_0x53e068,_0x5aa703(0x255)+_0x5aa703(0x2c4)+_0x5aa703(0x275)+_0x52e2db+'\x22.');return;}}}let _0x2e85ea=0x1a17+-0x2101+-0xa*-0xb1;for(const _0x190a4b of uniqArray(_0x29ee3f)){for(const _0x3d5a46 of _0x476272){const _0x3d4c65=await addLock(_0x190a4b,_0x3d5a46,_0x4a1eca);if(_0x3d4c65)_0x2e85ea++;}}await sendText(_0x53e068,'✔️\x20Saved\x20'+_0x2e85ea+_0x5aa703(0x342));return;}if(_0x4fea42===_0x5aa703(0x2f2)){const {gp:_0x1a9132}=parseListCommandOneLine(_0x28f443||_0x359525);if(!_0x1a9132){await sendText(_0x53e068,'❌\x20PM:\x20one-'+_0x5aa703(0x294)+':\x20listlock'+_0x5aa703(0x374)+_0x5aa703(0x241));return;}let _0x319c0e=[];if(_0x1a9132[_0x5aa703(0x36c)+'e']()===_0x5aa703(0x352))_0x319c0e=await _0x2261a2[_0x5aa703(0x38b)+_0x5aa703(0x299)]();else{const _0x2558a8=await _0x2261a2[_0x5aa703(0x26d)+'e'](_0x1a9132);if(_0x2558a8)_0x319c0e=[_0x2558a8];else{if(_0x1a9132[_0x5aa703(0x21b)]('@'))_0x319c0e=[_0x2261a2[_0x5aa703(0x190)+_0x5aa703(0x239)](_0x1a9132)];else{await sendText(_0x53e068,_0x5aa703(0x255)+_0x5aa703(0x2c4)+'id:\x20\x22'+_0x1a9132+'\x22.');return;}}}let _0x38099f=[];for(const _0x42ed96 of _0x319c0e){const _0x37be99=await listLocksForChat(_0x42ed96);for(const _0x5ac57d of _0x37be99)_0x38099f[_0x5aa703(0x27f)]({'chatJid':_0x42ed96,..._0x5ac57d});}await sendText(_0x53e068,_0x5aa703(0x27a)+_0x38099f[_0x5aa703(0x1d9)]+('\x20locks\x20loa'+'ded\x20for\x20re'+_0x5aa703(0x2af)+_0x5aa703(0x366)));if(!_0x38099f[_0x5aa703(0x1d9)])return;let _0x580ae2='';for(const _0x5f2b4e of _0x38099f){const _0x35fab8=_0x5f2b4e[_0x5aa703(0x2f5)]?new Date(_0x5f2b4e['created_at']*(0x1*-0x19c1+0x4e1*0x4+-0x173*-0x7))[_0x5aa703(0x16c)+'g']()[_0x5aa703(0x269)](-0x75a*-0x4+-0xb62+0x6*-0x301,-0x1bdb+-0x1421+0x3006):'',_0x5a3167=_0x5f2b4e[_0x5aa703(0x276)]==='regex'?'⦿':_0x5f2b4e[_0x5aa703(0x276)]===_0x5aa703(0x242)?'✶':'',_0x80a13c=_0x5f2b4e[_0x5aa703(0x276)]==='regex'?_0x5aa703(0x34a)+_0x5f2b4e[_0x5aa703(0x325)]:_0x5f2b4e[_0x5aa703(0x325)],_0x2d8e33=_0x5f2b4e[_0x5aa703(0x276)]===_0x5aa703(0x188)&&_0x5f2b4e[_0x5aa703(0x320)+_0x5aa703(0x229)]===0x1405+0x103f+-0xd3*0x2c?'\x20(INVALID\x20'+_0x5aa703(0x297):'',_0x5d01a2=_0x5f2b4e[_0x5aa703(0x2eb)]+':'+_0x5f2b4e['id']+'.\x20'+(_0x5a3167?_0x5a3167+'\x20':'')+_0x80a13c+_0x2d8e33+'\x20'+(_0x35fab8?'('+_0x35fab8+')':'')+'\x0a';(_0x580ae2+_0x5d01a2)['length']>-0x4d2*0x6+-0x40f*0x8+0x4340&&(await sendText(_0x53e068,_0x580ae2[_0x5aa703(0x34e)]()),_0x580ae2=''),_0x580ae2+=_0x5d01a2;}if(_0x580ae2[_0x5aa703(0x34e)]())await sendText(_0x53e068,_0x580ae2[_0x5aa703(0x34e)]());return;}if(['unlock','dellock',_0x5aa703(0x20f),'unlocklock','delock'][_0x5aa703(0x21b)](_0x4fea42)){const {parts:_0x229a27,gp:_0x127994}=parseUnlockCommandOneLine(_0x28f443||_0x359525);if(!_0x229a27?.[_0x5aa703(0x1d9)]){await sendText(_0x53e068,_0x5aa703(0x2a5)+_0x5aa703(0x294)+':\x20unlock\x20<'+_0x5aa703(0x331)+_0x5aa703(0x28c)+_0x5aa703(0x351)+_0x5aa703(0x37c)+'jid|all>');return;}if(!_0x127994){await sendText(_0x53e068,_0x5aa703(0x2b0)+_0x5aa703(0x31a)+_0x5aa703(0x20d)+'\x20Example:\x20'+'unlock\x201,2'+_0x5aa703(0x24f));return;}let _0xf344a4=[];const _0x596bfb=_0x127994['trim']();if(_0x596bfb[_0x5aa703(0x36c)+'e']()===_0x5aa703(0x352))_0xf344a4=await _0x2261a2[_0x5aa703(0x38b)+_0x5aa703(0x299)]();else{const _0x5511a7=await _0x2261a2[_0x5aa703(0x26d)+'e'](_0x596bfb);if(_0x5511a7)_0xf344a4=[_0x5511a7];else{if(_0x596bfb[_0x5aa703(0x21b)]('@'))_0xf344a4=[_0x2261a2[_0x5aa703(0x190)+_0x5aa703(0x239)](_0x596bfb)];else{await sendText(_0x53e068,_0x5aa703(0x255)+_0x5aa703(0x2c4)+_0x5aa703(0x275)+_0x596bfb+'\x22.');return;}}}let _0x347327=0x1*-0x158c+-0x7a5+-0x35*-0x8d;for(const _0x21120a of _0x229a27){if(!_0x21120a)continue;if(/^\d+$/[_0x5aa703(0x2a4)](_0x21120a)){for(const _0x15b0af of _0xf344a4){const _0x16c150=await deleteLockById(_0x15b0af,_0x21120a);if(_0x16c150)_0x347327+=_0x16c150;}continue;}for(const _0x144800 of _0xf344a4){const _0x4e3077=await deleteLockByPhrase(_0x144800,_0x21120a);if(_0x4e3077)_0x347327+=_0x4e3077;}}await sendText(_0x53e068,'✔️\x20Deleted\x20'+_0x347327+'/'+_0x229a27[_0x5aa703(0x1d9)]+_0x5aa703(0x342));return;}if(_0x4fea42==='unlockall'||_0x4fea42==='delall'||_0x4fea42===_0x5aa703(0x2d0)){const _0x339d2d=(_0x28f443||_0x359525||'')['split'](/\r?\n/)[0x1900+0x1369*-0x1+0x1*-0x597][_0x5aa703(0x34e)](),_0x5a064e=_0x339d2d[_0x5aa703(0x23f)](/^\/?(unlockall|delall|clearlocks)\b/i,'')['trim'](),{left:_0x5f37f0,gp:_0x265832}=splitRestForGp(_0x5a064e);if(!_0x265832){await sendText(_0x53e068,'❌\x20PM:\x20one-'+_0x5aa703(0x294)+_0x5aa703(0x280)+'l\x20gp:<alia'+_0x5aa703(0x2b3));return;}let _0x32afc4=[];const _0x10855=_0x265832[_0x5aa703(0x34e)]();if(_0x10855['toLowerCas'+'e']()===_0x5aa703(0x352))_0x32afc4=await _0x2261a2['getUniqueJ'+'ids']();else{const _0x30e779=await _0x2261a2['resolveNam'+'e'](_0x10855);if(_0x30e779)_0x32afc4=[_0x30e779];else{if(_0x10855['includes']('@'))_0x32afc4=[_0x2261a2[_0x5aa703(0x190)+_0x5aa703(0x239)](_0x10855)];else{await sendText(_0x53e068,'❌\x20Unknown\x20'+_0x5aa703(0x2c4)+_0x5aa703(0x275)+_0x10855+'\x22.');return;}}}let _0x3ac85e=0x683*-0x3+-0xca*-0x1+-0x1*-0x12bf;for(const _0xe9e64c of _0x32afc4){const _0x5103f6=await deleteAllLocksForChat(_0xe9e64c);_0x3ac85e+=_0x5103f6||-0xc17*-0x3+-0x266+-0x29b*0xd;}await sendText(_0x53e068,_0x5aa703(0x1a2)+_0x3ac85e+'\x20lock(s).');return;}if(_0x4fea42==='locknotify'){const _0x338516=parseLockNotifyCommandOneLine(_0x28f443||_0x359525),{mode:_0x1fc240,gp:_0x1ff4c5}=_0x338516;if(!_0x1ff4c5){await sendText(_0x53e068,'❌\x20PM\x20one-l'+_0x5aa703(0x1e8)+_0x5aa703(0x2c0)+_0x5aa703(0x1c2)+_0x5aa703(0x374)+_0x5aa703(0x2a2)+'To\x20query\x20s'+'tatus:\x20loc'+'knotify\x20gp'+_0x5aa703(0x231)+'d|all>');return;}let _0x180854=[];const _0x53802a=_0x1ff4c5[_0x5aa703(0x34e)]();if(_0x53802a[_0x5aa703(0x36c)+'e']()===_0x5aa703(0x352))_0x180854=await _0x2261a2['getUniqueJ'+_0x5aa703(0x299)]();else{const _0x2707a9=await _0x2261a2[_0x5aa703(0x26d)+'e'](_0x53802a);if(_0x2707a9)_0x180854=[_0x2707a9];else{if(_0x53802a[_0x5aa703(0x21b)]('@'))_0x180854=[_0x2261a2['normalizeT'+'oUserJid'](_0x53802a)];else{await sendText(_0x53e068,_0x5aa703(0x255)+_0x5aa703(0x2c4)+_0x5aa703(0x275)+_0x53802a+'\x22.');return;}}}if(!_0x1fc240){const _0x4a3304=[];for(const _0x5673ec of uniqArray(_0x180854)){const _0x558572=await getLockNotify(_0x5673ec)[_0x5aa703(0x34b)](()=>0x296*0xe+-0x52b*-0x2+0x7*-0x6a6);_0x4a3304['push'](_0x5673ec+':\x20'+(_0x558572?'ON':_0x5aa703(0x322)));}await sendText(_0x53e068,_0x5aa703(0x1c0)+_0x5aa703(0x244)+_0x5aa703(0x33f)+_0x4a3304['join']('\x0a'));return;}let _0x1aa0fd=0xcd2*-0x2+-0x1*0x277+0x1*0x1c1b;for(const _0x27c878 of uniqArray(_0x180854)){const _0x219cf9=await setLockNotify(_0x27c878,_0x1fc240==='on');if(_0x219cf9)_0x1aa0fd++;}await sendText(_0x53e068,_0x5aa703(0x283)+_0x5aa703(0x2fa)+_0x1fc240+_0x5aa703(0x31c)+_0x1aa0fd+'/'+_0x180854[_0x5aa703(0x1d9)]+(_0x5aa703(0x318)+'.'));return;}return;}if(_0x3b594a){if(!_0x48d13a)return;const _0x5388ee=_0x4bae9d,_0x72fbd1=await getDefault(_0x8e5fb5)[_0x5aa703(0x34b)](()=>null);if(!_0x72fbd1||Array[_0x5aa703(0x37a)](_0x72fbd1)&&_0x72fbd1[_0x5aa703(0x1d9)]===-0x3d9*0x3+-0x332*0x3+0x1521)return;const _0x407094=Array[_0x5aa703(0x37a)](_0x72fbd1)?_0x72fbd1:[_0x72fbd1];let _0x30961f=[];for(const _0x4db418 of _0x407094){try{const _0x80b688=await getConnection(_0x4db418)[_0x5aa703(0x34b)](()=>null);if(Array[_0x5aa703(0x37a)](_0x80b688))_0x30961f['push'](..._0x80b688);else{if(_0x80b688)_0x30961f[_0x5aa703(0x27f)](String(_0x80b688));}}catch(_0x10d460){warn(_0x5aa703(0x2de)+_0x5aa703(0x234)+_0x5aa703(0x316)+_0x4db418+'\x20failed:\x20'+(_0x10d460?.[_0x5aa703(0x2ba)]||_0x10d460));}}_0x30961f=uniqArray(_0x30961f);if(!_0x30961f[_0x5aa703(0x1d9)]){await sendText(_0x5388ee,_0x5aa703(0x2ca)+_0x5aa703(0x1eb)+'your\x20defau'+_0x5aa703(0x262)+_0x5aa703(0x211)+_0x407094[_0x5aa703(0x2bb)](',\x20')+('.\x20Please\x20c'+_0x5aa703(0x1af)+_0x5aa703(0x38e)+'ue(s).'));return;}if(_0x4fea42===_0x5aa703(0x217)){const {triggers:_0xc2001}=parseLockCommandOneLine(_0x28f443||_0x359525);if(!_0xc2001[_0x5aa703(0x1d9)]){await sendText(_0x5388ee,'❌\x20Usage\x20(g'+_0x5aa703(0x2ac)+_0x5aa703(0x2a0)+_0x5aa703(0x2c5)+_0x5aa703(0x321));return;}let _0x1f78c8=-0x1e5f+-0x9*-0x346+0xe9;for(const _0x31d117 of _0x30961f){let _0x5a1bdc=0x5*0x563+0x12*-0x1bf+0x1*0x47f;for(const _0x7fdec of _0xc2001){const _0x14a3e5=await addLock(_0x31d117,_0x7fdec,_0x4a1eca);if(_0x14a3e5)_0x5a1bdc++;}_0x1f78c8+=_0x5a1bdc;}await sendText(_0x5388ee,_0x5aa703(0x2f7)+_0x1f78c8+'/'+_0xc2001[_0x5aa703(0x1d9)]*_0x30961f[_0x5aa703(0x1d9)]+(_0x5aa703(0x177)+_0x5aa703(0x291)+'r\x20default\x20'+_0x5aa703(0x2ab)+'(s):\x20')+_0x30961f[_0x5aa703(0x2bb)](',\x20'));return;}if(_0x4fea42===_0x5aa703(0x2f2)){const _0x25d6f0=[];for(const _0x23952c of _0x30961f){const _0x3f828d=await listLocksForChat(_0x23952c);for(const _0x31bb6b of _0x3f828d)_0x25d6f0[_0x5aa703(0x27f)]({'chatJid':_0x23952c,..._0x31bb6b});}await sendText(_0x5388ee,'✔️\x20[lock]\x20l'+_0x5aa703(0x2f1)+_0x25d6f0[_0x5aa703(0x1d9)]+('\x20locks\x20for'+'\x20your\x20defa'+'ult\x20connec'+_0x5aa703(0x36e))+_0x30961f[_0x5aa703(0x2bb)](',\x20'));if(!_0x25d6f0[_0x5aa703(0x1d9)])return;let _0x1192c0='';for(const _0x27b5e9 of _0x25d6f0){const _0x3bcfda=_0x27b5e9[_0x5aa703(0x2f5)]?new Date(_0x27b5e9[_0x5aa703(0x2f5)]*(-0x1d9c+0x7d+0x2107))['toISOStrin'+'g']()['slice'](0x4af*-0x3+0xfeb+0x2*-0xef,-0x16a1+-0x2251+0x38fc):'',_0x91cdf3=_0x27b5e9[_0x5aa703(0x276)]===_0x5aa703(0x188)?'⦿':_0x27b5e9[_0x5aa703(0x276)]==='wildcard'?'✶':'',_0x21cda4=_0x27b5e9[_0x5aa703(0x276)]==='regex'?_0x5aa703(0x34a)+_0x27b5e9['phrase']:_0x27b5e9['phrase'],_0x4cbb22=_0x27b5e9[_0x5aa703(0x276)]===_0x5aa703(0x188)&&_0x27b5e9['is_valid_r'+_0x5aa703(0x229)]===-0x81*0x38+0x5*0x659+-0x385?_0x5aa703(0x1b4)+'REGEX)':'',_0x4cd765=_0x27b5e9[_0x5aa703(0x2eb)]+':'+_0x27b5e9['id']+'.\x20'+(_0x91cdf3?_0x91cdf3+'\x20':'')+_0x21cda4+_0x4cbb22+'\x20'+(_0x3bcfda?'('+_0x3bcfda+')':'')+'\x0a';(_0x1192c0+_0x4cd765)[_0x5aa703(0x1d9)]>0x13bb*-0x1+0x63*0x27+0x1*0xa82&&(await sendText(_0x5388ee,_0x1192c0[_0x5aa703(0x34e)]()),_0x1192c0=''),_0x1192c0+=_0x4cd765;}if(_0x1192c0[_0x5aa703(0x34e)]())await sendText(_0x5388ee,_0x1192c0[_0x5aa703(0x34e)]());return;}if([_0x5aa703(0x1a1),_0x5aa703(0x302),_0x5aa703(0x20f),_0x5aa703(0x30d),_0x5aa703(0x20f)][_0x5aa703(0x21b)](_0x4fea42)){const {parts:_0x4424f2}=parseUnlockCommandOneLine(_0x28f443||_0x359525);if(!_0x4424f2?.[_0x5aa703(0x1d9)]){await sendText(_0x5388ee,'❌\x20Usage\x20(g'+_0x5aa703(0x2ac)+_0x5aa703(0x1e5)+_0x5aa703(0x382)+'ck\x20phrase1'+',phrase2');return;}const _0x31eece=new Map();for(const _0x14a21c of _0x30961f){const _0x5420a3=await listLocksForChat(_0x14a21c);_0x31eece[_0x5aa703(0x26b)](_0x14a21c,_0x5420a3||[]);}let _0x236ca9=0x3*-0x7a0+0x1563+-0x1*-0x17d;for(const _0x192ef4 of _0x4424f2){if(!_0x192ef4)continue;if(/^\d+$/[_0x5aa703(0x2a4)](_0x192ef4)){for(const [_0x44e898,_0x21b586]of _0x31eece[_0x5aa703(0x1ea)]()){if(_0x21b586[_0x5aa703(0x392)](_0xe55a6d=>String(_0xe55a6d['id'])===_0x192ef4)){const _0x4cd931=await deleteLockById(_0x44e898,_0x192ef4);if(_0x4cd931)_0x236ca9+=_0x4cd931;}}continue;}for(const _0x56c6ef of _0x30961f){const _0x138206=await deleteLockByPhrase(_0x56c6ef,_0x192ef4);if(_0x138206)_0x236ca9+=_0x138206;}}await sendText(_0x5388ee,_0x5aa703(0x1a2)+_0x236ca9+'/'+_0x4424f2[_0x5aa703(0x1d9)]+(_0x5aa703(0x345)+_0x5aa703(0x226)+_0x5aa703(0x2f8)+_0x5aa703(0x272)+':\x20')+_0x30961f[_0x5aa703(0x2bb)](',\x20'));return;}if(_0x4fea42===_0x5aa703(0x397)||_0x4fea42===_0x5aa703(0x1be)||_0x4fea42===_0x5aa703(0x2d0)){try{let _0x590fcb=-0x1be5+0x31*0x83+0x2d2;for(const _0x4f8a5a of _0x30961f){const _0x279ae9=await deleteAllLocksForChat(_0x4f8a5a);_0x590fcb+=_0x279ae9||-0x11e0+0x83*0xb+0xc3f;}await sendText(_0x5388ee,_0x5aa703(0x1a2)+_0x590fcb+(_0x5aa703(0x345)+_0x5aa703(0x226)+_0x5aa703(0x2f8)+_0x5aa703(0x272)+':\x20')+_0x30961f[_0x5aa703(0x2bb)](',\x20'));}catch(_0x350c70){warn('[lock]\x20unl'+_0x5aa703(0x2e1)+_0x5aa703(0x1fe)+_0x30961f[_0x5aa703(0x2bb)](',\x20')+':\x20'+(_0x350c70?.[_0x5aa703(0x2ba)]||_0x350c70)),await sendText(_0x5388ee,_0x5aa703(0x2d6)+_0x5aa703(0x1e1)+'ocks\x20for\x20y'+'our\x20defaul'+_0x5aa703(0x37f)+_0x5aa703(0x23c)+_0x30961f[_0x5aa703(0x2bb)](',\x20'));}return;}if(_0x4fea42===_0x5aa703(0x2fd)){const _0x48d9dd=(_0x28f443||_0x359525||'')[_0x5aa703(0x2d5)](/\r?\n/)[-0x6b5+0xf*0x203+-0x2ef*0x8][_0x5aa703(0x34e)](),{left:_0x45c803}=splitRestForGp(_0x48d9dd['replace'](/^\/?locknotify\b/i,'')[_0x5aa703(0x34e)]()),_0x65136f=(_0x45c803||'')['toLowerCas'+'e']();if(!_0x65136f['includes']('on')&&!_0x65136f['includes']('off')){await sendText(_0x5388ee,'❌\x20Usage\x20(g'+_0x5aa703(0x2ac)+':\x20locknoti'+_0x5aa703(0x30a)+'This\x20toggl'+'es\x20lock\x20no'+_0x5aa703(0x310)+_0x5aa703(0x2cd)+'\x20DEFAULT\x20c'+_0x5aa703(0x1ec)+'s).');return;}const _0x1acfcd=_0x65136f[_0x5aa703(0x21b)]('on')?'on':'off';let _0x4d8d8c=0x1336*0x1+0x12f7+-0x262d;for(const _0x5b35f1 of _0x30961f){const _0x5b7102=await setLockNotify(_0x5b35f1,_0x1acfcd==='on');if(_0x5b7102)_0x4d8d8c++;}await sendText(_0x5388ee,_0x5aa703(0x283)+_0x5aa703(0x2fa)+_0x1acfcd+_0x5aa703(0x31c)+_0x4d8d8c+'/'+_0x30961f[_0x5aa703(0x1d9)]+('\x20default\x20c'+_0x5aa703(0x1ec)+'s).'));return;}return;}}if(_0x3b594a){if(!CFG['DEFAULT_EN'+_0x5aa703(0x279)])return;if(_0x54087f['key'][_0x5aa703(0x1ba)])return;if(_0x48d13a)return;const _0x5729a4=_0x4bae9d,_0x5e26d9=extractTextFromMessage(_0x54087f);if(!_0x5e26d9)return;const _0x409ff5=normalizeForMatch(String(_0x5e26d9||''))[_0x5aa703(0x36c)+'e'](),_0x1c0e87=await listLocksForChat(_0x5729a4);if(!_0x1c0e87||!_0x1c0e87[_0x5aa703(0x1d9)])return;const _0x440016=_0x1c0e87['filter'](_0x437c7=>!_0x437c7[_0x5aa703(0x276)]||_0x437c7[_0x5aa703(0x276)]==='normal'),_0x2843b3=_0x1c0e87[_0x5aa703(0x39d)](_0x1e479b=>_0x1e479b[_0x5aa703(0x276)]==='wildcard'),_0x49d664=_0x1c0e87[_0x5aa703(0x39d)](_0x86e9ed=>_0x86e9ed['type']===_0x5aa703(0x188)||_0x86e9ed['type']==='invalid_re'+_0x5aa703(0x1cb)),_0x5b467c=new Set(),_0x60a72a=new Set();if(_0x440016[_0x5aa703(0x1d9)]>0x6*-0x412+-0x1*-0x1230+-0x1c*-0x39){const _0x204e7d=_0x440016['map'](_0x519e40=>normalizeForMatch(String(_0x519e40['phrase']||'')))[_0x5aa703(0x39d)](Boolean),_0xf4da11=_0x204e7d[_0x5aa703(0x2bb)]('\x00');let _0x1f95a1;const _0x183881=ahoCache[_0x5aa703(0x252)](_0x5729a4);if(_0x183881&&_0x183881['serialized'+_0x5aa703(0x193)]===_0xf4da11&&_0x183881['aho'])_0x1f95a1=_0x183881['aho'];else try{_0x1f95a1=new AhoCorasick(_0x204e7d),ahoCache[_0x5aa703(0x26b)](_0x5729a4,{'serializedKeywords':_0xf4da11,'aho':_0x1f95a1});}catch(_0x26fa0f){warn(_0x5aa703(0x317)+_0x5aa703(0x344)+_0x5aa703(0x2bf)+_0x5aa703(0x25a)+_0x5729a4+':\x20'+(_0x26fa0f?.['message']||_0x26fa0f)),_0x1f95a1=null;}if(_0x1f95a1)try{const _0x2441e6=_0x1f95a1[_0x5aa703(0x2f9)](_0x409ff5);for(const _0x59ec71 of _0x2441e6){const _0x269d16=_0x59ec71[_0x5aa703(0x254)],_0x3aa4bb=_0x59ec71[_0x5aa703(0x305)],_0x2c4640=_0x3aa4bb+_0x269d16[_0x5aa703(0x1d9)],_0xf8d34a=_0x3aa4bb===-0x2b*0x52+0x1*-0x88d+0x5*0x477||!/\w/[_0x5aa703(0x2a4)](_0x409ff5[_0x3aa4bb-(0x10a+0x8c6+-0x3*0x345)]),_0x4984d0=_0x2c4640===_0x409ff5[_0x5aa703(0x1d9)]||!/\w/[_0x5aa703(0x2a4)](_0x409ff5[_0x2c4640]);if(_0xf8d34a&&_0x4984d0)for(const _0x52a7f8 of _0x440016){const _0xb5092a=normalizeForMatch(String(_0x52a7f8['phrase']||''));if(_0xb5092a===_0x269d16)try{const _0x55860a=wholeWordRegexForPhrase(_0xb5092a);_0x55860a[_0x5aa703(0x2a4)](_0x409ff5)&&(_0x5b467c['add'](_0x52a7f8['id']),_0x60a72a[_0x5aa703(0x27b)](_0x52a7f8[_0x5aa703(0x325)]));}catch(_0x55a8ec){_0x5b467c['add'](_0x52a7f8['id']),_0x60a72a[_0x5aa703(0x27b)](_0x52a7f8[_0x5aa703(0x325)]);}}else for(const _0xe2f3a2 of _0x440016){try{const _0x1e3744=wholeWordRegexForPhrase(normalizeForMatch(String(_0xe2f3a2[_0x5aa703(0x325)]||'')));_0x1e3744[_0x5aa703(0x2a4)](_0x409ff5)&&(_0x5b467c[_0x5aa703(0x27b)](_0xe2f3a2['id']),_0x60a72a[_0x5aa703(0x27b)](_0xe2f3a2[_0x5aa703(0x325)]));}catch(_0x5a4d7e){}}}}catch(_0x36c426){warn('[lock]\x20Aho'+'Corasick\x20s'+_0x5aa703(0x2d1)+_0x5aa703(0x360)+(_0x36c426?.[_0x5aa703(0x2ba)]||_0x36c426));for(const _0x553efa of _0x440016){try{const _0x1b41b0=wholeWordRegexForPhrase(normalizeForMatch(String(_0x553efa['phrase']||'')));_0x1b41b0['test'](_0x409ff5)&&(_0x5b467c[_0x5aa703(0x27b)](_0x553efa['id']),_0x60a72a[_0x5aa703(0x27b)](_0x553efa[_0x5aa703(0x325)]));}catch(_0x2445a7){}}}else for(const _0x1e102f of _0x440016){try{const _0x3f3f76=wholeWordRegexForPhrase(normalizeForMatch(String(_0x1e102f['phrase']||'')));_0x3f3f76[_0x5aa703(0x2a4)](_0x409ff5)&&(_0x5b467c[_0x5aa703(0x27b)](_0x1e102f['id']),_0x60a72a['add'](_0x1e102f[_0x5aa703(0x325)]));}catch(_0x4adcce){}}}if(_0x2843b3[_0x5aa703(0x1d9)]>-0x3*0xc2a+0x7ff+0x1c7f)for(const _0x8b8088 of _0x2843b3){try{const _0x4d9973=wildcardToRegex(String(_0x8b8088[_0x5aa703(0x325)]||''));_0x4d9973['test'](_0x409ff5)&&(_0x5b467c[_0x5aa703(0x27b)](_0x8b8088['id']),_0x60a72a[_0x5aa703(0x27b)](_0x8b8088[_0x5aa703(0x325)]));}catch(_0xb53bec){warn(_0x5aa703(0x32d)+_0x5aa703(0x3a3)+'ard\x20for\x20id'+'='+_0x8b8088['id']+_0x5aa703(0x377)+_0x8b8088[_0x5aa703(0x325)]+_0x5aa703(0x17c)+(_0xb53bec?.['message']||_0xb53bec));}}if(_0x49d664[_0x5aa703(0x1d9)]>0x352+0x1*-0x85a+0xe*0x5c)for(const _0x329432 of _0x49d664){try{if(_0x329432['is_valid_r'+_0x5aa703(0x229)]===-0x184b+-0xa7*0x24+0x2fc7){warn(_0x5aa703(0x383)+_0x5aa703(0x2a7)+_0x5aa703(0x335)+'\x20regex\x20id='+_0x329432['id']+_0x5aa703(0x377)+_0x329432[_0x5aa703(0x325)]+'\x22');continue;}const _0x4c5934=new RegExp(_0x329432[_0x5aa703(0x325)],'iu');_0x4c5934[_0x5aa703(0x2a4)](_0x409ff5)&&(_0x5b467c[_0x5aa703(0x27b)](_0x329432['id']),_0x60a72a[_0x5aa703(0x27b)]('regex:'+_0x329432[_0x5aa703(0x325)]));}catch(_0x406cad){warn(_0x5aa703(0x32d)+'alid\x20store'+_0x5aa703(0x1c1)+_0x5aa703(0x1a4)+_0x329432['id']+_0x5aa703(0x377)+_0x329432[_0x5aa703(0x325)]+'\x22:\x20'+(_0x406cad?.['message']||_0x406cad));try{await db['run']('UPDATE\x20loc'+'ks\x20SET\x20is_'+'valid_rege'+_0x5aa703(0x314)+'E\x20id\x20=\x20?',[_0x329432['id']]);}catch(_0x54d1c3){}}}if(_0x5b467c['size']>-0x85d*0x2+0x1b3c+0x5*-0x21a)try{try{const _0x4cd7a8=await getLockNotify(_0x5729a4)[_0x5aa703(0x34b)](()=>-0x390+0x1671+0x1b*-0xb3);if(_0x4cd7a8)try{const _0x52e067=await db['get'](_0x5aa703(0x332)+_0x5aa703(0x1b6)+_0x5aa703(0x1b2)+_0x5aa703(0x251)+_0x5aa703(0x213)+_0x5aa703(0x29e));let _0x103df7=_0x52e067?.[_0x5aa703(0x2ae)]||null;if(!_0x103df7){const _0x2838ae=getBotJid();_0x103df7=_0x2838ae||null;}if(_0x103df7){const _0x181de3=Array[_0x5aa703(0x372)](_0x60a72a)[_0x5aa703(0x269)](-0x4d5*-0x5+-0x760+-0x10c9,-0x24d7+0x1*-0x1543+-0xc*-0x4d8)[_0x5aa703(0x2bb)](',\x20'),_0x21af58=_0x8e5fb5||String(_0x4a1eca||'')[_0x5aa703(0x2d5)]('@')[0xd*-0x19b+0x1e15+-0x936]||_0x5aa703(0x184),_0x5db684=String(_0x5e26d9||'')['trim'](),_0x339867=_0x5aa703(0x34c)+_0x5aa703(0x1b3)+_0x5729a4+'\x20by\x20@'+_0x21af58+'\x0aMatched:\x20'+_0x181de3+_0x5aa703(0x26e)+_0x5db684;await sendText(_0x103df7,_0x339867,_0x4a1eca?[_0x4a1eca]:[]);}}catch(_0x1dca0a){warn(_0x5aa703(0x1f0)+_0x5aa703(0x323)+_0x5aa703(0x365)+_0x5aa703(0x1bc)+':\x20'+(_0x1dca0a?.[_0x5aa703(0x2ba)]||_0x1dca0a));}}catch(_0x32094d){warn(_0x5aa703(0x284)+'knotify\x20ch'+'eck\x20failed'+':\x20'+(_0x32094d?.['message']||_0x32094d));}enqueueDeletion(_0x54087f);for(const _0x48ff51 of _0x5b467c){try{await db[_0x5aa703(0x248)](_0x5aa703(0x354)+'ks\x20SET\x20hit'+_0x5aa703(0x1d5)+_0x5aa703(0x1c4)+_0x5aa703(0x1f6)+_0x5aa703(0x1de),[_0x48ff51]);}catch(_0x3b4b32){}}}catch(_0x3496e6){warn(_0x5aa703(0x1cc)+'orcement\x20f'+_0x5aa703(0x1f8)+(_0x3496e6?.[_0x5aa703(0x2ba)]||_0x3496e6));}}}catch(_0x68259a){error(_0x68259a,_0x5aa703(0x286)+_0x5aa703(0x1ef)+':\x20'+(_0x68259a?.['message']||_0x68259a));}}export async function cleanup(){const _0x5a2875=_0x23c891;shuttingDown=!![];for(const _0x22a9c1 of processedMessageKeys[_0x5a2875(0x387)]())try{clearTimeout(_0x22a9c1);}catch(_0x746058){}processedMessageKeys[_0x5a2875(0x326)](),perChatQueue[_0x5a2875(0x326)](),perChatProcessing['clear'](),activeChats=0x26e5+0xdc4*0x1+-0x319*0x11,botRef=null,sendApi=null,ahoCache['clear'](),info(_0x5a2875(0x2d8)+_0x5a2875(0x39c));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};