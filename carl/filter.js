const _0x353b01=_0x20b7;(function(_0x1a43cb,_0x29b295){const _0x41e0d9=_0x20b7,_0xc7ce60=_0x1a43cb();while(!![]){try{const _0x9a34b4=parseInt(_0x41e0d9(0x276))/(-0x1*0x69f+-0xbcc+0x126c*0x1)*(parseInt(_0x41e0d9(0x25f))/(-0x177f+-0xbcb*-0x3+0x1*-0xbe0))+parseInt(_0x41e0d9(0x2c5))/(-0x1301+0x3b*0x3b+-0x56b*-0x1)+-parseInt(_0x41e0d9(0x268))/(-0x2f7*0x9+-0x2*-0x7bb+0x19b*0x7)*(-parseInt(_0x41e0d9(0x2a2))/(-0x2162+0x1a1a+0x74d))+parseInt(_0x41e0d9(0x28f))/(-0x69f+0x5cb*0x4+-0x1087)*(-parseInt(_0x41e0d9(0x236))/(-0x1*-0xcdf+0xa3c+-0x2*0xb8a))+-parseInt(_0x41e0d9(0x166))/(-0xf33+0x987+0x49*0x14)+-parseInt(_0x41e0d9(0x2aa))/(-0x1*-0x1e61+-0xa*-0x1bb+-0x2fa6)*(-parseInt(_0x41e0d9(0x160))/(-0x3b*0x5+0x7*-0x19d+0x22*0x5e))+-parseInt(_0x41e0d9(0x2b8))/(-0x2646+-0xbf*-0x17+-0x2*-0xa94)*(-parseInt(_0x41e0d9(0x221))/(-0x16f8+0x9ff+0x1*0xd05));if(_0x9a34b4===_0x29b295)break;else _0xc7ce60['push'](_0xc7ce60['shift']());}catch(_0x3bff89){_0xc7ce60['push'](_0xc7ce60['shift']());}}}(_0x443d,0x1439bc+-0x6040a+0xea34));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x47c89e from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x353b01(0x20d);export const version=_0x353b01(0x2cb);export const priority=0xdd5*0x1+0x1974+0x26d1*-0x1;export const configKeys=[_0x353b01(0x165)];export const commands=['gfilter','glistfilte'+'r',_0x353b01(0x26e),_0x353b01(0x26e)+'s',_0x353b01(0x23d)];function clampTypingMs(_0x3291f8){const _0x32814f=Number(_0x3291f8);if(!Number['isFinite'](_0x32814f)||isNaN(_0x32814f))return 0x35*0x13+0x6fa+0x85*-0x15;if(_0x32814f<=-0x1c58+-0x4e9*-0x4+0x45a*0x2)return-0x45+0x6*-0xb3+0x17d*0x3;if(_0x32814f>0x255*0x23+0x351d*0x1+-0x2c*0x1bb)return-0x515e+-0x352*0x17+0xd854;return Math['floor'](_0x32814f);}function sleep(_0xed88ff){return new Promise(_0x12e652=>setTimeout(_0x12e652,_0xed88ff));}async function simulateTypingAndWait(_0x241116,_0x1cf97f,_0x5d9c12){const _0x30957f=_0x353b01;if(!_0x5d9c12||_0x5d9c12<=-0x1*-0x1cdd+0x23c1+0x72e*-0x9)return;try{if(_0x241116&&typeof _0x241116[_0x30957f(0x2d2)+_0x30957f(0x2cd)]==='function')try{await _0x241116[_0x30957f(0x2d2)+_0x30957f(0x2cd)](_0x30957f(0x16c),_0x1cf97f);}catch(_0x5585ff){}}catch(_0x57a6a3){}try{await sleep(_0x5d9c12);}catch(_0x3d7caf){}try{if(_0x241116&&typeof _0x241116[_0x30957f(0x2d2)+_0x30957f(0x2cd)]==='function')try{await _0x241116['sendPresen'+_0x30957f(0x2cd)](_0x30957f(0x16a),_0x1cf97f);}catch(_0x1cfae8){}}catch(_0x1ad310){}}function ensureArray(_0x33bbe2){const _0x18e9e8=_0x353b01;if(!_0x33bbe2)return[];if(Array[_0x18e9e8(0x1ce)](_0x33bbe2))return _0x33bbe2;return[String(_0x33bbe2)];}function uniqArray(_0x347574){const _0x3c9c8a=_0x353b01,_0x7a663d=new Set(),_0x40038c=[];for(const _0x277b8c of _0x347574){const _0x15724d=String(_0x277b8c||'')[_0x3c9c8a(0x144)]();if(!_0x15724d)continue;!_0x7a663d['has'](_0x15724d)&&(_0x7a663d[_0x3c9c8a(0x2c8)](_0x15724d),_0x40038c[_0x3c9c8a(0x286)](_0x15724d));}return _0x40038c;}function escapeRegex(_0x4fe001){const _0x460b7d=_0x353b01;return _0x4fe001[_0x460b7d(0x225)](/[.*+?^${}()|[\]\\]/g,_0x460b7d(0x15f));}function wildcardToRegexPattern(_0x14fb8d){const _0x564a8c=_0x353b01,_0x5b7672=_0x14fb8d[_0x564a8c(0x272)]('*')[_0x564a8c(0x2d5)](_0x498354=>escapeRegex(_0x498354));return'\x5cb'+_0x5b7672['join'](_0x564a8c(0x2df))+'\x5cb';}function clampConfigTypingMs(){const _0x1247fd=_0x353b01;try{const _0x4f93dc=getConfig()||{},_0x364c06=_0x4f93dc[_0x1247fd(0x165)]&&typeof _0x4f93dc['FILTERS']==='object'?_0x4f93dc[_0x1247fd(0x165)]:{};return clampTypingMs(_0x364c06[_0x1247fd(0x2d3)+'_MS']);}catch(_0x5e2370){return 0x1*0x26eb+-0x1*0x1fc5+-0x726;}}let botRef=null,sendApi=null;async function sendText(_0x42ce57,_0x23d6ce,_0x350b6c,_0x2df2a5){const _0x38dfe1=_0x353b01;let _0xda1cb4=null,_0x30ff20=null,_0x5a0d77=null,_0x22f210=[];_0x42ce57&&typeof _0x42ce57===_0x38dfe1(0x1fc)&&_0x42ce57[_0x38dfe1(0x1d1)]&&_0x42ce57['message']?(_0xda1cb4=_0x42ce57,_0x30ff20=_0x23d6ce,_0x5a0d77=_0x350b6c,_0x22f210=Array[_0x38dfe1(0x1ce)](_0x2df2a5)?_0x2df2a5:[]):(_0x30ff20=_0x42ce57,_0x5a0d77=_0x23d6ce,_0x22f210=Array[_0x38dfe1(0x1ce)](_0x350b6c)?_0x350b6c:[]);if(!_0x5a0d77)return;if(!_0x30ff20){warn(_0x38dfe1(0x2c7)+_0x38dfe1(0x27e)+_0x38dfe1(0x1d2)+_0x38dfe1(0x242)+_0x38dfe1(0x294));return;}const _0xe5a560={'text':String(_0x5a0d77)};if(Array[_0x38dfe1(0x1ce)](_0x22f210)&&_0x22f210[_0x38dfe1(0x22c)])_0xe5a560[_0x38dfe1(0x2cc)]=_0x22f210;try{if(!sendApi){warn(_0x38dfe1(0x2c7)+_0x38dfe1(0x2c2)+_0x38dfe1(0x1ad));return;}const _0x1f50ff=clampConfigTypingMs();if(_0x1f50ff>0x8cc+0x2*0x2a2+-0xe1*0x10)try{await simulateTypingAndWait(botRef?.[_0x38dfe1(0x287)],_0x30ff20,_0x1f50ff);}catch(_0x4b7734){warn(_0x38dfe1(0x2c7)+'simulateTy'+'pingAndWai'+_0x38dfe1(0x2a1)+(_0x4b7734?.[_0x38dfe1(0x2ed)]||_0x4b7734));}if(_0xda1cb4&&typeof _0xda1cb4['reply']===_0x38dfe1(0x2de))try{await _0xda1cb4['reply']({'text':String(_0x5a0d77),'mentions':_0xe5a560['mentions']||[]});return;}catch(_0x15899d){try{await sendApi(_0x30ff20,_0xe5a560);return;}catch(_0x47f31e){warn('[gfilter]\x20'+_0x38dfe1(0x264)+_0x38dfe1(0x1e9)+_0x38dfe1(0x216)+_0x38dfe1(0x244)+_0x38dfe1(0x155)+':\x20'+(_0x47f31e?.[_0x38dfe1(0x2ed)]||_0x47f31e));return;}}try{await sendApi(_0x30ff20,_0xe5a560);}catch(_0x5e286d){warn(_0x38dfe1(0x2c7)+'sendText\x20f'+'ailed\x20to\x20'+_0x30ff20+':\x20'+(_0x5e286d?.['message']||_0x5e286d));}}catch(_0x471262){warn('[gfilter]\x20'+_0x38dfe1(0x1fd)+_0x38dfe1(0x1d3)+_0x38dfe1(0x186)+(_0x471262?.[_0x38dfe1(0x2ed)]||_0x471262));}}async function tableExists(_0x5d1fc2){const _0xdfbc0b=_0x353b01;try{const _0x39f292=await db[_0xdfbc0b(0x2d9)](_0xdfbc0b(0x263)+'e\x20FROM\x20sql'+_0xdfbc0b(0x24a)+_0xdfbc0b(0x2a7)+'e=\x27table\x27\x20'+_0xdfbc0b(0x2f0),[_0x5d1fc2]);return!!_0x39f292;}catch(_0x4b9256){return warn(_0xdfbc0b(0x2c7)+'tableExist'+_0xdfbc0b(0x1e2)+(_0x4b9256?.[_0xdfbc0b(0x2ed)]||_0x4b9256)),![];}}async function getTableColumns(_0x51bb93){const _0x25c6a4=_0x353b01;try{const _0x359bb0=await db[_0x25c6a4(0x1cf)]('PRAGMA\x20tab'+_0x25c6a4(0x231)+_0x51bb93+')');return(_0x359bb0||[])[_0x25c6a4(0x2d5)](_0x784a34=>_0x784a34[_0x25c6a4(0x2b6)]);}catch(_0x1d1f68){return warn(_0x25c6a4(0x2c7)+_0x25c6a4(0x170)+_0x25c6a4(0x1ee)+_0x25c6a4(0x2c6)+_0x51bb93+':\x20'+(_0x1d1f68?.[_0x25c6a4(0x2ed)]||_0x1d1f68)),[];}}function resolveChatJidFromRow(_0x2f544c){const _0x591dd2=_0x353b01,_0x1f9085=[_0x591dd2(0x175),_0x591dd2(0x1e4),_0x591dd2(0x24e),_0x591dd2(0x211),_0x591dd2(0x1f5),_0x591dd2(0x265)];for(const _0x2b2773 of _0x1f9085)if(_0x2b2773 in _0x2f544c&&_0x2f544c[_0x2b2773])return String(_0x2f544c[_0x2b2773]);for(const _0x209598 of Object[_0x591dd2(0x27b)](_0x2f544c)){const _0x74ba9=_0x2f544c[_0x209598];if(typeof _0x74ba9===_0x591dd2(0x28e)&&_0x74ba9[_0x591dd2(0x1a2)]('@'))return _0x74ba9;}return null;}function resolveTriggerFromRow(_0x743431){const _0x57c76c=_0x353b01,_0x50a82c=[_0x57c76c(0x23a),_0x57c76c(0x188),_0x57c76c(0x16d),'word',_0x57c76c(0x1bf)];for(const _0x10aace of _0x50a82c)if(_0x10aace in _0x743431&&_0x743431[_0x10aace])return String(_0x743431[_0x10aace]);for(const _0x2468e4 of Object[_0x57c76c(0x27b)](_0x743431)){const _0x452d44=_0x743431[_0x2468e4];if(typeof _0x452d44==='string'&&!_0x452d44[_0x57c76c(0x1a2)]('@')&&_0x452d44['length']<0x2*-0x126b+-0x1*0x209+0x280b)return _0x452d44;}return null;}function resolveResponsesFromRow(_0x1907d8){const _0x338c23=_0x353b01,_0x1de8bd=[_0x338c23(0x2eb),_0x338c23(0x148),'reply',_0x338c23(0x1bd),_0x338c23(0x2f1),_0x338c23(0x19b),_0x338c23(0x2ed)];for(const _0xfb406b of _0x1de8bd)if(_0xfb406b in _0x1907d8&&_0x1907d8[_0xfb406b]!=null)return _0x1907d8[_0xfb406b];for(const _0x339632 of Object[_0x338c23(0x27b)](_0x1907d8)){const _0x4b6b95=_0x1907d8[_0x339632];if(typeof _0x4b6b95===_0x338c23(0x28e)&&(_0x4b6b95[_0x338c23(0x144)]()[_0x338c23(0x2dd)]('!')||_0x4b6b95['trim']()[_0x338c23(0x1a2)]('\x0a')||_0x4b6b95[_0x338c23(0x144)]()['startsWith']('[')))return _0x4b6b95;}return null;}async function readAndNormalizeExistingFilters(){const _0x4ff6a9=_0x353b01;try{const _0x5973fe=await db['all'](_0x4ff6a9(0x245)+_0x4ff6a9(0x1ef)+'s'),_0x30d2a3=new Map();for(const _0x770331 of _0x5973fe||[]){const _0x31dc6b=resolveTriggerFromRow(_0x770331)||'',_0x502a11=resolveChatJidFromRow(_0x770331)||'';if(!_0x31dc6b||!_0x502a11)continue;const _0x59ac81=resolveResponsesFromRow(_0x770331),_0x26835a=normalizeResponseValue(_0x59ac81),_0x20f84f=_0x770331[_0x4ff6a9(0x20a)]||_0x770331[_0x4ff6a9(0x1fe)]||_0x770331[_0x4ff6a9(0x1eb)]||'';let _0x258444=Number(_0x770331['created_at']||_0x770331['ts']||_0x770331['timestamp']||_0x770331[_0x4ff6a9(0x194)]||0x955+0x88*-0x39+-0x1*-0x14f3);if(!_0x258444)_0x258444=Math[_0x4ff6a9(0x246)](Date['now']()/(0x1601+0x1f*-0x10f+0xeb8));const _0x273431=_0x502a11+'||'+_0x31dc6b;if(!_0x30d2a3['has'](_0x273431))_0x30d2a3['set'](_0x273431,{'trigger':_0x31dc6b,'chat_jid':_0x502a11,'responses':_0x26835a[_0x4ff6a9(0x1e0)](),'created_by':_0x20f84f,'created_at':_0x258444});else{const _0x19cf1d=_0x30d2a3[_0x4ff6a9(0x2d9)](_0x273431);_0x19cf1d['responses']=uniqArray(_0x19cf1d[_0x4ff6a9(0x2eb)][_0x4ff6a9(0x147)](_0x26835a)),_0x19cf1d['created_by']=_0x19cf1d[_0x4ff6a9(0x20a)]||_0x20f84f,_0x19cf1d['created_at']=Math[_0x4ff6a9(0x164)](_0x19cf1d['created_at']||0x1*-0x181d+0x1*0xf26+0x11*0x87,_0x258444||-0x113f+-0x245b+0x359a);}}return Array[_0x4ff6a9(0x1da)](_0x30d2a3[_0x4ff6a9(0x1a0)]());}catch(_0x532aef){return warn(_0x4ff6a9(0x2c7)+_0x4ff6a9(0x1d0)+'malizeExis'+_0x4ff6a9(0x2cf)+'s\x20failed:\x20'+(_0x532aef?.[_0x4ff6a9(0x2ed)]||_0x532aef)),[];}}async function ensureSchema(){const _0x304bec=_0x353b01,_0x585690={'id':_0x304bec(0x24f)+_0x304bec(0x254)+_0x304bec(0x243)+_0x304bec(0x2b9),'trigger':_0x304bec(0x19f)+'ULL','chat_jid':_0x304bec(0x19f)+'ULL','responses':'TEXT\x20NOT\x20N'+'ULL\x20DEFAUL'+'T\x20\x27[]\x27','rr_index':'INTEGER\x20DE'+'FAULT\x200','created_by':_0x304bec(0x22e)+_0x304bec(0x26c),'created_at':_0x304bec(0x233)+_0x304bec(0x171)};try{const _0x29fb64=await tableExists(_0x304bec(0x2ca));if(!_0x29fb64){const _0x3f36c0=Object['entries'](_0x585690)[_0x304bec(0x2d5)](([_0x4dfb33,_0x47b7c9])=>_0x4dfb33+'\x20'+_0x47b7c9)[_0x304bec(0x207)](_0x304bec(0x183));await db[_0x304bec(0x21e)](_0x304bec(0x2bc)+'REATE\x20TABL'+_0x304bec(0x248)+_0x304bec(0x1aa)+'\x20\x20'+_0x3f36c0+(_0x304bec(0x162)+'\x20\x20UNIQUE(c'+_0x304bec(0x261)+_0x304bec(0x212)+'\x20\x20\x20\x20\x20\x20);\x0a\x20'+_0x304bec(0x1b3)));try{await db[_0x304bec(0x21e)]('CREATE\x20IND'+_0x304bec(0x2b3)+'EXISTS\x20idx'+_0x304bec(0x182)+_0x304bec(0x210)+'ters(chat_'+_0x304bec(0x29a));}catch(_0x5af980){}try{await db[_0x304bec(0x21e)](_0x304bec(0x1b8)+'QUE\x20INDEX\x20'+_0x304bec(0x17b)+_0x304bec(0x217)+_0x304bec(0x2da)+'ue\x20ON\x20filt'+'ers(chat_j'+'id,\x20trigge'+_0x304bec(0x1b7));}catch(_0x2e201a){}info(_0x304bec(0x2c7)+_0x304bec(0x277)+_0x304bec(0x16b)+'table\x20(can'+_0x304bec(0x1ca)+_0x304bec(0x2ec));return;}const _0x3e142d=await getTableColumns('filters'),_0x4785cb=[];for(const _0x598141 of Object[_0x304bec(0x27b)](_0x585690)){if(!_0x3e142d['includes'](_0x598141))_0x4785cb[_0x304bec(0x286)](_0x598141);}if(_0x4785cb['length']===0x38c+0x161a*-0x1+0x26*0x7d){try{await db['exec'](_0x304bec(0x1d7)+_0x304bec(0x2b3)+_0x304bec(0x2bb)+_0x304bec(0x182)+_0x304bec(0x210)+_0x304bec(0x228)+_0x304bec(0x29a));}catch(_0x4d1448){warn(_0x304bec(0x2c7)+'idx\x20create'+':\x20'+(_0x4d1448?.[_0x304bec(0x2ed)]||_0x4d1448));}try{await db[_0x304bec(0x21e)](_0x304bec(0x1b8)+_0x304bec(0x2c0)+_0x304bec(0x17b)+_0x304bec(0x217)+_0x304bec(0x2da)+_0x304bec(0x27c)+'ers(chat_j'+_0x304bec(0x1f3)+_0x304bec(0x1b7));}catch(_0x46c2c1){warn(_0x304bec(0x2c7)+_0x304bec(0x15a)+':\x20'+(_0x46c2c1?.[_0x304bec(0x2ed)]||_0x46c2c1));}return;}const _0x138a7e=_0x4785cb[_0x304bec(0x1ff)](_0x2297ae=>!['id',_0x304bec(0x23a),_0x304bec(0x175)][_0x304bec(0x1a2)](_0x2297ae));if(_0x138a7e){for(const _0x24203a of _0x4785cb){try{const _0x109542=_0x585690[_0x24203a],_0x3e5e0b=_0x109542['split']('\x20')['slice'](0x10d*0x3+-0x2b*-0x3+0xbb*-0x5)[_0x304bec(0x207)]('\x20');await db[_0x304bec(0x21e)]('ALTER\x20TABL'+_0x304bec(0x248)+_0x304bec(0x20f)+'\x20'+_0x24203a+'\x20'+_0x3e5e0b),info('[gfilter]\x20'+_0x304bec(0x2e4)+'ing\x20column'+'\x20'+_0x24203a+(_0x304bec(0x179)+_0x304bec(0x28c)));}catch(_0x18375f){warn('[gfilter]\x20'+_0x304bec(0x1ab)+'umn\x20'+_0x24203a+_0x304bec(0x146)+(_0x18375f?.[_0x304bec(0x2ed)]||_0x18375f));}}try{await db['exec'](_0x304bec(0x1d7)+'EX\x20IF\x20NOT\x20'+_0x304bec(0x2bb)+_0x304bec(0x182)+'hat\x20ON\x20fil'+'ters(chat_'+_0x304bec(0x29a));}catch(_0xd808f){warn(_0x304bec(0x2c7)+_0x304bec(0x2e5)+':\x20'+(_0xd808f?.[_0x304bec(0x2ed)]||_0xd808f));}try{await db[_0x304bec(0x21e)](_0x304bec(0x1b8)+_0x304bec(0x2c0)+_0x304bec(0x17b)+_0x304bec(0x217)+_0x304bec(0x2da)+_0x304bec(0x27c)+_0x304bec(0x289)+'id,\x20trigge'+_0x304bec(0x1b7));}catch(_0xe722bf){warn(_0x304bec(0x2c7)+_0x304bec(0x15a)+':\x20'+(_0xe722bf?.[_0x304bec(0x2ed)]||_0xe722bf));}return;}info(_0x304bec(0x2c7)+_0x304bec(0x1e6)+'ters\x20table'+_0x304bec(0x247)+'-\x20performi'+_0x304bec(0x274)+_0x304bec(0x1b0));const _0x385311=await readAndNormalizeExistingFilters();await db['exec'](_0x304bec(0x271)+_0x304bec(0x285)+_0x304bec(0x1f2));try{await db[_0x304bec(0x21e)](_0x304bec(0x24b)+'LE\x20IF\x20NOT\x20'+'EXISTS\x20fil'+_0x304bec(0x21b)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x304bec(0x1ac)+_0x304bec(0x2bd)+_0x304bec(0x2ee)+_0x304bec(0x204)+_0x304bec(0x293)+_0x304bec(0x1c8)+'T\x20NULL,\x0a\x20\x20'+_0x304bec(0x15e)+'_jid\x20TEXT\x20'+'NOT\x20NULL,\x0a'+_0x304bec(0x198)+_0x304bec(0x154)+_0x304bec(0x16e)+_0x304bec(0x239)+_0x304bec(0x14c)+_0x304bec(0x19d)+'ex\x20INTEGER'+_0x304bec(0x1fa)+_0x304bec(0x162)+_0x304bec(0x20a)+_0x304bec(0x190)+_0x304bec(0x1a7)+_0x304bec(0x205)+_0x304bec(0x19c)+'EGER\x20DEFAU'+_0x304bec(0x2be)+_0x304bec(0x1b5)+'(chat_jid,'+_0x304bec(0x196)+_0x304bec(0x26d));}catch(_0x45a127){await db[_0x304bec(0x21e)](_0x304bec(0x24b)+_0x304bec(0x1cc)+_0x304bec(0x229)+_0x304bec(0x21b)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+_0x304bec(0x1ac)+_0x304bec(0x2bd)+_0x304bec(0x2ee)+_0x304bec(0x204)+_0x304bec(0x293)+_0x304bec(0x1c8)+_0x304bec(0x281)+_0x304bec(0x15e)+_0x304bec(0x255)+'NOT\x20NULL,\x0a'+_0x304bec(0x198)+_0x304bec(0x154)+_0x304bec(0x16e)+'L\x20DEFAULT\x20'+_0x304bec(0x14c)+_0x304bec(0x19d)+_0x304bec(0x1db)+_0x304bec(0x1fa)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x304bec(0x20a)+'\x20TEXT\x20DEFA'+_0x304bec(0x1a7)+_0x304bec(0x205)+_0x304bec(0x19c)+_0x304bec(0x267)+_0x304bec(0x1e7)+_0x304bec(0x1d8)),warn(_0x304bec(0x2c7)+'created\x20fi'+_0x304bec(0x224)+_0x304bec(0x218)+'IQUE\x20as\x20fa'+_0x304bec(0x20e));}const _0x4b203e=await db['prepare']('INSERT\x20INT'+_0x304bec(0x1f6)+_0x304bec(0x17d)+_0x304bec(0x18d)+'id,\x20respon'+_0x304bec(0x250)+'dex,\x20creat'+_0x304bec(0x234)+'ated_at)\x20V'+_0x304bec(0x181)+'?,\x20?,\x200,\x20?'+',\x20?)');try{for(const _0x117218 of _0x385311){const _0x562fcf=JSON[_0x304bec(0x2e3)](ensureArray(_0x117218[_0x304bec(0x2eb)]||[]));try{await _0x4b203e['run'](_0x117218[_0x304bec(0x23a)],_0x117218[_0x304bec(0x175)],_0x562fcf,_0x117218[_0x304bec(0x20a)]||'',Number(_0x117218['created_at']||Math[_0x304bec(0x246)](Date[_0x304bec(0x1a5)]()/(-0x13a6+-0x5f+0x17ed))));}catch(_0x5cc32c){warn('[gfilter]\x20'+_0x304bec(0x1b2)+'insert\x20nor'+'malized\x20ro'+'w\x20'+_0x117218[_0x304bec(0x175)]+'@'+_0x117218[_0x304bec(0x23a)]+':\x20'+(_0x5cc32c?.[_0x304bec(0x2ed)]||_0x5cc32c));}}}finally{try{await _0x4b203e[_0x304bec(0x25a)]();}catch(_0x4a22b4){}}try{const _0xba29f9='filters_ba'+_0x304bec(0x1bb)+Math[_0x304bec(0x246)](Date['now']()/(0x125d+0x1eb*0xd+-0x2764));await db[_0x304bec(0x21e)]('ALTER\x20TABL'+_0x304bec(0x248)+_0x304bec(0x177)+_0xba29f9+';'),await db[_0x304bec(0x21e)]('ALTER\x20TABL'+_0x304bec(0x2ad)+_0x304bec(0x187)+_0x304bec(0x278)+'s;');try{await db[_0x304bec(0x21e)](_0x304bec(0x1d7)+_0x304bec(0x2b3)+_0x304bec(0x2bb)+'_filters_c'+'hat\x20ON\x20fil'+_0x304bec(0x228)+'jid);');}catch(_0x4c801a){warn(_0x304bec(0x2c7)+_0x304bec(0x220)+_0x304bec(0x172)+(_0x4c801a?.['message']||_0x4c801a));}try{await db[_0x304bec(0x21e)]('CREATE\x20UNI'+_0x304bec(0x2c0)+'IF\x20NOT\x20EXI'+_0x304bec(0x217)+'lters_uniq'+'ue\x20ON\x20filt'+_0x304bec(0x289)+'id,\x20trigge'+'r);');}catch(_0x2f7231){warn(_0x304bec(0x2c7)+_0x304bec(0x220)+_0x304bec(0x15a)+':\x20'+(_0x2f7231?.[_0x304bec(0x2ed)]||_0x2f7231));}info(_0x304bec(0x2c7)+_0x304bec(0x2d6)+_0x304bec(0x29b)+_0x304bec(0x2d1)+_0x304bec(0x253)+_0x304bec(0x1f9));}catch(_0x299167){warn(_0x304bec(0x2c7)+_0x304bec(0x184)+'s\x20failed:\x20'+(_0x299167?.[_0x304bec(0x2ed)]||_0x299167));throw _0x299167;}finally{await db[_0x304bec(0x21e)]('PRAGMA\x20for'+_0x304bec(0x285)+'=\x20ON;');}}catch(_0x3104f5){error(_0x3104f5,'[gfilter]\x20'+'ensureSche'+'ma\x20fatal');throw _0x3104f5;}}function normalizeResponseValue(_0x33b89e){const _0x4669bb=_0x353b01;if(_0x33b89e==null)return[];if(Array[_0x4669bb(0x1ce)](_0x33b89e))return uniqArray(_0x33b89e);if(typeof _0x33b89e===_0x4669bb(0x28e)){let _0x1cde19=_0x33b89e[_0x4669bb(0x225)](/\r/g,'');const _0xde498b=_0x1cde19[_0x4669bb(0x144)]();if(_0xde498b[_0x4669bb(0x2dd)]('['))try{const _0x231739=JSON[_0x4669bb(0x15d)](_0xde498b);if(Array[_0x4669bb(0x1ce)](_0x231739))return uniqArray(_0x231739[_0x4669bb(0x2d5)](_0x1600b5=>String(_0x1600b5||'')));}catch(_0x23380c){}_0x1cde19=_0x1cde19[_0x4669bb(0x225)](/^\s*\n+/,'')[_0x4669bb(0x225)](/\n+\s*$/,'');const _0x3660b7=_0x1cde19[_0x4669bb(0x272)]('\x0a'),_0x21effb=_0x3660b7[_0x4669bb(0x1a8)](_0x1fc109=>_0x1fc109[_0x4669bb(0x290)]()[_0x4669bb(0x2dd)]('!'));if(_0x21effb){const _0x1bad10=[];let _0x2dd3a4=null;for(const _0x3ee754 of _0x3660b7){if(_0x3ee754[_0x4669bb(0x290)]()[_0x4669bb(0x2dd)]('!')){const _0x345d2e=_0x3ee754[_0x4669bb(0x225)](/^\s*!/,''),_0x85f42c=_0x345d2e[_0x4669bb(0x225)](/\s+$/,'');_0x2dd3a4=_0x85f42c,_0x1bad10['push'](_0x2dd3a4);}else{const _0x3edfe8=_0x3ee754['replace'](/\s+$/,'');if(_0x2dd3a4===null)_0x2dd3a4=_0x3edfe8,_0x1bad10['push'](_0x2dd3a4);else{const _0x2dff50=_0x1bad10[_0x4669bb(0x22c)]-(0x1*0x367+-0xc7*0x25+0x195d);_0x1bad10[_0x2dff50]=_0x1bad10[_0x2dff50]+'\x0a'+_0x3edfe8,_0x2dd3a4=_0x1bad10[_0x2dff50];}}}return uniqArray(_0x1bad10[_0x4669bb(0x2d5)](_0x44165e=>String(_0x44165e||'')[_0x4669bb(0x144)]()));}else{const _0x27d463=_0x3660b7[_0x4669bb(0x2d5)](_0xc503cc=>_0xc503cc[_0x4669bb(0x225)](/\s+$/,''))[_0x4669bb(0x207)]('\x0a')[_0x4669bb(0x144)]();if(!_0x27d463)return[];return[_0x27d463];}}return[];}function _0x443d(){const _0x243e12=['\x20detected\x20','E\x20filters\x20','esponses\x20=','ite_master','CREATE\x20TAB','gger2\x20[gp:','@g.us','chat_id','INTEGER\x20PR','ses,\x20rr_in','ncrement\x20f','NFLICT(cha','\x20renamed\x20t','IMARY\x20KEY\x20','_jid\x20TEXT\x20','sendMessag','xcluded.cr','changes','uded.creat','finalize','default):\x0a','from\x20datab','chat_jid,\x20','d\x20for\x20conf','614546yrmabH','ly\x20include','hat_jid,\x20t','\x20rr_index,','SELECT\x20nam','fallback\x20b','room','nodes','EGER\x20DEFAU','16TlHOap','oUserJid','has','\x20\x20VALUES\x20(','LT\x20\x27\x27','\x20\x20\x20\x20\x20\x20);','gdelfilter','+\x201)\x20WHERE','RE\x20chat_ji','PRAGMA\x20for','split','a\x20line\x20`gp','ng\x20safe\x20mi','\x20to\x20ctx.ke','1xXYZwc','created\x20ne','\x20TO\x20filter','irmation','1,trigger2','keys','ue\x20ON\x20filt','toLowerCas','sendText\x20c','INSERT\x20INT','\x20\x20\x20\x20\x20\x20\x20\x20\x20r','T\x20NULL,\x0a\x20\x20','getUniqueJ','tries\x20from','o\x20restrict','eign_keys\x20','push','sock','getBotJid(','ers(chat_j','ored\x20regex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','s\x20table','as|jid|all','string','24sQutoO','trimStart','global\x20by\x20',':\x20gdelfilt','\x20\x20\x20\x20\x20trigg','Jid','SELECT\x20DIS','trigger2>\x0a','_by\x20=\x20excl','SELECT\x20res','bot-state\x20','jid);','completed;','for\x20','catch','RESPONSE_M','response1\x0a','resolveNam','t\x20error:\x20','210740VdPrqk','\x20filter\x20en','remoteJid','\x20for\x20chat\x20','cleaned\x20up','\x20WHERE\x20typ','DB)','search','20673duxFik','ilters\x20WHE','ttonId','E\x20filters_','test','t_jid,\x20tri','efault\x20val','deleteFilt','\x20to\x20','EX\x20IF\x20NOT\x20','heck\x20/setd','M\x20filters','name','ailed:\x20','7007297TNnJkv','ENT','next','EXISTS\x20idx','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','PRIMARY\x20KE','LT\x200,\x0a\x20\x20\x20\x20','argets','QUE\x20INDEX\x20','l>]\x0aOr:\x20gd','no\x20sendApi','Usage\x20(PM)','shift','945123irTwUS','r\x20for\x20','[gfilter]\x20','add','fail','filters','2.2.0','mentions','ceUpdate','filter','tingFilter','ur\x20default','\x20old\x20table','sendPresen','TYPING_SIM','M\x20filters\x20','map','migration\x20','\x20target\x20gr','\x200,\x0a\x20\x20\x20\x20\x20\x20','get','lters_uniq','tries\x20acro','conversati','startsWith','function','\x5cw*','\x22\x20->\x20','\x20empty;\x20fa','\x20filters:\x20','stringify','added\x20miss','idx\x20create','\x22\x20-\x20','PDATE\x20SET\x0a','\x20connectio','y\x20include\x20','>]\x0aOr:\x20gde','responses','ema)','message','Y\x20AUTOINCR','\x0a!response','AND\x20name=?','body','ection(s)\x20','match','d\x20=\x20?\x20ORDE','trim','imageMessa','\x20failed:\x20','concat','response','.\x20Please\x20c','O\x20filters\x20','wId','\x27[]\x27,\x0a\x20\x20\x20\x20','L\x20filters\x20','=\x20?\x20AND\x20tr','lfilter\x20al','seMessage','failed\x20for','selectedBu','ed_by,\x0a\x20\x20\x20','sponses\x20TE','lso\x20failed','fault\x20conn','ror:\x20','upsertFilt','invalid\x20st','unique\x20idx','output',')\x20returned','parse','\x20\x20\x20\x20\x20\x20chat','\x5c$&','4090cnsPPC','create',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','ponseMessa','max','FILTERS','10738912yQCTTm','s|all>','ss\x20your\x20de','singleSele','paused','w\x20filters\x20','composing','keyword','XT\x20NOT\x20NUL','isCommand','getTableCo','FAULT\x200','idx:\x20','integrated','trigger1,t','chat_jid','seAndAdvan','RENAME\x20TO\x20','glistfilte','\x20to\x20filter','splice','IF\x20NOT\x20EXI','build','new\x20(trigg','ce\x20error:\x20','\x20\x20\x20\x20\x20ON\x20CO','AhoCorasic','ALUES\x20(?,\x20','_filters_c',',\x0a\x20\x20','swap\x20table','!response2','error:\x20','new\x20RENAME','trig','\x20created_b','Unknown\x20gp','participan','ES\x20ALL\x20fil','er,\x20chat_j','\x22.\x20Use\x20gro','2\x0aOptional','\x20TEXT\x20DEFA','TINCT\x20trig','fromMe','y,\x20created','time','ers\x20failed','\x20trigger)\x0a','listTrigge','\x20\x20\x20\x20\x20\x20\x20\x20re','initialize','find','value','ted_at\x20INT','\x20\x20\x20\x20rr_ind','multiple\x20t','TEXT\x20NOT\x20N','values','Deleted\x20','includes','er\x20trigger','xtMessage','now','igger\x20=\x20?','ULT\x20\x27\x27,\x0a\x20\x20','some','ODE','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','adding\x20col','d\x20INTEGER\x20','\x20available','\x0a\x20gfilter\x20','clear','gration','Usage:\x20gde','could\x20not\x20','\x20\x20\x20\x20\x20','run','\x20\x20\x20\x20UNIQUE','er\x20failed\x20','r);','CREATE\x20UNI','or\x20your\x20de','oup(s).','ckup_','tries\x20to\x20y','replies','rr_index','phrase','triggers','\x20filter(s)','ters\x20from\x20','extendedTe','(trigger,\x20','(rr_index\x20','indings\x20er','ups\x20helper','er\x20TEXT\x20NO','text','onical\x20sch','n(s).\x20Use\x20','LE\x20IF\x20NOT\x20','\x20filters\x20f','isArray','all','readAndNor','key','alled\x20with','nexpected\x20','set','d\x20IN\x20(?,\x20?','g\x20globally','CREATE\x20IND','\x20);','caption','from','ex\x20INTEGER','ase.\x20Rows\x20','_jid\x20=\x20?\x20A',':\x20\x22','igger1,tri','slice','videoMessa','s\x20error:\x20','loaded\x20','chatid','lfilter\x20tr','legacy\x20fil','LT\x200\x0a\x20\x20\x20\x20\x20','index','are\x20send\x20a','Could\x20not\x20','author','Deleted\x20AL','\x20alias/jid','lumns\x20erro','ROM\x20filter','ids','ters\x20SET\x20r','=\x20OFF;','id,\x20trigge','_index\x20FRO','chat','O\x20filters_','removed:\x20','rr_index\x20i','o\x20backup','\x20DEFAULT\x200','on(s):\x20','object','sendText\x20u','creator','every','delete\x20all','ue(s).','findStored','n(s):\x20','EMENT,\x0a\x20\x20\x20','\x20\x20\x20\x20\x20\x20crea','Saved\x20','join','\x20to\x20add\x20al','\x20excluded.','created_by','eated_at;','normalizeT','gfilter','llback','ADD\x20COLUMN','hat\x20ON\x20fil','jid','rigger)\x0a\x20\x20','ger\x20FROM\x20f','regex:','up\x20admin):','fter\x20reply','STS\x20idx_fi','without\x20UN','_at)\x0a\x20\x20\x20\x20\x20','keywords','ters_new\x20(','\x20[gp:\x20<ali','\x20<group-ji','exec',',\x20?,\x20?)\x0a\x20\x20','post-swap\x20','12asezMe','lling\x20back','ND\x20trigger','lters_new\x20','replace','resolve\x20yo','\x20everythin','ters(chat_','EXISTS\x20fil','roundrobin','ctReply','length','l\x20(deletes','TEXT\x20DEFAU','listRespon','rom\x20','le_info(','DELETE\x20FRO','INTEGER\x20DE','ed_by,\x20cre','random','59213yTIEPY','<trigger1,','R\x20BY\x20trigg','L\x20DEFAULT\x20','trigger','lowerToOri','onForChat\x20','gdelf','deleted\x20','Failed\x20to\x20','MatchFromF','Usage\x20(gro','out\x20target','AUTOINCREM','\x20failure\x20a','SELECT\x20*\x20F','floor'];_0x443d=function(){return _0x243e12;};return _0x443d();}async function upsertFilterRow(_0x13f7aa,_0x28c931,_0x258f47,_0x5da9de){const _0x158ffc=_0x353b01;try{const _0x4e52cd=Math[_0x158ffc(0x246)](Date[_0x158ffc(0x1a5)]()/(0x1afe+-0x4*-0x999+-0x3d7a)),_0x15e41d=JSON[_0x158ffc(0x2e3)](uniqArray(ensureArray(_0x258f47)[_0x158ffc(0x2d5)](_0x397e53=>String(_0x397e53)[_0x158ffc(0x144)]())['filter'](Boolean)));await db[_0x158ffc(0x1b4)](_0x158ffc(0x27f)+_0x158ffc(0x14a)+_0x158ffc(0x1c4)+_0x158ffc(0x25d)+'responses,'+_0x158ffc(0x262)+_0x158ffc(0x189)+_0x158ffc(0x193)+_0x158ffc(0x219)+_0x158ffc(0x26b)+'?,\x20?,\x20?,\x200'+_0x158ffc(0x21f)+_0x158ffc(0x17f)+_0x158ffc(0x252)+_0x158ffc(0x2af)+'gger)\x20DO\x20U'+_0x158ffc(0x2e7)+_0x158ffc(0x280)+_0x158ffc(0x249)+_0x158ffc(0x209)+'responses,'+_0x158ffc(0x28b)+'rr_index\x20='+_0x158ffc(0x2d8)+'\x20\x20\x20created'+_0x158ffc(0x297)+_0x158ffc(0x259)+_0x158ffc(0x153)+_0x158ffc(0x205)+'ted_at\x20=\x20e'+_0x158ffc(0x257)+_0x158ffc(0x20b),[_0x28c931,_0x13f7aa,_0x15e41d,_0x5da9de||'',_0x4e52cd]);try{automatonCache[_0x158ffc(0x1af)]();}catch(_0x244f7c){}return info(_0x158ffc(0x2c7)+'saved\x20filt'+'er:\x20\x22'+_0x28c931+_0x158ffc(0x2e0)+_0x13f7aa),!![];}catch(_0x2cb419){return error(_0x2cb419,'[gfilter]\x20'+_0x158ffc(0x158)+_0x158ffc(0x1b6)+_0x158ffc(0x29c)+_0x28c931+'\x20@\x20'+_0x13f7aa),![];}}function _0x20b7(_0x597cb0,_0x42342c){const _0x22dd1b=_0x443d();return _0x20b7=function(_0x2c4c5e,_0x40918f){_0x2c4c5e=_0x2c4c5e-(-0x1d*0x142+0x167e+0xf3d);let _0x4ec198=_0x22dd1b[_0x2c4c5e];return _0x4ec198;},_0x20b7(_0x597cb0,_0x42342c);}async function deleteFilters(_0x57fbe1,_0x67024a){const _0x145be0=_0x353b01;if(!Array[_0x145be0(0x1ce)](_0x67024a)||_0x67024a['length']===-0x54c+0x4*0x421+-0x2ce*0x4)return-0x5*-0x420+0x161*-0xe+-0x2*0xa9;try{let _0x4023e8=-0xb7f+-0x3cb*-0x5+0x8*-0xef;for(const _0x29c1ed of _0x67024a){const _0x3e7321=await db[_0x145be0(0x1b4)](_0x145be0(0x232)+_0x145be0(0x2d4)+'WHERE\x20chat'+_0x145be0(0x1dd)+_0x145be0(0x223)+'\x20=\x20?',[_0x57fbe1,_0x29c1ed]);if(_0x3e7321?.[_0x145be0(0x258)])_0x4023e8+=_0x3e7321[_0x145be0(0x258)];info(_0x145be0(0x2c7)+_0x145be0(0x23e)+_0x29c1ed+'\x20@\x20'+_0x57fbe1);}try{automatonCache['clear']();}catch(_0x5a83b5){}return _0x4023e8;}catch(_0x505adf){return error(_0x505adf,'[gfilter]\x20'+_0x145be0(0x2b1)+_0x145be0(0x195)+'\x20for\x20'+_0x57fbe1),-0x238f+0xd4e*0x1+0x1641;}}async function listTriggersForChat(_0x595c96){const _0x2f04d2=_0x353b01;try{const _0x25682e=await db[_0x2f04d2(0x1cf)](_0x2f04d2(0x295)+'TINCT\x20trig'+_0x2f04d2(0x213)+_0x2f04d2(0x2ab)+'RE\x20chat_ji'+_0x2f04d2(0x143)+_0x2f04d2(0x238)+'er',[_0x595c96]);return(_0x25682e||[])[_0x2f04d2(0x2d5)](_0x561b90=>_0x561b90[_0x2f04d2(0x23a)]);}catch(_0x243379){return warn(_0x243379,_0x2f04d2(0x2c7)+_0x2f04d2(0x197)+'rsForChat\x20'+_0x2f04d2(0x151)+'\x20'+_0x595c96),[];}}async function pickResponseAndAdvance(_0x2235c6,_0x92e1d0,_0x34834e=_0x353b01(0x22a)){const _0x1b6b54=_0x353b01;try{const _0x455389=await db['get'](_0x1b6b54(0x298)+'ponses,\x20rr'+_0x1b6b54(0x1f4)+'M\x20filters\x20'+'WHERE\x20chat'+_0x1b6b54(0x1dd)+_0x1b6b54(0x223)+'\x20=\x20?\x20LIMIT'+'\x201',[_0x2235c6,_0x92e1d0]);if(!_0x455389)return null;let _0x21df32=[];try{_0x21df32=JSON[_0x1b6b54(0x15d)](_0x455389[_0x1b6b54(0x2eb)]||'[]');}catch{_0x21df32=ensureArray(_0x455389[_0x1b6b54(0x2eb)]);}_0x21df32=ensureArray(_0x21df32);if(!_0x21df32[_0x1b6b54(0x22c)])return null;if((_0x34834e||'')['toLowerCas'+'e']()===_0x1b6b54(0x235)){const _0x4aeed9=Math[_0x1b6b54(0x246)](Math[_0x1b6b54(0x235)]()*_0x21df32[_0x1b6b54(0x22c)]);return _0x21df32[_0x4aeed9];}const _0x1f362e=Number(_0x455389[_0x1b6b54(0x1be)]||-0x853*0x3+-0x1c3e+0x3537),_0x3a950a=_0x21df32[_0x1f362e%_0x21df32[_0x1b6b54(0x22c)]];try{await db[_0x1b6b54(0x1b4)]('UPDATE\x20fil'+_0x1b6b54(0x1f1)+'r_index\x20=\x20'+_0x1b6b54(0x1c5)+_0x1b6b54(0x26f)+'\x20chat_jid\x20'+_0x1b6b54(0x14e)+_0x1b6b54(0x1a6),[_0x2235c6,_0x92e1d0]);}catch(_0x40c94a){warn(_0x1b6b54(0x2c7)+_0x1b6b54(0x1f8)+_0x1b6b54(0x251)+_0x1b6b54(0x2b7)+(_0x40c94a?.[_0x1b6b54(0x2ed)]||_0x40c94a));}return _0x3a950a;}catch(_0x47dd65){return warn(_0x1b6b54(0x2c7)+'pickRespon'+_0x1b6b54(0x176)+_0x1b6b54(0x17e)+(_0x47dd65?.[_0x1b6b54(0x2ed)]||_0x47dd65)),null;}}function parseFilterCommandText(_0x165f65){const _0x447f79=_0x353b01;if(!_0x165f65)return null;const _0x1c8da2=_0x165f65[_0x447f79(0x272)](/\r?\n/)[_0x447f79(0x2d5)](_0x150a47=>_0x150a47[_0x447f79(0x225)](/\r/g,''));if(!_0x1c8da2[_0x447f79(0x22c)])return null;let _0x2466a8=(_0x1c8da2[0x7a4+0x567+-0xd0b]||'')[_0x447f79(0x144)](),_0x3622d3=_0x1c8da2[_0x447f79(0x1e0)](-0xf*-0x26+-0x19c*0xe+0x144f),_0x32ea70=null;const _0x315075=_0x2466a8[_0x447f79(0x142)](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x315075&&(_0x2466a8=(_0x315075[0x198f+0x5c8+-0x1f56]||'')['trim'](),_0x32ea70=(_0x315075[0xdc7+0xaad*-0x1+-0x318]||'')[_0x447f79(0x144)]());if(!_0x32ea70&&_0x3622d3&&_0x3622d3['length']){let _0x4d69dc=-(0x1ad7+-0x2f2+-0x17e4);for(let _0x372b77=_0x3622d3[_0x447f79(0x22c)]-(0x850+0x6d9*0x3+-0x99e*0x3);_0x372b77>=-0x1*-0x1c09+0x15*0x1d6+-0x4297;_0x372b77--){if(String(_0x3622d3[_0x372b77]||'')['trim']()[_0x447f79(0x22c)]>-0xb54+-0x14*-0x12d+-0xc30){_0x4d69dc=_0x372b77;break;}}if(_0x4d69dc>=0x11c2+-0x26a2+0x2*0xa70){const _0x1b2ab0=String(_0x3622d3[_0x4d69dc]||'')[_0x447f79(0x144)](),_0x30118d=_0x1b2ab0[_0x447f79(0x142)](/^gp[:\s]*([^\s,]+)\s*$/i);_0x30118d&&(_0x32ea70=(_0x30118d[-0x1*-0xaba+0x226a+-0x2d23]||'')[_0x447f79(0x144)](),_0x3622d3[_0x447f79(0x17a)](_0x4d69dc,-0x2c3*0xe+0x138f+-0x4*-0x4c7));}}let _0x42f251=_0x2466a8[_0x447f79(0x144)]()['split'](/\s+/)[_0x447f79(0x2ce)](Boolean);if(_0x42f251[_0x447f79(0x22c)]&&_0x42f251[-0xe6*-0x2+0x198d+-0x1b59][_0x447f79(0x27d)+'e']()===_0x447f79(0x20d))_0x42f251[_0x447f79(0x2c4)]();const _0x2e14c7=_0x42f251[_0x447f79(0x207)]('\x20')[_0x447f79(0x144)]();let _0xd72617=[];_0x2e14c7&&(_0x2e14c7[_0x447f79(0x1a2)](',')?_0xd72617=_0x2e14c7[_0x447f79(0x272)](',')['map'](_0x54ba8a=>_0x54ba8a['trim']())[_0x447f79(0x2ce)](Boolean):_0xd72617=_0x2e14c7[_0x447f79(0x272)](/\s+/)[_0x447f79(0x2d5)](_0x42994b=>_0x42994b['trim']())['filter'](Boolean));const _0x2af12f=_0x3622d3;if(!_0x2af12f[_0x447f79(0x22c)])return{'triggers':_0xd72617,'responses':[],'gp':_0x32ea70};const _0x267ae5=_0x2af12f[_0x447f79(0x207)]('\x0a'),_0x3589c9=normalizeResponseValue(_0x267ae5);return{'triggers':_0xd72617,'responses':_0x3589c9,'gp':_0x32ea70};}function getMessageText(_0x348827){const _0x18c989=_0x353b01;if(!_0x348827||!_0x348827[_0x18c989(0x2ed)])return'';const _0xa1073a=_0x348827[_0x18c989(0x2ed)];if(_0xa1073a[_0x18c989(0x2dc)+'on'])return _0xa1073a['conversati'+'on'];if(_0xa1073a['extendedTe'+'xtMessage']?.[_0x18c989(0x1c9)])return _0xa1073a[_0x18c989(0x1c3)+_0x18c989(0x1a4)][_0x18c989(0x1c9)];if(_0xa1073a['imageMessa'+'ge']?.[_0x18c989(0x1d9)])return _0xa1073a[_0x18c989(0x145)+'ge'][_0x18c989(0x1d9)];if(_0xa1073a['videoMessa'+'ge']?.[_0x18c989(0x1d9)])return _0xa1073a[_0x18c989(0x1e1)+'ge']['caption'];if(_0xa1073a['buttonsRes'+_0x18c989(0x163)+'ge']?.[_0x18c989(0x152)+'ttonId'])return _0xa1073a['buttonsRes'+_0x18c989(0x163)+'ge']['selectedBu'+_0x18c989(0x2ac)];if(_0xa1073a['listRespon'+_0x18c989(0x150)]?.[_0x18c989(0x169)+_0x18c989(0x22b)]?.['selectedRo'+_0x18c989(0x14b)])return _0xa1073a[_0x18c989(0x22f)+_0x18c989(0x150)][_0x18c989(0x169)+_0x18c989(0x22b)]['selectedRo'+_0x18c989(0x14b)];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(0x270d*-0x1+0x163b+0x21e*0x8)*(-0xfef+0x26cd+-0x1*0x12f6);function makeDedupeKey(_0x1c5bfa){const _0x4903b4=_0x353b01,_0x1fdae3=_0x1c5bfa?.[_0x4903b4(0x1d1)];if(!_0x1fdae3)return null;const _0x31016c=_0x1fdae3['id']||_0x1fdae3?.[_0x4903b4(0x18b)+'t']||'',_0x57331b=_0x1fdae3[_0x4903b4(0x2a4)]||'';return _0x57331b+'::'+_0x31016c;}function isMsgProcessed(_0x46355e){const _0x376542=_0x353b01;return _0x46355e&&processedMessageKeys[_0x376542(0x26a)](_0x46355e);}function markMsgProcessed(_0x1dcb77){const _0x33d9ad=_0x353b01;if(!_0x1dcb77)return;processedMessageKeys[_0x33d9ad(0x26a)](_0x1dcb77)&&clearTimeout(processedMessageKeys[_0x33d9ad(0x2d9)](_0x1dcb77));const _0x1c3460=setTimeout(()=>processedMessageKeys['delete'](_0x1dcb77),DEDUPE_TTL);processedMessageKeys[_0x33d9ad(0x1d4)](_0x1dcb77,_0x1c3460);}class Aho{constructor(){const _0x4fcfb8=_0x353b01;this[_0x4fcfb8(0x266)]=[{'next':Object[_0x4fcfb8(0x161)](null),'fail':0x0,'output':[]}];}[_0x353b01(0x17c)](_0x547d15){const _0x26de2e=_0x353b01;this[_0x26de2e(0x266)]=[{'next':Object['create'](null),'fail':0x0,'output':[]}];for(const _0xfc79b7 of _0x547d15){let _0x2f7741=-0x8f7+0x24c+0x239*0x3;for(let _0x358f83=-0xe33+0x1015+-0x1e2;_0x358f83<_0xfc79b7[_0x26de2e(0x22c)];_0x358f83++){const _0x357999=_0xfc79b7[_0x358f83];!this[_0x26de2e(0x266)][_0x2f7741]['next'][_0x357999]&&(this[_0x26de2e(0x266)][_0x2f7741]['next'][_0x357999]=this['nodes']['length'],this[_0x26de2e(0x266)][_0x26de2e(0x286)]({'next':Object[_0x26de2e(0x161)](null),'fail':0x0,'output':[]})),_0x2f7741=this[_0x26de2e(0x266)][_0x2f7741][_0x26de2e(0x2ba)][_0x357999];}this['nodes'][_0x2f7741][_0x26de2e(0x15b)][_0x26de2e(0x286)](_0xfc79b7);}const _0x4c3f31=[];for(const _0xaf62ae in this[_0x26de2e(0x266)][0x251b+-0x139*-0x10+0xa3*-0x59][_0x26de2e(0x2ba)]){const _0x5f087b=this[_0x26de2e(0x266)][0x65*-0x17+0x1671+-0xd5e][_0x26de2e(0x2ba)][_0xaf62ae];this[_0x26de2e(0x266)][_0x5f087b][_0x26de2e(0x2c9)]=-0x13*0xb5+-0x1035+0x21e*0xe,_0x4c3f31[_0x26de2e(0x286)](_0x5f087b);}while(_0x4c3f31[_0x26de2e(0x22c)]){const _0x7e9f4d=_0x4c3f31[_0x26de2e(0x2c4)]();for(const _0x217a73 in this[_0x26de2e(0x266)][_0x7e9f4d][_0x26de2e(0x2ba)]){const _0x1ba69d=this['nodes'][_0x7e9f4d]['next'][_0x217a73];let _0x35099f=this['nodes'][_0x7e9f4d][_0x26de2e(0x2c9)];while(_0x35099f&&!this[_0x26de2e(0x266)][_0x35099f]['next'][_0x217a73])_0x35099f=this[_0x26de2e(0x266)][_0x35099f][_0x26de2e(0x2c9)];if(this[_0x26de2e(0x266)][_0x35099f][_0x26de2e(0x2ba)][_0x217a73])this[_0x26de2e(0x266)][_0x1ba69d][_0x26de2e(0x2c9)]=this[_0x26de2e(0x266)][_0x35099f][_0x26de2e(0x2ba)][_0x217a73];else this[_0x26de2e(0x266)][_0x1ba69d]['fail']=0xa34*-0x1+0x42a+-0x2*-0x305;this[_0x26de2e(0x266)][_0x1ba69d][_0x26de2e(0x15b)]['push'](...this['nodes'][this['nodes'][_0x1ba69d][_0x26de2e(0x2c9)]][_0x26de2e(0x15b)]),_0x4c3f31[_0x26de2e(0x286)](_0x1ba69d);}}}[_0x353b01(0x2a9)](_0x5bd0ea){const _0x98147=_0x353b01,_0x226d77=[];let _0x28a700=0x7ce+-0x1d22+0x1554;for(let _0x5705d5=-0x6b*0x21+-0x2235+-0x600*-0x8;_0x5705d5<_0x5bd0ea['length'];_0x5705d5++){const _0x54b7e2=_0x5bd0ea[_0x5705d5];while(_0x28a700&&!this[_0x98147(0x266)][_0x28a700][_0x98147(0x2ba)][_0x54b7e2])_0x28a700=this['nodes'][_0x28a700][_0x98147(0x2c9)];if(this['nodes'][_0x28a700][_0x98147(0x2ba)][_0x54b7e2])_0x28a700=this[_0x98147(0x266)][_0x28a700][_0x98147(0x2ba)][_0x54b7e2];else _0x28a700=-0x1352+0x4c7*0x4+0x36;if(this[_0x98147(0x266)][_0x28a700]['output']['length'])for(const _0x504d20 of this[_0x98147(0x266)][_0x28a700][_0x98147(0x15b)]){_0x226d77['push']({'keyword':_0x504d20,'index':_0x5705d5-_0x504d20[_0x98147(0x22c)]+(-0x1dd5+0x1*-0x2467+-0x223*-0x1f)});}}return _0x226d77;}}const automatonCache=new Map();async function getAutomatonForChat(_0x5570db){const _0x38570b=_0x353b01;if(!_0x5570db)return null;if(automatonCache[_0x38570b(0x26a)](_0x5570db))return automatonCache[_0x38570b(0x2d9)](_0x5570db);try{const _0x498021=await db[_0x38570b(0x1cf)](_0x38570b(0x295)+_0x38570b(0x191)+_0x38570b(0x213)+_0x38570b(0x2ab)+'RE\x20chat_ji'+_0x38570b(0x1d5)+')',[_0x5570db,'*']),_0x553da7=(_0x498021||[])[_0x38570b(0x2d5)](_0x4ad808=>String(_0x4ad808[_0x38570b(0x23a)]||'')[_0x38570b(0x144)]())[_0x38570b(0x2ce)](Boolean),_0x3af70c=_0x553da7[_0x38570b(0x2ce)](_0x2a5b20=>{const _0x15156c=_0x38570b,_0x20a130=String(_0x2a5b20)['trim']()[_0x15156c(0x27d)+'e']();if(_0x20a130[_0x15156c(0x2dd)](_0x15156c(0x214)))return![];if(_0x2a5b20[_0x15156c(0x1a2)]('*'))return![];return!![];}),_0x2a0849=_0x3af70c[_0x38570b(0x2d5)](_0x580150=>_0x580150[_0x38570b(0x27d)+'e']()),_0x36692f=new Map();for(let _0x24be56=-0x25*-0x3d+-0x7*-0x1e4+-0x469*0x5;_0x24be56<_0x3af70c[_0x38570b(0x22c)];_0x24be56++){_0x36692f[_0x38570b(0x1d4)](_0x2a0849[_0x24be56],_0x3af70c[_0x24be56]);}const _0x3b57eb=new Aho();if(_0x2a0849[_0x38570b(0x22c)])_0x3b57eb['build'](_0x2a0849);const _0x26ba7f={'ac':_0x3b57eb,'keywords':_0x2a0849,'lowerToOrig':_0x36692f};return automatonCache[_0x38570b(0x1d4)](_0x5570db,_0x26ba7f),_0x26ba7f;}catch(_0x1ad29d){return warn(_0x38570b(0x2c7)+'getAutomat'+_0x38570b(0x23c)+_0x38570b(0x151)+'\x20'+_0x5570db+':\x20'+(_0x1ad29d?.['message']||_0x1ad29d)),null;}}async function findStoredMatchFromFindings(_0x55d7ef=[]){const _0x26cdbc=_0x353b01;try{const _0x21fe66=await listSudo();if(!Array['isArray'](_0x21fe66)||_0x21fe66[_0x26cdbc(0x22c)]===-0x16*0x125+-0xa7*-0x25+0x1*0x10b)return null;const _0x19c2ad=new Set(_0x21fe66['map'](String));for(const _0x40b126 of _0x55d7ef||[]){if(!_0x40b126||typeof _0x40b126[_0x26cdbc(0x211)]!==_0x26cdbc(0x28e))continue;const _0x1a088d=normalizeToJid(_0x40b126[_0x26cdbc(0x211)]);if(_0x1a088d&&_0x19c2ad[_0x26cdbc(0x26a)](_0x1a088d))return _0x1a088d;if(_0x19c2ad[_0x26cdbc(0x26a)](_0x40b126[_0x26cdbc(0x211)]))return _0x40b126[_0x26cdbc(0x211)];const _0x5586ea=String(_0x40b126['jid'])['split']('@')[-0x16d8+-0xb4a+0x2222*0x1][_0x26cdbc(0x272)](':')[-0x14af+0x193b+-0x48c];if(_0x5586ea)for(const _0x583425 of _0x21fe66){const _0x5c7d7e=String(_0x583425)['split']('@')[0x10b5+0x5*-0x36f+0x76];if(_0x5c7d7e&&_0x5c7d7e===_0x5586ea)return _0x583425;}}return null;}catch(_0x2f0914){return warn(_0x26cdbc(0x2c7)+_0x26cdbc(0x202)+_0x26cdbc(0x240)+_0x26cdbc(0x1c6)+_0x26cdbc(0x157)+(_0x2f0914?.[_0x26cdbc(0x2ed)]||_0x2f0914)),null;}}export async function initialize(_0x5aef58){const _0x2f3afa=_0x353b01;botRef=_0x5aef58;if(botRef){if(typeof botRef['sendMessag'+'e']===_0x2f3afa(0x2de))sendApi=async(_0x2cd5f7,_0x2975a7)=>await botRef['sendMessag'+'e'](_0x2cd5f7,_0x2975a7);else botRef[_0x2f3afa(0x287)]&&typeof botRef['sock'][_0x2f3afa(0x256)+'e']===_0x2f3afa(0x2de)?sendApi=async(_0x2be5ed,_0x3e6d35)=>await botRef['sock']['sendMessag'+'e'](_0x2be5ed,_0x3e6d35):sendApi=null;}try{await ensureSchema(),info('[gfilter]\x20'+'initialize'+'d\x20(sudo\x20+\x20'+_0x2f3afa(0x299)+_0x2f3afa(0x173)+')');}catch(_0x13d54c){error(_0x13d54c,_0x2f3afa(0x2c7)+_0x2f3afa(0x199)+'\x20fatal');throw _0x13d54c;}}function detectCommandNameFromCmdText(_0x3e19a2){const _0x533137=_0x353b01;if(!_0x3e19a2)return null;const _0x3ea6ad=_0x3e19a2[_0x533137(0x144)]();if(!_0x3ea6ad)return null;return _0x3ea6ad[_0x533137(0x272)](/\s+/)[0x1628+-0x6d1*0x5+0xbed][_0x533137(0x27d)+'e']();}export async function onMessage(_0x4b1b24){const _0x436fc3=_0x353b01;try{if(!_0x4b1b24||!_0x4b1b24[_0x436fc3(0x1d1)]||!_0x4b1b24['message'])return;const _0x29a0dc=makeDedupeKey(_0x4b1b24);if(!_0x29a0dc)return;if(isMsgProcessed(_0x29a0dc))return;markMsgProcessed(_0x29a0dc);const _0x25fe09=getMessageText(_0x4b1b24);if(!_0x25fe09)return;const _0x7a4630=_0x4b1b24[_0x436fc3(0x1d1)][_0x436fc3(0x2a4)],_0x5cebf2=typeof _0x7a4630===_0x436fc3(0x28e)&&_0x7a4630['endsWith'](_0x436fc3(0x24d)),_0x5cb835=_0x4b1b24[_0x436fc3(0x1d1)]&&(_0x4b1b24[_0x436fc3(0x1d1)][_0x436fc3(0x18b)+'t']||_0x4b1b24[_0x436fc3(0x1d1)][_0x436fc3(0x1da)]||_0x4b1b24[_0x436fc3(0x1d1)][_0x436fc3(0x2a4)])||'',_0x47e2a5=(_0x5cb835||'')[_0x436fc3(0x272)]('@')[-0x1048*0x1+0xb4*-0xb+0x1*0x1804];let _0x13c90e=![];if(_0x5cebf2)try{_0x13c90e=await isadmin(botRef,_0x4b1b24);}catch(_0x34cead){_0x13c90e=![];}if(_0x4b1b24[_0x436fc3(0x16f)]){const _0x653161=typeof _0x4b1b24['text']==='string'&&_0x4b1b24[_0x436fc3(0x1c9)][_0x436fc3(0x144)]()[_0x436fc3(0x22c)]?_0x4b1b24[_0x436fc3(0x1c9)][_0x436fc3(0x144)]():_0x25fe09[_0x436fc3(0x144)](),_0x3fc596=detectCommandNameFromCmdText(_0x653161);if(!_0x3fc596)return;if(!_0x3fc596[_0x436fc3(0x2dd)]('g'))return;if(!_0x5cebf2){const _0x5968bb=Boolean(_0x4b1b24[_0x436fc3(0x1d1)]['fromMe']);let _0x3fda96=null;if(_0x5968bb){const _0x20ea85=getBotJid();!_0x20ea85?(warn(_0x436fc3(0x2c7)+_0x436fc3(0x288)+_0x436fc3(0x15c)+_0x436fc3(0x2e1)+_0x436fc3(0x222)+_0x436fc3(0x275)+'y.remoteJi'+_0x436fc3(0x25e)+_0x436fc3(0x279)),_0x3fda96=_0x4b1b24['key'][_0x436fc3(0x2a4)]):_0x3fda96=_0x20ea85;}else{let _0x48712c=![];try{_0x48712c=await isSudo(botRef,_0x4b1b24);}catch(_0x31562d){_0x48712c=![];}if(!_0x48712c)return;const _0xad415=userJidFromCtx(_0x4b1b24)||{'findings':[]},_0x30be1f=await findStoredMatchFromFindings(_0xad415['findings']||[]);if(!_0x30be1f)return;_0x3fda96=_0x30be1f;}const _0x25a47f=parseFilterCommandText(_0x653161||_0x25fe09);if(_0x3fc596==='gfilter'){if(!_0x25a47f||!_0x25a47f[_0x436fc3(0x1c0)]['length']||!_0x25a47f[_0x436fc3(0x2eb)][_0x436fc3(0x22c)]){await sendText(_0x4b1b24,_0x3fda96,'Usage\x20(PM\x20'+_0x436fc3(0x291)+_0x436fc3(0x25b)+'\x20gfilter\x20<'+_0x436fc3(0x174)+'rigger2>\x0a!'+_0x436fc3(0x29f)+_0x436fc3(0x185)+'\x0aOptionall'+_0x436fc3(0x2e9)+_0x436fc3(0x273)+':\x20<alias|j'+'id|all>`\x20t'+_0x436fc3(0x284)+_0x436fc3(0x2d7)+_0x436fc3(0x1ba));return;}let _0x5d99e5=[];if(_0x25a47f['gp']){const _0x444331=_0x25a47f['gp'][_0x436fc3(0x144)]();if(_0x444331['toLowerCas'+'e']()==='all')_0x5d99e5=await _0x47c89e[_0x436fc3(0x282)+_0x436fc3(0x1f0)]();else{const _0x6c0320=await _0x47c89e[_0x436fc3(0x2a0)+'e'](_0x444331);if(_0x6c0320)_0x5d99e5=[_0x6c0320];else{if(_0x444331['includes']('@'))_0x5d99e5=[_0x47c89e[_0x436fc3(0x20c)+_0x436fc3(0x269)](_0x444331)];else{await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x18a)+_0x436fc3(0x1ed)+_0x436fc3(0x1de)+_0x444331+(_0x436fc3(0x18e)+_0x436fc3(0x1c7)+_0x436fc3(0x208)+'ias\x20or\x20pas'+'s\x20a\x20full\x20J'+'ID.'));return;}}}}else _0x5d99e5=['*'];let _0x525534=-0x6da+-0xeb3+0x3*0x72f;for(const _0x984724 of uniqArray(_0x5d99e5)){for(const _0x1c711c of _0x25a47f['triggers']){const _0x557ff7=await upsertFilterRow(_0x984724,_0x1c711c,_0x25a47f['responses'],_0x5cb835||'');if(_0x557ff7)_0x525534++;}}await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x206)+_0x525534+(_0x436fc3(0x1c1)+_0x436fc3(0x2b2))+(_0x5d99e5[_0x436fc3(0x22c)]===-0xe59+-0x2563+0xa59*0x5?_0x5d99e5[0x820+-0x665+-0x1bb]:_0x436fc3(0x19e)+'argets'));return;}if(_0x3fc596===_0x436fc3(0x178)+'r'){const _0x525d13=(parseFilterCommandText(_0x653161||_0x25fe09)||{})['gp'],_0x367dae=_0x525d13?_0x525d13[_0x436fc3(0x27d)+'e']()===_0x436fc3(0x1cf)?'*':await _0x47c89e['resolveNam'+'e'](_0x525d13)||_0x47c89e[_0x436fc3(0x20c)+'oUserJid'](_0x525d13):'*',_0x48df1e=await listTriggersForChat(_0x367dae);await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x2c7)+_0x48df1e[_0x436fc3(0x22c)]+(_0x436fc3(0x1cd)+'or\x20')+(_0x367dae==='*'?'GLOBAL\x20(al'+'l\x20groups)':_0x367dae));if(!_0x48df1e['length'])return;let _0x81f736='';for(const _0x1b5d5d of _0x48df1e){const _0x5aa9ba='â€¢\x20'+_0x1b5d5d+'\x0a';(_0x81f736+_0x5aa9ba)[_0x436fc3(0x22c)]>-0xda9+0x4*-0x76e+0x1*0x313d&&(await sendText(_0x4b1b24,_0x3fda96,_0x81f736[_0x436fc3(0x144)]()),_0x81f736=''),_0x81f736+=_0x5aa9ba;}if(_0x81f736[_0x436fc3(0x144)]())await sendText(_0x4b1b24,_0x3fda96,_0x81f736[_0x436fc3(0x144)]());return;}if(_0x3fc596===_0x436fc3(0x26e)||_0x3fc596===_0x436fc3(0x26e)+'s'||_0x3fc596==='gdelf'){const _0x4ac46c=(_0x25fe09||'')['split'](/\r?\n/)[_0x436fc3(0x2d5)](_0x25ed7e=>_0x25ed7e['trim']());let _0x28a61b=null;if(_0x4ac46c['length']>-0x4ca*-0x8+-0x2b*-0xb5+-0x44b6&&!_0x4ac46c[-0x26*-0x21+-0x1487+0xfa2]['toLowerCas'+'e']()[_0x436fc3(0x2dd)]('gp'))_0x28a61b=_0x4ac46c[0x1c15*0x1+0xd17+-0x292b];else{const _0x5db1df=_0x653161[_0x436fc3(0x144)]()[_0x436fc3(0x272)](/\s+/);_0x5db1df['shift'](),_0x28a61b=_0x5db1df[_0x436fc3(0x207)]('\x20')[_0x436fc3(0x144)]();}const _0x3ddd2e=_0x4ac46c[_0x436fc3(0x1e0)](-0xfdb+-0x1*-0x198e+-0x9b2)[_0x436fc3(0x19a)](_0x17ccc6=>/^gp[:\s]/i[_0x436fc3(0x2ae)](_0x17ccc6));let _0x254e3c=_0x3ddd2e?_0x3ddd2e[_0x436fc3(0x225)](/^gp[:\s]+/i,'')[_0x436fc3(0x144)]():null;const _0x217bc0=(_0x28a61b||'')[_0x436fc3(0x272)](',')['map'](_0x197b19=>_0x197b19['trim']())[_0x436fc3(0x2ce)](Boolean);if(!_0x217bc0[_0x436fc3(0x22c)]){await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x2c3)+_0x436fc3(0x292)+_0x436fc3(0x1a3)+_0x436fc3(0x27a)+_0x436fc3(0x21c)+_0x436fc3(0x28d)+_0x436fc3(0x2ea)+_0x436fc3(0x14f)+_0x436fc3(0x22d)+_0x436fc3(0x227)+_0x436fc3(0x1d6)+')');return;}if(_0x217bc0[_0x436fc3(0x22c)]===0x1b3d+0x2620+-0x415c*0x1&&_0x217bc0[0x7*0x209+-0x1*0x1a42+0xc03]['toLowerCas'+'e']()===_0x436fc3(0x1cf))try{const _0x204b0f=await db[_0x436fc3(0x1b4)]('DELETE\x20FRO'+'M\x20filters'),_0x5215e8=_0x204b0f?.[_0x436fc3(0x258)]||0x1*-0x283+-0x1cba+-0x1*-0x1f3d;try{automatonCache[_0x436fc3(0x1af)]();}catch(_0x36e2e9){}await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x1ec)+_0x436fc3(0x14d)+_0x436fc3(0x25c)+_0x436fc3(0x1dc)+_0x436fc3(0x1f7)+_0x5215e8);return;}catch(_0x5ed17d){await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x23f)+_0x436fc3(0x200)+_0x436fc3(0x2e2)+(_0x5ed17d?.['message']||_0x5ed17d));return;}let _0x162870=[];if(_0x254e3c){if(_0x254e3c[_0x436fc3(0x27d)+'e']()===_0x436fc3(0x1cf))_0x162870=await _0x47c89e['getUniqueJ'+'ids']();else{const _0x258cb7=await _0x47c89e[_0x436fc3(0x2a0)+'e'](_0x254e3c);if(_0x258cb7)_0x162870=[_0x258cb7];else{if(_0x254e3c[_0x436fc3(0x1a2)]('@'))_0x162870=[_0x47c89e['normalizeT'+_0x436fc3(0x269)](_0x254e3c)];else{await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x18a)+_0x436fc3(0x1ed)+_0x436fc3(0x1de)+_0x254e3c+'\x22.');return;}}}}else _0x162870=['*'];let _0x249065=-0x1*0xaaa+-0x3*0xf9+0xd95;for(const _0x3fa393 of uniqArray(_0x162870)){const _0x1054da=await deleteFilters(_0x3fa393,_0x217bc0);_0x249065+=_0x1054da;}await sendText(_0x4b1b24,_0x3fda96,_0x436fc3(0x1a1)+_0x249065+(_0x436fc3(0x2a3)+_0x436fc3(0x283)+'\x20')+(_0x162870['length']===-0xbaf+-0x7a7+0x1*0x1357?_0x162870[0xe9*-0x19+0x1*-0x73f+0x1e00]:_0x436fc3(0x19e)+'argets'));return;}return;}if(_0x5cebf2){if(!_0x13c90e)return;const _0x3cd94a=typeof _0x4b1b24[_0x436fc3(0x1c9)]===_0x436fc3(0x28e)&&_0x4b1b24[_0x436fc3(0x1c9)][_0x436fc3(0x144)]()[_0x436fc3(0x22c)]?_0x4b1b24[_0x436fc3(0x1c9)]['trim']():_0x25fe09[_0x436fc3(0x144)](),_0x406369=detectCommandNameFromCmdText(_0x3cd94a);if(!_0x406369)return;let _0x230f7e;try{_0x230f7e=await getDefault(_0x47e2a5)[_0x436fc3(0x29d)](()=>null);}catch(_0x123c6e){_0x230f7e=null;}if(!_0x230f7e||Array[_0x436fc3(0x1ce)](_0x230f7e)&&_0x230f7e[_0x436fc3(0x22c)]===-0x61d+0x1*0x2366+-0x1d49){await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x1ea)+_0x436fc3(0x226)+_0x436fc3(0x2d0)+_0x436fc3(0x2e8)+_0x436fc3(0x1cb)+'setdefault'+'\x20first.');return;}const _0x1c1b31=Array[_0x436fc3(0x1ce)](_0x230f7e)?_0x230f7e:[_0x230f7e];let _0x397497=[];for(const _0x518644 of _0x1c1b31){try{const _0x1284de=await getConnection(_0x518644)[_0x436fc3(0x29d)](()=>null);if(Array['isArray'](_0x1284de))_0x397497[_0x436fc3(0x286)](..._0x1284de);else{if(_0x1284de)_0x397497[_0x436fc3(0x286)](String(_0x1284de));}}catch(_0x57b546){}}_0x397497=uniqArray(_0x397497);if(!_0x397497[_0x436fc3(0x22c)]){await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x1ea)+'resolve\x20yo'+_0x436fc3(0x2d0)+'\x20connectio'+_0x436fc3(0x203)+_0x1c1b31[_0x436fc3(0x207)](',\x20')+(_0x436fc3(0x149)+_0x436fc3(0x2b4)+_0x436fc3(0x2b0)+_0x436fc3(0x201)));return;}if(_0x406369==='gfilter'){const _0x40318c=parseFilterCommandText(_0x3cd94a||_0x25fe09);if(!_0x40318c||!_0x40318c[_0x436fc3(0x1c0)][_0x436fc3(0x22c)]||!_0x40318c[_0x436fc3(0x2eb)][_0x436fc3(0x22c)]){await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x241)+_0x436fc3(0x215)+_0x436fc3(0x1ae)+_0x436fc3(0x237)+_0x436fc3(0x296)+'!response1'+_0x436fc3(0x2ef)+_0x436fc3(0x18f)+_0x436fc3(0x260)+'\x20gp:\x20<grou'+'p-jid|alia'+_0x436fc3(0x167));return;}if(_0x40318c['gp']){let _0x111913=[];const _0x2236bf=_0x40318c['gp'][_0x436fc3(0x144)]();if(_0x2236bf[_0x436fc3(0x27d)+'e']()===_0x436fc3(0x1cf))_0x111913=await _0x47c89e[_0x436fc3(0x282)+_0x436fc3(0x1f0)]();else{const _0x2ff144=await _0x47c89e['resolveNam'+'e'](_0x2236bf);if(_0x2ff144)_0x111913=[_0x2ff144];else{if(_0x2236bf[_0x436fc3(0x1a2)]('@'))_0x111913=[_0x47c89e[_0x436fc3(0x20c)+_0x436fc3(0x269)](_0x2236bf)];else{await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x18a)+_0x436fc3(0x1ed)+_0x436fc3(0x1de)+_0x2236bf+'\x22.');return;}}}let _0x775532=0x17b0+-0x1*0x157f+0x231*-0x1;for(const _0x22089a of uniqArray(_0x111913)){for(const _0x4c7c44 of _0x40318c[_0x436fc3(0x1c0)]){const _0x4c25b2=await upsertFilterRow(_0x22089a,_0x4c7c44,_0x40318c[_0x436fc3(0x2eb)],_0x5cb835||'');if(_0x4c25b2)_0x775532++;}}await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x206)+_0x775532+(_0x436fc3(0x1c1)+_0x436fc3(0x2b2))+(_0x111913[_0x436fc3(0x22c)]===0xe7+-0x20ea+-0x6*-0x556?_0x111913[0x1f88+0x200+-0x2188]:_0x436fc3(0x19e)+_0x436fc3(0x2bf)));return;}let _0x54e700=-0xa2c+0x2*0x8a5+-0x71e;for(const _0xad5fb0 of _0x397497){for(const _0x20f4ff of _0x40318c[_0x436fc3(0x1c0)]){const _0x355c70=await upsertFilterRow(_0xad5fb0,_0x20f4ff,_0x40318c[_0x436fc3(0x2eb)],_0x5cb835||'');if(_0x355c70)_0x54e700++;}}await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x206)+_0x54e700+(_0x436fc3(0x2a3)+_0x436fc3(0x1bc)+'our\x20defaul'+'t\x20connecti'+_0x436fc3(0x1fb))+_0x397497['join'](',\x20'));return;}if(_0x406369===_0x436fc3(0x178)+'r'){const _0x49f32b=new Set();for(const _0x22ae74 of _0x397497){const _0x124a2b=await listTriggersForChat(_0x22ae74);for(const _0x4b3a29 of _0x124a2b)_0x49f32b[_0x436fc3(0x2c8)](_0x4b3a29);}const _0x2e3350=await listTriggersForChat('*');for(const _0x2aa7ce of _0x2e3350||[])_0x49f32b[_0x436fc3(0x2c8)](_0x2aa7ce);const _0x321735=Array['from'](_0x49f32b)['sort']();await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x2c7)+_0x436fc3(0x1e3)+_0x321735[_0x436fc3(0x22c)]+(_0x436fc3(0x1cd)+_0x436fc3(0x1b9)+'fault\x20conn'+_0x436fc3(0x141)+'and\x20GLOBAL'));if(!_0x321735[_0x436fc3(0x22c)])return;let _0x25a367='';for(const _0x2ce8af of _0x321735){const _0x15180b='â€¢\x20'+_0x2ce8af+'\x0a';(_0x25a367+_0x15180b)[_0x436fc3(0x22c)]>0xd0f+-0x121*-0x13+-0x2*0xe53&&(await sendText(_0x4b1b24,_0x7a4630,_0x25a367[_0x436fc3(0x144)]()),_0x25a367=''),_0x25a367+=_0x15180b;}if(_0x25a367[_0x436fc3(0x144)]())await sendText(_0x4b1b24,_0x7a4630,_0x25a367[_0x436fc3(0x144)]());return;}if(_0x406369==='gdelfilter'||_0x406369===_0x436fc3(0x26e)+'s'||_0x406369===_0x436fc3(0x23d)){const _0xa38a5f=(_0x25fe09||'')[_0x436fc3(0x272)](/\r?\n/)[_0x436fc3(0x2d5)](_0x4afeac=>_0x4afeac['trim']());let _0x10964c=null;if(_0xa38a5f['length']>-0x1*0xfef+0xedb+0x115&&!_0xa38a5f[-0x2290+-0x3e5*0x3+0x2e40][_0x436fc3(0x27d)+'e']()[_0x436fc3(0x2dd)]('gp'))_0x10964c=_0xa38a5f[0x3*-0x27f+-0xf9a*0x1+0x5c6*0x4];else{const _0x3a8cd1=(_0x3cd94a||_0x25fe09)[_0x436fc3(0x144)]()['split'](/\s+/);_0x3a8cd1[_0x436fc3(0x2c4)](),_0x10964c=_0x3a8cd1[_0x436fc3(0x207)]('\x20')[_0x436fc3(0x144)]();}const _0x353e84=_0xa38a5f[_0x436fc3(0x1e0)](-0x1a45*-0x1+-0x13e2+-0x662)[_0x436fc3(0x19a)](_0x2bf872=>/^gp[:\s]/i[_0x436fc3(0x2ae)](_0x2bf872));let _0x549dee=_0x353e84?_0x353e84[_0x436fc3(0x225)](/^gp[:\s]+/i,'')[_0x436fc3(0x144)]():null;const _0x37d888=(_0x10964c||'')[_0x436fc3(0x272)](',')['map'](_0x4d0fa0=>_0x4d0fa0['trim']())[_0x436fc3(0x2ce)](Boolean);if(!_0x37d888[_0x436fc3(0x22c)]){await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x1b1)+_0x436fc3(0x1e5)+_0x436fc3(0x1df)+_0x436fc3(0x24c)+_0x436fc3(0x21d)+'d|alias|al'+_0x436fc3(0x2c1)+'elfilter\x20a'+'ll\x20\x20\x20(ERAS'+_0x436fc3(0x18c)+_0x436fc3(0x1c2)+_0x436fc3(0x2a8));return;}if(_0x37d888[_0x436fc3(0x22c)]===0x7*-0x377+0x2*-0x1066+0x390e*0x1&&_0x37d888[-0x2644+0x1*0x1ba9+0xa9b][_0x436fc3(0x27d)+'e']()===_0x436fc3(0x1cf))try{const _0x36d444=await db[_0x436fc3(0x1b4)](_0x436fc3(0x232)+_0x436fc3(0x2b5)),_0x5de301=_0x36d444?.[_0x436fc3(0x258)]||-0x2*-0x157+0x2*-0x23e+-0x1ce*-0x1;try{automatonCache[_0x436fc3(0x1af)]();}catch(_0x5254cd){}await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x1ec)+_0x436fc3(0x14d)+_0x436fc3(0x25c)+_0x436fc3(0x1dc)+_0x436fc3(0x1f7)+_0x5de301);return;}catch(_0x5c4481){await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x23f)+'delete\x20all'+_0x436fc3(0x2e2)+(_0x5c4481?.[_0x436fc3(0x2ed)]||_0x5c4481));return;}if(_0x549dee){let _0x2f6776=[];if(_0x549dee['toLowerCas'+'e']()===_0x436fc3(0x1cf))_0x2f6776=await _0x47c89e['getUniqueJ'+'ids']();else{const _0x1a5a4c=await _0x47c89e['resolveNam'+'e'](_0x549dee);if(_0x1a5a4c)_0x2f6776=[_0x1a5a4c];else{if(_0x549dee[_0x436fc3(0x1a2)]('@'))_0x2f6776=[_0x47c89e[_0x436fc3(0x20c)+_0x436fc3(0x269)](_0x549dee)];else{await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x18a)+_0x436fc3(0x1ed)+_0x436fc3(0x1de)+_0x549dee+'\x22.');return;}}}let _0x5bc1c8=0x1*0x2138+-0x2685+-0x1*-0x54d;for(const _0x1cd398 of uniqArray(_0x2f6776)){const _0x5c007a=await deleteFilters(_0x1cd398,_0x37d888);_0x5bc1c8+=_0x5c007a;}await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x1a1)+_0x5bc1c8+(_0x436fc3(0x1cd)+_0x436fc3(0x230))+(_0x2f6776['length']===-0x1016+0x1*0xa15+0x602?_0x2f6776[0x1b9c+-0x17*0x16d+0x52f]:_0x436fc3(0x19e)+'argets'));return;}else{let _0x2039f2=-0x13b*0x18+0x1d61+0x27*0x1;for(const _0x36bafb of _0x397497){const _0x34d2ef=await deleteFilters(_0x36bafb,_0x37d888);_0x2039f2+=_0x34d2ef;}await sendText(_0x4b1b24,_0x7a4630,_0x436fc3(0x1a1)+_0x2039f2+(_0x436fc3(0x2a3)+_0x436fc3(0x2db)+_0x436fc3(0x168)+_0x436fc3(0x156)+'ection(s):'+'\x20')+_0x397497[_0x436fc3(0x207)](',\x20'));return;}}return;}}if(_0x5cebf2){if(_0x4b1b24[_0x436fc3(0x1d1)][_0x436fc3(0x192)])return;const _0xd30eca=_0x7a4630,_0x79b79a=getMessageText(_0x4b1b24);if(!_0x79b79a)return;const _0x2f1013=String(_0x79b79a||''),_0x3ff43e=await db[_0x436fc3(0x1cf)]('SELECT\x20DIS'+_0x436fc3(0x191)+_0x436fc3(0x213)+_0x436fc3(0x2ab)+_0x436fc3(0x270)+_0x436fc3(0x1d5)+')',[_0xd30eca,'*']);if(!_0x3ff43e||_0x3ff43e[_0x436fc3(0x22c)]===0x8f*0xe+0xc6+-0x19*0x58)return;const _0x1c0238=(_0x3ff43e||[])['map'](_0x14cfc8=>String(_0x14cfc8[_0x436fc3(0x23a)]||'')[_0x436fc3(0x144)]())[_0x436fc3(0x2ce)](Boolean),_0x2a7d5b=[],_0x3f7c8d=[],_0x239f22=[];for(const _0x244987 of _0x1c0238){const _0x3c5ba2=String(_0x244987)['trim']()[_0x436fc3(0x27d)+'e']();if(_0x3c5ba2[_0x436fc3(0x2dd)]('regex:')){_0x239f22[_0x436fc3(0x286)](_0x244987['substring'](0x8*0x191+-0x1*0x7+0xd5*-0xf));continue;}if(_0x244987[_0x436fc3(0x1a2)]('*')){_0x3f7c8d[_0x436fc3(0x286)](_0x244987);continue;}_0x2a7d5b[_0x436fc3(0x286)](_0x244987);}const _0x5ccde0=new Set(),_0x3590f8=getConfig()||{},_0x1688b6=_0x3590f8['FILTERS']&&typeof _0x3590f8[_0x436fc3(0x165)]===_0x436fc3(0x1fc)?_0x3590f8['FILTERS']:{},_0x237497=(_0x1688b6[_0x436fc3(0x29e)+_0x436fc3(0x1a9)]||_0x436fc3(0x22a))[_0x436fc3(0x27d)+'e']();let _0x7904a4=null;if(_0x2a7d5b['length']>0x22b6+0x5*-0x445+-0xd5d)try{const _0xc63b6=await getAutomatonForChat(_0xd30eca);if(_0xc63b6&&_0xc63b6['ac']&&_0xc63b6[_0x436fc3(0x21a)]&&_0xc63b6[_0x436fc3(0x21a)][_0x436fc3(0x22c)]){const _0x39a2e0=_0x2f1013[_0x436fc3(0x27d)+'e'](),_0x551868=_0xc63b6['ac'][_0x436fc3(0x2a9)](_0x39a2e0);for(const _0x3264c5 of _0x551868){const _0x233cf5=_0x3264c5[_0x436fc3(0x16d)],_0x5bb67c=_0x3264c5[_0x436fc3(0x1e8)],_0x584383=_0x5bb67c+_0x233cf5[_0x436fc3(0x22c)],_0x4d56dd=_0x5bb67c===-0x2e*-0x13+-0xf42+0xbd8||!/\w/[_0x436fc3(0x2ae)](_0x39a2e0[_0x5bb67c-(0x751*-0x1+0x1956+-0x1204)]),_0xe6f51d=_0x584383===_0x39a2e0['length']||!/\w/[_0x436fc3(0x2ae)](_0x39a2e0[_0x584383]);if(_0x4d56dd&&_0xe6f51d){const _0x36a8a5=_0xc63b6[_0x436fc3(0x23b)+'g'][_0x436fc3(0x2d9)](_0x233cf5)||null;if(_0x36a8a5){_0x7904a4=_0x36a8a5;break;}}}}else for(const _0xcf1773 of _0x2a7d5b){const _0x2be62d=new RegExp('\x5cb'+escapeRegex(String(_0xcf1773))+'\x5cb','i');if(_0x2be62d[_0x436fc3(0x2ae)](_0x2f1013)){_0x7904a4=_0xcf1773;break;}}}catch(_0x1283df){warn('[gfilter]\x20'+_0x436fc3(0x180)+'k\x20matching'+_0x436fc3(0x146)+(_0x1283df?.[_0x436fc3(0x2ed)]||_0x1283df));for(const _0x2b3002 of _0x2a7d5b){try{const _0xa9379b=new RegExp('\x5cb'+escapeRegex(String(_0x2b3002))+'\x5cb','i');if(_0xa9379b[_0x436fc3(0x2ae)](_0x2f1013)){_0x7904a4=_0x2b3002;break;}}catch(_0xa3138f){}}}if(!_0x7904a4&&_0x3f7c8d[_0x436fc3(0x22c)]>0x246a+0x2516+-0x4980)for(const _0x328360 of _0x3f7c8d){try{const _0x2d5b64=new RegExp(wildcardToRegexPattern(_0x328360),'i');if(_0x2d5b64[_0x436fc3(0x2ae)](_0x2f1013)){_0x7904a4=_0x328360;break;}}catch(_0x3ad93){if(_0x2f1013[_0x436fc3(0x27d)+'e']()['includes'](_0x328360[_0x436fc3(0x225)](/\*/g,'')[_0x436fc3(0x27d)+'e']())){_0x7904a4=_0x328360;break;}}}if(!_0x7904a4&&_0x239f22[_0x436fc3(0x22c)]>-0x2*0x9a3+0x194a+-0x604)for(const _0x321afd of _0x239f22){try{const _0x2b579b=new RegExp(_0x321afd,'i');if(_0x2b579b['test'](_0x2f1013)){_0x7904a4=_0x436fc3(0x214)+_0x321afd;break;}}catch(_0x4be3c5){warn(_0x436fc3(0x2c7)+_0x436fc3(0x159)+_0x436fc3(0x28a)+_0x436fc3(0x2a5)+_0xd30eca+_0x436fc3(0x1de)+_0x321afd+_0x436fc3(0x2e6)+(_0x4be3c5?.['message']||_0x4be3c5));}}if(_0x7904a4){let _0x4ae792=await pickResponseAndAdvance(_0xd30eca,_0x7904a4,_0x237497);if(!_0x4ae792)_0x4ae792=await pickResponseAndAdvance('*',_0x7904a4,_0x237497);if(!_0x4ae792)return;if(_0x5ccde0['has'](_0x4ae792))return;await sendText(_0x4b1b24,_0xd30eca,_0x4ae792),_0x5ccde0[_0x436fc3(0x2c8)](_0x4ae792);}}}catch(_0x490df0){error(_0x490df0,_0x436fc3(0x2c7)+'Handler\x20er'+_0x436fc3(0x157)+(_0x490df0?.[_0x436fc3(0x2ed)]||_0x490df0));}}export async function cleanup(){const _0x11eaee=_0x353b01;for(const _0x2d6e05 of processedMessageKeys[_0x11eaee(0x1a0)]())try{clearTimeout(_0x2d6e05);}catch(_0x2889ae){}processedMessageKeys['clear'](),automatonCache['clear'](),botRef=null,sendApi=null,info('[gfilter]\x20'+_0x11eaee(0x2a6));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};