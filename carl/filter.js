const _0x1b9b42=_0x10c4;(function(_0xcba966,_0x5eca9c){const _0x53c8fa=_0x10c4,_0x566b23=_0xcba966();while(!![]){try{const _0x17ae7b=parseInt(_0x53c8fa(0x15c))/(0x1*-0x14e+0x1*-0x19ff+0x2*0xda7)*(-parseInt(_0x53c8fa(0x224))/(0x623*0x1+-0x1b98+-0x44b*-0x5))+parseInt(_0x53c8fa(0x23b))/(-0x2092*-0x1+0x1*0x1cf9+-0x3d88)+parseInt(_0x53c8fa(0x1b5))/(0x1195+-0x1012*0x1+0x1*-0x17f)+-parseInt(_0x53c8fa(0x24c))/(0x190b*-0x1+0xdb4+-0x4*-0x2d7)*(parseInt(_0x53c8fa(0x1a1))/(0x13*-0x1a3+0x1*0x180f+0x710))+-parseInt(_0x53c8fa(0x26c))/(0x44b+0x1*-0x1cc9+0x1885)+-parseInt(_0x53c8fa(0x202))/(0x19c+-0x2f*0x3+-0x107)*(parseInt(_0x53c8fa(0x20e))/(0x16bb+-0x2*-0x86f+-0x1*0x2790))+parseInt(_0x53c8fa(0x2bb))/(0x1*0x1a05+-0x1c80+-0x2b*-0xf)*(parseInt(_0x53c8fa(0x273))/(0x47*-0x5d+-0x13bb+0x2d91*0x1));if(_0x17ae7b===_0x5eca9c)break;else _0x566b23['push'](_0x566b23['shift']());}catch(_0x385442){_0x566b23['push'](_0x566b23['shift']());}}}(_0x2a74,0x5a2e4*0x1+-0x28f0*-0x1e+-0x1*0x78b6b));import{getConfig}from'../utils/config.js';import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x3f4843 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x1b9b42(0x1af);export const version=_0x1b9b42(0x297);export const priority=-0x1*0x22cb+0x19b1+0x31*0x32;export const configKeys=[_0x1b9b42(0x2ab)];export const commands=['gfilter',_0x1b9b42(0x2a7)+'r',_0x1b9b42(0x241),_0x1b9b42(0x241)+'s','gdelf'];function clampTypingMs(_0x288609){const _0x52383e=_0x1b9b42,_0x163f13=Number(_0x288609);if(!Number[_0x52383e(0x23f)](_0x163f13)||isNaN(_0x163f13))return 0x1537+-0x449+-0x18a*0xb;if(_0x163f13<=-0x1f2e+-0x213e+0x406c)return 0x72b+-0x1*0x159b+0xe70;if(_0x163f13>0x2cce+0x22f7+0x27*-0x8b)return 0x1*-0x2791+-0x1f12*-0x2+0x2405;return Math[_0x52383e(0x128)](_0x163f13);}function sleep(_0x193efe){return new Promise(_0x3361e5=>setTimeout(_0x3361e5,_0x193efe));}async function simulateTypingAndWait(_0x2b482c,_0x1f43b0,_0x32be4e){const _0x108dd3=_0x1b9b42;if(!_0x32be4e||_0x32be4e<=0x1615+-0x18bd+-0x4*-0xaa)return;try{if(_0x2b482c&&typeof _0x2b482c['sendPresen'+_0x108dd3(0x138)]===_0x108dd3(0x1f7))try{await _0x2b482c[_0x108dd3(0x25b)+_0x108dd3(0x138)](_0x108dd3(0x26e),_0x1f43b0);}catch(_0x1918b0){}}catch(_0x3cfcc5){}try{await sleep(_0x32be4e);}catch(_0x3854ef){}try{if(_0x2b482c&&typeof _0x2b482c[_0x108dd3(0x25b)+_0x108dd3(0x138)]===_0x108dd3(0x1f7))try{await _0x2b482c[_0x108dd3(0x25b)+'ceUpdate']('paused',_0x1f43b0);}catch(_0x102401){}}catch(_0xd55cbc){}}function ensureArray(_0x3bcc45){if(!_0x3bcc45)return[];if(Array['isArray'](_0x3bcc45))return _0x3bcc45;return[String(_0x3bcc45)];}function uniqArray(_0x3f5629){const _0x20922f=_0x1b9b42,_0x3e9738=new Set(),_0xd0c459=[];for(const _0x3673cf of _0x3f5629){const _0x2eda7e=String(_0x3673cf||'')[_0x20922f(0x1be)]();if(!_0x2eda7e)continue;!_0x3e9738['has'](_0x2eda7e)&&(_0x3e9738[_0x20922f(0x240)](_0x2eda7e),_0xd0c459[_0x20922f(0x130)](_0x2eda7e));}return _0xd0c459;}function escapeRegex(_0x1d9a88){const _0x2bf81d=_0x1b9b42;return _0x1d9a88[_0x2bf81d(0x291)](/[.*+?^${}()|[\]\\]/g,_0x2bf81d(0x2be));}function wildcardToRegexPattern(_0x2808ca){const _0x2141e7=_0x1b9b42,_0x6fa7ff=_0x2808ca[_0x2141e7(0x1eb)]('*')[_0x2141e7(0x2e1)](_0x3caa4f=>escapeRegex(_0x3caa4f));return'\x5cb'+_0x6fa7ff[_0x2141e7(0x150)](_0x2141e7(0x1c5))+'\x5cb';}function clampConfigTypingMs(){const _0x7f9041=_0x1b9b42;try{const _0x4df09a=getConfig()||{},_0x278cf0=_0x4df09a[_0x7f9041(0x2ab)]&&typeof _0x4df09a[_0x7f9041(0x2ab)]==='object'?_0x4df09a[_0x7f9041(0x2ab)]:{};return clampTypingMs(_0x278cf0[_0x7f9041(0x280)+_0x7f9041(0x190)]);}catch(_0x118dc5){return 0x1b3c+-0x467*-0x5+0x313f*-0x1;}}let botRef=null,sendApi=null;async function sendText(_0x489699,_0x1fd01d,_0x52224a,_0x49c0b0){const _0x1517b2=_0x1b9b42;let _0x152796=null,_0x95404a=null,_0xdb37d0=null,_0x168362=[];_0x489699&&typeof _0x489699===_0x1517b2(0x2c6)&&_0x489699[_0x1517b2(0x2aa)]&&_0x489699[_0x1517b2(0x1ae)]?(_0x152796=_0x489699,_0x95404a=_0x1fd01d,_0xdb37d0=_0x52224a,_0x168362=Array[_0x1517b2(0x20d)](_0x49c0b0)?_0x49c0b0:[]):(_0x95404a=_0x489699,_0xdb37d0=_0x1fd01d,_0x168362=Array[_0x1517b2(0x20d)](_0x52224a)?_0x52224a:[]);if(!_0xdb37d0)return;if(!_0x95404a){warn(_0x1517b2(0x246)+_0x1517b2(0x2cb)+'alled\x20with'+_0x1517b2(0x1bb)+_0x1517b2(0x228));return;}const _0x38eedd={'text':String(_0xdb37d0)};if(Array[_0x1517b2(0x20d)](_0x168362)&&_0x168362[_0x1517b2(0x20a)])_0x38eedd[_0x1517b2(0x26b)]=_0x168362;try{if(!sendApi){warn(_0x1517b2(0x246)+'no\x20sendApi'+_0x1517b2(0x213));return;}const _0x33099f=clampConfigTypingMs();if(_0x33099f>0x4ae+0xc92+-0x2e0*0x6)try{await simulateTypingAndWait(botRef?.[_0x1517b2(0x21d)],_0x95404a,_0x33099f);}catch(_0x3cd29c){warn(_0x1517b2(0x246)+_0x1517b2(0x28d)+_0x1517b2(0x2ac)+'t\x20error:\x20'+(_0x3cd29c?.[_0x1517b2(0x1ae)]||_0x3cd29c));}if(_0x152796&&typeof _0x152796[_0x1517b2(0x1cc)]===_0x1517b2(0x1f7))try{await _0x152796[_0x1517b2(0x1cc)]({'text':String(_0xdb37d0),'mentions':_0x38eedd[_0x1517b2(0x26b)]||[]});return;}catch(_0xe478dd){try{await sendApi(_0x95404a,_0x38eedd);return;}catch(_0x52edfc){warn(_0x1517b2(0x246)+_0x1517b2(0x268)+_0x1517b2(0x290)+_0x1517b2(0x1a9)+_0x1517b2(0x13f)+'lso\x20failed'+':\x20'+(_0x52edfc?.['message']||_0x52edfc));return;}}try{await sendApi(_0x95404a,_0x38eedd);}catch(_0x5af99e){warn(_0x1517b2(0x246)+_0x1517b2(0x1ac)+_0x1517b2(0x232)+_0x95404a+':\x20'+(_0x5af99e?.['message']||_0x5af99e));}}catch(_0x3a7408){warn(_0x1517b2(0x246)+_0x1517b2(0x135)+'nexpected\x20'+'error:\x20'+(_0x3a7408?.[_0x1517b2(0x1ae)]||_0x3a7408));}}async function tableExists(_0x114d3e){const _0x4334c1=_0x1b9b42;try{const _0x5cd899=await db[_0x4334c1(0x24d)]('SELECT\x20nam'+_0x4334c1(0x156)+_0x4334c1(0x158)+_0x4334c1(0x1ee)+_0x4334c1(0x242)+_0x4334c1(0x1ec),[_0x114d3e]);return!!_0x5cd899;}catch(_0x23c4c7){return warn(_0x4334c1(0x246)+_0x4334c1(0x2b6)+_0x4334c1(0x21c)+(_0x23c4c7?.['message']||_0x23c4c7)),![];}}async function getTableColumns(_0x413a24){const _0x4c453e=_0x1b9b42;try{const _0x3ffb25=await db[_0x4c453e(0x295)](_0x4c453e(0x286)+_0x4c453e(0x256)+_0x413a24+')');return(_0x3ffb25||[])[_0x4c453e(0x2e1)](_0x49188f=>_0x49188f[_0x4c453e(0x194)]);}catch(_0x3ce9e3){return warn('[gfilter]\x20'+_0x4c453e(0x197)+_0x4c453e(0x164)+_0x4c453e(0x279)+_0x413a24+':\x20'+(_0x3ce9e3?.[_0x4c453e(0x1ae)]||_0x3ce9e3)),[];}}function resolveChatJidFromRow(_0x2fd1cd){const _0x4f49a0=_0x1b9b42,_0x2c9bb5=[_0x4f49a0(0x2b0),_0x4f49a0(0x1c3),_0x4f49a0(0x1fb),'jid',_0x4f49a0(0x21f),_0x4f49a0(0x2c5)];for(const _0x912c1a of _0x2c9bb5)if(_0x912c1a in _0x2fd1cd&&_0x2fd1cd[_0x912c1a])return String(_0x2fd1cd[_0x912c1a]);for(const _0xd89271 of Object['keys'](_0x2fd1cd)){const _0x4d2b89=_0x2fd1cd[_0xd89271];if(typeof _0x4d2b89==='string'&&_0x4d2b89['includes']('@'))return _0x4d2b89;}return null;}function _0x2a74(){const _0x745343=['\x0a\x20gfilter\x20','d\x20INTEGER\x20','ponses,\x20rr','sponses\x20TE','function','\x0aOptionall','oup(s).','some','chat_id',',\x20?,\x20?)\x0a\x20\x20','ckup_','listTrigge','RE\x20chat_ji','Usage\x20(gro','ection(s):','185464lsYtue','ses,\x20rr_in','er:\x20\x22','idx\x20create','pickRespon','Deleted\x20','y.remoteJi','WHERE\x20chat','length','\x20to\x20filter','T\x20\x27[]\x27','isArray','63nLjoET','ters_new\x20(','PDATE\x20SET\x0a','\x20TEXT\x20DEFA','created\x20fi','\x20available','\x20to\x20','rr_index\x20i','ted_at\x20=\x20e','igger\x20=\x20?','a\x20line\x20`gp','er\x20failed\x20','as|jid|all','initialize','s\x20error:\x20','sock','post-swap\x20','chat','slice','argets','ror:\x20','XT\x20NOT\x20NUL','10Txrwnx','shift','ALUES\x20(?,\x20','L\x20DEFAULT\x20','Jid','R\x20BY\x20trigg','ection(s)\x20','tries\x20acro',':\x20<alias|j','EGER\x20DEFAU','fault\x20conn','\x20failed:\x20','lling\x20back','o\x20restrict','ailed\x20to\x20','endsWith','eign_keys\x20','\x22\x20->\x20','?,\x20?,\x20?,\x200','INTEGER\x20PR','lters_uniq','value','EXISTS\x20fil','782649buDJTi','ters\x20SET\x20r','\x20empty;\x20fa','ailed:\x20','isFinite','add','gdelfilter','e=\x27table\x27\x20','\x20for\x20','s|all>','id|all>`\x20t','[gfilter]\x20','tries\x20from',',\x0a\x20\x20','CREATE\x20UNI',',\x20?)','Failed\x20to\x20','123145caPwkZ','get','isCommand','remoteJid','buttonsRes','LT\x20\x27\x27','global\x20by\x20','CREATE\x20IND','IMARY\x20KEY\x20','splice','le_info(','\x20\x20UNIQUE(c','created_by','match','_index\x20FRO','sendPresen','TEXT\x20DEFAU','gger)\x20DO\x20U','ULT\x20\x27\x27,\x0a\x20\x20','_by\x20=\x20excl','>]\x0aOr:\x20gde','LT\x200,\x0a\x20\x20\x20\x20','rom\x20','ttonId','\x20filters:\x20','REATE\x20TABL','_filters_c','listRespon','fallback\x20b','=\x20ON;','adding\x20col','mentions','479696KBzikl','set','composing','deleteFilt','FAULT\x200','index','_jid\x20TEXT\x20','374edoERR','includes','nodes','\x20excluded.','\x20target\x20gr','PRIMARY\x20KE','r\x20for\x20','\x20for\x20chat\x20','d\x20=\x20?\x20ORDE','CREATE\x20TAB','1,trigger2','ger\x20FROM\x20f','t\x20connecti','TYPING_SIM','INTEGER\x20DE','L\x20filters\x20','INSERT\x20INT','T\x20NULL,\x0a\x20\x20','trigger','PRAGMA\x20tab','umn\x20','regex:','SELECT\x20DIS','\x20\x20\x20\x20\x20\x20\x20\x20\x20r','E\x20filters\x20','QUE\x20INDEX\x20','simulateTy','TINCT\x20trig','substring','are\x20send\x20a','replace','\x20old\x20table','gger2\x20[gp:','timestamp','all','elfilter\x20a','2.2.0','seMessage','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','triggers','\x20filter(s)','O\x20filters_','ed_by,\x20cre','completed;','\x0a\x20\x20\x20\x20\x20\x20\x20\x20i','\x20created_b','IQUE\x20as\x20fa','resolve\x20yo','d\x20for\x20conf','keyword','p-jid|alia','jid','glistfilte','er,\x20chat_j','startsWith','key','FILTERS','pingAndWai','ensureSche','E\x20filters_','(trigger,\x20','chat_jid','max','output','?,\x20?,\x200,\x20?','added\x20miss','GLOBAL\x20(al','tableExist','d|alias|al','ES\x20ALL\x20fil','jid);','cleaned\x20up','125890SFYLVF','LT\x200\x0a\x20\x20\x20\x20\x20','multiple\x20t','\x5c$&','y,\x20created','\x22\x20-\x20','rr_index','\x20TO\x20filter','DB)','exec','room','object','d\x20IN\x20(?,\x20?','build','Deleted\x20AL','without\x20UN','sendText\x20c','table\x20(can','setdefault','ing\x20column','SELECT\x20res','MatchFromF','xtMessage','-\x20performi','getUniqueJ','!response1','filter','\x20\x20\x20\x20\x20\x20crea','DELETE\x20FRO','ROM\x20filter','body','filters','\x20=\x20?\x20LIMIT','\x20\x20\x20\x20\x20\x20\x20\x20re','EMENT,\x0a\x20\x20\x20','\x20filters\x20f','ters(chat_','ctReply','map','and\x20GLOBAL','\x20\x20VALUES\x20(','floor','created_at','unique\x20idx','create','ored\x20regex','ur\x20default','run','ilters\x20WHE','push','er\x20TEXT\x20NO','_at)\x0a\x20\x20\x20\x20\x20','keys','heck\x20/setd','sendText\x20u','author','\x0a!response','ceUpdate','onical\x20sch','ted_at\x20INT','hat_jid,\x20t','text','failed\x20for','\x20\x20\x20\x20UNIQUE','\x20failure\x20a','ponseMessa','(chat_jid,','selectedBu','EXISTS\x20idx','getBotJid(','eated_at;','created\x20ne','prepare','\x20DEFAULT\x200','LE\x20IF\x20NOT\x20','\x200,\x0a\x20\x20\x20\x20\x20\x20','_jid\x20=\x20?\x20A','default):\x0a','Handler\x20er','finalize','ers(chat_j','join','resolveNam','new\x20RENAME','s\x20failed:\x20','gdelf','ALTER\x20TABL','e\x20FROM\x20sql','toLowerCas','ite_master','response','getAutomat','=\x20?\x20AND\x20tr','68531rEtysb','fail','+\x201)\x20WHERE','(\x0a\x20\x20\x20\x20\x20\x20\x20\x20','removed:\x20','\x20renamed\x20t','wId','responses','lumns\x20erro','\x20trigger)\x0a','EX\x20IF\x20NOT\x20','\x20connectio','extendedTe','\x22.\x20Use\x20gro','from\x20datab','ters\x20from\x20','ue\x20ON\x20filt','findStored','RESPONSE_M','trigger1,t','trigger2>\x0a','\x20\x20\x20\x20\x20ON\x20CO','Usage\x20(PM\x20','Usage:\x20gde','invalid\x20st','RENAME\x20TO\x20','random','caption','from','ema)','!response2','entries','ex\x20INTEGER','\x20\x20\x20\x20\x20trigg','\x20\x20\x20\x20rr_ind','\x20<group-ji','ed_by,\x0a\x20\x20\x20','test',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','igger1,tri','tries\x20to\x20y','esponses\x20=','participan','UPDATE\x20fil','bot-state\x20','parse','ups\x20helper','sendMessag','now',':\x20\x22','\x20\x20\x20created','r);','_MS','every','ND\x20trigger','keywords','name','idx:\x20','values','getTableCo','next','fromMe','\x20\x20\x20\x20\x20\x20);','\x20);','imageMessa','onForChat\x20','\x20\x20\x20\x20\x20','\x20to\x20add\x20al','ll\x20\x20\x20(ERAS','30jKBBSy','could\x20not\x20','ss\x20your\x20de','ated_at)\x20V','catch','\x20@\x20','rsForChat\x20','phrase','fter\x20reply','clear','l>]\x0aOr:\x20gd','sendText\x20f','\x20filter\x20en','message','gfilter','search','string','\x20to\x20ctx.ke','\x20first.','findings','788148qQFTTY','r_index\x20=\x20','response1\x0a','M\x20filters','n(s).\x20Use\x20','rigger)\x0a\x20\x20','out\x20target','\x27[]\x27,\x0a\x20\x20\x20\x20','upsertFilt','trim','\x20=\x20?','SELECT\x20*\x20F',':\x20gdelfilt','chat_jid,\x20','chatid',')\x20returned','\x5cw*','find','changes','deleted\x20','saved\x20filt','rr_index\x20=','seAndAdvan','reply','ce\x20error:\x20','Unknown\x20gp','id,\x20trigge','id,\x20respon','conversati','loaded\x20','ids','STS\x20idx_fi','Saved\x20','singleSele','w\x20filters\x20','M\x20filters\x20','delete\x20all','insert\x20nor','ers\x20failed','has','hat\x20ON\x20fil','TEXT\x20NOT\x20N','NFLICT(cha','IF\x20NOT\x20EXI','stringify','new\x20(trigg','oUserJid','videoMessa','\x20alias/jid','AhoCorasic','replies','d\x20(sudo\x20+\x20','l\x20(deletes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','split','AND\x20name=?','readAndNor','\x20WHERE\x20typ','our\x20defaul','\x20detected\x20','selectedRo','normalizeT'];_0x2a74=function(){return _0x745343;};return _0x2a74();}function resolveTriggerFromRow(_0x475029){const _0x4e1b7f=_0x1b9b42,_0x11b880=[_0x4e1b7f(0x285),'trig','keyword','word',_0x4e1b7f(0x1a8)];for(const _0x3caa58 of _0x11b880)if(_0x3caa58 in _0x475029&&_0x475029[_0x3caa58])return String(_0x475029[_0x3caa58]);for(const _0x41f273 of Object[_0x4e1b7f(0x133)](_0x475029)){const _0xb63625=_0x475029[_0x41f273];if(typeof _0xb63625===_0x4e1b7f(0x1b1)&&!_0xb63625[_0x4e1b7f(0x274)]('@')&&_0xb63625['length']<0x75f*-0x5+0x23bf+0x248*0x1)return _0xb63625;}return null;}function resolveResponsesFromRow(_0x2fb6bf){const _0x38d713=_0x1b9b42,_0x5a1cb7=[_0x38d713(0x163),_0x38d713(0x159),'reply',_0x38d713(0x1e7),_0x38d713(0x2d9),_0x38d713(0x239),_0x38d713(0x1ae)];for(const _0x3f95e3 of _0x5a1cb7)if(_0x3f95e3 in _0x2fb6bf&&_0x2fb6bf[_0x3f95e3]!=null)return _0x2fb6bf[_0x3f95e3];for(const _0x3bd275 of Object[_0x38d713(0x133)](_0x2fb6bf)){const _0x49e172=_0x2fb6bf[_0x3bd275];if(typeof _0x49e172===_0x38d713(0x1b1)&&(_0x49e172['trim']()[_0x38d713(0x2a9)]('!')||_0x49e172['trim']()[_0x38d713(0x274)]('\x0a')||_0x49e172[_0x38d713(0x1be)]()['startsWith']('[')))return _0x49e172;}return null;}async function readAndNormalizeExistingFilters(){const _0x1cf04f=_0x1b9b42;try{const _0xeaf1d5=await db[_0x1cf04f(0x295)](_0x1cf04f(0x1c0)+_0x1cf04f(0x2d8)+'s'),_0x1c9186=new Map();for(const _0x2adfa4 of _0xeaf1d5||[]){const _0x547efc=resolveTriggerFromRow(_0x2adfa4)||'',_0x453f9f=resolveChatJidFromRow(_0x2adfa4)||'';if(!_0x547efc||!_0x453f9f)continue;const _0x5b10c3=resolveResponsesFromRow(_0x2adfa4),_0x1a9eb4=normalizeResponseValue(_0x5b10c3),_0x151895=_0x2adfa4[_0x1cf04f(0x258)]||_0x2adfa4['creator']||_0x2adfa4[_0x1cf04f(0x136)]||'';let _0x1bab3a=Number(_0x2adfa4[_0x1cf04f(0x129)]||_0x2adfa4['ts']||_0x2adfa4[_0x1cf04f(0x294)]||_0x2adfa4['time']||0x1*0x20cc+0x141c+0x69d*-0x8);if(!_0x1bab3a)_0x1bab3a=Math[_0x1cf04f(0x128)](Date[_0x1cf04f(0x18c)]()/(-0x82*0x3d+-0xf12+0x31f4));const _0x202960=_0x453f9f+'||'+_0x547efc;if(!_0x1c9186['has'](_0x202960))_0x1c9186['set'](_0x202960,{'trigger':_0x547efc,'chat_jid':_0x453f9f,'responses':_0x1a9eb4[_0x1cf04f(0x220)](),'created_by':_0x151895,'created_at':_0x1bab3a});else{const _0x451048=_0x1c9186[_0x1cf04f(0x24d)](_0x202960);_0x451048[_0x1cf04f(0x163)]=uniqArray(_0x451048[_0x1cf04f(0x163)]['concat'](_0x1a9eb4)),_0x451048['created_by']=_0x451048[_0x1cf04f(0x258)]||_0x151895,_0x451048[_0x1cf04f(0x129)]=Math[_0x1cf04f(0x2b1)](_0x451048[_0x1cf04f(0x129)]||0x1055+0x59f+-0x15f4,_0x1bab3a||-0xd6f+-0x8*-0x1d0+0x1*-0x111);}}return Array[_0x1cf04f(0x178)](_0x1c9186[_0x1cf04f(0x196)]());}catch(_0x27ed2b){return warn('[gfilter]\x20'+_0x1cf04f(0x1ed)+'malizeExis'+'tingFilter'+'s\x20failed:\x20'+(_0x27ed2b?.[_0x1cf04f(0x1ae)]||_0x27ed2b)),[];}}async function ensureSchema(){const _0x1b7e72=_0x1b9b42,_0x2f6f4e={'id':_0x1b7e72(0x237)+_0x1b7e72(0x254)+'AUTOINCREM'+'ENT','trigger':'TEXT\x20NOT\x20N'+'ULL','chat_jid':_0x1b7e72(0x1de)+'ULL','responses':_0x1b7e72(0x1de)+'ULL\x20DEFAUL'+_0x1b7e72(0x20c),'rr_index':'INTEGER\x20DE'+_0x1b7e72(0x270),'created_by':_0x1b7e72(0x25c)+_0x1b7e72(0x251),'created_at':_0x1b7e72(0x281)+_0x1b7e72(0x270)};try{const _0x30f4d9=await tableExists('filters');if(!_0x30f4d9){const _0x3c492e=Object[_0x1b7e72(0x17b)](_0x2f6f4e)['map'](([_0x5c5a91,_0x566c31])=>_0x5c5a91+'\x20'+_0x566c31)[_0x1b7e72(0x150)](_0x1b7e72(0x248));await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x1ea)+_0x1b7e72(0x265)+'E\x20filters\x20'+_0x1b7e72(0x15f)+'\x20\x20'+_0x3c492e+(_0x1b7e72(0x182)+_0x1b7e72(0x257)+_0x1b7e72(0x13b)+_0x1b7e72(0x1ba)+'\x20\x20\x20\x20\x20\x20);\x0a\x20'+_0x1b7e72(0x19e)));try{await db['exec'](_0x1b7e72(0x253)+_0x1b7e72(0x166)+'EXISTS\x20idx'+_0x1b7e72(0x266)+_0x1b7e72(0x1dd)+_0x1b7e72(0x2df)+'jid);');}catch(_0x53f2e1){}try{await db['exec'](_0x1b7e72(0x249)+_0x1b7e72(0x28c)+'IF\x20NOT\x20EXI'+'STS\x20idx_fi'+_0x1b7e72(0x238)+_0x1b7e72(0x16c)+'ers(chat_j'+_0x1b7e72(0x1cf)+'r);');}catch(_0x505aa3){}info(_0x1b7e72(0x246)+_0x1b7e72(0x146)+_0x1b7e72(0x1d7)+_0x1b7e72(0x2cc)+_0x1b7e72(0x139)+_0x1b7e72(0x179));return;}const _0x48c55a=await getTableColumns(_0x1b7e72(0x2da)),_0x1080d8=[];for(const _0x52bdda of Object[_0x1b7e72(0x133)](_0x2f6f4e)){if(!_0x48c55a[_0x1b7e72(0x274)](_0x52bdda))_0x1080d8[_0x1b7e72(0x130)](_0x52bdda);}if(_0x1080d8[_0x1b7e72(0x20a)]===-0x3ea*0x1+-0x15b0+0x199a){try{await db['exec'](_0x1b7e72(0x253)+_0x1b7e72(0x166)+'EXISTS\x20idx'+_0x1b7e72(0x266)+_0x1b7e72(0x1dd)+'ters(chat_'+'jid);');}catch(_0xe405e){warn(_0x1b7e72(0x246)+_0x1b7e72(0x205)+':\x20'+(_0xe405e?.[_0x1b7e72(0x1ae)]||_0xe405e));}try{await db[_0x1b7e72(0x2c4)]('CREATE\x20UNI'+_0x1b7e72(0x28c)+_0x1b7e72(0x1e0)+_0x1b7e72(0x1d4)+_0x1b7e72(0x238)+'ue\x20ON\x20filt'+_0x1b7e72(0x14f)+_0x1b7e72(0x1cf)+_0x1b7e72(0x18f));}catch(_0x5d1239){warn(_0x1b7e72(0x246)+_0x1b7e72(0x12a)+':\x20'+(_0x5d1239?.[_0x1b7e72(0x1ae)]||_0x5d1239));}return;}const _0x5d3e1a=_0x1080d8[_0x1b7e72(0x191)](_0x4c9364=>!['id',_0x1b7e72(0x285),_0x1b7e72(0x2b0)][_0x1b7e72(0x274)](_0x4c9364));if(_0x5d3e1a){for(const _0x31e449 of _0x1080d8){try{const _0x32b74c=_0x2f6f4e[_0x31e449],_0x27db6f=_0x32b74c[_0x1b7e72(0x1eb)]('\x20')[_0x1b7e72(0x220)](0x2*-0xcfe+0x198d*0x1+0x70)['join']('\x20');await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x155)+_0x1b7e72(0x28b)+'ADD\x20COLUMN'+'\x20'+_0x31e449+'\x20'+_0x27db6f),info(_0x1b7e72(0x246)+_0x1b7e72(0x2b4)+_0x1b7e72(0x2ce)+'\x20'+_0x31e449+(_0x1b7e72(0x20b)+'s\x20table'));}catch(_0x24ed31){warn(_0x1b7e72(0x246)+_0x1b7e72(0x26a)+_0x1b7e72(0x287)+_0x31e449+_0x1b7e72(0x22f)+(_0x24ed31?.[_0x1b7e72(0x1ae)]||_0x24ed31));}}try{await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x253)+_0x1b7e72(0x166)+'EXISTS\x20idx'+_0x1b7e72(0x266)+_0x1b7e72(0x1dd)+_0x1b7e72(0x2df)+_0x1b7e72(0x2b9));}catch(_0x3b0b23){warn('[gfilter]\x20'+_0x1b7e72(0x205)+':\x20'+(_0x3b0b23?.['message']||_0x3b0b23));}try{await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x249)+_0x1b7e72(0x28c)+_0x1b7e72(0x1e0)+_0x1b7e72(0x1d4)+_0x1b7e72(0x238)+_0x1b7e72(0x16c)+_0x1b7e72(0x14f)+'id,\x20trigge'+_0x1b7e72(0x18f));}catch(_0x35b4eb){warn('[gfilter]\x20'+_0x1b7e72(0x12a)+':\x20'+(_0x35b4eb?.['message']||_0x35b4eb));}return;}info('[gfilter]\x20'+'legacy\x20fil'+'ters\x20table'+_0x1b7e72(0x1f0)+_0x1b7e72(0x2d2)+'ng\x20safe\x20mi'+'gration');const _0x3e1be4=await readAndNormalizeExistingFilters();await db[_0x1b7e72(0x2c4)]('PRAGMA\x20for'+_0x1b7e72(0x234)+'=\x20OFF;');try{await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x27c)+_0x1b7e72(0x149)+_0x1b7e72(0x23a)+_0x1b7e72(0x20f)+_0x1b7e72(0x29f)+_0x1b7e72(0x1f4)+_0x1b7e72(0x278)+'Y\x20AUTOINCR'+_0x1b7e72(0x2dd)+_0x1b7e72(0x17d)+_0x1b7e72(0x131)+_0x1b7e72(0x284)+'\x20\x20\x20\x20\x20\x20chat'+_0x1b7e72(0x272)+'NOT\x20NULL,\x0a'+_0x1b7e72(0x2dc)+_0x1b7e72(0x1f6)+'XT\x20NOT\x20NUL'+'L\x20DEFAULT\x20'+_0x1b7e72(0x1bc)+_0x1b7e72(0x17e)+_0x1b7e72(0x17c)+_0x1b7e72(0x148)+_0x1b7e72(0x182)+'created_by'+'\x20TEXT\x20DEFA'+_0x1b7e72(0x25e)+_0x1b7e72(0x2d6)+_0x1b7e72(0x13a)+'EGER\x20DEFAU'+_0x1b7e72(0x261)+_0x1b7e72(0x13e)+_0x1b7e72(0x141)+_0x1b7e72(0x165)+_0x1b7e72(0x19a));}catch(_0x57432a){await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x27c)+'LE\x20IF\x20NOT\x20'+_0x1b7e72(0x23a)+_0x1b7e72(0x20f)+_0x1b7e72(0x29f)+'d\x20INTEGER\x20'+_0x1b7e72(0x278)+'Y\x20AUTOINCR'+_0x1b7e72(0x2dd)+_0x1b7e72(0x17d)+'er\x20TEXT\x20NO'+_0x1b7e72(0x284)+'\x20\x20\x20\x20\x20\x20chat'+_0x1b7e72(0x272)+'NOT\x20NULL,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+_0x1b7e72(0x1f6)+_0x1b7e72(0x223)+_0x1b7e72(0x227)+_0x1b7e72(0x1bc)+_0x1b7e72(0x17e)+'ex\x20INTEGER'+_0x1b7e72(0x148)+_0x1b7e72(0x182)+_0x1b7e72(0x258)+_0x1b7e72(0x211)+_0x1b7e72(0x25e)+'\x20\x20\x20\x20\x20\x20crea'+_0x1b7e72(0x13a)+_0x1b7e72(0x22d)+_0x1b7e72(0x2bc)+_0x1b7e72(0x19b)),warn(_0x1b7e72(0x246)+_0x1b7e72(0x212)+'lters_new\x20'+_0x1b7e72(0x2ca)+_0x1b7e72(0x2a1)+'llback');}const _0x2c3255=await db[_0x1b7e72(0x147)](_0x1b7e72(0x283)+_0x1b7e72(0x29c)+_0x1b7e72(0x1e2)+_0x1b7e72(0x2a8)+_0x1b7e72(0x1d0)+_0x1b7e72(0x203)+'dex,\x20creat'+_0x1b7e72(0x29d)+_0x1b7e72(0x1a4)+_0x1b7e72(0x226)+_0x1b7e72(0x2b3)+_0x1b7e72(0x24a));try{for(const _0x37e86f of _0x3e1be4){const _0x2cedb4=JSON['stringify'](ensureArray(_0x37e86f['responses']||[]));try{await _0x2c3255['run'](_0x37e86f[_0x1b7e72(0x285)],_0x37e86f[_0x1b7e72(0x2b0)],_0x2cedb4,_0x37e86f[_0x1b7e72(0x258)]||'',Number(_0x37e86f[_0x1b7e72(0x129)]||Math[_0x1b7e72(0x128)](Date[_0x1b7e72(0x18c)]()/(-0x44*0xa+-0x17e7*-0x1+-0x1157))));}catch(_0x39e6c6){warn('[gfilter]\x20'+_0x1b7e72(0x1a2)+_0x1b7e72(0x1da)+'malized\x20ro'+'w\x20'+_0x37e86f['chat_jid']+'@'+_0x37e86f[_0x1b7e72(0x285)]+':\x20'+(_0x39e6c6?.[_0x1b7e72(0x1ae)]||_0x39e6c6));}}}finally{try{await _0x2c3255[_0x1b7e72(0x14e)]();}catch(_0x119213){}}try{const _0x2ea09e='filters_ba'+_0x1b7e72(0x1fd)+Math[_0x1b7e72(0x128)](Date['now']()/(-0x9*0x334+-0x2*-0x67+-0x1*-0x1fee));await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x155)+_0x1b7e72(0x28b)+_0x1b7e72(0x175)+_0x2ea09e+';'),await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x155)+_0x1b7e72(0x2ae)+_0x1b7e72(0x152)+_0x1b7e72(0x2c2)+'s;');try{await db['exec'](_0x1b7e72(0x253)+_0x1b7e72(0x166)+_0x1b7e72(0x143)+_0x1b7e72(0x266)+'hat\x20ON\x20fil'+'ters(chat_'+_0x1b7e72(0x2b9));}catch(_0x361596){warn(_0x1b7e72(0x246)+_0x1b7e72(0x21e)+_0x1b7e72(0x195)+(_0x361596?.[_0x1b7e72(0x1ae)]||_0x361596));}try{await db[_0x1b7e72(0x2c4)](_0x1b7e72(0x249)+'QUE\x20INDEX\x20'+_0x1b7e72(0x1e0)+_0x1b7e72(0x1d4)+'lters_uniq'+_0x1b7e72(0x16c)+_0x1b7e72(0x14f)+_0x1b7e72(0x1cf)+_0x1b7e72(0x18f));}catch(_0x1572b8){warn(_0x1b7e72(0x246)+_0x1b7e72(0x21e)+_0x1b7e72(0x12a)+':\x20'+(_0x1572b8?.['message']||_0x1572b8));}info(_0x1b7e72(0x246)+'migration\x20'+_0x1b7e72(0x29e)+_0x1b7e72(0x292)+_0x1b7e72(0x161)+'o\x20backup');}catch(_0x17159e){warn(_0x1b7e72(0x246)+'swap\x20table'+_0x1b7e72(0x153)+(_0x17159e?.[_0x1b7e72(0x1ae)]||_0x17159e));throw _0x17159e;}finally{await db['exec']('PRAGMA\x20for'+_0x1b7e72(0x234)+_0x1b7e72(0x269));}}catch(_0x2a425c){error(_0x2a425c,'[gfilter]\x20'+_0x1b7e72(0x2ad)+'ma\x20fatal');throw _0x2a425c;}}function normalizeResponseValue(_0x3ba6df){const _0x45274c=_0x1b9b42;if(_0x3ba6df==null)return[];if(Array['isArray'](_0x3ba6df))return uniqArray(_0x3ba6df);if(typeof _0x3ba6df===_0x45274c(0x1b1)){let _0x4d39c8=_0x3ba6df['replace'](/\r/g,'');const _0x4211c3=_0x4d39c8[_0x45274c(0x1be)]();if(_0x4211c3[_0x45274c(0x2a9)]('['))try{const _0x29c77c=JSON[_0x45274c(0x189)](_0x4211c3);if(Array[_0x45274c(0x20d)](_0x29c77c))return uniqArray(_0x29c77c['map'](_0x545f61=>String(_0x545f61||'')));}catch(_0x2877bc){}_0x4d39c8=_0x4d39c8[_0x45274c(0x291)](/^\s*\n+/,'')['replace'](/\n+\s*$/,'');const _0x409d07=_0x4d39c8['split']('\x0a'),_0x875a08=_0x409d07[_0x45274c(0x1fa)](_0x130abc=>_0x130abc['trimStart']()['startsWith']('!'));if(_0x875a08){const _0x53db96=[];let _0x696c7a=null;for(const _0x32958c of _0x409d07){if(_0x32958c['trimStart']()[_0x45274c(0x2a9)]('!')){const _0x589527=_0x32958c['replace'](/^\s*!/,''),_0xd5e640=_0x589527['replace'](/\s+$/,'');_0x696c7a=_0xd5e640,_0x53db96[_0x45274c(0x130)](_0x696c7a);}else{const _0x1e8f65=_0x32958c[_0x45274c(0x291)](/\s+$/,'');if(_0x696c7a===null)_0x696c7a=_0x1e8f65,_0x53db96[_0x45274c(0x130)](_0x696c7a);else{const _0x1a398f=_0x53db96[_0x45274c(0x20a)]-(-0x1bd7*0x1+-0x6c3+0x229b);_0x53db96[_0x1a398f]=_0x53db96[_0x1a398f]+'\x0a'+_0x1e8f65,_0x696c7a=_0x53db96[_0x1a398f];}}}return uniqArray(_0x53db96['map'](_0x51639b=>String(_0x51639b||'')[_0x45274c(0x1be)]()));}else{const _0x4926f3=_0x409d07['map'](_0x1b2bf6=>_0x1b2bf6[_0x45274c(0x291)](/\s+$/,''))[_0x45274c(0x150)]('\x0a')[_0x45274c(0x1be)]();if(!_0x4926f3)return[];return[_0x4926f3];}}return[];}async function upsertFilterRow(_0x2fecbf,_0x3ae55a,_0x5081de,_0x53ccbd){const _0x31cbd6=_0x1b9b42;try{const _0x17cad1=Math[_0x31cbd6(0x128)](Date[_0x31cbd6(0x18c)]()/(0x7f1+0x77*0x38+-0x1e11)),_0xb18907=JSON[_0x31cbd6(0x1e1)](uniqArray(ensureArray(_0x5081de)[_0x31cbd6(0x2e1)](_0x5a972d=>String(_0x5a972d)[_0x31cbd6(0x1be)]())[_0x31cbd6(0x2d5)](Boolean)));await db['run'](_0x31cbd6(0x283)+'O\x20filters\x20'+_0x31cbd6(0x2af)+_0x31cbd6(0x1c2)+'responses,'+'\x20rr_index,'+_0x31cbd6(0x2a0)+_0x31cbd6(0x2bf)+_0x31cbd6(0x132)+_0x31cbd6(0x2e3)+_0x31cbd6(0x236)+_0x31cbd6(0x1fc)+_0x31cbd6(0x171)+_0x31cbd6(0x1df)+'t_jid,\x20tri'+_0x31cbd6(0x25d)+_0x31cbd6(0x210)+_0x31cbd6(0x28a)+_0x31cbd6(0x185)+_0x31cbd6(0x276)+'responses,'+_0x31cbd6(0x299)+_0x31cbd6(0x1ca)+_0x31cbd6(0x14a)+_0x31cbd6(0x18e)+_0x31cbd6(0x25f)+'uded.creat'+_0x31cbd6(0x180)+_0x31cbd6(0x2d6)+_0x31cbd6(0x216)+'xcluded.cr'+_0x31cbd6(0x145),[_0x3ae55a,_0x2fecbf,_0xb18907,_0x53ccbd||'',_0x17cad1]);try{automatonCache['clear']();}catch(_0x1e9dcf){}return info('[gfilter]\x20'+_0x31cbd6(0x1c9)+_0x31cbd6(0x204)+_0x3ae55a+_0x31cbd6(0x235)+_0x2fecbf),!![];}catch(_0x3c677d){return error(_0x3c677d,_0x31cbd6(0x246)+_0x31cbd6(0x1bd)+_0x31cbd6(0x219)+'for\x20'+_0x3ae55a+_0x31cbd6(0x1a6)+_0x2fecbf),![];}}async function deleteFilters(_0x4d64ac,_0x21f22f){const _0x1a09ac=_0x1b9b42;if(!Array[_0x1a09ac(0x20d)](_0x21f22f)||_0x21f22f['length']===-0x57d+-0xde5*-0x2+-0x164d)return 0x33a*-0x3+0xa9+0x905;try{let _0x39ccd6=-0x1*0x5c9+-0x19d0+-0x1*-0x1f99;for(const _0x5e9d8a of _0x21f22f){const _0xce00b1=await db[_0x1a09ac(0x12e)](_0x1a09ac(0x2d7)+_0x1a09ac(0x1d8)+_0x1a09ac(0x209)+_0x1a09ac(0x14b)+'ND\x20trigger'+_0x1a09ac(0x1bf),[_0x4d64ac,_0x5e9d8a]);if(_0xce00b1?.[_0x1a09ac(0x1c7)])_0x39ccd6+=_0xce00b1[_0x1a09ac(0x1c7)];info(_0x1a09ac(0x246)+_0x1a09ac(0x1c8)+_0x5e9d8a+_0x1a09ac(0x1a6)+_0x4d64ac);}try{automatonCache['clear']();}catch(_0x2c1fac){}return _0x39ccd6;}catch(_0x521619){return error(_0x521619,_0x1a09ac(0x246)+_0x1a09ac(0x26f)+_0x1a09ac(0x1db)+_0x1a09ac(0x243)+_0x4d64ac),0x2*-0x6e6+-0x583+-0x134f*-0x1;}}async function listTriggersForChat(_0x579620){const _0xfa0b03=_0x1b9b42;try{const _0x138e92=await db[_0xfa0b03(0x295)](_0xfa0b03(0x289)+_0xfa0b03(0x28e)+_0xfa0b03(0x27e)+_0xfa0b03(0x12f)+_0xfa0b03(0x1ff)+_0xfa0b03(0x27b)+_0xfa0b03(0x229)+'er',[_0x579620]);return(_0x138e92||[])[_0xfa0b03(0x2e1)](_0x3e9afc=>_0x3e9afc[_0xfa0b03(0x285)]);}catch(_0x2f1080){return warn(_0x2f1080,'[gfilter]\x20'+_0xfa0b03(0x1fe)+_0xfa0b03(0x1a7)+_0xfa0b03(0x13d)+'\x20'+_0x579620),[];}}async function pickResponseAndAdvance(_0x3ad2f2,_0x4f8acf,_0x2966e7='roundrobin'){const _0x3bc8f9=_0x1b9b42;try{const _0x1ab3e7=await db[_0x3bc8f9(0x24d)](_0x3bc8f9(0x2cf)+_0x3bc8f9(0x1f5)+_0x3bc8f9(0x25a)+_0x3bc8f9(0x1d8)+_0x3bc8f9(0x209)+'_jid\x20=\x20?\x20A'+_0x3bc8f9(0x192)+_0x3bc8f9(0x2db)+'\x201',[_0x3ad2f2,_0x4f8acf]);if(!_0x1ab3e7)return null;let _0x1a38af=[];try{_0x1a38af=JSON[_0x3bc8f9(0x189)](_0x1ab3e7[_0x3bc8f9(0x163)]||'[]');}catch{_0x1a38af=ensureArray(_0x1ab3e7[_0x3bc8f9(0x163)]);}_0x1a38af=ensureArray(_0x1a38af);if(!_0x1a38af['length'])return null;if((_0x2966e7||'')['toLowerCas'+'e']()==='random'){const _0xb36dbf=Math[_0x3bc8f9(0x128)](Math[_0x3bc8f9(0x176)]()*_0x1a38af['length']);return _0x1a38af[_0xb36dbf];}const _0x490b43=Number(_0x1ab3e7[_0x3bc8f9(0x2c1)]||0x1*-0x214f+-0x18f+-0x2*-0x116f),_0x2ef099=_0x1a38af[_0x490b43%_0x1a38af['length']];try{await db[_0x3bc8f9(0x12e)](_0x3bc8f9(0x187)+_0x3bc8f9(0x23c)+_0x3bc8f9(0x1b6)+'(rr_index\x20'+_0x3bc8f9(0x15e)+'\x20chat_jid\x20'+_0x3bc8f9(0x15b)+_0x3bc8f9(0x217),[_0x3ad2f2,_0x4f8acf]);}catch(_0x4f62d2){warn(_0x3bc8f9(0x246)+_0x3bc8f9(0x215)+'ncrement\x20f'+_0x3bc8f9(0x23e)+(_0x4f62d2?.[_0x3bc8f9(0x1ae)]||_0x4f62d2));}return _0x2ef099;}catch(_0x56ba1d){return warn(_0x3bc8f9(0x246)+_0x3bc8f9(0x206)+_0x3bc8f9(0x1cb)+_0x3bc8f9(0x1cd)+(_0x56ba1d?.['message']||_0x56ba1d)),null;}}function parseFilterCommandText(_0x5aeb45){const _0x3c080b=_0x1b9b42;if(!_0x5aeb45)return null;const _0x2b9ab3=_0x5aeb45[_0x3c080b(0x1eb)](/\r?\n/)[_0x3c080b(0x2e1)](_0x135122=>_0x135122[_0x3c080b(0x291)](/\r/g,''));if(!_0x2b9ab3['length'])return null;let _0x1a8399=(_0x2b9ab3[0x14d1+-0xb50+-0x981]||'')[_0x3c080b(0x1be)](),_0x1368dd=_0x2b9ab3[_0x3c080b(0x220)](0x26cc+0x127*-0x6+-0x1fe1*0x1),_0x1b8962=null;const _0x355ab8=_0x1a8399['match'](/^(.*?)(?:\s*,\s*|\s+)?gp[:\s]*([^\s,]+)\s*$/i);_0x355ab8&&(_0x1a8399=(_0x355ab8[-0xdbf+0x939*-0x3+0x296b]||'')['trim'](),_0x1b8962=(_0x355ab8[-0xd*-0x2f+-0x19bb+0x175a]||'')[_0x3c080b(0x1be)]());if(!_0x1b8962&&_0x1368dd&&_0x1368dd[_0x3c080b(0x20a)]){let _0x52fff9=-(-0x101*0x11+0x469+0x7*0x1cf);for(let _0x5e9a4e=_0x1368dd['length']-(-0x4a*-0x7a+0x57c+0x9*-0x487);_0x5e9a4e>=0x131d+0xce8+-0x493*0x7;_0x5e9a4e--){if(String(_0x1368dd[_0x5e9a4e]||'')['trim']()[_0x3c080b(0x20a)]>-0xb40+-0x205b*0x1+0x2b9b){_0x52fff9=_0x5e9a4e;break;}}if(_0x52fff9>=-0x244f+0x753+0x7*0x424){const _0x3f8d04=String(_0x1368dd[_0x52fff9]||'')[_0x3c080b(0x1be)](),_0x55dc1a=_0x3f8d04[_0x3c080b(0x259)](/^gp[:\s]*([^\s,]+)\s*$/i);_0x55dc1a&&(_0x1b8962=(_0x55dc1a[0x25*-0x9e+0x12bd+0xe*0x4b]||'')['trim'](),_0x1368dd[_0x3c080b(0x255)](_0x52fff9,-0x15b5*-0x1+0xdb7+-0x1*0x236b));}}let _0x349330=_0x1a8399[_0x3c080b(0x1be)]()[_0x3c080b(0x1eb)](/\s+/)[_0x3c080b(0x2d5)](Boolean);if(_0x349330[_0x3c080b(0x20a)]&&_0x349330[0x2586+0x7*0x482+-0x4514][_0x3c080b(0x157)+'e']()===_0x3c080b(0x1af))_0x349330[_0x3c080b(0x225)]();const _0x5c32e7=_0x349330[_0x3c080b(0x150)]('\x20')[_0x3c080b(0x1be)]();let _0x3db0ee=[];_0x5c32e7&&(_0x5c32e7[_0x3c080b(0x274)](',')?_0x3db0ee=_0x5c32e7['split'](',')['map'](_0xc606da=>_0xc606da['trim']())['filter'](Boolean):_0x3db0ee=_0x5c32e7[_0x3c080b(0x1eb)](/\s+/)[_0x3c080b(0x2e1)](_0x29a7fc=>_0x29a7fc['trim']())[_0x3c080b(0x2d5)](Boolean));const _0x34ce04=_0x1368dd;if(!_0x34ce04['length'])return{'triggers':_0x3db0ee,'responses':[],'gp':_0x1b8962};const _0x56a4ee=_0x34ce04[_0x3c080b(0x150)]('\x0a'),_0xaae78c=normalizeResponseValue(_0x56a4ee);return{'triggers':_0x3db0ee,'responses':_0xaae78c,'gp':_0x1b8962};}function getMessageText(_0xedcf74){const _0x219032=_0x1b9b42;if(!_0xedcf74||!_0xedcf74['message'])return'';const _0x33c222=_0xedcf74[_0x219032(0x1ae)];if(_0x33c222[_0x219032(0x1d1)+'on'])return _0x33c222[_0x219032(0x1d1)+'on'];if(_0x33c222[_0x219032(0x168)+'xtMessage']?.[_0x219032(0x13c)])return _0x33c222[_0x219032(0x168)+_0x219032(0x2d1)][_0x219032(0x13c)];if(_0x33c222[_0x219032(0x19c)+'ge']?.[_0x219032(0x177)])return _0x33c222[_0x219032(0x19c)+'ge'][_0x219032(0x177)];if(_0x33c222[_0x219032(0x1e4)+'ge']?.[_0x219032(0x177)])return _0x33c222[_0x219032(0x1e4)+'ge'][_0x219032(0x177)];if(_0x33c222[_0x219032(0x250)+_0x219032(0x140)+'ge']?.[_0x219032(0x142)+'ttonId'])return _0x33c222[_0x219032(0x250)+_0x219032(0x140)+'ge'][_0x219032(0x142)+_0x219032(0x263)];if(_0x33c222[_0x219032(0x267)+_0x219032(0x298)]?.['singleSele'+_0x219032(0x2e0)]?.[_0x219032(0x1f1)+_0x219032(0x162)])return _0x33c222[_0x219032(0x267)+'seMessage'][_0x219032(0x1d6)+_0x219032(0x2e0)][_0x219032(0x1f1)+_0x219032(0x162)];return'';}const processedMessageKeys=new Map(),DEDUPE_TTL=(-0x3c7*0x3+0x7b7+-0x4*-0xef)*(-0x1c28+-0xed*0xc+-0x133*-0x24);function _0x10c4(_0x3e1310,_0xcb6b5){const _0x46783a=_0x2a74();return _0x10c4=function(_0x5aaa5c,_0x4454f1){_0x5aaa5c=_0x5aaa5c-(-0xe95+-0x239d+0x335a);let _0x539122=_0x46783a[_0x5aaa5c];return _0x539122;},_0x10c4(_0x3e1310,_0xcb6b5);}function makeDedupeKey(_0x566a21){const _0x36e8d5=_0x1b9b42,_0x5adaf5=_0x566a21?.[_0x36e8d5(0x2aa)];if(!_0x5adaf5)return null;const _0x14e9ea=_0x5adaf5['id']||_0x5adaf5?.['participan'+'t']||'',_0xfc57ee=_0x5adaf5[_0x36e8d5(0x24f)]||'';return _0xfc57ee+'::'+_0x14e9ea;}function isMsgProcessed(_0xb3cb90){const _0x5b7197=_0x1b9b42;return _0xb3cb90&&processedMessageKeys[_0x5b7197(0x1dc)](_0xb3cb90);}function markMsgProcessed(_0x4db685){const _0x273c79=_0x1b9b42;if(!_0x4db685)return;processedMessageKeys['has'](_0x4db685)&&clearTimeout(processedMessageKeys[_0x273c79(0x24d)](_0x4db685));const _0x21be6e=setTimeout(()=>processedMessageKeys['delete'](_0x4db685),DEDUPE_TTL);processedMessageKeys[_0x273c79(0x26d)](_0x4db685,_0x21be6e);}class Aho{constructor(){const _0x1b642a=_0x1b9b42;this[_0x1b642a(0x275)]=[{'next':Object[_0x1b642a(0x12b)](null),'fail':0x0,'output':[]}];}[_0x1b9b42(0x2c8)](_0x352d3a){const _0x5d7f16=_0x1b9b42;this['nodes']=[{'next':Object[_0x5d7f16(0x12b)](null),'fail':0x0,'output':[]}];for(const _0x19e847 of _0x352d3a){let _0x1522f7=0xc4*0xd+-0x5*0x2a1+0x331;for(let _0x3b0e75=-0x124*0x3+-0x2f7*0x7+0x182d;_0x3b0e75<_0x19e847[_0x5d7f16(0x20a)];_0x3b0e75++){const _0x1906ad=_0x19e847[_0x3b0e75];!this[_0x5d7f16(0x275)][_0x1522f7]['next'][_0x1906ad]&&(this[_0x5d7f16(0x275)][_0x1522f7][_0x5d7f16(0x198)][_0x1906ad]=this[_0x5d7f16(0x275)][_0x5d7f16(0x20a)],this[_0x5d7f16(0x275)][_0x5d7f16(0x130)]({'next':Object[_0x5d7f16(0x12b)](null),'fail':0x0,'output':[]})),_0x1522f7=this[_0x5d7f16(0x275)][_0x1522f7][_0x5d7f16(0x198)][_0x1906ad];}this[_0x5d7f16(0x275)][_0x1522f7][_0x5d7f16(0x2b2)][_0x5d7f16(0x130)](_0x19e847);}const _0x3d7439=[];for(const _0x36454f in this[_0x5d7f16(0x275)][0x143e+0x2309+0x10b*-0x35]['next']){const _0x4093c5=this[_0x5d7f16(0x275)][-0x123b+-0x26e8+0x1*0x3923][_0x5d7f16(0x198)][_0x36454f];this[_0x5d7f16(0x275)][_0x4093c5][_0x5d7f16(0x15d)]=-0xd*-0x167+0x3*-0x457+0x2*-0x29b,_0x3d7439[_0x5d7f16(0x130)](_0x4093c5);}while(_0x3d7439[_0x5d7f16(0x20a)]){const _0xa26b51=_0x3d7439[_0x5d7f16(0x225)]();for(const _0x35dab9 in this[_0x5d7f16(0x275)][_0xa26b51]['next']){const _0x5dc25c=this[_0x5d7f16(0x275)][_0xa26b51][_0x5d7f16(0x198)][_0x35dab9];let _0x17129b=this[_0x5d7f16(0x275)][_0xa26b51][_0x5d7f16(0x15d)];while(_0x17129b&&!this[_0x5d7f16(0x275)][_0x17129b][_0x5d7f16(0x198)][_0x35dab9])_0x17129b=this[_0x5d7f16(0x275)][_0x17129b][_0x5d7f16(0x15d)];if(this[_0x5d7f16(0x275)][_0x17129b][_0x5d7f16(0x198)][_0x35dab9])this[_0x5d7f16(0x275)][_0x5dc25c][_0x5d7f16(0x15d)]=this[_0x5d7f16(0x275)][_0x17129b][_0x5d7f16(0x198)][_0x35dab9];else this[_0x5d7f16(0x275)][_0x5dc25c]['fail']=-0x6*-0x39a+0x10fe+-0x269a;this['nodes'][_0x5dc25c][_0x5d7f16(0x2b2)][_0x5d7f16(0x130)](...this[_0x5d7f16(0x275)][this[_0x5d7f16(0x275)][_0x5dc25c][_0x5d7f16(0x15d)]][_0x5d7f16(0x2b2)]),_0x3d7439['push'](_0x5dc25c);}}}[_0x1b9b42(0x1b0)](_0xac65e6){const _0x49ae5f=_0x1b9b42,_0x2c2da2=[];let _0x3c987d=-0xdf8+-0xde8+0x1be0;for(let _0x621aa5=-0x129e+0xf7c+-0x191*-0x2;_0x621aa5<_0xac65e6['length'];_0x621aa5++){const _0x1d9819=_0xac65e6[_0x621aa5];while(_0x3c987d&&!this[_0x49ae5f(0x275)][_0x3c987d][_0x49ae5f(0x198)][_0x1d9819])_0x3c987d=this[_0x49ae5f(0x275)][_0x3c987d][_0x49ae5f(0x15d)];if(this['nodes'][_0x3c987d][_0x49ae5f(0x198)][_0x1d9819])_0x3c987d=this[_0x49ae5f(0x275)][_0x3c987d]['next'][_0x1d9819];else _0x3c987d=0x81*0x2f+-0x78b+0x4*-0x409;if(this['nodes'][_0x3c987d][_0x49ae5f(0x2b2)][_0x49ae5f(0x20a)])for(const _0x12e62b of this[_0x49ae5f(0x275)][_0x3c987d][_0x49ae5f(0x2b2)]){_0x2c2da2[_0x49ae5f(0x130)]({'keyword':_0x12e62b,'index':_0x621aa5-_0x12e62b[_0x49ae5f(0x20a)]+(-0x29*0x40+-0x2c*0x1f+0xf95*0x1)});}}return _0x2c2da2;}}const automatonCache=new Map();async function getAutomatonForChat(_0x51a7de){const _0x17c110=_0x1b9b42;if(!_0x51a7de)return null;if(automatonCache[_0x17c110(0x1dc)](_0x51a7de))return automatonCache[_0x17c110(0x24d)](_0x51a7de);try{const _0x5bdbf0=await db['all'](_0x17c110(0x289)+'TINCT\x20trig'+_0x17c110(0x27e)+_0x17c110(0x12f)+_0x17c110(0x1ff)+_0x17c110(0x2c7)+')',[_0x51a7de,'*']),_0xb9f11c=(_0x5bdbf0||[])['map'](_0x5c365a=>String(_0x5c365a['trigger']||'')[_0x17c110(0x1be)]())[_0x17c110(0x2d5)](Boolean),_0x2f0892=_0xb9f11c['filter'](_0x20d646=>{const _0x6544f5=_0x17c110,_0x3254ab=String(_0x20d646)[_0x6544f5(0x1be)]()[_0x6544f5(0x157)+'e']();if(_0x3254ab['startsWith'](_0x6544f5(0x288)))return![];if(_0x20d646[_0x6544f5(0x274)]('*'))return![];return!![];}),_0x9e9937=_0x2f0892[_0x17c110(0x2e1)](_0x4fdc4f=>_0x4fdc4f[_0x17c110(0x157)+'e']()),_0x1e1e7f=new Map();for(let _0x132090=0x159d+0xdb*0xe+-0x2197*0x1;_0x132090<_0x2f0892[_0x17c110(0x20a)];_0x132090++){_0x1e1e7f[_0x17c110(0x26d)](_0x9e9937[_0x132090],_0x2f0892[_0x132090]);}const _0x4b2972=new Aho();if(_0x9e9937['length'])_0x4b2972[_0x17c110(0x2c8)](_0x9e9937);const _0x4edea6={'ac':_0x4b2972,'keywords':_0x9e9937,'lowerToOrig':_0x1e1e7f};return automatonCache[_0x17c110(0x26d)](_0x51a7de,_0x4edea6),_0x4edea6;}catch(_0x5870b0){return warn('[gfilter]\x20'+_0x17c110(0x15a)+_0x17c110(0x19d)+_0x17c110(0x13d)+'\x20'+_0x51a7de+':\x20'+(_0x5870b0?.[_0x17c110(0x1ae)]||_0x5870b0)),null;}}async function findStoredMatchFromFindings(_0x1708bc=[]){const _0x4d651a=_0x1b9b42;try{const _0x52b1c6=await listSudo();if(!Array[_0x4d651a(0x20d)](_0x52b1c6)||_0x52b1c6[_0x4d651a(0x20a)]===0xc*0x2f6+0x59*0x11+-0x1*0x2971)return null;const _0x226fcf=new Set(_0x52b1c6[_0x4d651a(0x2e1)](String));for(const _0x266f6d of _0x1708bc||[]){if(!_0x266f6d||typeof _0x266f6d[_0x4d651a(0x2a6)]!=='string')continue;const _0x4c04fd=normalizeToJid(_0x266f6d['jid']);if(_0x4c04fd&&_0x226fcf['has'](_0x4c04fd))return _0x4c04fd;if(_0x226fcf[_0x4d651a(0x1dc)](_0x266f6d[_0x4d651a(0x2a6)]))return _0x266f6d[_0x4d651a(0x2a6)];const _0x32c34f=String(_0x266f6d['jid'])[_0x4d651a(0x1eb)]('@')[0x27a*0xb+0x88e+0x8f3*-0x4][_0x4d651a(0x1eb)](':')[-0x250c*-0x1+-0x8f7*-0x4+-0x48e8];if(_0x32c34f)for(const _0x1138ca of _0x52b1c6){const _0x155213=String(_0x1138ca)[_0x4d651a(0x1eb)]('@')[0x23a+0x123+-0x15*0x29];if(_0x155213&&_0x155213===_0x32c34f)return _0x1138ca;}}return null;}catch(_0x2870ed){return warn('[gfilter]\x20'+_0x4d651a(0x16d)+_0x4d651a(0x2d0)+'indings\x20er'+'ror:\x20'+(_0x2870ed?.[_0x4d651a(0x1ae)]||_0x2870ed)),null;}}export async function initialize(_0x4da390){const _0x4c4a10=_0x1b9b42;botRef=_0x4da390;if(botRef){if(typeof botRef[_0x4c4a10(0x18b)+'e']===_0x4c4a10(0x1f7))sendApi=async(_0x524058,_0x4ffee9)=>await botRef[_0x4c4a10(0x18b)+'e'](_0x524058,_0x4ffee9);else botRef[_0x4c4a10(0x21d)]&&typeof botRef[_0x4c4a10(0x21d)][_0x4c4a10(0x18b)+'e']===_0x4c4a10(0x1f7)?sendApi=async(_0x2c2dc0,_0x333220)=>await botRef[_0x4c4a10(0x21d)][_0x4c4a10(0x18b)+'e'](_0x2c2dc0,_0x333220):sendApi=null;}try{await ensureSchema(),info('[gfilter]\x20'+_0x4c4a10(0x21b)+_0x4c4a10(0x1e8)+_0x4c4a10(0x188)+'integrated'+')');}catch(_0xe6bb29){error(_0xe6bb29,_0x4c4a10(0x246)+'initialize'+'\x20fatal');throw _0xe6bb29;}}function detectCommandNameFromCmdText(_0x4edb47){const _0x3a6ead=_0x1b9b42;if(!_0x4edb47)return null;const _0x22ac64=_0x4edb47[_0x3a6ead(0x1be)]();if(!_0x22ac64)return null;return _0x22ac64[_0x3a6ead(0x1eb)](/\s+/)[-0x5a4+0x2390+-0x1dec]['toLowerCas'+'e']();}export async function onMessage(_0x34fc02){const _0xf4c636=_0x1b9b42;try{if(!_0x34fc02||!_0x34fc02[_0xf4c636(0x2aa)]||!_0x34fc02[_0xf4c636(0x1ae)])return;const _0x33a772=makeDedupeKey(_0x34fc02);if(!_0x33a772)return;if(isMsgProcessed(_0x33a772))return;markMsgProcessed(_0x33a772);const _0x2700f7=getMessageText(_0x34fc02);if(!_0x2700f7)return;const _0x207102=_0x34fc02['key'][_0xf4c636(0x24f)],_0x5856b6=typeof _0x207102===_0xf4c636(0x1b1)&&_0x207102[_0xf4c636(0x233)]('@g.us'),_0x50c1ee=_0x34fc02[_0xf4c636(0x2aa)]&&(_0x34fc02[_0xf4c636(0x2aa)][_0xf4c636(0x186)+'t']||_0x34fc02['key'][_0xf4c636(0x178)]||_0x34fc02[_0xf4c636(0x2aa)]['remoteJid'])||'',_0x4e0db4=(_0x50c1ee||'')[_0xf4c636(0x1eb)]('@')[-0x1867*0x1+0xc3+0x2*0xbd2];let _0x3788a9=![];if(_0x5856b6)try{_0x3788a9=await isadmin(botRef,_0x34fc02);}catch(_0x2a20f4){_0x3788a9=![];}if(_0x34fc02[_0xf4c636(0x24e)]){const _0x34c122=typeof _0x34fc02[_0xf4c636(0x13c)]===_0xf4c636(0x1b1)&&_0x34fc02[_0xf4c636(0x13c)][_0xf4c636(0x1be)]()[_0xf4c636(0x20a)]?_0x34fc02['text'][_0xf4c636(0x1be)]():_0x2700f7[_0xf4c636(0x1be)](),_0x57506e=detectCommandNameFromCmdText(_0x34c122);if(!_0x57506e)return;if(!_0x57506e[_0xf4c636(0x2a9)]('g'))return;if(!_0x5856b6){const _0x15d8a0=Boolean(_0x34fc02['key'][_0xf4c636(0x199)]);let _0x3d4206=null;if(_0x15d8a0){const _0x52524d=getBotJid();!_0x52524d?(warn('[gfilter]\x20'+_0xf4c636(0x144)+_0xf4c636(0x1c4)+_0xf4c636(0x23d)+_0xf4c636(0x230)+_0xf4c636(0x1b2)+_0xf4c636(0x208)+_0xf4c636(0x2a3)+'irmation'),_0x3d4206=_0x34fc02[_0xf4c636(0x2aa)][_0xf4c636(0x24f)]):_0x3d4206=_0x52524d;}else{let _0x4a4df1=![];try{_0x4a4df1=await isSudo(botRef,_0x34fc02);}catch(_0x4421d5){_0x4a4df1=![];}if(!_0x4a4df1)return;const _0x1a1dd5=userJidFromCtx(_0x34fc02)||{'findings':[]},_0x259cc3=await findStoredMatchFromFindings(_0x1a1dd5[_0xf4c636(0x1b4)]||[]);if(!_0x259cc3)return;_0x3d4206=_0x259cc3;}const _0x406cbc=parseFilterCommandText(_0x34c122||_0x2700f7);if(_0x57506e===_0xf4c636(0x1af)){if(!_0x406cbc||!_0x406cbc['triggers'][_0xf4c636(0x20a)]||!_0x406cbc[_0xf4c636(0x163)][_0xf4c636(0x20a)]){await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x172)+_0xf4c636(0x252)+_0xf4c636(0x14c)+'\x20gfilter\x20<'+_0xf4c636(0x16f)+'rigger2>\x0a!'+_0xf4c636(0x1b7)+_0xf4c636(0x17a)+_0xf4c636(0x1f8)+'y\x20include\x20'+_0xf4c636(0x218)+_0xf4c636(0x22c)+_0xf4c636(0x245)+_0xf4c636(0x231)+_0xf4c636(0x277)+_0xf4c636(0x1f9));return;}let _0x95671e=[];if(_0x406cbc['gp']){const _0x5675fc=_0x406cbc['gp'][_0xf4c636(0x1be)]();if(_0x5675fc[_0xf4c636(0x157)+'e']()==='all')_0x95671e=await _0x3f4843[_0xf4c636(0x2d3)+'ids']();else{const _0x4c495a=await _0x3f4843[_0xf4c636(0x151)+'e'](_0x5675fc);if(_0x4c495a)_0x95671e=[_0x4c495a];else{if(_0x5675fc[_0xf4c636(0x274)]('@'))_0x95671e=[_0x3f4843[_0xf4c636(0x1f2)+'oUserJid'](_0x5675fc)];else{await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x1ce)+_0xf4c636(0x1e5)+':\x20\x22'+_0x5675fc+(_0xf4c636(0x169)+_0xf4c636(0x18a)+_0xf4c636(0x19f)+'ias\x20or\x20pas'+'s\x20a\x20full\x20J'+'ID.'));return;}}}}else _0x95671e=['*'];let _0x2d5ab3=0x159d+0x9f*-0x3+-0x13c0;for(const _0x22be4c of uniqArray(_0x95671e)){for(const _0x3424f3 of _0x406cbc[_0xf4c636(0x29a)]){const _0x3ef908=await upsertFilterRow(_0x22be4c,_0x3424f3,_0x406cbc['responses'],_0x50c1ee||'');if(_0x3ef908)_0x2d5ab3++;}}await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x1d5)+_0x2d5ab3+('\x20filter(s)'+_0xf4c636(0x214))+(_0x95671e[_0xf4c636(0x20a)]===0x1*0x1e93+0x1a*0x79+-0x2adc?_0x95671e[0x1*-0xf4d+0xa95+-0x25c*-0x2]:_0xf4c636(0x2bd)+_0xf4c636(0x221)));return;}if(_0x57506e===_0xf4c636(0x2a7)+'r'){const _0x577054=(parseFilterCommandText(_0x34c122||_0x2700f7)||{})['gp'],_0x5e5ad1=_0x577054?_0x577054[_0xf4c636(0x157)+'e']()===_0xf4c636(0x295)?'*':await _0x3f4843[_0xf4c636(0x151)+'e'](_0x577054)||_0x3f4843[_0xf4c636(0x1f2)+_0xf4c636(0x1e3)](_0x577054):'*',_0x1f604c=await listTriggersForChat(_0x5e5ad1);await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x246)+_0x1f604c[_0xf4c636(0x20a)]+(_0xf4c636(0x2de)+'or\x20')+(_0x5e5ad1==='*'?_0xf4c636(0x2b5)+'l\x20groups)':_0x5e5ad1));if(!_0x1f604c[_0xf4c636(0x20a)])return;let _0x286751='';for(const _0x422822 of _0x1f604c){const _0xc6050c='•\x20'+_0x422822+'\x0a';(_0x286751+_0xc6050c)[_0xf4c636(0x20a)]>0x98e+0xdbd*-0x2+0x17c8&&(await sendText(_0x34fc02,_0x3d4206,_0x286751['trim']()),_0x286751=''),_0x286751+=_0xc6050c;}if(_0x286751[_0xf4c636(0x1be)]())await sendText(_0x34fc02,_0x3d4206,_0x286751[_0xf4c636(0x1be)]());return;}if(_0x57506e===_0xf4c636(0x241)||_0x57506e===_0xf4c636(0x241)+'s'||_0x57506e===_0xf4c636(0x154)){const _0x109d35=(_0x2700f7||'')['split'](/\r?\n/)[_0xf4c636(0x2e1)](_0x3beb86=>_0x3beb86['trim']());let _0x5e2f25=null;if(_0x109d35[_0xf4c636(0x20a)]>-0x146b*-0x1+0x1*-0x4ea+0x7c0*-0x2&&!_0x109d35[-0xe69+-0x7*-0x1d7+0x189]['toLowerCas'+'e']()[_0xf4c636(0x2a9)]('gp'))_0x5e2f25=_0x109d35[-0x1f9*0x2+-0x1*0x14b3+-0xc53*-0x2];else{const _0x4dfa48=_0x34c122[_0xf4c636(0x1be)]()[_0xf4c636(0x1eb)](/\s+/);_0x4dfa48[_0xf4c636(0x225)](),_0x5e2f25=_0x4dfa48[_0xf4c636(0x150)]('\x20')[_0xf4c636(0x1be)]();}const _0x19da31=_0x109d35[_0xf4c636(0x220)](0x25c5+-0x1*0x12f5+-0x645*0x3)[_0xf4c636(0x1c6)](_0x294a0b=>/^gp[:\s]/i[_0xf4c636(0x181)](_0x294a0b));let _0xba4387=_0x19da31?_0x19da31[_0xf4c636(0x291)](/^gp[:\s]+/i,'')[_0xf4c636(0x1be)]():null;const _0x50e8a8=(_0x5e2f25||'')[_0xf4c636(0x1eb)](',')[_0xf4c636(0x2e1)](_0x52dffc=>_0x52dffc[_0xf4c636(0x1be)]())['filter'](Boolean);if(!_0x50e8a8['length']){await sendText(_0x34fc02,_0x3d4206,'Usage\x20(PM)'+_0xf4c636(0x1c1)+'er\x20trigger'+_0xf4c636(0x27d)+'\x20[gp:\x20<ali'+_0xf4c636(0x21a)+_0xf4c636(0x260)+'lfilter\x20al'+_0xf4c636(0x1e9)+'\x20everythin'+'g\x20globally'+')');return;}if(_0x50e8a8['length']===0x2f9*0x2+-0x23b6+0x1dc5&&_0x50e8a8[-0x1*0x11cc+-0x1262+0x242e][_0xf4c636(0x157)+'e']()==='all')try{const _0x277c33=await db[_0xf4c636(0x12e)](_0xf4c636(0x2d7)+_0xf4c636(0x1b8)),_0x343367=_0x277c33?.[_0xf4c636(0x1c7)]||-0x2245+0x1285+0x18*0xa8;try{automatonCache[_0xf4c636(0x1aa)]();}catch(_0x34864a){}await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x2c9)+'L\x20filters\x20'+_0xf4c636(0x16a)+'ase.\x20Rows\x20'+_0xf4c636(0x160)+_0x343367);return;}catch(_0xc20613){await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x24b)+_0xf4c636(0x1d9)+_0xf4c636(0x264)+(_0xc20613?.[_0xf4c636(0x1ae)]||_0xc20613));return;}let _0x172ca5=[];if(_0xba4387){if(_0xba4387[_0xf4c636(0x157)+'e']()===_0xf4c636(0x295))_0x172ca5=await _0x3f4843[_0xf4c636(0x2d3)+_0xf4c636(0x1d3)]();else{const _0x416f8f=await _0x3f4843[_0xf4c636(0x151)+'e'](_0xba4387);if(_0x416f8f)_0x172ca5=[_0x416f8f];else{if(_0xba4387[_0xf4c636(0x274)]('@'))_0x172ca5=[_0x3f4843['normalizeT'+_0xf4c636(0x1e3)](_0xba4387)];else{await sendText(_0x34fc02,_0x3d4206,'Unknown\x20gp'+_0xf4c636(0x1e5)+':\x20\x22'+_0xba4387+'\x22.');return;}}}}else _0x172ca5=['*'];let _0x279c98=0x1*0x23e8+-0xb89+0x11*-0x16f;for(const _0x3a6e66 of uniqArray(_0x172ca5)){const _0x2ae20e=await deleteFilters(_0x3a6e66,_0x50e8a8);_0x279c98+=_0x2ae20e;}await sendText(_0x34fc02,_0x3d4206,_0xf4c636(0x207)+_0x279c98+(_0xf4c636(0x1ad)+_0xf4c636(0x247)+'\x20')+(_0x172ca5[_0xf4c636(0x20a)]===-0x18*-0x14e+0x21e*0x9+0x325d*-0x1?_0x172ca5[0xfdc+-0x143d*-0x1+0x1*-0x2419]:_0xf4c636(0x2bd)+_0xf4c636(0x221)));return;}return;}if(_0x5856b6){if(!_0x3788a9)return;const _0x413888=typeof _0x34fc02[_0xf4c636(0x13c)]===_0xf4c636(0x1b1)&&_0x34fc02[_0xf4c636(0x13c)][_0xf4c636(0x1be)]()[_0xf4c636(0x20a)]?_0x34fc02[_0xf4c636(0x13c)]['trim']():_0x2700f7['trim'](),_0x5db7cc=detectCommandNameFromCmdText(_0x413888);if(!_0x5db7cc)return;let _0x50a48e;try{_0x50a48e=await getDefault(_0x4e0db4)[_0xf4c636(0x1a5)](()=>null);}catch(_0x34876f){_0x50a48e=null;}if(!_0x50a48e||Array[_0xf4c636(0x20d)](_0x50a48e)&&_0x50a48e[_0xf4c636(0x20a)]===-0x1f3+0x1*0xa7+0x2*0xa6){await sendText(_0x34fc02,_0x207102,'Could\x20not\x20'+_0xf4c636(0x2a2)+'ur\x20default'+_0xf4c636(0x167)+_0xf4c636(0x1b9)+_0xf4c636(0x2cd)+_0xf4c636(0x1b3));return;}const _0x32895c=Array[_0xf4c636(0x20d)](_0x50a48e)?_0x50a48e:[_0x50a48e];let _0x18831f=[];for(const _0x2fcdf8 of _0x32895c){try{const _0x12601a=await getConnection(_0x2fcdf8)['catch'](()=>null);if(Array[_0xf4c636(0x20d)](_0x12601a))_0x18831f['push'](..._0x12601a);else{if(_0x12601a)_0x18831f[_0xf4c636(0x130)](String(_0x12601a));}}catch(_0x431555){}}_0x18831f=uniqArray(_0x18831f);if(!_0x18831f[_0xf4c636(0x20a)]){await sendText(_0x34fc02,_0x207102,'Could\x20not\x20'+_0xf4c636(0x2a2)+_0xf4c636(0x12d)+_0xf4c636(0x167)+'n(s):\x20'+_0x32895c[_0xf4c636(0x150)](',\x20')+('.\x20Please\x20c'+_0xf4c636(0x134)+'efault\x20val'+'ue(s).'));return;}if(_0x5db7cc===_0xf4c636(0x1af)){const _0x3b2a6d=parseFilterCommandText(_0x413888||_0x2700f7);if(!_0x3b2a6d||!_0x3b2a6d[_0xf4c636(0x29a)]['length']||!_0x3b2a6d['responses'][_0xf4c636(0x20a)]){await sendText(_0x34fc02,_0x207102,_0xf4c636(0x200)+'up\x20admin):'+_0xf4c636(0x1f3)+'<trigger1,'+_0xf4c636(0x170)+_0xf4c636(0x2d4)+_0xf4c636(0x137)+'2\x0aOptional'+'ly\x20include'+'\x20gp:\x20<grou'+_0xf4c636(0x2a5)+_0xf4c636(0x244));return;}if(_0x3b2a6d['gp']){let _0x4a764b=[];const _0x2e40d8=_0x3b2a6d['gp']['trim']();if(_0x2e40d8['toLowerCas'+'e']()===_0xf4c636(0x295))_0x4a764b=await _0x3f4843[_0xf4c636(0x2d3)+_0xf4c636(0x1d3)]();else{const _0x21fd92=await _0x3f4843[_0xf4c636(0x151)+'e'](_0x2e40d8);if(_0x21fd92)_0x4a764b=[_0x21fd92];else{if(_0x2e40d8[_0xf4c636(0x274)]('@'))_0x4a764b=[_0x3f4843[_0xf4c636(0x1f2)+'oUserJid'](_0x2e40d8)];else{await sendText(_0x34fc02,_0x207102,_0xf4c636(0x1ce)+'\x20alias/jid'+':\x20\x22'+_0x2e40d8+'\x22.');return;}}}let _0x212114=0x6*0x66b+-0x21e7*-0x1+-0x4869;for(const _0x20ab51 of uniqArray(_0x4a764b)){for(const _0x1b613e of _0x3b2a6d[_0xf4c636(0x29a)]){const _0x327316=await upsertFilterRow(_0x20ab51,_0x1b613e,_0x3b2a6d[_0xf4c636(0x163)],_0x50c1ee||'');if(_0x327316)_0x212114++;}}await sendText(_0x34fc02,_0x207102,_0xf4c636(0x1d5)+_0x212114+(_0xf4c636(0x29b)+'\x20to\x20')+(_0x4a764b[_0xf4c636(0x20a)]===-0x1c*0x15a+-0x1b4e+0x4127*0x1?_0x4a764b[-0x55e+-0x420+0x97e]:_0xf4c636(0x2bd)+_0xf4c636(0x221)));return;}let _0x5e5bd6=0x1128+-0x13*0xfd+0x19f;for(const _0x3ba62c of _0x18831f){for(const _0x10c047 of _0x3b2a6d[_0xf4c636(0x29a)]){const _0x43c5d9=await upsertFilterRow(_0x3ba62c,_0x10c047,_0x3b2a6d[_0xf4c636(0x163)],_0x50c1ee||'');if(_0x43c5d9)_0x5e5bd6++;}}await sendText(_0x34fc02,_0x207102,_0xf4c636(0x1d5)+_0x5e5bd6+(_0xf4c636(0x1ad)+_0xf4c636(0x184)+_0xf4c636(0x1ef)+_0xf4c636(0x27f)+'on(s):\x20')+_0x18831f[_0xf4c636(0x150)](',\x20'));return;}if(_0x5db7cc===_0xf4c636(0x2a7)+'r'){const _0xd7580a=new Set();for(const _0x37b19f of _0x18831f){const _0x12218b=await listTriggersForChat(_0x37b19f);for(const _0x2812fa of _0x12218b)_0xd7580a['add'](_0x2812fa);}const _0x1178f4=await listTriggersForChat('*');for(const _0x40d414 of _0x1178f4||[])_0xd7580a['add'](_0x40d414);const _0x2a55c4=Array[_0xf4c636(0x178)](_0xd7580a)['sort']();await sendText(_0x34fc02,_0x207102,_0xf4c636(0x246)+_0xf4c636(0x1d2)+_0x2a55c4[_0xf4c636(0x20a)]+(_0xf4c636(0x2de)+'or\x20your\x20de'+_0xf4c636(0x22e)+_0xf4c636(0x22a)+_0xf4c636(0x2e2)));if(!_0x2a55c4[_0xf4c636(0x20a)])return;let _0x4636c7='';for(const _0x3ed9b3 of _0x2a55c4){const _0x21cb08='•\x20'+_0x3ed9b3+'\x0a';(_0x4636c7+_0x21cb08)[_0xf4c636(0x20a)]>0x2683*0x1+-0x1*-0x7b7+-0x285e&&(await sendText(_0x34fc02,_0x207102,_0x4636c7['trim']()),_0x4636c7=''),_0x4636c7+=_0x21cb08;}if(_0x4636c7[_0xf4c636(0x1be)]())await sendText(_0x34fc02,_0x207102,_0x4636c7[_0xf4c636(0x1be)]());return;}if(_0x5db7cc===_0xf4c636(0x241)||_0x5db7cc===_0xf4c636(0x241)+'s'||_0x5db7cc==='gdelf'){const _0x2899cb=(_0x2700f7||'')[_0xf4c636(0x1eb)](/\r?\n/)[_0xf4c636(0x2e1)](_0x61435c=>_0x61435c[_0xf4c636(0x1be)]());let _0x305f79=null;if(_0x2899cb[_0xf4c636(0x20a)]>-0x1*0x2555+-0xdf*0x2b+0x4acb&&!_0x2899cb[0x1dfe+-0xdf0+-0x100d][_0xf4c636(0x157)+'e']()[_0xf4c636(0x2a9)]('gp'))_0x305f79=_0x2899cb[0x69d+0x1*-0x482+0x2*-0x10d];else{const _0x1768b1=(_0x413888||_0x2700f7)[_0xf4c636(0x1be)]()[_0xf4c636(0x1eb)](/\s+/);_0x1768b1[_0xf4c636(0x225)](),_0x305f79=_0x1768b1['join']('\x20')[_0xf4c636(0x1be)]();}const _0x44bb67=_0x2899cb[_0xf4c636(0x220)](-0x1*0x14a4+0x206a+-0x83*0x17)[_0xf4c636(0x1c6)](_0x537660=>/^gp[:\s]/i[_0xf4c636(0x181)](_0x537660));let _0x5f2bbf=_0x44bb67?_0x44bb67[_0xf4c636(0x291)](/^gp[:\s]+/i,'')[_0xf4c636(0x1be)]():null;const _0x49a31c=(_0x305f79||'')[_0xf4c636(0x1eb)](',')[_0xf4c636(0x2e1)](_0x549f0f=>_0x549f0f[_0xf4c636(0x1be)]())[_0xf4c636(0x2d5)](Boolean);if(!_0x49a31c[_0xf4c636(0x20a)]){await sendText(_0x34fc02,_0x207102,_0xf4c636(0x173)+'lfilter\x20tr'+_0xf4c636(0x183)+_0xf4c636(0x293)+_0xf4c636(0x17f)+_0xf4c636(0x2b7)+_0xf4c636(0x1ab)+_0xf4c636(0x296)+_0xf4c636(0x1a0)+_0xf4c636(0x2b8)+_0xf4c636(0x16b)+_0xf4c636(0x2c3));return;}if(_0x49a31c[_0xf4c636(0x20a)]===0x1617+0xf84+-0x259a&&_0x49a31c[-0x66*0x43+-0x1c3a+-0xa*-0x57e][_0xf4c636(0x157)+'e']()==='all')try{const _0x302990=await db[_0xf4c636(0x12e)](_0xf4c636(0x2d7)+_0xf4c636(0x1b8)),_0x5cd213=_0x302990?.['changes']||0x2*0xf2+-0x19ad+0x17c9;try{automatonCache[_0xf4c636(0x1aa)]();}catch(_0x48b30c){}await sendText(_0x34fc02,_0x207102,_0xf4c636(0x2c9)+_0xf4c636(0x282)+_0xf4c636(0x16a)+'ase.\x20Rows\x20'+_0xf4c636(0x160)+_0x5cd213);return;}catch(_0x1ca0c5){await sendText(_0x34fc02,_0x207102,_0xf4c636(0x24b)+'delete\x20all'+_0xf4c636(0x264)+(_0x1ca0c5?.['message']||_0x1ca0c5));return;}if(_0x5f2bbf){let _0x1d5668=[];if(_0x5f2bbf[_0xf4c636(0x157)+'e']()===_0xf4c636(0x295))_0x1d5668=await _0x3f4843[_0xf4c636(0x2d3)+'ids']();else{const _0x5e577c=await _0x3f4843[_0xf4c636(0x151)+'e'](_0x5f2bbf);if(_0x5e577c)_0x1d5668=[_0x5e577c];else{if(_0x5f2bbf[_0xf4c636(0x274)]('@'))_0x1d5668=[_0x3f4843[_0xf4c636(0x1f2)+'oUserJid'](_0x5f2bbf)];else{await sendText(_0x34fc02,_0x207102,_0xf4c636(0x1ce)+_0xf4c636(0x1e5)+':\x20\x22'+_0x5f2bbf+'\x22.');return;}}}let _0x3784ac=-0x691+-0xcf3+0x1384;for(const _0x35334d of uniqArray(_0x1d5668)){const _0x8f196a=await deleteFilters(_0x35334d,_0x49a31c);_0x3784ac+=_0x8f196a;}await sendText(_0x34fc02,_0x207102,_0xf4c636(0x207)+_0x3784ac+('\x20filters\x20f'+_0xf4c636(0x262))+(_0x1d5668[_0xf4c636(0x20a)]===0x2081*-0x1+0x1edf+-0x1a3*-0x1?_0x1d5668[0x24e9+0x1a*-0xb+-0x23cb]:_0xf4c636(0x2bd)+'argets'));return;}else{let _0x3366a0=0x1b6b+-0xed*-0x1b+-0x2*0x1a35;for(const _0x2f59fb of _0x18831f){const _0xb35d08=await deleteFilters(_0x2f59fb,_0x49a31c);_0x3366a0+=_0xb35d08;}await sendText(_0x34fc02,_0x207102,_0xf4c636(0x207)+_0x3366a0+(_0xf4c636(0x1ad)+_0xf4c636(0x22b)+_0xf4c636(0x1a3)+'fault\x20conn'+_0xf4c636(0x201)+'\x20')+_0x18831f['join'](',\x20'));return;}}return;}}if(_0x5856b6){if(_0x34fc02[_0xf4c636(0x2aa)][_0xf4c636(0x199)])return;const _0x49230b=_0x207102,_0x1db7a4=getMessageText(_0x34fc02);if(!_0x1db7a4)return;const _0x50c0bd=String(_0x1db7a4||''),_0x36b462=await db[_0xf4c636(0x295)](_0xf4c636(0x289)+_0xf4c636(0x28e)+_0xf4c636(0x27e)+'ilters\x20WHE'+_0xf4c636(0x1ff)+_0xf4c636(0x2c7)+')',[_0x49230b,'*']);if(!_0x36b462||_0x36b462[_0xf4c636(0x20a)]===-0x413*-0x7+0xee9+0x15b7*-0x2)return;const _0x2917a3=(_0x36b462||[])['map'](_0x33b715=>String(_0x33b715[_0xf4c636(0x285)]||'')[_0xf4c636(0x1be)]())[_0xf4c636(0x2d5)](Boolean),_0x16a63d=[],_0x35433c=[],_0x4ecad3=[];for(const _0x3906ad of _0x2917a3){const _0x262306=String(_0x3906ad)['trim']()[_0xf4c636(0x157)+'e']();if(_0x262306[_0xf4c636(0x2a9)](_0xf4c636(0x288))){_0x4ecad3[_0xf4c636(0x130)](_0x3906ad[_0xf4c636(0x28f)](0x167b+0x9b*0x30+-0x3385));continue;}if(_0x3906ad[_0xf4c636(0x274)]('*')){_0x35433c[_0xf4c636(0x130)](_0x3906ad);continue;}_0x16a63d['push'](_0x3906ad);}const _0x34389f=new Set(),_0x5759c6=getConfig()||{},_0x17bcd7=_0x5759c6[_0xf4c636(0x2ab)]&&typeof _0x5759c6[_0xf4c636(0x2ab)]===_0xf4c636(0x2c6)?_0x5759c6['FILTERS']:{},_0x25cb2d=(_0x17bcd7[_0xf4c636(0x16e)+'ODE']||'roundrobin')[_0xf4c636(0x157)+'e']();let _0x212861=null;if(_0x16a63d['length']>-0x11*0x18d+0x1*-0xc19+0x2676)try{const _0x1d4fc0=await getAutomatonForChat(_0x49230b);if(_0x1d4fc0&&_0x1d4fc0['ac']&&_0x1d4fc0[_0xf4c636(0x193)]&&_0x1d4fc0['keywords'][_0xf4c636(0x20a)]){const _0x13e0de=_0x50c0bd[_0xf4c636(0x157)+'e'](),_0x2e5e5d=_0x1d4fc0['ac'][_0xf4c636(0x1b0)](_0x13e0de);for(const _0x19f200 of _0x2e5e5d){const _0x30780f=_0x19f200[_0xf4c636(0x2a4)],_0x49e06f=_0x19f200[_0xf4c636(0x271)],_0x164a24=_0x49e06f+_0x30780f[_0xf4c636(0x20a)],_0x46681f=_0x49e06f===0x5e*0x56+-0x1c18+-0x37c||!/\w/['test'](_0x13e0de[_0x49e06f-(0x1*-0x907+-0x2698+0x7f0*0x6)]),_0x3d667f=_0x164a24===_0x13e0de[_0xf4c636(0x20a)]||!/\w/[_0xf4c636(0x181)](_0x13e0de[_0x164a24]);if(_0x46681f&&_0x3d667f){const _0x1ed1f8=_0x1d4fc0['lowerToOri'+'g'][_0xf4c636(0x24d)](_0x30780f)||null;if(_0x1ed1f8){_0x212861=_0x1ed1f8;break;}}}}else for(const _0x5d5451 of _0x16a63d){const _0x30c437=new RegExp('\x5cb'+escapeRegex(String(_0x5d5451))+'\x5cb','i');if(_0x30c437[_0xf4c636(0x181)](_0x50c0bd)){_0x212861=_0x5d5451;break;}}}catch(_0x1c748b){warn(_0xf4c636(0x246)+_0xf4c636(0x1e6)+'k\x20matching'+_0xf4c636(0x22f)+(_0x1c748b?.[_0xf4c636(0x1ae)]||_0x1c748b));for(const _0xbc0980 of _0x16a63d){try{const _0x59406f=new RegExp('\x5cb'+escapeRegex(String(_0xbc0980))+'\x5cb','i');if(_0x59406f[_0xf4c636(0x181)](_0x50c0bd)){_0x212861=_0xbc0980;break;}}catch(_0x3cb955){}}}if(!_0x212861&&_0x35433c[_0xf4c636(0x20a)]>0xa1c+-0x2*-0x1a+-0x42*0x28)for(const _0xb85c38 of _0x35433c){try{const _0xe5f578=new RegExp(wildcardToRegexPattern(_0xb85c38),'i');if(_0xe5f578[_0xf4c636(0x181)](_0x50c0bd)){_0x212861=_0xb85c38;break;}}catch(_0x32eb41){if(_0x50c0bd[_0xf4c636(0x157)+'e']()[_0xf4c636(0x274)](_0xb85c38[_0xf4c636(0x291)](/\*/g,'')[_0xf4c636(0x157)+'e']())){_0x212861=_0xb85c38;break;}}}if(!_0x212861&&_0x4ecad3[_0xf4c636(0x20a)]>-0xff6+-0x1880*-0x1+-0x2*0x445)for(const _0x9884c5 of _0x4ecad3){try{const _0x39d4f8=new RegExp(_0x9884c5,'i');if(_0x39d4f8['test'](_0x50c0bd)){_0x212861=_0xf4c636(0x288)+_0x9884c5;break;}}catch(_0x54b217){warn(_0xf4c636(0x246)+_0xf4c636(0x174)+_0xf4c636(0x12c)+_0xf4c636(0x27a)+_0x49230b+_0xf4c636(0x18d)+_0x9884c5+_0xf4c636(0x2c0)+(_0x54b217?.[_0xf4c636(0x1ae)]||_0x54b217));}}if(_0x212861){let _0x38ead4=await pickResponseAndAdvance(_0x49230b,_0x212861,_0x25cb2d);if(!_0x38ead4)_0x38ead4=await pickResponseAndAdvance('*',_0x212861,_0x25cb2d);if(!_0x38ead4)return;if(_0x34389f[_0xf4c636(0x1dc)](_0x38ead4))return;await sendText(_0x34fc02,_0x49230b,_0x38ead4),_0x34389f[_0xf4c636(0x240)](_0x38ead4);}}}catch(_0x3d5cf2){error(_0x3d5cf2,_0xf4c636(0x246)+_0xf4c636(0x14d)+_0xf4c636(0x222)+(_0x3d5cf2?.[_0xf4c636(0x1ae)]||_0x3d5cf2));}}export async function cleanup(){const _0xaf7530=_0x1b9b42;for(const _0x5bd3a5 of processedMessageKeys[_0xaf7530(0x196)]())try{clearTimeout(_0x5bd3a5);}catch(_0x20aaaf){}processedMessageKeys[_0xaf7530(0x1aa)](),automatonCache[_0xaf7530(0x1aa)](),botRef=null,sendApi=null,info(_0xaf7530(0x246)+_0xaf7530(0x2ba));}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};