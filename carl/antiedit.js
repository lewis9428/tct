const _0x64eb0f=_0x29d4;(function(_0x348d4c,_0x4501e0){const _0x5ea3e1=_0x29d4,_0x4ff708=_0x348d4c();while(!![]){try{const _0x24c5d5=-parseInt(_0x5ea3e1(0x1d4))/(-0x13*0x98+-0x1353+0x28d*0xc)*(-parseInt(_0x5ea3e1(0x1d7))/(-0x64d*-0x3+-0x16a1+0x3bc))+-parseInt(_0x5ea3e1(0x1f4))/(-0xbed+-0xe7b+-0x1*-0x1a6b)*(-parseInt(_0x5ea3e1(0x255))/(-0x213b+0x1e6c+0x1*0x2d3))+-parseInt(_0x5ea3e1(0x20a))/(-0x665*0x1+0x98*0x31+-0x16ae)+parseInt(_0x5ea3e1(0x25d))/(0x1*0x1441+0x2*-0xfd3+0x1*0xb6b)*(parseInt(_0x5ea3e1(0x1e8))/(0xe63+-0x485*0x7+-0x1147*-0x1))+parseInt(_0x5ea3e1(0x204))/(-0x11a7*0x1+0x25f*0x1+-0x50*-0x31)+-parseInt(_0x5ea3e1(0x232))/(-0x1996+-0x11a*0x1+0x1ab9)*(parseInt(_0x5ea3e1(0x234))/(0xf2*0xd+0x26dd+0x5*-0xa39))+-parseInt(_0x5ea3e1(0x217))/(-0x1489+-0x13d3+-0x2867*-0x1)*(-parseInt(_0x5ea3e1(0x239))/(-0x13+-0x1ebf+-0xf6f*-0x2));if(_0x24c5d5===_0x4501e0)break;else _0x4ff708['push'](_0x4ff708['shift']());}catch(_0x416441){_0x4ff708['push'](_0x4ff708['shift']());}}}(_0x5bde,0xe303c+0x42a9+-0x1b7*0x293));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getBotJid}from'../utils/bot-state.js';import{userjid}from'../utils/sudo.js';import{getSenderForMsg}from'./sudonumber.js';export const name=_0x64eb0f(0x1f2)+'r';export const version=_0x64eb0f(0x1cb);export const priority=0x3*-0xc6f+0x253a+0x45;let botInstance=null,cleanupInterval=null;const FALLBACKS={'EDIT_WINDOW_MINUTES':0xf,'CLEANUP_INTERVAL_MS':(-0x29*0x79+-0x1de6+0x1*0x3183)*(-0x234+0x1ce7+0x3*-0x799),'MAX_SEND_RETRIES':0x3,'INITIAL_BACKOFF_MS':0x1f4};let EDIT_WINDOW_MINUTES=FALLBACKS[_0x64eb0f(0x1b3)+'W_MINUTES'],CLEANUP_INTERVAL_MS=FALLBACKS['CLEANUP_IN'+_0x64eb0f(0x21f)],MAX_SEND_RETRIES=FALLBACKS[_0x64eb0f(0x1fe)+'ETRIES'],INITIAL_BACKOFF_MS=FALLBACKS['INITIAL_BA'+_0x64eb0f(0x223)];async function ensureTable(){const _0x27ebe5=_0x64eb0f;await db[_0x27ebe5(0x1b7)](_0x27ebe5(0x24a)+'LE\x20IF\x20NOT\x20'+_0x27ebe5(0x23b)+_0x27ebe5(0x1e5)+_0x27ebe5(0x1e1)+_0x27ebe5(0x1b4)+_0x27ebe5(0x1d9)+_0x27ebe5(0x1e4)+_0x27ebe5(0x1ec)+_0x27ebe5(0x207)+_0x27ebe5(0x1b9)+'T,\x0a\x20\x20\x20\x20tex'+_0x27ebe5(0x257)+_0x27ebe5(0x25a)+'\x20TEXT,\x0a\x20\x20\x20'+_0x27ebe5(0x1be)+'rom_edit\x20I'+_0x27ebe5(0x227)+'AULT\x200,\x0a\x20\x20'+_0x27ebe5(0x1fd)+'\x20INTEGER\x0a\x20'+'\x20);');}function nowSeconds(){const _0xce16dc=_0x64eb0f;return Math['floor'](Date[_0xce16dc(0x220)]()/(-0x5f*-0x4c+0x19fd+-0x3249));}async function insertEditVersion(_0x55d607,_0x431e75,_0x14650e,_0x3d4ada,_0x7ba4ee=-0x9fd+0xb7b+-0x3*0x7f){const _0x54f3cf=_0x64eb0f,_0x44852e=nowSeconds();await db[_0x54f3cf(0x208)](_0x54f3cf(0x1d8)+'O\x20edits\x20(m'+_0x54f3cf(0x24d)+_0x54f3cf(0x1f3)+'t,\x20raw_jso'+'n,\x20created'+_0x54f3cf(0x1df)+_0x54f3cf(0x26d)+_0x54f3cf(0x1f5)+_0x54f3cf(0x1bd)+_0x54f3cf(0x252)+'?)',[_0x55d607||null,_0x431e75||null,_0x14650e||'',_0x3d4ada||null,_0x7ba4ee?0x3d*0x6b+-0xca7*0x3+-0xc77*-0x1:-0x1736*-0x1+0x1*-0x87e+-0x274*0x6,_0x44852e]);}async function fetchLatestEditForMsg(_0x5ab022){const _0x3fac5d=_0x64eb0f;if(!_0x5ab022)return null;const _0x467f78=await db[_0x3fac5d(0x1dc)](_0x3fac5d(0x1fa)+_0x3fac5d(0x1cc)+_0x3fac5d(0x1e9)+'ext,\x20raw_j'+_0x3fac5d(0x1db)+'ed_from_ed'+_0x3fac5d(0x202)+'at\x20FROM\x20ed'+'its\x20WHERE\x20'+'msg_id\x20=\x20?'+_0x3fac5d(0x1fc)+_0x3fac5d(0x1ff)+'ESC\x20LIMIT\x20'+'1',[_0x5ab022]);return _0x467f78||null;}async function countEditsForMsg(_0x56e224){const _0x2907b8=_0x64eb0f;if(!_0x56e224)return 0x1*-0x13bd+-0x242e+0x37eb;const _0x45cf30=await db[_0x2907b8(0x1dc)]('SELECT\x20COU'+_0x2907b8(0x211)+_0x2907b8(0x22a)+_0x2907b8(0x260)+_0x2907b8(0x228)+'ND\x20created'+_0x2907b8(0x1df)+_0x2907b8(0x267),[_0x56e224]);return _0x45cf30&&typeof _0x45cf30['c']===_0x2907b8(0x26b)?_0x45cf30['c']:-0x1c*-0xb9+-0x1f91*-0x1+-0x33cd;}async function cleanupOldEdits(){const _0x2598e3=_0x64eb0f,_0x2b4539=nowSeconds()-Number(EDIT_WINDOW_MINUTES||FALLBACKS[_0x2598e3(0x1b3)+_0x2598e3(0x1c1)])*(0x15c2+-0x2*-0xa88+0x719*-0x6),_0x106bfa=await db[_0x2598e3(0x1d2)](_0x2598e3(0x22b)+_0x2598e3(0x251)+_0x2598e3(0x1fb)+_0x2598e3(0x26c)+_0x2598e3(0x215)+_0x2598e3(0x218)+'\x20<\x20?',[_0x2b4539]);if(!_0x106bfa||_0x106bfa[_0x2598e3(0x1c3)]===-0x78a*-0x5+0xd11+0x71*-0x73)return;const _0x1cb390=_0x106bfa['map'](_0x4a71c2=>_0x4a71c2['id']),_0x43a502=0x39*-0x33+0x2601+-0x19de;for(let _0xdcb73=0x9e*0x11+-0x2087+0x1609;_0xdcb73<_0x1cb390['length'];_0xdcb73+=_0x43a502){const _0x3714b8=_0x1cb390[_0x2598e3(0x1ee)](_0xdcb73,_0xdcb73+_0x43a502),_0x491b06=_0x3714b8['map'](()=>'?')[_0x2598e3(0x20d)](',');await db['run']('DELETE\x20FRO'+'M\x20edits\x20WH'+_0x2598e3(0x21d)+'('+_0x491b06+')',_0x3714b8);}info('[EditLogge'+_0x2598e3(0x1cd)+'\x20'+_0x106bfa[_0x2598e3(0x1c3)]+(_0x2598e3(0x1e6)+_0x2598e3(0x250)));}function _0x5bde(){const _0x1d950c=['msgId','filter','message\x20no','ge.edit','includes','conversati','isArray','\x20target\x20av','ber','message.ed','newText','CREATE\x20TAB','ze\x20require','id\x27','sg_id,\x20cha','ssageId','subject','rows','FROM\x20edits','\x20?,\x20?,\x20?,\x20','participan','r]\x20initial','396PkeALz','ttonId','t\x20TEXT,\x0a\x20\x20','CLEANUP_IN','selectedRo','\x20\x20raw_json','listRespon','field','632856JgvdDl','new_text','age\x20missin','s\x20WHERE\x20ms','nd.','push','ener','üë§\x20*User:*\x20','sender_num','extendedTe','\x20=\x201','üí¨\x20*Chat:*\x20','caption','dit\x20listen','number','ed_at\x20IS\x20N',',\x20saved_at','replace','EDIT_WINDO','PRIMARY\x20KE','lete_prefs','singleSele','exec','r\x20initiali','at_jid\x20TEX','üîÅ\x20*Origina','botInstanc','‚úèÔ∏è\x20*Message','UES\x20(?,\x20?,','\x20created_f','indexOf','seMessage','W_MINUTES','r]\x20DB\x20init','length','jid','d\x20to\x20messa','e.sendMess','ponseMessa','ctReply','catch','\x20error:\x20','1.7.1','\x20msg_id,\x20c','r]\x20cleaned','sender_jid','times','trim','r]\x20failed\x20','all','sendMessag','34grGshV','old_messag','old_text','42274prhjLd','INSERT\x20INT','Y\x20AUTOINCR','value','son,\x20creat','get','oldText','r]\x20no\x20send','_from_edit','sender_pn','d\x20INTEGER\x20','wId','rate','EMENT,\x0a\x20\x20\x20','ts\x20(\x0a\x20\x20\x20\x20i','\x20old\x20edit\x20','ue\x20FROM\x20de','42PGQtVP','hat_jid,\x20t','r]\x20send\x20at','key','\x20msg_id\x20TE','remoteJidA','slice','*\x0a```\x0a','ailable;\x20d','(unknown)','edit-logge','t_jid,\x20tex','927qkOJLS',')\x0a\x20\x20\x20\x20\x20VAL','text','endsWith','buttonsRes','[EditLogge','SELECT\x20id,','\x20WHERE\x20sav','\x20ORDER\x20BY\x20','\x20\x20saved_at','MAX_SEND_R','saved_at\x20D','\x20(edited\x20','newMessage','it,\x20saved_','r]\x20cleanup','2410368KoRHOl','üÜî\x20*Message','to\x20attach\x20','XT,\x0a\x20\x20\x20\x20ch','run','sock','6377605mgjyDi','new_messag','xtMessage','join','t_pn','object','msg_id','NT(*)\x20AS\x20c','chatId','originalMe','message','OT\x20NULL\x20AN','=\x27target_j','374Vnnprk','D\x20saved_at','imageMessa','function','tempt\x20','find','ERE\x20id\x20IN\x20','‚úèÔ∏è\x20*Edited\x20','TERVAL_MS','now','t\x20in\x20cache','groupMetad','CKOFF_MS','SELECT\x20val','@g.us','removeList','NTEGER\x20DEF','g_id\x20=\x20?\x20A','time','\x20FROM\x20edit','SELECT\x20id\x20','OldEditsSa','status','\x20up','\x20ID:*\x20','\x0a```','string','18UMTKDI','l\x20Message:','3174890KvYfMi','videoMessa','\x20failed:\x20','selectedBu','To:*\x0a```\x0a','312252TsFwMH','fe\x20error:\x20','EXISTS\x20edi','ized','ata','r\x20error:\x20'];_0x5bde=function(){return _0x1d950c;};return _0x5bde();}async function cleanupOldEditsSafe(){const _0xe5fdbe=_0x64eb0f;try{await cleanupOldEdits();}catch(_0x4c1449){warn(_0xe5fdbe(0x1f9)+'r]\x20cleanup'+_0xe5fdbe(0x22c)+_0xe5fdbe(0x23a)+(_0x4c1449?.[_0xe5fdbe(0x214)]||_0x4c1449));}}function extractText(_0x10beae,_0x35fbe4=!![]){const _0x423b39=_0x64eb0f;if(!_0x10beae)return'';if(_0x35fbe4){if(typeof _0x10beae['newText']===_0x423b39(0x231))return _0x10beae[_0x423b39(0x249)];if(typeof _0x10beae[_0x423b39(0x25e)]===_0x423b39(0x231))return _0x10beae[_0x423b39(0x25e)];}else{if(typeof _0x10beae[_0x423b39(0x1dd)]===_0x423b39(0x231))return _0x10beae['oldText'];if(typeof _0x10beae['old_text']===_0x423b39(0x231))return _0x10beae[_0x423b39(0x1d6)];}const _0x32ae13=_0x35fbe4?_0x10beae[_0x423b39(0x201)]||_0x10beae['message']||_0x10beae[_0x423b39(0x20b)+'e']:_0x10beae['oldMessage']||_0x10beae['message']||_0x10beae[_0x423b39(0x1d5)+'e'];if(_0x32ae13&&typeof _0x32ae13===_0x423b39(0x20f)){if(_0x32ae13[_0x423b39(0x244)+'on'])return _0x32ae13[_0x423b39(0x244)+'on'];if(_0x32ae13['extendedTe'+'xtMessage']?.['text'])return _0x32ae13[_0x423b39(0x266)+_0x423b39(0x20c)]['text'];if(_0x32ae13[_0x423b39(0x219)+'ge']?.['caption'])return _0x32ae13[_0x423b39(0x219)+'ge'][_0x423b39(0x269)];if(_0x32ae13[_0x423b39(0x235)+'ge']?.['caption'])return _0x32ae13[_0x423b39(0x235)+'ge']['caption'];if(_0x32ae13[_0x423b39(0x1f8)+_0x423b39(0x1c7)+'ge']?.[_0x423b39(0x237)+_0x423b39(0x256)])return _0x32ae13['buttonsRes'+_0x423b39(0x1c7)+'ge']['selectedBu'+_0x423b39(0x256)];if(_0x32ae13[_0x423b39(0x25b)+_0x423b39(0x1c0)]?.[_0x423b39(0x1b6)+_0x423b39(0x1c8)]?.['selectedRo'+_0x423b39(0x1e2)])return _0x32ae13['listRespon'+_0x423b39(0x1c0)][_0x423b39(0x1b6)+_0x423b39(0x1c8)][_0x423b39(0x259)+_0x423b39(0x1e2)];}if(typeof _0x10beae['text']==='string')return _0x10beae[_0x423b39(0x1f6)];return'';}function numberFromRawJid(_0xe4b663){const _0x42c741=_0x64eb0f;if(!_0xe4b663)return'';try{const _0x547e34=String(_0xe4b663),_0x42188c=_0x547e34[_0x42c741(0x1bf)]('@'),_0x346534=_0x42188c===-(0x2*0xdfe+-0x4b1+0xba5*-0x2)?_0x547e34:_0x547e34['slice'](-0xb49*-0x3+-0x57*0x2f+-0x11e2,_0x42188c),_0x9ce4e7=_0x346534[_0x42c741(0x1bf)](':'),_0x3dde41=_0x9ce4e7===-(0x124e+0x167*-0x10+-0x1*-0x423)?_0x346534:_0x346534[_0x42c741(0x1ee)](-0x1659+-0x250+-0x18a9*-0x1,_0x9ce4e7);return _0x3dde41[_0x42c741(0x1b2)](/^\+/,'');}catch{return'';}}function isGroupJid(_0x25e279){const _0x2e8788=_0x64eb0f;return typeof _0x25e279==='string'&&_0x25e279[_0x2e8788(0x1f7)](_0x2e8788(0x225));}function _0x29d4(_0x562eb1,_0xd135a4){const _0x47794f=_0x5bde();return _0x29d4=function(_0x593b36,_0x229788){_0x593b36=_0x593b36-(-0x1*-0xeda+0x7d6+-0x14fe);let _0x5d2015=_0x47794f[_0x593b36];return _0x5d2015;},_0x29d4(_0x562eb1,_0xd135a4);}async function sendWithRetry(_0x202e81,_0x4c333f){const _0xa6a817=_0x64eb0f,_0xbc39aa=Number(MAX_SEND_RETRIES||FALLBACKS[_0xa6a817(0x1fe)+'ETRIES']);let _0x4e06fc=0x1d4b+0xb64*-0x1+-0x1*0x11e7,_0x599e71=Number(INITIAL_BACKOFF_MS||FALLBACKS['INITIAL_BA'+_0xa6a817(0x223)]);const _0x4bc4a2=[];if(_0x4c333f)_0x4bc4a2[_0xa6a817(0x262)](_0x4c333f);try{const _0x3f6e1d=await db['get'](_0xa6a817(0x224)+_0xa6a817(0x1e7)+_0xa6a817(0x1b5)+'\x20WHERE\x20key'+_0xa6a817(0x216)+_0xa6a817(0x24c));if(_0x3f6e1d&&_0x3f6e1d[_0xa6a817(0x1da)])_0x4bc4a2[_0xa6a817(0x262)](String(_0x3f6e1d[_0xa6a817(0x1da)]));}catch{}const _0x3b8589=getBotJid();if(_0x3b8589)_0x4bc4a2[_0xa6a817(0x262)](_0x3b8589);const _0x358104=Array['from'](new Set(_0x4bc4a2[_0xa6a817(0x240)](Boolean)));if(_0x358104[_0xa6a817(0x1c3)]===-0x1c04+0x1554+0x358*0x2)return warn(_0xa6a817(0x1f9)+_0xa6a817(0x1de)+_0xa6a817(0x246)+_0xa6a817(0x1f0)+'ropping\x20se'+_0xa6a817(0x261)),![];const _0x3ffe56=_0x358104[0x1a6*0x10+-0xcb5*-0x3+0x4f*-0xd1];while(_0x4e06fc<_0xbc39aa){_0x4e06fc++;try{if(!botInstance||typeof botInstance['sendMessag'+'e']!==_0xa6a817(0x21a))throw new Error(_0xa6a817(0x1bb)+_0xa6a817(0x1c6)+_0xa6a817(0x25f)+'g');return await botInstance[_0xa6a817(0x1d3)+'e'](_0x3ffe56,_0x202e81),!![];}catch(_0x3f48de){warn(_0xa6a817(0x1f9)+_0xa6a817(0x1ea)+_0xa6a817(0x21b)+_0x4e06fc+_0xa6a817(0x236)+(_0x3f48de?.[_0xa6a817(0x214)]||_0x3f48de));const _0x405fbd=String(_0x3f48de?.[_0xa6a817(0x214)]||'')['toLowerCas'+'e']()[_0xa6a817(0x243)](_0xa6a817(0x1e3))||_0x3f48de?.[_0xa6a817(0x22d)]===-0x22*0x114+0x4f6*0x5+0xd87;if(_0x4e06fc>=_0xbc39aa||!_0x405fbd)return![];await new Promise(_0x3f7b6d=>setTimeout(_0x3f7b6d,_0x599e71)),_0x599e71*=0x2b9*-0xd+0x117e+-0x5*-0x395;}}return![];}async function buildAndSendLog({chatJid:_0x4299ad,msgId:_0x18fa81,originalText:_0x1c655c,newText:_0x48e3cc,senderNumber:_0x599812,editCount:_0x2ad622}){const _0x625649=_0x64eb0f;let _0xa6d636=null;if(isGroupJid(_0x4299ad)&&botInstance?.[_0x625649(0x209)]?.['groupMetad'+_0x625649(0x23d)])try{const _0x28e43b=await botInstance[_0x625649(0x209)][_0x625649(0x222)+'ata'](_0x4299ad);if(_0x28e43b?.[_0x625649(0x24f)])_0xa6d636=_0x28e43b[_0x625649(0x24f)];}catch{}const _0x4ca218=_0x625649(0x1bc)+'\x20Edited*\x0a\x0a',_0x3762bd=_0x625649(0x264)+'@'+(_0x599812||''),_0x21c94a=_0x625649(0x268)+(_0xa6d636?_0xa6d636+'\x20('+_0x4299ad+')':_0x4299ad||_0x625649(0x1f1)),_0x161083=_0x625649(0x205)+_0x625649(0x22f)+(_0x18fa81||_0x625649(0x1f1)),_0x47fb40=typeof _0x2ad622==='number'&&_0x2ad622>0x602+0x3*0x8d1+-0x2075?_0x625649(0x200)+_0x2ad622+'\x20'+(_0x2ad622===0x3*0x697+-0x1*-0x1f16+-0x17*0x236?_0x625649(0x229):_0x625649(0x1cf))+')':'',_0x17d2ab=_0x625649(0x1ba)+_0x625649(0x233)+_0x47fb40+_0x625649(0x1ef)+(_0x1c655c||'[Original\x20'+_0x625649(0x241)+_0x625649(0x221)+']')+_0x625649(0x230),_0x182562=_0x625649(0x21e)+_0x625649(0x238)+(_0x48e3cc||'')+_0x625649(0x230),_0xf07fd2=[_0x4ca218,_0x3762bd,_0x21c94a,_0x161083,'',_0x17d2ab,'',_0x182562][_0x625649(0x20d)]('\x0a');return await sendWithRetry({'text':_0xf07fd2},null);}async function handleMessageEdit(_0xe6d9ca){const _0x3676a5=_0x64eb0f;try{if(!_0xe6d9ca)return;let _0x4b90aa=[],_0x2c05ed=null;try{const _0xa31585=userjid(_0xe6d9ca);_0x4b90aa=_0xa31585?.['findings']||[],_0x2c05ed=_0xa31585?.['id']||null;}catch(_0x32ca93){}let _0x902f51=_0x2c05ed||_0xe6d9ca[_0x3676a5(0x213)+_0x3676a5(0x24e)]||_0xe6d9ca[_0x3676a5(0x23f)]||_0xe6d9ca[_0x3676a5(0x210)]||_0xe6d9ca['id']||_0xe6d9ca[_0x3676a5(0x214)]?.['key']?.['id']||null,_0x16a479=_0xe6d9ca[_0x3676a5(0x212)]||_0xe6d9ca['chat']||_0xe6d9ca[_0x3676a5(0x214)]?.[_0x3676a5(0x1eb)]?.['remoteJid']||null,_0x525c61='';try{if(_0x902f51){const _0x497424=await getSenderForMsg(_0x902f51);_0x497424&&(_0x525c61=_0x497424['sender_num'+_0x3676a5(0x247)]&&String(_0x497424['sender_num'+_0x3676a5(0x247)])['trim']()?String(_0x497424[_0x3676a5(0x265)+_0x3676a5(0x247)])[_0x3676a5(0x1d0)]():numberFromRawJid(_0x497424[_0x3676a5(0x1ce)]));}}catch(_0x47feb6){}if(!_0x525c61&&Array[_0x3676a5(0x245)](_0x4b90aa)&&_0x4b90aa[_0x3676a5(0x1c3)]){const _0x5d448a=[_0x3676a5(0x1ed)+'lt',_0x3676a5(0x1e0),_0x3676a5(0x253)+'tAlt','participan'+_0x3676a5(0x20e)];let _0x56457f=null;for(const _0x16e0bb of _0x5d448a){_0x56457f=_0x4b90aa[_0x3676a5(0x21c)](_0x27dcdd=>_0x27dcdd[_0x3676a5(0x25c)]===_0x16e0bb&&typeof _0x27dcdd[_0x3676a5(0x1c4)]===_0x3676a5(0x231));if(_0x56457f)break;}if(!_0x56457f)_0x56457f=_0x4b90aa[0x2094+0x43*-0x4b+-0xcf3];_0x56457f&&_0x56457f[_0x3676a5(0x1c4)]&&(_0x525c61=numberFromRawJid(_0x56457f[_0x3676a5(0x1c4)]));}const _0x4c2e4c=extractText(_0xe6d9ca,!![])||'',_0x3592f4=_0x902f51?await fetchLatestEditForMsg(_0x902f51):null,_0x1cdb33=_0x3592f4&&typeof _0x3592f4[_0x3676a5(0x1f6)]==='string'&&_0x3592f4[_0x3676a5(0x1f6)][_0x3676a5(0x1c3)]?_0x3592f4[_0x3676a5(0x1f6)]:extractText(_0xe6d9ca,![])||'[Original\x20'+'message\x20no'+_0x3676a5(0x221)+']',_0x28034e=_0x902f51?await countEditsForMsg(_0x902f51):0x91*0x6+-0x1*0x1cf3+-0x198d*-0x1,_0xce82a2=await buildAndSendLog({'chatJid':_0x16a479,'msgId':_0x902f51,'originalText':_0x1cdb33,'newText':_0x4c2e4c,'senderNumber':_0x525c61,'editCount':_0x28034e}),_0x5a8622=((()=>{try{return JSON['stringify'](_0xe6d9ca)['slice'](-0x21f9+-0x484+-0x267d*-0x1,-0x1*0x2e18c+-0x27625+0x6de51);}catch{return null;}})());return await insertEditVersion(_0x902f51,_0x16a479,_0x4c2e4c,_0x5a8622,0x342+0x22ff+-0x2640),_0xce82a2;}catch(_0xe601e){warn(_0x3676a5(0x1f9)+'r]\x20unexpec'+'ted\x20handle'+_0x3676a5(0x23e)+(_0xe601e?.[_0x3676a5(0x214)]||_0xe601e));}}export function initialize(_0x37ceb9){const _0x32576e=_0x64eb0f;if(!_0x37ceb9)throw new Error(_0x32576e(0x1f2)+_0x32576e(0x1b8)+_0x32576e(0x24b)+'s\x20bot\x20arg');botInstance=_0x37ceb9,ensureTable()[_0x32576e(0x1c9)](_0x334e13=>{const _0x5a4bee=_0x32576e;error(_0x334e13,'[EditLogge'+_0x5a4bee(0x1c2)+'\x20failed:\x20'+(_0x334e13?.[_0x5a4bee(0x214)]||_0x334e13));throw _0x334e13;});try{botInstance['on']('message.ed'+'it',handleMessageEdit),info(_0x32576e(0x1f9)+'r]\x20attache'+_0x32576e(0x1c5)+_0x32576e(0x242));}catch(_0x2d7d19){warn(_0x32576e(0x1f9)+_0x32576e(0x1d1)+_0x32576e(0x206)+'message.ed'+'it:\x20'+(_0x2d7d19?.[_0x32576e(0x214)]||_0x2d7d19));}if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=setInterval(cleanupOldEditsSafe,Number(CLEANUP_INTERVAL_MS||FALLBACKS[_0x32576e(0x258)+_0x32576e(0x21f)])),info('[EditLogge'+_0x32576e(0x254)+_0x32576e(0x23c));}export function cleanup(){const _0x283f45=_0x64eb0f;try{botInstance&&typeof botInstance[_0x283f45(0x226)+_0x283f45(0x263)]===_0x283f45(0x21a)&&(botInstance[_0x283f45(0x226)+'ener'](_0x283f45(0x248)+'it',handleMessageEdit),info(_0x283f45(0x1f9)+'r]\x20removed'+'\x20message.e'+_0x283f45(0x26a)+'er')),cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x24e385){warn('[EditLogge'+_0x283f45(0x203)+_0x283f45(0x1ca)+(_0x24e385?.[_0x283f45(0x214)]||_0x24e385));}finally{botInstance=null,info(_0x283f45(0x1f9)+_0x283f45(0x1cd)+_0x283f45(0x22e));}}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'cleanup':cleanup};