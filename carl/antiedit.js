const _0x5c274c=_0x9f93;function _0x1e70(){const _0x5573a2=['at\x20FROM\x20ed','T,\x0a\x20\x20\x20\x20tex','originalMe','id\x27','map','CLEANUP_IN','EDIT_WINDO','ext,\x20raw_j','newMessage','object','\x20Edited*\x0a\x0a','\x20ID:*\x20','saved_at\x20D','r]\x20unexpec','ze\x20require','find','field','t_pn','8302zEhzsL','16tOxOYU','34233mLoElc','wId','d\x20INTEGER\x20','[EditLogge','d\x20to\x20messa','conversati','singleSele','1682064BlHhpZ','\x20<\x20?','\x20msg_id,\x20c','ctReply','floor','buttonsRes','CKOFF_MS','fe\x20error:\x20','message.ed','times','at_jid\x20TEX','*\x0a```\x0a','\x20);','NT(*)\x20AS\x20c','old_text','value','@g.us','exec','oldText','subject','xtMessage','ESC\x20LIMIT\x20','t_jid,\x20tex','slice','(unknown)','ized','1.7.0','\x20FROM\x20edit','162895zmtwwd','botInstanc','imageMessa','\x20TEXT,\x0a\x20\x20\x20','MAX_SEND_R','\x20failed:\x20','string','9EjPZgy','\x20\x20saved_at','ata','ponseMessa','D\x20saved_at','r]\x20cleaned','listRespon','n,\x20created','selectedBu','tempt\x20','[Original\x20','ener','✏️\x20*Edited\x20','\x20ORDER\x20BY\x20','FROM\x20edits','SELECT\x20id\x20','seMessage','t\x20TEXT,\x0a\x20\x20','time','status','r]\x20DB\x20init','\x20error:\x20','msg_id','it,\x20saved_','OT\x20NULL\x20AN','To:*\x0a```\x0a','son,\x20creat','\x0a```','edit-logge','findings','ND\x20created','=\x27target_j','chatId','run','all','sender_pn','EMENT,\x0a\x20\x20\x20','28OVayem','ssageId','function','trim','ERE\x20id\x20IN\x20','964010UiIiNU','push','text','participan','\x20msg_id\x20TE','jid','SELECT\x20COU','videoMessa','DELETE\x20FRO','msgId','ed_from_ed','\x20?,\x20?,\x20?,\x20','ailable;\x20d','ber','remoteJidA','old_messag','TERVAL_MS','66FVvKOh','INITIAL_BA','✏️\x20*Message','catch','now','sender_num','join','t\x20in\x20cache','💬\x20*Chat:*\x20','🔁\x20*Origina','\x20WHERE\x20key','groupMetad','it:\x20','to\x20attach\x20','NTEGER\x20DEF','selectedRo','SELECT\x20id,','filter','rows','ue\x20FROM\x20de','extendedTe','newText','length','\x20created_f','sender_jid','INSERT\x20INT','W_MINUTES','sendMessag','O\x20edits\x20(m',',\x20saved_at','e.sendMess','ed_at\x20IS\x20N','indexOf','message\x20no','chat','age\x20missin','ETRIES','t,\x20raw_jso','get','number','tAlt','r]\x20send\x20at','\x20\x20raw_json','sg_id,\x20cha','caption','Y\x20AUTOINCR','_from_edit','4336328ZAlsuK','msg_id\x20=\x20?','r\x20initiali','4083321xXpqVN','EXISTS\x20edi','sock','message','🆔\x20*Message','removeList','new_messag','new_text','stringify','ttonId','\x20=\x201','\x20old\x20edit\x20','remoteJid','endsWith'];_0x1e70=function(){return _0x5573a2;};return _0x1e70();}(function(_0x20d51a,_0x119654){const _0x2327b4=_0x9f93,_0x3012b9=_0x20d51a();while(!![]){try{const _0x5660d9=-parseInt(_0x2327b4(0x10f))/(0xdb*0x2+0x1*-0x7ed+-0x8*-0xc7)*(parseInt(_0x2327b4(0xa5))/(-0x27a+-0x3b*0x81+0x2037*0x1))+parseInt(_0x2327b4(0x116))/(-0x22*-0x13+0x1a*-0x68+-0x9*-0xe5)+-parseInt(_0x2327b4(0x10e))/(0x504+0x2407+-0x2907)*(-parseInt(_0x2327b4(0x132))/(-0x1*0x1cd5+-0x321*0xb+-0x3f45*-0x1))+-parseInt(_0x2327b4(0xbb))/(-0x65d+0x4*0x65+-0x1*-0x4cf)*(-parseInt(_0x2327b4(0x10d))/(-0x28d*-0xd+0x2*0x6df+-0x2ee0))+parseInt(_0x2327b4(0xea))/(-0x1*0x1169+0x1a*0x6f+0x62b)*(parseInt(_0x2327b4(0x139))/(0x12c1+-0x2e1*-0x2+-0x187a))+parseInt(_0x2327b4(0xaa))/(0xc7a+0x399+0x1*-0x1009)+-parseInt(_0x2327b4(0xed))/(-0x649*-0x3+-0x1*0xe59+-0x477);if(_0x5660d9===_0x119654)break;else _0x3012b9['push'](_0x3012b9['shift']());}catch(_0x37bb42){_0x3012b9['push'](_0x3012b9['shift']());}}}(_0x1e70,0x6f103+-0x1*0x1bf77+-0x54a1*-0x7));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getBotJid}from'../utils/bot-state.js';import{userjid}from'../utils/sudo.js';import{getSenderForMsg}from'./sudonumber.js';export const name=_0x5c274c(0x9c)+'r';export const version=_0x5c274c(0x130);export const priority=0x1*0x20ae+-0x1a13+-0x3*0x223;let botInstance=null,cleanupInterval=null;const FALLBACKS={'EDIT_WINDOW_MINUTES':0xf,'CLEANUP_INTERVAL_MS':(-0x3*-0xa61+0xae7+-0x14e7*0x2)*(0x3ea*0x1+-0x81+-0x1*-0x7f),'MAX_SEND_RETRIES':0x3,'INITIAL_BACKOFF_MS':0x1f4};let EDIT_WINDOW_MINUTES=FALLBACKS[_0x5c274c(0x101)+_0x5c274c(0xd5)],CLEANUP_INTERVAL_MS=FALLBACKS[_0x5c274c(0x100)+'TERVAL_MS'],MAX_SEND_RETRIES=FALLBACKS[_0x5c274c(0x136)+'ETRIES'],INITIAL_BACKOFF_MS=FALLBACKS[_0x5c274c(0xbc)+_0x5c274c(0x11c)];async function ensureTable(){const _0x191695=_0x5c274c;await db[_0x191695(0x127)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0x191695(0xee)+'ts\x20(\x0a\x20\x20\x20\x20i'+_0x191695(0x111)+'PRIMARY\x20KE'+_0x191695(0xe8)+_0x191695(0xa4)+_0x191695(0xae)+'XT,\x0a\x20\x20\x20\x20ch'+_0x191695(0x120)+_0x191695(0xfc)+_0x191695(0x91)+_0x191695(0xe5)+_0x191695(0x135)+_0x191695(0xd2)+'rom_edit\x20I'+_0x191695(0xc9)+'AULT\x200,\x0a\x20\x20'+_0x191695(0x13a)+'\x20INTEGER\x0a\x20'+_0x191695(0x122));}function _0x9f93(_0x18393c,_0x13a0b6){const _0x14dfdc=_0x1e70();return _0x9f93=function(_0x492b19,_0x579397){_0x492b19=_0x492b19-(-0x258c+-0x1fe8+-0x45fb*-0x1);let _0xfdd019=_0x14dfdc[_0x492b19];return _0xfdd019;},_0x9f93(_0x18393c,_0x13a0b6);}function nowSeconds(){const _0x62345f=_0x5c274c;return Math[_0x62345f(0x11a)](Date[_0x62345f(0xbf)]()/(-0x2ef*0x1+0x925+0xa*-0x3b));}async function insertEditVersion(_0x1769ac,_0x19aaab,_0x5ac1a0,_0x5f37da,_0x4a51ac=-0x29d*-0x1+-0xad*0x2f+0x1d27){const _0x2075e5=_0x5c274c,_0x7759a=nowSeconds();await db[_0x2075e5(0xa1)](_0x2075e5(0xd4)+_0x2075e5(0xd7)+_0x2075e5(0xe6)+_0x2075e5(0x12c)+_0x2075e5(0xe0)+_0x2075e5(0x87)+_0x2075e5(0xe9)+_0x2075e5(0xd8)+')\x0a\x20\x20\x20\x20\x20VAL'+'UES\x20(?,\x20?,'+_0x2075e5(0xb5)+'?)',[_0x1769ac||null,_0x19aaab||null,_0x5ac1a0||'',_0x5f37da||null,_0x4a51ac?0x1e0f+-0x1d*-0x6b+-0x2a2d:0x3*-0xc29+-0x1a*-0x17b+-0x203*0x1,_0x7759a]);}async function fetchLatestEditForMsg(_0x28e934){const _0x30387a=_0x5c274c;if(!_0x28e934)return null;const _0x4c4783=await db[_0x30387a(0xe1)](_0x30387a(0xcb)+_0x30387a(0x118)+'hat_jid,\x20t'+_0x30387a(0x102)+_0x30387a(0x9a)+_0x30387a(0xb4)+_0x30387a(0x97)+_0x30387a(0xfb)+'its\x20WHERE\x20'+_0x30387a(0xeb)+_0x30387a(0x8d)+_0x30387a(0x107)+_0x30387a(0x12b)+'1',[_0x28e934]);return _0x4c4783||null;}async function countEditsForMsg(_0x8b2ad3){const _0x162316=_0x5c274c;if(!_0x8b2ad3)return-0x38*-0x95+0x1bfb*0x1+0x3*-0x1431;const _0x2ae77f=await db[_0x162316(0xe1)](_0x162316(0xb0)+_0x162316(0x123)+_0x162316(0x131)+'s\x20WHERE\x20ms'+'g_id\x20=\x20?\x20A'+_0x162316(0x9e)+'_from_edit'+_0x162316(0xf7),[_0x8b2ad3]);return _0x2ae77f&&typeof _0x2ae77f['c']===_0x162316(0xe2)?_0x2ae77f['c']:-0x180a+0x659+0x11b1;}async function cleanupOldEdits(){const _0x41206=_0x5c274c,_0x4d1f07=nowSeconds()-Number(EDIT_WINDOW_MINUTES||FALLBACKS[_0x41206(0x101)+_0x41206(0xd5)])*(-0x3*-0xce3+-0x728+-0x1f45*0x1),_0x500933=await db[_0x41206(0xa2)](_0x41206(0x8f)+_0x41206(0x8e)+'\x20WHERE\x20sav'+_0x41206(0xda)+_0x41206(0x98)+_0x41206(0x13d)+_0x41206(0x117),[_0x4d1f07]);if(!_0x500933||_0x500933[_0x41206(0xd1)]===-0x3a*0x28+-0x14a1+0x1db1)return;const _0x3472c3=_0x500933[_0x41206(0xff)](_0x36d520=>_0x36d520['id']),_0x3bc2a9=-0x1*0x395+0x2a*0xc4+-0x1bcb;for(let _0x2d5262=0x9ad*0x4+0x2596+0x2625*-0x2;_0x2d5262<_0x3472c3[_0x41206(0xd1)];_0x2d5262+=_0x3bc2a9){const _0x20410a=_0x3472c3[_0x41206(0x12d)](_0x2d5262,_0x2d5262+_0x3bc2a9),_0x53e01b=_0x20410a[_0x41206(0xff)](()=>'?')[_0x41206(0xc1)](',');await db[_0x41206(0xa1)](_0x41206(0xb2)+'M\x20edits\x20WH'+_0x41206(0xa9)+'('+_0x53e01b+')',_0x20410a);}info(_0x41206(0x112)+_0x41206(0x13e)+'\x20'+_0x500933[_0x41206(0xd1)]+(_0x41206(0xf8)+_0x41206(0xcd)));}async function cleanupOldEditsSafe(){const _0x5d7d5a=_0x5c274c;try{await cleanupOldEdits();}catch(_0x1f6a70){warn(_0x5d7d5a(0x112)+'r]\x20cleanup'+'OldEditsSa'+_0x5d7d5a(0x11d)+(_0x1f6a70?.[_0x5d7d5a(0xf0)]||_0x1f6a70));}}function extractText(_0x3011da,_0x18cc91=!![]){const _0x3dcbfa=_0x5c274c;if(!_0x3011da)return'';if(_0x18cc91){if(typeof _0x3011da['newText']===_0x3dcbfa(0x138))return _0x3011da[_0x3dcbfa(0xd0)];if(typeof _0x3011da['new_text']===_0x3dcbfa(0x138))return _0x3011da[_0x3dcbfa(0xf4)];}else{if(typeof _0x3011da[_0x3dcbfa(0x128)]===_0x3dcbfa(0x138))return _0x3011da[_0x3dcbfa(0x128)];if(typeof _0x3011da['old_text']===_0x3dcbfa(0x138))return _0x3011da[_0x3dcbfa(0x124)];}const _0x58768f=_0x18cc91?_0x3011da[_0x3dcbfa(0x103)]||_0x3011da[_0x3dcbfa(0xf0)]||_0x3011da[_0x3dcbfa(0xf3)+'e']:_0x3011da['oldMessage']||_0x3011da[_0x3dcbfa(0xf0)]||_0x3011da[_0x3dcbfa(0xb9)+'e'];if(_0x58768f&&typeof _0x58768f===_0x3dcbfa(0x104)){if(_0x58768f[_0x3dcbfa(0x114)+'on'])return _0x58768f[_0x3dcbfa(0x114)+'on'];if(_0x58768f[_0x3dcbfa(0xcf)+'xtMessage']?.[_0x3dcbfa(0xac)])return _0x58768f[_0x3dcbfa(0xcf)+_0x3dcbfa(0x12a)][_0x3dcbfa(0xac)];if(_0x58768f[_0x3dcbfa(0x134)+'ge']?.[_0x3dcbfa(0xe7)])return _0x58768f[_0x3dcbfa(0x134)+'ge']['caption'];if(_0x58768f[_0x3dcbfa(0xb1)+'ge']?.['caption'])return _0x58768f[_0x3dcbfa(0xb1)+'ge'][_0x3dcbfa(0xe7)];if(_0x58768f[_0x3dcbfa(0x11b)+_0x3dcbfa(0x13c)+'ge']?.[_0x3dcbfa(0x88)+_0x3dcbfa(0xf6)])return _0x58768f[_0x3dcbfa(0x11b)+'ponseMessa'+'ge'][_0x3dcbfa(0x88)+'ttonId'];if(_0x58768f[_0x3dcbfa(0x13f)+_0x3dcbfa(0x90)]?.['singleSele'+_0x3dcbfa(0x119)]?.[_0x3dcbfa(0xca)+'wId'])return _0x58768f[_0x3dcbfa(0x13f)+_0x3dcbfa(0x90)][_0x3dcbfa(0x115)+'ctReply'][_0x3dcbfa(0xca)+_0x3dcbfa(0x110)];}if(typeof _0x3011da['text']==='string')return _0x3011da[_0x3dcbfa(0xac)];return'';}function numberFromRawJid(_0x449eb4){const _0x557391=_0x5c274c;if(!_0x449eb4)return'';try{const _0xe7e79f=String(_0x449eb4),_0x4c28ee=_0xe7e79f[_0x557391(0xdb)]('@'),_0x457232=_0x4c28ee===-(-0x1f91*0x1+-0x671+0x2603)?_0xe7e79f:_0xe7e79f[_0x557391(0x12d)](0x1*0x185+0x175*-0x1+-0x4*0x4,_0x4c28ee),_0x4f64a6=_0x457232[_0x557391(0xdb)](':'),_0xf72f61=_0x4f64a6===-(-0x1f82+0xad+0x1ed6)?_0x457232:_0x457232[_0x557391(0x12d)](-0x4c*-0x43+0x1*-0x3a5+0x1*-0x103f,_0x4f64a6);return _0xf72f61['replace'](/^\+/,'');}catch{return'';}}function isGroupJid(_0x390d3e){const _0x3aec96=_0x5c274c;return typeof _0x390d3e==='string'&&_0x390d3e[_0x3aec96(0xfa)](_0x3aec96(0x126));}async function sendWithRetry(_0x295094,_0x57343f){const _0x21b84d=_0x5c274c,_0x36d9a0=Number(MAX_SEND_RETRIES||FALLBACKS[_0x21b84d(0x136)+_0x21b84d(0xdf)]);let _0x21a6db=0x1*-0x16e6+-0x7*0x275+-0x5*-0x805,_0x4a5e72=Number(INITIAL_BACKOFF_MS||FALLBACKS['INITIAL_BA'+_0x21b84d(0x11c)]);const _0x2c6696=[];if(_0x57343f)_0x2c6696['push'](_0x57343f);try{const _0x489e5d=await db[_0x21b84d(0xe1)]('SELECT\x20val'+_0x21b84d(0xce)+'lete_prefs'+_0x21b84d(0xc5)+_0x21b84d(0x9f)+_0x21b84d(0xfe));if(_0x489e5d&&_0x489e5d[_0x21b84d(0x125)])_0x2c6696[_0x21b84d(0xab)](String(_0x489e5d[_0x21b84d(0x125)]));}catch{}const _0x4f2d7d=getBotJid();if(_0x4f2d7d)_0x2c6696[_0x21b84d(0xab)](_0x4f2d7d);const _0x576f9c=Array['from'](new Set(_0x2c6696[_0x21b84d(0xcc)](Boolean)));if(_0x576f9c[_0x21b84d(0xd1)]===0x1b97+-0x1d05+0x16e)return warn(_0x21b84d(0x112)+'r]\x20no\x20send'+'\x20target\x20av'+_0x21b84d(0xb6)+'ropping\x20se'+'nd.'),![];const _0x9cc6ff=_0x576f9c[-0x1e3+0x219a+-0x161*0x17];while(_0x21a6db<_0x36d9a0){_0x21a6db++;try{if(!botInstance||typeof botInstance[_0x21b84d(0xd6)+'e']!=='function')throw new Error(_0x21b84d(0x133)+_0x21b84d(0xd9)+_0x21b84d(0xde)+'g');return await botInstance['sendMessag'+'e'](_0x9cc6ff,_0x295094),!![];}catch(_0x328b92){warn(_0x21b84d(0x112)+_0x21b84d(0xe4)+_0x21b84d(0x89)+_0x21a6db+_0x21b84d(0x137)+(_0x328b92?.[_0x21b84d(0xf0)]||_0x328b92));const _0x43f053=String(_0x328b92?.[_0x21b84d(0xf0)]||'')['toLowerCas'+'e']()['includes']('rate')||_0x328b92?.[_0x21b84d(0x93)]===-0x135c+0xdab+0x75e;if(_0x21a6db>=_0x36d9a0||!_0x43f053)return![];await new Promise(_0x2b024c=>setTimeout(_0x2b024c,_0x4a5e72)),_0x4a5e72*=0x4*-0x71f+-0x968+0x2b5*0xe;}}return![];}async function buildAndSendLog({chatJid:_0x2f847a,msgId:_0x15aa7c,originalText:_0x4a48f4,newText:_0x36ed6b,senderNumber:_0x197683,editCount:_0x566356}){const _0x3e81c6=_0x5c274c;let _0x5033d6=null;if(isGroupJid(_0x2f847a)&&botInstance?.[_0x3e81c6(0xef)]?.['groupMetad'+_0x3e81c6(0x13b)])try{const _0x353b97=await botInstance[_0x3e81c6(0xef)][_0x3e81c6(0xc6)+_0x3e81c6(0x13b)](_0x2f847a);if(_0x353b97?.[_0x3e81c6(0x129)])_0x5033d6=_0x353b97['subject'];}catch{}const _0x334cbe=_0x3e81c6(0xbd)+_0x3e81c6(0x105),_0x85ff29='👤\x20*User:*\x20'+'@'+(_0x197683||''),_0x405f91=_0x3e81c6(0xc3)+(_0x5033d6?_0x5033d6+'\x20('+_0x2f847a+')':_0x2f847a||'(unknown)'),_0x489283=_0x3e81c6(0xf1)+_0x3e81c6(0x106)+(_0x15aa7c||_0x3e81c6(0x12e)),_0x5a6f77=typeof _0x566356===_0x3e81c6(0xe2)&&_0x566356>-0x1063+-0x1ac+-0x17*-0xc9?'\x20(edited\x20'+_0x566356+'\x20'+(_0x566356===0x20fd+-0x17*0x26+-0xec9*0x2?_0x3e81c6(0x92):_0x3e81c6(0x11f))+')':'',_0x39513c=_0x3e81c6(0xc4)+'l\x20Message:'+_0x5a6f77+_0x3e81c6(0x121)+(_0x4a48f4||_0x3e81c6(0x8a)+_0x3e81c6(0xdc)+_0x3e81c6(0xc2)+']')+'\x0a```',_0x479853=_0x3e81c6(0x8c)+_0x3e81c6(0x99)+(_0x36ed6b||'')+_0x3e81c6(0x9b),_0x1623b7=[_0x334cbe,_0x85ff29,_0x405f91,_0x489283,'',_0x39513c,'',_0x479853]['join']('\x0a');return await sendWithRetry({'text':_0x1623b7},null);}async function handleMessageEdit(_0xfb6270){const _0x2d7365=_0x5c274c;try{if(!_0xfb6270)return;let _0x169044=[],_0x20fd87=null;try{const _0x5508f0=userjid(_0xfb6270);_0x169044=_0x5508f0?.[_0x2d7365(0x9d)]||[],_0x20fd87=_0x5508f0?.['id']||null;}catch(_0x5cdc68){}let _0x16e19b=_0x20fd87||_0xfb6270[_0x2d7365(0xfd)+_0x2d7365(0xa6)]||_0xfb6270[_0x2d7365(0xb3)]||_0xfb6270[_0x2d7365(0x96)]||_0xfb6270['id']||_0xfb6270[_0x2d7365(0xf0)]?.['key']?.['id']||null,_0x562dd6=_0xfb6270[_0x2d7365(0xa0)]||_0xfb6270[_0x2d7365(0xdd)]||_0xfb6270['message']?.['key']?.[_0x2d7365(0xf9)]||null,_0x135c7b='';try{if(_0x16e19b){const _0x3c0b81=await getSenderForMsg(_0x16e19b);_0x3c0b81&&(_0x135c7b=_0x3c0b81['sender_num'+'ber']&&String(_0x3c0b81[_0x2d7365(0xc0)+'ber'])[_0x2d7365(0xa8)]()?String(_0x3c0b81[_0x2d7365(0xc0)+_0x2d7365(0xb7)])[_0x2d7365(0xa8)]():numberFromRawJid(_0x3c0b81[_0x2d7365(0xd3)]));}}catch(_0x30d7e3){}if(!_0x135c7b&&Array['isArray'](_0x169044)&&_0x169044[_0x2d7365(0xd1)]){const _0xd6171d=[_0x2d7365(0xb8)+'lt',_0x2d7365(0xa3),_0x2d7365(0xad)+_0x2d7365(0xe3),'participan'+_0x2d7365(0x10c)];let _0x16d937=null;for(const _0xfb4bbc of _0xd6171d){_0x16d937=_0x169044[_0x2d7365(0x10a)](_0x29e7ae=>_0x29e7ae[_0x2d7365(0x10b)]===_0xfb4bbc&&typeof _0x29e7ae[_0x2d7365(0xaf)]===_0x2d7365(0x138));if(_0x16d937)break;}if(!_0x16d937)_0x16d937=_0x169044[-0x1f4+-0x191d+0x1b11];_0x16d937&&_0x16d937[_0x2d7365(0xaf)]&&(_0x135c7b=numberFromRawJid(_0x16d937['jid']));}const _0x359427=extractText(_0xfb6270,!![])||'',_0x11e65a=_0x16e19b?await fetchLatestEditForMsg(_0x16e19b):null,_0x4f87ff=_0x11e65a&&typeof _0x11e65a[_0x2d7365(0xac)]===_0x2d7365(0x138)&&_0x11e65a['text'][_0x2d7365(0xd1)]?_0x11e65a[_0x2d7365(0xac)]:extractText(_0xfb6270,![])||_0x2d7365(0x8a)+_0x2d7365(0xdc)+_0x2d7365(0xc2)+']',_0x49050d=_0x16e19b?await countEditsForMsg(_0x16e19b):0x11b*-0x6+-0x23c6+0x2a68,_0x5a7fda=await buildAndSendLog({'chatJid':_0x562dd6,'msgId':_0x16e19b,'originalText':_0x4f87ff,'newText':_0x359427,'senderNumber':_0x135c7b,'editCount':_0x49050d}),_0x1e4bef=((()=>{const _0x399134=_0x2d7365;try{return JSON[_0x399134(0xf5)](_0xfb6270)[_0x399134(0x12d)](0xaca*0x3+-0x7fb*0x2+-0x46*0x3c,-0xf165*-0x3+0x3*0x2da3+-0xeb3c*0x2);}catch{return null;}})());return await insertEditVersion(_0x16e19b,_0x562dd6,_0x359427,_0x1e4bef,0x24d6+0x1927+-0xf7f*0x4),_0x5a7fda;}catch(_0x560132){warn(_0x2d7365(0x112)+_0x2d7365(0x108)+'ted\x20handle'+'r\x20error:\x20'+(_0x560132?.[_0x2d7365(0xf0)]||_0x560132));}}export function initialize(_0x306712){const _0x1fdcb7=_0x5c274c;if(!_0x306712)throw new Error('edit-logge'+_0x1fdcb7(0xec)+_0x1fdcb7(0x109)+'s\x20bot\x20arg');botInstance=_0x306712,ensureTable()[_0x1fdcb7(0xbe)](_0x187d5c=>{const _0x3a7c33=_0x1fdcb7;error(_0x187d5c,_0x3a7c33(0x112)+_0x3a7c33(0x94)+'\x20failed:\x20'+(_0x187d5c?.['message']||_0x187d5c));throw _0x187d5c;});try{botInstance['on'](_0x1fdcb7(0x11e)+'it',handleMessageEdit),info(_0x1fdcb7(0x112)+'r]\x20attache'+_0x1fdcb7(0x113)+'ge.edit');}catch(_0x4c4d39){warn(_0x1fdcb7(0x112)+'r]\x20failed\x20'+_0x1fdcb7(0xc8)+'message.ed'+_0x1fdcb7(0xc7)+(_0x4c4d39?.[_0x1fdcb7(0xf0)]||_0x4c4d39));}if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=setInterval(cleanupOldEditsSafe,Number(CLEANUP_INTERVAL_MS||FALLBACKS[_0x1fdcb7(0x100)+_0x1fdcb7(0xba)])),info(_0x1fdcb7(0x112)+'r]\x20initial'+_0x1fdcb7(0x12f));}export function cleanup(){const _0x31f2bc=_0x5c274c;try{if(botInstance&&typeof botInstance[_0x31f2bc(0xf2)+_0x31f2bc(0x8b)]===_0x31f2bc(0xa7))botInstance['removeList'+_0x31f2bc(0x8b)](_0x31f2bc(0x11e)+'it',handleMessageEdit);if(cleanupInterval)clearInterval(cleanupInterval);cleanupInterval=null;}catch(_0x23c4df){warn(_0x31f2bc(0x112)+'r]\x20cleanup'+_0x31f2bc(0x95)+(_0x23c4df?.[_0x31f2bc(0xf0)]||_0x23c4df));}finally{botInstance=null;}}export default{'name':name,'version':version,'priority':priority,'initialize':initialize,'cleanup':cleanup};