const _0xa7bbc=_0x8582;(function(_0x9ab1b6,_0x2c5fe2){const _0xa4be32=_0x8582,_0x9801fa=_0x9ab1b6();while(!![]){try{const _0x2cf3f8=parseInt(_0xa4be32(0x2a0))/(-0x10a4+-0x255+0x12fa)*(parseInt(_0xa4be32(0x242))/(0x6e0+0xe4b*-0x2+-0x2b7*-0x8))+-parseInt(_0xa4be32(0x15b))/(-0x304+-0x12c3+-0x1*-0x15ca)+-parseInt(_0xa4be32(0x236))/(-0x155f+0xadb*0x1+0x4*0x2a2)+-parseInt(_0xa4be32(0x28a))/(0xb42*0x2+-0xf29+-0x6*0x139)+-parseInt(_0xa4be32(0x167))/(-0x2633+0x1eb2*-0x1+0x44eb)*(-parseInt(_0xa4be32(0x1f1))/(-0x1e6f+-0x971*0x1+-0x27e7*-0x1))+parseInt(_0xa4be32(0x166))/(-0x5e+-0x454+0x4ba)+parseInt(_0xa4be32(0x1f8))/(-0x31d+-0x1*0xd44+0x106a)*(parseInt(_0xa4be32(0x212))/(-0x3d*-0x8b+0x1038+-0x314d));if(_0x2cf3f8===_0x2c5fe2)break;else _0x9801fa['push'](_0x9801fa['shift']());}catch(_0x5b22a9){_0x9801fa['push'](_0x9801fa['shift']());}}}(_0x5800,-0x5a342+0x8*-0x595d+0xf3cf7*0x1));import _0x267891 from'fs';import _0x3f8557 from'path';import{mkdirSync}from'fs';import{rm as _0x3291a5}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name='status_rec'+_0xa7bbc(0x1b0);export const version=_0xa7bbc(0x17b);export const priority=0x1410+-0xb64*-0x2+-0x1535*0x2;export const commands=[_0xa7bbc(0x23e)+'\x20status'];export const configKeys=[_0xa7bbc(0x25f)+'OT',_0xa7bbc(0x265)+_0xa7bbc(0x260),'STATUS_REC'+_0xa7bbc(0x1e5)+_0xa7bbc(0x1e1)+_0xa7bbc(0x25e),_0xa7bbc(0x265)+'OVERY_KEEP'+'_SECONDS','STATUS_REC'+'OVERY_RESP'+_0xa7bbc(0x1de)+'T',_0xa7bbc(0x265)+'OVERY_RESP'+_0xa7bbc(0x21d)+_0xa7bbc(0x1b3),_0xa7bbc(0x265)+_0xa7bbc(0x226)+_0xa7bbc(0x253)+_0xa7bbc(0x286)];let CFG={};try{CFG=typeof getConfig===_0xa7bbc(0x1d6)?getConfig()||{}:{};}catch(_0xca4b39){warn('['+name+(_0xa7bbc(0x21c)+_0xa7bbc(0x224)+'\x20')+(_0xca4b39?.['message']||_0xca4b39)+('.\x20Falling\x20'+'back\x20to\x20de'+_0xa7bbc(0x297))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x3f8557[_0xa7bbc(0x164)](_0xa7bbc(0x24e),_0xa7bbc(0x23d)),'CLEANUP_INTERVAL_MS':(-0x1d7a+0x265f+-0x2ef*0x3)*(0x955+0x3bd+-0xcd6)*(-0x126a+0x6*-0x406+0x2aca)*(0x246b*-0x1+-0x6*0x2d9+0x1323*0x3),'KEEP_SECONDS':(-0x73d*-0x3+-0x154*0x10+-0x5f)*(0x1e87+-0x13c2+-0xa89)*(0x1a81*0x1+0x2*-0xa1f+-0x607),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(-0xc54+-0x3*-0x279+0x1*0x4f3)*(0x1e24+0x6*-0x427+-0x1*0x13a)*(-0x5*0x42d+0x101*-0x1+-0x2*-0xcf1)};function toPositiveInt(_0x35ea26,_0x2af16c){const _0x19849d=Number(_0x35ea26);if(!Number['isFinite'](_0x19849d)||_0x19849d<=0xa2f*0x3+0x1491+-0x331e)return _0x2af16c;return Math['floor'](_0x19849d);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0xa7bbc(0x265)+_0xa7bbc(0x260)]===_0xa7bbc(0x18d)&&CFG['STATUS_REC'+_0xa7bbc(0x260)][_0xa7bbc(0x1df)]()?CFG['STATUS_REC'+'OVERY_DIR']:FALLBACKS[_0xa7bbc(0x1c1)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG['STATUS_REC'+_0xa7bbc(0x1e5)+_0xa7bbc(0x1e1)+_0xa7bbc(0x25e)]??(CFG[_0xa7bbc(0x265)+'OVERY']&&CFG[_0xa7bbc(0x265)+_0xa7bbc(0x18c)][_0xa7bbc(0x1d5)+_0xa7bbc(0x1f0)]),FALLBACKS['CLEANUP_IN'+_0xa7bbc(0x1f0)]),'KEEP_SECONDS':toPositiveInt(CFG[_0xa7bbc(0x265)+'OVERY_KEEP'+_0xa7bbc(0x1ca)]??(CFG[_0xa7bbc(0x265)+'OVERY']&&CFG[_0xa7bbc(0x265)+_0xa7bbc(0x18c)][_0xa7bbc(0x17a)+'DS']),FALLBACKS[_0xa7bbc(0x17a)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG['STATUS_REC'+_0xa7bbc(0x17f)+'ONDED_LIMI'+'T']??(CFG[_0xa7bbc(0x265)+_0xa7bbc(0x18c)]&&CFG[_0xa7bbc(0x265)+_0xa7bbc(0x18c)][_0xa7bbc(0x29e)+_0xa7bbc(0x238)]),FALLBACKS[_0xa7bbc(0x29e)+'LIMIT']),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0xa7bbc(0x265)+_0xa7bbc(0x17f)+_0xa7bbc(0x21d)+'_KEEP']??(CFG['STATUS_REC'+_0xa7bbc(0x18c)]&&CFG['STATUS_REC'+_0xa7bbc(0x18c)][_0xa7bbc(0x29e)+_0xa7bbc(0x27e)]),FALLBACKS[_0xa7bbc(0x29e)+'TRIM_KEEP']),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG[_0xa7bbc(0x265)+'OVERY_MAX_'+_0xa7bbc(0x253)+_0xa7bbc(0x286)]??(CFG[_0xa7bbc(0x265)+'OVERY']&&CFG[_0xa7bbc(0x265)+_0xa7bbc(0x18c)][_0xa7bbc(0x220)+_0xa7bbc(0x185)+_0xa7bbc(0x20f)]),FALLBACKS['MAX_DOWNLO'+_0xa7bbc(0x185)+_0xa7bbc(0x20f)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0xa7bbc(0x22f)+_0xa7bbc(0x24b)+'s',ITEMS_TABLE=_0xa7bbc(0x22f)+_0xa7bbc(0x257)+'s';let respondedMsgIds=new Set();function trackSent(_0x2c09eb){const _0x3f4146=_0xa7bbc;try{const _0x1fd540=_0x2c09eb?.['key']?.['id']||_0x2c09eb?.['id']||_0x2c09eb?.[_0x3f4146(0x170)]&&_0x2c09eb['messages'][-0x2*-0x4cf+0x47*0x10+-0xe0e]?.['key']?.['id']||Array['isArray'](_0x2c09eb)&&_0x2c09eb[0x10f*-0x2+-0x249f+0x26bd*0x1]?.[_0x3f4146(0x24f)]?.['id']||null;if(!_0x1fd540)return;respondedMsgIds['add'](String(_0x1fd540));if(respondedMsgIds['size']>DEFAULTS['RESPONDED_'+_0x3f4146(0x238)]){const _0x44e99b=Array[_0x3f4146(0x1d9)](respondedMsgIds);respondedMsgIds=new Set(_0x44e99b[_0x3f4146(0x1a3)](-DEFAULTS[_0x3f4146(0x29e)+'TRIM_KEEP']));}}catch(_0x16e608){}}function isOurSentId(_0x53ade5){const _0x23f21f=_0xa7bbc;return _0x53ade5&&respondedMsgIds[_0x23f21f(0x291)](String(_0x53ade5));}async function getBaileysHelpers(){const _0x59ce91=_0xa7bbc;if(_baileysHelpers)return _baileysHelpers;try{const _0x582b1e=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x582b1e['downloadCo'+'ntentFromM'+_0x59ce91(0x163)]||_0x582b1e[_0x59ce91(0x178)]?.['downloadCo'+'ntentFromM'+_0x59ce91(0x163)]};if(!_baileysHelpers[_0x59ce91(0x268)+_0x59ce91(0x211)+_0x59ce91(0x163)])throw new Error('downloadCo'+_0x59ce91(0x211)+_0x59ce91(0x1e8)+'\x20available');return _baileysHelpers;}catch(_0x5e88c6){error(_0x5e88c6,'['+name+(']\x20failed\x20t'+_0x59ce91(0x244)+_0x59ce91(0x203)));throw _0x5e88c6;}}async function streamToBuffer(_0x362973){const _0x2506b0=_0xa7bbc,_0x58bb3f=[];for await(const _0x2f2b85 of _0x362973)_0x58bb3f[_0x2506b0(0x274)](Buffer[_0x2506b0(0x252)](_0x2f2b85)?_0x2f2b85:Buffer[_0x2506b0(0x1d9)](_0x2f2b85));return Buffer[_0x2506b0(0x186)](_0x58bb3f);}function ensureDataDir(){const _0x388cf5=_0xa7bbc;try{const _0x3d7c73=CFG||{},_0x24c6fa=_0x3d7c73[_0x388cf5(0x25f)+'OT']&&typeof _0x3d7c73[_0x388cf5(0x25f)+'OT']===_0x388cf5(0x18d)?_0x3d7c73[_0x388cf5(0x25f)+'OT']:process['cwd'](),_0x91b726=typeof DEFAULTS[_0x388cf5(0x1c1)+'TH']==='string'&&DEFAULTS[_0x388cf5(0x1c1)+'TH'][_0x388cf5(0x1df)]()?DEFAULTS['DATA_SUBPA'+'TH']:null;DATA_DIR=_0x91b726&&typeof _0x91b726===_0x388cf5(0x18d)&&_0x91b726[_0x388cf5(0x1df)]()?_0x3f8557[_0x388cf5(0x21e)](_0x91b726)?_0x91b726:_0x3f8557['resolve'](_0x24c6fa,_0x91b726):_0x3f8557[_0x388cf5(0x1a0)](_0x24c6fa,FALLBACKS[_0x388cf5(0x1c1)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x494675=_0x3f8557[_0x388cf5(0x1a0)](_0x24c6fa,_0x388cf5(0x24e),'status','tmp');if(_0x267891[_0x388cf5(0x1a4)](_0x494675)&&_0x267891['statSync'](_0x494675)['isDirector'+'y']()){const _0x271855=_0x267891[_0x388cf5(0x1c7)+'c'](_0x494675)['filter'](Boolean);for(const _0x3ae271 of _0x271855){const _0x191e7a=_0x3f8557[_0x388cf5(0x164)](_0x494675,_0x3ae271),_0x163741=_0x3f8557[_0x388cf5(0x164)](DATA_DIR,_0x3ae271);try{if(!_0x267891['existsSync'](_0x163741))_0x267891[_0x388cf5(0x1fd)](_0x191e7a,_0x163741);else _0x267891[_0x388cf5(0x19f)](_0x191e7a);}catch(_0x230894){}}try{const _0x36e235=_0x267891[_0x388cf5(0x1c7)+'c'](_0x494675);if(!_0x36e235||_0x36e235['length']===0x1724+0x376*-0x7+-0x8b*-0x2)_0x267891[_0x388cf5(0x295)](_0x494675);}catch(_0x5dc299){}}}catch(_0x2501c9){}}catch(_0x299faf){warn('['+name+(_0x388cf5(0x1f5)+_0x388cf5(0x162)+_0x388cf5(0x17e))+(_0x299faf?.[_0x388cf5(0x1bf)]||_0x299faf)),DATA_DIR=_0x3f8557[_0x388cf5(0x1a0)](process[_0x388cf5(0x293)](),FALLBACKS[_0x388cf5(0x1c1)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x22759b){}}}async function ensureTables(){const _0x41361f=_0xa7bbc;await db['exec']('CREATE\x20TAB'+_0x41361f(0x1db)+_0x41361f(0x234)+PREFS_TABLE+(_0x41361f(0x23a)+_0x41361f(0x251)+'RIMARY\x20KEY'+_0x41361f(0x294)+_0x41361f(0x1d3)+_0x41361f(0x27c)+'\x20\x20\x20\x20\x20\x20\x20upd'+'ated_at\x20IN'+_0x41361f(0x28e)+'ULT\x200\x0a\x20\x20\x20\x20'+_0x41361f(0x22d))),await db['exec'](_0x41361f(0x177)+_0x41361f(0x1db)+_0x41361f(0x234)+ITEMS_TABLE+(_0x41361f(0x23a)+'id\x20TEXT\x20PR'+_0x41361f(0x1d1)+_0x41361f(0x23c)+_0x41361f(0x22b)+_0x41361f(0x26a)+_0x41361f(0x1cc)+_0x41361f(0x1c2)+'\x20DEFAULT\x20\x27'+_0x41361f(0x168)+_0x41361f(0x299)+_0x41361f(0x23b)+'le_path\x20TE'+_0x41361f(0x1b5)+_0x41361f(0x259)+_0x41361f(0x28e)+_0x41361f(0x1c3)+_0x41361f(0x201)+_0x41361f(0x221)+_0x41361f(0x250)+'\x200,\x0a\x20\x20\x20\x20\x20\x20'+_0x41361f(0x229)+_0x41361f(0x199)+_0x41361f(0x1cf)+_0x41361f(0x209)+_0x41361f(0x25b)+_0x41361f(0x19d)+_0x41361f(0x267)+_0x41361f(0x227)));}async function getPref(_0x103316){const _0xb37567=_0xa7bbc;try{const _0x229527=await db[_0xb37567(0x182)](_0xb37567(0x159)+_0xb37567(0x198)+PREFS_TABLE+('\x20WHERE\x20key'+_0xb37567(0x28d)),[_0x103316]);return _0x229527?_0x229527['value']:null;}catch(_0x28f295){return warn('['+name+(']\x20getPref\x20'+_0xb37567(0x16d))+(_0x28f295?.[_0xb37567(0x1bf)]||_0x28f295)),null;}}async function setPref(_0x1b819e,_0x4a1d3e){const _0x2c2544=_0xa7bbc;try{const _0x3b5abe=Math[_0x2c2544(0x237)](Date[_0x2c2544(0x278)]()/(-0xef7*-0x2+-0x198c+-0x7a));return await db[_0x2c2544(0x1f4)](_0x2c2544(0x1be)+'O\x20'+PREFS_TABLE+(_0x2c2544(0x1e3)+_0x2c2544(0x28b)+_0x2c2544(0x175)+_0x2c2544(0x228)+'?)\x0a\x20\x20\x20\x20\x20\x20\x20'+'ON\x20CONFLIC'+_0x2c2544(0x263)+_0x2c2544(0x156)+_0x2c2544(0x15a)+_0x2c2544(0x194)+'e,\x20updated'+_0x2c2544(0x160)+_0x2c2544(0x217)+_0x2c2544(0x181)),[_0x1b819e,String(_0x4a1d3e),_0x3b5abe]),!![];}catch(_0x40a3d9){return warn('['+name+(_0x2c2544(0x216)+_0x2c2544(0x16e))+(_0x40a3d9?.['message']||_0x40a3d9)),![];}}async function saveItem(_0x3d1806){const _0x4eac43=_0xa7bbc;try{const _0x48392f=Math[_0x4eac43(0x237)](Date[_0x4eac43(0x278)]()/(-0x183*-0xb+-0x531*-0x6+0x2bdf*-0x1)),_0x3c7ea4=Number(_0x3d1806[_0x4eac43(0x176)]||_0x48392f+DEFAULTS['KEEP_SECON'+'DS']);return await db[_0x4eac43(0x1f4)](_0x4eac43(0x152)+'REPLACE\x20IN'+'TO\x20'+ITEMS_TABLE+('\x0a\x20\x20\x20\x20\x20\x20\x20(i'+_0x4eac43(0x1eb)+_0x4eac43(0x1f9)+'lay_name,\x20'+_0x4eac43(0x1a1)+'_path,\x20msg'+'_ts,\x20creat'+_0x4eac43(0x18a)+_0x4eac43(0x1d4)+_0x4eac43(0x256)+_0x4eac43(0x193)+_0x4eac43(0x1a2)+_0x4eac43(0x19a)+_0x4eac43(0x207)+_0x4eac43(0x24d)),[_0x3d1806['id'],_0x3d1806[_0x4eac43(0x247)+'t']||'',_0x3d1806[_0x4eac43(0x283)+'me']||'',_0x3d1806[_0x4eac43(0x290)]||'',_0x3d1806['file_path']||'',Number(_0x3d1806[_0x4eac43(0x1dd)]||-0x187b+0x39+-0x1b*-0xe6),Number(_0x3d1806['created_at']||Math['floor'](Date['now']()/(-0x2*-0x92b+0xef8+-0x1d66*0x1))),Number(_0x3c7ea4),_0x3d1806[_0x4eac43(0x183)+'on']?_0x3d1806[_0x4eac43(0x183)+'on']:'']),!![];}catch(_0x148cae){return warn('['+name+(']\x20saveItem'+'\x20failed:\x20')+(_0x148cae?.['message']||_0x148cae)),![];}}async function fetchItemById(_0x5851f4){const _0x54bfbf=_0xa7bbc;try{const _0x3028ba=await db['get'](_0x54bfbf(0x1a9)+'ROM\x20'+ITEMS_TABLE+(_0x54bfbf(0x1b9)+'=\x20?'),[_0x5851f4]);return _0x3028ba||null;}catch(_0x2f276c){return warn('['+name+(_0x54bfbf(0x23f)+'mById\x20fail'+_0x54bfbf(0x1e4))+(_0x2f276c?.[_0x54bfbf(0x1bf)]||_0x2f276c)),null;}}async function deleteItemById(_0x19c360){const _0x580047=_0xa7bbc;try{const _0x52edf3=await db[_0x580047(0x182)](_0x580047(0x21f)+_0x580047(0x15e)+'M\x20'+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x580047(0x1f7)),[_0x19c360]);if(_0x52edf3?.[_0x580047(0x16f)])try{await _0x3291a5(_0x52edf3[_0x580047(0x16f)])[_0x580047(0x26d)](()=>{});}catch(_0x18145e){}await db['run'](_0x580047(0x230)+'M\x20'+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x580047(0x1f7)),[_0x19c360]),info('['+name+(_0x580047(0x1dc)+_0x580047(0x213)+_0x580047(0x272))+_0x19c360);}catch(_0x4fd745){warn('['+name+(_0x580047(0x18b)+'emById\x20fai'+_0x580047(0x157))+(_0x4fd745?.[_0x580047(0x1bf)]||_0x4fd745));}}async function sweepExpired(){const _0x48e94d=_0xa7bbc;try{const _0xbb69a5=Math['floor'](Date[_0x48e94d(0x278)]()/(0x1fbe+0x1558+0x9d6*-0x5)),_0x50ed34=await db[_0x48e94d(0x264)](_0x48e94d(0x1ea)+_0x48e94d(0x29f)+_0x48e94d(0x204)+ITEMS_TABLE+(_0x48e94d(0x1ce)+_0x48e94d(0x276)+'\x20?'),[_0xbb69a5]);if(!_0x50ed34||_0x50ed34[_0x48e94d(0x25a)]===0x1cf2+-0x1ad3+-0x21f)return;for(const _0x48efd7 of _0x50ed34){try{if(_0x48efd7[_0x48e94d(0x16f)])await _0x3291a5(_0x48efd7['file_path'])[_0x48e94d(0x26d)](()=>{});}catch(_0x73dc4b){}}const _0x3d7d03=_0x50ed34[_0x48e94d(0x222)](_0x41f0d2=>_0x41f0d2['id']);if(_0x3d7d03['length']){const _0x2a6d88=_0x3d7d03[_0x48e94d(0x222)](()=>'?')[_0x48e94d(0x164)](',');await db[_0x48e94d(0x1f4)](_0x48e94d(0x230)+'M\x20'+ITEMS_TABLE+(_0x48e94d(0x1b9)+_0x48e94d(0x155))+_0x2a6d88+')',_0x3d7d03),info('['+name+_0x48e94d(0x254)+_0x3d7d03[_0x48e94d(0x25a)]+(_0x48e94d(0x1ad)+_0x48e94d(0x1d8)+_0x48e94d(0x1ed)));}}catch(_0x352a28){warn('['+name+(']\x20sweepExp'+_0x48e94d(0x16c)+':\x20')+(_0x352a28?.['message']||_0x352a28));}}function filenameForId(_0x42a950,_0x13df66){const _0x3f3de4=_0xa7bbc,_0x2beb07={'image/jpeg':_0x3f3de4(0x29a),'image/png':_0x3f3de4(0x219),'video/mp4':_0x3f3de4(0x240),'image/webp':_0x3f3de4(0x1b2),'audio/ogg':_0x3f3de4(0x1e7),'audio/mpeg':_0x3f3de4(0x215),'application/pdf':_0x3f3de4(0x22a)},_0x1e9e95=_0x13df66&&_0x2beb07[_0x13df66]?_0x2beb07[_0x13df66]:_0x3f8557[_0x3f3de4(0x1cb)](_0x42a950)||'';return''+_0x42a950+_0x1e9e95;}async function readFileAsBuffer(_0x26c925){const _0x427092=_0xa7bbc;try{return await _0x267891[_0x427092(0x1e0)][_0x427092(0x239)](_0x26c925);}catch(_0x28e7e5){return warn('['+name+(']\x20readFile'+_0x427092(0x190)+'ailed\x20for\x20')+_0x26c925+':\x20'+(_0x28e7e5?.['message']||_0x28e7e5)),null;}}function buildPayloadFromSaved(_0x5ebc45){const _0xf7bf7c=_0xa7bbc;if(!_0x5ebc45||!_0x5ebc45[_0xf7bf7c(0x16f)])return null;const _0x4f6f6b=_0x5ebc45['file_path'],_0x1df8f3=(_0x5ebc45[_0xf7bf7c(0x290)]||'')[_0xf7bf7c(0x206)+'e']();return async function(){const _0x3e5a42=_0xf7bf7c,_0xca6e8=await readFileAsBuffer(_0x4f6f6b);if(!_0xca6e8)return null;const _0x488f62=(_0x5ebc45[_0x3e5a42(0x283)+'me']?_0x5ebc45[_0x3e5a42(0x283)+'me']+_0x3e5a42(0x20e):'')+('Recovered\x20'+_0x3e5a42(0x23d));if(_0x1df8f3[_0x3e5a42(0x169)](_0x3e5a42(0x24a)))return{'image':_0xca6e8,'caption':_0x488f62,'mimetype':_0x1df8f3};if(_0x1df8f3[_0x3e5a42(0x169)]('video/'))return{'video':_0xca6e8,'caption':_0x488f62,'mimetype':_0x1df8f3};if(_0x1df8f3[_0x3e5a42(0x169)](_0x3e5a42(0x1c5)))return{'audio':_0xca6e8,'ptt':![],'mimetype':_0x1df8f3};return{'document':_0xca6e8,'fileName':_0x3f8557[_0x3e5a42(0x191)](_0x4f6f6b)||''+_0x5ebc45['id'],'caption':_0x488f62,'mimetype':_0x1df8f3||undefined};};}async function sendRecoveredToBot(_0x1bd7c0){const _0x476850=_0xa7bbc;if(!_0x1bd7c0)return![];const _0x127df6=getBotJid();if(!_0x127df6)return warn('['+name+(_0x476850(0x173)+_0x476850(0x287)+_0x476850(0x218)+_0x476850(0x187)+_0x476850(0x1d0))),![];if(!_0x1bd7c0['file_path']||!_0x267891[_0x476850(0x1a4)](_0x1bd7c0[_0x476850(0x16f)]))return warn('['+name+(_0x476850(0x173)+'veredToBot'+':\x20file\x20mis'+'sing\x20for\x20')+_0x1bd7c0['id']+_0x476850(0x1c8)+_0x1bd7c0[_0x476850(0x16f)]),![];const _0x54fe27=buildPayloadFromSaved(_0x1bd7c0);if(!_0x54fe27)return warn('['+name+(_0x476850(0x261)+'ad\x20maker\x20f'+'or\x20')+_0x1bd7c0['id']),![];try{const _0x1afc57=await _0x54fe27();if(!_0x1afc57)return warn('['+name+(_0x476850(0x1fc)+_0x476850(0x262)+_0x476850(0x255))+_0x1bd7c0['id']),![];if(typeof _0x1afc57===_0x476850(0x1c6)&&_0x1afc57!==null){_0x1afc57[_0x476850(0x1da)+'o']=_0x1afc57['contextInf'+'o']||{};if(_0x1bd7c0['participan'+'t'])_0x1afc57[_0x476850(0x1da)+'o'][_0x476850(0x19c)+'id']=[_0x1bd7c0[_0x476850(0x247)+'t']];}let _0x36139e=null;if(botRef&&botRef[_0x476850(0x270)]&&typeof botRef[_0x476850(0x270)][_0x476850(0x184)+'e']===_0x476850(0x1d6))_0x36139e=await botRef[_0x476850(0x270)]['sendMessag'+'e'](_0x127df6,_0x1afc57);else{if(botRef&&typeof botRef[_0x476850(0x184)+'e']===_0x476850(0x1d6))_0x36139e=await botRef[_0x476850(0x184)+'e'](_0x127df6,_0x1afc57);else return warn('['+name+(']\x20sendReco'+'veredToBot'+_0x476850(0x15d)+_0x476850(0x161)+_0x476850(0x27a))),![];}return trackSent(_0x36139e),info('['+name+(_0x476850(0x202)+_0x476850(0x232)+'r\x20')+_0x1bd7c0['id']+_0x476850(0x1c8)+_0x127df6),!![];}catch(_0x4d0960){return warn('['+name+(_0x476850(0x173)+'veredToBot'+_0x476850(0x214)+'\x20')+_0x1bd7c0['id']+':\x20'+(_0x4d0960?.[_0x476850(0x1bf)]||_0x4d0960)),![];}}function _0x5800(){const _0x27d958=['RESPONDED_','\x20file_path','2FWLADp','INSERT\x20OR\x20',']\x20stub\x20rev','te\x20status\x20','IN\x20(','UPDATE\x20SET','led:\x20','eletion\x20fo','SELECT\x20val','\x20value=exc','2070447iWlsiZ','bParameter',':\x20no\x20sendM','e_path\x20FRO','eply','_at=exclud','essage\x20ava','taDir\x20erro','essage','join','no\x20resend)','2028688eRdvYY','13896sgvMHr','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','startsWith','d\x20deleted\x20','enabled','ired\x20error','error:\x20','failed:\x20','file_path','messages','\x20removed\x20(','revoke',']\x20sendReco','text','d_at)\x20VALU','expires_at','CREATE\x20TAB','default','sage','KEEP_SECON','2.3.2',']\x20onMessag','messageStu','r:\x20','OVERY_RESP',']\x20handleSt','_at;','get','message_js','sendMessag','AD_BYTES_W','concat','d()\x20return','DIR=','\x20but\x20file\x20','ed_at,\x20exp',']\x20deleteIt','OVERY','string','Message','set\x20to\x20','AsBuffer\x20f','basename','ssibleDele','n)\x0a\x20\x20\x20\x20\x20\x20\x20','luded.valu','video','e:\x20getBotJ','\x20KEEP_SEC=','ue\x20FROM\x20','t\x20INTEGER\x20','\x20?,\x20?,\x20?,\x20','h\x20for\x20','mentionedJ','\x20TEXT\x20DEFA','ssage','unlinkSync','resolve','mime,\x20file','VALUES\x20(?,','slice','existsSync','endsWith','\x0aSaved\x20fil','estamp','imageMessa','SELECT\x20*\x20F','audio','o\x20send\x20rec','\x20after\x20suc','\x20expired\x20s','\x20->\x20sent','sing\x20for\x20','overy',']\x20deletion','.webp','_KEEP','conversati','XT,\x0a\x20\x20\x20\x20\x20\x20','o\x20set\x20anti','\x20CLEANUP_M','h\x20file_pat','\x20WHERE\x20id\x20','image','uires\x20bot\x20','empty\x20buff','fromMe','INSERT\x20INT','message','❌\x20Failed\x20t','DATA_SUBPA','_name\x20TEXT','ULT\x200,\x0a\x20\x20\x20',']\x20file\x20mis','audio/','object','readdirSyn','\x20->\x20','id()\x20empty','_SECONDS','extname','\x20\x20\x20display','\x20is\x20large:','\x20WHERE\x20exp','DEFAULT\x200,','ed\x20empty','IMARY\x20KEY,','remoteJid','alue\x20TEXT\x20','ires_at,\x20m','CLEANUP_IN','function','oke\x20for\x20st','aved\x20statu','from','contextInf','LE\x20IF\x20NOT\x20',']\x20removed\x20','msg_ts','ONDED_LIMI','trim','promises','NUP_INTERV','protocolMe','\x20(key,\x20val','ed:\x20','OVERY_CLEA','stickerMes','.ogg','essage\x20not','✔️\x20antidele','SELECT\x20id,','d,\x20partici',']\x20recovere','s(es)','rename','isArray','TERVAL_MS','42KfueXh','clear','r\x20status\x20','run',']\x20ensureDa','delete\x20sta','=\x20?','9knpwCP','pant,\x20disp','age','bType',']\x20payload\x20','renameSync','.tmp-','split','message\x20er','\x20\x20\x20\x20create',']\x20sent\x20sav','aileys','\x20FROM\x20','tus\x20','toLowerCas','?,\x20?,\x20?,\x20?','tion\x20error','\x0a\x20\x20\x20\x20\x20\x20\x20me','dListener\x20','instance','zed.\x20DATA_','atus\x20','\x20-\x20','ARN','stopManage','ntentFromM','8267590svsoOB','saved\x20stat','\x20error\x20for','.mp3',']\x20setPref\x20','ed.updated',':\x20getBotJi','.png','mimetype','status\x20',']\x20getConfi','ONDED_TRIM','isAbsolute','SELECT\x20fil','MAX_DOWNLO','d_at\x20INTEG','map','e\x20error:\x20','g()\x20threw:','\x20returned\x20','OVERY_MAX_','\x20\x20);','ES\x20(?,\x20?,\x20','\x20expires_a','.pdf','rticipant\x20','\x20handle\x20fa','\x20);','stringify','status_rec','DELETE\x20FRO','@g.us','ed\x20file\x20fo','ror:\x20','EXISTS\x20','extendedTe','857004GEfEfn','floor','LIMIT','readFile','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20fi','\x0a\x20\x20\x20\x20\x20\x20\x20pa','status','antidelete',']\x20fetchIte','.mp4','toString','866918FolFLO','sticker','o\x20import\x20B',']\x20DB\x20saved',']\x20cleanup\x20','participan','caption','document','image/','overy_pref','overed\x20sta',',\x20?)','data','key','ER\x20DEFAULT','key\x20TEXT\x20P','isBuffer','DOWNLOAD_B',']\x20cleaned\x20','ed\x20for\x20','essage_jso','overy_item','videoMessa','\x20msg_ts\x20IN','length','ssage_json',']\x20download','\x20entry\x20for','AL_MS','PROJECT_RO','OVERY_DIR',']\x20no\x20paylo','build\x20fail','T(key)\x20DO\x20','all','STATUS_REC','status@bro','ULT\x20\x27\x27\x0a\x20\x20\x20','downloadCo','\x20error:\x20','TEXT,\x0a\x20\x20\x20\x20',']\x20initiali','exec','catch','adcast','xtMessage','sock','cessful\x20re','us\x20','ttempt\x20fai','push','missing\x20at','ires_at\x20<=','psert','now','audioMessa','ilable','path)','NOT\x20NULL,\x0a','\x20bytes)','TRIM_KEEP','\x20but\x20no\x20sa','send','tus',']\x20raw\x20per-','display_na','writeFile',']\x20expired\x20','YTES_WARN','veredToBot','ound',']\x20failed\x20t','3053010xiFbBr','ue,\x20update','messages.u','\x20=\x20?','TEGER\x20DEFA','iled:\x20','mime','has','toUpperCas','cwd',',\x0a\x20\x20\x20\x20\x20\x20\x20v','rmdirSync','\x20(no\x20file_','faults.','quotedMess','mime\x20TEXT,','.jpg','show','messageTim','er\x20for\x20sta'];_0x5800=function(){return _0x27d958;};return _0x5800();}async function isEnabled(){const _0x3d2ece=_0xa7bbc,_0x54ccc6=await getPref(_0x3d2ece(0x16b));return _0x54ccc6==='1'||_0x54ccc6==='true';}async function handleStatusUpload(_0x4600b8){const _0x240fb2=_0xa7bbc;try{if(!_0x4600b8||!_0x4600b8['key'])return;const _0x547dbc=String(_0x4600b8['key'][_0x240fb2(0x1d2)]||'')[_0x240fb2(0x206)+'e']();if(_0x547dbc!=='status@bro'+'adcast')return;const _0x2aadb5=String(_0x4600b8[_0x240fb2(0x24f)]['id']||'');if(!_0x2aadb5)return;if(!await isEnabled())return;const _0x6bd696=await fetchItemById(_0x2aadb5);if(_0x6bd696)return;const _0x3179dc=_0x4600b8[_0x240fb2(0x1bf)]||{};let _0x196f2d=null;if(_0x3179dc[_0x240fb2(0x1a8)+'ge'])_0x196f2d='image';else{if(_0x3179dc[_0x240fb2(0x258)+'ge'])_0x196f2d=_0x240fb2(0x195);else{if(_0x3179dc[_0x240fb2(0x279)+'ge'])_0x196f2d='audio';else{if(_0x3179dc['documentMe'+_0x240fb2(0x19e)])_0x196f2d='document';else{if(_0x3179dc[_0x240fb2(0x1e6)+_0x240fb2(0x179)])_0x196f2d=_0x240fb2(0x243);}}}}if(!_0x196f2d)return;const _0x46464f=_0x196f2d===_0x240fb2(0x1ba)?_0x240fb2(0x1ba):_0x196f2d===_0x240fb2(0x195)?'video':_0x196f2d===_0x240fb2(0x1aa)?_0x240fb2(0x1aa):_0x240fb2(0x249),_0x1a665b=_0x4600b8[_0x240fb2(0x24f)][_0x240fb2(0x247)+'t']||'',_0x5430ac=_0x4600b8['pushName']||'',_0x5b206b=_0x1a665b?_0x1a665b[_0x240fb2(0x1ff)]('@')[-0x5*0x7c0+0x3bf*0x3+0x1b83]:_0x5430ac||'';let _0x3385da='',_0x1e7b15='';try{const _0x47fe50=_0x4600b8[_0x240fb2(0x1bf)][_0x46464f+_0x240fb2(0x18e)]||_0x4600b8[_0x240fb2(0x1bf)];_0x1e7b15=_0x47fe50&&_0x47fe50[_0x240fb2(0x21a)]?_0x47fe50[_0x240fb2(0x21a)]:'';const {downloadContentFromMessage:_0x54cec5}=await getBaileysHelpers(),_0x317377=await _0x54cec5(_0x47fe50,_0x46464f),_0x22de4e=await streamToBuffer(_0x317377);if(!_0x22de4e||!Buffer[_0x240fb2(0x252)](_0x22de4e)||_0x22de4e['length']===0xf4e*0x1+0x1*-0x277+-0x13*0xad)warn('['+name+(']\x20download'+_0x240fb2(0x225)+_0x240fb2(0x1bc)+_0x240fb2(0x29d)+_0x240fb2(0x205))+_0x2aadb5),_0x3385da='';else{const _0xe4c445=filenameForId(_0x2aadb5,_0x1e7b15);_0x3385da=_0x3f8557[_0x240fb2(0x164)](DATA_DIR,_0xe4c445);const _0x17b5a3=_0x3385da+_0x240fb2(0x1fe)+Date[_0x240fb2(0x278)]();await _0x267891[_0x240fb2(0x1e0)][_0x240fb2(0x284)](_0x17b5a3,_0x22de4e),await _0x267891['promises'][_0x240fb2(0x1ee)](_0x17b5a3,_0x3385da),info('['+name+(']\x20saved\x20st'+_0x240fb2(0x20d))+_0x2aadb5+_0x240fb2(0x1c8)+_0x3385da+'\x20('+_0x22de4e[_0x240fb2(0x25a)]+_0x240fb2(0x27d)),_0x22de4e[_0x240fb2(0x25a)]>DEFAULTS[_0x240fb2(0x220)+_0x240fb2(0x185)+_0x240fb2(0x20f)]&&warn('['+name+(']\x20download'+'ed\x20file\x20fo'+'r\x20')+_0x2aadb5+(_0x240fb2(0x1cd)+'\x20')+_0x22de4e[_0x240fb2(0x25a)]+'\x20bytes');}}catch(_0x12a8d5){warn('['+name+(_0x240fb2(0x25c)+'\x20failed\x20fo'+_0x240fb2(0x1f3))+_0x2aadb5+':\x20'+(_0x12a8d5?.['message']||_0x12a8d5)),_0x3385da='';}const _0x3b1a54=Math[_0x240fb2(0x237)](Date['now']()/(0x1f61*-0x1+-0x356+-0x1*-0x269f)),_0x1ef5f3={'id':_0x2aadb5,'participant':_0x1a665b,'display_name':_0x5b206b,'mime':_0x1e7b15,'file_path':_0x3385da,'msg_ts':Number(_0x4600b8[_0x240fb2(0x29c)+_0x240fb2(0x1a7)]||_0x3b1a54),'created_at':_0x3b1a54,'expires_at':_0x3b1a54+DEFAULTS['KEEP_SECON'+'DS'],'message_json':JSON[_0x240fb2(0x22e)](_0x4600b8)};await saveItem(_0x1ef5f3);if(_0x3385da)info('['+name+(_0x240fb2(0x245)+'\x20entry\x20wit'+_0x240fb2(0x1b8)+_0x240fb2(0x19b))+_0x2aadb5);else info('['+name+(_0x240fb2(0x245)+_0x240fb2(0x25d)+'\x20')+_0x2aadb5+(_0x240fb2(0x296)+_0x240fb2(0x27b)));}catch(_0x4ca3fd){warn('['+name+(_0x240fb2(0x180)+'atusUpload'+_0x240fb2(0x269))+(_0x4ca3fd?.['message']||_0x4ca3fd));}}async function handlePossibleDeletion(_0x21576a){const _0x40339a=_0xa7bbc;try{if(!_0x21576a||!_0x21576a[_0x40339a(0x1bf)])return;if(!await isEnabled())return;const _0x578d2f=Math['floor'](Date[_0x40339a(0x278)]()/(-0x2071+0x1edf+0x2*0x2bd)),_0x5efaff=_0x21576a['message'][_0x40339a(0x1e2)+_0x40339a(0x19e)];if(_0x5efaff&&_0x5efaff[_0x40339a(0x24f)]){const _0x4d5457=_0x5efaff[_0x40339a(0x24f)]||{},_0xac3f0c=String(_0x4d5457[_0x40339a(0x1d2)]||'')[_0x40339a(0x206)+'e']();if(_0xac3f0c==='status@bro'+_0x40339a(0x26e)){const _0x1ced5b=String(_0x4d5457['id']||'');if(!_0x1ced5b)return;const _0x32a2d5=await fetchItemById(_0x1ced5b);if(!_0x32a2d5){warn('['+name+(']\x20deletion'+'\x20for\x20statu'+'s\x20')+_0x1ced5b+(_0x40339a(0x27f)+'ved\x20copy\x20f'+_0x40339a(0x288)));return;}if(Number(_0x32a2d5[_0x40339a(0x176)]||-0x13*0x199+-0xb41+0x299c)<=_0x578d2f){await deleteItemById(_0x1ced5b),info('['+name+(_0x40339a(0x285)+_0x40339a(0x213)+_0x40339a(0x272))+_0x1ced5b+(_0x40339a(0x171)+_0x40339a(0x165)));return;}const _0x15f452=await sendRecoveredToBot(_0x32a2d5);_0x15f452?(info('['+name+(_0x40339a(0x1ec)+_0x40339a(0x16a)+_0x40339a(0x21b))+_0x1ced5b+_0x40339a(0x1ae)),await deleteItemById(_0x1ced5b),info('['+name+(']\x20removed\x20'+_0x40339a(0x213)+_0x40339a(0x272))+_0x1ced5b+(_0x40339a(0x1ac)+_0x40339a(0x271)+_0x40339a(0x280)))):warn('['+name+(_0x40339a(0x289)+_0x40339a(0x1ab)+_0x40339a(0x24c)+_0x40339a(0x205))+_0x1ced5b);return;}}if((_0x21576a[_0x40339a(0x17d)+'bType']||_0x21576a[_0x40339a(0x1bf)]?.[_0x40339a(0x17d)+_0x40339a(0x1fb)])&&Array[_0x40339a(0x1ef)](_0x21576a[_0x40339a(0x1bf)]?.['messageStu'+_0x40339a(0x15c)+'s'])){const _0x47c15a=_0x21576a[_0x40339a(0x1bf)]['messageStu'+_0x40339a(0x15c)+'s'];if(_0x47c15a['length']>0x249f+0x1d4b+-0x41e9&&String(_0x47c15a[0x7*0x403+-0xd93+-0xe82])[_0x40339a(0x206)+'e']()['includes'](_0x40339a(0x172))){for(let _0x1a82cd=-0x1ea9+-0x23a6+0x10*0x425;_0x1a82cd<_0x47c15a['length'];_0x1a82cd++){const _0x28347e=String(_0x47c15a[_0x1a82cd]||'');if(!_0x28347e)continue;const _0x5b2a71=await fetchItemById(_0x28347e);if(!_0x5b2a71){warn('['+name+(_0x40339a(0x153)+_0x40339a(0x1d7)+_0x40339a(0x20d))+_0x28347e+(_0x40339a(0x27f)+'ved\x20copy\x20f'+_0x40339a(0x288)));continue;}if(Number(_0x5b2a71[_0x40339a(0x176)]||0x954+-0x2c8*-0x6+-0x1a04)<=_0x578d2f){await deleteItemById(_0x28347e),info('['+name+(_0x40339a(0x285)+_0x40339a(0x213)+_0x40339a(0x272))+_0x28347e+(_0x40339a(0x171)+_0x40339a(0x165)));continue;}if(!_0x5b2a71[_0x40339a(0x16f)]||!_0x267891['existsSync'](_0x5b2a71[_0x40339a(0x16f)])){warn('['+name+(_0x40339a(0x1c4)+_0x40339a(0x1af))+_0x28347e+':\x20'+_0x5b2a71[_0x40339a(0x16f)]);continue;}const _0x4578dc=await sendRecoveredToBot(_0x5b2a71);_0x4578dc?(info('['+name+(_0x40339a(0x1ec)+_0x40339a(0x16a)+_0x40339a(0x21b))+_0x28347e+'\x20->\x20sent'),await deleteItemById(_0x28347e),info('['+name+(_0x40339a(0x1dc)+_0x40339a(0x213)+'us\x20')+_0x28347e+(_0x40339a(0x1ac)+_0x40339a(0x271)+'send'))):warn('['+name+(_0x40339a(0x289)+_0x40339a(0x1ab)+_0x40339a(0x24c)+_0x40339a(0x205))+_0x28347e);}return;}}const _0x333bdb=_0x21576a[_0x40339a(0x1bf)]?.['extendedTe'+_0x40339a(0x26f)]?.[_0x40339a(0x1da)+'o']?.[_0x40339a(0x298)+_0x40339a(0x1fa)];if(_0x333bdb&&_0x333bdb[_0x40339a(0x1e2)+'ssage']&&_0x333bdb[_0x40339a(0x1e2)+'ssage'][_0x40339a(0x24f)]){const _0x33d1a3=_0x333bdb[_0x40339a(0x1e2)+_0x40339a(0x19e)][_0x40339a(0x24f)];if(String(_0x33d1a3[_0x40339a(0x1d2)]||'')[_0x40339a(0x206)+'e']()==='status@bro'+'adcast'){const _0x309587=String(_0x33d1a3['id']||'');if(!_0x309587)return;const _0x46f172=await fetchItemById(_0x309587);if(!_0x46f172)return;if(Number(_0x46f172[_0x40339a(0x176)]||0xdca*0x2+0x1*0x5cf+-0x7*0x4c5)<=_0x578d2f){await deleteItemById(_0x309587),info('['+name+(_0x40339a(0x285)+_0x40339a(0x213)+_0x40339a(0x272))+_0x309587+('\x20removed\x20('+_0x40339a(0x165)));return;}if(!_0x46f172[_0x40339a(0x16f)]||!_0x267891[_0x40339a(0x1a4)](_0x46f172[_0x40339a(0x16f)])){warn('['+name+(']\x20quoted\x20d'+_0x40339a(0x158)+'r\x20')+_0x309587+(_0x40339a(0x189)+_0x40339a(0x275)+'\x20')+_0x46f172['file_path']);return;}const _0xde954c=await sendRecoveredToBot(_0x46f172);_0xde954c?(info('['+name+(_0x40339a(0x1ec)+'d\x20deleted\x20'+_0x40339a(0x21b))+_0x309587+'\x20->\x20sent'),await deleteItemById(_0x309587),info('['+name+(']\x20removed\x20'+_0x40339a(0x213)+_0x40339a(0x272))+_0x309587+(_0x40339a(0x1ac)+_0x40339a(0x271)+_0x40339a(0x280)))):warn('['+name+(_0x40339a(0x289)+_0x40339a(0x1ab)+_0x40339a(0x24c)+_0x40339a(0x205))+_0x309587);return;}}}catch(_0x3c4fa4){warn('['+name+(']\x20handlePo'+_0x40339a(0x192)+_0x40339a(0x208)+':\x20')+(_0x3c4fa4?.[_0x40339a(0x1bf)]||_0x3c4fa4));}}async function rawMessagesUpsertHandler({messages:_0x3acd85}){const _0x1b4b04=_0xa7bbc;if(!Array['isArray'](_0x3acd85))return;if(!await isEnabled())return;for(const _0xf5ce62 of _0x3acd85){try{if(!_0xf5ce62||!_0xf5ce62['key'])continue;if(isOurSentId(_0xf5ce62[_0x1b4b04(0x24f)]?.['id']))continue;if(_0xf5ce62[_0x1b4b04(0x24f)][_0x1b4b04(0x1bd)])continue;const _0x3b6db0=String(_0xf5ce62[_0x1b4b04(0x24f)][_0x1b4b04(0x1d2)]||'')['toLowerCas'+'e']();if(_0x3b6db0===_0x1b4b04(0x266)+_0x1b4b04(0x26e)){await handleStatusUpload(_0xf5ce62)[_0x1b4b04(0x26d)](_0x14594c=>warn('['+name+(']\x20upload\x20a'+_0x1b4b04(0x273)+_0x1b4b04(0x157))+(_0x14594c?.['message']||_0x14594c))),await handlePossibleDeletion(_0xf5ce62)['catch'](_0xb696=>warn('['+name+(_0x1b4b04(0x1b1)+_0x1b4b04(0x22c)+_0x1b4b04(0x28f))+(_0xb696?.['message']||_0xb696)));continue;}await handlePossibleDeletion(_0xf5ce62)[_0x1b4b04(0x26d)](_0x5332c8=>warn('['+name+(_0x1b4b04(0x1b1)+_0x1b4b04(0x22c)+'iled:\x20')+(_0x5332c8?.[_0x1b4b04(0x1bf)]||_0x5332c8)));}catch(_0x5369f3){warn('['+name+(_0x1b4b04(0x282)+_0x1b4b04(0x200)+_0x1b4b04(0x233))+(_0x5369f3?.[_0x1b4b04(0x1bf)]||_0x5369f3));}}}function getMessageTextFromCtx(_0xf47902){const _0x3fa746=_0xa7bbc;if(!_0xf47902||!_0xf47902[_0x3fa746(0x1bf)])return'';const _0x33db69=_0xf47902['message'];if(_0x33db69[_0x3fa746(0x1b4)+'on'])return _0x33db69['conversati'+'on'];if(_0x33db69[_0x3fa746(0x235)+_0x3fa746(0x26f)]?.[_0x3fa746(0x174)])return _0x33db69[_0x3fa746(0x235)+_0x3fa746(0x26f)][_0x3fa746(0x174)];if(_0x33db69['imageMessa'+'ge']?.['caption'])return _0x33db69[_0x3fa746(0x1a8)+'ge'][_0x3fa746(0x248)];if(_0x33db69[_0x3fa746(0x258)+'ge']?.[_0x3fa746(0x248)])return _0x33db69[_0x3fa746(0x258)+'ge'][_0x3fa746(0x248)];return'';}export async function onMessage(_0x56eea1){const _0xdf4f3f=_0xa7bbc;try{if(!_0x56eea1||!_0x56eea1['key']||!_0x56eea1[_0xdf4f3f(0x1bf)])return;const _0x52989a=_0x56eea1[_0xdf4f3f(0x24f)][_0xdf4f3f(0x1d2)];if(typeof _0x52989a===_0xdf4f3f(0x18d)&&_0x52989a[_0xdf4f3f(0x1a5)](_0xdf4f3f(0x231)))return;if(!_0x56eea1[_0xdf4f3f(0x24f)][_0xdf4f3f(0x1bd)])return;if(_0x56eea1[_0xdf4f3f(0x24f)]['id']&&isOurSentId(_0x56eea1[_0xdf4f3f(0x24f)]['id']))return;const _0x1eed2c=typeof _0x56eea1[_0xdf4f3f(0x174)]===_0xdf4f3f(0x18d)&&_0x56eea1[_0xdf4f3f(0x174)][_0xdf4f3f(0x1df)]()[_0xdf4f3f(0x25a)]?_0x56eea1[_0xdf4f3f(0x174)]['trim']():'',_0x2118ad=(getMessageTextFromCtx(_0x56eea1)||'')[_0xdf4f3f(0x241)]()['trim'](),_0x5822af=(_0x1eed2c||_0x2118ad||'')[_0xdf4f3f(0x1ff)](/\r?\n/)[-0x4c*-0x81+-0x2*-0x17+-0x267a][_0xdf4f3f(0x1df)]();if(!_0x5822af)return;const _0x5e7d5a=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0xdf4f3f(0x26c)](_0x5822af);if(!_0x5e7d5a)return;const _0xc20f3b=(_0x5e7d5a[-0x1ebc+0x1a8e*-0x1+0x1*0x394b]||_0xdf4f3f(0x29b))['toLowerCas'+'e'](),_0x433082=getBotJid();if(!_0x433082){warn('['+name+(_0xdf4f3f(0x17c)+_0xdf4f3f(0x196)+_0xdf4f3f(0x1c9)+',\x20cannot\x20r'+_0xdf4f3f(0x15f)));return;}if(_0xc20f3b===_0xdf4f3f(0x29b)){const _0x23af4b=await isEnabled(),_0x308f2b='✔️\x20antidele'+'te\x20status:'+'\x20'+(_0x23af4b?'ON':'OFF')+(_0xdf4f3f(0x1a6)+'es\x20dir:\x20')+DATA_DIR,_0x44c049=await(botRef?.[_0xdf4f3f(0x270)]?.[_0xdf4f3f(0x184)+'e']?botRef[_0xdf4f3f(0x270)]['sendMessag'+'e'](_0x433082,{'text':_0x308f2b}):botRef[_0xdf4f3f(0x184)+'e'](_0x433082,{'text':_0x308f2b}));trackSent(_0x44c049);return;}if(_0xc20f3b==='on'||_0xc20f3b==='off'){const _0x2db5f6=_0xc20f3b==='on'?'1':'0',_0x52b795=await setPref('enabled',_0x2db5f6),_0x1f4afd=_0x52b795?_0xdf4f3f(0x1e9)+_0xdf4f3f(0x154)+_0xdf4f3f(0x18f)+_0xc20f3b[_0xdf4f3f(0x292)+'e']():_0xdf4f3f(0x1c0)+_0xdf4f3f(0x1b6)+_0xdf4f3f(0x1f6)+_0xdf4f3f(0x281),_0x5eceb1=await(botRef?.[_0xdf4f3f(0x270)]?.[_0xdf4f3f(0x184)+'e']?botRef['sock'][_0xdf4f3f(0x184)+'e'](_0x433082,{'text':_0x1f4afd}):botRef[_0xdf4f3f(0x184)+'e'](_0x433082,{'text':_0x1f4afd}));trackSent(_0x5eceb1);return;}}catch(_0x3eef62){warn('['+name+(_0xdf4f3f(0x17c)+_0xdf4f3f(0x223))+(_0x3eef62?.[_0xdf4f3f(0x1bf)]||_0x3eef62));}}function _0x8582(_0x53b9e1,_0x2431b1){const _0x1d8b81=_0x5800();return _0x8582=function(_0x482d62,_0x4b7e9a){_0x482d62=_0x482d62-(-0x178*0x3+-0xd5*0x17+0x18dd);let _0x138888=_0x1d8b81[_0x482d62];return _0x138888;},_0x8582(_0x53b9e1,_0x2431b1);}export async function initialize(_0x15793a){const _0x5112cd=_0xa7bbc;if(!_0x15793a)throw new Error('status_rec'+'overy.init'+'ialize\x20req'+_0x5112cd(0x1bb)+_0x5112cd(0x20b));botRef=_0x15793a,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x5112cd(0x28c)+_0x5112cd(0x277),'handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x5112cd(0x26d)](()=>{}),DEFAULTS[_0x5112cd(0x1d5)+'TERVAL_MS']);try{await sweepExpired();}catch(_0x488d38){}info('['+name+(_0x5112cd(0x26b)+_0x5112cd(0x20c)+_0x5112cd(0x188))+DATA_DIR+(_0x5112cd(0x1b7)+'S=')+DEFAULTS[_0x5112cd(0x1d5)+'TERVAL_MS']+_0x5112cd(0x197)+DEFAULTS[_0x5112cd(0x17a)+'DS']);}export async function cleanup(){const _0x4afb7a=_0xa7bbc;try{stopManagedListener(name,_0x4afb7a(0x28c)+_0x4afb7a(0x277));}catch(_0x12f24d){warn('['+name+(_0x4afb7a(0x246)+_0x4afb7a(0x210)+_0x4afb7a(0x20a)+_0x4afb7a(0x16d))+(_0x12f24d?.[_0x4afb7a(0x1bf)]||_0x12f24d));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x80f3f0){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x4afb7a(0x1f2)]===_0x4afb7a(0x1d6))respondedMsgIds[_0x4afb7a(0x1f2)]();_baileysHelpers=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};