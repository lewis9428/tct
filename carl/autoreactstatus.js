const _0x212914=_0x7c38;(function(_0x58a0ba,_0x15236){const _0x44833d=_0x7c38,_0x2b3655=_0x58a0ba();while(!![]){try{const _0x1d2db9=-parseInt(_0x44833d(0x24d))/(0xe6c+0x586*-0x7+-0x1*-0x183f)+parseInt(_0x44833d(0x1d1))/(-0x2210+0x2e7+0x4f*0x65)+-parseInt(_0x44833d(0x225))/(-0xb*-0x101+0x4b3*0x7+-0x2bed)+parseInt(_0x44833d(0x261))/(0xd98+-0x1fc1+0x122d)+-parseInt(_0x44833d(0x20a))/(0x1ad2+0x11f*0x1a+-0x1*0x37f3)+-parseInt(_0x44833d(0x1a6))/(-0x16e+0x12b5+0x7*-0x277)*(parseInt(_0x44833d(0x1e4))/(0x16c5+0x79*-0x7+-0x136f))+parseInt(_0x44833d(0x20e))/(-0x19cd+0x22b2+-0x8dd);if(_0x1d2db9===_0x15236)break;else _0x2b3655['push'](_0x2b3655['shift']());}catch(_0x54426c){_0x2b3655['push'](_0x2b3655['shift']());}}}(_0x10e7,-0x4df09+-0x1*-0x11554+0x6888e));import{info,warn}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';function _0x10e7(){const _0x1254cd=[']\x20sendStat','name','d\x20confirma','ted_at\x20col','filter','value,\x20upd','\x20available',']\x20saveEnab',',\x20?,\x20?)\x0a\x20\x20','INTEGER\x20DE',']\x20cleanup\x20','=excluded.','default\x20en','text','246339RlxhtB','O\x20autoreac','at\x20INTEGER','hod\x20availa','map','seMessage','catch',']\x20Failed\x20t','isCommand','led:\x20','gistration','tatus','essage\x20API','remoteJid','AUTOREACT_','[autoreact','oreact_pre','s\x20reaction','urrent\x20Sta','refs\x27)','w\x20current\x20','STATUS','now','tuses\x0a','true','ror:\x20','trim','listRespon',',\x20reaction',']\x20onMessag',']\x20cleaned\x20','_USER','*\x0aMin\x20Inte','E\x20autoreac','REPLACE\x20IN','conversati','tatus.init','[unknown]','ALTER\x20TABL','updated_at','38784OqHyOB',')\x20VALUES\x20(',']\x20fallback','DB\x20error).','ctReply','all','MIN_INTERV','\x20for\x20statu','dated_at).','abled=fals','\x20to\x20status','state/conf','continue):','slice','t)\x20VALUES\x20','ilable.','LE\x20IF\x20NOT\x20','psert','statusJidL','1.2.0','990944jiXjTU','key,\x20value','instance','ct_prefs\x20(','o\x20enable\x20(','ledToDb\x20er','t\x20user:\x20','valMs=','join',']\x20failed\x20t','singleSele','\x20(fallback','\x27false\x27)','LL,\x0a\x20\x20\x20\x20\x20\x20','function','CREATE\x20TAB','*AutoReact','Usage\x20(PM\x20','ey,\x20value,','messages.u','ing\x20to\x20sta','table\x20auto','key','DISABLED','sock','ue\x20FROM\x20au','IGNORE_BOT',']\x20saved\x20en','toLowerCas','\x20\x20updated_','le_info(\x27a','\x20\x20\x20value\x20T','SELECT\x20val','\x20from\x20','string','\x20?)','set','ttonId','toreact_pr','tion','te:\x20*','_prefs:\x20ad','\x0a\x20\x20\x20\x20\x20\x20);','state','random',']\x20refreshC','1689162ZJGfHt','EXISTS\x20aut','iled:\x20','boolean','bled\x20row\x20f','INSERT\x20INT','disable','fromMe','\x20DO\x20UPDATE','participan','INSERT\x20OR\x20','eactions:\x20','\x20autoreact',']\x20ensure\x20d','aded\x20confi','FAULT\x200','\x0aIgnore\x20bo','able\x20react','error:\x20','pdated_at)','e\x20(fallbac','sureTable)',']\x20migrated','ailed:\x20','(\x27enabled\x27','le\x20\x20->\x20dis','irmation\x20f','buttonsRes','e\x20bot\x20JID\x20',']\x20hotReloa','alization\x20','length','sendMessag','\x20\x20\x20\x20ON\x20CON','T\x20PRIMARY\x20','ated_at=ex','imageMessa','utoreact_p','xtMessage','enable','t_prefs\x20(k','\x20\x20\x20key\x20TEX','uires\x20bot\x20','188136tztFWO',']\x20Enabled.','ble\x20reacti','ated_at','t_prefs\x20AD','message','\x20status\x20\x20\x20','off',']\x20DB\x20initi','\x20updated_a','o\x20disable\x20','\x20without\x20u','usReaction',']\x20Disabled','REACTIONS','adcast','get','false','ng\x20to\x20stat','7rDfZnK','\x20failed:\x20','failed\x20(en','autoReactS','selectedRo','isArray','ledToDb\x20fa','split','ledFromDb\x20','value','fs\x20(\x0a\x20\x20\x20\x20\x20','dConfig\x20re','floor','umn','TO\x20autorea','videoMessa','key=\x27enabl',']\x20Cannot\x20r','ndler\x20erro','r:\x20','run','pdated_at\x20','ialize\x20req','s\x20(with\x20up','k\x20insert).','\x20off|disab','caption','extendedTe','selectedBu','\x0aTerminalR','\x27enabled\x27,','\x20on|enable','has',']\x20ensureTa','ner\x20becaus','\x20insert\x20fa','rval\x20(ms):','abled=','1776800sjHBLE','efault\x20ena','AL_MS',']\x20messages','4767272gofHqN',']\x20hot-relo',']\x20created\x20',']\x20no\x20sendM','cluded.upd',']\x20inner\x20ha','ed\x27\x20LIMIT\x20','efs\x20WHERE\x20','includes'];_0x10e7=function(){return _0x1254cd;};return _0x10e7();}function _0x7c38(_0x501a03,_0x31ca11){const _0x169c21=_0x10e7();return _0x7c38=function(_0x100b23,_0x19f3f6){_0x100b23=_0x100b23-(-0xfb9+-0x2af+0x13fc);let _0x439b09=_0x169c21[_0x100b23];return _0x439b09;},_0x7c38(_0x501a03,_0x31ca11);}import{isSudo}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{isJidGroup}from'@whiskeysockets/baileys';export const name=_0x212914(0x1e7)+_0x212914(0x230);export const version=_0x212914(0x260);export const priority=0x1*0x1052+0x1e87+-0x2e8a;export const configKeys=['AUTOREACT_'+_0x212914(0x23a)];export const commands=['autoreact'];const FALLBACKS={'MIN_INTERVAL_MS':0x1388,'REACTIONS':['ðŸš€','ðŸŒŽ','â™»ï¸'],'IGNORE_BOT_USER':![]};let botRef=null,shuttingDown=![],lastReactionTime=0x8e*-0x13+0x255*0x1+0x835,messageHandler=null;const CFG={'MIN_INTERVAL_MS':FALLBACKS[_0x212914(0x253)+_0x212914(0x20c)],'REACTIONS':FALLBACKS[_0x212914(0x1df)][_0x212914(0x25a)](),'IGNORE_BOT_USER':FALLBACKS[_0x212914(0x27b)+_0x212914(0x244)]};function refreshConfig(){const _0x281ea2=_0x212914;try{const _0x150d91=getConfig()||{},_0x4928c3=_0x150d91&&_0x150d91[_0x281ea2(0x233)+'STATUS']?_0x150d91['AUTOREACT_'+_0x281ea2(0x23a)]:{};CFG[_0x281ea2(0x253)+_0x281ea2(0x20c)]=Number(_0x4928c3[_0x281ea2(0x253)+_0x281ea2(0x20c)])||CFG[_0x281ea2(0x253)+_0x281ea2(0x20c)],CFG['IGNORE_BOT'+_0x281ea2(0x244)]=typeof _0x4928c3[_0x281ea2(0x27b)+_0x281ea2(0x244)]===_0x281ea2(0x1a9)?_0x4928c3[_0x281ea2(0x27b)+_0x281ea2(0x244)]:CFG[_0x281ea2(0x27b)+_0x281ea2(0x244)];if(Array[_0x281ea2(0x1e9)](_0x4928c3[_0x281ea2(0x1df)])&&_0x4928c3[_0x281ea2(0x1df)][_0x281ea2(0x1c5)]>-0x22b8+0xbbc*0x1+0x16fc)CFG[_0x281ea2(0x1df)]=_0x4928c3[_0x281ea2(0x1df)][_0x281ea2(0x25a)]();else typeof _0x4928c3[_0x281ea2(0x1df)]===_0x281ea2(0x19a)&&_0x4928c3['REACTIONS']['trim']()[_0x281ea2(0x1c5)]>0x1034+0xd*0x52+-0x145e&&(CFG[_0x281ea2(0x1df)]=_0x4928c3[_0x281ea2(0x1df)]['split'](',')[_0x281ea2(0x229)](_0x375ae3=>_0x375ae3['trim']())[_0x281ea2(0x21b)](Boolean));}catch(_0x5953f8){warn('['+name+(_0x281ea2(0x1a5)+'onfig\x20erro'+'r:\x20')+(_0x5953f8?.[_0x281ea2(0x1d6)]||_0x5953f8));}}try{hotReloadConfig&&hotReloadConfig(()=>{const _0x26bc9c=_0x212914;refreshConfig(),info('['+name+(_0x26bc9c(0x20f)+_0x26bc9c(0x1b4)+'g.'));});}catch(_0x28db82){warn('['+name+(_0x212914(0x1c3)+_0x212914(0x1ef)+_0x212914(0x22f)+_0x212914(0x1e5))+(_0x28db82?.['message']||_0x28db82));}refreshConfig();async function ensureTable(){const _0x67ac2c=_0x212914;try{let _0x3480e8=[];try{const _0x44bc1e=await db[_0x67ac2c(0x252)]('PRAGMA\x20tab'+_0x67ac2c(0x196)+_0x67ac2c(0x1cb)+_0x67ac2c(0x238));_0x3480e8=(_0x44bc1e||[])[_0x67ac2c(0x229)](_0x2386d9=>_0x2386d9[_0x67ac2c(0x218)]);}catch(_0x3e1d04){_0x3480e8=[];}if(!_0x3480e8[_0x67ac2c(0x1c5)])await db['exec'](_0x67ac2c(0x270)+_0x67ac2c(0x25d)+_0x67ac2c(0x1a7)+_0x67ac2c(0x235)+_0x67ac2c(0x1ee)+_0x67ac2c(0x1cf)+_0x67ac2c(0x1c8)+'KEY,\x0a\x20\x20\x20\x20\x20'+_0x67ac2c(0x197)+'EXT\x20NOT\x20NU'+_0x67ac2c(0x26e)+_0x67ac2c(0x195)+_0x67ac2c(0x227)+'\x20DEFAULT\x200'+_0x67ac2c(0x1a2)),info('['+name+(_0x67ac2c(0x210)+_0x67ac2c(0x276)+'react_pref'+_0x67ac2c(0x1fb)+_0x67ac2c(0x255))),_0x3480e8=[_0x67ac2c(0x277),_0x67ac2c(0x1ed),_0x67ac2c(0x24c)];else{if(!_0x3480e8[_0x67ac2c(0x216)](_0x67ac2c(0x24c)))try{await db[_0x67ac2c(0x1f8)](_0x67ac2c(0x24b)+_0x67ac2c(0x246)+_0x67ac2c(0x1d5)+'D\x20COLUMN\x20u'+_0x67ac2c(0x1f9)+_0x67ac2c(0x220)+_0x67ac2c(0x1b5)),info('['+name+(_0x67ac2c(0x1bc)+_0x67ac2c(0x1b2)+_0x67ac2c(0x1a1)+'ded\x20column'+'\x20updated_a'+'t.'));}catch(_0x42f66b){warn('['+name+(_0x67ac2c(0x26a)+'o\x20add\x20upda'+_0x67ac2c(0x21a)+'umn\x20(will\x20'+_0x67ac2c(0x259)+'\x20')+(_0x42f66b?.[_0x67ac2c(0x1d6)]||_0x42f66b));}}try{const _0x3424a4=await db['get'](_0x67ac2c(0x198)+'ue\x20FROM\x20au'+'toreact_pr'+'efs\x20WHERE\x20'+_0x67ac2c(0x1f4)+'ed\x27');if(!_0x3424a4){const _0x1119ec=Math[_0x67ac2c(0x1f0)](Date['now']()/(-0x2ab*0x9+0x2*-0x1004+0x3bf3));await db['run']('INSERT\x20INT'+_0x67ac2c(0x226)+_0x67ac2c(0x1ce)+_0x67ac2c(0x273)+'\x20updated_a'+_0x67ac2c(0x25b)+_0x67ac2c(0x1be)+',\x27false\x27,\x20'+'?)',[_0x1119ec]),info('['+name+(_0x67ac2c(0x210)+'default\x20en'+_0x67ac2c(0x256)+'e'));}}catch(_0x361fdf){const _0x35f2b4=String(_0x361fdf?.[_0x67ac2c(0x1d6)]||'')[_0x67ac2c(0x194)+'e']();if(_0x35f2b4['includes']('no\x20column')||_0x35f2b4['includes']('has\x20no\x20col'+_0x67ac2c(0x1f1)))try{const _0x3635cc=Math[_0x67ac2c(0x1f0)](Date[_0x67ac2c(0x23b)]()/(0x6c8+0x1aa3+-0x1d83));await db[_0x67ac2c(0x1f8)]('INSERT\x20OR\x20'+_0x67ac2c(0x247)+_0x67ac2c(0x1f2)+_0x67ac2c(0x264)+'key,\x20value'+')\x20VALUES\x20('+'\x27enabled\x27,'+_0x67ac2c(0x26d)),info('['+name+(_0x67ac2c(0x210)+_0x67ac2c(0x223)+_0x67ac2c(0x256)+_0x67ac2c(0x1ba)+_0x67ac2c(0x1fc)));}catch(_0x2c8d3a){warn('['+name+(_0x67ac2c(0x24f)+_0x67ac2c(0x207)+_0x67ac2c(0x1a8))+(_0x2c8d3a?.[_0x67ac2c(0x1d6)]||_0x2c8d3a));}else warn('['+name+(_0x67ac2c(0x1b3)+_0x67ac2c(0x20b)+_0x67ac2c(0x1aa)+'ailed:\x20')+(_0x361fdf?.[_0x67ac2c(0x1d6)]||_0x361fdf));}}catch(_0x2a1949){warn('['+name+(_0x67ac2c(0x205)+'ble\x20error:'+'\x20')+(_0x2a1949?.['message']||_0x2a1949));throw _0x2a1949;}}async function readEnabledFromDb(){const _0x17be46=_0x212914;try{const _0x5ae6cd=await db[_0x17be46(0x1e1)]('SELECT\x20val'+_0x17be46(0x27a)+_0x17be46(0x19e)+_0x17be46(0x215)+_0x17be46(0x1f4)+_0x17be46(0x214)+'1');if(!_0x5ae6cd)return![];const _0x397dda=String(_0x5ae6cd[_0x17be46(0x1ed)])['toLowerCas'+'e']();return _0x397dda===_0x17be46(0x23d)||_0x397dda==='1';}catch(_0x4211cf){return warn('['+name+(']\x20readEnab'+_0x17be46(0x1ec)+_0x17be46(0x1b8))+(_0x4211cf?.['message']||_0x4211cf)),![];}}async function saveEnabledToDb(_0x108715){const _0x59536e=_0x212914;try{const _0x38e420=_0x108715?'true':_0x59536e(0x1e2),_0x1f7262=Math[_0x59536e(0x1f0)](Date[_0x59536e(0x23b)]()/(0x1f78+0x1073*0x1+0x2c03*-0x1));return await db[_0x59536e(0x1f8)](_0x59536e(0x1ab)+'O\x20autoreac'+'t_prefs\x20(k'+'ey,\x20value,'+_0x59536e(0x1da)+_0x59536e(0x25b)+_0x59536e(0x1be)+_0x59536e(0x21f)+_0x59536e(0x1c7)+'FLICT(key)'+_0x59536e(0x1ae)+'\x20SET\x20value'+_0x59536e(0x222)+_0x59536e(0x21c)+_0x59536e(0x1c9)+_0x59536e(0x212)+_0x59536e(0x1d4),[_0x38e420,_0x1f7262]),info('['+name+(_0x59536e(0x27c)+_0x59536e(0x209))+_0x38e420),!![];}catch(_0x1d6a24){const _0x1a255b=String(_0x1d6a24?.[_0x59536e(0x1d6)]||'')[_0x59536e(0x194)+'e']();if(_0x1a255b['includes']('has\x20no\x20col'+_0x59536e(0x1f1))||_0x1a255b[_0x59536e(0x216)]('no\x20column'))try{return await db[_0x59536e(0x1f8)](_0x59536e(0x1b0)+_0x59536e(0x247)+_0x59536e(0x1f2)+_0x59536e(0x264)+_0x59536e(0x262)+_0x59536e(0x24e)+_0x59536e(0x202)+_0x59536e(0x19b),[val]),info('['+name+(_0x59536e(0x27c)+_0x59536e(0x209))+val+(_0x59536e(0x26c)+_0x59536e(0x1dc)+_0x59536e(0x1b9))),!![];}catch(_0x20c19b){return warn('['+name+(_0x59536e(0x21e)+_0x59536e(0x1ea)+'llback\x20fai'+_0x59536e(0x22e))+(_0x20c19b?.[_0x59536e(0x1d6)]||_0x20c19b)),![];}return warn('['+name+(_0x59536e(0x21e)+_0x59536e(0x266)+_0x59536e(0x23e))+(_0x1d6a24?.[_0x59536e(0x1d6)]||_0x1d6a24)),![];}}function pickReactionEmoji(){const _0xd243b7=_0x212914;if(!Array[_0xd243b7(0x1e9)](CFG[_0xd243b7(0x1df)])||CFG[_0xd243b7(0x1df)][_0xd243b7(0x1c5)]===-0x1097+0x80+0x3*0x55d)return null;return CFG[_0xd243b7(0x1df)][Math[_0xd243b7(0x1f0)](Math[_0xd243b7(0x1a4)]()*CFG[_0xd243b7(0x1df)][_0xd243b7(0x1c5)])];}async function sendStatusReaction(_0x30fd91,_0xc0b2b6,_0x192013){const _0x174b57=_0x212914;if(!_0x30fd91||!_0x30fd91[_0x174b57(0x277)]||!_0xc0b2b6)return![];const _0x2c2e2e=_0x30fd91[_0x174b57(0x277)][_0x174b57(0x232)],_0x12f1c2=_0x30fd91[_0x174b57(0x277)][_0x174b57(0x1af)+'t'];try{const _0x3391d3={};if(_0x12f1c2||_0x192013)_0x3391d3[_0x174b57(0x25f)+'ist']=[_0x12f1c2,_0x192013][_0x174b57(0x21b)](Boolean);if(botRef&&botRef[_0x174b57(0x279)]&&typeof botRef[_0x174b57(0x279)][_0x174b57(0x1c6)+'e']===_0x174b57(0x26f))return await botRef[_0x174b57(0x279)][_0x174b57(0x1c6)+'e'](_0x2c2e2e,{'react':{'key':_0x30fd91[_0x174b57(0x277)],'text':_0xc0b2b6}},_0x3391d3),!![];else return botRef&&typeof botRef[_0x174b57(0x1c6)+'e']===_0x174b57(0x26f)?(await botRef[_0x174b57(0x1c6)+'e'](_0x2c2e2e,{'react':{'key':_0x30fd91[_0x174b57(0x277)],'text':_0xc0b2b6}},_0x3391d3),!![]):(warn('['+name+(']\x20no\x20sendM'+_0x174b57(0x231)+_0x174b57(0x21d)+_0x174b57(0x254)+_0x174b57(0x236))),![]);}catch(_0x557121){return warn('['+name+(_0x174b57(0x217)+_0x174b57(0x1dd)+'\x20failed:\x20')+(_0x557121?.[_0x174b57(0x1d6)]||_0x557121)),![];}}function createMessageHandler(){return async function _0x344099(_0x439715){const _0x24691e=_0x7c38;try{if(shuttingDown)return;refreshConfig();const _0x16436d=await readEnabledFromDb();if(!_0x16436d)return;const {messages:_0x11328b}=_0x439715||{};if(!Array[_0x24691e(0x1e9)](_0x11328b)||_0x11328b[_0x24691e(0x1c5)]===-0x265c+-0x2626+0x4c82)return;const _0x4e68c7=Date[_0x24691e(0x23b)](),_0x288dd6=getBotJid();if(!_0x288dd6&&CFG[_0x24691e(0x27b)+'_USER'])return;for(const _0x4a752b of _0x11328b){try{if(!_0x4a752b||!_0x4a752b[_0x24691e(0x277)])continue;if(_0x4a752b['key'][_0x24691e(0x232)]!=='status@bro'+_0x24691e(0x1e0))continue;if(_0x4e68c7-lastReactionTime<Number(CFG[_0x24691e(0x253)+_0x24691e(0x20c)]||FALLBACKS['MIN_INTERV'+'AL_MS']))continue;const _0x585077=pickReactionEmoji();if(!_0x585077)continue;const _0x55fc8b=await sendStatusReaction(_0x4a752b,_0x585077,_0x288dd6);_0x55fc8b&&(lastReactionTime=Date[_0x24691e(0x23b)](),info('['+name+']\x20reacted\x20'+_0x585077+(_0x24691e(0x257)+_0x24691e(0x199))+(_0x4a752b[_0x24691e(0x277)][_0x24691e(0x1af)+'t']||_0x24691e(0x24a))),await new Promise(_0x268747=>setTimeout(_0x268747,0x38*-0x43+-0x1*0x29d+0x1339*0x1)));}catch(_0x4b436b){warn('['+name+(_0x24691e(0x213)+'ndler\x20erro'+_0x24691e(0x1f7))+(_0x4b436b?.[_0x24691e(0x1d6)]||_0x4b436b));}}}catch(_0x536722){warn('['+name+(_0x24691e(0x20d)+'.upsert\x20ha'+_0x24691e(0x1f6)+_0x24691e(0x1f7))+(_0x536722?.['message']||_0x536722));}};}const processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x3ca*0x4+0x626*-0x3+0x21b8)*(-0x2633+0x1cd2+0x1*0xd49);function markCmdProcessed(_0x1d1a28){const _0x4f82ac=_0x212914;if(!_0x1d1a28)return;if(processedCmdKeys[_0x4f82ac(0x204)](_0x1d1a28))try{clearTimeout(processedCmdKeys['get'](_0x1d1a28));}catch(_0x254fb8){};const _0x13c5af=setTimeout(()=>processedCmdKeys['delete'](_0x1d1a28),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x4f82ac(0x19c)](_0x1d1a28,_0x13c5af);}function isCmdProcessed(_0x2cd899){return _0x2cd899&&processedCmdKeys['has'](_0x2cd899);}export async function onMessage(_0x1e2f8f){const _0x556bdc=_0x212914;try{if(!_0x1e2f8f||!_0x1e2f8f[_0x556bdc(0x277)]||!_0x1e2f8f[_0x556bdc(0x1d6)]||!_0x1e2f8f[_0x556bdc(0x22d)])return;if(isJidGroup(_0x1e2f8f[_0x556bdc(0x277)]['remoteJid']))return;const _0x50bfa8=_0x1e2f8f[_0x556bdc(0x277)][_0x556bdc(0x1ad)],_0x2df9cd=await isSudo(botRef,_0x1e2f8f)[_0x556bdc(0x22b)](()=>![]);if(!_0x50bfa8&&!_0x2df9cd)return;let _0x4ef284;if(_0x50bfa8){_0x4ef284=getBotJid();if(!_0x4ef284){warn('['+name+(_0x556bdc(0x1f5)+'eply\x20to\x20ow'+_0x556bdc(0x206)+_0x556bdc(0x1c2)+'is\x20not\x20ava'+_0x556bdc(0x25c)));return;}}else _0x4ef284=_0x1e2f8f[_0x556bdc(0x277)][_0x556bdc(0x232)];const _0x1dbaae=String(_0x1e2f8f[_0x556bdc(0x277)][_0x556bdc(0x232)]||'')+'::'+String(_0x1e2f8f[_0x556bdc(0x277)]['id']||_0x1e2f8f['key']['participan'+'t']||'');if(isCmdProcessed(_0x1dbaae))return;markCmdProcessed(_0x1dbaae);const _0x451442=typeof _0x1e2f8f[_0x556bdc(0x224)]===_0x556bdc(0x19a)&&_0x1e2f8f[_0x556bdc(0x224)][_0x556bdc(0x23f)]()[_0x556bdc(0x1c5)]?_0x1e2f8f[_0x556bdc(0x224)][_0x556bdc(0x23f)]():function _0x7e922c(_0x3d390a){const _0x19aa70=_0x556bdc;if(!_0x3d390a||!_0x3d390a[_0x19aa70(0x1d6)])return'';const _0x3805ea=_0x3d390a['message'];if(_0x3805ea[_0x19aa70(0x248)+'on'])return _0x3805ea['conversati'+'on'];if(_0x3805ea[_0x19aa70(0x1ff)+_0x19aa70(0x1cc)]?.[_0x19aa70(0x224)])return _0x3805ea[_0x19aa70(0x1ff)+_0x19aa70(0x1cc)][_0x19aa70(0x224)];if(_0x3805ea[_0x19aa70(0x1ca)+'ge']?.['caption'])return _0x3805ea[_0x19aa70(0x1ca)+'ge'][_0x19aa70(0x1fe)];if(_0x3805ea['videoMessa'+'ge']?.[_0x19aa70(0x1fe)])return _0x3805ea[_0x19aa70(0x1f3)+'ge'][_0x19aa70(0x1fe)];if(_0x3805ea[_0x19aa70(0x1c1)+'ponseMessa'+'ge']?.[_0x19aa70(0x200)+'ttonId'])return _0x3805ea[_0x19aa70(0x1c1)+'ponseMessa'+'ge'][_0x19aa70(0x200)+_0x19aa70(0x19d)];if(_0x3805ea[_0x19aa70(0x240)+'seMessage']?.[_0x19aa70(0x26b)+_0x19aa70(0x251)]?.[_0x19aa70(0x1e8)+'wId'])return _0x3805ea['listRespon'+_0x19aa70(0x22a)][_0x19aa70(0x26b)+_0x19aa70(0x251)][_0x19aa70(0x1e8)+'wId'];return'';}(_0x1e2f8f)||'';if(!_0x451442)return;const _0x2740b6=(_0x451442[_0x556bdc(0x1eb)](/\r?\n/)[-0x1*0x15c7+-0xf9f*0x1+0x2*0x12b3]||'')[_0x556bdc(0x23f)](),_0x5ab216=_0x2740b6[_0x556bdc(0x1eb)](/\s+/),_0x59c5e5=(_0x5ab216[-0x1*-0x1f3d+0x1aec*-0x1+-0x451]||'')['toLowerCas'+'e']();if(!commands[_0x556bdc(0x216)](_0x59c5e5))return;const _0x2d914c=(_0x5ab216[-0xd99+-0x6bb*-0x5+-0x140d]||'')[_0x556bdc(0x194)+'e']();if(['on',_0x556bdc(0x1cd),_0x556bdc(0x23d),'1']['includes'](_0x2d914c)){const _0x111eba=await saveEnabledToDb(!![]);if(_0x111eba)await sendConfirmation(_0x4ef284,_0x556bdc(0x234)+_0x556bdc(0x1d2));else await sendConfirmation(_0x4ef284,_0x556bdc(0x234)+']\x20Failed\x20t'+_0x556bdc(0x265)+_0x556bdc(0x250));return;}if([_0x556bdc(0x1d8),_0x556bdc(0x1ac),_0x556bdc(0x1e2),'0'][_0x556bdc(0x216)](_0x2d914c)){const _0x105807=await saveEnabledToDb(![]);if(_0x105807)await sendConfirmation(_0x4ef284,_0x556bdc(0x234)+_0x556bdc(0x1de)+'.');else await sendConfirmation(_0x4ef284,_0x556bdc(0x234)+_0x556bdc(0x22c)+_0x556bdc(0x1db)+'(DB\x20error)'+'.');return;}if(_0x2d914c==='status'||_0x2d914c===_0x556bdc(0x1a3)||!_0x2d914c){const _0x3b0c21=await readEnabledFromDb(),_0x2255d8=_0x3b0c21?'ENABLED':_0x556bdc(0x278);await sendConfirmation(_0x4ef284,_0x556bdc(0x271)+'Status\x20(PM'+'-only)*\x0a\x0aC'+_0x556bdc(0x237)+_0x556bdc(0x1a0)+_0x2255d8+(_0x556bdc(0x245)+_0x556bdc(0x208)+'\x20')+CFG[_0x556bdc(0x253)+_0x556bdc(0x20c)]+(_0x556bdc(0x201)+_0x556bdc(0x1b1))+CFG['REACTIONS'][_0x556bdc(0x269)]('\x20')+(_0x556bdc(0x1b6)+_0x556bdc(0x267))+CFG['IGNORE_BOT'+_0x556bdc(0x244)]);return;}await sendConfirmation(_0x4ef284,_0x556bdc(0x272)+'only):\x0a'+(_0x556bdc(0x1b2)+_0x556bdc(0x203)+'\x20\x20\x20\x20->\x20ena'+_0x556bdc(0x1d3)+_0x556bdc(0x1e3)+'uses\x0a')+(_0x556bdc(0x1b2)+_0x556bdc(0x1fd)+_0x556bdc(0x1bf)+_0x556bdc(0x1b7)+_0x556bdc(0x275)+_0x556bdc(0x23c))+(_0x556bdc(0x1b2)+_0x556bdc(0x1d7)+'\x20\x20\x20\x20->\x20sho'+_0x556bdc(0x239)+_0x556bdc(0x258)+'ig'));}catch(_0x5602d8){warn('['+name+(_0x556bdc(0x242)+'e\x20error:\x20')+(_0x5602d8?.[_0x556bdc(0x1d6)]||_0x5602d8));}}async function sendConfirmation(_0xdc361b,_0x244a3d){const _0x7b3015=_0x212914;try{if(!_0xdc361b)return;if(botRef&&botRef[_0x7b3015(0x279)]&&typeof botRef['sock'][_0x7b3015(0x1c6)+'e']===_0x7b3015(0x26f))await botRef['sock'][_0x7b3015(0x1c6)+'e'](_0xdc361b,{'text':_0x244a3d});else botRef&&typeof botRef[_0x7b3015(0x1c6)+'e']===_0x7b3015(0x26f)?await botRef['sendMessag'+'e'](_0xdc361b,{'text':_0x244a3d}):warn('['+name+(_0x7b3015(0x211)+'essage\x20met'+_0x7b3015(0x228)+'ble\x20to\x20sen'+_0x7b3015(0x219)+_0x7b3015(0x19f)));}catch(_0x20a705){warn('['+name+(']\x20sendConf'+_0x7b3015(0x1c0)+_0x7b3015(0x1bd))+(_0x20a705?.[_0x7b3015(0x1d6)]||_0x20a705));}}export async function initialize(_0x480006){const _0x2bef9e=_0x212914;if(!_0x480006)throw new Error(_0x2bef9e(0x1e7)+_0x2bef9e(0x249)+_0x2bef9e(0x1fa)+_0x2bef9e(0x1d0)+_0x2bef9e(0x263));botRef=_0x480006,shuttingDown=![],refreshConfig(),await ensureTable()[_0x2bef9e(0x22b)](_0x5b5370=>{const _0x388cda=_0x2bef9e;warn('['+name+(_0x388cda(0x1d9)+_0x388cda(0x1c4)+_0x388cda(0x1e6)+_0x388cda(0x1bb)+':\x20')+(_0x5b5370?.[_0x388cda(0x1d6)]||_0x5b5370));});const _0x2a0b42=await readEnabledFromDb();messageHandler=createMessageHandler(),startManagedListener({'botRef':botRef,'eventName':'messages.u'+_0x2bef9e(0x25e),'handler':messageHandler,'moduleName':name}),info('['+name+(']\x20initiali'+'zed\x20(DB-ba'+'sed).\x20enab'+'led=')+(_0x2a0b42?_0x2bef9e(0x23d):'false')+(',\x20MinInter'+_0x2bef9e(0x268))+CFG[_0x2bef9e(0x253)+'AL_MS']+(_0x2bef9e(0x241)+'s=')+CFG[_0x2bef9e(0x1df)]['join']('\x20'));}export async function cleanup(){const _0x3c8f25=_0x212914;try{stopManagedListener(name,_0x3c8f25(0x274)+_0x3c8f25(0x25e)),shuttingDown=!![],lastReactionTime=0xa1a*-0x1+0x2061+-0x1647*0x1,messageHandler=null;}catch(_0x3c8b2e){warn('['+name+(_0x3c8f25(0x221)+_0x3c8f25(0x1b8))+(_0x3c8b2e?.['message']||_0x3c8b2e));}finally{botRef=null,info('['+name+(_0x3c8f25(0x243)+'up'));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};