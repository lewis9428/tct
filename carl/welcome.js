const _0x1042ea=_0x1aef;(function(_0x77f82,_0x4bb722){const _0x2bd204=_0x1aef,_0x3fe11b=_0x77f82();while(!![]){try{const _0x3ac79e=-parseInt(_0x2bd204(0x1a2))/(0x2*0x139+0x6*0x577+0x1d*-0x137)*(parseInt(_0x2bd204(0x87))/(-0x7fb+0x25*0xbf+-0x139e))+-parseInt(_0x2bd204(0x186))/(0xcf*-0xb+-0x8*-0x266+-0xa48)*(parseInt(_0x2bd204(0xe9))/(0x1e3f+0x119*-0x13+-0xc8*0xc))+parseInt(_0x2bd204(0x136))/(-0xd*-0x47+-0x166*0x8+-0x2*-0x3cd)*(-parseInt(_0x2bd204(0x18d))/(-0x137f+0x35*-0x1d+-0x129*-0x16))+parseInt(_0x2bd204(0x10b))/(0x2b3*0x3+-0xe3d+-0x62b*-0x1)+parseInt(_0x2bd204(0xc3))/(-0x1f9*0xb+-0x1*-0x7b0+0xe0b)*(-parseInt(_0x2bd204(0xee))/(0x1*0x2543+0x7a0+-0x2cda))+-parseInt(_0x2bd204(0x166))/(-0x34f*0x1+0x1c0*-0x11+-0x2119*-0x1)+parseInt(_0x2bd204(0x97))/(-0x2379+-0x239*0x6+0x30da)*(parseInt(_0x2bd204(0xb5))/(0x6f8+0x22af+-0x299b));if(_0x3ac79e===_0x4bb722)break;else _0x3fe11b['push'](_0x3fe11b['shift']());}catch(_0x2a6ec3){_0x3fe11b['push'](_0x3fe11b['shift']());}}}(_0x5cce,-0xb9a32+0x1003b+-0x3074e*-0x6));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x4b85cb from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='welcome';export const version=_0x1042ea(0xd0);export const priority=0x12c8+-0x839+0xa15*-0x1;export const configKeys=[_0x1042ea(0xe4)];export const commands=[_0x1042ea(0x190),_0x1042ea(0x10a)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(-0xc92+0xbf3+0x52*0x2)*(-0x29*0xec+-0xe0b+0x3413)*(-0x164*-0x2+0x1b5*0x1+0x95*-0x1),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),DEDUPE_TTL_MS=(0x2183+-0x180d+-0x4ac*0x2)*(-0xc10*-0x3+0x2601+-0x4649),processedMessageKeys=new Map();function markProcessed(_0x17ac38){const _0x2e6d66=_0x1042ea;if(!_0x17ac38)return;if(processedMessageKeys['has'](_0x17ac38))try{clearTimeout(processedMessageKeys['get'](_0x17ac38));}catch(_0x520292){}const _0x5dcad2=setTimeout(()=>processedMessageKeys[_0x2e6d66(0x18f)](_0x17ac38),DEDUPE_TTL_MS);processedMessageKeys[_0x2e6d66(0x9e)](_0x17ac38,_0x5dcad2);}function isProcessed(_0x13152b){const _0x552638=_0x1042ea;return _0x13152b&&processedMessageKeys[_0x552638(0x175)](_0x13152b);}async function ensureSchema(){const _0x3b1f4a=_0x1042ea;try{await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CRE'+_0x3b1f4a(0x147)+_0x3b1f4a(0x13a)+_0x3b1f4a(0x140)+_0x3b1f4a(0x127)+_0x3b1f4a(0xa3)+'id\x20TEXT\x20PR'+_0x3b1f4a(0xe7)+_0x3b1f4a(0x123)+'essage\x20TEX'+_0x3b1f4a(0xf0)+_0x3b1f4a(0xab)+_0x3b1f4a(0xd1)+_0x3b1f4a(0x17c)+_0x3b1f4a(0x1a0)+'\x20\x20\x20\x20\x20\x20\x20las'+'t_msg_id\x20T'+'EXT\x20DEFAUL'+_0x3b1f4a(0x80)+_0x3b1f4a(0xcb)+_0x3b1f4a(0x150)+'EGER\x20DEFAU'+'LT\x200\x0a\x20\x20\x20\x20\x20'+_0x3b1f4a(0x110));try{await db[_0x3b1f4a(0x153)](_0x3b1f4a(0x173)+'E\x20welcomes'+'\x20ADD\x20COLUM'+_0x3b1f4a(0x99)+'_id\x20TEXT\x20D'+_0x3b1f4a(0x157)+'L;');}catch(_0x26014b){}info(_0x3b1f4a(0x174)+_0x3b1f4a(0xc4)+'ensured');}catch(_0x14ea27){error(_0x14ea27,_0x3b1f4a(0x174)+_0x3b1f4a(0x6b)+_0x3b1f4a(0x188));throw _0x14ea27;}}async function saveWelcomeToDb(_0x15856b,_0x48c9b2,_0x420db5=-0x1aaf+0x2c*-0x17+0x1ea3,_0x4db3ea=null){const _0x20f8a8=_0x1042ea;try{const _0x3e4ef5=Math[_0x20f8a8(0x18e)](Date[_0x20f8a8(0x13d)]()/(-0x1f7*-0x13+-0x1a5*-0x13+-0x102b*0x4));return await db['run']('INSERT\x20INT'+'O\x20welcomes'+_0x20f8a8(0x10d)+_0x20f8a8(0x16e)+_0x20f8a8(0x124)+_0x20f8a8(0x193)+_0x20f8a8(0xbb)+'ted_at)\x0a\x20\x20'+'\x20\x20\x20\x20\x20VALUE'+'S\x20(?,\x20?,\x20?'+',\x20?,\x20?)\x0a\x20\x20'+_0x20f8a8(0x117)+_0x20f8a8(0x105)+_0x20f8a8(0x15d)+'\x20UPDATE\x20SE'+_0x20f8a8(0xef)+_0x20f8a8(0x131)+_0x20f8a8(0x151)+_0x20f8a8(0x11b)+_0x20f8a8(0xc8)+_0x20f8a8(0x1af)+_0x20f8a8(0x179)+_0x20f8a8(0x1ad)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+_0x20f8a8(0x12e)+_0x20f8a8(0xff)+_0x20f8a8(0xa9)+_0x20f8a8(0x134)+_0x20f8a8(0x168)+_0x20f8a8(0x85)+_0x20f8a8(0x7b)+_0x20f8a8(0x1a6),[_0x15856b,String(_0x48c9b2||''),Number(_0x420db5||-0x89*-0x1+-0x91*0x1b+-0x1*-0xec2),_0x4db3ea||null,_0x3e4ef5]),info(_0x20f8a8(0x174)+_0x20f8a8(0x16b)+'ome\x20for\x20'+_0x15856b),!![];}catch(_0x3b5de4){return warn(_0x20f8a8(0x174)+'saveWelcom'+_0x20f8a8(0xc2)+_0x20f8a8(0x18b)+_0x15856b+':\x20'+(_0x3b5de4?.['message']||_0x3b5de4)),![];}}async function deleteWelcomeFromDb(_0x6f44db){const _0x5bb28f=_0x1042ea;try{const _0x31a573=await db[_0x5bb28f(0x17d)]('DELETE\x20FRO'+_0x5bb28f(0x18c)+_0x5bb28f(0x198)+_0x5bb28f(0x1ac),[_0x6f44db]);return info('[welcome]\x20'+_0x5bb28f(0x1ab)+_0x5bb28f(0x15a)+_0x6f44db),_0x31a573?.[_0x5bb28f(0x185)]||0x458+-0x1*-0x4ef+-0x5f*0x19;}catch(_0x4e21bb){return warn(_0x5bb28f(0x174)+_0x5bb28f(0x156)+_0x5bb28f(0x178)+_0x5bb28f(0x6a)+'\x20'+_0x6f44db+':\x20'+(_0x4e21bb?.[_0x5bb28f(0x177)]||_0x4e21bb)),0x24fb+0x247c+-0x3*0x187d;}}async function getWelcomeFromDb(_0x37429b){const _0x264902=_0x1042ea;try{const _0x5d32d2=await db[_0x264902(0xfb)](_0x264902(0x104)+_0x264902(0x74)+'_size,\x20las'+'t_msg_id,\x20'+_0x264902(0x89)+_0x264902(0x10f)+_0x264902(0xe8)+_0x264902(0xa8)+'\x20=\x20?',[_0x37429b]);return _0x5d32d2||null;}catch(_0x155deb){return warn(_0x264902(0x174)+_0x264902(0x164)+'FromDb\x20fai'+_0x264902(0xea)+_0x37429b+':\x20'+(_0x155deb?.[_0x264902(0x177)]||_0x155deb)),null;}}function _0x1aef(_0x4b38a5,_0x51ed1c){const _0x4f903b=_0x5cce();return _0x1aef=function(_0x469c29,_0x25a691){_0x469c29=_0x469c29-(-0x57*-0x6f+0x788+-0xd*0x373);let _0xfba317=_0x4f903b[_0x469c29];return _0xfba317;},_0x1aef(_0x4b38a5,_0x51ed1c);}async function updateLastMsgIdInDb(_0x32f12c,_0x38b8d8){const _0x29a0af=_0x1042ea;try{const _0xcd663e=Math[_0x29a0af(0x18e)](Date[_0x29a0af(0x13d)]()/(0x164*-0x4+0xf4b+0x15*-0x47));return await db['run'](_0x29a0af(0x143)+_0x29a0af(0x12f)+'last_msg_i'+_0x29a0af(0xdc)+'ated_at\x20=\x20'+'?\x20WHERE\x20gr'+_0x29a0af(0xaa)+'?',[_0x38b8d8||null,_0xcd663e,_0x32f12c]),!![];}catch(_0x1185d0){return warn(_0x29a0af(0x174)+_0x29a0af(0x7a)+_0x29a0af(0x115)+'failed\x20for'+'\x20'+_0x32f12c+':\x20'+(_0x1185d0?.[_0x29a0af(0x177)]||_0x1185d0)),![];}}function tryBuildSendApiFromBot(_0xf8d960){const _0x546ad9=_0x1042ea;if(!_0xf8d960)return null;if(typeof _0xf8d960[_0x546ad9(0x189)+'e']==='function')return async(_0x333058,_0x41013a)=>_0xf8d960[_0x546ad9(0x189)+'e'](_0x333058,_0x41013a);if(_0xf8d960[_0x546ad9(0xcd)]&&typeof _0xf8d960[_0x546ad9(0xcd)][_0x546ad9(0x189)+'e']==='function')return async(_0x4155dc,_0x590d2e)=>_0xf8d960[_0x546ad9(0xcd)][_0x546ad9(0x189)+'e'](_0x4155dc,_0x590d2e);return null;}function setupSendApi(_0x4bc2e5){botRef=_0x4bc2e5,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x3fa695,_0x3348c8,_0x5a0873=[]){const _0x45b24a=_0x1042ea;try{if(!_0x3fa695||!_0x3348c8)return null;const _0x503789=typeof _0x3348c8==='string'?{'text':String(_0x3348c8)}:_0x3348c8;if(Array['isArray'](_0x5a0873)&&_0x5a0873[_0x45b24a(0xcc)])_0x503789[_0x45b24a(0x148)]=_0x5a0873;if(sendApi)try{const _0x1dffa9=await sendApi(_0x3fa695,_0x503789);return _0x1dffa9;}catch(_0x35a305){return warn('[welcome]\x20'+'sendApi\x20fa'+_0x45b24a(0x9c)+(_0x35a305?.['message']||_0x35a305)),null;}else try{if(botRef&&typeof botRef['sendMessag'+'e']===_0x45b24a(0x17b))return await botRef[_0x45b24a(0x189)+'e'](_0x3fa695,_0x503789);else return botRef&&botRef[_0x45b24a(0xcd)]&&typeof botRef[_0x45b24a(0xcd)][_0x45b24a(0x189)+'e']==='function'?await botRef['sock'][_0x45b24a(0x189)+'e'](_0x3fa695,_0x503789):(warn('[welcome]\x20'+_0x45b24a(0x90)+_0x45b24a(0xde)+_0x45b24a(0x121)+_0x3fa695),null);}catch(_0x3546d7){return warn(_0x45b24a(0x174)+_0x45b24a(0x191)+_0x45b24a(0x160)+':\x20'+(_0x3546d7?.[_0x45b24a(0x177)]||_0x3546d7)),null;}}catch(_0x4efb36){return warn(_0x45b24a(0x174)+_0x45b24a(0xc0)+'allback\x20fa'+_0x45b24a(0x9c)+(_0x4efb36?.[_0x45b24a(0x177)]||_0x4efb36)),null;}}function extractTextFromMessage(_0x540c16){const _0x4f8ea7=_0x1042ea;if(!_0x540c16||!_0x540c16[_0x4f8ea7(0x177)])return'';const _0x1788d5=_0x540c16[_0x4f8ea7(0x177)];if(_0x1788d5['conversati'+'on'])return _0x1788d5['conversati'+'on'];if(_0x1788d5[_0x4f8ea7(0x19f)+'xtMessage']?.['text'])return _0x1788d5[_0x4f8ea7(0x19f)+_0x4f8ea7(0xb9)]['text'];if(_0x1788d5[_0x4f8ea7(0x70)+'ge']?.[_0x4f8ea7(0xad)])return _0x1788d5['imageMessa'+'ge'][_0x4f8ea7(0xad)];if(_0x1788d5['videoMessa'+'ge']?.[_0x4f8ea7(0xad)])return _0x1788d5['videoMessa'+'ge'][_0x4f8ea7(0xad)];if(_0x1788d5['buttonsRes'+'ponseMessa'+'ge']?.['selectedBu'+_0x4f8ea7(0x11c)])return _0x1788d5[_0x4f8ea7(0x76)+'ponseMessa'+'ge']['selectedBu'+_0x4f8ea7(0x11c)];if(_0x1788d5[_0x4f8ea7(0xdd)+_0x4f8ea7(0x12b)]?.[_0x4f8ea7(0xf9)+_0x4f8ea7(0x16a)]?.['selectedRo'+_0x4f8ea7(0x187)])return _0x1788d5[_0x4f8ea7(0xdd)+'seMessage'][_0x4f8ea7(0xf9)+_0x4f8ea7(0x16a)][_0x4f8ea7(0x133)+_0x4f8ea7(0x187)];return'';}async function resolveNamesOrJidsToGroupJids(_0x49134b){const _0x2b5cf1=_0x1042ea;try{const _0x344fd9=[];if(!_0x49134b)return[];if(Array[_0x2b5cf1(0x8c)](_0x49134b)){for(const _0x18af6e of _0x49134b)if(_0x18af6e&&String(_0x18af6e)[_0x2b5cf1(0xb3)]())_0x344fd9[_0x2b5cf1(0xf6)](String(_0x18af6e)[_0x2b5cf1(0xb3)]());}else{if(typeof _0x49134b===_0x2b5cf1(0x126)){const _0x495ac4=_0x49134b[_0x2b5cf1(0x14f)](',')[_0x2b5cf1(0xec)](_0x4258a1=>_0x4258a1[_0x2b5cf1(0xb3)]())[_0x2b5cf1(0xb7)](Boolean);for(const _0x45969e of _0x495ac4)_0x344fd9['push'](_0x45969e);}else _0x344fd9['push'](String(_0x49134b));}const _0x474c00=new Set();for(const _0x2b7977 of _0x344fd9){if(!_0x2b7977)continue;if(_0x2b7977[_0x2b5cf1(0x13b)]('@')){_0x474c00[_0x2b5cf1(0x8f)](_0x2b7977);continue;}try{const _0x172301=await getConnection(_0x2b7977)[_0x2b5cf1(0xcf)](()=>null);if(Array[_0x2b5cf1(0x8c)](_0x172301)&&_0x172301[_0x2b5cf1(0xcc)]){for(const _0x1e3b04 of _0x172301)if(_0x1e3b04)_0x474c00[_0x2b5cf1(0x8f)](_0x1e3b04);}}catch(_0x43e399){warn(_0x2b5cf1(0x174)+_0x2b5cf1(0xa0)+'resolve\x20co'+_0x2b5cf1(0x75)+'ame\x20'+_0x2b7977+':\x20'+(_0x43e399?.['message']||_0x43e399));}}return Array[_0x2b5cf1(0x77)](_0x474c00);}catch(_0x492c53){return warn(_0x2b5cf1(0x174)+'resolveNam'+_0x2b5cf1(0x141)+_0x2b5cf1(0x113)+_0x2b5cf1(0x16f)+(_0x492c53?.[_0x2b5cf1(0x177)]||_0x492c53)),[];}}async function resolveTargetGroupJids(_0x3c56c8,_0x327a69){const _0x544bf4=_0x1042ea;try{if(_0x3c56c8){const _0x28b620=await resolveNamesOrJidsToGroupJids(_0x3c56c8);return _0x28b620;}if(!_0x327a69)return[];const _0x316522=await getDefault(_0x327a69)['catch'](()=>null);if(!_0x316522)return[];const _0x5f3346=Array['isArray'](_0x316522)?_0x316522:[_0x316522];if(!_0x5f3346['length'])return[];const _0xb4f5c5=await resolveNamesOrJidsToGroupJids(_0x5f3346);return _0xb4f5c5;}catch(_0xcb6b93){return warn(_0x544bf4(0x174)+_0x544bf4(0x106)+_0x544bf4(0x155)+_0x544bf4(0x15f)+'\x20'+(_0xcb6b93?.[_0x544bf4(0x177)]||_0xcb6b93)),[];}}async function fetchGroupMetadata(_0x2df879){const _0x1f49a4=_0x1042ea;if(!botRef)return null;try{if(botRef['sock']&&typeof botRef[_0x1f49a4(0xcd)][_0x1f49a4(0x1aa)+_0x1f49a4(0xe6)]===_0x1f49a4(0x17b))return await botRef[_0x1f49a4(0xcd)][_0x1f49a4(0x1aa)+_0x1f49a4(0xe6)](_0x2df879);if(typeof botRef[_0x1f49a4(0x1aa)+_0x1f49a4(0xe6)]===_0x1f49a4(0x17b))return await botRef[_0x1f49a4(0x1aa)+_0x1f49a4(0xe6)](_0x2df879);return null;}catch(_0x5a9095){return warn(_0x1f49a4(0x174)+_0x1f49a4(0x79)+'Metadata\x20f'+'ailed:\x20'+(_0x5a9095?.[_0x1f49a4(0x177)]||_0x5a9095)),null;}}async function fetchProfilePictureUrl(_0x267ccc){const _0x45a4d1=_0x1042ea;if(!botRef||!_0x267ccc)return null;try{let _0x2ac4e0=null;if(botRef[_0x45a4d1(0xcd)]&&typeof botRef['sock']['profilePic'+_0x45a4d1(0x118)]===_0x45a4d1(0x17b))_0x2ac4e0=await botRef[_0x45a4d1(0xcd)][_0x45a4d1(0xb2)+_0x45a4d1(0x118)](_0x267ccc,_0x45a4d1(0xfa))['catch'](()=>null);else typeof botRef[_0x45a4d1(0xb2)+'tureUrl']===_0x45a4d1(0x17b)&&(_0x2ac4e0=await botRef['profilePic'+_0x45a4d1(0x118)](_0x267ccc,_0x45a4d1(0xfa))[_0x45a4d1(0xcf)](()=>null));return _0x2ac4e0;}catch(_0x32f4c1){return warn(_0x45a4d1(0x174)+_0x45a4d1(0xe3)+_0x45a4d1(0x72)+'rl\x20for\x20'+_0x267ccc+_0x45a4d1(0x196)+(_0x32f4c1?.[_0x45a4d1(0x177)]||_0x32f4c1)),null;}}function getCachedGroupSize(_0x3b669c){const _0x10b99b=_0x1042ea,_0x1cd47a=groupSizeCache['get'](_0x3b669c);if(!_0x1cd47a)return null;if(Date['now']()>_0x1cd47a[_0x10b99b(0x142)])return groupSizeCache[_0x10b99b(0x18f)](_0x3b669c),null;return _0x1cd47a[_0x10b99b(0x101)];}function setCachedGroupSize(_0x54a9c2,_0x4ad955){const _0x508cb8=_0x1042ea;groupSizeCache[_0x508cb8(0x9e)](_0x54a9c2,{'size':Number(_0x4ad955||-0x1d3d+-0x1cf7*-0x1+0x46),'expiresAt':Date[_0x508cb8(0x13d)]()+(CFG[_0x508cb8(0x194)+'_CACHE_TTL'+_0x508cb8(0x1a8)]||DEFAULTS[_0x508cb8(0x194)+_0x508cb8(0x114)+_0x508cb8(0x1a8)])});}async function resolveDisplayName(_0x1110c9){const _0x1152f6=_0x1042ea;try{if(!botRef||!_0x1110c9)return _0x1110c9?.[_0x1152f6(0x14f)]?.('@')?.[0x5*-0x355+0x11*-0x143+0x261c]??_0x1110c9;try{if(typeof botRef[_0x1152f6(0x167)]===_0x1152f6(0x17b)){const _0x1e20cd=await botRef[_0x1152f6(0x167)](_0x1110c9);if(Array[_0x1152f6(0x8c)](_0x1e20cd)&&_0x1e20cd[_0x1152f6(0xcc)]>0x1*-0x2342+0x376*-0x2+0x2*0x1517){const _0x316a1c=_0x1e20cd[-0x33e*-0x1+0x2134+-0x2472];if(_0x316a1c&&(_0x316a1c[_0x1152f6(0x82)]||_0x316a1c[_0x1152f6(0xb8)]||_0x316a1c[_0x1152f6(0x11a)]))return _0x316a1c[_0x1152f6(0x82)]||_0x316a1c[_0x1152f6(0xb8)]||_0x316a1c[_0x1152f6(0x11a)];}}if(botRef[_0x1152f6(0xcd)]&&typeof botRef[_0x1152f6(0xcd)][_0x1152f6(0x167)]==='function'){const _0x105ce7=await botRef[_0x1152f6(0xcd)][_0x1152f6(0x167)](_0x1110c9);if(Array[_0x1152f6(0x8c)](_0x105ce7)&&_0x105ce7[_0x1152f6(0xcc)]>-0x1*0x843+-0xdde+0x1621){const _0x52d1ba=_0x105ce7[0x2376+0xa1b*0x2+0x7*-0x7f4];if(_0x52d1ba&&(_0x52d1ba[_0x1152f6(0x82)]||_0x52d1ba[_0x1152f6(0xb8)]||_0x52d1ba[_0x1152f6(0x11a)]))return _0x52d1ba['notify']||_0x52d1ba[_0x1152f6(0xb8)]||_0x52d1ba[_0x1152f6(0x11a)];}}}catch(_0x29a7b1){}return String(_0x1110c9)['split']('@')[0x1318+-0x1*0x1d44+0x3e*0x2a]||_0x1110c9;}catch(_0x3f2ba0){return _0x1110c9?.[_0x1152f6(0x14f)]?.('@')?.[0x174b+-0x658+-0x10f3]??_0x1110c9;}}async function findStoredMatchFromFindings(_0x3719b2=[]){const _0x88b98e=_0x1042ea;try{const _0x4b8822=await listSudo();if(!Array[_0x88b98e(0x8c)](_0x4b8822)||_0x4b8822[_0x88b98e(0xcc)]===-0x188c+-0x156e+0x2dfa)return null;const _0x4cf2e4=new Set(_0x4b8822['map'](String));for(const _0x431e82 of _0x3719b2||[]){if(!_0x431e82||typeof _0x431e82[_0x88b98e(0x169)]!=='string')continue;const _0x1ec59b=normalizeToJid(_0x431e82[_0x88b98e(0x169)]);if(_0x1ec59b&&_0x4cf2e4[_0x88b98e(0x175)](_0x1ec59b))return _0x1ec59b;if(_0x4cf2e4[_0x88b98e(0x175)](_0x431e82[_0x88b98e(0x169)]))return _0x431e82[_0x88b98e(0x169)];const _0x141767=String(_0x431e82['jid'])['split']('@')[-0xee*0x1e+0x1f78+-0x394][_0x88b98e(0x14f)](':')[0xa82+-0x863*-0x4+-0x2c0e*0x1];if(_0x141767)for(const _0x48d897 of _0x4b8822){const _0x3b6da0=String(_0x48d897)[_0x88b98e(0x14f)]('@')[-0x2bc+-0x2363+0x261f];if(_0x3b6da0&&_0x3b6da0===_0x141767)return _0x48d897;}}return null;}catch(_0x10e3f5){return warn(_0x88b98e(0x174)+_0x88b98e(0x103)+_0x88b98e(0x112)+_0x88b98e(0x9d)+_0x88b98e(0x138)+(_0x10e3f5?.['message']||_0x10e3f5)),null;}}const WELCOME_CARD_IMAGES=[_0x1042ea(0xfc)+_0x1042ea(0x144)+'kiebasher.'+'win/media/'+_0x1042ea(0xfd)+'pg','https://fi'+'les.theboo'+_0x1042ea(0xbc)+_0x1042ea(0x84)+_0x1042ea(0x7f)+'pg','https://fi'+'les.theboo'+_0x1042ea(0xbc)+'win/media/'+'welcome3.j'+'pg',_0x1042ea(0xfc)+_0x1042ea(0x144)+_0x1042ea(0xbc)+_0x1042ea(0x84)+_0x1042ea(0x88)+'pg',_0x1042ea(0xfc)+'les.theboo'+_0x1042ea(0xbc)+_0x1042ea(0x84)+_0x1042ea(0x1a4)+'pg','https://fi'+_0x1042ea(0x144)+_0x1042ea(0xbc)+_0x1042ea(0x84)+_0x1042ea(0x12d)+'pg',_0x1042ea(0xfc)+_0x1042ea(0x144)+'kiebasher.'+_0x1042ea(0x84)+'welcome7.j'+'pg',_0x1042ea(0xfc)+_0x1042ea(0x144)+_0x1042ea(0xbc)+_0x1042ea(0x84)+'welcome8.j'+'pg',_0x1042ea(0xfc)+_0x1042ea(0x144)+'kiebasher.'+_0x1042ea(0x84)+_0x1042ea(0x1a1)+'pg'];function pickRandomCardImage(){const _0x5f344e=_0x1042ea;return WELCOME_CARD_IMAGES[Math[_0x5f344e(0x18e)](Math[_0x5f344e(0x94)]()*WELCOME_CARD_IMAGES[_0x5f344e(0xcc)])];}async function sendWelcomeToMember(_0x3fa50c,_0x214a9b){const _0x2ac0b6=_0x1042ea;try{const _0x478f00=await getWelcomeFromDb(_0x3fa50c);if(!_0x478f00||!_0x478f00[_0x2ac0b6(0x177)])return![];let _0x4932a8=await fetchGroupMetadata(_0x3fa50c),_0xdbf896=_0x4932a8&&_0x4932a8[_0x2ac0b6(0xaf)]?_0x4932a8[_0x2ac0b6(0xaf)]:_0x3fa50c,_0x273bdb=getCachedGroupSize(_0x3fa50c);if(!_0x273bdb||_0x273bdb<=-0xe22+-0xb3d*0x3+-0x3*-0xff3){if(_0x4932a8&&Array['isArray'](_0x4932a8[_0x2ac0b6(0x9a)+'ts']))_0x273bdb=_0x4932a8[_0x2ac0b6(0x9a)+'ts']['length'];else{if(_0x4932a8&&typeof _0x4932a8[_0x2ac0b6(0x101)]===_0x2ac0b6(0xb1))_0x273bdb=_0x4932a8[_0x2ac0b6(0x101)];else{_0x4932a8=_0x4932a8||await fetchGroupMetadata(_0x3fa50c);if(_0x4932a8&&Array['isArray'](_0x4932a8[_0x2ac0b6(0x9a)+'ts']))_0x273bdb=_0x4932a8[_0x2ac0b6(0x9a)+'ts'][_0x2ac0b6(0xcc)];}}if(!_0x273bdb||_0x273bdb<=-0x200c+-0x20d8+0x40e4)_0x273bdb=Number(_0x478f00[_0x2ac0b6(0xf1)]||-0x152e+0x1b90+-0x662);else setCachedGroupSize(_0x3fa50c,_0x273bdb);}const _0x14f591=CFG[_0x2ac0b6(0x109)+'ROUP_MAX']||DEFAULTS['WHATSAPP_G'+'ROUP_MAX'],_0x38b642=await resolveDisplayName(_0x214a9b),_0x4413a4='@'+String(_0x38b642)[_0x2ac0b6(0x184)](/\s+/g,'\x20'),_0x5e4d85=[];_0x5e4d85[_0x2ac0b6(0xf6)](_0x2ac0b6(0x14a)+_0x4413a4+(_0x2ac0b6(0x81)+'o\x20the\x20')+_0xdbf896),_0x5e4d85[_0x2ac0b6(0xf6)](String(_0x478f00[_0x2ac0b6(0x177)])[_0x2ac0b6(0xb3)]()),_0x5e4d85[_0x2ac0b6(0xf6)](_0x2ac0b6(0x73)+_0x2ac0b6(0xc1)+_0x273bdb+'/'+_0x14f591);const _0x10a375=_0x5e4d85[_0x2ac0b6(0x7c)]('\x0a\x0a'),_0x2f9f99=[_0x214a9b],_0x49038a=_0x478f00[_0x2ac0b6(0x199)+'d']||null;let _0x5f41f9=await fetchProfilePictureUrl(_0x214a9b);!_0x5f41f9&&(_0x5f41f9=pickRandomCardImage(),info(_0x2ac0b6(0x174)+_0x2ac0b6(0xf7)+_0x2ac0b6(0x13f)+_0x2ac0b6(0x162)+'for\x20'+_0x214a9b+(',\x20using\x20fa'+_0x2ac0b6(0xe1)+_0x2ac0b6(0x19c))));const _0x1aa140={'title':'Welcome\x20to'+'\x20'+_0xdbf896,'body':'We\x27re\x20happ'+_0x2ac0b6(0x176)+_0x2ac0b6(0x71),'thumbnailUrl':_0x5f41f9,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x3e9270=await sendApiOrFallback(_0x3fa50c,{'text':_0x10a375,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x2ac0b6(0x15e)+_0x2ac0b6(0x7d)+_0x2ac0b6(0xf3),'newsletterName':_0x2ac0b6(0x100),'serverMessageId':0x7b},'externalAdReply':_0x1aa140}},_0x2f9f99);let _0xe0a729=null;try{_0x3e9270&&(_0xe0a729=_0x3e9270?.[_0x2ac0b6(0x78)]&&_0x3e9270[_0x2ac0b6(0x78)]['id']?_0x3e9270[_0x2ac0b6(0x78)]['id']:_0x3e9270?.[_0x2ac0b6(0x177)]&&_0x3e9270[_0x2ac0b6(0x177)]?.['id']?_0x3e9270[_0x2ac0b6(0x177)]['id']:_0x3e9270?.['id']?_0x3e9270['id']:null);}catch(_0x225a10){}if(_0x49038a&&_0x49038a!==_0xe0a729)try{if(botRef&&typeof botRef[_0x2ac0b6(0x189)+'e']===_0x2ac0b6(0x17b))try{await botRef[_0x2ac0b6(0x189)+'e'](_0x3fa50c,{'delete':{'id':_0x49038a,'remoteJid':_0x3fa50c,'fromMe':!![]}}),info(_0x2ac0b6(0x174)+'deleted\x20pr'+_0x2ac0b6(0x125)+_0x2ac0b6(0x1ae)+_0x49038a+_0x2ac0b6(0x1a7)+_0x3fa50c);}catch(_0xf59bcf){try{await botRef[_0x2ac0b6(0xcd)]?.[_0x2ac0b6(0x189)+'e']?.(_0x3fa50c,{'delete':{'id':_0x49038a,'remoteJid':_0x3fa50c,'fromMe':!![]}}),info(_0x2ac0b6(0x174)+_0x2ac0b6(0x149)+_0x2ac0b6(0x125)+_0x2ac0b6(0x1a9)+')\x20'+_0x49038a+_0x2ac0b6(0x1a7)+_0x3fa50c);}catch(_0x3b6658){warn('[welcome]\x20'+_0x2ac0b6(0xa0)+_0x2ac0b6(0xce)+_0x2ac0b6(0xbf)+_0x2ac0b6(0x116)+_0x49038a+_0x2ac0b6(0x1a7)+_0x3fa50c+':\x20'+(_0x3b6658?.['message']||_0x3b6658));}}}catch(_0x3a3efb){warn(_0x2ac0b6(0x174)+_0x2ac0b6(0x16d)+_0x2ac0b6(0x13c)+_0x2ac0b6(0x183)+_0x2ac0b6(0x135)+(_0x3a3efb?.[_0x2ac0b6(0x177)]||_0x3a3efb));}try{_0xe0a729?await updateLastMsgIdInDb(_0x3fa50c,_0xe0a729):await updateLastMsgIdInDb(_0x3fa50c,null);}catch(_0x4b17be){}const _0x406097=Number(_0x478f00[_0x2ac0b6(0xf1)]||-0x82c+0x10ee+-0x8c2);if(_0x273bdb&&_0x273bdb!==_0x406097)try{await db[_0x2ac0b6(0x17d)](_0x2ac0b6(0x143)+_0x2ac0b6(0x12f)+_0x2ac0b6(0xd1)+_0x2ac0b6(0xfe)+_0x2ac0b6(0xd2)+_0x2ac0b6(0x181)+_0x2ac0b6(0x93),[_0x273bdb,Math[_0x2ac0b6(0x18e)](Date['now']()/(0xcb8+-0x1683*-0x1+-0x1*0x1f53)),_0x3fa50c]),setCachedGroupSize(_0x3fa50c,_0x273bdb);}catch(_0x5ce66f){}return info(_0x2ac0b6(0x174)+'sent\x20welco'+'me\x20to\x20'+_0x214a9b+_0x2ac0b6(0x1a7)+_0x3fa50c),!![];}catch(_0x399d6c){return warn(_0x2ac0b6(0x174)+_0x2ac0b6(0x8d)+_0x2ac0b6(0x19e)+'failed:\x20'+(_0x399d6c?.[_0x2ac0b6(0x177)]||_0x399d6c)),![];}}async function flushGroup(_0x197cd0){const _0x13a749=_0x1042ea;try{const _0x5f0bca=groupQueues[_0x13a749(0xfb)](_0x197cd0);if(!_0x5f0bca||_0x5f0bca[_0x13a749(0x101)]===0xfaf*0x1+0x1170+-0x211f){if(groupTimers[_0x13a749(0x175)](_0x197cd0)){try{clearTimeout(groupTimers[_0x13a749(0xfb)](_0x197cd0));}catch(_0x2ee580){}groupTimers[_0x13a749(0x18f)](_0x197cd0);}groupQueues[_0x13a749(0x18f)](_0x197cd0);return;}const _0x28bb7c=Array[_0x13a749(0x77)](_0x5f0bca);for(const _0x2c46cf of _0x28bb7c){try{await sendWelcomeToMember(_0x197cd0,_0x2c46cf)['catch'](()=>{});}catch(_0x53a5fa){warn(_0x13a749(0x174)+_0x13a749(0x83)+_0x13a749(0x6d)+_0x13a749(0x197)+(_0x53a5fa?.['message']||_0x53a5fa));}}}catch(_0x33163d){warn('[welcome]\x20'+_0x13a749(0x83)+_0x13a749(0xda)+(_0x33163d?.[_0x13a749(0x177)]||_0x33163d));}finally{if(groupTimers['has'](_0x197cd0)){try{clearTimeout(groupTimers['get'](_0x197cd0));}catch(_0x3eadb4){}groupTimers[_0x13a749(0x18f)](_0x197cd0);}groupQueues[_0x13a749(0x18f)](_0x197cd0);}}async function gpUpdateHandler(_0x5d8069){const _0x4df476=_0x1042ea;try{if(!_0x5d8069)return;const _0xc681f8=(_0x5d8069[_0x4df476(0xd9)]||_0x5d8069[_0x4df476(0x163)]||'')[_0x4df476(0x139)]()[_0x4df476(0x92)+'e']();if(_0xc681f8!==_0x4df476(0x8f)&&_0xc681f8!==_0x4df476(0xa1))return;const _0x29d138=_0x5d8069['id']||_0x5d8069[_0x4df476(0xbd)]||_0x5d8069[_0x4df476(0x169)]||_0x5d8069[_0x4df476(0x6e)];if(!_0x29d138)return;const _0x8e3832=Array['isArray'](_0x5d8069[_0x4df476(0x9a)+'ts'])?_0x5d8069[_0x4df476(0x9a)+'ts']:Array[_0x4df476(0x8c)](_0x5d8069['participan'+_0x4df476(0xb0)])?_0x5d8069[_0x4df476(0x9a)+_0x4df476(0xb0)]:[];if(!_0x8e3832||_0x8e3832[_0x4df476(0xcc)]===0x4ff+0xd7*-0x17+0xe52)return;let _0x1e50c3=[];if(_0x8e3832[_0x4df476(0xcc)]===-0x1*0x1fdf+0x2*-0x1288+0x44f0)_0x1e50c3=[_0x8e3832[-0x14a3+0x1*-0x1e6a+0x7*0x74b]];else{const _0x1be766=_0x8e3832[_0x8e3832[_0x4df476(0xcc)]-(-0x34+0x1a10+-0x19db)];_0x1e50c3=[_0x1be766];}if(!groupQueues[_0x4df476(0x175)](_0x29d138))groupQueues[_0x4df476(0x9e)](_0x29d138,new Set());const _0x2d5b85=groupQueues[_0x4df476(0xfb)](_0x29d138);for(const _0x3e3465 of _0x1e50c3)_0x2d5b85[_0x4df476(0x8f)](_0x3e3465);if(groupTimers['has'](_0x29d138))try{clearTimeout(groupTimers['get'](_0x29d138));}catch(_0xdef6c5){}const _0x420842=Math['max'](-0x6*0x43f+-0x1*-0x111d+0x8c1,Number(CFG['DEBOUNCE_M'+'S']||DEFAULTS[_0x4df476(0x12c)+'S'])),_0x17d749=setTimeout(()=>{const _0x134975=_0x4df476;flushGroup(_0x29d138)[_0x134975(0xcf)](_0x50ef95=>warn(_0x134975(0x174)+_0x134975(0x83)+_0x134975(0x196)+(_0x50ef95?.['message']||_0x50ef95)));},_0x420842);groupTimers[_0x4df476(0x9e)](_0x29d138,_0x17d749);}catch(_0x3b31e6){warn(_0x4df476(0x174)+'gpUpdateHa'+'ndler\x20erro'+'r:\x20'+(_0x3b31e6?.[_0x4df476(0x177)]||_0x3b31e6));}}function _0x5cce(){const _0x189aa9=['saved\x20welc','i-line\x20wel','deletion\x20o','d,\x20message','failed:\x20','single\x20or\x20','boolean','/setdefaul','ALTER\x20TABL','[welcome]\x20','has','y\x20to\x20have\x20','message','omeFromDb\x20','excluded.l','isCommand','function','INTEGER\x20DE','run','ROUP_MAX','ts:\x0a','onfig\x20appl','WHERE\x20grou','connection','\x20message\x20f','replace','changes','7101tAQTVd','wId','ma\x20failed','sendMessag','come\x20messa','ed\x20for\x20','M\x20welcomes','102FUbGgh','floor','delete','wlc','fallback\x20s','Name>\x22\x20to\x20','e,\x20last_ms','GROUP_SIZE','f\x20resolvab','\x20failed:\x20','ed:\x20','\x20WHERE\x20gro','last_msg_i','ault\x20with\x20','g\x20to:\x20','ge.','p\x27\x20paramet','eToMember\x20','extendedTe','FAULT\x200,\x0a\x20','welcome9.j','21pOPjuF','isadmin\x20ch','welcome5.j','remoteJid','ted_at;','\x20in\x20','_MS','come\x20(sock','groupMetad','deleted\x20we','up_jid\x20=\x20?','ast_size,\x0a','come\x20','st_size\x20=\x20','failed\x20for','ensureSche','icipants.u','\x20item\x20fail','groupJid','ting\x20for\x20','imageMessa','you!','lePictureU','>\x20👤YOU\x27RE\x20','sage,\x20last','nnection\x20n','buttonsRes','from','key','fetchGroup','updateLast','luded.upda','join','88090068@n','\x20managed\x20l','welcome2.j','T\x20NULL,\x0a\x20\x20','\x20Welcome\x20t','notify','flushGroup','win/media/','d_at\x20=\x20exc','command\x20\x27','24214JzOrIO','welcome4.j','updated_at','stration\x20f','xplicit\x20ta','isArray','sendWelcom','and.','add','no\x20send\x20su','efaults.','toLowerCas','p_jid\x20=\x20?','random','@g.us','save\x20welco','110IrZFWB','onfig\x20hand','N\x20last_msg','participan','endsWith','iled:\x20','indings\x20er','set','de\x20\x22gp\x20<gr','failed\x20to\x20','invite','\x20used\x20as\x20e','\x20\x20\x20group_j','s:\x0a','eck\x20failed','stopped\x20ma','values','\x20group_jid','d.last_msg','oup_jid\x20=\x20',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','come\x20resul','caption','cleanup\x20er','subject','ts_added','number','profilePic','trim','slice','2624520pnNhRR','Delete\x20wel','filter','vname','xtMessage','r\x20group-pa','g_id,\x20upda','kiebasher.','groupId','No\x20target\x20','vious\x20welc','sendApiOrF','MEMBER:\x20\x20','eToDb\x20fail','8JGhlbh','DB\x20schema\x20','group-part','msg','ABLED','\x20\x20\x20\x20\x20\x20\x20\x20la','naged\x20list','ing\x20from:\x20','\x20\x20\x20\x20\x20\x20upda','length','sock','delete\x20pre','catch','3.2.0','last_size\x20','ed_at\x20=\x20?\x20','nectionNam','<groupKey|','rated)\x20or\x20','ener\x20if\x20pr','\x20Set\x20a\x20def','\x20found\x20for','action','\x20error:\x20','saving\x20for','d\x20=\x20?,\x20upd','listRespon','rface\x20avai','ome\x20for\x20','t\x20<name>\x20(','llback\x20ima','er\x20will\x20be','fetchProfi','WELCOME','override\x20d','ata','IMARY\x20KEY,','omes\x20WHERE','652qBLwYu','led\x20for\x20','hotReloadC','map','rticipants','7541973zgoDyL','T\x0a\x20\x20\x20\x20\x20\x20\x20\x20','T\x20NOT\x20NULL','last_size','rget(s)\x20(i','ewsletter','welcome.in','t\x20or\x20provi','push','Could\x20not\x20','n\x20the\x20comm','singleSele','image','get','https://fi','welcome1.j','=\x20?,\x20updat','\x20=\x20exclude','WelcomeBot','size','DEFAULT_EN','findStored','SELECT\x20mes','NFLICT(gro','resolveTar','Notice:\x20\x27g','ler\x20error:','WHATSAPP_G','delwlc','3339490SbzXkY','Usage\x20(gro','\x20(group_ji','tener:\x20','\x20FROM\x20welc','\x20);\x0a\x20\x20\x20\x20','le).\x20Savin','MatchFromF','GroupJids\x20','_CACHE_TTL','MsgIdInDb\x20','ome\x20','\x20\x20\x20\x20\x20ON\x20CO','tureUrl','ng\x20for\x20','name','message,\x0a\x20','ttonId','using\x20defa','Error\x20dele','onName>\x22\x20i','config\x20loa','lable\x20for\x20','equires\x20bo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m',',\x20last_siz','evious\x20wel','string','es\x20(\x0a\x20\x20\x20\x20\x20','pdate','p\x20<groupKe','clear','seMessage','DEBOUNCE_M','welcome6.j','ast_msg_id','comes\x20SET\x20','ome\x20result','\x20message\x20=','Saved\x20welc','selectedRo','_id,\x0a\x20\x20\x20\x20\x20','ailed:\x20','147005VUtrgT','match','ror:\x20','toString','IF\x20NOT\x20EXI','includes','f\x20previous','now','e>\x22.','get\x20profil','STS\x20welcom','esOrJidsTo','expiresAt','UPDATE\x20wel','les.theboo','itialize\x20r','onfig\x20regi','ATE\x20TABLE\x20','mentions','deleted\x20pr','Hi\x20','esent','Deleted\x20we','(s)\x20found.','(s)\x20found\x20','split','ted_at\x20INT','\x20excluded.','onMessage\x20','exec','initialize','getGroupJi','deleteWelc','EFAULT\x20NUL','or\x20','Optionally','lcome\x20for\x20','register\x20m','error:\x20','up_jid)\x20DO','1203632853','ds\x20failed:','end\x20failed','No\x20welcome','e\x20picture\x20','type','getWelcome','isInteger','1901950XzBkuH','onWhatsApp','\x20\x20\x20\x20update','jid','ctReply'];_0x5cce=function(){return _0x189aa9;};return _0x5cce();}export async function initialize(_0x4748fe){const _0x3d5c16=_0x1042ea;if(!_0x4748fe)throw new Error(_0x3d5c16(0xf4)+_0x3d5c16(0x145)+_0x3d5c16(0x122)+'t\x20instance');botRef=_0x4748fe,setupSendApi(_0x4748fe);try{const _0x201803=getConfig()||{},_0x5a0a53=_0x201803&&_0x201803[_0x3d5c16(0xe4)]?_0x201803[_0x3d5c16(0xe4)]:{};CFG[_0x3d5c16(0x102)+_0x3d5c16(0xc7)]=typeof _0x5a0a53[_0x3d5c16(0x102)+'ABLED']===_0x3d5c16(0x171)?_0x5a0a53[_0x3d5c16(0x102)+_0x3d5c16(0xc7)]:DEFAULTS[_0x3d5c16(0x102)+_0x3d5c16(0xc7)],CFG[_0x3d5c16(0x194)+_0x3d5c16(0x114)+_0x3d5c16(0x1a8)]=Number['isInteger'](_0x5a0a53[_0x3d5c16(0x194)+_0x3d5c16(0x114)+_0x3d5c16(0x1a8)])?_0x5a0a53['GROUP_SIZE'+_0x3d5c16(0x114)+_0x3d5c16(0x1a8)]:DEFAULTS[_0x3d5c16(0x194)+_0x3d5c16(0x114)+'_MS'],CFG[_0x3d5c16(0x109)+_0x3d5c16(0x17e)]=Number[_0x3d5c16(0x165)](_0x5a0a53[_0x3d5c16(0x109)+_0x3d5c16(0x17e)])?_0x5a0a53[_0x3d5c16(0x109)+_0x3d5c16(0x17e)]:DEFAULTS[_0x3d5c16(0x109)+'ROUP_MAX'],CFG[_0x3d5c16(0x12c)+'S']=Number[_0x3d5c16(0x165)](_0x5a0a53[_0x3d5c16(0x12c)+'S'])?_0x5a0a53[_0x3d5c16(0x12c)+'S']:DEFAULTS[_0x3d5c16(0x12c)+'S'];}catch(_0x3c9a4c){warn(_0x3d5c16(0x174)+_0x3d5c16(0x120)+'d\x20failed,\x20'+_0x3d5c16(0x11d)+'ults'),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x259f9f=[])=>{const _0x41d593=_0x3d5c16;try{const _0x15f998=getConfig()||{},_0x3f925a=_0x15f998&&_0x15f998[_0x41d593(0xe4)]?_0x15f998[_0x41d593(0xe4)]:{};CFG[_0x41d593(0x102)+_0x41d593(0xc7)]=typeof _0x3f925a[_0x41d593(0x102)+_0x41d593(0xc7)]===_0x41d593(0x171)?_0x3f925a[_0x41d593(0x102)+_0x41d593(0xc7)]:DEFAULTS[_0x41d593(0x102)+_0x41d593(0xc7)],CFG[_0x41d593(0x194)+'_CACHE_TTL'+_0x41d593(0x1a8)]=Number[_0x41d593(0x165)](_0x3f925a['GROUP_SIZE'+_0x41d593(0x114)+_0x41d593(0x1a8)])?_0x3f925a[_0x41d593(0x194)+_0x41d593(0x114)+_0x41d593(0x1a8)]:DEFAULTS['GROUP_SIZE'+_0x41d593(0x114)+_0x41d593(0x1a8)],CFG['WHATSAPP_G'+_0x41d593(0x17e)]=Number['isInteger'](_0x3f925a[_0x41d593(0x109)+_0x41d593(0x17e)])?_0x3f925a[_0x41d593(0x109)+_0x41d593(0x17e)]:DEFAULTS['WHATSAPP_G'+_0x41d593(0x17e)],CFG[_0x41d593(0x12c)+'S']=Number[_0x41d593(0x165)](_0x3f925a[_0x41d593(0x12c)+'S'])?_0x3f925a[_0x41d593(0x12c)+'S']:DEFAULTS['DEBOUNCE_M'+'S'],info(_0x41d593(0x174)+_0x41d593(0xeb)+_0x41d593(0x180)+'ied.\x20Chang'+'ed\x20keys:\x20'+(_0x259f9f||[])[_0x41d593(0x7c)](',\x20'));}catch(_0x334d3f){warn(_0x41d593(0x174)+'hotReloadC'+_0x41d593(0x98)+_0x41d593(0x108)+'\x20'+(_0x334d3f?.[_0x41d593(0x177)]||_0x334d3f));}});}catch(_0x418b5d){warn(_0x3d5c16(0x174)+_0x3d5c16(0xeb)+_0x3d5c16(0x146)+_0x3d5c16(0x8a)+_0x3d5c16(0x135)+(_0x418b5d?.[_0x3d5c16(0x177)]||_0x418b5d));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':'group-part'+_0x3d5c16(0x6c)+_0x3d5c16(0x128),'handler':gpUpdateHandler,'moduleName':name}),info('[welcome]\x20'+'registered'+_0x3d5c16(0x7e)+'istener\x20fo'+_0x3d5c16(0xba)+_0x3d5c16(0xed)+'.update');}catch(_0x12c783){warn(_0x3d5c16(0x174)+'failed\x20to\x20'+_0x3d5c16(0x15b)+'anaged\x20lis'+_0x3d5c16(0x10e)+(_0x12c783?.[_0x3d5c16(0x177)]||_0x12c783));}info('[welcome]\x20'+_0x3d5c16(0x154)+'d');}catch(_0x20a46a){error(_0x20a46a,'[welcome]\x20'+'initialize'+'\x20fatal:\x20'+(_0x20a46a?.[_0x3d5c16(0x177)]||_0x20a46a));throw _0x20a46a;}}export async function onMessage(_0x50b1b6){const _0x531dbe=_0x1042ea;try{if(!_0x50b1b6||!_0x50b1b6['key']||!_0x50b1b6[_0x531dbe(0x177)])return;const _0x1169aa=String(_0x50b1b6[_0x531dbe(0x78)][_0x531dbe(0x1a5)]||'')+'::'+String(_0x50b1b6[_0x531dbe(0x78)]['id']||_0x50b1b6[_0x531dbe(0x78)][_0x531dbe(0x9a)+'t']||'');if(isProcessed(_0x1169aa))return;markProcessed(_0x1169aa);const _0xbc4dab=String(extractTextFromMessage(_0x50b1b6)||'');if(!_0xbc4dab[_0x531dbe(0xb3)]())return;let _0x363dab='',_0x37ff6a=![];if(_0x50b1b6[_0x531dbe(0x17a)]){const _0x98d692=(_0xbc4dab[_0x531dbe(0xb3)]()[_0x531dbe(0x14f)](/\s+/)[-0x1e8f*-0x1+-0xb77+-0x1318*0x1]||'')[_0x531dbe(0x92)+'e']();commands['includes'](_0x98d692)&&(_0x363dab=_0x98d692,_0x37ff6a=!![]);}else{const _0x21f56b=(_0xbc4dab['split'](/\r?\n/)[-0xd*-0x7d+0xe3f*-0x1+0x7e6]||'')[_0x531dbe(0xb3)](),_0x2882a2=(_0x21f56b[_0x531dbe(0x14f)](/\s+/)[-0x1b55*-0x1+-0x1*-0x1429+-0x2f7e]||'')[_0x531dbe(0x92)+'e']();commands['includes'](_0x2882a2)&&(_0x363dab=_0x2882a2,_0x37ff6a=!![]);}if(!_0x37ff6a)return;const _0x214bfa=_0x50b1b6[_0x531dbe(0x78)][_0x531dbe(0x1a5)],_0x2be3cb=typeof _0x214bfa===_0x531dbe(0x126)&&_0x214bfa[_0x531dbe(0x9b)](_0x531dbe(0x95));if(!_0x2be3cb)return;let _0x685567=![];try{_0x685567=await isadmin(botRef,_0x50b1b6);}catch(_0x1d6b88){warn(_0x531dbe(0x174)+_0x531dbe(0x1a3)+_0x531dbe(0xa5)),_0x685567=![];}if(!_0x685567)return;const _0x3a18d1=_0x50b1b6[_0x531dbe(0x78)]?.[_0x531dbe(0x9a)+'t']||_0x50b1b6[_0x531dbe(0x78)]?.[_0x531dbe(0x77)]||_0x50b1b6[_0x531dbe(0x78)]?.['remoteJid']||'',_0x2b1910=String(_0x3a18d1||'')[_0x531dbe(0x14f)]('@')[-0x1*-0x2f+0xe36+-0x43*0x37],_0x8f6a1=_0x214bfa;info('[welcome]\x20'+_0x531dbe(0x86)+_0x363dab+'\x27\x20from\x20'+_0x3a18d1+'\x20in\x20'+_0x214bfa);const _0x2a36ee=_0xbc4dab[_0x531dbe(0x14f)](/\r?\n/),_0xeb6833=_0x2a36ee[0x2*0x837+0xf12+0x54*-0x60]||'',_0x593416=_0xeb6833[_0x531dbe(0xb3)](),_0x5e7f4f=_0x593416[_0x531dbe(0x14f)](/\s+/);let _0x37f57e=null;for(const _0x5ef6a3 of _0x2a36ee[_0x531dbe(0xb4)](0x1*-0x201+0x194a+-0x1748)){const _0x3cea3d=_0x5ef6a3[_0x531dbe(0xb3)]()[_0x531dbe(0x137)](/^gp[:\s]+(.+)$/i);if(_0x3cea3d){_0x37f57e=_0x3cea3d[0x379+0x1e0b+-0x2183][_0x531dbe(0xb3)]();break;}}if(!_0x37f57e&&_0x5e7f4f[_0x531dbe(0xcc)]>=0x1b03+-0x1bff+0xfe){if(_0x5e7f4f[0x6e5+0x139*-0x7+0x1ab]['toLowerCas'+'e']()==='gp'&&_0x5e7f4f[_0x531dbe(0xcc)]>=0x511*-0x1+0x179*-0x13+-0x27*-0xd9)_0x37f57e=_0x5e7f4f[_0x531dbe(0xb4)](0x1a0*0x14+0x13*-0x8f+0x1*-0x15e1)['join']('\x20')[_0x531dbe(0xb3)]();else{if(_0x5e7f4f[-0x3c3+0x8c3*-0x3+0x9d*0x31][_0x531dbe(0x13b)]('@'))_0x37f57e=_0x5e7f4f[-0x6d*-0x41+0x8*-0x2a4+-0x68c]['trim']();}}const _0x228764=await resolveTargetGroupJids(_0x37f57e,_0x2b1910);if((!_0x228764||_0x228764['length']===-0xb*0x1c3+0xb4d+0x814)&&_0x363dab===_0x531dbe(0x190)){await sendApiOrFallback(_0x8f6a1,'No\x20target\x20'+'connection'+_0x531dbe(0x14d)+_0x531dbe(0xd7)+_0x531dbe(0x19a)+'/setdefaul'+_0x531dbe(0xe0)+_0x531dbe(0x170)+'comma-sepa'+_0x531dbe(0xd5)+'provide\x20\x22g'+_0x531dbe(0x129)+'y|connecti'+_0x531dbe(0x11f)+_0x531dbe(0xf8)+_0x531dbe(0x8e));return;}const _0x540125=_0x593416[_0x531dbe(0x184)](new RegExp('^'+_0x363dab+'\x5cb','i'),'')[_0x531dbe(0xb3)](),_0x4e4ec8=[];if(_0x540125)_0x4e4ec8[_0x531dbe(0xf6)](_0x540125);_0x4e4ec8[_0x531dbe(0xf6)](..._0x2a36ee[_0x531dbe(0xb4)](0x11*0x1a7+0x892*-0x1+-0x1384));const _0x40f081=_0x4e4ec8[_0x531dbe(0xb7)](_0x1cd934=>!_0x1cd934[_0x531dbe(0xb3)]()['match'](/^gp[:\s]+(.+)$/i)),_0x4bbf2e=_0x40f081[_0x531dbe(0x7c)]('\x0a')[_0x531dbe(0xb3)]();if(_0x363dab===_0x531dbe(0x190)){if(!_0x4bbf2e){await sendApiOrFallback(_0x8f6a1,_0x531dbe(0x10c)+'up-only,\x20a'+'dmin-only)'+':\x0a'+'wlc\x0a'+('<your\x20mult'+_0x531dbe(0x16c)+_0x531dbe(0x18a)+'ge>\x0a')+(_0x531dbe(0x159)+'\x20include\x20a'+'\x20line\x20\x22gp\x20'+_0x531dbe(0xd4)+_0x531dbe(0x182)+_0x531dbe(0x192)+_0x531dbe(0xe5)+_0x531dbe(0x91)));return;}_0x37f57e&&await sendApiOrFallback(_0x8f6a1,'Notice:\x20\x27g'+_0x531dbe(0x19d)+_0x531dbe(0xe2)+_0x531dbe(0xa2)+'xplicit\x20ta'+'rget(s)\x20(i'+_0x531dbe(0x195)+_0x531dbe(0x111)+_0x531dbe(0x19b)+_0x228764['join'](',\x20'));const _0x5c3952=[];for(const _0x3d5a20 of _0x228764){try{let _0x104317=await fetchGroupMetadata(_0x3d5a20),_0x2761cb=null;if(_0x104317&&Array[_0x531dbe(0x8c)](_0x104317[_0x531dbe(0x9a)+'ts']))_0x2761cb=_0x104317[_0x531dbe(0x9a)+'ts']['length'];else{if(_0x104317&&typeof _0x104317['size']===_0x531dbe(0xb1))_0x2761cb=_0x104317[_0x531dbe(0x101)];}const _0x588b7f=await getWelcomeFromDb(_0x3d5a20),_0x5ee1c9=_0x588b7f?Number(_0x588b7f[_0x531dbe(0xf1)]||0x16a1+0x473*0x3+-0x23fa):-0x4*-0x30d+0x24fe+-0x3132,_0x3430b6=_0x2761cb&&_0x2761cb>-0x77e+0x1*-0x85+0x1*0x803?_0x2761cb:_0x5ee1c9,_0x40472e=await saveWelcomeToDb(_0x3d5a20,_0x4bbf2e,_0x3430b6,_0x588b7f&&_0x588b7f['last_msg_i'+'d']?_0x588b7f[_0x531dbe(0x199)+'d']:null);if(_0x40472e){if(_0x3430b6&&_0x3430b6>-0xf9+-0x17f*-0x14+-0x1cf3)setCachedGroupSize(_0x3d5a20,_0x3430b6);_0x5c3952[_0x531dbe(0xf6)]({'ok':!![],'msg':_0x531dbe(0x132)+_0x531dbe(0xdf)+_0x3d5a20});}else _0x5c3952[_0x531dbe(0xf6)]({'ok':![],'msg':'Failed\x20to\x20'+_0x531dbe(0x96)+'me\x20for\x20'+_0x3d5a20});}catch(_0x2c1962){warn(_0x531dbe(0x174)+_0x531dbe(0xdb)+'\x20'+_0x3d5a20+_0x531dbe(0x196)+(_0x2c1962?.['message']||_0x2c1962)),_0x5c3952[_0x531dbe(0xf6)]({'ok':![],'msg':'Error\x20savi'+_0x531dbe(0x119)+_0x3d5a20+':\x20'+(_0x2c1962?.[_0x531dbe(0x177)]||_0x2c1962)});}}const _0x22851d=_0x5c3952['map'](_0xf4438e=>(_0xf4438e['ok']?'✅\x20':'❌\x20')+_0xf4438e[_0x531dbe(0xc6)]);await sendApiOrFallback(_0x8f6a1,_0x531dbe(0x132)+_0x531dbe(0x130)+_0x531dbe(0xa4)+_0x22851d[_0x531dbe(0x7c)]('\x0a'));return;}if(_0x363dab===_0x531dbe(0x10a)){if(!_0x228764||_0x228764[_0x531dbe(0xcc)]===-0x23c5+0x1ebe+0x63*0xd){await sendApiOrFallback(_0x8f6a1,_0x531dbe(0xbe)+_0x531dbe(0x182)+_0x531dbe(0x14e)+'to\x20delete.'+'\x20Set\x20a\x20def'+_0x531dbe(0x19a)+_0x531dbe(0x172)+_0x531dbe(0xf5)+_0x531dbe(0x9f)+'oupKey|con'+_0x531dbe(0xd3)+_0x531dbe(0x13e));return;}_0x37f57e&&await sendApiOrFallback(_0x8f6a1,_0x531dbe(0x107)+'p\x27\x20paramet'+'er\x20will\x20be'+'\x20used\x20as\x20e'+_0x531dbe(0x8b)+_0x531dbe(0xf2)+_0x531dbe(0x195)+'le).\x20Delet'+_0x531dbe(0xca)+_0x228764[_0x531dbe(0x7c)](',\x20'));const _0x4dbd8d=[];for(const _0x28251e of _0x228764){try{const _0x3ad74a=await deleteWelcomeFromDb(_0x28251e);_0x3ad74a?(groupSizeCache[_0x531dbe(0x18f)](_0x28251e),_0x4dbd8d[_0x531dbe(0xf6)]({'ok':!![],'msg':_0x531dbe(0x14c)+_0x531dbe(0x15a)+_0x28251e})):_0x4dbd8d[_0x531dbe(0xf6)]({'ok':![],'msg':_0x531dbe(0x161)+_0x531dbe(0xd8)+'\x20'+_0x28251e});}catch(_0x3280c3){warn(_0x531dbe(0x174)+'deleting\x20f'+_0x531dbe(0x158)+_0x28251e+'\x20failed:\x20'+(_0x3280c3?.[_0x531dbe(0x177)]||_0x3280c3)),_0x4dbd8d[_0x531dbe(0xf6)]({'ok':![],'msg':_0x531dbe(0x11e)+_0x531dbe(0x6f)+_0x28251e+':\x20'+(_0x3280c3?.[_0x531dbe(0x177)]||_0x3280c3)});}}const _0x58a44c=_0x4dbd8d[_0x531dbe(0xec)](_0x49e679=>(_0x49e679['ok']?'✅\x20':'❌\x20')+_0x49e679[_0x531dbe(0xc6)]);await sendApiOrFallback(_0x8f6a1,_0x531dbe(0xb6)+_0x531dbe(0xac)+_0x531dbe(0x17f)+_0x58a44c[_0x531dbe(0x7c)]('\x0a'));return;}return;}catch(_0x4d8ec6){error(_0x4d8ec6,_0x531dbe(0x174)+_0x531dbe(0x152)+_0x531dbe(0x15c)+(_0x4d8ec6?.[_0x531dbe(0x177)]||_0x4d8ec6));}}export async function cleanup(){const _0x648893=_0x1042ea;try{for(const _0x3cb836 of groupTimers[_0x648893(0xa7)]())try{clearTimeout(_0x3cb836);}catch(_0x79fbb0){}groupTimers['clear'](),groupQueues['clear'](),groupSizeCache[_0x648893(0x12a)]();try{stopManagedListener(name,_0x648893(0xc5)+_0x648893(0x6c)+_0x648893(0x128));}catch(_0x1f2c63){}info('[welcome]\x20'+_0x648893(0xa6)+_0x648893(0xc9)+_0x648893(0xd6)+_0x648893(0x14b));for(const _0x204c34 of processedMessageKeys[_0x648893(0xa7)]())try{clearTimeout(_0x204c34);}catch(_0x15cd51){}processedMessageKeys[_0x648893(0x12a)]();}catch(_0xb2d04c){warn(_0x648893(0x174)+_0x648893(0xae)+_0x648893(0x138)+(_0xb2d04c?.[_0x648893(0x177)]||_0xb2d04c));}finally{botRef=null,sendApi=null,info('[welcome]\x20'+'cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};