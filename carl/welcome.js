const _0x503048=_0x1632;(function(_0x190e6a,_0x1fd967){const _0x107811=_0x1632,_0x16779a=_0x190e6a();while(!![]){try{const _0x13598b=parseInt(_0x107811(0xf3))/(0x1*-0x1e9a+0x7a7+0x16f4)*(-parseInt(_0x107811(0x15f))/(-0x1183*0x1+0x3d*0x79+0x5a8*-0x2))+-parseInt(_0x107811(0x140))/(0xd*-0x1f1+0x1*-0x5f+0x199f)*(-parseInt(_0x107811(0x102))/(0x14fe+-0x1*-0xb43+-0x203d))+-parseInt(_0x107811(0xb7))/(0x1ae4+0x67*0xa+0xb*-0x2cf)+-parseInt(_0x107811(0x118))/(-0x1f51*0x1+-0x161f+-0x3*-0x11d2)*(parseInt(_0x107811(0xf2))/(-0x1d67*-0x1+-0x1aee+-0x272))+-parseInt(_0x107811(0xc4))/(0x747+0x8b8+-0xff7)*(-parseInt(_0x107811(0x17b))/(0x6*0x15d+-0x11*-0x17c+-0x2161))+parseInt(_0x107811(0x123))/(-0x11c5+-0x1964+0x2b33)+parseInt(_0x107811(0x16a))/(0xb4+-0x563+0x4ba)*(parseInt(_0x107811(0x10c))/(0x31c*-0x3+-0x1*-0x67+0x8f9));if(_0x13598b===_0x1fd967)break;else _0x16779a['push'](_0x16779a['shift']());}catch(_0x1aa3a6){_0x16779a['push'](_0x16779a['shift']());}}}(_0x3a5d,0x4542b+-0x1*-0x89356+0x17577*-0x5));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';function _0x3a5d(){const _0x535893=['win/media/','welcome6.j','308EgeMcq','last_msg_i','omeFromDb\x20','run','lcome\x20for\x20','(s)\x20found\x20','istener\x20fo','tureUrl','IMARY\x20KEY,','_id,\x0a\x20\x20\x20\x20\x20','come\x20','extendedTe','WHATSAPP_G','map','ied.\x20Chang','N\x20last_msg','profilePic','297kVdGGH','(s)\x20found.','subject','msg','f\x20resolvab','me\x20for\x20','onName>\x22\x20i','message','\x20line\x20\x22gp\x20','me\x20to\x20','ROUP_MAX','single\x20or\x20','failed:\x20','buttonsRes','conversati','g_id,\x20upda','_MS','y|connecti','ted_at)\x0a\x20\x20','wlc','toString','ewsletter','resolve\x20co','flushGroup','dmin-only)','catch','evious\x20wel','Metadata\x20f','number','anaged\x20lis','up_jid)\x20DO','connection','n\x20the\x20comm','p_jid\x20=\x20?','.update','oupKey|con','naged\x20list','ndler\x20erro','p\x20<groupKe','ge>\x0a','d\x20=\x20?,\x20upd','r\x20group-pa','provide\x20\x22g','d\x20failed,\x20','\x20\x20\x20group_j','sent\x20welco','ABLED','welcome5.j','\x20message\x20f','INTEGER\x20DE','from','stration\x20f','efaults.','equires\x20bo','exec','image','seMessage','No\x20target\x20','rface\x20avai','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','FAULT\x200,\x0a\x20','88090068@n','welcome2.j','\x20UPDATE\x20SE','welcome4.j','E\x20welcomes','invite','indings\x20er','\x20\x20\x20\x20\x20\x20\x20\x20la','WHERE\x20grou','initialize','isadmin\x20ch','ttonId','@g.us','remoteJid','MatchFromF','onfig\x20appl','\x20fatal:\x20','selectedRo','isArray','eck\x20failed','come\x20resul','M\x20welcomes','random','saveWelcom','groupId','using\x20defa','\x20(group_ji','llback\x20ima','ults','saved\x20welc','rated)\x20or\x20','last_size\x20','\x20\x20\x20\x20\x20VALUE','ensured','T\x20NOT\x20NULL','\x20\x20\x20\x20update','\x20Welcome\x20t','1203632853','deleted\x20we','singleSele','welcome8.j','\x20Set\x20a\x20def','gpUpdateHa','ed_at\x20=\x20?\x20','split','\x20found\x20for','ome\x20for\x20','\x20in\x20','ts_added','SELECT\x20mes','toLowerCas','GroupJids\x20','updated_at','onWhatsApp','delete','ted_at;','rticipants','eToMember\x20','deleted\x20pr','welcome','imageMessa','ener\x20if\x20pr','\x20excluded.','to\x20delete.','[welcome]\x20','onfig\x20hand','error:\x20','welcome9.j','welcome7.j','\x20used\x20as\x20e','set','isInteger','ome\x20','>\x20👤YOU\x27RE\x20','join','cleanup\x20er','\x20failed:\x20','O\x20welcomes','resolveTar','les.theboo','add','ror:\x20','\x20FROM\x20welc','2432535kXALsu','e>\x22.','Welcome\x20to','DEBOUNCE_M','oup_jid\x20=\x20','trim','wlc\x0a','itialize\x20r','onfig\x20regi','action','hotReloadC','max','S\x20(?,\x20?,\x20?','152512Bpreji','updateLast','failed\x20for','ata','filter','string','deleteWelc','DELETE\x20FRO','deletion\x20o','We\x27re\x20happ','comes\x20SET\x20','clear','\x20\x20\x20\x20\x20\x20\x20las','UPDATE\x20wel','participan','values','ting\x20for\x20','endsWith','ATE\x20TABLE\x20','d,\x20message','ma\x20failed','\x20\x20\x20\x20\x20\x20upda','ponseMessa','boolean','ng\x20for\x20','group-part','no\x20send\x20su','registered','size','EFAULT\x20NUL','d_at\x20=\x20exc','includes','isCommand','floor','listRespon','=\x20?,\x20updat','ed:\x20','replace','DB\x20schema\x20','DEFAULT_EN','config\x20loa','esent','text','length','i-line\x20wel','expiresAt','21ykIVET','85104tMrQgI','get\x20profil','stopped\x20ma','groupMetad','esOrJidsTo','Notice:\x20\x27g','luded.upda','\x20message\x20=','sendMessag','Deleted\x20we','and.','EGER\x20DEFAU','<groupKey|','icipants.u','push','309976QKwMVd','Hi\x20','wId','id\x20TEXT\x20PR','ts:\x0a','has','jid','function','ated_at\x20=\x20','\x0a\x20\x20\x20\x20\x20\x20CRE','109068aYbhrL','ing\x20from:\x20','\x20=\x20?','st_size\x20=\x20','xplicit\x20ta','ailed:\x20','changes','rget(s)\x20(i','Delete\x20wel','now','ast_msg_id','sock','1202634iVzMDA','welcome1.j','getWelcome','pdate','e\x20picture\x20','Saved\x20welc','end\x20failed','https://fi','save\x20welco','comma-sepa','ctReply','6645960CBgnxI','sendApiOrF','le).\x20Delet','caption','eToDb\x20fail','message,\x0a\x20','selectedBu','videoMessa','rl\x20for\x20','iled:\x20','you!','nnection\x20n','_CACHE_TTL','get',',\x20last_siz','essage\x20TEX','_id\x20TEXT\x20D','register\x20m','ault\x20with\x20','delwlc','g\x20to:\x20','de\x20\x22gp\x20<gr','o\x20the\x20','omes\x20WHERE','key','cleaned\x20up','last_size','sendApi\x20fa','ast_size,\x0a','3ArPgwk','es\x20(\x0a\x20\x20\x20\x20\x20','vious\x20welc','<your\x20mult','sendWelcom','name','s:\x0a','onMessage\x20','Name>\x22\x20to\x20','\x20WHERE\x20gro','resolveNam','LT\x200\x0a\x20\x20\x20\x20\x20','welcome3.j','/setdefaul','vname','slice','_size,\x20las','\x20managed\x20l','WELCOME','?\x20WHERE\x20gr','saving\x20for','mentions','ted_at\x20INT','\x20=\x20exclude','xtMessage','notify','GROUP_SIZE','kiebasher.','er\x20will\x20be','failed\x20to\x20','\x20error:\x20','4lvIDWQ',',\x20?,\x20?)\x0a\x20\x20','\x20);\x0a\x20\x20\x20\x20',',\x20using\x20fa','ed\x20keys:\x20','le).\x20Savin','fallback\x20s','deleting\x20f','ed\x20for\x20'];_0x3a5d=function(){return _0x535893;};return _0x3a5d();}import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x28ce4f from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x503048(0x1f3);export const version='3.2.0';export const priority=0xd*0x133+-0x1859*-0x1+-0x2776;export const configKeys=[_0x503048(0x152)];export const commands=[_0x503048(0x18e),_0x503048(0x136)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(0x31+0x21da+-0x2206)*(-0x143c+-0x3*-0x90f+0x1*-0x6b5)*(0xc8b+0x99b*0x1+0x91f*-0x2),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),DEDUPE_TTL_MS=(-0x73d*0x3+0xb*-0x121+0x40*0x89)*(-0x355+-0x1*-0x5db+-0x6*-0x3b),processedMessageKeys=new Map();function markProcessed(_0x2cd2e4){const _0x5e35e9=_0x503048;if(!_0x2cd2e4)return;if(processedMessageKeys[_0x5e35e9(0x107)](_0x2cd2e4))try{clearTimeout(processedMessageKeys[_0x5e35e9(0x130)](_0x2cd2e4));}catch(_0x1dcdd9){}const _0x20811d=setTimeout(()=>processedMessageKeys['delete'](_0x2cd2e4),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x2cd2e4,_0x20811d);}function isProcessed(_0x404280){const _0x13462a=_0x503048;return _0x404280&&processedMessageKeys[_0x13462a(0x107)](_0x404280);}async function ensureSchema(){const _0x10dd98=_0x503048;try{await db[_0x10dd98(0x1b1)](_0x10dd98(0x10b)+_0x10dd98(0xd6)+'IF\x20NOT\x20EXI'+'STS\x20welcom'+_0x10dd98(0x141)+_0x10dd98(0x1a7)+_0x10dd98(0x105)+_0x10dd98(0x172)+_0x10dd98(0x1b6)+_0x10dd98(0x132)+_0x10dd98(0x1da)+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x10dd98(0x1d7)+_0x10dd98(0x1ac)+_0x10dd98(0x1b7)+_0x10dd98(0xd0)+'t_msg_id\x20T'+'EXT\x20DEFAUL'+'T\x20NULL,\x0a\x20\x20'+_0x10dd98(0xd9)+_0x10dd98(0x156)+_0x10dd98(0xfe)+_0x10dd98(0x14b)+_0x10dd98(0x161));try{await db['exec']('ALTER\x20TABL'+_0x10dd98(0x1bc)+'\x20ADD\x20COLUM'+_0x10dd98(0x179)+_0x10dd98(0x133)+_0x10dd98(0xe1)+'L;');}catch(_0x45ff94){}info(_0x10dd98(0x1f8)+_0x10dd98(0xea)+_0x10dd98(0x1d9));}catch(_0x1213fb){error(_0x1213fb,_0x10dd98(0x1f8)+'ensureSche'+_0x10dd98(0xd8));throw _0x1213fb;}}async function saveWelcomeToDb(_0x5aae1a,_0x3da35b,_0x465e56=0x11b+-0x6c5*0x1+-0x32*-0x1d,_0x111199=null){const _0xed553e=_0x503048;try{const _0x3ed11c=Math['floor'](Date[_0xed553e(0x115)]()/(-0x1c48+-0x399*0x1+0x23c9));return await db[_0xed553e(0x16d)]('INSERT\x20INT'+_0xed553e(0xb1)+_0xed553e(0x1d2)+_0xed553e(0xd7)+_0xed553e(0x131)+'e,\x20last_ms'+_0xed553e(0x18a)+_0xed553e(0x18d)+_0xed553e(0x1d8)+_0xed553e(0xc3)+_0xed553e(0x160)+'\x20\x20\x20\x20\x20ON\x20CO'+'NFLICT(gro'+_0xed553e(0x199)+_0xed553e(0x1ba)+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0xed553e(0xfa)+_0xed553e(0x1f6)+_0xed553e(0x128)+_0xed553e(0x1bf)+_0xed553e(0x10f)+'excluded.l'+_0xed553e(0x13f)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+_0xed553e(0x116)+_0xed553e(0x157)+'d.last_msg'+_0xed553e(0x173)+_0xed553e(0x1db)+_0xed553e(0xe2)+_0xed553e(0xf9)+_0xed553e(0x1ef),[_0x5aae1a,String(_0x3da35b||''),Number(_0x465e56||-0x1642+0x349*0x3+-0x5*-0x27b),_0x111199||null,_0x3ed11c]),info(_0xed553e(0x1f8)+_0xed553e(0x1d5)+'ome\x20for\x20'+_0x5aae1a),!![];}catch(_0x193098){return warn('[welcome]\x20'+_0xed553e(0x1cf)+_0xed553e(0x127)+_0xed553e(0x167)+_0x5aae1a+':\x20'+(_0x193098?.[_0xed553e(0x182)]||_0x193098)),![];}}async function deleteWelcomeFromDb(_0x613b6d){const _0xd05a92=_0x503048;try{const _0x35bfb0=await db[_0xd05a92(0x16d)](_0xd05a92(0xcb)+_0xd05a92(0x1cd)+_0xd05a92(0x149)+'up_jid\x20=\x20?',[_0x613b6d]);return info(_0xd05a92(0x1f8)+_0xd05a92(0x1de)+_0xd05a92(0x16e)+_0x613b6d),_0x35bfb0?.[_0xd05a92(0x112)]||-0x1*-0x25b5+0x19d6*-0x1+0x3*-0x3f5;}catch(_0x4603c5){return warn(_0xd05a92(0x1f8)+_0xd05a92(0xca)+_0xd05a92(0x16c)+_0xd05a92(0xc6)+'\x20'+_0x613b6d+':\x20'+(_0x4603c5?.[_0xd05a92(0x182)]||_0x4603c5)),-0x1e*-0xe9+-0x6f*0x43+0x1bf*0x1;}}async function getWelcomeFromDb(_0x37bf2c){const _0x474a00=_0x503048;try{const _0x49845a=await db[_0x474a00(0x130)](_0x474a00(0x1e9)+'sage,\x20last'+_0x474a00(0x150)+'t_msg_id,\x20'+_0x474a00(0x1ec)+_0x474a00(0xb6)+_0x474a00(0x13a)+'\x20group_jid'+_0x474a00(0x10e),[_0x37bf2c]);return _0x49845a||null;}catch(_0x5af202){return warn('[welcome]\x20'+_0x474a00(0x11a)+'FromDb\x20fai'+'led\x20for\x20'+_0x37bf2c+':\x20'+(_0x5af202?.['message']||_0x5af202)),null;}}async function updateLastMsgIdInDb(_0x2d7401,_0x126337){const _0x437421=_0x503048;try{const _0x3e0387=Math['floor'](Date[_0x437421(0x115)]()/(-0x1*0x1c03+0xd*-0x232+0x3c75));return await db[_0x437421(0x16d)]('UPDATE\x20wel'+_0x437421(0xce)+_0x437421(0x16b)+_0x437421(0x1a3)+_0x437421(0x10a)+_0x437421(0x153)+_0x437421(0xbb)+'?',[_0x126337||null,_0x3e0387,_0x2d7401]),!![];}catch(_0x441ffe){return warn(_0x437421(0x1f8)+_0x437421(0xc5)+'MsgIdInDb\x20'+_0x437421(0xc6)+'\x20'+_0x2d7401+':\x20'+(_0x441ffe?.['message']||_0x441ffe)),![];}}function tryBuildSendApiFromBot(_0x275c04){const _0x41f62c=_0x503048;if(!_0x275c04)return null;if(typeof _0x275c04[_0x41f62c(0xfb)+'e']===_0x41f62c(0x109))return async(_0x13ae48,_0xa5281d)=>_0x275c04['sendMessag'+'e'](_0x13ae48,_0xa5281d);if(_0x275c04[_0x41f62c(0x117)]&&typeof _0x275c04['sock'][_0x41f62c(0xfb)+'e']===_0x41f62c(0x109))return async(_0x1e1282,_0x731d68)=>_0x275c04[_0x41f62c(0x117)][_0x41f62c(0xfb)+'e'](_0x1e1282,_0x731d68);return null;}function setupSendApi(_0x428f9b){botRef=_0x428f9b,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x559436,_0x1c2512,_0x43750e=[]){const _0x5df319=_0x503048;try{if(!_0x559436||!_0x1c2512)return null;const _0x2cbdcc=typeof _0x1c2512===_0x5df319(0xc9)?{'text':String(_0x1c2512)}:_0x1c2512;if(Array['isArray'](_0x43750e)&&_0x43750e[_0x5df319(0xef)])_0x2cbdcc[_0x5df319(0x155)]=_0x43750e;if(sendApi)try{const _0x519758=await sendApi(_0x559436,_0x2cbdcc);return _0x519758;}catch(_0x4b80c1){return warn(_0x5df319(0x1f8)+_0x5df319(0x13e)+_0x5df319(0x12c)+(_0x4b80c1?.['message']||_0x4b80c1)),null;}else try{if(botRef&&typeof botRef[_0x5df319(0xfb)+'e']===_0x5df319(0x109))return await botRef[_0x5df319(0xfb)+'e'](_0x559436,_0x2cbdcc);else return botRef&&botRef[_0x5df319(0x117)]&&typeof botRef['sock'][_0x5df319(0xfb)+'e']===_0x5df319(0x109)?await botRef['sock'][_0x5df319(0xfb)+'e'](_0x559436,_0x2cbdcc):(warn(_0x5df319(0x1f8)+_0x5df319(0xde)+_0x5df319(0x1b5)+'lable\x20for\x20'+_0x559436),null);}catch(_0x1f0ff5){return warn(_0x5df319(0x1f8)+_0x5df319(0x165)+_0x5df319(0x11e)+':\x20'+(_0x1f0ff5?.['message']||_0x1f0ff5)),null;}}catch(_0x1dd78a){return warn(_0x5df319(0x1f8)+_0x5df319(0x124)+'allback\x20fa'+'iled:\x20'+(_0x1dd78a?.[_0x5df319(0x182)]||_0x1dd78a)),null;}}function extractTextFromMessage(_0x55b4b6){const _0x5f4d18=_0x503048;if(!_0x55b4b6||!_0x55b4b6[_0x5f4d18(0x182)])return'';const _0x43cd11=_0x55b4b6['message'];if(_0x43cd11[_0x5f4d18(0x189)+'on'])return _0x43cd11[_0x5f4d18(0x189)+'on'];if(_0x43cd11[_0x5f4d18(0x175)+_0x5f4d18(0x158)]?.[_0x5f4d18(0xee)])return _0x43cd11['extendedTe'+'xtMessage'][_0x5f4d18(0xee)];if(_0x43cd11[_0x5f4d18(0x1f4)+'ge']?.[_0x5f4d18(0x126)])return _0x43cd11[_0x5f4d18(0x1f4)+'ge'][_0x5f4d18(0x126)];if(_0x43cd11[_0x5f4d18(0x12a)+'ge']?.[_0x5f4d18(0x126)])return _0x43cd11[_0x5f4d18(0x12a)+'ge'][_0x5f4d18(0x126)];if(_0x43cd11[_0x5f4d18(0x188)+_0x5f4d18(0xda)+'ge']?.[_0x5f4d18(0x129)+_0x5f4d18(0x1c3)])return _0x43cd11['buttonsRes'+'ponseMessa'+'ge']['selectedBu'+_0x5f4d18(0x1c3)];if(_0x43cd11[_0x5f4d18(0xe6)+'seMessage']?.[_0x5f4d18(0x1df)+_0x5f4d18(0x122)]?.['selectedRo'+_0x5f4d18(0x104)])return _0x43cd11[_0x5f4d18(0xe6)+_0x5f4d18(0x1b3)]['singleSele'+_0x5f4d18(0x122)][_0x5f4d18(0x1c9)+'wId'];return'';}async function resolveNamesOrJidsToGroupJids(_0xc8e3c5){const _0x683992=_0x503048;try{const _0xc3e13=[];if(!_0xc8e3c5)return[];if(Array[_0x683992(0x1ca)](_0xc8e3c5)){for(const _0x5eec7b of _0xc8e3c5)if(_0x5eec7b&&String(_0x5eec7b)[_0x683992(0xbc)]())_0xc3e13[_0x683992(0x101)](String(_0x5eec7b)[_0x683992(0xbc)]());}else{if(typeof _0xc8e3c5===_0x683992(0xc9)){const _0x123950=_0xc8e3c5['split'](',')['map'](_0x129c7f=>_0x129c7f['trim']())['filter'](Boolean);for(const _0x26cffe of _0x123950)_0xc3e13[_0x683992(0x101)](_0x26cffe);}else _0xc3e13[_0x683992(0x101)](String(_0xc8e3c5));}const _0x46c886=new Set();for(const _0x4f884f of _0xc3e13){if(!_0x4f884f)continue;if(_0x4f884f[_0x683992(0xe3)]('@')){_0x46c886[_0x683992(0xb4)](_0x4f884f);continue;}try{const _0x3be5a7=await getConnection(_0x4f884f)[_0x683992(0x194)](()=>null);if(Array[_0x683992(0x1ca)](_0x3be5a7)&&_0x3be5a7[_0x683992(0xef)]){for(const _0x4d9cd4 of _0x3be5a7)if(_0x4d9cd4)_0x46c886['add'](_0x4d9cd4);}}catch(_0x2d2cb3){warn(_0x683992(0x1f8)+_0x683992(0x15d)+_0x683992(0x191)+_0x683992(0x12e)+'ame\x20'+_0x4f884f+':\x20'+(_0x2d2cb3?.[_0x683992(0x182)]||_0x2d2cb3));}}return Array['from'](_0x46c886);}catch(_0x1f901e){return warn(_0x683992(0x1f8)+_0x683992(0x14a)+_0x683992(0xf7)+_0x683992(0x1eb)+_0x683992(0x187)+(_0x1f901e?.['message']||_0x1f901e)),[];}}function _0x1632(_0x2c920c,_0xe69d3e){const _0x3cbc68=_0x3a5d();return _0x1632=function(_0x42b740,_0x4d6851){_0x42b740=_0x42b740-(-0x49*-0x5+0x295*-0xc+0x1e36);let _0x48e1f0=_0x3cbc68[_0x42b740];return _0x48e1f0;},_0x1632(_0x2c920c,_0xe69d3e);}async function resolveTargetGroupJids(_0x50b7a6,_0x46b7b5){const _0x3e7dde=_0x503048;try{if(_0x50b7a6){const _0x304fc9=await resolveNamesOrJidsToGroupJids(_0x50b7a6);return _0x304fc9;}if(!_0x46b7b5)return[];const _0x46fcbf=await getDefault(_0x46b7b5)[_0x3e7dde(0x194)](()=>null);if(!_0x46fcbf)return[];const _0x39f7d2=Array['isArray'](_0x46fcbf)?_0x46fcbf:[_0x46fcbf];if(!_0x39f7d2[_0x3e7dde(0xef)])return[];const _0x45aa6c=await resolveNamesOrJidsToGroupJids(_0x39f7d2);return _0x45aa6c;}catch(_0x85a65d){return warn(_0x3e7dde(0x1f8)+_0x3e7dde(0xb2)+'getGroupJi'+'ds\x20failed:'+'\x20'+(_0x85a65d?.[_0x3e7dde(0x182)]||_0x85a65d)),[];}}async function fetchGroupMetadata(_0x3bc652){const _0x2fab2c=_0x503048;if(!botRef)return null;try{if(botRef[_0x2fab2c(0x117)]&&typeof botRef[_0x2fab2c(0x117)][_0x2fab2c(0xf6)+'ata']==='function')return await botRef[_0x2fab2c(0x117)][_0x2fab2c(0xf6)+_0x2fab2c(0xc7)](_0x3bc652);if(typeof botRef[_0x2fab2c(0xf6)+_0x2fab2c(0xc7)]===_0x2fab2c(0x109))return await botRef['groupMetad'+_0x2fab2c(0xc7)](_0x3bc652);return null;}catch(_0x1fcfc4){return warn(_0x2fab2c(0x1f8)+'fetchGroup'+_0x2fab2c(0x196)+'ailed:\x20'+(_0x1fcfc4?.['message']||_0x1fcfc4)),null;}}async function fetchProfilePictureUrl(_0x4f58b2){const _0x5e1bbe=_0x503048;if(!botRef||!_0x4f58b2)return null;try{let _0x15fe86=null;if(botRef[_0x5e1bbe(0x117)]&&typeof botRef[_0x5e1bbe(0x117)]['profilePic'+_0x5e1bbe(0x171)]===_0x5e1bbe(0x109))_0x15fe86=await botRef[_0x5e1bbe(0x117)][_0x5e1bbe(0x17a)+_0x5e1bbe(0x171)](_0x4f58b2,_0x5e1bbe(0x1b2))[_0x5e1bbe(0x194)](()=>null);else typeof botRef[_0x5e1bbe(0x17a)+_0x5e1bbe(0x171)]===_0x5e1bbe(0x109)&&(_0x15fe86=await botRef[_0x5e1bbe(0x17a)+'tureUrl'](_0x4f58b2,'image')[_0x5e1bbe(0x194)](()=>null));return _0x15fe86;}catch(_0x43b67d){return warn(_0x5e1bbe(0x1f8)+'fetchProfi'+'lePictureU'+_0x5e1bbe(0x12b)+_0x4f58b2+_0x5e1bbe(0xb0)+(_0x43b67d?.[_0x5e1bbe(0x182)]||_0x43b67d)),null;}}function getCachedGroupSize(_0x5a42ee){const _0x4847d4=_0x503048,_0x465383=groupSizeCache[_0x4847d4(0x130)](_0x5a42ee);if(!_0x465383)return null;if(Date['now']()>_0x465383[_0x4847d4(0xf1)])return groupSizeCache['delete'](_0x5a42ee),null;return _0x465383[_0x4847d4(0xe0)];}function setCachedGroupSize(_0x529275,_0xa79802){const _0x523b55=_0x503048;groupSizeCache[_0x523b55(0xaa)](_0x529275,{'size':Number(_0xa79802||0xb*-0x65+-0x1bf5+0xd4*0x27),'expiresAt':Date['now']()+(CFG[_0x523b55(0x15a)+_0x523b55(0x12f)+_0x523b55(0x18b)]||DEFAULTS[_0x523b55(0x15a)+_0x523b55(0x12f)+_0x523b55(0x18b)])});}async function resolveDisplayName(_0x37b276){const _0x40e013=_0x503048;try{if(!botRef||!_0x37b276)return _0x37b276?.[_0x40e013(0x1e4)]?.('@')?.[-0x226e+0x19ab+0x8c3]??_0x37b276;try{if(typeof botRef[_0x40e013(0x1ed)]===_0x40e013(0x109)){const _0x19425c=await botRef[_0x40e013(0x1ed)](_0x37b276);if(Array['isArray'](_0x19425c)&&_0x19425c['length']>0xef4+0x80f*0x4+-0x2f30){const _0x1cc662=_0x19425c[-0x5d3*-0x5+0x227+-0x1f46];if(_0x1cc662&&(_0x1cc662[_0x40e013(0x159)]||_0x1cc662[_0x40e013(0x14e)]||_0x1cc662[_0x40e013(0x145)]))return _0x1cc662[_0x40e013(0x159)]||_0x1cc662[_0x40e013(0x14e)]||_0x1cc662[_0x40e013(0x145)];}}if(botRef[_0x40e013(0x117)]&&typeof botRef[_0x40e013(0x117)][_0x40e013(0x1ed)]===_0x40e013(0x109)){const _0x30ddab=await botRef['sock']['onWhatsApp'](_0x37b276);if(Array[_0x40e013(0x1ca)](_0x30ddab)&&_0x30ddab[_0x40e013(0xef)]>-0x1*-0x10c1+-0x260e+0x1*0x154d){const _0x90e422=_0x30ddab[0x3*0x389+0x7*-0x53b+0x1*0x1a02];if(_0x90e422&&(_0x90e422[_0x40e013(0x159)]||_0x90e422[_0x40e013(0x14e)]||_0x90e422['name']))return _0x90e422[_0x40e013(0x159)]||_0x90e422['vname']||_0x90e422[_0x40e013(0x145)];}}}catch(_0x2e110a){}return String(_0x37b276)[_0x40e013(0x1e4)]('@')[-0xb26+-0x64b+-0x5*-0x37d]||_0x37b276;}catch(_0x54d222){return _0x37b276?.[_0x40e013(0x1e4)]?.('@')?.[0x1339*-0x1+0x866+0xad3]??_0x37b276;}}async function findStoredMatchFromFindings(_0x9dfc1f=[]){const _0x427b69=_0x503048;try{const _0x2ad3e5=await listSudo();if(!Array[_0x427b69(0x1ca)](_0x2ad3e5)||_0x2ad3e5[_0x427b69(0xef)]===-0x2*0x43+0x2*-0x82f+0x10e4)return null;const _0x247009=new Set(_0x2ad3e5[_0x427b69(0x177)](String));for(const _0xa8cfaf of _0x9dfc1f||[]){if(!_0xa8cfaf||typeof _0xa8cfaf[_0x427b69(0x108)]!==_0x427b69(0xc9))continue;const _0x383713=normalizeToJid(_0xa8cfaf['jid']);if(_0x383713&&_0x247009[_0x427b69(0x107)](_0x383713))return _0x383713;if(_0x247009['has'](_0xa8cfaf[_0x427b69(0x108)]))return _0xa8cfaf[_0x427b69(0x108)];const _0x1953a4=String(_0xa8cfaf['jid'])[_0x427b69(0x1e4)]('@')[0x183c+0x1769+-0x2fa5][_0x427b69(0x1e4)](':')[-0x1ea+-0x33b*-0x2+-0x123*0x4];if(_0x1953a4)for(const _0x11fbab of _0x2ad3e5){const _0x1b6243=String(_0x11fbab)[_0x427b69(0x1e4)]('@')[0x2707+0x4*-0x47e+0x150f*-0x1];if(_0x1b6243&&_0x1b6243===_0x1953a4)return _0x11fbab;}}return null;}catch(_0x31ff06){return warn(_0x427b69(0x1f8)+'findStored'+_0x427b69(0x1c6)+_0x427b69(0x1be)+'ror:\x20'+(_0x31ff06?.[_0x427b69(0x182)]||_0x31ff06)),null;}}const WELCOME_CARD_IMAGES=[_0x503048(0x11f)+'les.theboo'+'kiebasher.'+_0x503048(0x168)+_0x503048(0x119)+'pg',_0x503048(0x11f)+_0x503048(0xb3)+_0x503048(0x15b)+_0x503048(0x168)+_0x503048(0x1b9)+'pg','https://fi'+_0x503048(0xb3)+'kiebasher.'+_0x503048(0x168)+_0x503048(0x14c)+'pg',_0x503048(0x11f)+_0x503048(0xb3)+_0x503048(0x15b)+_0x503048(0x168)+_0x503048(0x1bb)+'pg',_0x503048(0x11f)+_0x503048(0xb3)+_0x503048(0x15b)+_0x503048(0x168)+_0x503048(0x1aa)+'pg',_0x503048(0x11f)+_0x503048(0xb3)+_0x503048(0x15b)+_0x503048(0x168)+_0x503048(0x169)+'pg',_0x503048(0x11f)+_0x503048(0xb3)+'kiebasher.'+_0x503048(0x168)+_0x503048(0xa8)+'pg','https://fi'+_0x503048(0xb3)+'kiebasher.'+_0x503048(0x168)+_0x503048(0x1e0)+'pg','https://fi'+_0x503048(0xb3)+_0x503048(0x15b)+_0x503048(0x168)+_0x503048(0xa7)+'pg'];function pickRandomCardImage(){const _0x47217c=_0x503048;return WELCOME_CARD_IMAGES[Math[_0x47217c(0xe5)](Math[_0x47217c(0x1ce)]()*WELCOME_CARD_IMAGES[_0x47217c(0xef)])];}async function sendWelcomeToMember(_0x4a14ef,_0x4878e1){const _0x599de7=_0x503048;try{const _0x2e21b6=await getWelcomeFromDb(_0x4a14ef);if(!_0x2e21b6||!_0x2e21b6[_0x599de7(0x182)])return![];let _0x22220c=await fetchGroupMetadata(_0x4a14ef),_0x19f672=_0x22220c&&_0x22220c[_0x599de7(0x17d)]?_0x22220c[_0x599de7(0x17d)]:_0x4a14ef,_0x1bd299=getCachedGroupSize(_0x4a14ef);if(!_0x1bd299||_0x1bd299<=-0x234a+0xa22+0x64a*0x4){if(_0x22220c&&Array[_0x599de7(0x1ca)](_0x22220c[_0x599de7(0xd2)+'ts']))_0x1bd299=_0x22220c['participan'+'ts']['length'];else{if(_0x22220c&&typeof _0x22220c['size']==='number')_0x1bd299=_0x22220c[_0x599de7(0xe0)];else{_0x22220c=_0x22220c||await fetchGroupMetadata(_0x4a14ef);if(_0x22220c&&Array['isArray'](_0x22220c['participan'+'ts']))_0x1bd299=_0x22220c['participan'+'ts']['length'];}}if(!_0x1bd299||_0x1bd299<=0x148b+-0x1*-0x329+-0x17b4)_0x1bd299=Number(_0x2e21b6[_0x599de7(0x13d)]||0x3*-0x59e+-0x2*-0x10e+-0x1*-0xebe);else setCachedGroupSize(_0x4a14ef,_0x1bd299);}const _0x218548=CFG[_0x599de7(0x176)+_0x599de7(0x185)]||DEFAULTS[_0x599de7(0x176)+_0x599de7(0x185)],_0x57d6c5=await resolveDisplayName(_0x4878e1),_0x80002='@'+String(_0x57d6c5)['replace'](/\s+/g,'\x20'),_0x444fbb=[];_0x444fbb[_0x599de7(0x101)](_0x599de7(0x103)+_0x80002+(_0x599de7(0x1dc)+_0x599de7(0x139))+_0x19f672),_0x444fbb[_0x599de7(0x101)](String(_0x2e21b6[_0x599de7(0x182)])[_0x599de7(0xbc)]()),_0x444fbb['push'](_0x599de7(0xad)+'MEMBER:\x20\x20'+_0x1bd299+'/'+_0x218548);const _0x3c1bce=_0x444fbb[_0x599de7(0xae)]('\x0a\x0a'),_0x2a4cda=[_0x4878e1],_0x387765=_0x2e21b6[_0x599de7(0x16b)+'d']||null;let _0x4feff3=await fetchProfilePictureUrl(_0x4878e1);!_0x4feff3&&(_0x4feff3=pickRandomCardImage(),info(_0x599de7(0x1f8)+'Could\x20not\x20'+_0x599de7(0xf4)+_0x599de7(0x11c)+'for\x20'+_0x4878e1+(_0x599de7(0x162)+_0x599de7(0x1d3)+'ge.')));const _0x517d24={'title':_0x599de7(0xb9)+'\x20'+_0x19f672,'body':_0x599de7(0xcd)+'y\x20to\x20have\x20'+_0x599de7(0x12d),'thumbnailUrl':_0x4feff3,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x2418be=await sendApiOrFallback(_0x4a14ef,{'text':_0x3c1bce,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x599de7(0x1dd)+_0x599de7(0x1b8)+_0x599de7(0x190),'newsletterName':'WelcomeBot','serverMessageId':0x7b},'externalAdReply':_0x517d24}},_0x2a4cda);let _0x4fb6ac=null;try{_0x2418be&&(_0x4fb6ac=_0x2418be?.[_0x599de7(0x13b)]&&_0x2418be['key']['id']?_0x2418be[_0x599de7(0x13b)]['id']:_0x2418be?.[_0x599de7(0x182)]&&_0x2418be['message']?.['id']?_0x2418be[_0x599de7(0x182)]['id']:_0x2418be?.['id']?_0x2418be['id']:null);}catch(_0x2d62b0){}if(_0x387765&&_0x387765!==_0x4fb6ac)try{if(botRef&&typeof botRef['sendMessag'+'e']===_0x599de7(0x109))try{await botRef[_0x599de7(0xfb)+'e'](_0x4a14ef,{'delete':{'id':_0x387765,'remoteJid':_0x4a14ef,'fromMe':!![]}}),info(_0x599de7(0x1f8)+_0x599de7(0x1f2)+_0x599de7(0x195)+_0x599de7(0x174)+_0x387765+_0x599de7(0x1e7)+_0x4a14ef);}catch(_0x4be690){try{await botRef[_0x599de7(0x117)]?.[_0x599de7(0xfb)+'e']?.(_0x4a14ef,{'delete':{'id':_0x387765,'remoteJid':_0x4a14ef,'fromMe':!![]}}),info(_0x599de7(0x1f8)+_0x599de7(0x1f2)+_0x599de7(0x195)+'come\x20(sock'+')\x20'+_0x387765+'\x20in\x20'+_0x4a14ef);}catch(_0x54fde3){warn(_0x599de7(0x1f8)+_0x599de7(0x15d)+'delete\x20pre'+_0x599de7(0x142)+_0x599de7(0xac)+_0x387765+_0x599de7(0x1e7)+_0x4a14ef+':\x20'+(_0x54fde3?.[_0x599de7(0x182)]||_0x54fde3));}}}catch(_0x1aadd7){warn('[welcome]\x20'+_0x599de7(0xcc)+'f\x20previous'+_0x599de7(0x1ab)+_0x599de7(0x111)+(_0x1aadd7?.['message']||_0x1aadd7));}try{_0x4fb6ac?await updateLastMsgIdInDb(_0x4a14ef,_0x4fb6ac):await updateLastMsgIdInDb(_0x4a14ef,null);}catch(_0x2c0c4a){}const _0x1d0ddb=Number(_0x2e21b6[_0x599de7(0x13d)]||0x1*-0x3ee+0x4c5+-0xd7);if(_0x1bd299&&_0x1bd299!==_0x1d0ddb)try{await db[_0x599de7(0x16d)](_0x599de7(0xd1)+_0x599de7(0xce)+'last_size\x20'+_0x599de7(0xe7)+_0x599de7(0x1e3)+_0x599de7(0x1c0)+_0x599de7(0x19c),[_0x1bd299,Math[_0x599de7(0xe5)](Date[_0x599de7(0x115)]()/(0xa34*0x1+0x1bda+-0x1f*0x11a)),_0x4a14ef]),setCachedGroupSize(_0x4a14ef,_0x1bd299);}catch(_0x27b664){}return info(_0x599de7(0x1f8)+_0x599de7(0x1a8)+_0x599de7(0x184)+_0x4878e1+'\x20in\x20'+_0x4a14ef),!![];}catch(_0x2c3881){return warn(_0x599de7(0x1f8)+_0x599de7(0x144)+_0x599de7(0x1f1)+_0x599de7(0x187)+(_0x2c3881?.[_0x599de7(0x182)]||_0x2c3881)),![];}}async function flushGroup(_0x1fe26b){const _0x138eda=_0x503048;try{const _0x43cbc9=groupQueues[_0x138eda(0x130)](_0x1fe26b);if(!_0x43cbc9||_0x43cbc9[_0x138eda(0xe0)]===-0x2*0x393+0x4f*-0x6b+0x282b){if(groupTimers[_0x138eda(0x107)](_0x1fe26b)){try{clearTimeout(groupTimers[_0x138eda(0x130)](_0x1fe26b));}catch(_0x1e4994){}groupTimers[_0x138eda(0x1ee)](_0x1fe26b);}groupQueues['delete'](_0x1fe26b);return;}const _0x42f4b1=Array['from'](_0x43cbc9);for(const _0x1e184f of _0x42f4b1){try{await sendWelcomeToMember(_0x1fe26b,_0x1e184f)[_0x138eda(0x194)](()=>{});}catch(_0x6575d7){warn(_0x138eda(0x1f8)+_0x138eda(0x192)+'\x20item\x20fail'+_0x138eda(0xe8)+(_0x6575d7?.[_0x138eda(0x182)]||_0x6575d7));}}}catch(_0x3f5411){warn('[welcome]\x20'+_0x138eda(0x192)+_0x138eda(0x15e)+(_0x3f5411?.[_0x138eda(0x182)]||_0x3f5411));}finally{if(groupTimers['has'](_0x1fe26b)){try{clearTimeout(groupTimers[_0x138eda(0x130)](_0x1fe26b));}catch(_0x4c32b0){}groupTimers['delete'](_0x1fe26b);}groupQueues[_0x138eda(0x1ee)](_0x1fe26b);}}async function gpUpdateHandler(_0x420427){const _0x5be5e7=_0x503048;try{if(!_0x420427)return;const _0x5dbb2a=(_0x420427[_0x5be5e7(0xc0)]||_0x420427['type']||'')[_0x5be5e7(0x18f)]()['toLowerCas'+'e']();if(_0x5dbb2a!=='add'&&_0x5dbb2a!==_0x5be5e7(0x1bd))return;const _0x465f93=_0x420427['id']||_0x420427[_0x5be5e7(0x1d0)]||_0x420427[_0x5be5e7(0x108)]||_0x420427['groupJid'];if(!_0x465f93)return;const _0x551736=Array[_0x5be5e7(0x1ca)](_0x420427[_0x5be5e7(0xd2)+'ts'])?_0x420427[_0x5be5e7(0xd2)+'ts']:Array[_0x5be5e7(0x1ca)](_0x420427[_0x5be5e7(0xd2)+_0x5be5e7(0x1e8)])?_0x420427['participan'+_0x5be5e7(0x1e8)]:[];if(!_0x551736||_0x551736['length']===-0x4d2+0x1329+-0xe57)return;let _0x4eb894=[];if(_0x551736[_0x5be5e7(0xef)]===-0x179b+0xe61+0x93b)_0x4eb894=[_0x551736[-0x1*0x2156+0x4c*0x4+0x2026]];else{const _0x1fcceb=_0x551736[_0x551736[_0x5be5e7(0xef)]-(-0x230a+0xa09*0x2+0xef9)];_0x4eb894=[_0x1fcceb];}if(!groupQueues['has'](_0x465f93))groupQueues['set'](_0x465f93,new Set());const _0x1a96a2=groupQueues[_0x5be5e7(0x130)](_0x465f93);for(const _0x25943d of _0x4eb894)_0x1a96a2[_0x5be5e7(0xb4)](_0x25943d);if(groupTimers[_0x5be5e7(0x107)](_0x465f93))try{clearTimeout(groupTimers[_0x5be5e7(0x130)](_0x465f93));}catch(_0x3bf39b){}const _0x23e09f=Math[_0x5be5e7(0xc2)](0x1802+-0x581+0x1*-0x121d,Number(CFG[_0x5be5e7(0xba)+'S']||DEFAULTS[_0x5be5e7(0xba)+'S'])),_0x4117d6=setTimeout(()=>{const _0x2d9c7a=_0x5be5e7;flushGroup(_0x465f93)[_0x2d9c7a(0x194)](_0x5bca9a=>warn('[welcome]\x20'+_0x2d9c7a(0x192)+_0x2d9c7a(0xb0)+(_0x5bca9a?.[_0x2d9c7a(0x182)]||_0x5bca9a)));},_0x23e09f);groupTimers[_0x5be5e7(0xaa)](_0x465f93,_0x4117d6);}catch(_0x5e73ea){warn(_0x5be5e7(0x1f8)+_0x5be5e7(0x1e2)+_0x5be5e7(0x1a0)+'r:\x20'+(_0x5e73ea?.['message']||_0x5e73ea));}}export async function initialize(_0x9c4c2d){const _0x36770d=_0x503048;if(!_0x9c4c2d)throw new Error('welcome.in'+_0x36770d(0xbe)+_0x36770d(0x1b0)+'t\x20instance');botRef=_0x9c4c2d,setupSendApi(_0x9c4c2d);try{const _0x5a2523=getConfig()||{},_0x248aec=_0x5a2523&&_0x5a2523[_0x36770d(0x152)]?_0x5a2523[_0x36770d(0x152)]:{};CFG['DEFAULT_EN'+_0x36770d(0x1a9)]=typeof _0x248aec[_0x36770d(0xeb)+_0x36770d(0x1a9)]===_0x36770d(0xdb)?_0x248aec['DEFAULT_EN'+'ABLED']:DEFAULTS[_0x36770d(0xeb)+_0x36770d(0x1a9)],CFG[_0x36770d(0x15a)+_0x36770d(0x12f)+'_MS']=Number[_0x36770d(0xab)](_0x248aec[_0x36770d(0x15a)+'_CACHE_TTL'+_0x36770d(0x18b)])?_0x248aec[_0x36770d(0x15a)+_0x36770d(0x12f)+_0x36770d(0x18b)]:DEFAULTS[_0x36770d(0x15a)+_0x36770d(0x12f)+_0x36770d(0x18b)],CFG[_0x36770d(0x176)+_0x36770d(0x185)]=Number[_0x36770d(0xab)](_0x248aec[_0x36770d(0x176)+'ROUP_MAX'])?_0x248aec[_0x36770d(0x176)+_0x36770d(0x185)]:DEFAULTS[_0x36770d(0x176)+_0x36770d(0x185)],CFG[_0x36770d(0xba)+'S']=Number['isInteger'](_0x248aec['DEBOUNCE_M'+'S'])?_0x248aec[_0x36770d(0xba)+'S']:DEFAULTS[_0x36770d(0xba)+'S'];}catch(_0x59dcb9){warn(_0x36770d(0x1f8)+_0x36770d(0xec)+_0x36770d(0x1a6)+_0x36770d(0x1d1)+_0x36770d(0x1d4)),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0xff2a04=[])=>{const _0x52b7c5=_0x36770d;try{const _0x575264=getConfig()||{},_0x26f73c=_0x575264&&_0x575264['WELCOME']?_0x575264[_0x52b7c5(0x152)]:{};CFG[_0x52b7c5(0xeb)+_0x52b7c5(0x1a9)]=typeof _0x26f73c[_0x52b7c5(0xeb)+'ABLED']===_0x52b7c5(0xdb)?_0x26f73c[_0x52b7c5(0xeb)+_0x52b7c5(0x1a9)]:DEFAULTS[_0x52b7c5(0xeb)+_0x52b7c5(0x1a9)],CFG[_0x52b7c5(0x15a)+_0x52b7c5(0x12f)+_0x52b7c5(0x18b)]=Number['isInteger'](_0x26f73c[_0x52b7c5(0x15a)+_0x52b7c5(0x12f)+_0x52b7c5(0x18b)])?_0x26f73c['GROUP_SIZE'+'_CACHE_TTL'+_0x52b7c5(0x18b)]:DEFAULTS['GROUP_SIZE'+_0x52b7c5(0x12f)+_0x52b7c5(0x18b)],CFG[_0x52b7c5(0x176)+_0x52b7c5(0x185)]=Number['isInteger'](_0x26f73c[_0x52b7c5(0x176)+_0x52b7c5(0x185)])?_0x26f73c['WHATSAPP_G'+_0x52b7c5(0x185)]:DEFAULTS[_0x52b7c5(0x176)+_0x52b7c5(0x185)],CFG[_0x52b7c5(0xba)+'S']=Number[_0x52b7c5(0xab)](_0x26f73c['DEBOUNCE_M'+'S'])?_0x26f73c[_0x52b7c5(0xba)+'S']:DEFAULTS[_0x52b7c5(0xba)+'S'],info('[welcome]\x20'+_0x52b7c5(0xc1)+_0x52b7c5(0x1c7)+_0x52b7c5(0x178)+_0x52b7c5(0x163)+(_0xff2a04||[])[_0x52b7c5(0xae)](',\x20'));}catch(_0x413b10){warn(_0x52b7c5(0x1f8)+'hotReloadC'+_0x52b7c5(0x1f9)+'ler\x20error:'+'\x20'+(_0x413b10?.[_0x52b7c5(0x182)]||_0x413b10));}});}catch(_0x3875bf){warn(_0x36770d(0x1f8)+'hotReloadC'+_0x36770d(0xbf)+_0x36770d(0x1ae)+'ailed:\x20'+(_0x3875bf?.['message']||_0x3875bf));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':_0x36770d(0xdd)+_0x36770d(0x100)+'pdate','handler':gpUpdateHandler,'moduleName':name}),info(_0x36770d(0x1f8)+_0x36770d(0xdf)+_0x36770d(0x151)+_0x36770d(0x170)+_0x36770d(0x1a4)+_0x36770d(0x1f0)+_0x36770d(0x19d));}catch(_0x499407){warn('[welcome]\x20'+'failed\x20to\x20'+_0x36770d(0x134)+_0x36770d(0x198)+'tener:\x20'+(_0x499407?.[_0x36770d(0x182)]||_0x499407));}info(_0x36770d(0x1f8)+'initialize'+'d');}catch(_0x311fd1){error(_0x311fd1,_0x36770d(0x1f8)+_0x36770d(0x1c1)+_0x36770d(0x1c8)+(_0x311fd1?.[_0x36770d(0x182)]||_0x311fd1));throw _0x311fd1;}}export async function onMessage(_0x4949c9){const _0x123fb6=_0x503048;try{if(!_0x4949c9||!_0x4949c9[_0x123fb6(0x13b)]||!_0x4949c9[_0x123fb6(0x182)])return;const _0x40cf5e=String(_0x4949c9[_0x123fb6(0x13b)]['remoteJid']||'')+'::'+String(_0x4949c9['key']['id']||_0x4949c9[_0x123fb6(0x13b)][_0x123fb6(0xd2)+'t']||'');if(isProcessed(_0x40cf5e))return;markProcessed(_0x40cf5e);const _0x2f4c51=String(extractTextFromMessage(_0x4949c9)||'');if(!_0x2f4c51['trim']())return;let _0x116e27='',_0x5a4f56=![];if(_0x4949c9[_0x123fb6(0xe4)]){const _0x50b468=(_0x2f4c51[_0x123fb6(0xbc)]()['split'](/\s+/)[0x6ed*0x2+0xea7+0x1*-0x1c81]||'')[_0x123fb6(0x1ea)+'e']();commands[_0x123fb6(0xe3)](_0x50b468)&&(_0x116e27=_0x50b468,_0x5a4f56=!![]);}else{const _0x38af04=(_0x2f4c51[_0x123fb6(0x1e4)](/\r?\n/)[-0x7a7*-0x3+-0x846*0x3+0x1dd]||'')['trim'](),_0x560db8=(_0x38af04[_0x123fb6(0x1e4)](/\s+/)[-0x1d*0xbf+-0x924+0x1ec7]||'')[_0x123fb6(0x1ea)+'e']();commands[_0x123fb6(0xe3)](_0x560db8)&&(_0x116e27=_0x560db8,_0x5a4f56=!![]);}if(!_0x5a4f56)return;const _0x4a2d80=_0x4949c9['key']['remoteJid'],_0x3d70e4=typeof _0x4a2d80===_0x123fb6(0xc9)&&_0x4a2d80[_0x123fb6(0xd5)](_0x123fb6(0x1c4));if(!_0x3d70e4)return;let _0x4552ea=![];try{_0x4552ea=await isadmin(botRef,_0x4949c9);}catch(_0x26befa){warn(_0x123fb6(0x1f8)+_0x123fb6(0x1c2)+_0x123fb6(0x1cb)),_0x4552ea=![];}if(!_0x4552ea)return;const _0x4a0bc0=_0x4949c9['key']?.[_0x123fb6(0xd2)+'t']||_0x4949c9[_0x123fb6(0x13b)]?.[_0x123fb6(0x1ad)]||_0x4949c9[_0x123fb6(0x13b)]?.[_0x123fb6(0x1c5)]||'',_0x32c388=String(_0x4a0bc0||'')['split']('@')[0x6b3*0x4+0x3*-0x902+0x2*0x1d],_0x280934=_0x4a2d80;info(_0x123fb6(0x1f8)+'command\x20\x27'+_0x116e27+'\x27\x20from\x20'+_0x4a0bc0+_0x123fb6(0x1e7)+_0x4a2d80);const _0x2af627=_0x2f4c51[_0x123fb6(0x1e4)](/\r?\n/),_0x11a2a8=_0x2af627[0x1eab+0x475+0x4*-0x8c8]||'',_0x4a7f46=_0x11a2a8[_0x123fb6(0xbc)](),_0x4d011b=_0x4a7f46[_0x123fb6(0x1e4)](/\s+/);let _0x83905d=null;for(const _0x2511c5 of _0x2af627['slice'](0x17*0xa9+-0x1*-0x1247+-0x2175)){const _0x4832e8=_0x2511c5[_0x123fb6(0xbc)]()['match'](/^gp[:\s]+(.+)$/i);if(_0x4832e8){_0x83905d=_0x4832e8[-0x54*-0xd+0x24c7+0x3*-0xdae][_0x123fb6(0xbc)]();break;}}if(!_0x83905d&&_0x4d011b[_0x123fb6(0xef)]>=0x1001+-0x16fa+0x6fb){if(_0x4d011b[0x4d0*-0x8+0x927+0xead*0x2][_0x123fb6(0x1ea)+'e']()==='gp'&&_0x4d011b[_0x123fb6(0xef)]>=0x7*-0x395+-0x6*-0xf3+0x1364)_0x83905d=_0x4d011b[_0x123fb6(0x14f)](-0x17b*-0x8+0x2*0xec3+-0x295c)[_0x123fb6(0xae)]('\x20')[_0x123fb6(0xbc)]();else{if(_0x4d011b[-0x36b*0x9+0x1*-0x24a9+0x436d]['includes']('@'))_0x83905d=_0x4d011b[0x79*0x43+0x568+0x5*-0x76a][_0x123fb6(0xbc)]();}}const _0x5018d2=await resolveTargetGroupJids(_0x83905d,_0x32c388);if((!_0x5018d2||_0x5018d2[_0x123fb6(0xef)]===0x17e2+-0x115*0x19+0x32b)&&_0x116e27==='wlc'){await sendApiOrFallback(_0x280934,_0x123fb6(0x1b4)+_0x123fb6(0x19a)+_0x123fb6(0x17c)+_0x123fb6(0x1e1)+_0x123fb6(0x135)+_0x123fb6(0x14d)+'t\x20<name>\x20('+_0x123fb6(0x186)+_0x123fb6(0x121)+_0x123fb6(0x1d6)+_0x123fb6(0x1a5)+_0x123fb6(0x1a1)+_0x123fb6(0x18c)+_0x123fb6(0x181)+_0x123fb6(0x19b)+_0x123fb6(0xfd));return;}const _0x3dcd09=_0x4a7f46[_0x123fb6(0xe9)](new RegExp('^'+_0x116e27+'\x5cb','i'),'')[_0x123fb6(0xbc)](),_0x311aeb=[];if(_0x3dcd09)_0x311aeb[_0x123fb6(0x101)](_0x3dcd09);_0x311aeb[_0x123fb6(0x101)](..._0x2af627[_0x123fb6(0x14f)](0x1b5f+0x38a+0x17*-0x158));const _0x48ffb6=_0x311aeb[_0x123fb6(0xc8)](_0x2205ba=>!_0x2205ba[_0x123fb6(0xbc)]()['match'](/^gp[:\s]+(.+)$/i)),_0x263d11=_0x48ffb6['join']('\x0a')[_0x123fb6(0xbc)]();if(_0x116e27===_0x123fb6(0x18e)){if(!_0x263d11){await sendApiOrFallback(_0x280934,'Usage\x20(gro'+'up-only,\x20a'+_0x123fb6(0x193)+':\x0a'+_0x123fb6(0xbd)+(_0x123fb6(0x143)+_0x123fb6(0xf0)+'come\x20messa'+_0x123fb6(0x1a2))+('Optionally'+'\x20include\x20a'+_0x123fb6(0x183)+_0x123fb6(0xff)+_0x123fb6(0x19a)+_0x123fb6(0x148)+'override\x20d'+_0x123fb6(0x1af)));return;}_0x83905d&&await sendApiOrFallback(_0x280934,_0x123fb6(0xf8)+'p\x27\x20paramet'+_0x123fb6(0x15c)+_0x123fb6(0xa9)+_0x123fb6(0x110)+_0x123fb6(0x113)+'f\x20resolvab'+_0x123fb6(0x164)+_0x123fb6(0x137)+_0x5018d2['join'](',\x20'));const _0xc6815e=[];for(const _0x2a014d of _0x5018d2){try{let _0x2f375c=await fetchGroupMetadata(_0x2a014d),_0x1f0cfa=null;if(_0x2f375c&&Array[_0x123fb6(0x1ca)](_0x2f375c[_0x123fb6(0xd2)+'ts']))_0x1f0cfa=_0x2f375c['participan'+'ts'][_0x123fb6(0xef)];else{if(_0x2f375c&&typeof _0x2f375c[_0x123fb6(0xe0)]===_0x123fb6(0x197))_0x1f0cfa=_0x2f375c[_0x123fb6(0xe0)];}const _0x5abdb4=await getWelcomeFromDb(_0x2a014d),_0x11e7b6=_0x5abdb4?Number(_0x5abdb4[_0x123fb6(0x13d)]||0x1cc8+0x1*-0xd3f+0x61*-0x29):-0x5*-0x3a0+-0x15a+-0x10c6,_0x1c893f=_0x1f0cfa&&_0x1f0cfa>0x1df*0x2+0x1*-0x585+-0x5b*-0x5?_0x1f0cfa:_0x11e7b6,_0x28804e=await saveWelcomeToDb(_0x2a014d,_0x263d11,_0x1c893f,_0x5abdb4&&_0x5abdb4[_0x123fb6(0x16b)+'d']?_0x5abdb4[_0x123fb6(0x16b)+'d']:null);if(_0x28804e){if(_0x1c893f&&_0x1c893f>-0x3*-0x157+0x9*-0xbe+0x2a9)setCachedGroupSize(_0x2a014d,_0x1c893f);_0xc6815e[_0x123fb6(0x101)]({'ok':!![],'msg':'Saved\x20welc'+_0x123fb6(0x1e6)+_0x2a014d});}else _0xc6815e[_0x123fb6(0x101)]({'ok':![],'msg':'Failed\x20to\x20'+_0x123fb6(0x120)+_0x123fb6(0x180)+_0x2a014d});}catch(_0x375a60){warn(_0x123fb6(0x1f8)+_0x123fb6(0x154)+'\x20'+_0x2a014d+_0x123fb6(0xb0)+(_0x375a60?.['message']||_0x375a60)),_0xc6815e[_0x123fb6(0x101)]({'ok':![],'msg':'Error\x20savi'+_0x123fb6(0xdc)+_0x2a014d+':\x20'+(_0x375a60?.[_0x123fb6(0x182)]||_0x375a60)});}}const _0xde11ff=_0xc6815e[_0x123fb6(0x177)](_0x3ffd59=>(_0x3ffd59['ok']?'✅\x20':'❌\x20')+_0x3ffd59['msg']);await sendApiOrFallback(_0x280934,_0x123fb6(0x11d)+'ome\x20result'+_0x123fb6(0x146)+_0xde11ff[_0x123fb6(0xae)]('\x0a'));return;}if(_0x116e27===_0x123fb6(0x136)){if(!_0x5018d2||_0x5018d2[_0x123fb6(0xef)]===-0x12da+0xeb*-0x25+-0x1*-0x34d1){await sendApiOrFallback(_0x280934,_0x123fb6(0x1b4)+_0x123fb6(0x19a)+_0x123fb6(0x16f)+_0x123fb6(0x1f7)+'\x20Set\x20a\x20def'+'ault\x20with\x20'+_0x123fb6(0x14d)+'t\x20or\x20provi'+_0x123fb6(0x138)+_0x123fb6(0x19e)+'nectionNam'+_0x123fb6(0xb8));return;}_0x83905d&&await sendApiOrFallback(_0x280934,_0x123fb6(0xf8)+'p\x27\x20paramet'+_0x123fb6(0x15c)+'\x20used\x20as\x20e'+'xplicit\x20ta'+_0x123fb6(0x113)+_0x123fb6(0x17f)+_0x123fb6(0x125)+_0x123fb6(0x10d)+_0x5018d2[_0x123fb6(0xae)](',\x20'));const _0x3031d1=[];for(const _0x2043e1 of _0x5018d2){try{const _0x2de323=await deleteWelcomeFromDb(_0x2043e1);_0x2de323?(groupSizeCache[_0x123fb6(0x1ee)](_0x2043e1),_0x3031d1['push']({'ok':!![],'msg':_0x123fb6(0xfc)+_0x123fb6(0x16e)+_0x2043e1})):_0x3031d1[_0x123fb6(0x101)]({'ok':![],'msg':'No\x20welcome'+_0x123fb6(0x1e5)+'\x20'+_0x2043e1});}catch(_0x33f30d){warn(_0x123fb6(0x1f8)+_0x123fb6(0x166)+'or\x20'+_0x2043e1+'\x20failed:\x20'+(_0x33f30d?.[_0x123fb6(0x182)]||_0x33f30d)),_0x3031d1[_0x123fb6(0x101)]({'ok':![],'msg':'Error\x20dele'+_0x123fb6(0xd4)+_0x2043e1+':\x20'+(_0x33f30d?.[_0x123fb6(0x182)]||_0x33f30d)});}}const _0x1cac3e=_0x3031d1['map'](_0x43b76a=>(_0x43b76a['ok']?'✅\x20':'❌\x20')+_0x43b76a[_0x123fb6(0x17e)]);await sendApiOrFallback(_0x280934,_0x123fb6(0x114)+_0x123fb6(0x1cc)+_0x123fb6(0x106)+_0x1cac3e[_0x123fb6(0xae)]('\x0a'));return;}return;}catch(_0x48f694){error(_0x48f694,_0x123fb6(0x1f8)+_0x123fb6(0x147)+_0x123fb6(0x1fa)+(_0x48f694?.['message']||_0x48f694));}}export async function cleanup(){const _0x2525e0=_0x503048;try{for(const _0x431196 of groupTimers[_0x2525e0(0xd3)]())try{clearTimeout(_0x431196);}catch(_0x572b4e){}groupTimers[_0x2525e0(0xcf)](),groupQueues['clear'](),groupSizeCache[_0x2525e0(0xcf)]();try{stopManagedListener(name,_0x2525e0(0xdd)+_0x2525e0(0x100)+_0x2525e0(0x11b));}catch(_0x2ad122){}info(_0x2525e0(0x1f8)+_0x2525e0(0xf5)+_0x2525e0(0x19f)+_0x2525e0(0x1f5)+_0x2525e0(0xed));for(const _0x2e56e4 of processedMessageKeys[_0x2525e0(0xd3)]())try{clearTimeout(_0x2e56e4);}catch(_0x354d37){}processedMessageKeys[_0x2525e0(0xcf)]();}catch(_0x346dd9){warn(_0x2525e0(0x1f8)+_0x2525e0(0xaf)+_0x2525e0(0xb5)+(_0x346dd9?.['message']||_0x346dd9));}finally{botRef=null,sendApi=null,info(_0x2525e0(0x1f8)+_0x2525e0(0x13c));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};