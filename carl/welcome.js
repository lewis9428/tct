const _0x1d724f=_0x39cd;(function(_0x2addac,_0x5e9f72){const _0x22a6b3=_0x39cd,_0x1984a3=_0x2addac();while(!![]){try{const _0x26e19a=-parseInt(_0x22a6b3(0x278))/(-0x107*0x25+-0x229f*-0x1+-0x1*-0x365)*(-parseInt(_0x22a6b3(0x230))/(-0x1c60+-0x24f1+0x4153))+parseInt(_0x22a6b3(0x22f))/(0xb*-0x116+-0xf9c+-0x1b91*-0x1)*(parseInt(_0x22a6b3(0x228))/(-0x1*-0x458+0x5b0*0x5+-0x20c4))+-parseInt(_0x22a6b3(0x268))/(-0x53a*0x7+0x1caf+0x7ec)*(parseInt(_0x22a6b3(0x2e4))/(-0x26*0x2b+0xd0e+0x25*-0x2e))+-parseInt(_0x22a6b3(0x28f))/(0x715*0x3+0x11*-0x1ed+0xb85)+parseInt(_0x22a6b3(0x2aa))/(-0x187*0x15+-0x1*0x23e+0x2259*0x1)*(-parseInt(_0x22a6b3(0x2fb))/(0x1*-0x623+-0x1*0xf9e+-0x1*-0x15ca))+parseInt(_0x22a6b3(0x246))/(-0x402+0x3*-0x92b+0x1f8d)*(-parseInt(_0x22a6b3(0x26e))/(-0x1*-0xfe5+0x1709+-0x26e3))+-parseInt(_0x22a6b3(0x26b))/(0x1e20+0x1*0x2691+0x44a5*-0x1)*(-parseInt(_0x22a6b3(0x213))/(-0xbd5+-0x77b+0x135d));if(_0x26e19a===_0x5e9f72)break;else _0x1984a3['push'](_0x1984a3['shift']());}catch(_0x2d6731){_0x1984a3['push'](_0x1984a3['shift']());}}}(_0x4bf4,0x5b*0x103+-0x3d713+0x5a627));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0x5afed6 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x1d724f(0x202);export const version='3.2.0';export const priority=-0x1cbe+0x6d6+-0x23d*-0xa;export const configKeys=[_0x1d724f(0x2cd)];export const commands=['wlc',_0x1d724f(0x2fe)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(-0x400*-0x3+-0x761*-0x4+-0x297f)*(0xb6*-0xd+-0xff0+-0xcb5*-0x2)*(0x19b5*-0x1+0xf1d+0xe80),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),DEDUPE_TTL_MS=(-0x5*0x305+-0x1d34+0x2c6b)*(-0x25fd+0x1*-0x1b53+0x4538),processedMessageKeys=new Map();function _0x39cd(_0x58a0e8,_0x581af0){const _0xc9bbd1=_0x4bf4();return _0x39cd=function(_0x3807b9,_0x1f37eb){_0x3807b9=_0x3807b9-(0x1*-0x25b7+0x4*0x7d9+-0x67*-0x14);let _0x5972cc=_0xc9bbd1[_0x3807b9];return _0x5972cc;},_0x39cd(_0x58a0e8,_0x581af0);}function markProcessed(_0x1a5cd4){const _0x23e7fe=_0x1d724f;if(!_0x1a5cd4)return;if(processedMessageKeys[_0x23e7fe(0x1e4)](_0x1a5cd4))try{clearTimeout(processedMessageKeys['get'](_0x1a5cd4));}catch(_0x52b880){}const _0x205b01=setTimeout(()=>processedMessageKeys[_0x23e7fe(0x248)](_0x1a5cd4),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x1a5cd4,_0x205b01);}function isProcessed(_0x3889a4){const _0x5ec6e6=_0x1d724f;return _0x3889a4&&processedMessageKeys[_0x5ec6e6(0x1e4)](_0x3889a4);}async function ensureSchema(){const _0x32e010=_0x1d724f;try{await db['exec'](_0x32e010(0x2b1)+_0x32e010(0x27c)+_0x32e010(0x264)+_0x32e010(0x2f9)+_0x32e010(0x232)+_0x32e010(0x1e2)+_0x32e010(0x1d3)+_0x32e010(0x273)+_0x32e010(0x295)+_0x32e010(0x22e)+'T\x20NOT\x20NULL'+_0x32e010(0x1bb)+_0x32e010(0x220)+'INTEGER\x20DE'+'FAULT\x200,\x0a\x20'+_0x32e010(0x2ea)+_0x32e010(0x2e3)+_0x32e010(0x2cf)+'T\x20NULL,\x0a\x20\x20'+_0x32e010(0x2be)+_0x32e010(0x1e3)+_0x32e010(0x1c1)+_0x32e010(0x1f3)+_0x32e010(0x263));try{await db[_0x32e010(0x1f7)](_0x32e010(0x1c0)+'E\x20welcomes'+_0x32e010(0x20d)+_0x32e010(0x2bb)+_0x32e010(0x2a8)+_0x32e010(0x1d8)+'L;');}catch(_0x5f40eb){}info('[welcome]\x20'+'DB\x20schema\x20'+_0x32e010(0x21a));}catch(_0x5f134e){error(_0x5f134e,_0x32e010(0x2ef)+'ensureSche'+_0x32e010(0x23e));throw _0x5f134e;}}async function saveWelcomeToDb(_0x387a75,_0x2a656e,_0xac2860=-0x10*-0x153+0x6*-0x329+-0x23a,_0x3b72fe=null){const _0x3df839=_0x1d724f;try{const _0x9aa4a3=Math[_0x3df839(0x2db)](Date[_0x3df839(0x24d)]()/(-0x1*-0x2001+0x1b3a+-0x3753));return await db[_0x3df839(0x24a)](_0x3df839(0x2fd)+_0x3df839(0x1d6)+'\x20(group_ji'+_0x3df839(0x1f8)+_0x3df839(0x2ab)+_0x3df839(0x1cb)+_0x3df839(0x238)+_0x3df839(0x283)+_0x3df839(0x2f0)+_0x3df839(0x27f)+_0x3df839(0x1f5)+_0x3df839(0x1e1)+_0x3df839(0x1c8)+'up_jid)\x20DO'+_0x3df839(0x252)+_0x3df839(0x2a0)+'\x20message\x20='+_0x3df839(0x28a)+'message,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20la'+'st_size\x20=\x20'+'excluded.l'+'ast_size,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+_0x3df839(0x237)+_0x3df839(0x1d5)+_0x3df839(0x2d7)+_0x3df839(0x215)+_0x3df839(0x2ca)+_0x3df839(0x1f0)+_0x3df839(0x26a)+_0x3df839(0x21c),[_0x387a75,String(_0x2a656e||''),Number(_0xac2860||0x257c+-0x211*-0x6+0x31e2*-0x1),_0x3b72fe||null,_0x9aa4a3]),info('[welcome]\x20'+'saved\x20welc'+_0x3df839(0x272)+_0x387a75),!![];}catch(_0x87c543){return warn(_0x3df839(0x2ef)+'saveWelcom'+'eToDb\x20fail'+_0x3df839(0x26f)+_0x387a75+':\x20'+(_0x87c543?.['message']||_0x87c543)),![];}}async function deleteWelcomeFromDb(_0x19b09d){const _0x4462d2=_0x1d724f;try{const _0x1af7a1=await db['run'](_0x4462d2(0x2e8)+_0x4462d2(0x1ff)+_0x4462d2(0x265)+'up_jid\x20=\x20?',[_0x19b09d]);return info(_0x4462d2(0x2ef)+_0x4462d2(0x25f)+_0x4462d2(0x2eb)+_0x19b09d),_0x1af7a1?.[_0x4462d2(0x2d4)]||0x5b2*-0x1+0x94*0x6+0x23a;}catch(_0x546e82){return warn(_0x4462d2(0x2ef)+'deleteWelc'+_0x4462d2(0x2c6)+_0x4462d2(0x2fc)+'\x20'+_0x19b09d+':\x20'+(_0x546e82?.[_0x4462d2(0x2a2)]||_0x546e82)),-0x1083*-0x2+0x5*-0x773+0x439;}}async function getWelcomeFromDb(_0x47a6a3){const _0xc02d8d=_0x1d724f;try{const _0x4fbed7=await db['get'](_0xc02d8d(0x2bd)+_0xc02d8d(0x2fa)+_0xc02d8d(0x214)+_0xc02d8d(0x294)+'updated_at'+'\x20FROM\x20welc'+_0xc02d8d(0x1de)+_0xc02d8d(0x274)+_0xc02d8d(0x25e),[_0x47a6a3]);return _0x4fbed7||null;}catch(_0x3d1855){return warn(_0xc02d8d(0x2ef)+'getWelcome'+'FromDb\x20fai'+_0xc02d8d(0x29f)+_0x47a6a3+':\x20'+(_0x3d1855?.[_0xc02d8d(0x2a2)]||_0x3d1855)),null;}}async function updateLastMsgIdInDb(_0x40e27e,_0x4f0a9d){const _0x2fe5aa=_0x1d724f;try{const _0x50a2b4=Math[_0x2fe5aa(0x2db)](Date[_0x2fe5aa(0x24d)]()/(0x430+0x38f*0x7+-0x1931));return await db[_0x2fe5aa(0x24a)](_0x2fe5aa(0x2ff)+'comes\x20SET\x20'+_0x2fe5aa(0x210)+_0x2fe5aa(0x300)+_0x2fe5aa(0x212)+'?\x20WHERE\x20gr'+_0x2fe5aa(0x1da)+'?',[_0x4f0a9d||null,_0x50a2b4,_0x40e27e]),!![];}catch(_0x47e929){return warn(_0x2fe5aa(0x2ef)+_0x2fe5aa(0x205)+'MsgIdInDb\x20'+'failed\x20for'+'\x20'+_0x40e27e+':\x20'+(_0x47e929?.[_0x2fe5aa(0x2a2)]||_0x47e929)),![];}}function tryBuildSendApiFromBot(_0x45c8e9){const _0x3196c0=_0x1d724f;if(!_0x45c8e9)return null;if(typeof _0x45c8e9[_0x3196c0(0x2de)+'e']==='function')return async(_0x208fba,_0x40788b)=>_0x45c8e9['sendMessag'+'e'](_0x208fba,_0x40788b);if(_0x45c8e9[_0x3196c0(0x29b)]&&typeof _0x45c8e9['sock'][_0x3196c0(0x2de)+'e']===_0x3196c0(0x1fe))return async(_0x417ef6,_0x43774c)=>_0x45c8e9[_0x3196c0(0x29b)][_0x3196c0(0x2de)+'e'](_0x417ef6,_0x43774c);return null;}function setupSendApi(_0x5204ae){botRef=_0x5204ae,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x110183,_0x142479,_0xe872d5=[]){const _0xd9bfcc=_0x1d724f;try{if(!_0x110183||!_0x142479)return null;const _0x320f78=typeof _0x142479==='string'?{'text':String(_0x142479)}:_0x142479;if(Array[_0xd9bfcc(0x2a4)](_0xe872d5)&&_0xe872d5['length'])_0x320f78[_0xd9bfcc(0x2b2)]=_0xe872d5;if(sendApi)try{const _0x57e9d3=await sendApi(_0x110183,_0x320f78);return _0x57e9d3;}catch(_0x1ae4bd){return warn(_0xd9bfcc(0x2ef)+_0xd9bfcc(0x280)+'iled:\x20'+(_0x1ae4bd?.[_0xd9bfcc(0x2a2)]||_0x1ae4bd)),null;}else try{if(botRef&&typeof botRef[_0xd9bfcc(0x2de)+'e']===_0xd9bfcc(0x1fe))return await botRef[_0xd9bfcc(0x2de)+'e'](_0x110183,_0x320f78);else return botRef&&botRef[_0xd9bfcc(0x29b)]&&typeof botRef[_0xd9bfcc(0x29b)][_0xd9bfcc(0x2de)+'e']===_0xd9bfcc(0x1fe)?await botRef['sock'][_0xd9bfcc(0x2de)+'e'](_0x110183,_0x320f78):(warn(_0xd9bfcc(0x2ef)+_0xd9bfcc(0x1c4)+_0xd9bfcc(0x20e)+_0xd9bfcc(0x20a)+_0x110183),null);}catch(_0x171ffe){return warn(_0xd9bfcc(0x2ef)+'fallback\x20s'+'end\x20failed'+':\x20'+(_0x171ffe?.[_0xd9bfcc(0x2a2)]||_0x171ffe)),null;}}catch(_0x3b4ea2){return warn(_0xd9bfcc(0x2ef)+'sendApiOrF'+'allback\x20fa'+_0xd9bfcc(0x24f)+(_0x3b4ea2?.['message']||_0x3b4ea2)),null;}}function extractTextFromMessage(_0x4f792d){const _0x44aa7a=_0x1d724f;if(!_0x4f792d||!_0x4f792d['message'])return'';const _0x852c73=_0x4f792d[_0x44aa7a(0x2a2)];if(_0x852c73[_0x44aa7a(0x208)+'on'])return _0x852c73[_0x44aa7a(0x208)+'on'];if(_0x852c73[_0x44aa7a(0x20f)+_0x44aa7a(0x25c)]?.['text'])return _0x852c73[_0x44aa7a(0x20f)+'xtMessage'][_0x44aa7a(0x297)];if(_0x852c73[_0x44aa7a(0x2d3)+'ge']?.[_0x44aa7a(0x1cc)])return _0x852c73['imageMessa'+'ge'][_0x44aa7a(0x1cc)];if(_0x852c73[_0x44aa7a(0x2ec)+'ge']?.['caption'])return _0x852c73[_0x44aa7a(0x2ec)+'ge'][_0x44aa7a(0x1cc)];if(_0x852c73[_0x44aa7a(0x245)+_0x44aa7a(0x22a)+'ge']?.[_0x44aa7a(0x2d0)+_0x44aa7a(0x234)])return _0x852c73['buttonsRes'+_0x44aa7a(0x22a)+'ge'][_0x44aa7a(0x2d0)+_0x44aa7a(0x234)];if(_0x852c73[_0x44aa7a(0x204)+_0x44aa7a(0x222)]?.[_0x44aa7a(0x1ed)+_0x44aa7a(0x28b)]?.[_0x44aa7a(0x276)+_0x44aa7a(0x236)])return _0x852c73['listRespon'+_0x44aa7a(0x222)][_0x44aa7a(0x1ed)+_0x44aa7a(0x28b)][_0x44aa7a(0x276)+_0x44aa7a(0x236)];return'';}async function resolveNamesOrJidsToGroupJids(_0x3f4294){const _0x28575d=_0x1d724f;try{const _0x564a34=[];if(!_0x3f4294)return[];if(Array[_0x28575d(0x2a4)](_0x3f4294)){for(const _0x15a447 of _0x3f4294)if(_0x15a447&&String(_0x15a447)[_0x28575d(0x2ac)]())_0x564a34[_0x28575d(0x2dd)](String(_0x15a447)[_0x28575d(0x2ac)]());}else{if(typeof _0x3f4294===_0x28575d(0x29e)){const _0x5272f2=_0x3f4294[_0x28575d(0x2f7)](',')[_0x28575d(0x2b3)](_0x59add2=>_0x59add2['trim']())[_0x28575d(0x2e9)](Boolean);for(const _0x24cbd0 of _0x5272f2)_0x564a34['push'](_0x24cbd0);}else _0x564a34[_0x28575d(0x2dd)](String(_0x3f4294));}const _0x1af35c=new Set();for(const _0x2269e6 of _0x564a34){if(!_0x2269e6)continue;if(_0x2269e6[_0x28575d(0x1c3)]('@')){_0x1af35c[_0x28575d(0x26c)](_0x2269e6);continue;}try{const _0x4a591d=await getConnection(_0x2269e6)[_0x28575d(0x289)](()=>null);if(Array[_0x28575d(0x2a4)](_0x4a591d)&&_0x4a591d[_0x28575d(0x2b0)]){for(const _0x125fed of _0x4a591d)if(_0x125fed)_0x1af35c[_0x28575d(0x26c)](_0x125fed);}}catch(_0x31a2a9){warn(_0x28575d(0x2ef)+_0x28575d(0x270)+_0x28575d(0x1c7)+_0x28575d(0x1eb)+_0x28575d(0x267)+_0x2269e6+':\x20'+(_0x31a2a9?.[_0x28575d(0x2a2)]||_0x31a2a9));}}return Array[_0x28575d(0x2a3)](_0x1af35c);}catch(_0x5c12bc){return warn('[welcome]\x20'+_0x28575d(0x2f3)+_0x28575d(0x2e2)+_0x28575d(0x224)+'failed:\x20'+(_0x5c12bc?.['message']||_0x5c12bc)),[];}}async function resolveTargetGroupJids(_0x124d74,_0xda386b){const _0x546301=_0x1d724f;try{if(_0x124d74){const _0x34f137=await resolveNamesOrJidsToGroupJids(_0x124d74);return _0x34f137;}if(!_0xda386b)return[];const _0x59670c=await getDefault(_0xda386b)[_0x546301(0x289)](()=>null);if(!_0x59670c)return[];const _0x4b6184=Array[_0x546301(0x2a4)](_0x59670c)?_0x59670c:[_0x59670c];if(!_0x4b6184['length'])return[];const _0x101519=await resolveNamesOrJidsToGroupJids(_0x4b6184);return _0x101519;}catch(_0x194d36){return warn('[welcome]\x20'+_0x546301(0x2b4)+_0x546301(0x1df)+'ds\x20failed:'+'\x20'+(_0x194d36?.[_0x546301(0x2a2)]||_0x194d36)),[];}}async function fetchGroupMetadata(_0xfe9dda){const _0x4b3887=_0x1d724f;if(!botRef)return null;try{if(botRef['sock']&&typeof botRef[_0x4b3887(0x29b)][_0x4b3887(0x1e5)+_0x4b3887(0x219)]===_0x4b3887(0x1fe))return await botRef[_0x4b3887(0x29b)][_0x4b3887(0x1e5)+'ata'](_0xfe9dda);if(typeof botRef['groupMetad'+'ata']===_0x4b3887(0x1fe))return await botRef[_0x4b3887(0x1e5)+_0x4b3887(0x219)](_0xfe9dda);return null;}catch(_0x3ad3a1){return warn(_0x4b3887(0x2ef)+'fetchGroup'+_0x4b3887(0x23f)+_0x4b3887(0x2da)+(_0x3ad3a1?.['message']||_0x3ad3a1)),null;}}async function fetchProfilePictureUrl(_0x2eb48a){const _0x2e5de5=_0x1d724f;if(!botRef||!_0x2eb48a)return null;try{let _0x167fd7=null;if(botRef[_0x2e5de5(0x29b)]&&typeof botRef[_0x2e5de5(0x29b)][_0x2e5de5(0x1fc)+'tureUrl']===_0x2e5de5(0x1fe))_0x167fd7=await botRef['sock'][_0x2e5de5(0x1fc)+_0x2e5de5(0x2ba)](_0x2eb48a,'image')[_0x2e5de5(0x289)](()=>null);else typeof botRef[_0x2e5de5(0x1fc)+_0x2e5de5(0x2ba)]===_0x2e5de5(0x1fe)&&(_0x167fd7=await botRef[_0x2e5de5(0x1fc)+_0x2e5de5(0x2ba)](_0x2eb48a,_0x2e5de5(0x203))[_0x2e5de5(0x289)](()=>null));return _0x167fd7;}catch(_0x451dfb){return warn(_0x2e5de5(0x2ef)+'fetchProfi'+'lePictureU'+_0x2e5de5(0x288)+_0x2eb48a+_0x2e5de5(0x2ee)+(_0x451dfb?.[_0x2e5de5(0x2a2)]||_0x451dfb)),null;}}function getCachedGroupSize(_0x5c59bf){const _0x14975d=_0x1d724f,_0x2261fb=groupSizeCache[_0x14975d(0x269)](_0x5c59bf);if(!_0x2261fb)return null;if(Date['now']()>_0x2261fb[_0x14975d(0x1bf)])return groupSizeCache['delete'](_0x5c59bf),null;return _0x2261fb[_0x14975d(0x28c)];}function setCachedGroupSize(_0x1051e4,_0x175f92){const _0x47ae16=_0x1d724f;groupSizeCache[_0x47ae16(0x305)](_0x1051e4,{'size':Number(_0x175f92||0x1*-0x1d31+0x1a25+0x27*0x14),'expiresAt':Date[_0x47ae16(0x24d)]()+(CFG['GROUP_SIZE'+_0x47ae16(0x1d2)+_0x47ae16(0x2c1)]||DEFAULTS['GROUP_SIZE'+'_CACHE_TTL'+_0x47ae16(0x2c1)])});}async function resolveDisplayName(_0x96ad6a){const _0x3eaa17=_0x1d724f;try{if(!botRef||!_0x96ad6a)return _0x96ad6a?.['split']?.('@')?.[-0x8fe+-0x20*0x2+-0xb6*-0xd]??_0x96ad6a;try{if(typeof botRef[_0x3eaa17(0x2d6)]==='function'){const _0x201d8e=await botRef[_0x3eaa17(0x2d6)](_0x96ad6a);if(Array['isArray'](_0x201d8e)&&_0x201d8e[_0x3eaa17(0x2b0)]>0x965+0xd2f+-0x1694*0x1){const _0x589b76=_0x201d8e[0x161f+0x17bb+-0x2dda];if(_0x589b76&&(_0x589b76[_0x3eaa17(0x1ec)]||_0x589b76[_0x3eaa17(0x235)]||_0x589b76[_0x3eaa17(0x27e)]))return _0x589b76[_0x3eaa17(0x1ec)]||_0x589b76[_0x3eaa17(0x235)]||_0x589b76[_0x3eaa17(0x27e)];}}if(botRef[_0x3eaa17(0x29b)]&&typeof botRef[_0x3eaa17(0x29b)][_0x3eaa17(0x2d6)]==='function'){const _0x30620a=await botRef[_0x3eaa17(0x29b)][_0x3eaa17(0x2d6)](_0x96ad6a);if(Array[_0x3eaa17(0x2a4)](_0x30620a)&&_0x30620a[_0x3eaa17(0x2b0)]>-0xce8+-0x2004+0x2cec){const _0x4b0ab0=_0x30620a[0x21cd+0x1a3+-0x12*0x1f8];if(_0x4b0ab0&&(_0x4b0ab0[_0x3eaa17(0x1ec)]||_0x4b0ab0[_0x3eaa17(0x235)]||_0x4b0ab0['name']))return _0x4b0ab0[_0x3eaa17(0x1ec)]||_0x4b0ab0[_0x3eaa17(0x235)]||_0x4b0ab0['name'];}}}catch(_0x14650e){}return String(_0x96ad6a)['split']('@')[0x39*-0xa7+0x1d*0xf1+0x17*0x6e]||_0x96ad6a;}catch(_0xa4d7fd){return _0x96ad6a?.['split']?.('@')?.[-0x3*0x6ba+0x16d0+-0x2a2]??_0x96ad6a;}}async function findStoredMatchFromFindings(_0x9dc696=[]){const _0x5896fa=_0x1d724f;try{const _0x4745ae=await listSudo();if(!Array[_0x5896fa(0x2a4)](_0x4745ae)||_0x4745ae['length']===0x7*-0x9d+-0x26cb*0x1+0x44f*0xa)return null;const _0x51164a=new Set(_0x4745ae[_0x5896fa(0x2b3)](String));for(const _0x444ade of _0x9dc696||[]){if(!_0x444ade||typeof _0x444ade[_0x5896fa(0x266)]!==_0x5896fa(0x29e))continue;const _0x3f2636=normalizeToJid(_0x444ade[_0x5896fa(0x266)]);if(_0x3f2636&&_0x51164a[_0x5896fa(0x1e4)](_0x3f2636))return _0x3f2636;if(_0x51164a['has'](_0x444ade[_0x5896fa(0x266)]))return _0x444ade[_0x5896fa(0x266)];const _0x470beb=String(_0x444ade[_0x5896fa(0x266)])[_0x5896fa(0x2f7)]('@')[-0xef6+0x2c3*-0x8+0x20f*0x12]['split'](':')[0x3b6+0x6b*0x3c+-0x1cca];if(_0x470beb)for(const _0x13955a of _0x4745ae){const _0x33b5d1=String(_0x13955a)[_0x5896fa(0x2f7)]('@')[-0x106d+-0x2e6*0xa+0x2d69];if(_0x33b5d1&&_0x33b5d1===_0x470beb)return _0x13955a;}}return null;}catch(_0x2226ed){return warn(_0x5896fa(0x2ef)+_0x5896fa(0x1bd)+_0x5896fa(0x2a6)+'indings\x20er'+_0x5896fa(0x20c)+(_0x2226ed?.['message']||_0x2226ed)),null;}}const WELCOME_CARD_IMAGES=[_0x1d724f(0x23d)+_0x1d724f(0x2a5)+_0x1d724f(0x256)+_0x1d724f(0x2f1)+_0x1d724f(0x1fd)+'pg',_0x1d724f(0x23d)+_0x1d724f(0x2a5)+_0x1d724f(0x256)+_0x1d724f(0x2f1)+_0x1d724f(0x1e9)+'pg','https://fi'+_0x1d724f(0x2a5)+_0x1d724f(0x256)+'win/media/'+'welcome3.j'+'pg',_0x1d724f(0x23d)+_0x1d724f(0x2a5)+_0x1d724f(0x256)+_0x1d724f(0x2f1)+_0x1d724f(0x253)+'pg',_0x1d724f(0x23d)+_0x1d724f(0x2a5)+_0x1d724f(0x256)+_0x1d724f(0x2f1)+'welcome5.j'+'pg',_0x1d724f(0x23d)+_0x1d724f(0x2a5)+_0x1d724f(0x256)+'win/media/'+_0x1d724f(0x2f2)+'pg',_0x1d724f(0x23d)+'les.theboo'+_0x1d724f(0x256)+_0x1d724f(0x2f1)+'welcome7.j'+'pg',_0x1d724f(0x23d)+'les.theboo'+_0x1d724f(0x256)+'win/media/'+_0x1d724f(0x285)+'pg',_0x1d724f(0x23d)+_0x1d724f(0x2a5)+'kiebasher.'+_0x1d724f(0x2f1)+'welcome9.j'+'pg'];function pickRandomCardImage(){const _0x4eae07=_0x1d724f;return WELCOME_CARD_IMAGES[Math[_0x4eae07(0x2db)](Math[_0x4eae07(0x223)]()*WELCOME_CARD_IMAGES[_0x4eae07(0x2b0)])];}function _0x4bf4(){const _0x435f25=['ATE\x20TABLE\x20','initialize','name','S\x20(?,\x20?,\x20?','sendApi\x20fa','ge>\x0a','ts:\x0a','ted_at)\x0a\x20\x20','DEBOUNCE_M','welcome8.j','\x27\x20from\x20','DEFAULT_EN','rl\x20for\x20','catch','\x20excluded.','ctReply','size','rticipants','get\x20profil','667527gTnlQx','Welcome\x20to','override\x20d','onfig\x20appl','\x20Set\x20a\x20def','t_msg_id,\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','istener\x20fo','text','ABLED','Saved\x20welc','eck\x20failed','sock','slice','Deleted\x20we','string','led\x20for\x20','T\x0a\x20\x20\x20\x20\x20\x20\x20\x20','t\x20instance','message','from','isArray','les.theboo','MatchFromF','clear','_id\x20TEXT\x20D','y\x20to\x20have\x20','344BUVMBM',',\x20last_siz','trim','msg','onName>\x22\x20i','n\x20the\x20comm','length','\x0a\x20\x20\x20\x20\x20\x20CRE','mentions','map','resolveTar','Notice:\x20\x27g','ts_added','key','Hi\x20','ROUP_MAX','tureUrl','N\x20last_msg','isCommand','SELECT\x20mes','\x20\x20\x20\x20\x20\x20upda','r:\x20','naged\x20list','_MS','onfig\x20regi','We\x27re\x20happ','rget(s)\x20(i','ler\x20error:','omeFromDb\x20','efaults.','gpUpdateHa','come\x20','\x20\x20\x20\x20update','single\x20or\x20','ed_at\x20=\x20?\x20','WELCOME','invite','EXT\x20DEFAUL','selectedBu','No\x20target\x20','eToMember\x20','imageMessa','changes','boolean','onWhatsApp','d.last_msg','isInteger','\x20line\x20\x22gp\x20','ailed:\x20','floor','r\x20group-pa','push','sendMessag','flushGroup','values','onMessage\x20','esOrJidsTo','t_msg_id\x20T','29802fxJMcX','stopped\x20ma','f\x20resolvab','GROUP_SIZE','DELETE\x20FRO','filter','\x20\x20\x20\x20\x20\x20\x20las','lcome\x20for\x20','videoMessa','WHERE\x20grou','\x20failed:\x20','[welcome]\x20','\x20\x20\x20\x20\x20VALUE','win/media/','welcome6.j','resolveNam','match','ener\x20if\x20pr','participan','split','e>\x22.','STS\x20welcom','sage,\x20last','42759ulpzhm','failed\x20for','INSERT\x20INT','delwlc','UPDATE\x20wel','d\x20=\x20?,\x20upd','/setdefaul','p\x27\x20paramet','wlc\x0a','esent','set','join','tener:\x20',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','come\x20(sock','findStored','ed\x20keys:\x20','expiresAt','ALTER\x20TABL','EGER\x20DEFAU','last_size','includes','no\x20send\x20su','Error\x20savi','remoteJid','resolve\x20co','NFLICT(gro','Usage\x20(gro','MEMBER:\x20\x20','e,\x20last_ms','caption','evious\x20wel','\x20in\x20','deleting\x20f','number','anaged\x20lis','_CACHE_TTL','id\x20TEXT\x20PR','for\x20','\x20=\x20exclude','O\x20welcomes','come\x20messa','EFAULT\x20NUL','le).\x20Delet','oup_jid\x20=\x20','Failed\x20to\x20','group-part','connection','omes\x20WHERE','getGroupJi','and.','\x20\x20\x20\x20\x20ON\x20CO','\x20\x20\x20group_j','ted_at\x20INT','has','groupMetad','Error\x20dele','wlc','you!','welcome2.j','nectionNam','nnection\x20n','notify','singleSele','pdate','dmin-only)','d_at\x20=\x20exc','.update','provide\x20\x22g','LT\x200\x0a\x20\x20\x20\x20\x20','ting\x20for\x20',',\x20?,\x20?)\x0a\x20\x20','using\x20defa','exec','d,\x20message','sendWelcom','registered','cleaned\x20up','profilePic','welcome1.j','function','M\x20welcomes','come\x20resul','t\x20or\x20provi','welcome','image','listRespon','updateLast','ge.','or\x20','conversati','f\x20previous','lable\x20for\x20','vious\x20welc','ror:\x20','\x20ADD\x20COLUM','rface\x20avai','extendedTe','last_msg_i','(s)\x20found\x20','ated_at\x20=\x20','221zIcGYF','_size,\x20las','_id,\x0a\x20\x20\x20\x20\x20','ome\x20','toLowerCas','\x20include\x20a','ata','ensured','(s)\x20found.','ted_at;','WHATSAPP_G','max','Optionally','last_size\x20','y|connecti','seMessage','random','GroupJids\x20','groupJid','p\x20<groupKe','equires\x20bo','4ONPLHx','g\x20to:\x20','ponseMessa','s:\x0a','subject','\x20message\x20f','essage\x20TEX','456657maRKad','2ZkGtFj','to\x20delete.','es\x20(\x0a\x20\x20\x20\x20\x20','ults','ttonId','vname','wId','ast_msg_id','g_id,\x20upda','error:\x20','88090068@n','\x20Welcome\x20t','\x20error:\x20','https://fi','ma\x20failed','Metadata\x20f','ed:\x20','comma-sepa','ault\x20with\x20','up-only,\x20a','Delete\x20wel','buttonsRes','70aSewzH','1203632853','delete','deleted\x20pr','run','saving\x20for','me\x20for\x20','now','oupKey|con','iled:\x20','comes\x20SET\x20','=\x20?,\x20updat','\x20UPDATE\x20SE','welcome4.j','t\x20<name>\x20(','<your\x20mult','kiebasher.','WelcomeBot','\x20managed\x20l','\x20used\x20as\x20e','>\x20👤YOU\x27RE\x20','No\x20welcome','xtMessage','hotReloadC','\x20=\x20?','deleted\x20we','endsWith','welcome.in','ing\x20from:\x20','\x20);\x0a\x20\x20\x20\x20','IF\x20NOT\x20EXI','\x20WHERE\x20gro','jid','ame\x20','275MJvLAI','get','luded.upda','323496JGuWgP','add','action','23936lvDkEZ','ed\x20for\x20','failed\x20to\x20','failed:\x20','ome\x20for\x20','IMARY\x20KEY,','\x20group_jid','icipants.u','selectedRo','i-line\x20wel','119683tjKRyO','d\x20failed,\x20','register\x20m','\x20fatal:\x20'];_0x4bf4=function(){return _0x435f25;};return _0x4bf4();}async function sendWelcomeToMember(_0x348d3c,_0x5acc79){const _0x519d19=_0x1d724f;try{const _0x356c71=await getWelcomeFromDb(_0x348d3c);if(!_0x356c71||!_0x356c71[_0x519d19(0x2a2)])return![];let _0x433d38=await fetchGroupMetadata(_0x348d3c),_0x5ecb92=_0x433d38&&_0x433d38[_0x519d19(0x22c)]?_0x433d38['subject']:_0x348d3c,_0x1663a8=getCachedGroupSize(_0x348d3c);if(!_0x1663a8||_0x1663a8<=-0xad*0x17+0x4*-0x38d+0x1dbf*0x1){if(_0x433d38&&Array[_0x519d19(0x2a4)](_0x433d38[_0x519d19(0x2f6)+'ts']))_0x1663a8=_0x433d38[_0x519d19(0x2f6)+'ts'][_0x519d19(0x2b0)];else{if(_0x433d38&&typeof _0x433d38['size']==='number')_0x1663a8=_0x433d38[_0x519d19(0x28c)];else{_0x433d38=_0x433d38||await fetchGroupMetadata(_0x348d3c);if(_0x433d38&&Array[_0x519d19(0x2a4)](_0x433d38[_0x519d19(0x2f6)+'ts']))_0x1663a8=_0x433d38[_0x519d19(0x2f6)+'ts'][_0x519d19(0x2b0)];}}if(!_0x1663a8||_0x1663a8<=0x1*0x18f5+-0x1308+-0x5ed)_0x1663a8=Number(_0x356c71['last_size']||0x2489+-0x1f38+-0x551);else setCachedGroupSize(_0x348d3c,_0x1663a8);}const _0x58413b=CFG['WHATSAPP_G'+_0x519d19(0x2b9)]||DEFAULTS['WHATSAPP_G'+_0x519d19(0x2b9)],_0x3aab91=await resolveDisplayName(_0x5acc79),_0x478da2='@'+String(_0x3aab91)['replace'](/\s+/g,'\x20'),_0x2da50f=[];_0x2da50f['push'](_0x519d19(0x2b8)+_0x478da2+(_0x519d19(0x23b)+'o\x20the\x20')+_0x5ecb92),_0x2da50f[_0x519d19(0x2dd)](String(_0x356c71[_0x519d19(0x2a2)])[_0x519d19(0x2ac)]()),_0x2da50f['push'](_0x519d19(0x25a)+_0x519d19(0x1ca)+_0x1663a8+'/'+_0x58413b);const _0x40fb11=_0x2da50f[_0x519d19(0x1b9)]('\x0a\x0a'),_0x58c59e=[_0x5acc79],_0x3e9540=_0x356c71[_0x519d19(0x210)+'d']||null;let _0x26be36=await fetchProfilePictureUrl(_0x5acc79);!_0x26be36&&(_0x26be36=pickRandomCardImage(),info('[welcome]\x20'+'Could\x20not\x20'+_0x519d19(0x28e)+'e\x20picture\x20'+_0x519d19(0x1d4)+_0x5acc79+(',\x20using\x20fa'+'llback\x20ima'+_0x519d19(0x206))));const _0x2711c4={'title':_0x519d19(0x290)+'\x20'+_0x5ecb92,'body':_0x519d19(0x2c3)+_0x519d19(0x2a9)+_0x519d19(0x1e8),'thumbnailUrl':_0x26be36,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x1b3f8a=await sendApiOrFallback(_0x348d3c,{'text':_0x40fb11,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x519d19(0x247)+_0x519d19(0x23a)+'ewsletter','newsletterName':_0x519d19(0x257),'serverMessageId':0x7b},'externalAdReply':_0x2711c4}},_0x58c59e);let _0x33e3e4=null;try{_0x1b3f8a&&(_0x33e3e4=_0x1b3f8a?.['key']&&_0x1b3f8a['key']['id']?_0x1b3f8a[_0x519d19(0x2b7)]['id']:_0x1b3f8a?.[_0x519d19(0x2a2)]&&_0x1b3f8a[_0x519d19(0x2a2)]?.['id']?_0x1b3f8a[_0x519d19(0x2a2)]['id']:_0x1b3f8a?.['id']?_0x1b3f8a['id']:null);}catch(_0x5a96c6){}if(_0x3e9540&&_0x3e9540!==_0x33e3e4)try{if(botRef&&typeof botRef[_0x519d19(0x2de)+'e']===_0x519d19(0x1fe))try{await botRef['sendMessag'+'e'](_0x348d3c,{'delete':{'id':_0x3e9540,'remoteJid':_0x348d3c,'fromMe':!![]}}),info(_0x519d19(0x2ef)+_0x519d19(0x249)+_0x519d19(0x1cd)+_0x519d19(0x2c9)+_0x3e9540+'\x20in\x20'+_0x348d3c);}catch(_0x3b85ed){try{await botRef[_0x519d19(0x29b)]?.[_0x519d19(0x2de)+'e']?.(_0x348d3c,{'delete':{'id':_0x3e9540,'remoteJid':_0x348d3c,'fromMe':!![]}}),info(_0x519d19(0x2ef)+_0x519d19(0x249)+_0x519d19(0x1cd)+_0x519d19(0x1bc)+')\x20'+_0x3e9540+'\x20in\x20'+_0x348d3c);}catch(_0x4a28f5){warn(_0x519d19(0x2ef)+'failed\x20to\x20'+'delete\x20pre'+_0x519d19(0x20b)+_0x519d19(0x216)+_0x3e9540+_0x519d19(0x1ce)+_0x348d3c+':\x20'+(_0x4a28f5?.[_0x519d19(0x2a2)]||_0x4a28f5));}}}catch(_0x717c03){warn(_0x519d19(0x2ef)+'deletion\x20o'+_0x519d19(0x209)+_0x519d19(0x22d)+_0x519d19(0x2da)+(_0x717c03?.[_0x519d19(0x2a2)]||_0x717c03));}try{_0x33e3e4?await updateLastMsgIdInDb(_0x348d3c,_0x33e3e4):await updateLastMsgIdInDb(_0x348d3c,null);}catch(_0x41fe74){}const _0x3f1eb9=Number(_0x356c71['last_size']||0x431+0xcce+-0x10ff);if(_0x1663a8&&_0x1663a8!==_0x3f1eb9)try{await db[_0x519d19(0x24a)](_0x519d19(0x2ff)+_0x519d19(0x250)+_0x519d19(0x220)+_0x519d19(0x251)+_0x519d19(0x2cc)+_0x519d19(0x2ed)+'p_jid\x20=\x20?',[_0x1663a8,Math[_0x519d19(0x2db)](Date[_0x519d19(0x24d)]()/(0x13*0x102+-0x16c0+0x782)),_0x348d3c]),setCachedGroupSize(_0x348d3c,_0x1663a8);}catch(_0x2ea378){}return info(_0x519d19(0x2ef)+'sent\x20welco'+'me\x20to\x20'+_0x5acc79+'\x20in\x20'+_0x348d3c),!![];}catch(_0x2ee010){return warn(_0x519d19(0x2ef)+_0x519d19(0x1f9)+_0x519d19(0x2d2)+_0x519d19(0x271)+(_0x2ee010?.[_0x519d19(0x2a2)]||_0x2ee010)),![];}}async function flushGroup(_0x4c3c00){const _0x20cb47=_0x1d724f;try{const _0x38b0d5=groupQueues[_0x20cb47(0x269)](_0x4c3c00);if(!_0x38b0d5||_0x38b0d5[_0x20cb47(0x28c)]===0x1171+0x89*-0x43+-0x126a*-0x1){if(groupTimers[_0x20cb47(0x1e4)](_0x4c3c00)){try{clearTimeout(groupTimers[_0x20cb47(0x269)](_0x4c3c00));}catch(_0xf05d3){}groupTimers[_0x20cb47(0x248)](_0x4c3c00);}groupQueues['delete'](_0x4c3c00);return;}const _0x59bca7=Array[_0x20cb47(0x2a3)](_0x38b0d5);for(const _0x1d1145 of _0x59bca7){try{await sendWelcomeToMember(_0x4c3c00,_0x1d1145)['catch'](()=>{});}catch(_0x1d387e){warn(_0x20cb47(0x2ef)+_0x20cb47(0x2df)+'\x20item\x20fail'+_0x20cb47(0x240)+(_0x1d387e?.[_0x20cb47(0x2a2)]||_0x1d387e));}}}catch(_0x3bb0f9){warn(_0x20cb47(0x2ef)+'flushGroup'+_0x20cb47(0x23c)+(_0x3bb0f9?.[_0x20cb47(0x2a2)]||_0x3bb0f9));}finally{if(groupTimers['has'](_0x4c3c00)){try{clearTimeout(groupTimers[_0x20cb47(0x269)](_0x4c3c00));}catch(_0x544f6b){}groupTimers[_0x20cb47(0x248)](_0x4c3c00);}groupQueues[_0x20cb47(0x248)](_0x4c3c00);}}async function gpUpdateHandler(_0x33295f){const _0x5a8ef1=_0x1d724f;try{if(!_0x33295f)return;const _0x65dbd1=(_0x33295f[_0x5a8ef1(0x26d)]||_0x33295f['type']||'')['toString']()[_0x5a8ef1(0x217)+'e']();if(_0x65dbd1!==_0x5a8ef1(0x26c)&&_0x65dbd1!==_0x5a8ef1(0x2ce))return;const _0x46b07f=_0x33295f['id']||_0x33295f['groupId']||_0x33295f[_0x5a8ef1(0x266)]||_0x33295f[_0x5a8ef1(0x225)];if(!_0x46b07f)return;const _0x348fd4=Array[_0x5a8ef1(0x2a4)](_0x33295f[_0x5a8ef1(0x2f6)+'ts'])?_0x33295f['participan'+'ts']:Array[_0x5a8ef1(0x2a4)](_0x33295f[_0x5a8ef1(0x2f6)+_0x5a8ef1(0x2b6)])?_0x33295f['participan'+_0x5a8ef1(0x2b6)]:[];if(!_0x348fd4||_0x348fd4['length']===0x20a+0x4c1*-0x6+0x1a7c)return;let _0x5331af=[];if(_0x348fd4[_0x5a8ef1(0x2b0)]===-0xd0c+-0x63a*-0x3+-0x5a1*0x1)_0x5331af=[_0x348fd4[0x1095+-0x5f5+0x20*-0x55]];else{const _0x61fe44=_0x348fd4[_0x348fd4['length']-(0x1444+-0x22f0+0xead)];_0x5331af=[_0x61fe44];}if(!groupQueues[_0x5a8ef1(0x1e4)](_0x46b07f))groupQueues[_0x5a8ef1(0x305)](_0x46b07f,new Set());const _0x25cdbf=groupQueues[_0x5a8ef1(0x269)](_0x46b07f);for(const _0x2f357b of _0x5331af)_0x25cdbf[_0x5a8ef1(0x26c)](_0x2f357b);if(groupTimers[_0x5a8ef1(0x1e4)](_0x46b07f))try{clearTimeout(groupTimers[_0x5a8ef1(0x269)](_0x46b07f));}catch(_0x5a7f23){}const _0x54f052=Math[_0x5a8ef1(0x21e)](-0x9f1*-0x2+0x807*-0x2+-0x5*0xb0,Number(CFG[_0x5a8ef1(0x284)+'S']||DEFAULTS[_0x5a8ef1(0x284)+'S'])),_0x148eeb=setTimeout(()=>{const _0x432b33=_0x5a8ef1;flushGroup(_0x46b07f)[_0x432b33(0x289)](_0x6fdd1b=>warn('[welcome]\x20'+_0x432b33(0x2df)+'\x20failed:\x20'+(_0x6fdd1b?.[_0x432b33(0x2a2)]||_0x6fdd1b)));},_0x54f052);groupTimers['set'](_0x46b07f,_0x148eeb);}catch(_0x5c52ea){warn(_0x5a8ef1(0x2ef)+_0x5a8ef1(0x2c8)+'ndler\x20erro'+_0x5a8ef1(0x2bf)+(_0x5c52ea?.[_0x5a8ef1(0x2a2)]||_0x5c52ea));}}export async function initialize(_0x5559ee){const _0x132afb=_0x1d724f;if(!_0x5559ee)throw new Error(_0x132afb(0x261)+'itialize\x20r'+_0x132afb(0x227)+_0x132afb(0x2a1));botRef=_0x5559ee,setupSendApi(_0x5559ee);try{const _0x53b4c9=getConfig()||{},_0x512c67=_0x53b4c9&&_0x53b4c9['WELCOME']?_0x53b4c9[_0x132afb(0x2cd)]:{};CFG[_0x132afb(0x287)+_0x132afb(0x298)]=typeof _0x512c67[_0x132afb(0x287)+_0x132afb(0x298)]===_0x132afb(0x2d5)?_0x512c67[_0x132afb(0x287)+_0x132afb(0x298)]:DEFAULTS[_0x132afb(0x287)+_0x132afb(0x298)],CFG[_0x132afb(0x2e7)+_0x132afb(0x1d2)+_0x132afb(0x2c1)]=Number[_0x132afb(0x2d8)](_0x512c67[_0x132afb(0x2e7)+_0x132afb(0x1d2)+'_MS'])?_0x512c67['GROUP_SIZE'+_0x132afb(0x1d2)+_0x132afb(0x2c1)]:DEFAULTS[_0x132afb(0x2e7)+'_CACHE_TTL'+_0x132afb(0x2c1)],CFG[_0x132afb(0x21d)+_0x132afb(0x2b9)]=Number[_0x132afb(0x2d8)](_0x512c67[_0x132afb(0x21d)+_0x132afb(0x2b9)])?_0x512c67[_0x132afb(0x21d)+_0x132afb(0x2b9)]:DEFAULTS[_0x132afb(0x21d)+_0x132afb(0x2b9)],CFG[_0x132afb(0x284)+'S']=Number[_0x132afb(0x2d8)](_0x512c67[_0x132afb(0x284)+'S'])?_0x512c67['DEBOUNCE_M'+'S']:DEFAULTS[_0x132afb(0x284)+'S'];}catch(_0x295693){warn(_0x132afb(0x2ef)+'config\x20loa'+_0x132afb(0x279)+_0x132afb(0x1f6)+_0x132afb(0x233)),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x310f94=[])=>{const _0x27bc58=_0x132afb;try{const _0x2327bc=getConfig()||{},_0x55d757=_0x2327bc&&_0x2327bc[_0x27bc58(0x2cd)]?_0x2327bc[_0x27bc58(0x2cd)]:{};CFG[_0x27bc58(0x287)+_0x27bc58(0x298)]=typeof _0x55d757[_0x27bc58(0x287)+_0x27bc58(0x298)]==='boolean'?_0x55d757[_0x27bc58(0x287)+_0x27bc58(0x298)]:DEFAULTS[_0x27bc58(0x287)+_0x27bc58(0x298)],CFG[_0x27bc58(0x2e7)+_0x27bc58(0x1d2)+_0x27bc58(0x2c1)]=Number[_0x27bc58(0x2d8)](_0x55d757['GROUP_SIZE'+_0x27bc58(0x1d2)+_0x27bc58(0x2c1)])?_0x55d757[_0x27bc58(0x2e7)+'_CACHE_TTL'+'_MS']:DEFAULTS[_0x27bc58(0x2e7)+'_CACHE_TTL'+_0x27bc58(0x2c1)],CFG['WHATSAPP_G'+_0x27bc58(0x2b9)]=Number['isInteger'](_0x55d757['WHATSAPP_G'+_0x27bc58(0x2b9)])?_0x55d757[_0x27bc58(0x21d)+_0x27bc58(0x2b9)]:DEFAULTS['WHATSAPP_G'+'ROUP_MAX'],CFG[_0x27bc58(0x284)+'S']=Number[_0x27bc58(0x2d8)](_0x55d757['DEBOUNCE_M'+'S'])?_0x55d757[_0x27bc58(0x284)+'S']:DEFAULTS['DEBOUNCE_M'+'S'],info('[welcome]\x20'+_0x27bc58(0x25d)+_0x27bc58(0x292)+'ied.\x20Chang'+_0x27bc58(0x1be)+(_0x310f94||[])[_0x27bc58(0x1b9)](',\x20'));}catch(_0xf46efa){warn(_0x27bc58(0x2ef)+_0x27bc58(0x25d)+'onfig\x20hand'+_0x27bc58(0x2c5)+'\x20'+(_0xf46efa?.[_0x27bc58(0x2a2)]||_0xf46efa));}});}catch(_0x4024c6){warn(_0x132afb(0x2ef)+_0x132afb(0x25d)+_0x132afb(0x2c2)+'stration\x20f'+_0x132afb(0x2da)+(_0x4024c6?.['message']||_0x4024c6));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':'group-part'+_0x132afb(0x275)+_0x132afb(0x1ee),'handler':gpUpdateHandler,'moduleName':name}),info('[welcome]\x20'+_0x132afb(0x1fa)+_0x132afb(0x258)+_0x132afb(0x296)+_0x132afb(0x2dc)+_0x132afb(0x28d)+_0x132afb(0x1f1));}catch(_0x30124a){warn(_0x132afb(0x2ef)+_0x132afb(0x270)+_0x132afb(0x27a)+_0x132afb(0x1d1)+_0x132afb(0x1ba)+(_0x30124a?.[_0x132afb(0x2a2)]||_0x30124a));}info('[welcome]\x20'+_0x132afb(0x27d)+'d');}catch(_0x4e2b51){error(_0x4e2b51,_0x132afb(0x2ef)+_0x132afb(0x27d)+_0x132afb(0x27b)+(_0x4e2b51?.[_0x132afb(0x2a2)]||_0x4e2b51));throw _0x4e2b51;}}export async function onMessage(_0x39da4b){const _0x5ba4e4=_0x1d724f;try{if(!_0x39da4b||!_0x39da4b[_0x5ba4e4(0x2b7)]||!_0x39da4b[_0x5ba4e4(0x2a2)])return;const _0x282b2e=String(_0x39da4b[_0x5ba4e4(0x2b7)][_0x5ba4e4(0x1c6)]||'')+'::'+String(_0x39da4b['key']['id']||_0x39da4b[_0x5ba4e4(0x2b7)]['participan'+'t']||'');if(isProcessed(_0x282b2e))return;markProcessed(_0x282b2e);const _0x215207=String(extractTextFromMessage(_0x39da4b)||'');if(!_0x215207[_0x5ba4e4(0x2ac)]())return;let _0x485ad7='',_0x7fad09=![];if(_0x39da4b[_0x5ba4e4(0x2bc)]){const _0x1aedfe=(_0x215207[_0x5ba4e4(0x2ac)]()['split'](/\s+/)[-0x1064*-0x2+0x7*-0x558+0x4a0]||'')[_0x5ba4e4(0x217)+'e']();commands[_0x5ba4e4(0x1c3)](_0x1aedfe)&&(_0x485ad7=_0x1aedfe,_0x7fad09=!![]);}else{const _0x4299a7=(_0x215207[_0x5ba4e4(0x2f7)](/\r?\n/)[0x16dc+0x8b*-0x3a+0x8a2]||'')[_0x5ba4e4(0x2ac)](),_0x3b8111=(_0x4299a7[_0x5ba4e4(0x2f7)](/\s+/)[0x169c+-0x3*0x5ec+0x26c*-0x2]||'')[_0x5ba4e4(0x217)+'e']();commands[_0x5ba4e4(0x1c3)](_0x3b8111)&&(_0x485ad7=_0x3b8111,_0x7fad09=!![]);}if(!_0x7fad09)return;const _0x4fd363=_0x39da4b[_0x5ba4e4(0x2b7)][_0x5ba4e4(0x1c6)],_0x297c51=typeof _0x4fd363===_0x5ba4e4(0x29e)&&_0x4fd363[_0x5ba4e4(0x260)]('@g.us');if(!_0x297c51)return;let _0x576064=![];try{_0x576064=await isadmin(botRef,_0x39da4b);}catch(_0x24a2fd){warn('[welcome]\x20'+'isadmin\x20ch'+_0x5ba4e4(0x29a)),_0x576064=![];}if(!_0x576064)return;const _0x2e0a03=_0x39da4b[_0x5ba4e4(0x2b7)]?.['participan'+'t']||_0x39da4b[_0x5ba4e4(0x2b7)]?.['from']||_0x39da4b[_0x5ba4e4(0x2b7)]?.['remoteJid']||'',_0xba2d4d=String(_0x2e0a03||'')[_0x5ba4e4(0x2f7)]('@')[0x1f4*0x3+-0x421*0x9+-0x3*-0xa6f],_0xde1c9d=_0x4fd363;info(_0x5ba4e4(0x2ef)+'command\x20\x27'+_0x485ad7+_0x5ba4e4(0x286)+_0x2e0a03+_0x5ba4e4(0x1ce)+_0x4fd363);const _0x3dbdfd=_0x215207[_0x5ba4e4(0x2f7)](/\r?\n/),_0x106cdb=_0x3dbdfd[0x1*-0x1b55+0x11c*0x5+0x15c9]||'',_0x4e9fa5=_0x106cdb['trim'](),_0x571067=_0x4e9fa5[_0x5ba4e4(0x2f7)](/\s+/);let _0x330f7d=null;for(const _0x3f2375 of _0x3dbdfd[_0x5ba4e4(0x29c)](-0x888+0x2*-0xd12+-0x21*-0x10d)){const _0x17cd28=_0x3f2375['trim']()[_0x5ba4e4(0x2f4)](/^gp[:\s]+(.+)$/i);if(_0x17cd28){_0x330f7d=_0x17cd28[0x9b*0x11+-0x1c9*-0xd+-0x217f][_0x5ba4e4(0x2ac)]();break;}}if(!_0x330f7d&&_0x571067[_0x5ba4e4(0x2b0)]>=-0x177b+0x209e+0x3*-0x30b){if(_0x571067[-0x1f36+0x1c*-0x6f+0x2b5b][_0x5ba4e4(0x217)+'e']()==='gp'&&_0x571067[_0x5ba4e4(0x2b0)]>=0x5*0x4d8+0x42d+-0x1c62)_0x330f7d=_0x571067[_0x5ba4e4(0x29c)](-0x21af+-0x36*0x57+0x340b)[_0x5ba4e4(0x1b9)]('\x20')[_0x5ba4e4(0x2ac)]();else{if(_0x571067[-0xc4c*-0x1+-0x180d*-0x1+-0x48b*0x8][_0x5ba4e4(0x1c3)]('@'))_0x330f7d=_0x571067[-0x1*0x253d+0x451*0x1+-0x20ed*-0x1][_0x5ba4e4(0x2ac)]();}}const _0x50932e=await resolveTargetGroupJids(_0x330f7d,_0xba2d4d);if((!_0x50932e||_0x50932e[_0x5ba4e4(0x2b0)]===0xab*-0x2+0xa7+0x19*0x7)&&_0x485ad7===_0x5ba4e4(0x1e7)){await sendApiOrFallback(_0xde1c9d,'No\x20target\x20'+_0x5ba4e4(0x1dd)+_0x5ba4e4(0x21b)+_0x5ba4e4(0x293)+_0x5ba4e4(0x242)+_0x5ba4e4(0x301)+_0x5ba4e4(0x254)+_0x5ba4e4(0x2cb)+_0x5ba4e4(0x241)+'rated)\x20or\x20'+_0x5ba4e4(0x1f2)+_0x5ba4e4(0x226)+_0x5ba4e4(0x221)+_0x5ba4e4(0x2ae)+_0x5ba4e4(0x2af)+_0x5ba4e4(0x1e0));return;}const _0x37b19b=_0x4e9fa5['replace'](new RegExp('^'+_0x485ad7+'\x5cb','i'),'')['trim'](),_0x1ba2fd=[];if(_0x37b19b)_0x1ba2fd[_0x5ba4e4(0x2dd)](_0x37b19b);_0x1ba2fd[_0x5ba4e4(0x2dd)](..._0x3dbdfd[_0x5ba4e4(0x29c)](-0x13b2+0xe64+0x1*0x54f));const _0x12b166=_0x1ba2fd[_0x5ba4e4(0x2e9)](_0x2e5ca6=>!_0x2e5ca6[_0x5ba4e4(0x2ac)]()['match'](/^gp[:\s]+(.+)$/i)),_0x11717c=_0x12b166[_0x5ba4e4(0x1b9)]('\x0a')[_0x5ba4e4(0x2ac)]();if(_0x485ad7===_0x5ba4e4(0x1e7)){if(!_0x11717c){await sendApiOrFallback(_0xde1c9d,_0x5ba4e4(0x1c9)+_0x5ba4e4(0x243)+_0x5ba4e4(0x1ef)+':\x0a'+_0x5ba4e4(0x303)+(_0x5ba4e4(0x255)+_0x5ba4e4(0x277)+_0x5ba4e4(0x1d7)+_0x5ba4e4(0x281))+(_0x5ba4e4(0x21f)+_0x5ba4e4(0x218)+_0x5ba4e4(0x2d9)+'<groupKey|'+_0x5ba4e4(0x1dd)+'Name>\x22\x20to\x20'+_0x5ba4e4(0x291)+_0x5ba4e4(0x2c7)));return;}_0x330f7d&&await sendApiOrFallback(_0xde1c9d,_0x5ba4e4(0x2b5)+_0x5ba4e4(0x302)+'er\x20will\x20be'+_0x5ba4e4(0x259)+'xplicit\x20ta'+_0x5ba4e4(0x2c4)+_0x5ba4e4(0x2e6)+'le).\x20Savin'+_0x5ba4e4(0x229)+_0x50932e['join'](',\x20'));const _0x2911d1=[];for(const _0x1972d2 of _0x50932e){try{let _0x33ef96=await fetchGroupMetadata(_0x1972d2),_0x59ed9c=null;if(_0x33ef96&&Array['isArray'](_0x33ef96[_0x5ba4e4(0x2f6)+'ts']))_0x59ed9c=_0x33ef96['participan'+'ts']['length'];else{if(_0x33ef96&&typeof _0x33ef96[_0x5ba4e4(0x28c)]===_0x5ba4e4(0x1d0))_0x59ed9c=_0x33ef96[_0x5ba4e4(0x28c)];}const _0x8c4f05=await getWelcomeFromDb(_0x1972d2),_0x342d5b=_0x8c4f05?Number(_0x8c4f05[_0x5ba4e4(0x1c2)]||-0x21d*-0x9+-0x26c4+0x151*0xf):-0x3*-0x9c2+-0x2*-0x2ff+0x8d1*-0x4,_0x4b23fe=_0x59ed9c&&_0x59ed9c>-0x53*0x4a+-0xf47+0x2745?_0x59ed9c:_0x342d5b,_0x447ffc=await saveWelcomeToDb(_0x1972d2,_0x11717c,_0x4b23fe,_0x8c4f05&&_0x8c4f05[_0x5ba4e4(0x210)+'d']?_0x8c4f05[_0x5ba4e4(0x210)+'d']:null);if(_0x447ffc){if(_0x4b23fe&&_0x4b23fe>0xe*0x2c7+-0x18d7+-0xe0b)setCachedGroupSize(_0x1972d2,_0x4b23fe);_0x2911d1[_0x5ba4e4(0x2dd)]({'ok':!![],'msg':_0x5ba4e4(0x299)+_0x5ba4e4(0x272)+_0x1972d2});}else _0x2911d1['push']({'ok':![],'msg':_0x5ba4e4(0x1db)+'save\x20welco'+_0x5ba4e4(0x24c)+_0x1972d2});}catch(_0x2e0a33){warn(_0x5ba4e4(0x2ef)+_0x5ba4e4(0x24b)+'\x20'+_0x1972d2+_0x5ba4e4(0x2ee)+(_0x2e0a33?.[_0x5ba4e4(0x2a2)]||_0x2e0a33)),_0x2911d1[_0x5ba4e4(0x2dd)]({'ok':![],'msg':_0x5ba4e4(0x1c5)+'ng\x20for\x20'+_0x1972d2+':\x20'+(_0x2e0a33?.[_0x5ba4e4(0x2a2)]||_0x2e0a33)});}}const _0x896fc3=_0x2911d1[_0x5ba4e4(0x2b3)](_0x4c8a02=>(_0x4c8a02['ok']?'✅\x20':'❌\x20')+_0x4c8a02['msg']);await sendApiOrFallback(_0xde1c9d,_0x5ba4e4(0x299)+'ome\x20result'+_0x5ba4e4(0x22b)+_0x896fc3['join']('\x0a'));return;}if(_0x485ad7===_0x5ba4e4(0x2fe)){if(!_0x50932e||_0x50932e[_0x5ba4e4(0x2b0)]===0x7b*-0x49+-0xb48+-0x1*-0x2e5b){await sendApiOrFallback(_0xde1c9d,_0x5ba4e4(0x2d1)+_0x5ba4e4(0x1dd)+_0x5ba4e4(0x211)+_0x5ba4e4(0x231)+_0x5ba4e4(0x293)+_0x5ba4e4(0x242)+_0x5ba4e4(0x301)+_0x5ba4e4(0x201)+'de\x20\x22gp\x20<gr'+_0x5ba4e4(0x24e)+_0x5ba4e4(0x1ea)+_0x5ba4e4(0x2f8));return;}_0x330f7d&&await sendApiOrFallback(_0xde1c9d,_0x5ba4e4(0x2b5)+_0x5ba4e4(0x302)+'er\x20will\x20be'+_0x5ba4e4(0x259)+'xplicit\x20ta'+_0x5ba4e4(0x2c4)+_0x5ba4e4(0x2e6)+_0x5ba4e4(0x1d9)+_0x5ba4e4(0x262)+_0x50932e[_0x5ba4e4(0x1b9)](',\x20'));const _0x31605b=[];for(const _0x46aa56 of _0x50932e){try{const _0x378c5d=await deleteWelcomeFromDb(_0x46aa56);_0x378c5d?(groupSizeCache[_0x5ba4e4(0x248)](_0x46aa56),_0x31605b['push']({'ok':!![],'msg':_0x5ba4e4(0x29d)+'lcome\x20for\x20'+_0x46aa56})):_0x31605b[_0x5ba4e4(0x2dd)]({'ok':![],'msg':_0x5ba4e4(0x25b)+'\x20found\x20for'+'\x20'+_0x46aa56});}catch(_0x2ef85f){warn(_0x5ba4e4(0x2ef)+_0x5ba4e4(0x1cf)+_0x5ba4e4(0x207)+_0x46aa56+'\x20failed:\x20'+(_0x2ef85f?.[_0x5ba4e4(0x2a2)]||_0x2ef85f)),_0x31605b['push']({'ok':![],'msg':_0x5ba4e4(0x1e6)+_0x5ba4e4(0x1f4)+_0x46aa56+':\x20'+(_0x2ef85f?.[_0x5ba4e4(0x2a2)]||_0x2ef85f)});}}const _0x2b9a1f=_0x31605b[_0x5ba4e4(0x2b3)](_0x10e163=>(_0x10e163['ok']?'✅\x20':'❌\x20')+_0x10e163[_0x5ba4e4(0x2ad)]);await sendApiOrFallback(_0xde1c9d,_0x5ba4e4(0x244)+_0x5ba4e4(0x200)+_0x5ba4e4(0x282)+_0x2b9a1f[_0x5ba4e4(0x1b9)]('\x0a'));return;}return;}catch(_0x443b78){error(_0x443b78,_0x5ba4e4(0x2ef)+_0x5ba4e4(0x2e1)+_0x5ba4e4(0x239)+(_0x443b78?.['message']||_0x443b78));}}export async function cleanup(){const _0x5d7089=_0x1d724f;try{for(const _0x88f1f3 of groupTimers['values']())try{clearTimeout(_0x88f1f3);}catch(_0x59c01f){}groupTimers['clear'](),groupQueues[_0x5d7089(0x2a7)](),groupSizeCache[_0x5d7089(0x2a7)]();try{stopManagedListener(name,_0x5d7089(0x1dc)+'icipants.u'+_0x5d7089(0x1ee));}catch(_0xe581ce){}info(_0x5d7089(0x2ef)+_0x5d7089(0x2e5)+_0x5d7089(0x2c0)+_0x5d7089(0x2f5)+_0x5d7089(0x304));for(const _0x207880 of processedMessageKeys[_0x5d7089(0x2e0)]())try{clearTimeout(_0x207880);}catch(_0x2bec05){}processedMessageKeys[_0x5d7089(0x2a7)]();}catch(_0x1b6fc5){warn('[welcome]\x20'+'cleanup\x20er'+'ror:\x20'+(_0x1b6fc5?.[_0x5d7089(0x2a2)]||_0x1b6fc5));}finally{botRef=null,sendApi=null,info('[welcome]\x20'+_0x5d7089(0x1fb));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};