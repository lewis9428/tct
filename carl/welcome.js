const _0x5b1e56=_0x5a68;(function(_0x50d271,_0x1961cb){const _0xf2ee80=_0x5a68,_0x17ae48=_0x50d271();while(!![]){try{const _0x1b8945=-parseInt(_0xf2ee80(0x166))/(-0x4*0x70a+0x227c+-0x653)+parseInt(_0xf2ee80(0x2b2))/(0x5b3*-0x1+0x8*0x143+-0x1*0x463)*(parseInt(_0xf2ee80(0x287))/(-0xadb+-0xbf9+-0x79d*-0x3))+-parseInt(_0xf2ee80(0x214))/(-0x1481+-0xca7+0x1096*0x2)*(-parseInt(_0xf2ee80(0x29e))/(-0x4*0x6e7+-0x1c*-0x15d+0x1*-0xa8b))+-parseInt(_0xf2ee80(0x175))/(-0x75c+-0x2496+0x218*0x15)+-parseInt(_0xf2ee80(0x28d))/(-0x139+0x19*-0xa9+0x11c1)*(-parseInt(_0xf2ee80(0x221))/(0xac0+0x1262*0x1+-0x2*0xe8d))+parseInt(_0xf2ee80(0x1e6))/(0xae*-0x5+0xb3+-0x5*-0x8c)*(parseInt(_0xf2ee80(0x1df))/(-0xbf6+-0xf2*0x24+-0x2e08*-0x1))+-parseInt(_0xf2ee80(0x220))/(-0x4f*0x3a+0xff0+0xab*0x3)*(parseInt(_0xf2ee80(0x234))/(0x2c5+-0x1078+0x187*0x9));if(_0x1b8945===_0x1961cb)break;else _0x17ae48['push'](_0x17ae48['shift']());}catch(_0x1e194e){_0x17ae48['push'](_0x17ae48['shift']());}}}(_0x48dd,-0xb9ebc+-0x30ae0+0x43f5*0x67));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import*as _0xf13386 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x5b1e56(0x25d);export const version=_0x5b1e56(0x23c);function _0x5a68(_0x1a13c8,_0x170e6a){const _0x5a25f7=_0x48dd();return _0x5a68=function(_0x502a5f,_0x30fe0a){_0x502a5f=_0x502a5f-(0x1af*0x1+-0x2684+0x131d*0x2);let _0x2f7f79=_0x5a25f7[_0x502a5f];return _0x2f7f79;},_0x5a68(_0x1a13c8,_0x170e6a);}export const priority=0x1a9c+0x5b*0x3+-0x1b33;export const configKeys=[_0x5b1e56(0x25c)];export const commands=[_0x5b1e56(0x174),_0x5b1e56(0x21c)];let botRef=null,sendApi=null;const DEFAULTS={'DEFAULT_ENABLED':!![],'GROUP_SIZE_CACHE_TTL_MS':(-0x17f5*-0x1+0x7af*0x3+-0x2efd)*(-0x258a+0x679*-0x3+-0x1*-0x3931)*(-0xb+-0x1*-0x1a7b+-0x1688),'WHATSAPP_GROUP_MAX':0x401,'DEBOUNCE_MS':0x7d0};let CFG={...DEFAULTS};const groupQueues=new Map(),groupTimers=new Map(),groupSizeCache=new Map(),DEDUPE_TTL_MS=(0x378+0x2217+-0x2571)*(0x524+-0x2079*-0x1+-0x1*0x21b5),processedMessageKeys=new Map();function markProcessed(_0xf0fb2){const _0x5765d5=_0x5b1e56;if(!_0xf0fb2)return;if(processedMessageKeys[_0x5765d5(0x1ca)](_0xf0fb2))try{clearTimeout(processedMessageKeys['get'](_0xf0fb2));}catch(_0x4c004a){}const _0x10cbd3=setTimeout(()=>processedMessageKeys[_0x5765d5(0x26d)](_0xf0fb2),DEDUPE_TTL_MS);processedMessageKeys[_0x5765d5(0x1e7)](_0xf0fb2,_0x10cbd3);}function isProcessed(_0x349cf3){const _0x50a8fb=_0x5b1e56;return _0x349cf3&&processedMessageKeys[_0x50a8fb(0x1ca)](_0x349cf3);}async function ensureSchema(){const _0x4e34e2=_0x5b1e56;try{await db[_0x4e34e2(0x1ad)]('\x0a\x20\x20\x20\x20\x20\x20CRE'+'ATE\x20TABLE\x20'+'IF\x20NOT\x20EXI'+'STS\x20welcom'+_0x4e34e2(0x183)+_0x4e34e2(0x1b8)+_0x4e34e2(0x29b)+_0x4e34e2(0x288)+_0x4e34e2(0x238)+_0x4e34e2(0x281)+_0x4e34e2(0x1a2)+_0x4e34e2(0x177)+'last_size\x20'+_0x4e34e2(0x24e)+_0x4e34e2(0x247)+_0x4e34e2(0x1e2)+_0x4e34e2(0x196)+'EXT\x20DEFAUL'+_0x4e34e2(0x296)+_0x4e34e2(0x1c7)+'ted_at\x20INT'+_0x4e34e2(0x188)+'LT\x200\x0a\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20');try{await db[_0x4e34e2(0x1ad)](_0x4e34e2(0x182)+'E\x20welcomes'+_0x4e34e2(0x1d7)+_0x4e34e2(0x16a)+_0x4e34e2(0x278)+_0x4e34e2(0x293)+'L;');}catch(_0x2e60aa){}info(_0x4e34e2(0x2a6)+_0x4e34e2(0x26f)+_0x4e34e2(0x219));}catch(_0x1a5151){error(_0x1a5151,_0x4e34e2(0x2a6)+'ensureSche'+_0x4e34e2(0x1fe));throw _0x1a5151;}}async function saveWelcomeToDb(_0x1c2ca9,_0x38268b,_0x58d2ae=-0x400*0x4+0xb*-0x371+0x1*0x35db,_0x3957ea=null){const _0x504d36=_0x5b1e56;try{const _0x227efd=Math[_0x504d36(0x20f)](Date[_0x504d36(0x1c5)]()/(-0x11d8+-0xa90+-0xb*-0x2f0));return await db[_0x504d36(0x27f)](_0x504d36(0x16f)+'O\x20welcomes'+_0x504d36(0x186)+_0x504d36(0x1ed)+_0x504d36(0x18d)+_0x504d36(0x286)+'g_id,\x20upda'+_0x504d36(0x225)+_0x504d36(0x254)+_0x504d36(0x231)+_0x504d36(0x178)+_0x504d36(0x297)+'NFLICT(gro'+_0x504d36(0x260)+_0x504d36(0x280)+_0x504d36(0x27a)+'\x20message\x20='+_0x504d36(0x2b3)+_0x504d36(0x289)+'\x20\x20\x20\x20\x20\x20\x20\x20la'+_0x504d36(0x22e)+_0x504d36(0x243)+_0x504d36(0x1c9)+_0x504d36(0x216)+_0x504d36(0x244)+_0x504d36(0x2aa)+'d.last_msg'+'_id,\x0a\x20\x20\x20\x20\x20'+_0x504d36(0x279)+_0x504d36(0x17c)+_0x504d36(0x202)+_0x504d36(0x19d),[_0x1c2ca9,String(_0x38268b||''),Number(_0x58d2ae||0x56b+-0xd*0x203+0x1*0x14bc),_0x3957ea||null,_0x227efd]),info('[welcome]\x20'+_0x504d36(0x19e)+_0x504d36(0x264)+_0x1c2ca9),!![];}catch(_0x1ed9cc){return warn(_0x504d36(0x2a6)+_0x504d36(0x18f)+_0x504d36(0x283)+_0x504d36(0x18a)+_0x1c2ca9+':\x20'+(_0x1ed9cc?.[_0x504d36(0x26c)]||_0x1ed9cc)),![];}}async function deleteWelcomeFromDb(_0x2f05d8){const _0x166342=_0x5b1e56;try{const _0xe273fb=await db['run'](_0x166342(0x285)+_0x166342(0x1aa)+'\x20WHERE\x20gro'+_0x166342(0x271),[_0x2f05d8]);return info('[welcome]\x20'+'deleted\x20we'+_0x166342(0x240)+_0x2f05d8),_0xe273fb?.[_0x166342(0x266)]||-0xf7+0x6ce+-0x5d7;}catch(_0x5f5ae3){return warn('[welcome]\x20'+_0x166342(0x1c2)+_0x166342(0x235)+_0x166342(0x26b)+'\x20'+_0x2f05d8+':\x20'+(_0x5f5ae3?.[_0x166342(0x26c)]||_0x5f5ae3)),-0xd57+0x1851+-0x119*0xa;}}async function getWelcomeFromDb(_0x34e882){const _0xb7fe5b=_0x5b1e56;try{const _0x5aa5c3=await db[_0xb7fe5b(0x28b)](_0xb7fe5b(0x224)+_0xb7fe5b(0x1f1)+_0xb7fe5b(0x236)+_0xb7fe5b(0x1ea)+'updated_at'+_0xb7fe5b(0x259)+_0xb7fe5b(0x2a7)+_0xb7fe5b(0x270)+_0xb7fe5b(0x1b3),[_0x34e882]);return _0x5aa5c3||null;}catch(_0x6e43ef){return warn(_0xb7fe5b(0x2a6)+_0xb7fe5b(0x206)+_0xb7fe5b(0x237)+'led\x20for\x20'+_0x34e882+':\x20'+(_0x6e43ef?.['message']||_0x6e43ef)),null;}}async function updateLastMsgIdInDb(_0x1921f4,_0x507a0f){const _0x1e9c99=_0x5b1e56;try{const _0x2a6fd3=Math[_0x1e9c99(0x20f)](Date['now']()/(0x255*-0xa+0xb05+-0x1cd*-0x9));return await db['run']('UPDATE\x20wel'+'comes\x20SET\x20'+_0x1e9c99(0x21b)+_0x1e9c99(0x268)+_0x1e9c99(0x222)+'?\x20WHERE\x20gr'+_0x1e9c99(0x1a6)+'?',[_0x507a0f||null,_0x2a6fd3,_0x1921f4]),!![];}catch(_0x2006f5){return warn('[welcome]\x20'+_0x1e9c99(0x1f7)+_0x1e9c99(0x23f)+_0x1e9c99(0x26b)+'\x20'+_0x1921f4+':\x20'+(_0x2006f5?.[_0x1e9c99(0x26c)]||_0x2006f5)),![];}}function tryBuildSendApiFromBot(_0x2b1bfe){const _0x2a65ab=_0x5b1e56;if(!_0x2b1bfe)return null;if(typeof _0x2b1bfe[_0x2a65ab(0x167)+'e']===_0x2a65ab(0x1c4))return async(_0x4dfea9,_0x1dfa5a)=>_0x2b1bfe[_0x2a65ab(0x167)+'e'](_0x4dfea9,_0x1dfa5a);if(_0x2b1bfe[_0x2a65ab(0x197)]&&typeof _0x2b1bfe['sock'][_0x2a65ab(0x167)+'e']==='function')return async(_0x1866e1,_0x41dea0)=>_0x2b1bfe[_0x2a65ab(0x197)]['sendMessag'+'e'](_0x1866e1,_0x41dea0);return null;}function setupSendApi(_0x52544c){botRef=_0x52544c,sendApi=tryBuildSendApiFromBot(botRef);}async function sendApiOrFallback(_0x3e39fa,_0x11b26e,_0x130a5b=[]){const _0x27eeaa=_0x5b1e56;try{if(!_0x3e39fa||!_0x11b26e)return null;const _0x518cc2=typeof _0x11b26e===_0x27eeaa(0x239)?{'text':String(_0x11b26e)}:_0x11b26e;if(Array[_0x27eeaa(0x2a3)](_0x130a5b)&&_0x130a5b[_0x27eeaa(0x21a)])_0x518cc2[_0x27eeaa(0x215)]=_0x130a5b;if(sendApi)try{const _0x582403=await sendApi(_0x3e39fa,_0x518cc2);return _0x582403;}catch(_0x867f62){return warn(_0x27eeaa(0x2a6)+_0x27eeaa(0x255)+_0x27eeaa(0x208)+(_0x867f62?.[_0x27eeaa(0x26c)]||_0x867f62)),null;}else try{if(botRef&&typeof botRef['sendMessag'+'e']===_0x27eeaa(0x1c4))return await botRef[_0x27eeaa(0x167)+'e'](_0x3e39fa,_0x518cc2);else return botRef&&botRef['sock']&&typeof botRef['sock']['sendMessag'+'e']===_0x27eeaa(0x1c4)?await botRef[_0x27eeaa(0x197)][_0x27eeaa(0x167)+'e'](_0x3e39fa,_0x518cc2):(warn(_0x27eeaa(0x2a6)+_0x27eeaa(0x25e)+_0x27eeaa(0x1a1)+_0x27eeaa(0x241)+_0x3e39fa),null);}catch(_0x3ebbeb){return warn(_0x27eeaa(0x2a6)+_0x27eeaa(0x179)+_0x27eeaa(0x29c)+':\x20'+(_0x3ebbeb?.['message']||_0x3ebbeb)),null;}}catch(_0x1443e2){return warn(_0x27eeaa(0x2a6)+_0x27eeaa(0x233)+'allback\x20fa'+'iled:\x20'+(_0x1443e2?.[_0x27eeaa(0x26c)]||_0x1443e2)),null;}}function extractTextFromMessage(_0x894621){const _0x5ca7aa=_0x5b1e56;if(!_0x894621||!_0x894621[_0x5ca7aa(0x26c)])return'';const _0x3c7563=_0x894621[_0x5ca7aa(0x26c)];if(_0x3c7563['conversati'+'on'])return _0x3c7563[_0x5ca7aa(0x2ad)+'on'];if(_0x3c7563[_0x5ca7aa(0x29a)+_0x5ca7aa(0x284)]?.['text'])return _0x3c7563[_0x5ca7aa(0x29a)+_0x5ca7aa(0x284)]['text'];if(_0x3c7563['imageMessa'+'ge']?.['caption'])return _0x3c7563[_0x5ca7aa(0x248)+'ge'][_0x5ca7aa(0x29d)];if(_0x3c7563['videoMessa'+'ge']?.[_0x5ca7aa(0x29d)])return _0x3c7563[_0x5ca7aa(0x1bf)+'ge']['caption'];if(_0x3c7563[_0x5ca7aa(0x172)+_0x5ca7aa(0x1b2)+'ge']?.[_0x5ca7aa(0x1c3)+_0x5ca7aa(0x2a9)])return _0x3c7563[_0x5ca7aa(0x172)+_0x5ca7aa(0x1b2)+'ge']['selectedBu'+_0x5ca7aa(0x2a9)];if(_0x3c7563['listRespon'+'seMessage']?.[_0x5ca7aa(0x24f)+_0x5ca7aa(0x1bd)]?.[_0x5ca7aa(0x1b0)+'wId'])return _0x3c7563[_0x5ca7aa(0x25a)+_0x5ca7aa(0x194)][_0x5ca7aa(0x24f)+_0x5ca7aa(0x1bd)][_0x5ca7aa(0x1b0)+'wId'];return'';}async function resolveNamesOrJidsToGroupJids(_0x4455a1){const _0x3dc47d=_0x5b1e56;try{const _0x449425=[];if(!_0x4455a1)return[];if(Array[_0x3dc47d(0x2a3)](_0x4455a1)){for(const _0x4320f7 of _0x4455a1)if(_0x4320f7&&String(_0x4320f7)[_0x3dc47d(0x20a)]())_0x449425[_0x3dc47d(0x1ec)](String(_0x4320f7)[_0x3dc47d(0x20a)]());}else{if(typeof _0x4455a1===_0x3dc47d(0x239)){const _0x2d58ea=_0x4455a1[_0x3dc47d(0x20c)](',')[_0x3dc47d(0x1e5)](_0x480c48=>_0x480c48['trim']())[_0x3dc47d(0x265)](Boolean);for(const _0x11a7c2 of _0x2d58ea)_0x449425[_0x3dc47d(0x1ec)](_0x11a7c2);}else _0x449425['push'](String(_0x4455a1));}const _0x619436=new Set();for(const _0x526c4d of _0x449425){if(!_0x526c4d)continue;if(_0x526c4d[_0x3dc47d(0x181)]('@')){_0x619436[_0x3dc47d(0x1d4)](_0x526c4d);continue;}try{const _0x49a318=await getConnection(_0x526c4d)[_0x3dc47d(0x211)](()=>null);if(Array[_0x3dc47d(0x2a3)](_0x49a318)&&_0x49a318[_0x3dc47d(0x21a)]){for(const _0x54d89c of _0x49a318)if(_0x54d89c)_0x619436[_0x3dc47d(0x1d4)](_0x54d89c);}}catch(_0x31e6e7){warn(_0x3dc47d(0x2a6)+_0x3dc47d(0x276)+_0x3dc47d(0x173)+_0x3dc47d(0x19a)+_0x3dc47d(0x29f)+_0x526c4d+':\x20'+(_0x31e6e7?.[_0x3dc47d(0x26c)]||_0x31e6e7));}}return Array[_0x3dc47d(0x1d5)](_0x619436);}catch(_0x25ae48){return warn(_0x3dc47d(0x2a6)+_0x3dc47d(0x24a)+'esOrJidsTo'+'GroupJids\x20'+_0x3dc47d(0x291)+(_0x25ae48?.[_0x3dc47d(0x26c)]||_0x25ae48)),[];}}async function resolveTargetGroupJids(_0xa3f5a,_0x1e6341){const _0x34e2fd=_0x5b1e56;try{if(_0xa3f5a){const _0x52abe4=await resolveNamesOrJidsToGroupJids(_0xa3f5a);return _0x52abe4;}if(!_0x1e6341)return[];const _0x27d12c=await getDefault(_0x1e6341)[_0x34e2fd(0x211)](()=>null);if(!_0x27d12c)return[];const _0x5a6cd8=Array['isArray'](_0x27d12c)?_0x27d12c:[_0x27d12c];if(!_0x5a6cd8[_0x34e2fd(0x21a)])return[];const _0x4ee71b=await resolveNamesOrJidsToGroupJids(_0x5a6cd8);return _0x4ee71b;}catch(_0xd3a5d){return warn(_0x34e2fd(0x2a6)+_0x34e2fd(0x1a3)+_0x34e2fd(0x229)+'ds\x20failed:'+'\x20'+(_0xd3a5d?.[_0x34e2fd(0x26c)]||_0xd3a5d)),[];}}async function fetchGroupMetadata(_0x7531ef){const _0x61de7a=_0x5b1e56;if(!botRef)return null;try{if(botRef['sock']&&typeof botRef[_0x61de7a(0x197)][_0x61de7a(0x22c)+_0x61de7a(0x22b)]===_0x61de7a(0x1c4))return await botRef[_0x61de7a(0x197)]['groupMetad'+_0x61de7a(0x22b)](_0x7531ef);if(typeof botRef[_0x61de7a(0x22c)+'ata']==='function')return await botRef[_0x61de7a(0x22c)+_0x61de7a(0x22b)](_0x7531ef);return null;}catch(_0x539c28){return warn(_0x61de7a(0x2a6)+_0x61de7a(0x249)+'Metadata\x20f'+_0x61de7a(0x21e)+(_0x539c28?.[_0x61de7a(0x26c)]||_0x539c28)),null;}}async function fetchProfilePictureUrl(_0x2ab8e8){const _0xcd4b9f=_0x5b1e56;if(!botRef||!_0x2ab8e8)return null;try{let _0x542318=null;if(botRef['sock']&&typeof botRef[_0xcd4b9f(0x197)][_0xcd4b9f(0x23e)+_0xcd4b9f(0x1fa)]===_0xcd4b9f(0x1c4))_0x542318=await botRef[_0xcd4b9f(0x197)]['profilePic'+'tureUrl'](_0x2ab8e8,_0xcd4b9f(0x192))[_0xcd4b9f(0x211)](()=>null);else typeof botRef[_0xcd4b9f(0x23e)+_0xcd4b9f(0x1fa)]===_0xcd4b9f(0x1c4)&&(_0x542318=await botRef[_0xcd4b9f(0x23e)+_0xcd4b9f(0x1fa)](_0x2ab8e8,_0xcd4b9f(0x192))[_0xcd4b9f(0x211)](()=>null));return _0x542318;}catch(_0x3f16ea){return warn(_0xcd4b9f(0x2a6)+_0xcd4b9f(0x298)+'lePictureU'+'rl\x20for\x20'+_0x2ab8e8+_0xcd4b9f(0x1f4)+(_0x3f16ea?.[_0xcd4b9f(0x26c)]||_0x3f16ea)),null;}}function getCachedGroupSize(_0x340128){const _0xaa8e09=_0x5b1e56,_0x50502e=groupSizeCache[_0xaa8e09(0x28b)](_0x340128);if(!_0x50502e)return null;if(Date[_0xaa8e09(0x1c5)]()>_0x50502e['expiresAt'])return groupSizeCache[_0xaa8e09(0x26d)](_0x340128),null;return _0x50502e[_0xaa8e09(0x16c)];}function setCachedGroupSize(_0x551d1d,_0x518892){const _0x116831=_0x5b1e56;groupSizeCache[_0x116831(0x1e7)](_0x551d1d,{'size':Number(_0x518892||0x15c9+0x3a1+-0x196a),'expiresAt':Date[_0x116831(0x1c5)]()+(CFG[_0x116831(0x22d)+_0x116831(0x18c)+_0x116831(0x2ae)]||DEFAULTS[_0x116831(0x22d)+_0x116831(0x18c)+_0x116831(0x2ae)])});}async function resolveDisplayName(_0x35dfb1){const _0x338932=_0x5b1e56;try{if(!botRef||!_0x35dfb1)return _0x35dfb1?.[_0x338932(0x20c)]?.('@')?.[-0x1379*0x1+-0x7f*-0x2b+0x11*-0x1c]??_0x35dfb1;try{if(typeof botRef[_0x338932(0x23a)]==='function'){const _0x1c4308=await botRef[_0x338932(0x23a)](_0x35dfb1);if(Array[_0x338932(0x2a3)](_0x1c4308)&&_0x1c4308[_0x338932(0x21a)]>-0x2613+-0x8b+0x2*0x134f){const _0x566e54=_0x1c4308[0x151f+-0xf3*0x19+0x29c];if(_0x566e54&&(_0x566e54['notify']||_0x566e54[_0x338932(0x1e9)]||_0x566e54[_0x338932(0x1b1)]))return _0x566e54['notify']||_0x566e54[_0x338932(0x1e9)]||_0x566e54[_0x338932(0x1b1)];}}if(botRef[_0x338932(0x197)]&&typeof botRef['sock'][_0x338932(0x23a)]===_0x338932(0x1c4)){const _0x3af032=await botRef[_0x338932(0x197)][_0x338932(0x23a)](_0x35dfb1);if(Array[_0x338932(0x2a3)](_0x3af032)&&_0x3af032['length']>-0x234d+0x90+-0x22bd*-0x1){const _0x3e295a=_0x3af032[0x2*0xdd1+-0x265*0x8+-0x87a];if(_0x3e295a&&(_0x3e295a[_0x338932(0x1fb)]||_0x3e295a[_0x338932(0x1e9)]||_0x3e295a[_0x338932(0x1b1)]))return _0x3e295a[_0x338932(0x1fb)]||_0x3e295a[_0x338932(0x1e9)]||_0x3e295a[_0x338932(0x1b1)];}}}catch(_0x1bc6af){}return String(_0x35dfb1)['split']('@')[-0x1fd6+-0x5db*-0x1+0x19fb]||_0x35dfb1;}catch(_0x3a8c01){return _0x35dfb1?.['split']?.('@')?.[0x16f4+0xbd*0x17+-0x1*0x27ef]??_0x35dfb1;}}async function findStoredMatchFromFindings(_0x35267c=[]){const _0x24225f=_0x5b1e56;try{const _0x42d370=await listSudo();if(!Array[_0x24225f(0x2a3)](_0x42d370)||_0x42d370[_0x24225f(0x21a)]===-0x207+0x83*0x48+-0x1*0x22d1)return null;const _0x164211=new Set(_0x42d370[_0x24225f(0x1e5)](String));for(const _0xccbb3f of _0x35267c||[]){if(!_0xccbb3f||typeof _0xccbb3f[_0x24225f(0x27b)]!=='string')continue;const _0x20b7d7=normalizeToJid(_0xccbb3f[_0x24225f(0x27b)]);if(_0x20b7d7&&_0x164211[_0x24225f(0x1ca)](_0x20b7d7))return _0x20b7d7;if(_0x164211['has'](_0xccbb3f['jid']))return _0xccbb3f[_0x24225f(0x27b)];const _0x3f6097=String(_0xccbb3f['jid'])[_0x24225f(0x20c)]('@')[0x1*0x195c+0x6a*-0x45+0x336][_0x24225f(0x20c)](':')[-0x227+0x1ce6+-0x29*0xa7];if(_0x3f6097)for(const _0x3312e0 of _0x42d370){const _0x5ac1c8=String(_0x3312e0)[_0x24225f(0x20c)]('@')[0x1*0x11c0+0x63a*0x2+-0x1e34];if(_0x5ac1c8&&_0x5ac1c8===_0x3f6097)return _0x3312e0;}}return null;}catch(_0x5ea350){return warn(_0x24225f(0x2a6)+_0x24225f(0x210)+_0x24225f(0x28f)+_0x24225f(0x17b)+_0x24225f(0x19b)+(_0x5ea350?.[_0x24225f(0x26c)]||_0x5ea350)),null;}}const WELCOME_CARD_IMAGES=[_0x5b1e56(0x1db)+_0x5b1e56(0x274)+_0x5b1e56(0x17d)+_0x5b1e56(0x204)+_0x5b1e56(0x2ab)+'pg',_0x5b1e56(0x1db)+_0x5b1e56(0x274)+'kiebasher.'+_0x5b1e56(0x204)+'welcome2.j'+'pg',_0x5b1e56(0x1db)+_0x5b1e56(0x274)+_0x5b1e56(0x17d)+_0x5b1e56(0x204)+_0x5b1e56(0x23d)+'pg','https://fi'+'les.theboo'+_0x5b1e56(0x17d)+_0x5b1e56(0x204)+_0x5b1e56(0x1ef)+'pg',_0x5b1e56(0x1db)+_0x5b1e56(0x274)+_0x5b1e56(0x17d)+_0x5b1e56(0x204)+'welcome5.j'+'pg',_0x5b1e56(0x1db)+_0x5b1e56(0x274)+_0x5b1e56(0x17d)+_0x5b1e56(0x204)+'welcome6.j'+'pg',_0x5b1e56(0x1db)+_0x5b1e56(0x274)+_0x5b1e56(0x17d)+_0x5b1e56(0x204)+_0x5b1e56(0x21d)+'pg','https://fi'+_0x5b1e56(0x274)+'kiebasher.'+'win/media/'+_0x5b1e56(0x16d)+'pg','https://fi'+_0x5b1e56(0x274)+'kiebasher.'+_0x5b1e56(0x204)+_0x5b1e56(0x295)+'pg'];function pickRandomCardImage(){const _0x419a7d=_0x5b1e56;return WELCOME_CARD_IMAGES[Math[_0x419a7d(0x20f)](Math[_0x419a7d(0x277)]()*WELCOME_CARD_IMAGES[_0x419a7d(0x21a)])];}async function sendWelcomeToMember(_0x4289e8,_0x2c8289){const _0x1ec266=_0x5b1e56;try{const _0x52ee15=await getWelcomeFromDb(_0x4289e8);if(!_0x52ee15||!_0x52ee15['message'])return![];let _0x420e9b=await fetchGroupMetadata(_0x4289e8),_0x51c707=_0x420e9b&&_0x420e9b[_0x1ec266(0x207)]?_0x420e9b[_0x1ec266(0x207)]:_0x4289e8,_0x560cf5=getCachedGroupSize(_0x4289e8);if(!_0x560cf5||_0x560cf5<=-0x1e0e+0x1*0x14ad+0x961){if(_0x420e9b&&Array[_0x1ec266(0x2a3)](_0x420e9b[_0x1ec266(0x290)+'ts']))_0x560cf5=_0x420e9b[_0x1ec266(0x290)+'ts']['length'];else{if(_0x420e9b&&typeof _0x420e9b[_0x1ec266(0x16c)]===_0x1ec266(0x1c8))_0x560cf5=_0x420e9b[_0x1ec266(0x16c)];else{_0x420e9b=_0x420e9b||await fetchGroupMetadata(_0x4289e8);if(_0x420e9b&&Array[_0x1ec266(0x2a3)](_0x420e9b[_0x1ec266(0x290)+'ts']))_0x560cf5=_0x420e9b['participan'+'ts'][_0x1ec266(0x21a)];}}if(!_0x560cf5||_0x560cf5<=-0x1*-0x101e+0x6f5*0x1+-0xb3*0x21)_0x560cf5=Number(_0x52ee15['last_size']||-0x1385+0x92b+0xa5a);else setCachedGroupSize(_0x4289e8,_0x560cf5);}const _0x126769=CFG[_0x1ec266(0x18b)+'ROUP_MAX']||DEFAULTS['WHATSAPP_G'+'ROUP_MAX'],_0x527e61=await resolveDisplayName(_0x2c8289),_0x556028='@'+String(_0x527e61)[_0x1ec266(0x16e)](/\s+/g,'\x20'),_0x2d7474=[];_0x2d7474[_0x1ec266(0x1ec)](_0x1ec266(0x24d)+_0x556028+(_0x1ec266(0x193)+_0x1ec266(0x256))+_0x51c707),_0x2d7474[_0x1ec266(0x1ec)](String(_0x52ee15[_0x1ec266(0x26c)])['trim']()),_0x2d7474['push'](_0x1ec266(0x2a5)+_0x1ec266(0x1a4)+_0x560cf5+'/'+_0x126769);const _0xafe5fa=_0x2d7474[_0x1ec266(0x275)]('\x0a\x0a'),_0x530e9c=[_0x2c8289],_0x2c6af5=_0x52ee15[_0x1ec266(0x21b)+'d']||null;let _0x287b27=await fetchProfilePictureUrl(_0x2c8289);!_0x287b27&&(_0x287b27=pickRandomCardImage(),info('[welcome]\x20'+_0x1ec266(0x2a1)+'get\x20profil'+_0x1ec266(0x1da)+_0x1ec266(0x1cc)+_0x2c8289+(_0x1ec266(0x1cd)+'llback\x20ima'+_0x1ec266(0x1c6))));const _0xe2a0eb={'title':_0x1ec266(0x1ba)+'\x20'+_0x51c707,'body':_0x1ec266(0x1e8)+_0x1ec266(0x169)+_0x1ec266(0x27c),'thumbnailUrl':_0x287b27,'mediaType':0x1,'renderLargerThumbnail':!![]},_0x5dbd0d=await sendApiOrFallback(_0x4289e8,{'text':_0xafe5fa,'contextInfo':{'forwardingScore':0x3e7,'isForwarded':![],'forwardedNewsletterMessageInfo':{'newsletterJid':_0x1ec266(0x1a7)+_0x1ec266(0x1e1)+_0x1ec266(0x19f),'newsletterName':_0x1ec266(0x20b),'serverMessageId':0x7b},'externalAdReply':_0xe2a0eb}},_0x530e9c);let _0x3a363f=null;try{_0x5dbd0d&&(_0x3a363f=_0x5dbd0d?.[_0x1ec266(0x282)]&&_0x5dbd0d[_0x1ec266(0x282)]['id']?_0x5dbd0d[_0x1ec266(0x282)]['id']:_0x5dbd0d?.[_0x1ec266(0x26c)]&&_0x5dbd0d['message']?.['id']?_0x5dbd0d[_0x1ec266(0x26c)]['id']:_0x5dbd0d?.['id']?_0x5dbd0d['id']:null);}catch(_0x998fad){}if(_0x2c6af5&&_0x2c6af5!==_0x3a363f)try{if(botRef&&typeof botRef['sendMessag'+'e']===_0x1ec266(0x1c4))try{await botRef[_0x1ec266(0x167)+'e'](_0x4289e8,{'delete':{'id':_0x2c6af5,'remoteJid':_0x4289e8,'fromMe':!![]}}),info(_0x1ec266(0x2a6)+_0x1ec266(0x209)+_0x1ec266(0x1ee)+_0x1ec266(0x227)+_0x2c6af5+'\x20in\x20'+_0x4289e8);}catch(_0x270226){try{await botRef['sock']?.[_0x1ec266(0x167)+'e']?.(_0x4289e8,{'delete':{'id':_0x2c6af5,'remoteJid':_0x4289e8,'fromMe':!![]}}),info(_0x1ec266(0x2a6)+_0x1ec266(0x209)+_0x1ec266(0x1ee)+_0x1ec266(0x223)+')\x20'+_0x2c6af5+'\x20in\x20'+_0x4289e8);}catch(_0x28296c){warn('[welcome]\x20'+_0x1ec266(0x276)+_0x1ec266(0x1b7)+_0x1ec266(0x267)+'ome\x20'+_0x2c6af5+_0x1ec266(0x250)+_0x4289e8+':\x20'+(_0x28296c?.[_0x1ec266(0x26c)]||_0x28296c));}}}catch(_0x19944f){warn('[welcome]\x20'+_0x1ec266(0x2a2)+_0x1ec266(0x1d0)+_0x1ec266(0x1cb)+_0x1ec266(0x21e)+(_0x19944f?.[_0x1ec266(0x26c)]||_0x19944f));}try{_0x3a363f?await updateLastMsgIdInDb(_0x4289e8,_0x3a363f):await updateLastMsgIdInDb(_0x4289e8,null);}catch(_0x1498fb){}const _0x33354b=Number(_0x52ee15[_0x1ec266(0x1a5)]||-0x1136+0x24ea+-0x13b4);if(_0x560cf5&&_0x560cf5!==_0x33354b)try{await db[_0x1ec266(0x27f)](_0x1ec266(0x1fd)+_0x1ec266(0x1d1)+_0x1ec266(0x1e4)+'=\x20?,\x20updat'+_0x1ec266(0x272)+_0x1ec266(0x1f9)+'p_jid\x20=\x20?',[_0x560cf5,Math[_0x1ec266(0x20f)](Date[_0x1ec266(0x1c5)]()/(0x16c6+-0x503*0x7+-0x1*-0x1037)),_0x4289e8]),setCachedGroupSize(_0x4289e8,_0x560cf5);}catch(_0x2203c4){}return info(_0x1ec266(0x2a6)+_0x1ec266(0x1dc)+'me\x20to\x20'+_0x2c8289+_0x1ec266(0x250)+_0x4289e8),!![];}catch(_0xb2160a){return warn(_0x1ec266(0x2a6)+'sendWelcom'+_0x1ec266(0x171)+_0x1ec266(0x291)+(_0xb2160a?.[_0x1ec266(0x26c)]||_0xb2160a)),![];}}function _0x48dd(){const _0x3a68b0=['<groupKey|','register\x20m','includes','ALTER\x20TABL','es\x20(\x0a\x20\x20\x20\x20\x20','cleaned\x20up','initialize','\x20(group_ji','msg','EGER\x20DEFAU','dmin-only)','ed\x20for\x20','WHATSAPP_G','_CACHE_TTL',',\x20last_siz','<your\x20mult','saveWelcom','ts:\x0a','ed:\x20','image','\x20Welcome\x20t','seMessage','welcome.in','t_msg_id\x20T','sock','endsWith','Deleted\x20we','nnection\x20n','ror:\x20','Error\x20savi','ted_at;','saved\x20welc','ewsletter','Failed\x20to\x20','rface\x20avai','T\x20NOT\x20NULL','resolveTar','MEMBER:\x20\x20','last_size','oup_jid\x20=\x20','1203632853','registered','slice','M\x20welcomes','rticipants','clear','exec','y|connecti','\x20managed\x20l','selectedRo','name','ponseMessa','\x20=\x20?','anaged\x20lis','\x20error:\x20','ting\x20for\x20','delete\x20pre','\x20\x20\x20group_j','onfig\x20hand','Welcome\x20to','ROUP_MAX','saving\x20for','ctReply','ing\x20from:\x20','videoMessa','p\x27\x20paramet','r\x20group-pa','deleteWelc','selectedBu','function','now','ge.','\x20\x20\x20\x20\x20\x20upda','number','ast_size,\x0a','has','\x20message\x20f','for\x20',',\x20using\x20fa','groupJid','match','f\x20previous','comes\x20SET\x20','n\x20the\x20comm','wlc\x0a','add','from','\x20include\x20a','\x20ADD\x20COLUM','Saved\x20welc','istener\x20fo','e\x20picture\x20','https://fi','sent\x20welco','or\x20','stopped\x20ma','20ReiROW','values','88090068@n','\x20\x20\x20\x20\x20\x20\x20las','ts_added','last_size\x20','map','6639984CPPCBe','set','We\x27re\x20happ','vname','t_msg_id,\x20','save\x20welco','push','d,\x20message','evious\x20wel','welcome4.j','\x20fatal:\x20','sage,\x20last','icipants.u','pdate','\x20failed:\x20','g\x20to:\x20','\x20line\x20\x22gp\x20','updateLast','isadmin\x20ch','WHERE\x20grou','tureUrl','notify','DEFAULT_EN','UPDATE\x20wel','ma\x20failed','cleanup\x20er','ault\x20with\x20','flushGroup','luded.upda','me\x20for\x20','win/media/','equires\x20bo','getWelcome','subject','iled:\x20','deleted\x20pr','trim','WelcomeBot','split','\x20item\x20fail','t\x20or\x20provi','floor','findStored','catch','onName>\x22\x20i','xplicit\x20ta','2368244qtRQMt','mentions','\x20\x20\x20\x20\x20\x20\x20\x20\x20l','er\x20will\x20be','to\x20delete.','ensured','length','last_msg_i','delwlc','welcome7.j','ailed:\x20','i-line\x20wel','3151214KjwMOA','273632OkuIXo','ated_at\x20=\x20','come\x20(sock','SELECT\x20mes','ted_at)\x0a\x20\x20','ABLED','come\x20','naged\x20list','getGroupJi','\x27\x20from\x20','ata','groupMetad','GROUP_SIZE','st_size\x20=\x20','r:\x20','onfig\x20appl','S\x20(?,\x20?,\x20?','toString','sendApiOrF','36jdlLzP','omeFromDb\x20','_size,\x20las','FromDb\x20fai','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','string','onWhatsApp','p\x20<groupKe','3.2.0','welcome3.j','profilePic','MsgIdInDb\x20','lcome\x20for\x20','lable\x20for\x20','hotReloadC','excluded.l','ast_msg_id','up-only,\x20a','isCommand','FAULT\x200,\x0a\x20','imageMessa','fetchGroup','resolveNam','itialize\x20r','Usage\x20(gro','Hi\x20','INTEGER\x20DE','singleSele','\x20in\x20','\x20Set\x20a\x20def','come\x20resul','(s)\x20found.','\x20\x20\x20\x20\x20VALUE','sendApi\x20fa','o\x20the\x20','s:\x0a','single\x20or\x20','\x20FROM\x20welc','listRespon','rget(s)\x20(i','WELCOME','welcome','no\x20send\x20su','f\x20resolvab','up_jid)\x20DO','t\x20instance','boolean','ed\x20keys:\x20','ome\x20for\x20','filter','changes','vious\x20welc','d\x20=\x20?,\x20upd','Notice:\x20\x27g','command\x20\x27','failed\x20for','message','delete','gpUpdateHa','DB\x20schema\x20','\x20group_jid','up_jid\x20=\x20?','ed_at\x20=\x20?\x20','using\x20defa','les.theboo','join','failed\x20to\x20','random','_id\x20TEXT\x20D','\x20\x20\x20\x20update','T\x0a\x20\x20\x20\x20\x20\x20\x20\x20','jid','you!','error:\x20','isInteger','run','\x20UPDATE\x20SE','essage\x20TEX','key','eToDb\x20fail','xtMessage','DELETE\x20FRO','e,\x20last_ms','6EXPHAU','IMARY\x20KEY,','message,\x0a\x20','rated)\x20or\x20','get','groupId','280YvGdgo','DEBOUNCE_M','MatchFromF','participan','failed:\x20','and.','EFAULT\x20NUL','tener:\x20','welcome9.j','T\x20NULL,\x0a\x20\x20','\x20\x20\x20\x20\x20ON\x20CO','fetchProfi','comma-sepa','extendedTe','id\x20TEXT\x20PR','end\x20failed','caption','5HEIzsZ','ame\x20','/setdefaul','Could\x20not\x20','deletion\x20o','isArray','\x20used\x20as\x20e','>\x20👤YOU\x27RE\x20','[welcome]\x20','omes\x20WHERE','No\x20welcome','ttonId','\x20=\x20exclude','welcome1.j','ndler\x20erro','conversati','_MS','action','le).\x20Savin','remoteJid','409930FSuqwF','\x20excluded.','toLowerCas','1390249kMPVpM','sendMessag','ge>\x0a','y\x20to\x20have\x20','N\x20last_msg','No\x20target\x20','size','welcome8.j','replace','INSERT\x20INT','ome\x20result','eToMember\x20','buttonsRes','resolve\x20co','wlc','4590390AjCwUE','max',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20',',\x20?,\x20?)\x0a\x20\x20','fallback\x20s','oupKey|con','indings\x20er','d_at\x20=\x20exc','kiebasher.','connection'];_0x48dd=function(){return _0x3a68b0;};return _0x48dd();}async function flushGroup(_0x134d12){const _0x45de72=_0x5b1e56;try{const _0x11f5c1=groupQueues[_0x45de72(0x28b)](_0x134d12);if(!_0x11f5c1||_0x11f5c1['size']===0x2*-0x9da+0x1*0x1516+-0x162){if(groupTimers['has'](_0x134d12)){try{clearTimeout(groupTimers[_0x45de72(0x28b)](_0x134d12));}catch(_0x2a101a){}groupTimers[_0x45de72(0x26d)](_0x134d12);}groupQueues['delete'](_0x134d12);return;}const _0x321a69=Array[_0x45de72(0x1d5)](_0x11f5c1);for(const _0x3b2296 of _0x321a69){try{await sendWelcomeToMember(_0x134d12,_0x3b2296)[_0x45de72(0x211)](()=>{});}catch(_0x1fa7fa){warn('[welcome]\x20'+_0x45de72(0x201)+_0x45de72(0x20d)+_0x45de72(0x191)+(_0x1fa7fa?.[_0x45de72(0x26c)]||_0x1fa7fa));}}}catch(_0x31adc8){warn('[welcome]\x20'+_0x45de72(0x201)+_0x45de72(0x1b5)+(_0x31adc8?.['message']||_0x31adc8));}finally{if(groupTimers['has'](_0x134d12)){try{clearTimeout(groupTimers[_0x45de72(0x28b)](_0x134d12));}catch(_0x3fddba){}groupTimers['delete'](_0x134d12);}groupQueues['delete'](_0x134d12);}}async function gpUpdateHandler(_0x5cf095){const _0x4b6ba5=_0x5b1e56;try{if(!_0x5cf095)return;const _0x3f0af5=(_0x5cf095[_0x4b6ba5(0x2af)]||_0x5cf095['type']||'')[_0x4b6ba5(0x232)]()[_0x4b6ba5(0x165)+'e']();if(_0x3f0af5!==_0x4b6ba5(0x1d4)&&_0x3f0af5!=='invite')return;const _0x5e1ffa=_0x5cf095['id']||_0x5cf095[_0x4b6ba5(0x28c)]||_0x5cf095[_0x4b6ba5(0x27b)]||_0x5cf095[_0x4b6ba5(0x1ce)];if(!_0x5e1ffa)return;const _0x3d2e66=Array[_0x4b6ba5(0x2a3)](_0x5cf095[_0x4b6ba5(0x290)+'ts'])?_0x5cf095[_0x4b6ba5(0x290)+'ts']:Array[_0x4b6ba5(0x2a3)](_0x5cf095[_0x4b6ba5(0x290)+_0x4b6ba5(0x1e3)])?_0x5cf095['participan'+_0x4b6ba5(0x1e3)]:[];if(!_0x3d2e66||_0x3d2e66[_0x4b6ba5(0x21a)]===-0x1183*0x1+0xb*0x2c6+-0xcff)return;let _0x2a88ea=[];if(_0x3d2e66[_0x4b6ba5(0x21a)]===-0x7*0x303+-0x6a*0xb+-0x3*-0x88c)_0x2a88ea=[_0x3d2e66[-0x552+-0x2*0x849+0x1d3*0xc]];else{const _0x36ed6e=_0x3d2e66[_0x3d2e66[_0x4b6ba5(0x21a)]-(-0x100+-0xc01*0x3+-0x5c*-0x67)];_0x2a88ea=[_0x36ed6e];}if(!groupQueues[_0x4b6ba5(0x1ca)](_0x5e1ffa))groupQueues['set'](_0x5e1ffa,new Set());const _0x4901c9=groupQueues[_0x4b6ba5(0x28b)](_0x5e1ffa);for(const _0x29a155 of _0x2a88ea)_0x4901c9[_0x4b6ba5(0x1d4)](_0x29a155);if(groupTimers[_0x4b6ba5(0x1ca)](_0x5e1ffa))try{clearTimeout(groupTimers[_0x4b6ba5(0x28b)](_0x5e1ffa));}catch(_0xedcf64){}const _0x20ce07=Math[_0x4b6ba5(0x176)](0xf16+0x1852+0x16*-0x1c6,Number(CFG[_0x4b6ba5(0x28e)+'S']||DEFAULTS['DEBOUNCE_M'+'S'])),_0x3c127f=setTimeout(()=>{const _0x433067=_0x4b6ba5;flushGroup(_0x5e1ffa)[_0x433067(0x211)](_0x1a359e=>warn(_0x433067(0x2a6)+'flushGroup'+_0x433067(0x1f4)+(_0x1a359e?.['message']||_0x1a359e)));},_0x20ce07);groupTimers['set'](_0x5e1ffa,_0x3c127f);}catch(_0x1c572b){warn(_0x4b6ba5(0x2a6)+_0x4b6ba5(0x26e)+_0x4b6ba5(0x2ac)+_0x4b6ba5(0x22f)+(_0x1c572b?.[_0x4b6ba5(0x26c)]||_0x1c572b));}}export async function initialize(_0x4d4f58){const _0x233a56=_0x5b1e56;if(!_0x4d4f58)throw new Error(_0x233a56(0x195)+_0x233a56(0x24b)+_0x233a56(0x205)+_0x233a56(0x261));botRef=_0x4d4f58,setupSendApi(_0x4d4f58);try{const _0x6f6d22=getConfig()||{},_0x13ea50=_0x6f6d22&&_0x6f6d22[_0x233a56(0x25c)]?_0x6f6d22[_0x233a56(0x25c)]:{};CFG[_0x233a56(0x1fc)+'ABLED']=typeof _0x13ea50[_0x233a56(0x1fc)+_0x233a56(0x226)]===_0x233a56(0x262)?_0x13ea50[_0x233a56(0x1fc)+_0x233a56(0x226)]:DEFAULTS[_0x233a56(0x1fc)+_0x233a56(0x226)],CFG[_0x233a56(0x22d)+_0x233a56(0x18c)+_0x233a56(0x2ae)]=Number['isInteger'](_0x13ea50['GROUP_SIZE'+_0x233a56(0x18c)+_0x233a56(0x2ae)])?_0x13ea50['GROUP_SIZE'+_0x233a56(0x18c)+'_MS']:DEFAULTS['GROUP_SIZE'+'_CACHE_TTL'+_0x233a56(0x2ae)],CFG[_0x233a56(0x18b)+'ROUP_MAX']=Number[_0x233a56(0x27e)](_0x13ea50['WHATSAPP_G'+'ROUP_MAX'])?_0x13ea50[_0x233a56(0x18b)+'ROUP_MAX']:DEFAULTS[_0x233a56(0x18b)+_0x233a56(0x1bb)],CFG[_0x233a56(0x28e)+'S']=Number['isInteger'](_0x13ea50[_0x233a56(0x28e)+'S'])?_0x13ea50['DEBOUNCE_M'+'S']:DEFAULTS[_0x233a56(0x28e)+'S'];}catch(_0x51584d){warn(_0x233a56(0x2a6)+'config\x20loa'+'d\x20failed,\x20'+_0x233a56(0x273)+'ults'),CFG={...DEFAULTS};}try{hotReloadConfig&&hotReloadConfig((_0x594daf=[])=>{const _0xa1e3d5=_0x233a56;try{const _0x4f0ba0=getConfig()||{},_0x2e05c0=_0x4f0ba0&&_0x4f0ba0[_0xa1e3d5(0x25c)]?_0x4f0ba0[_0xa1e3d5(0x25c)]:{};CFG['DEFAULT_EN'+'ABLED']=typeof _0x2e05c0[_0xa1e3d5(0x1fc)+_0xa1e3d5(0x226)]===_0xa1e3d5(0x262)?_0x2e05c0[_0xa1e3d5(0x1fc)+_0xa1e3d5(0x226)]:DEFAULTS['DEFAULT_EN'+_0xa1e3d5(0x226)],CFG[_0xa1e3d5(0x22d)+'_CACHE_TTL'+_0xa1e3d5(0x2ae)]=Number[_0xa1e3d5(0x27e)](_0x2e05c0[_0xa1e3d5(0x22d)+_0xa1e3d5(0x18c)+_0xa1e3d5(0x2ae)])?_0x2e05c0[_0xa1e3d5(0x22d)+_0xa1e3d5(0x18c)+'_MS']:DEFAULTS[_0xa1e3d5(0x22d)+_0xa1e3d5(0x18c)+_0xa1e3d5(0x2ae)],CFG[_0xa1e3d5(0x18b)+'ROUP_MAX']=Number[_0xa1e3d5(0x27e)](_0x2e05c0[_0xa1e3d5(0x18b)+_0xa1e3d5(0x1bb)])?_0x2e05c0[_0xa1e3d5(0x18b)+_0xa1e3d5(0x1bb)]:DEFAULTS['WHATSAPP_G'+_0xa1e3d5(0x1bb)],CFG[_0xa1e3d5(0x28e)+'S']=Number['isInteger'](_0x2e05c0['DEBOUNCE_M'+'S'])?_0x2e05c0[_0xa1e3d5(0x28e)+'S']:DEFAULTS[_0xa1e3d5(0x28e)+'S'],info(_0xa1e3d5(0x2a6)+_0xa1e3d5(0x242)+_0xa1e3d5(0x230)+'ied.\x20Chang'+_0xa1e3d5(0x263)+(_0x594daf||[])[_0xa1e3d5(0x275)](',\x20'));}catch(_0x5df500){warn(_0xa1e3d5(0x2a6)+_0xa1e3d5(0x242)+_0xa1e3d5(0x1b9)+'ler\x20error:'+'\x20'+(_0x5df500?.['message']||_0x5df500));}});}catch(_0x3503b4){warn(_0x233a56(0x2a6)+_0x233a56(0x242)+'onfig\x20regi'+'stration\x20f'+_0x233a56(0x21e)+(_0x3503b4?.['message']||_0x3503b4));}try{await ensureSchema();try{startManagedListener({'botRef':botRef,'eventName':'group-part'+_0x233a56(0x1f2)+'pdate','handler':gpUpdateHandler,'moduleName':name}),info('[welcome]\x20'+_0x233a56(0x1a8)+_0x233a56(0x1af)+_0x233a56(0x1d9)+_0x233a56(0x1c1)+_0x233a56(0x1ab)+'.update');}catch(_0x19f14e){warn(_0x233a56(0x2a6)+_0x233a56(0x276)+_0x233a56(0x180)+_0x233a56(0x1b4)+_0x233a56(0x294)+(_0x19f14e?.['message']||_0x19f14e));}info('[welcome]\x20'+'initialize'+'d');}catch(_0x238327){error(_0x238327,_0x233a56(0x2a6)+_0x233a56(0x185)+_0x233a56(0x1f0)+(_0x238327?.[_0x233a56(0x26c)]||_0x238327));throw _0x238327;}}export async function onMessage(_0x542ee7){const _0x35b8d7=_0x5b1e56;try{if(!_0x542ee7||!_0x542ee7['key']||!_0x542ee7['message'])return;const _0x2daae3=String(_0x542ee7[_0x35b8d7(0x282)][_0x35b8d7(0x2b1)]||'')+'::'+String(_0x542ee7['key']['id']||_0x542ee7['key'][_0x35b8d7(0x290)+'t']||'');if(isProcessed(_0x2daae3))return;markProcessed(_0x2daae3);const _0x18a142=String(extractTextFromMessage(_0x542ee7)||'');if(!_0x18a142[_0x35b8d7(0x20a)]())return;let _0x2cda5b='',_0x587126=![];if(_0x542ee7[_0x35b8d7(0x246)]){const _0x2dea70=(_0x18a142[_0x35b8d7(0x20a)]()[_0x35b8d7(0x20c)](/\s+/)[-0x13*0x146+-0x1aab*0x1+-0x1d*-0x1c1]||'')['toLowerCas'+'e']();commands['includes'](_0x2dea70)&&(_0x2cda5b=_0x2dea70,_0x587126=!![]);}else{const _0x3a78d1=(_0x18a142[_0x35b8d7(0x20c)](/\r?\n/)[0xe2c*0x1+-0x1*0xec5+-0x1*-0x99]||'')['trim'](),_0x35fd56=(_0x3a78d1[_0x35b8d7(0x20c)](/\s+/)[-0x1*-0x506+-0x1543*0x1+0x103d*0x1]||'')[_0x35b8d7(0x165)+'e']();commands[_0x35b8d7(0x181)](_0x35fd56)&&(_0x2cda5b=_0x35fd56,_0x587126=!![]);}if(!_0x587126)return;const _0xef6668=_0x542ee7[_0x35b8d7(0x282)]['remoteJid'],_0x5b4eb1=typeof _0xef6668==='string'&&_0xef6668[_0x35b8d7(0x198)]('@g.us');if(!_0x5b4eb1)return;let _0xdb3de5=![];try{_0xdb3de5=await isadmin(botRef,_0x542ee7);}catch(_0x1b3b19){warn(_0x35b8d7(0x2a6)+_0x35b8d7(0x1f8)+'eck\x20failed'),_0xdb3de5=![];}if(!_0xdb3de5)return;const _0x5164c9=_0x542ee7[_0x35b8d7(0x282)]?.[_0x35b8d7(0x290)+'t']||_0x542ee7[_0x35b8d7(0x282)]?.[_0x35b8d7(0x1d5)]||_0x542ee7[_0x35b8d7(0x282)]?.[_0x35b8d7(0x2b1)]||'',_0x11c6b7=String(_0x5164c9||'')[_0x35b8d7(0x20c)]('@')[0x2ac+0x6*0x4ab+-0x1eae],_0x49504f=_0xef6668;info(_0x35b8d7(0x2a6)+_0x35b8d7(0x26a)+_0x2cda5b+_0x35b8d7(0x22a)+_0x5164c9+_0x35b8d7(0x250)+_0xef6668);const _0x3e1f23=_0x18a142['split'](/\r?\n/),_0x4bef44=_0x3e1f23[0x1*-0x796+-0xd4*-0x1f+-0x1216]||'',_0x3bd081=_0x4bef44[_0x35b8d7(0x20a)](),_0x4ed62f=_0x3bd081[_0x35b8d7(0x20c)](/\s+/);let _0x5e60d4=null;for(const _0x17d372 of _0x3e1f23[_0x35b8d7(0x1a9)](-0x1*-0x1803+-0x765+-0x109d)){const _0x536356=_0x17d372[_0x35b8d7(0x20a)]()[_0x35b8d7(0x1cf)](/^gp[:\s]+(.+)$/i);if(_0x536356){_0x5e60d4=_0x536356[0x1610+-0x3*-0x20e+-0x1*0x1c39][_0x35b8d7(0x20a)]();break;}}if(!_0x5e60d4&&_0x4ed62f['length']>=-0x915*-0x1+0xcdf+-0x15f2){if(_0x4ed62f[0xea*-0x2+-0x721*0x5+0x1a*0x171]['toLowerCas'+'e']()==='gp'&&_0x4ed62f[_0x35b8d7(0x21a)]>=0x1972*0x1+0x4c4+-0x1e33)_0x5e60d4=_0x4ed62f[_0x35b8d7(0x1a9)](0xb7*-0x27+0x95a+0x1289)[_0x35b8d7(0x275)]('\x20')[_0x35b8d7(0x20a)]();else{if(_0x4ed62f[0xc93+0xf6b+-0x1bfd]['includes']('@'))_0x5e60d4=_0x4ed62f[-0x1111+-0x35*-0x73+0x5*-0x159][_0x35b8d7(0x20a)]();}}const _0x47e9bf=await resolveTargetGroupJids(_0x5e60d4,_0x11c6b7);if((!_0x47e9bf||_0x47e9bf[_0x35b8d7(0x21a)]===-0xd45+0xe*0x25c+0x1*-0x13c3)&&_0x2cda5b===_0x35b8d7(0x174)){await sendApiOrFallback(_0x49504f,_0x35b8d7(0x16b)+_0x35b8d7(0x17e)+_0x35b8d7(0x253)+_0x35b8d7(0x251)+'ault\x20with\x20'+_0x35b8d7(0x2a0)+'t\x20<name>\x20('+_0x35b8d7(0x258)+_0x35b8d7(0x299)+_0x35b8d7(0x28a)+'provide\x20\x22g'+_0x35b8d7(0x23b)+_0x35b8d7(0x1ae)+_0x35b8d7(0x212)+_0x35b8d7(0x1d2)+_0x35b8d7(0x292));return;}const _0x220765=_0x3bd081[_0x35b8d7(0x16e)](new RegExp('^'+_0x2cda5b+'\x5cb','i'),'')['trim'](),_0x23bb5b=[];if(_0x220765)_0x23bb5b['push'](_0x220765);_0x23bb5b[_0x35b8d7(0x1ec)](..._0x3e1f23['slice'](-0x212f+0x1362+-0x1*-0xdce));const _0x2c77ea=_0x23bb5b['filter'](_0x4972a4=>!_0x4972a4[_0x35b8d7(0x20a)]()[_0x35b8d7(0x1cf)](/^gp[:\s]+(.+)$/i)),_0x3cbe97=_0x2c77ea[_0x35b8d7(0x275)]('\x0a')[_0x35b8d7(0x20a)]();if(_0x2cda5b===_0x35b8d7(0x174)){if(!_0x3cbe97){await sendApiOrFallback(_0x49504f,_0x35b8d7(0x24c)+_0x35b8d7(0x245)+_0x35b8d7(0x189)+':\x0a'+_0x35b8d7(0x1d3)+(_0x35b8d7(0x18e)+_0x35b8d7(0x21f)+'come\x20messa'+_0x35b8d7(0x168))+('Optionally'+_0x35b8d7(0x1d6)+_0x35b8d7(0x1f6)+_0x35b8d7(0x17f)+'connection'+'Name>\x22\x20to\x20'+'override\x20d'+'efaults.'));return;}_0x5e60d4&&await sendApiOrFallback(_0x49504f,_0x35b8d7(0x269)+_0x35b8d7(0x1c0)+_0x35b8d7(0x217)+_0x35b8d7(0x2a4)+'xplicit\x20ta'+'rget(s)\x20(i'+'f\x20resolvab'+_0x35b8d7(0x2b0)+_0x35b8d7(0x1f5)+_0x47e9bf[_0x35b8d7(0x275)](',\x20'));const _0x4ddae8=[];for(const _0xec3a7e of _0x47e9bf){try{let _0x2e6972=await fetchGroupMetadata(_0xec3a7e),_0x382eeb=null;if(_0x2e6972&&Array[_0x35b8d7(0x2a3)](_0x2e6972[_0x35b8d7(0x290)+'ts']))_0x382eeb=_0x2e6972[_0x35b8d7(0x290)+'ts']['length'];else{if(_0x2e6972&&typeof _0x2e6972[_0x35b8d7(0x16c)]==='number')_0x382eeb=_0x2e6972[_0x35b8d7(0x16c)];}const _0x108c14=await getWelcomeFromDb(_0xec3a7e),_0x1c1d73=_0x108c14?Number(_0x108c14[_0x35b8d7(0x1a5)]||0x2278+0x1555*0x1+-0x37cd):0x81f*-0x2+0xd*-0x10+0x110e,_0x5900f3=_0x382eeb&&_0x382eeb>-0x99*-0x16+-0x2483*-0x1+-0x31a9?_0x382eeb:_0x1c1d73,_0x450228=await saveWelcomeToDb(_0xec3a7e,_0x3cbe97,_0x5900f3,_0x108c14&&_0x108c14[_0x35b8d7(0x21b)+'d']?_0x108c14[_0x35b8d7(0x21b)+'d']:null);if(_0x450228){if(_0x5900f3&&_0x5900f3>-0xfac+0x203f+-0x1*0x1093)setCachedGroupSize(_0xec3a7e,_0x5900f3);_0x4ddae8[_0x35b8d7(0x1ec)]({'ok':!![],'msg':'Saved\x20welc'+_0x35b8d7(0x264)+_0xec3a7e});}else _0x4ddae8[_0x35b8d7(0x1ec)]({'ok':![],'msg':_0x35b8d7(0x1a0)+_0x35b8d7(0x1eb)+_0x35b8d7(0x203)+_0xec3a7e});}catch(_0x57d9c2){warn(_0x35b8d7(0x2a6)+_0x35b8d7(0x1bc)+'\x20'+_0xec3a7e+_0x35b8d7(0x1f4)+(_0x57d9c2?.[_0x35b8d7(0x26c)]||_0x57d9c2)),_0x4ddae8[_0x35b8d7(0x1ec)]({'ok':![],'msg':_0x35b8d7(0x19c)+'ng\x20for\x20'+_0xec3a7e+':\x20'+(_0x57d9c2?.[_0x35b8d7(0x26c)]||_0x57d9c2)});}}const _0x1c7931=_0x4ddae8[_0x35b8d7(0x1e5)](_0x13ac2e=>(_0x13ac2e['ok']?'✅\x20':'❌\x20')+_0x13ac2e[_0x35b8d7(0x187)]);await sendApiOrFallback(_0x49504f,_0x35b8d7(0x1d8)+_0x35b8d7(0x170)+_0x35b8d7(0x257)+_0x1c7931[_0x35b8d7(0x275)]('\x0a'));return;}if(_0x2cda5b===_0x35b8d7(0x21c)){if(!_0x47e9bf||_0x47e9bf[_0x35b8d7(0x21a)]===0xc5b*0x3+-0x300+0xb5b*-0x3){await sendApiOrFallback(_0x49504f,_0x35b8d7(0x16b)+'connection'+'(s)\x20found\x20'+_0x35b8d7(0x218)+_0x35b8d7(0x251)+_0x35b8d7(0x200)+_0x35b8d7(0x2a0)+_0x35b8d7(0x20e)+'de\x20\x22gp\x20<gr'+_0x35b8d7(0x17a)+'nectionNam'+'e>\x22.');return;}_0x5e60d4&&await sendApiOrFallback(_0x49504f,'Notice:\x20\x27g'+_0x35b8d7(0x1c0)+_0x35b8d7(0x217)+_0x35b8d7(0x2a4)+_0x35b8d7(0x213)+_0x35b8d7(0x25b)+_0x35b8d7(0x25f)+'le).\x20Delet'+_0x35b8d7(0x1be)+_0x47e9bf['join'](',\x20'));const _0x45c9c4=[];for(const _0x5802f8 of _0x47e9bf){try{const _0x4f24c4=await deleteWelcomeFromDb(_0x5802f8);_0x4f24c4?(groupSizeCache['delete'](_0x5802f8),_0x45c9c4[_0x35b8d7(0x1ec)]({'ok':!![],'msg':_0x35b8d7(0x199)+_0x35b8d7(0x240)+_0x5802f8})):_0x45c9c4['push']({'ok':![],'msg':_0x35b8d7(0x2a8)+'\x20found\x20for'+'\x20'+_0x5802f8});}catch(_0x90ceef){warn(_0x35b8d7(0x2a6)+'deleting\x20f'+_0x35b8d7(0x1dd)+_0x5802f8+_0x35b8d7(0x1f4)+(_0x90ceef?.['message']||_0x90ceef)),_0x45c9c4[_0x35b8d7(0x1ec)]({'ok':![],'msg':'Error\x20dele'+_0x35b8d7(0x1b6)+_0x5802f8+':\x20'+(_0x90ceef?.['message']||_0x90ceef)});}}const _0x4b5c57=_0x45c9c4[_0x35b8d7(0x1e5)](_0x34338e=>(_0x34338e['ok']?'✅\x20':'❌\x20')+_0x34338e[_0x35b8d7(0x187)]);await sendApiOrFallback(_0x49504f,'Delete\x20wel'+_0x35b8d7(0x252)+_0x35b8d7(0x190)+_0x4b5c57[_0x35b8d7(0x275)]('\x0a'));return;}return;}catch(_0x364ad4){error(_0x364ad4,'[welcome]\x20'+'onMessage\x20'+_0x35b8d7(0x27d)+(_0x364ad4?.[_0x35b8d7(0x26c)]||_0x364ad4));}}export async function cleanup(){const _0x47d35f=_0x5b1e56;try{for(const _0xf97cb8 of groupTimers[_0x47d35f(0x1e0)]())try{clearTimeout(_0xf97cb8);}catch(_0x3ba0a2){}groupTimers['clear'](),groupQueues[_0x47d35f(0x1ac)](),groupSizeCache[_0x47d35f(0x1ac)]();try{stopManagedListener(name,'group-part'+'icipants.u'+_0x47d35f(0x1f3));}catch(_0x92402a){}info(_0x47d35f(0x2a6)+_0x47d35f(0x1de)+_0x47d35f(0x228)+'ener\x20if\x20pr'+'esent');for(const _0x3b2b08 of processedMessageKeys[_0x47d35f(0x1e0)]())try{clearTimeout(_0x3b2b08);}catch(_0x3d1e02){}processedMessageKeys['clear']();}catch(_0x3edc51){warn(_0x47d35f(0x2a6)+_0x47d35f(0x1ff)+_0x47d35f(0x19b)+(_0x3edc51?.[_0x47d35f(0x26c)]||_0x3edc51));}finally{botRef=null,sendApi=null,info('[welcome]\x20'+_0x47d35f(0x184));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};