const _0x53fec1=_0x909b;(function(_0x274873,_0x444d4a){const _0x1d5fd8=_0x909b,_0x59a9d8=_0x274873();while(!![]){try{const _0x21b678=parseInt(_0x1d5fd8(0x1b1))/(-0x1*-0x1a1a+-0x901+-0x1*0x1118)+-parseInt(_0x1d5fd8(0x198))/(-0x1f3c+0xb3d+-0x1*-0x1401)+-parseInt(_0x1d5fd8(0x188))/(-0xdc6+0x1824+-0xa5b)+parseInt(_0x1d5fd8(0x1a3))/(-0x1*-0x12a3+-0xbf7+0x47*-0x18)*(-parseInt(_0x1d5fd8(0x190))/(-0xdc2+-0x1*-0x1553+-0x78c))+parseInt(_0x1d5fd8(0x1e4))/(0x2*-0x71c+-0x1154+-0x12*-0x1c1)*(parseInt(_0x1d5fd8(0x1df))/(0x1*0x207d+0xa0+-0x69e*0x5))+-parseInt(_0x1d5fd8(0x1da))/(0x1db4+0x258c+-0x4338)*(-parseInt(_0x1d5fd8(0x1cc))/(-0x1*-0x206a+-0xe9*0x27+0x31e))+parseInt(_0x1d5fd8(0x1c1))/(-0xf2*-0x11+-0xe59+0x1*-0x1af);if(_0x21b678===_0x444d4a)break;else _0x59a9d8['push'](_0x59a9d8['shift']());}catch(_0x339a14){_0x59a9d8['push'](_0x59a9d8['shift']());}}}(_0x34f4,-0x2ae8b+0x56ca+0x76*0x907));import{performance}from'perf_hooks';import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{isSudo,listSudo,normalizeToJid,userJidFromCtx}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x53fec1(0x1ae);export const version=_0x53fec1(0x1fa)+'d';export const priority=0x61*-0x13+0x4f*0x1b+-0x8c*0x2;let botInstance=null;const lastPingAt=new Map(),PING_COOLDOWN_MS=0x718*-0x5+0x1422+0x1b0e,PING_HISTORY_MAX=0x32d*-0x2+0x1f5a*-0x1+0x2618,pingHistory=[];let respondedMsgIds=new Set(),DEFAULT_TIMEZONE=_0x53fec1(0x193)+_0x53fec1(0x1cf);function refreshConfig(){const _0x111739=_0x53fec1;try{const _0x5c675c=typeof getConfig===_0x111739(0x195)?getConfig()||{}:{};DEFAULT_TIMEZONE=_0x5c675c[_0x111739(0x191)]||_0x5c675c[_0x111739(0x1b4)+_0x111739(0x18b)]||DEFAULT_TIMEZONE,info(name+(_0x111739(0x1d1)+_0x111739(0x17c))+DEFAULT_TIMEZONE);}catch(_0xeef62f){warn(name+(_0x111739(0x187)+_0x111739(0x1d8)+_0x111739(0x1c4))+(_0xeef62f?.['message']||_0xeef62f));}}try{typeof hotReloadConfig===_0x53fec1(0x195)&&hotReloadConfig(()=>{const _0x458c5a=_0x53fec1;try{refreshConfig();}catch(_0x20a92a){warn(name+(_0x458c5a(0x1fd)+_0x458c5a(0x1c8)+_0x458c5a(0x1b3)+'r:\x20')+(_0x20a92a?.[_0x458c5a(0x1e0)]||_0x20a92a));}});}catch(_0x4686d8){warn(name+(_0x53fec1(0x1fd)+_0x53fec1(0x19b)+_0x53fec1(0x1f6)+_0x53fec1(0x17f))+(_0x4686d8?.[_0x53fec1(0x1e0)]||_0x4686d8));}refreshConfig();function pushHistory(_0x3aa54f){const _0x23a4f7=_0x53fec1;pingHistory[_0x23a4f7(0x1d7)](_0x3aa54f);if(pingHistory[_0x23a4f7(0x18d)]>PING_HISTORY_MAX)pingHistory[_0x23a4f7(0x1a9)]();}function formatTimestamp(_0x41d739=Date[_0x53fec1(0x1a0)](),_0x2705bc=DEFAULT_TIMEZONE){const _0x20337a=_0x53fec1;try{const _0x8d187a=DateTime[_0x20337a(0x19e)](_0x41d739)[_0x20337a(0x1be)](_0x2705bc);if(!_0x8d187a[_0x20337a(0x1e9)])return new Date(_0x41d739)['toLocaleSt'+'ring']();return _0x8d187a[_0x20337a(0x1e5)+_0x20337a(0x1b0)](DateTime[_0x20337a(0x1f3)+'ED_WITH_SE'+_0x20337a(0x180)])+'\x20('+_0x8d187a['zoneName']+')';}catch(_0x37ca38){return new Date(_0x41d739)[_0x20337a(0x1e5)+_0x20337a(0x1b0)]();}}function buildBox(_0x32ce3b,_0x2a1afe,_0x182b6b=null){const _0x1377e4=_0x53fec1;if(!_0x182b6b)_0x182b6b=formatTimestamp(Date[_0x1377e4(0x1a0)](),DEFAULT_TIMEZONE);return'╭─❏\x20pong\x20❏'+_0x1377e4(0x1e2)+_0x1377e4(0x1e1)+_0x32ce3b+'\x20•\x20Net:\x20'+_0x2a1afe+_0x1377e4(0x1d5)+_0x182b6b+(_0x1377e4(0x1b6)+_0x1377e4(0x1d4));}function _0x34f4(){const _0x20e97f=['Africa/Nai','failed\x20to\x20','function',':\x20findStor','has','135284kPmHfc','ping\x20histo','client','dConfig\x20re','\x20attemptin','at\x20','fromMillis',':\x20final\x20de','now','unknown','_bot','4wgLrNx','number','rror:\x20',':\x20sent\x20pin','g\x20box\x20to\x20','\x20—\x20Proc:\x20','shift','ping\x20','skipping.','ping\x20stats','ing\x20box\x20to','ping','isArray','ring','70697ilbAGO','set','ndler\x20erro','TIMEZONE_N','t\x20determin','\x0a╰════════','\x20handler\x20e','networkLat','do\x20checks\x20','fromMe','min','heck\x20threw','edMatchFro','setZone','ency','\x20cleanup\x20e','309930ELJKaU',':\x20could\x20no','o\x20send\x20pin','r:\x20',',\x20net=','join','tency...','dConfig\x20ha','tmp','delete','add','1544796hDYiMd','N/A','story\x20yet.','robi','\x20cleaned\x20u',':\x20timezone','text','latency\x20me','══⊷','\x0a│\x20','\x20(origin:\x20','push','onfig\x20erro','e\x20chatId;\x20','8FoeHzu','key','mFindings\x20','\x20as\x20a\x20fall',':\x20initiali','200494wfUOCZ','message','roc:\x20','═══⊷\x0a│\x20⏱\x20P',':\x20invalid\x20','12weFtNg','toLocaleSt','trim','network\x20la','isCommand','isValid','sendMessag','split','Last\x20','size','\x20(proc=',':\x20retrying',':\x20failed\x20t','zed.','slice','DATETIME_M','toLowerCas','o\x20failed\x20f','gistration','\x20send.','toFixed','reverse','1.3.6-fixe','chat','clear',':\x20hotReloa','\x20pings:\x0a','\x20set\x20to\x20','unresolved','or\x20origin\x20','\x20failed:\x20','CONDS','map','processLat','Measuring\x20','type;\x20skip','\x20origin\x20ch',';\x20skipping',':\x20refreshC','425643IzGSPH','ping\x20send.','jid','AME',':\x20fallback','length','ited.','back.','9670MUHLpe','TIMEZONE','rror'];_0x34f4=function(){return _0x20e97f;};return _0x34f4();}export async function initialize(_0x54ba95){const _0x46eec2=_0x53fec1;try{botInstance=_0x54ba95,refreshConfig(),info(name+(_0x46eec2(0x1de)+_0x46eec2(0x1f1)));}catch(_0x4edc5e){warn(name+('\x20initializ'+'e\x20error:\x20')+(_0x4edc5e?.[_0x46eec2(0x1e0)]||_0x4edc5e));}}function _0x909b(_0x320768,_0x235fc5){const _0xd9457b=_0x34f4();return _0x909b=function(_0x127d9c,_0x2c2911){_0x127d9c=_0x127d9c-(-0x1eba+0x8f0+0x1745);let _0x26e76c=_0xd9457b[_0x127d9c];return _0x26e76c;},_0x909b(_0x320768,_0x235fc5);}async function findStoredMatchFromFindings(_0x11fd90=[]){const _0x96de56=_0x53fec1;try{if(!Array['isArray'](_0x11fd90)||_0x11fd90[_0x96de56(0x18d)]===-0xfd4*-0x2+-0x1*0x9e9+-0x125*0x13)return null;const _0x250f35=await listSudo();if(!Array[_0x96de56(0x1af)](_0x250f35)||_0x250f35[_0x96de56(0x18d)]===-0x5*-0x25e+0x6*-0x2a6+0x40e)return null;const _0x8eb9cb=new Set(_0x250f35[_0x96de56(0x181)](_0x593e6b=>String(_0x593e6b)));for(const _0x44e260 of _0x11fd90){if(!_0x44e260||!_0x44e260[_0x96de56(0x18a)]||typeof _0x44e260[_0x96de56(0x18a)]!=='string')continue;try{const _0x54d7fe=normalizeToJid(_0x44e260[_0x96de56(0x18a)]);if(_0x54d7fe&&_0x8eb9cb[_0x96de56(0x197)](_0x54d7fe))return _0x54d7fe;const _0x3958ab=(String(_0x44e260[_0x96de56(0x18a)])[_0x96de56(0x1eb)]('@')[-0x4*0x2a7+-0x1913+-0x23af*-0x1]||'')['split'](':')[0x573+0xf35+-0xa54*0x2]||null;if(_0x3958ab)for(const _0x37f1cf of _0x8eb9cb){const _0x2d5871=String(_0x37f1cf)[_0x96de56(0x1eb)]('@')[-0x6b8+0xaac*0x1+0x2c*-0x17]||null;if(_0x2d5871&&_0x3958ab===_0x2d5871)return _0x37f1cf;}if(_0x8eb9cb[_0x96de56(0x197)](_0x44e260[_0x96de56(0x18a)]))return _0x44e260['jid'];}catch(_0x215803){}}return null;}catch(_0x178003){return warn(name+(_0x96de56(0x196)+_0x96de56(0x1bd)+_0x96de56(0x1dc)+'error:\x20')+(_0x178003?.[_0x96de56(0x1e0)]||_0x178003)),null;}}export async function onMessage(_0x360759){const _0x46f8d3=_0x53fec1;try{if(!_0x360759||!_0x360759[_0x46f8d3(0x1db)])return;const _0xa1bd03=_0x360759[_0x46f8d3(0x1db)]?.['id'];if(_0xa1bd03){if(respondedMsgIds[_0x46f8d3(0x197)](_0xa1bd03))return;respondedMsgIds[_0x46f8d3(0x1cb)](_0xa1bd03),setTimeout(()=>{const _0x174d5e=_0x46f8d3;respondedMsgIds[_0x174d5e(0x1ca)](_0xa1bd03);},-0x3c80+-0x8f9*0x30+0x7b8*0x5e);}const _0x412cc3=_0x360759['remoteJid']||_0x360759[_0x46f8d3(0x1db)]?.['remoteJid']||_0x46f8d3(0x1a1);if(_0x412cc3===_0x46f8d3(0x1a1)){warn(name+(_0x46f8d3(0x1c2)+_0x46f8d3(0x1b5)+_0x46f8d3(0x1d9)+_0x46f8d3(0x1ab)));return;}if(!_0x360759[_0x46f8d3(0x1e8)])return;const _0x5978f5=(_0x360759[_0x46f8d3(0x1d2)]||'')[_0x46f8d3(0x1e6)]();if(!_0x5978f5)return;const _0x18cd53=_0x5978f5[_0x46f8d3(0x1f4)+'e'](),_0x2487aa=_0x18cd53===_0x46f8d3(0x199)+'ry'||_0x18cd53===_0x46f8d3(0x1ac),_0x3a9156=_0x18cd53===_0x46f8d3(0x1ae)||_0x18cd53['startsWith'](_0x46f8d3(0x1aa));if(!_0x2487aa&&!_0x3a9156)return;!botInstance&&(botInstance=_0x360759['bot']||_0x360759[_0x46f8d3(0x19a)]||_0x360759[_0x46f8d3(0x1a2)]||null,!botInstance&&warn(name+(':\x20botInsta'+'nce\x20not\x20in'+'itialized;'+_0x46f8d3(0x19c)+'g\x20to\x20conti'+'nue\x20but\x20su'+_0x46f8d3(0x1b9)+'may\x20be\x20lim'+_0x46f8d3(0x18e))));const _0x1e3a45=Boolean(_0x360759[_0x46f8d3(0x1db)][_0x46f8d3(0x1ba)]);let _0xe51dd4=![];try{_0xe51dd4=Boolean(await isSudo(botInstance,_0x360759));}catch(_0x4a4a44){warn(name+(':\x20isSudo\x20c'+_0x46f8d3(0x1bc)+':\x20')+(_0x4a4a44?.[_0x46f8d3(0x1e0)]||_0x4a4a44)),_0xe51dd4=![];}if(!_0x1e3a45&&!_0xe51dd4)return;const _0xa6e72c=String(_0x412cc3)['endsWith']('@g.us'),_0x3c6c72=getBotJid();if(_0x2487aa){const _0x514082=_0xa6e72c?_0x412cc3:_0x3c6c72||_0x412cc3;if(pingHistory[_0x46f8d3(0x18d)]===-0xaea+0xa*-0x3bb+0x3038){if(botInstance)await botInstance[_0x46f8d3(0x1ea)+'e'](_0x514082,{'text':'No\x20ping\x20hi'+_0x46f8d3(0x1ce)});return;}const _0x1e7a41=pingHistory[_0x46f8d3(0x1f2)]()[_0x46f8d3(0x1f9)]()[_0x46f8d3(0x1f2)](-0x2*0xfe9+0x1*-0x452+0x2424,-0x1c5d+-0x1cf9+0x396a)[_0x46f8d3(0x181)]((_0x4472ac,_0xdb792c)=>{const _0xcd6b07=_0x46f8d3,_0x315aa9=formatTimestamp(_0x4472ac['ts'],DEFAULT_TIMEZONE),_0x69269a=typeof _0x4472ac[_0xcd6b07(0x182)+_0xcd6b07(0x1bf)]==='number'?_0x4472ac[_0xcd6b07(0x182)+_0xcd6b07(0x1bf)][_0xcd6b07(0x1f8)](-0x73b+0x6fc*-0x4+-0x709*-0x5)+'ms':'N/A',_0x4139e3=typeof _0x4472ac[_0xcd6b07(0x1b8)+_0xcd6b07(0x1bf)]===_0xcd6b07(0x1a4)?_0x4472ac[_0xcd6b07(0x1b8)+_0xcd6b07(0x1bf)][_0xcd6b07(0x1f8)](-0x1*0x7be+-0x2312+-0x4c2*-0x9)+'ms':_0xcd6b07(0x1cd);return _0xdb792c+(-0x22c8+0x12e3*-0x1+0x35ac)+'.\x20'+_0x315aa9+_0xcd6b07(0x1a8)+_0x69269a+'\x20•\x20Net:\x20'+_0x4139e3+_0xcd6b07(0x1d6)+_0x4472ac[_0xcd6b07(0x1fb)]+')';})[_0x46f8d3(0x1c6)]('\x0a');if(botInstance)await botInstance[_0x46f8d3(0x1ea)+'e'](_0x514082,{'text':_0x46f8d3(0x1ec)+Math[_0x46f8d3(0x1bb)](0x222b+-0x847+-0x19d0,pingHistory[_0x46f8d3(0x18d)])+_0x46f8d3(0x17b)+_0x1e7a41});return;}if(!_0x3a9156)return;const _0x20099e=lastPingAt['get'](_0x412cc3)||0x64+-0x25f0+-0x12c6*-0x2,_0x254e80=Date['now']();if(_0x254e80-_0x20099e<PING_COOLDOWN_MS)return;lastPingAt[_0x46f8d3(0x1b2)](_0x412cc3,_0x254e80),setTimeout(()=>lastPingAt['delete'](_0x412cc3),PING_COOLDOWN_MS+(-0x59*0x10+-0x1515+0x1b09));let _0x2953e3=null;if(_0xa6e72c)_0x2953e3=_0x412cc3;else{if(_0x1e3a45)_0x2953e3=_0x3c6c72||_0x412cc3;else{if(_0xe51dd4){const _0x45ebe6=userJidFromCtx(_0x360759),_0x1042b0=await findStoredMatchFromFindings(_0x45ebe6['findings']);if(!_0x1042b0)return;_0x2953e3=_0x1042b0;}else return;}}if(!_0x2953e3){warn(name+(_0x46f8d3(0x19f)+'stination\x20'+_0x46f8d3(0x17d)+_0x46f8d3(0x186)+_0x46f8d3(0x1f7)));return;}const _0x543a5c=String(_0x2953e3);try{_0x2953e3=String(_0x2953e3);}catch(_0x26fa65){warn(name+(_0x46f8d3(0x1e3)+'finalDest\x20'+_0x46f8d3(0x184)+_0x46f8d3(0x189)));return;}const _0x3c393a=performance[_0x46f8d3(0x1a0)](),_0x22781d=formatTimestamp(Date[_0x46f8d3(0x1a0)](),DEFAULT_TIMEZONE),_0xfcf26e=buildBox(_0x46f8d3(0x1c9),'tmp',_0x22781d),_0x78d8de=performance[_0x46f8d3(0x1a0)](),_0x2d3bed=Number((_0x78d8de-_0x3c393a)[_0x46f8d3(0x1f8)](-0x24ab+-0x11dc+0x3689));let _0x247c0f=null;try{const _0x35fe43=_0x46f8d3(0x183)+_0x46f8d3(0x1e7)+_0x46f8d3(0x1c7),_0x1b69ca=performance[_0x46f8d3(0x1a0)](),_0x1b7eb3=await botInstance[_0x46f8d3(0x1ea)+'e'](_0x2953e3,{'text':_0x35fe43}),_0x4ce118=performance[_0x46f8d3(0x1a0)]();_0x247c0f=Number((_0x4ce118-_0x1b69ca)[_0x46f8d3(0x1f8)](0x4ae+-0x316+-0x1d*0xe));const _0x3a6631=_0x1b7eb3?.[_0x46f8d3(0x1db)]?.['id']||_0x1b7eb3?.['id'];_0x3a6631&&(respondedMsgIds[_0x46f8d3(0x1cb)](_0x3a6631),setTimeout(()=>respondedMsgIds[_0x46f8d3(0x1ca)](_0x3a6631),0x8e27+0x8079+-0x40*0x91));}catch(_0x365ce6){warn(name+(':\x20network\x20'+_0x46f8d3(0x1d3)+'asurement\x20'+_0x46f8d3(0x194))+_0x2953e3+':\x20'+(_0x365ce6?.[_0x46f8d3(0x1e0)]||_0x365ce6)),_0x247c0f=null;}const _0x595fc6=_0x2d3bed[_0x46f8d3(0x1f8)](-0x1*0x1e4d+-0xb*0x376+0xdad*0x5)+'ms',_0x23ea91=typeof _0x247c0f===_0x46f8d3(0x1a4)?_0x247c0f['toFixed'](0x1bce+0x2*-0x957+-0x3*0x30a)+'ms':_0x46f8d3(0x1cd),_0x1d56e2=buildBox(_0x595fc6,_0x23ea91,_0x22781d);try{const _0x42179a=await botInstance[_0x46f8d3(0x1ea)+'e'](_0x2953e3,{'text':_0x1d56e2}),_0x32f4f9=_0x42179a?.[_0x46f8d3(0x1db)]?.['id']||_0x42179a?.['id'];_0x32f4f9&&(respondedMsgIds[_0x46f8d3(0x1cb)](_0x32f4f9),setTimeout(()=>respondedMsgIds[_0x46f8d3(0x1ca)](_0x32f4f9),(0x1*-0x2ad+0x24b+0x1*0x67)*(0xf119+0xfab*0x1b+0x2*-0xd6e1))),info(name+(_0x46f8d3(0x1a6)+_0x46f8d3(0x1a7))+_0x2953e3+_0x46f8d3(0x1ee)+_0x595fc6+_0x46f8d3(0x1c5)+_0x23ea91+',\x20origin='+_0x412cc3+')'),pushHistory({'ts':Date[_0x46f8d3(0x1a0)](),'chat':_0x412cc3,'processLatency':_0x2d3bed,'networkLatency':_0x247c0f});}catch(_0x549309){error(_0x549309,name+(_0x46f8d3(0x1f0)+_0x46f8d3(0x1c3)+_0x46f8d3(0x1a7))+_0x2953e3);if(_0x2953e3!==_0x412cc3)try{warn(name+(_0x46f8d3(0x1ef)+'\x20to\x20send\x20p'+_0x46f8d3(0x1ad)+_0x46f8d3(0x185)+_0x46f8d3(0x19d))+_0x412cc3+(_0x46f8d3(0x1dd)+_0x46f8d3(0x18f)));const _0x1a71c7=await botInstance[_0x46f8d3(0x1ea)+'e'](_0x412cc3,{'text':_0x1d56e2}),_0x26a332=_0x1a71c7?.[_0x46f8d3(0x1db)]?.['id']||_0x1a71c7?.['id'];if(_0x26a332)respondedMsgIds[_0x46f8d3(0x1cb)](_0x26a332);pushHistory({'ts':Date[_0x46f8d3(0x1a0)](),'chat':_0x412cc3,'processLatency':_0x2d3bed,'networkLatency':_0x247c0f});}catch(_0x37c830){error(_0x37c830,name+(_0x46f8d3(0x18c)+'\x20retry\x20als'+_0x46f8d3(0x1f5)+_0x46f8d3(0x17e))+_0x412cc3);}}if(respondedMsgIds[_0x46f8d3(0x1ed)]>0x1*0x16d7+-0x5f9+0x2aa){const _0x45587c=Array['from'](respondedMsgIds),_0x41e675=new Set(_0x45587c[_0x46f8d3(0x1f2)](-(-0x48f*0x3+0xec3+0xaa2)));respondedMsgIds=_0x41e675;}}catch(_0x58a3a2){error(_0x58a3a2,name+(_0x46f8d3(0x1b7)+_0x46f8d3(0x192)));}}export async function cleanup(){const _0x48007b=_0x53fec1;try{botInstance=null,lastPingAt[_0x48007b(0x1fc)](),pingHistory[_0x48007b(0x18d)]=-0x3*-0xc3b+-0x1915+0x1*-0xb9c,respondedMsgIds['clear']&&respondedMsgIds[_0x48007b(0x1fc)](),info(name+(_0x48007b(0x1d0)+'p'));}catch(_0x5745ad){warn(name+(_0x48007b(0x1c0)+_0x48007b(0x1a5))+(_0x5745ad?.['message']||_0x5745ad));}}