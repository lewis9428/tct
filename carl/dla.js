const _0x16c4f1=_0x4e9a;(function(_0x242a1a,_0x4327f7){const _0x3a22af=_0x4e9a,_0x4592ab=_0x242a1a();while(!![]){try{const _0x5aa916=parseInt(_0x3a22af(0x21f))/(-0x37*-0x9+-0x16*0x146+0x1dd*0xe)+-parseInt(_0x3a22af(0x1e4))/(-0x20ac+0x1957+-0x757*-0x1)*(parseInt(_0x3a22af(0x22a))/(-0x3*0x223+-0x3*-0x29b+-0x15*0x11))+-parseInt(_0x3a22af(0x1d9))/(0x61*0x63+-0x18d*0x6+-0x407*0x7)*(-parseInt(_0x3a22af(0x1e9))/(-0x2361+0xeb6+0x14b0))+-parseInt(_0x3a22af(0x200))/(0xb89*0x3+0x7c9*-0x4+-0x371)*(parseInt(_0x3a22af(0x21d))/(0x18a0+-0x1*-0x17b+-0x4*0x685))+-parseInt(_0x3a22af(0x1cb))/(0x7*0x49b+0x2263+-0x8*0x853)+-parseInt(_0x3a22af(0x216))/(-0x1274+0x12da+-0x5d)+parseInt(_0x3a22af(0x229))/(0x404+-0x1*0xf5b+-0x1*-0xb61);if(_0x5aa916===_0x4327f7)break;else _0x4592ab['push'](_0x4592ab['shift']());}catch(_0x45f25c){_0x4592ab['push'](_0x4592ab['shift']());}}}(_0x28de,-0xb8d*-0x12d+-0xd5184+0xbdc60));import{info,warn,error}from'../utils/logger.js';function _0x4e9a(_0x1f8375,_0x2c13f6){const _0x59e12d=_0x28de();return _0x4e9a=function(_0x3419d9,_0x2574db){_0x3419d9=_0x3419d9-(0xf82+0x15ca+-0x2391);let _0x45ec57=_0x59e12d[_0x3419d9];return _0x45ec57;},_0x4e9a(_0x1f8375,_0x2c13f6);}function _0x28de(){const _0x4b1ed3=['audio','has','BK9','ad\x20from.\x0a\x0a','get','Instagram,','edMatch\x20er','ing,\x20pleas','key','7609626iCALIR','http',']\x20botInsta','❌\x20An\x20unexp','tct','twitter.co','dllink','1926484sdzgGk','ne.\x0a\x0atct','152632sRQUgn','iktok?url=','❌\x20Could\x20no','one\x20for\x20\x22','download/t','https://ap','❌\x20Failed\x20t','object','\x20Facebook,','sendMessag','20184280hfJKBY','249WkKLAW','pinterest.','rl=','download_u','facebook.c','\x20Pinterest','mp3','downloaded','e.\x0a\x0atct',']\x20findStor','catch','join','delete','jid','string','result','ingTone?q=',']\x20handler\x20','[ringtone]','mediafire.','com','Please\x20pro','r\x20occurred','\x22.\x0a\x0atct','1.3.1','6043104argcCa','bot','one\x20found\x20','isCommand','ching\x20for\x20','for\x20\x22','vide\x20a\x20URL','g\x20for\x20ring','❌\x20An\x20error','d\x20for\x20','\x20Failed\x20to','dla','d\x20platform','pin.it','16vvhlIu','_ringtone.','one.\x0a\x0atct','text','\x22...','sfully.','_file','b?url=','ediafire?u','.\x20Supporte','i.bk9.dev/','11014GtQfna','instagram.','interest?u','startsWith','o\x20download','1883865oooLBv','download/p','video','audio/mpeg','remoteJid','toLowerCas','[dla]\x20Down','\x0a\x0atct','while\x20sear','ected\x20erro','nstagram?u','\x20to\x20downlo','t\x20find\x20dow',',\x20Mediafir','trim','d:\x20Twitter','the\x20ringto','includes','add','message','📥\x20Download','tiktok.com','rch\x20term\x20f','18fpgley','Unsupporte','fb.watch','\x20content.\x20','error:\x20','🔍\x20Searchin','ror:\x20','data','load\x20faile','or\x20a\x20ringt','\x20occurred\x20',']\x20initiali','@g.us'];_0x28de=function(){return _0x4b1ed3;};return _0x28de();}import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import _0x2b2bd9 from'axios';export const name='downloader';export const version=_0x16c4f1(0x1ca);export const priority=0x1238+-0xe*-0x89+-0x19ac;export const commands=[_0x16c4f1(0x1d6),'ringtone'];let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x4a7263=[]){const _0x4658e7=_0x16c4f1;try{const _0xcc27f4=new Set((await listSudo())['map'](String));for(const _0x479640 of _0x4a7263){if(!_0x479640?.[_0x4658e7(0x1bf)]||typeof _0x479640['jid']!==_0x4658e7(0x1c0))continue;const _0x3533bf=normalizeToJid(_0x479640[_0x4658e7(0x1bf)]);if(_0x3533bf&&_0xcc27f4[_0x4658e7(0x20e)](_0x3533bf))return _0x3533bf;if(_0xcc27f4[_0x4658e7(0x20e)](_0x479640[_0x4658e7(0x1bf)]))return _0x479640[_0x4658e7(0x1bf)];}}catch(_0x33d024){warn('['+name+(_0x4658e7(0x1bb)+_0x4658e7(0x213)+_0x4658e7(0x206))+(_0x33d024['message']||_0x33d024));}return null;}function extractDownloadUrl(_0x4b5519){const _0x2635d9=_0x16c4f1;if(!_0x4b5519)return null;if(typeof _0x4b5519===_0x2635d9(0x1c0)&&_0x4b5519[_0x2635d9(0x1e7)](_0x2635d9(0x217)))return _0x4b5519;if(typeof _0x4b5519!==_0x2635d9(0x226))return null;const _0x449d5b=[_0x2635d9(0x22d)+'rl','url','HD','hd',_0x2635d9(0x21c),_0x2635d9(0x1eb),_0x2635d9(0x20d),_0x2635d9(0x1c1),_0x2635d9(0x20f)];for(const _0x4a2dc2 of _0x449d5b){if(_0x4b5519[_0x4a2dc2]){const _0x495371=extractDownloadUrl(_0x4b5519[_0x4a2dc2]);if(_0x495371)return _0x495371;}}return null;}export async function initialize(_0x193698){const _0x4b06ac=_0x16c4f1;botInstance=_0x193698,info('['+name+(_0x4b06ac(0x20b)+'zed\x20succes'+_0x4b06ac(0x1de)));}export async function cleanup(){botInstance=null,respondedMsgIds['clear'](),info('['+name+(']\x20cleaned\x20'+'up'));}export async function onMessage(_0x5e1330){const _0x47a8b7=_0x16c4f1;if(!_0x5e1330?.[_0x47a8b7(0x215)]||!_0x5e1330[_0x47a8b7(0x1ce)])return;const _0x595d44=_0x5e1330['key']['id'];if(_0x595d44&&respondedMsgIds[_0x47a8b7(0x20e)](_0x595d44))return;_0x595d44&&(respondedMsgIds[_0x47a8b7(0x1fb)](_0x595d44),setTimeout(()=>respondedMsgIds[_0x47a8b7(0x1be)](_0x595d44),0x1070*-0xd+0x45ee*-0x1+0x15d*0x126));const _0x973713=(_0x5e1330[_0x47a8b7(0x1dc)]||'')[_0x47a8b7(0x1f7)](),[_0x5d9aab,..._0x284d7e]=_0x973713['split'](/\s+/),_0x4cfd26=_0x5d9aab[_0x47a8b7(0x1ee)+'e']();if(!commands['includes'](_0x4cfd26))return;if(!botInstance){botInstance=_0x5e1330[_0x47a8b7(0x1cc)]||_0x5e1330['client']||null;if(!botInstance){warn('['+name+(_0x47a8b7(0x218)+'nce\x20missin'+'g.'));return;}}const _0x200f9d=getBotJid();let _0x5a30ad=_0x200f9d;const _0x3c58a7=_0x5e1330['key'][_0x47a8b7(0x1ed)]||'',_0x1cc5fd=_0x3c58a7['endsWith'](_0x47a8b7(0x20c)),_0x6da740=Boolean(_0x5e1330[_0x47a8b7(0x215)]['fromMe']);if(!_0x6da740){if(_0x1cc5fd){const _0x2761d3=await isadmin(botInstance,_0x5e1330)[_0x47a8b7(0x1bc)](()=>![]);if(!_0x2761d3)return;_0x5a30ad=_0x3c58a7;}else{const _0x54b588=await isSudo(botInstance,_0x5e1330)[_0x47a8b7(0x1bc)](()=>![]);if(!_0x54b588)return;const {findings:_0x51a261}=userJidFromCtx(_0x5e1330),_0x35792f=await findStoredMatchFromFindings(_0x51a261);if(!_0x35792f)return;_0x5a30ad=_0x35792f;}}const _0x4b3a09=_0x284d7e[_0x47a8b7(0x1bd)]('\x20');try{switch(_0x4cfd26){case _0x47a8b7(0x1d6):await handleUniversalDownloader(_0x5a30ad,_0x4b3a09,_0x5e1330);break;case'ringtone':await handleRingtone(_0x5a30ad,_0x4b3a09,_0x5e1330);break;}}catch(_0xef7ebf){error(_0xef7ebf,'['+name+(_0x47a8b7(0x1c3)+_0x47a8b7(0x204))+_0xef7ebf[_0x47a8b7(0x1fc)]),await botInstance[_0x47a8b7(0x228)+'e'](_0x5a30ad,{'text':_0x47a8b7(0x219)+_0x47a8b7(0x1f2)+_0x47a8b7(0x1c8)+'.'},{'quoted':_0x5e1330['ms']});}}async function handleUniversalDownloader(_0x256759,_0x56c0ba,_0x5afb35){const _0xb02d77=_0x16c4f1;if(!_0x56c0ba)return botInstance[_0xb02d77(0x228)+'e'](_0x256759,{'text':_0xb02d77(0x1c7)+_0xb02d77(0x1d1)+_0xb02d77(0x1f4)+_0xb02d77(0x210)+_0xb02d77(0x21a)},{'quoted':_0x5afb35['ms']});await botInstance[_0xb02d77(0x228)+'e'](_0x256759,{'text':_0xb02d77(0x1fd)+_0xb02d77(0x214)+'e\x20wait...'},{'quoted':_0x5afb35['ms']});let _0x196689;if(_0x56c0ba[_0xb02d77(0x1fa)](_0xb02d77(0x21b)+'m')||_0x56c0ba['includes']('x.com'))_0x196689=_0xb02d77(0x224)+_0xb02d77(0x1e3)+_0xb02d77(0x223)+'witter?url'+'='+encodeURIComponent(_0x56c0ba);else{if(_0x56c0ba['includes'](_0xb02d77(0x1fe)))_0x196689=_0xb02d77(0x224)+_0xb02d77(0x1e3)+_0xb02d77(0x223)+_0xb02d77(0x220)+encodeURIComponent(_0x56c0ba);else{if(_0x56c0ba['includes'](_0xb02d77(0x1e5)+_0xb02d77(0x1c6)))_0x196689=_0xb02d77(0x224)+_0xb02d77(0x1e3)+'download/i'+_0xb02d77(0x1f3)+_0xb02d77(0x22c)+encodeURIComponent(_0x56c0ba);else{if(_0x56c0ba[_0xb02d77(0x1fa)](_0xb02d77(0x22e)+'om')||_0x56c0ba[_0xb02d77(0x1fa)](_0xb02d77(0x202)))_0x196689=_0xb02d77(0x224)+_0xb02d77(0x1e3)+'download/f'+_0xb02d77(0x1e0)+encodeURIComponent(_0x56c0ba);else{if(_0x56c0ba[_0xb02d77(0x1fa)](_0xb02d77(0x22b)+_0xb02d77(0x1c6))||_0x56c0ba[_0xb02d77(0x1fa)](_0xb02d77(0x1d8)))_0x196689=_0xb02d77(0x224)+'i.bk9.dev/'+_0xb02d77(0x1ea)+_0xb02d77(0x1e6)+'rl='+encodeURIComponent(_0x56c0ba);else{if(_0x56c0ba['includes'](_0xb02d77(0x1c5)+_0xb02d77(0x1c6)))_0x196689=_0xb02d77(0x224)+_0xb02d77(0x1e3)+'download/m'+_0xb02d77(0x1e1)+_0xb02d77(0x22c)+encodeURIComponent(_0x56c0ba);else return botInstance[_0xb02d77(0x228)+'e'](_0x256759,{'text':_0xb02d77(0x201)+_0xb02d77(0x1d7)+_0xb02d77(0x1e2)+_0xb02d77(0x1f8)+',\x20TikTok,\x20'+_0xb02d77(0x212)+_0xb02d77(0x227)+_0xb02d77(0x22f)+_0xb02d77(0x1f6)+_0xb02d77(0x232)},{'quoted':_0x5afb35['ms']});}}}}}try{const _0x2c042f=await _0x2b2bd9[_0xb02d77(0x211)](_0x196689,{'timeout':0x7530}),_0x448e34=extractDownloadUrl(_0x2c042f[_0xb02d77(0x207)]);if(!_0x448e34)return botInstance[_0xb02d77(0x228)+'e'](_0x256759,{'text':_0xb02d77(0x221)+_0xb02d77(0x1f5)+'nloadable\x20'+'content\x20at'+'\x20that\x20URL.'+'\x0a\x0atct'},{'quoted':_0x5afb35['ms']});const _0x102563=/\.(mp4|mov)(\?.*)?$/['test'](_0x448e34);_0x102563?await botInstance['sendMessag'+'e'](_0x256759,{'video':{'url':_0x448e34},'caption':'tct'},{'quoted':_0x5afb35['ms']}):await botInstance['sendMessag'+'e'](_0x256759,{'document':{'url':_0x448e34},'fileName':_0xb02d77(0x231)+_0xb02d77(0x1df),'caption':_0xb02d77(0x21a)},{'quoted':_0x5afb35['ms']});}catch(_0x1e3ed5){error(_0x1e3ed5,_0xb02d77(0x1ef)+_0xb02d77(0x208)+_0xb02d77(0x1d4)+_0x56c0ba),await botInstance[_0xb02d77(0x228)+'e'](_0x256759,{'text':_0xb02d77(0x225)+_0xb02d77(0x1e8)+_0xb02d77(0x203)+'Link\x20may\x20b'+'e\x20invalid.'+_0xb02d77(0x1f0)},{'quoted':_0x5afb35['ms']});}}async function handleRingtone(_0x157b34,_0x493183,_0xc37fd9){const _0x5a382c=_0x16c4f1;if(!_0x493183)return botInstance['sendMessag'+'e'](_0x157b34,{'text':_0x5a382c(0x1c7)+'vide\x20a\x20sea'+_0x5a382c(0x1ff)+_0x5a382c(0x209)+_0x5a382c(0x1db)},{'quoted':_0xc37fd9['ms']});await botInstance[_0x5a382c(0x228)+'e'](_0x157b34,{'text':_0x5a382c(0x205)+_0x5a382c(0x1d2)+'tone:\x20\x22'+_0x493183+_0x5a382c(0x1dd)},{'quoted':_0xc37fd9['ms']});try{const _0x4a62d5=_0x5a382c(0x224)+_0x5a382c(0x1e3)+'download/R'+_0x5a382c(0x1c2)+encodeURIComponent(_0x493183),_0x6f1cbb=await _0x2b2bd9[_0x5a382c(0x211)](_0x4a62d5,{'timeout':0x4e20}),_0x2cca1b=extractDownloadUrl(_0x6f1cbb[_0x5a382c(0x207)]);if(!_0x2cca1b)return botInstance['sendMessag'+'e'](_0x157b34,{'text':'❌\x20No\x20ringt'+_0x5a382c(0x1cd)+_0x5a382c(0x1d0)+_0x493183+_0x5a382c(0x1c9)},{'quoted':_0xc37fd9['ms']});await botInstance[_0x5a382c(0x228)+'e'](_0x157b34,{'audio':{'url':_0x2cca1b},'mimetype':_0x5a382c(0x1ec),'fileName':_0x493183+(_0x5a382c(0x1da)+_0x5a382c(0x230))},{'quoted':_0xc37fd9['ms']});}catch(_0x3ba312){error(_0x3ba312,_0x5a382c(0x1c4)+_0x5a382c(0x1d5)+'\x20get\x20ringt'+_0x5a382c(0x222)+_0x493183+'\x22'),await botInstance[_0x5a382c(0x228)+'e'](_0x157b34,{'text':_0x5a382c(0x1d3)+_0x5a382c(0x20a)+_0x5a382c(0x1f1)+_0x5a382c(0x1cf)+_0x5a382c(0x1f9)+_0x5a382c(0x21e)},{'quoted':_0xc37fd9['ms']});}}