const _0x4ef059=_0x42aa;(function(_0x29e540,_0x114548){const _0x431b13=_0x42aa,_0x1f5516=_0x29e540();while(!![]){try{const _0x2c5af0=-parseInt(_0x431b13(0x154))/(-0x23d8+0x1e3a+0x59f)+parseInt(_0x431b13(0x149))/(-0x1899+-0x23f*0xa+0x2f11)+parseInt(_0x431b13(0x200))/(0x1*0x1d1b+-0x215b*0x1+0x443*0x1)+parseInt(_0x431b13(0x167))/(-0x1c3e+0x2106+-0x5*0xf4)*(parseInt(_0x431b13(0x1be))/(-0x175f+-0x39c*0x4+0x25d4))+parseInt(_0x431b13(0x178))/(0x3e2+0x12c8+-0x16a4)*(-parseInt(_0x431b13(0x1cb))/(0x124a+-0x16*-0x18a+-0x341f))+-parseInt(_0x431b13(0x1dd))/(-0x1*-0x15b+-0x2217+0x576*0x6)*(-parseInt(_0x431b13(0x203))/(0x1bde+0x136+-0x1*0x1d0b))+-parseInt(_0x431b13(0x18f))/(-0x5*-0x2ba+0x7fb*0x1+0x7*-0x315)*(-parseInt(_0x431b13(0x1f7))/(-0x1*0xfe9+-0x4*0x8f8+0x33d4));if(_0x2c5af0===_0x114548)break;else _0x1f5516['push'](_0x1f5516['shift']());}catch(_0x42547c){_0x1f5516['push'](_0x1f5516['shift']());}}}(_0x14e2,-0x2e25*0xd+0x384cd+-0xcb45*-0x1));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x4b7262 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x3318c5 from'linkify-it';import{createRequire}from'module';const require=createRequire(import.meta[_0x4ef059(0x1d4)]),tlds=require('tlds');import _0x125a21 from'axios';import{resolve as _0x3a8a9c}from'dns/promises';export const name=_0x4ef059(0x17b);function _0x14e2(){const _0x502374=['length','\x20\x20\x20\x20\x20\x20\x20\x20ON','t\x20resolve\x20','\x20=\x20\x27target','any\x20target','SELECT\x20ena',',\x20enabled)','replace','\x20\x20\x20\x20\x20);\x0a\x20\x20','oup','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','status','stringify','slice','409750RKksmF','tatus.','e\x20failed','sendMessag','Y_MS','lete_prefs','participan','d\x20=\x20exclud','\x20processCh','93381CbTxhX','ror\x20for\x20','led:\x20','18261chNjak','includes','ðŸ’¬\x20*Chat:*\x20','catch','ettings','remove','*\x0a```','(?,\x20?)\x0a\x20\x20\x20','k\x20Deletion','3.4.1',',\x20?)\x0a\x20\x20\x20\x20\x20','subcommand','\x20deleteWit','push','\x20off,\x20or\x20s','remoteJid','text','SEND_WARNI','Unknown','split','327326czeZRh','lt\x20to\x20conf','toLowerCas',':<alias|ji','oUserJid','clear','MAX_WARNS','telist;','BATCH_DELA','groupMetad','Unknown\x20Gr','12784PgxMcx','map','[antilink]','hat_jid\x20TE','DISABLED','ured.','\x20WHERE\x20cha','l\x20Message:','maining\x20wa','get','led','ON\x20CONFLIC','ed.enabled','cluded.whi','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','ðŸ”—\x20{user},\x20','links\x20are\x20','message','rnings:\x20{w','15868EPojzb','nabled\x20fai','from','{user}','INTEGER\x20DE','isCommand','all','jid','\x20group(s).','\x20CONFLICT(','t)\x20VALUES\x20','findings',')\x20DO\x20UPDAT','itialized.',']\x27\x0a\x20\x20\x20\x20\x20\x20\x20','\x20\x20enabled\x20','Please\x20use','4848WXVmrs','SET\x20enable','DO\x20UPDATE\x20','antilink','delete','\x22.\x20Use\x20on,','conversati','âŒ\x20OFF','led\x20for\x20','OT\x20EXISTS\x20','\x20increment','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','arnings}','ate','\x20for\x20','efault\x20con','\x20initializ','sock','imageMessa','ðŸ”—\x20Invalid\x20','antilink_s','key','D_LINKS','20bmYQjd','\x20(chat_jid','eleted\x20lin','INSERT\x20INT','index','ðŸ”—\x20This\x20com','set','enabled','\x20subcomman','*\x0a\x0a','elist\x20=\x20ex','\x20setGroupW','\x20sendWarni','fromMe',':\x20\x22','âœ…\x20ON','splice','ðŸ”—\x20Command\x20','\x20groups\x20fo','ror:\x20','extendedTe','\x20Failed\x20to','k\x20<on|off|','ðŸš«\x20*Antilin','requires\x20a','run','d|all>','max','exec','k:\x20','trim','igure\x20one.','BATCH_SIZE','ðŸ”—\x20PM\x20Usage','groupParti','ðŸ”—\x20*Origina','\x20\x20\x20CREATE\x20','off','ðŸ”—\x20*Antilin','\x20module\x20in','ENABLED',':\x20.antilin','chat_jid)\x20','{warnings}','ng\x20failed:','```','atQueue\x20er','15PlGIxv','k\x20Status*\x0a','WARNING_ME','\x20/setdefau','RY_COUNT','mand\x20only\x20','whitelist','t_jid\x20=\x20?','eation\x20fai','T(chat_jid','count','\x20setGroupE','Warning\x20er','2086HDEPir','parse','SELECT\x20val','filter','cipantsUpd','\x20\x20\x20\x20\x20white','\x20getGroupS',',\x20whitelis','normalizeT','url','TABLE\x20IF\x20N','SSAGE','videoMessa','REMOVE_ON_','\x20schema\x20cr','\x20VALUES\x20(?','ðŸ”—\x20Could\x20no','MAX','400ADQmqB','FAULT\x200,\x0a\x20','\x20Database\x20','list\x20TEXT\x20','@g.us','CURRENCY','\x20\x20\x20\x20\x20\x20','n|off|stat','has','ailed\x20for\x20','match','XT\x20PRIMARY'];_0x14e2=function(){return _0x502374;};return _0x14e2();}export const version=_0x4ef059(0x20c);export const priority=0x12b4+-0x183a+-0x2f5*-0x2;export const commands=['antilink','antilinkwl'];const TABLE_SETTINGS=_0x4ef059(0x18c)+_0x4ef059(0x207);let botRef=null,shuttingDown=![],config={};const linkify=_0x3318c5();linkify['tlds'](tlds);const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x1fb+-0x420+-0x61b*-0x1;const processedMessageIds=new Map(),perUserWarnings=new Map();async function ensureSchema(){const _0x15482f=_0x4ef059;try{await db[_0x15482f(0x1ab)](_0x15482f(0x1f3)+_0x15482f(0x1b3)+_0x15482f(0x1d5)+_0x15482f(0x181)+TABLE_SETTINGS+(_0x15482f(0x162)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+_0x15482f(0x157)+_0x15482f(0x1e8)+'\x20KEY,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x15482f(0x176)+_0x15482f(0x16b)+_0x15482f(0x1de)+_0x15482f(0x183)+_0x15482f(0x1d0)+_0x15482f(0x1e0)+'DEFAULT\x20\x27['+_0x15482f(0x175)+_0x15482f(0x1f1)+_0x15482f(0x1e3))),info(_0x15482f(0x156)+_0x15482f(0x1df)+'schema\x20ens'+_0x15482f(0x159));}catch(_0x337295){error(_0x337295,_0x15482f(0x156)+_0x15482f(0x1d9)+_0x15482f(0x1c6)+_0x15482f(0x15e));throw _0x337295;}}async function getGroupSetting(_0x1c96bf){const _0x2e0447=_0x4ef059;try{const _0x561a2b=await db[_0x2e0447(0x15d)](_0x2e0447(0x1ee)+'bled,\x20whit'+'elist\x20FROM'+'\x20'+TABLE_SETTINGS+(_0x2e0447(0x15a)+_0x2e0447(0x1c5)),[_0x1c96bf]);return{'enabled':!!_0x561a2b?.[_0x2e0447(0x196)],'whitelist':_0x561a2b?JSON[_0x2e0447(0x1cc)](_0x561a2b['whitelist']||'[]'):[]};}catch(_0x5037b4){return warn(_0x2e0447(0x156)+_0x2e0447(0x1d1)+'etting\x20err'+'or\x20for\x20'+_0x1c96bf+':\x20'+(_0x5037b4?.[_0x2e0447(0x165)]||_0x5037b4)),{'enabled':![],'whitelist':[]};}}async function setGroupEnabled(_0x54c510,_0x3df540){const _0x5aec75=_0x4ef059;try{return await db['run'](_0x5aec75(0x192)+'O\x20'+TABLE_SETTINGS+('\x20(chat_jid'+_0x5aec75(0x1ef)+_0x5aec75(0x1da)+_0x5aec75(0x20d)+_0x5aec75(0x1ea)+_0x5aec75(0x170)+_0x5aec75(0x1b9)+_0x5aec75(0x17a)+_0x5aec75(0x179)+_0x5aec75(0x1fe)+_0x5aec75(0x160)+';'),[_0x54c510,_0x3df540?-0x3*0x66f+-0x1941*-0x1+-0x1*0x5f3:-0x665+0x81*-0x3b+0x2420]),!![];}catch(_0x182101){return error(_0x182101,_0x5aec75(0x156)+_0x5aec75(0x1c9)+_0x5aec75(0x168)+_0x5aec75(0x180)+_0x54c510),![];}}async function setGroupWhitelist(_0x122650,_0x372e32){const _0x17dc0a=_0x4ef059;try{const _0x25164f=Array[_0x17dc0a(0x169)](new Set((_0x372e32||[])[_0x17dc0a(0x155)](String)[_0x17dc0a(0x1ce)](Boolean)));return await db[_0x17dc0a(0x1a8)]('INSERT\x20INT'+'O\x20'+TABLE_SETTINGS+(_0x17dc0a(0x190)+_0x17dc0a(0x1d2)+_0x17dc0a(0x171)+_0x17dc0a(0x20a)+_0x17dc0a(0x183)+_0x17dc0a(0x15f)+_0x17dc0a(0x1c7)+_0x17dc0a(0x173)+'E\x20SET\x20whit'+_0x17dc0a(0x199)+_0x17dc0a(0x161)+_0x17dc0a(0x150)),[_0x122650,JSON[_0x17dc0a(0x1f5)](_0x25164f)]),!![];}catch(_0x5f1703){return error(_0x5f1703,'[antilink]'+_0x17dc0a(0x19a)+'hitelist\x20f'+_0x17dc0a(0x1e6)+_0x122650),![];}}function refreshConfig(){const _0x3a6399=_0x4ef059,_0x387831=getConfig()||{};config={'MAX_WARNS':0x3,'REMOVE_ON_MAX':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x3a6399(0x163)+_0x3a6399(0x164)+'not\x20allowe'+'d\x20here.\x20Re'+_0x3a6399(0x15c)+_0x3a6399(0x166)+_0x3a6399(0x184),'VALIDATION_TIMEOUT_MS':0xfa0,'LOG_DELETED_LINKS':!![],'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x320,'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x2,..._0x387831['ANTILINK']||{}};}function _0x42aa(_0x3629dd,_0x2dd263){const _0x252d03=_0x14e2();return _0x42aa=function(_0x5c298d,_0x468478){_0x5c298d=_0x5c298d-(-0x221a+0x2*0x6cd+0x15c9);let _0x121e5f=_0x252d03[_0x5c298d];return _0x121e5f;},_0x42aa(_0x3629dd,_0x2dd263);}function setupApi(_0x169fc6){botRef=_0x169fc6;}function extractTextFromMessage(_0x492fd0){const _0x4f3318=_0x4ef059;if(!_0x492fd0||!_0x492fd0[_0x4f3318(0x165)])return'';const _0x307eb0=_0x492fd0['message'];return _0x307eb0[_0x4f3318(0x17e)+'on']||_0x307eb0[_0x4f3318(0x1a3)+'xtMessage']?.[_0x4f3318(0x213)]||_0x307eb0[_0x4f3318(0x18a)+'ge']?.['caption']||_0x307eb0[_0x4f3318(0x1d7)+'ge']?.['caption']||'';}async function messageContainsLink(_0x589116){const _0x2483ae=_0x4ef059,_0x1e5fca=extractTextFromMessage(_0x589116);if(!_0x1e5fca)return![];const _0x16a77a=linkify[_0x2483ae(0x1e7)](_0x1e5fca);if(!_0x16a77a)return![];for(const _0x1cacfc of _0x16a77a){try{const _0x2f0d8f=new URL(_0x1cacfc[_0x2483ae(0x1d4)]);return await _0x3a8a9c(_0x2f0d8f['hostname']),!![];}catch(_0x1ff5dc){continue;}}return![];}function sleep(_0x4d5edc){return new Promise(_0x507855=>setTimeout(_0x507855,_0x4d5edc));}async function deleteWithRetry(_0x27d5d0){const _0xfced64=_0x4ef059,_0x4c8cfa=Math[_0xfced64(0x1aa)](0x1da4+0x24e1+-0x21*0x204,config['DELETE_RET'+_0xfced64(0x1c2)]||-0x1df1+-0x2466+0x4258),_0x3f69f8=_0x27d5d0['key']?.['remoteJid'];if(!_0x3f69f8)return![];for(let _0x1b5108=-0x6e0+-0x1db*0xd+0x1f00;_0x1b5108<=_0x4c8cfa;_0x1b5108++){try{const _0xddced7=botRef?.[_0xfced64(0x189)]||botRef;return await _0xddced7[_0xfced64(0x1fa)+'e'](_0x3f69f8,{'delete':_0x27d5d0['key']}),!![];}catch(_0x540f6c){if(_0x1b5108<_0x4c8cfa){await sleep((0x1440+-0xa2f+-0x881)*_0x1b5108);continue;}return warn(_0xfced64(0x156)+_0xfced64(0x20f)+'hRetry\x20fai'+_0xfced64(0x202)+(_0x540f6c?.[_0xfced64(0x165)]||_0x540f6c)),![];}}return![];}async function getLogTargetJid(){const _0x12314a=_0x4ef059;try{const _0x127c5b=await db[_0x12314a(0x15d)](_0x12314a(0x1cd)+'ue\x20FROM\x20de'+_0x12314a(0x1fc)+'\x20WHERE\x20key'+_0x12314a(0x1ec)+'_jid\x27');return _0x127c5b?.['value']||getBotJid();}catch(_0x5e8600){return getBotJid();}}async function forwardDeletedLink(_0x2ff60e){const _0x1f80a1=_0x4ef059;if(!config['LOG_DELETE'+_0x1f80a1(0x18e)])return;try{const _0x453afe=await getLogTargetJid();if(!_0x453afe)return;const _0x5e052b=_0x2ff60e[_0x1f80a1(0x18d)]?.[_0x1f80a1(0x1fd)+'t']||_0x2ff60e[_0x1f80a1(0x18d)]?.[_0x1f80a1(0x212)]||_0x1f80a1(0x215),_0xeb3ab=_0x2ff60e[_0x1f80a1(0x18d)]?.[_0x1f80a1(0x212)],_0xa270fd=extractTextFromMessage(_0x2ff60e);let _0x4fd8b8='PM';try{if(_0xeb3ab['endsWith'](_0x1f80a1(0x1e1))){const _0xc1f91b=await(botRef?.[_0x1f80a1(0x189)]||botRef)[_0x1f80a1(0x152)+'ata'](_0xeb3ab);_0x4fd8b8=_0xc1f91b['subject'];}}catch(_0x257417){_0x4fd8b8=_0x1f80a1(0x153)+_0x1f80a1(0x1f2);}const _0x3db7e5=_0x1f80a1(0x1a6)+_0x1f80a1(0x20b)+_0x1f80a1(0x198)+('ðŸ‘¤\x20*User:*\x20'+'@'+_0x5e052b[_0x1f80a1(0x216)]('@')[0x1ee+-0x2286+0x2098]+'\x0a')+(_0x1f80a1(0x205)+_0x4fd8b8+'\x20('+_0xeb3ab+')\x0a')+(_0x1f80a1(0x1b2)+_0x1f80a1(0x15b)+_0x1f80a1(0x209)+_0xa270fd+_0x1f80a1(0x1bc));await(botRef?.[_0x1f80a1(0x189)]||botRef)[_0x1f80a1(0x1fa)+'e'](_0x453afe,{'text':_0x3db7e5,'mentions':[_0x5e052b]});}catch(_0x1244b1){warn(_0x1f80a1(0x156)+_0x1f80a1(0x1a4)+'\x20forward\x20d'+_0x1f80a1(0x191)+_0x1f80a1(0x1ac)+_0x1244b1[_0x1f80a1(0x165)]);}}function userKey(_0x5113a1,_0x634b6e){return _0x5113a1+'::'+_0x634b6e;}async function incrementWarningAndMaybeRemove(_0x38a738){const _0x1f099f=_0x4ef059;try{const _0x586990=_0x38a738['key']?.[_0x1f099f(0x212)],_0x1723de=_0x38a738[_0x1f099f(0x18d)]?.['participan'+'t']||_0x38a738[_0x1f099f(0x18d)]?.[_0x1f099f(0x212)]||'';if(!_0x586990||!_0x1723de)return{'count':0x0,'removed':![]};const _0x145a7b=userKey(_0x586990,_0x1723de),_0x27f162=perUserWarnings[_0x1f099f(0x15d)](_0x145a7b)||{'count':0x0};_0x27f162[_0x1f099f(0x1c8)]++,perUserWarnings[_0x1f099f(0x195)](_0x145a7b,_0x27f162);if(config[_0x1f099f(0x1d8)+_0x1f099f(0x1dc)]&&_0x27f162[_0x1f099f(0x1c8)]>=config[_0x1f099f(0x14f)]){const _0x29707b=botRef?.[_0x1f099f(0x189)]||botRef;return await _0x29707b[_0x1f099f(0x1b1)+_0x1f099f(0x1cf)+_0x1f099f(0x185)](_0x586990,[_0x1723de],_0x1f099f(0x208)),perUserWarnings[_0x1f099f(0x17c)](_0x145a7b),{'count':_0x27f162[_0x1f099f(0x1c8)],'removed':!![]};}return{'count':_0x27f162[_0x1f099f(0x1c8)],'removed':![]};}catch(_0x21678e){return warn(_0x1f099f(0x156)+_0x1f099f(0x182)+_0x1f099f(0x1ca)+_0x1f099f(0x1a2)+(_0x21678e?.[_0x1f099f(0x165)]||_0x21678e)),{'count':0x0,'removed':![]};}}async function sendWarning(_0x46ebd6,_0x220a4c){const _0x52dc12=_0x4ef059;if(!config[_0x52dc12(0x214)+'NG'])return;try{const _0x1b019b=_0x46ebd6[_0x52dc12(0x18d)]?.[_0x52dc12(0x1fd)+'t']||_0x46ebd6[_0x52dc12(0x18d)]?.[_0x52dc12(0x212)]||'',_0x4c12bb=Math[_0x52dc12(0x1aa)](0x18c1+-0x183e+-0x83,config['MAX_WARNS']-_0x220a4c),_0x530748=config[_0x52dc12(0x1c0)+_0x52dc12(0x1d6)][_0x52dc12(0x1f0)](_0x52dc12(0x16a),'@'+_0x1b019b[_0x52dc12(0x216)]('@')[-0xd3*-0x21+0xf4c+-0x2a7f])[_0x52dc12(0x1f0)](_0x52dc12(0x1ba),String(_0x4c12bb)),_0x310c5f=_0x46ebd6[_0x52dc12(0x18d)][_0x52dc12(0x212)],_0x3c7fef=botRef?.[_0x52dc12(0x189)]||botRef;await _0x3c7fef[_0x52dc12(0x1fa)+'e'](_0x310c5f,{'text':_0x530748,'mentions':[_0x1b019b]});}catch(_0x2c85eb){warn(_0x52dc12(0x156)+_0x52dc12(0x19b)+_0x52dc12(0x1bb)+'\x20'+(_0x2c85eb?.[_0x52dc12(0x165)]||_0x2c85eb));}}function enqueueDeletion(_0x48e2be){const _0x3f726d=_0x4ef059,_0x139ed2=_0x48e2be[_0x3f726d(0x18d)]?.['remoteJid'];if(!_0x139ed2)return;if(!perChatQueue[_0x3f726d(0x1e5)](_0x139ed2))perChatQueue[_0x3f726d(0x195)](_0x139ed2,[]);perChatQueue[_0x3f726d(0x15d)](_0x139ed2)[_0x3f726d(0x210)](_0x48e2be);if(!perChatProcessing[_0x3f726d(0x15d)](_0x139ed2))tryStartProcessingForChat(_0x139ed2);}function tryStartProcessingForChat(_0x5c3b96){const _0x408c85=_0x4ef059;if(perChatProcessing[_0x408c85(0x15d)](_0x5c3b96)||shuttingDown)return;if(activeChats>=(config['GLOBAL_CON'+_0x408c85(0x1e2)]||-0x1*-0x1ff9+-0x2*0xd45+-0x2b7*0x2)){setTimeout(()=>tryStartProcessingForChat(_0x5c3b96),0xcb9+-0x10d2+0x4af);return;}activeChats++,perChatProcessing[_0x408c85(0x195)](_0x5c3b96,!![]),((async()=>{const _0x48ab47=_0x408c85;try{await processChatQueue(_0x5c3b96);}catch(_0x38b310){warn('[antilink]'+_0x48ab47(0x1ff)+_0x48ab47(0x1bd)+_0x48ab47(0x201)+_0x5c3b96+':\x20'+(_0x38b310?.[_0x48ab47(0x165)]||_0x38b310));}finally{perChatProcessing[_0x48ab47(0x195)](_0x5c3b96,![]),activeChats--;if(perChatQueue[_0x48ab47(0x15d)](_0x5c3b96)?.[_0x48ab47(0x1e9)])setImmediate(()=>tryStartProcessingForChat(_0x5c3b96));}})());}async function processChatQueue(_0x121c1a){const _0x30d903=_0x4ef059;while(perChatQueue[_0x30d903(0x15d)](_0x121c1a)?.['length']>-0x1*-0x1b9f+-0x2*0x3f9+0x49*-0x45&&!shuttingDown){const _0x473ebf=perChatQueue[_0x30d903(0x15d)](_0x121c1a)[_0x30d903(0x19f)](-0x1*-0x1058+-0x17c5+0x76d*0x1,config[_0x30d903(0x1af)]||-0x1a5a+-0x5ab+-0x2*-0x1003);for(const _0xb265dc of _0x473ebf){const _0x3a4a2a=await deleteWithRetry(_0xb265dc);if(_0x3a4a2a){await forwardDeletedLink(_0xb265dc);const {count:_0x26fd2b,removed:_0x37aed9}=await incrementWarningAndMaybeRemove(_0xb265dc);!_0x37aed9&&await sendWarning(_0xb265dc,_0x26fd2b);}}perChatQueue['get'](_0x121c1a)?.[_0x30d903(0x1e9)]>0x10ec+-0x11ef*-0x1+0x22db*-0x1&&await sleep(config[_0x30d903(0x151)+_0x30d903(0x1fb)]||-0x26ce+-0x1d*0x61+0x33bf);}}function getMessageKey(_0x27723f){const _0x19cad7=_0x4ef059;if(!_0x27723f?.[_0x19cad7(0x18d)]?.['id'])return null;return _0x27723f['key'][_0x19cad7(0x212)]+':'+_0x27723f[_0x19cad7(0x18d)]['id'];}function splitRestForGp(_0x2b744d){const _0x355c4d=_0x4ef059;if(!_0x2b744d)return{'left':'','gp':null};const _0x59d802=_0x2b744d[_0x355c4d(0x1e7)](/\bgp[:\s]+(.+)$/i);if(_0x59d802)return{'left':_0x2b744d[_0x355c4d(0x1f6)](-0x2430+-0x7*-0x26+0x2326*0x1,_0x59d802[_0x355c4d(0x193)])[_0x355c4d(0x1ad)](),'gp':_0x59d802[0x5ce+-0x407*-0x9+-0x2a0c][_0x355c4d(0x1ad)]()};return{'left':_0x2b744d[_0x355c4d(0x1ad)](),'gp':null};}async function resolveTargetsForGroupAdmin(_0x4242fe){const _0x1f72cf=_0x4ef059,_0x1a240b=await getDefault(_0x4242fe)[_0x1f72cf(0x206)](()=>null);if(!_0x1a240b)return[];const _0x5ed82e=Array['isArray'](_0x1a240b)?_0x1a240b:[_0x1a240b];let _0x56d86b=[];for(const _0x2cb4ba of _0x5ed82e){const _0x194108=await getConnection(_0x2cb4ba)['catch'](()=>null);if(Array['isArray'](_0x194108))_0x56d86b['push'](..._0x194108);else{if(_0x194108)_0x56d86b[_0x1f72cf(0x210)](String(_0x194108));}}return Array[_0x1f72cf(0x169)](new Set(_0x56d86b));}async function resolveTargetsForSudo(_0x4d9c65){const _0x3771c0=_0x4ef059;if(!_0x4d9c65)return[];if(_0x4d9c65[_0x3771c0(0x14b)+'e']()===_0x3771c0(0x16d))return await _0x4b7262['getUniqueJ'+'ids']();const _0x324e96=await _0x4b7262['resolveNam'+'e'](_0x4d9c65);if(_0x324e96)return[_0x324e96];if(_0x4d9c65[_0x3771c0(0x204)]('@'))return[_0x4b7262[_0x3771c0(0x1d3)+_0x3771c0(0x14d)](_0x4d9c65)];return[];}async function findStoredMatchFromFindings(_0x367e26=[]){const _0x202e48=_0x4ef059;try{const _0x319e7d=await listSudo();if(!_0x319e7d?.[_0x202e48(0x1e9)])return null;const _0x2a1119=new Set(_0x319e7d[_0x202e48(0x155)](String));for(const _0xa8bc0e of _0x367e26||[]){if(_0xa8bc0e?.[_0x202e48(0x16e)]&&_0x2a1119['has'](normalizeToJid(_0xa8bc0e[_0x202e48(0x16e)])))return normalizeToJid(_0xa8bc0e['jid']);}return null;}catch(_0x5734d7){return null;}}export async function initialize(_0x3d3114){const _0x87e4a3=_0x4ef059;try{setupApi(_0x3d3114),await ensureSchema(),refreshConfig(),shuttingDown=![],info('[antilink]'+_0x87e4a3(0x1b6)+_0x87e4a3(0x174));}catch(_0x478f97){error(_0x478f97,_0x87e4a3(0x156)+_0x87e4a3(0x188)+_0x87e4a3(0x1f9));throw _0x478f97;}}export async function onMessage(_0x421736){const _0x4237fc=_0x4ef059;if(!_0x421736?.[_0x4237fc(0x18d)]?.[_0x4237fc(0x212)]||!_0x421736[_0x4237fc(0x165)]||shuttingDown)return;const _0x23c5b9=_0x421736[_0x4237fc(0x18d)][_0x4237fc(0x212)],_0x228072=_0x23c5b9['endsWith']('@g.us'),_0x5f4220=_0x421736['key']['participan'+'t']||_0x421736[_0x4237fc(0x18d)]['remoteJid'],_0x8d1678=_0x5f4220[_0x4237fc(0x216)]('@')[0x166a+-0x761*0x5+0xe7b],_0x207606=extractTextFromMessage(_0x421736),_0x57a428=(_0x421736[_0x4237fc(0x213)]||_0x207606)[_0x4237fc(0x1ad)](),_0x46f1f1=_0x421736[_0x4237fc(0x16c)]&&_0x57a428?_0x57a428[_0x4237fc(0x216)](/\s+/)[0x20c6+-0x2446+0x380][_0x4237fc(0x14b)+'e']()['replace']('/',''):null;if(_0x421736['isCommand']&&commands[_0x4237fc(0x204)](_0x46f1f1)){let _0x2b6ec9=_0x23c5b9,_0x7c1542=![],_0x1afa2f=![];if(_0x228072){if(await isadmin(botRef,_0x421736))_0x7c1542=!![];}else{if(_0x421736[_0x4237fc(0x18d)][_0x4237fc(0x19c)])_0x7c1542=!![],_0x1afa2f=!![],_0x2b6ec9=getBotJid()||_0x23c5b9;else{if(await isSudo(botRef,_0x421736)){_0x7c1542=!![],_0x1afa2f=!![];const _0x326130=await userJidFromCtx(_0x421736)||{'findings':[]};_0x2b6ec9=await findStoredMatchFromFindings(_0x326130[_0x4237fc(0x172)])||_0x23c5b9;}}}if(!_0x7c1542)return;if(_0x46f1f1===_0x4237fc(0x17b)){const _0x252bcb=_0x57a428[_0x4237fc(0x1f0)](new RegExp('^/?'+_0x46f1f1+'\x5cb','i'),'')[_0x4237fc(0x1ad)](),{left:_0x3f2a64,gp:_0x28d7a9}=splitRestForGp(_0x252bcb),_0x23a134=_0x3f2a64['split'](/[, ]+/)[-0x19f9+-0x8e5+-0x1*-0x22de]?.['toLowerCas'+'e']();if(!_0x23a134)return(botRef?.[_0x4237fc(0x189)]||botRef)[_0x4237fc(0x1fa)+'e'](_0x2b6ec9,{'text':_0x4237fc(0x1a0)+_0x4237fc(0x1a7)+_0x4237fc(0x197)+'d.\x20Use:\x20.a'+'ntilink\x20<o'+_0x4237fc(0x1e4)+'us>'});if(!['on',_0x4237fc(0x1b4),'status'][_0x4237fc(0x204)](_0x23a134))return(botRef?.[_0x4237fc(0x189)]||botRef)[_0x4237fc(0x1fa)+'e'](_0x2b6ec9,{'text':_0x4237fc(0x18b)+_0x4237fc(0x20e)+_0x4237fc(0x19d)+_0x23a134+(_0x4237fc(0x17d)+_0x4237fc(0x211)+_0x4237fc(0x1f8))});let _0x675002=[];if(_0x1afa2f){if(!_0x28d7a9)return(botRef?.[_0x4237fc(0x189)]||botRef)['sendMessag'+'e'](_0x2b6ec9,{'text':_0x4237fc(0x1b0)+_0x4237fc(0x1b8)+_0x4237fc(0x1a5)+'status>\x20gp'+_0x4237fc(0x14c)+_0x4237fc(0x1a9)});_0x675002=await resolveTargetsForSudo(_0x28d7a9);if(!_0x675002['length'])return(botRef?.['sock']||botRef)[_0x4237fc(0x1fa)+'e'](_0x2b6ec9,{'text':_0x4237fc(0x1db)+_0x4237fc(0x1eb)+_0x4237fc(0x1ed)+_0x4237fc(0x1a1)+'r\x20\x27'+_0x28d7a9+'\x27.'});}else{_0x675002=await resolveTargetsForGroupAdmin(_0x8d1678);if(!_0x675002[_0x4237fc(0x1e9)])return(botRef?.[_0x4237fc(0x189)]||botRef)[_0x4237fc(0x1fa)+'e'](_0x2b6ec9,{'text':_0x4237fc(0x194)+_0x4237fc(0x1c3)+'works\x20on\x20d'+_0x4237fc(0x187)+'nections.\x20'+_0x4237fc(0x177)+_0x4237fc(0x1c1)+_0x4237fc(0x14a)+_0x4237fc(0x1ae)});}if(_0x23a134==='on'||_0x23a134===_0x4237fc(0x1b4)){const _0x2924cb=_0x23a134==='on';let _0x1a0b28=0x1a83+0xd70+-0x27f3;for(const _0x18e81c of _0x675002){await setGroupEnabled(_0x18e81c,_0x2924cb)&&_0x1a0b28++;}await(botRef?.[_0x4237fc(0x189)]||botRef)[_0x4237fc(0x1fa)+'e'](_0x2b6ec9,{'text':'ðŸ”—\x20Antilink'+'\x20'+(_0x2924cb?_0x4237fc(0x1b7):_0x4237fc(0x158))+_0x4237fc(0x186)+_0x1a0b28+'/'+_0x675002[_0x4237fc(0x1e9)]+_0x4237fc(0x16f)});return;}if(_0x23a134===_0x4237fc(0x1f4)){let _0x54ab11=_0x4237fc(0x1b5)+_0x4237fc(0x1bf)+'\x0a';for(const _0x4cb39f of _0x675002){const {enabled:_0x2a91c8}=await getGroupSetting(_0x4cb39f);_0x54ab11+=_0x4cb39f+':\x20'+(_0x2a91c8?_0x4237fc(0x19e):_0x4237fc(0x17f))+'\x0a';}await(botRef?.[_0x4237fc(0x189)]||botRef)['sendMessag'+'e'](_0x2b6ec9,{'text':_0x54ab11});return;}}return;}if(_0x228072){const _0x414a31=await getGroupSetting(_0x23c5b9);if(!_0x414a31[_0x4237fc(0x196)])return;if(_0x421736[_0x4237fc(0x18d)]['fromMe']||await isadmin(botRef,_0x421736))return;const _0x5a9ecb=extractTextFromMessage(_0x421736);let _0x2e46ea=![];for(const _0x39d5c8 of _0x414a31[_0x4237fc(0x1c4)]){if(_0x39d5c8['includes']('@')&&_0x39d5c8===_0x5f4220){_0x2e46ea=!![];break;}if(!_0x39d5c8['includes']('@')&&_0x5a9ecb['includes'](_0x39d5c8)){_0x2e46ea=!![];break;}}if(_0x2e46ea)return;if(await messageContainsLink(_0x421736)){const _0x5fbd16=getMessageKey(_0x421736);if(processedMessageIds[_0x4237fc(0x1e5)](_0x5fbd16))return;processedMessageIds[_0x4237fc(0x195)](_0x5fbd16,setTimeout(()=>processedMessageIds[_0x4237fc(0x17c)](_0x5fbd16),-0x132b+-0x28*-0x3a+0x1da3)),enqueueDeletion(_0x421736);}}}export async function cleanup(){const _0x331eda=_0x4ef059;shuttingDown=!![],perChatQueue[_0x331eda(0x14e)](),perChatProcessing[_0x331eda(0x14e)](),processedMessageIds['forEach'](_0x5d8f2d=>clearTimeout(_0x5d8f2d)),processedMessageIds[_0x331eda(0x14e)](),perUserWarnings[_0x331eda(0x14e)](),activeChats=-0x8*-0x301+-0x23a1+0xb99*0x1,info(_0x331eda(0x156)+'\x20cleaned\x20u'+'p.');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};