const _0x377354=_0x2aa5;(function(_0x618654,_0x186a31){const _0xbdf832=_0x2aa5,_0x41372e=_0x618654();while(!![]){try{const _0x3b7a3f=-parseInt(_0xbdf832(0x164))/(0x90b+0x108+-0xa12)*(-parseInt(_0xbdf832(0x116))/(0x1656+-0x2*-0x446+-0x1ee0))+-parseInt(_0xbdf832(0x10c))/(0x6e6+0x52f+-0x1*0xc12)+parseInt(_0xbdf832(0x12d))/(-0x546+0x2*-0xd4+0x6f2)*(-parseInt(_0xbdf832(0x132))/(0x6c3*0x3+-0xf6d+-0x4d7))+-parseInt(_0xbdf832(0x124))/(-0x1*-0x663+-0x3*-0x411+-0x1290)+-parseInt(_0xbdf832(0x12c))/(0x80+-0x469+0x3f0)+-parseInt(_0xbdf832(0x1ce))/(-0x7c*-0x21+0x1744*0x1+-0x139c*0x2)*(-parseInt(_0xbdf832(0x19c))/(0x581*-0x2+-0x97*0x6+0xe95))+parseInt(_0xbdf832(0x19d))/(0x960+-0x1f*0xa1+0xa29)*(parseInt(_0xbdf832(0x163))/(0xcff*-0x2+-0x4*0x779+0x37ed));if(_0x3b7a3f===_0x186a31)break;else _0x41372e['push'](_0x41372e['shift']());}catch(_0x5cc8c5){_0x41372e['push'](_0x41372e['shift']());}}}(_0x6f78,-0x2365a+-0x3fb40+0x938e9));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';import*as _0x21036e from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x150469 from'linkify-it';import{createRequire}from'module';const require=createRequire(import.meta[_0x377354(0x13a)]),tlds=require('tlds');import _0x52303c from'axios';import{resolve as _0x6f54d9}from'dns/promises';export const name=_0x377354(0x179);export const version=_0x377354(0x183);export const priority=0x162d+0xb12+-0x20db;export const commands=[_0x377354(0x179),_0x377354(0x19a)];const TABLE_SETTINGS='antilink_s'+_0x377354(0x1c0);let botRef=null,shuttingDown=![],config={};const linkify=_0x150469();linkify[_0x377354(0x158)](tlds);const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=-0x648+0xc43+0x5fb*-0x1;const processedMessageIds=new Map(),perUserWarnings=new Map();async function ensureSchema(){const _0x52e7ad=_0x377354;try{await db['exec'](_0x52e7ad(0x136)+_0x52e7ad(0x181)+_0x52e7ad(0x1b1)+_0x52e7ad(0x198)+TABLE_SETTINGS+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x52e7ad(0x146)+_0x52e7ad(0x1a0)+_0x52e7ad(0x18a)+_0x52e7ad(0x1dd)+_0x52e7ad(0x151)+_0x52e7ad(0x18c)+_0x52e7ad(0x167)+_0x52e7ad(0x14a)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x52e7ad(0x172)+_0x52e7ad(0x1cd)+_0x52e7ad(0x19b)+_0x52e7ad(0x11d)+_0x52e7ad(0x13e)+_0x52e7ad(0x1c1))),info(_0x52e7ad(0x161)+_0x52e7ad(0x194)+'schema\x20ens'+_0x52e7ad(0x1c5));}catch(_0xa10124){error(_0xa10124,_0x52e7ad(0x161)+_0x52e7ad(0x152)+'eation\x20fai'+'led');throw _0xa10124;}}async function getGroupSetting(_0xc17051){const _0x3ecee9=_0x377354;try{const _0x9e81f6=await db[_0x3ecee9(0x16b)](_0x3ecee9(0x13c)+'bled,\x20whit'+_0x3ecee9(0x118)+'\x20'+TABLE_SETTINGS+('\x20WHERE\x20cha'+_0x3ecee9(0x1c4)),[_0xc17051]);return{'enabled':!!_0x9e81f6?.[_0x3ecee9(0x1ba)],'whitelist':_0x9e81f6?JSON[_0x3ecee9(0x196)](_0x9e81f6[_0x3ecee9(0x147)]||'[]'):[]};}catch(_0xc2c8dc){return warn(_0x3ecee9(0x161)+_0x3ecee9(0x14e)+'etting\x20err'+_0x3ecee9(0x1c3)+_0xc17051+':\x20'+(_0xc2c8dc?.['message']||_0xc2c8dc)),{'enabled':![],'whitelist':[]};}}async function setGroupEnabled(_0x27df46,_0x2a9135){const _0x173aeb=_0x377354;try{return await db[_0x173aeb(0x12a)]('INSERT\x20INT'+'O\x20'+TABLE_SETTINGS+(_0x173aeb(0x16c)+_0x173aeb(0x129)+_0x173aeb(0x1d6)+',\x20?)\x0a\x20\x20\x20\x20\x20'+_0x173aeb(0x119)+_0x173aeb(0x13b)+_0x173aeb(0x150)+_0x173aeb(0x123)+_0x173aeb(0x1a5)+_0x173aeb(0x112)+_0x173aeb(0x1d5)+';'),[_0x27df46,_0x2a9135?0x650+0x2702*0x1+-0x2d51:-0x2409+0x3d7*-0x3+-0x3*-0xfda]),!![];}catch(_0x241d95){return error(_0x241d95,_0x173aeb(0x161)+_0x173aeb(0x1c9)+_0x173aeb(0x1a4)+_0x173aeb(0x113)+_0x27df46),![];}}function _0x6f78(){const _0x4bacaa=['remoteJid','âœ…\x20ON','ðŸ”—\x20This\x20com','*\x0a\x0a','DO\x20UPDATE\x20','534030aTbRjG','stringify','ENABLED','oUserJid','lete_prefs',',\x20enabled)','run','SEND_WARNI','568792iPeerX','8PUbqbk','has','toLowerCas','normalizeT','ror\x20for\x20','594055swejop','works\x20on\x20d','ðŸ’¬\x20*Chat:*\x20','ate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','message','push','match','url','\x20CONFLICT(','SELECT\x20ena','d.\x20Use:\x20.a','\x20\x20\x20\x20\x20);\x0a\x20\x20','clear','d|all>','arnings}','\x20processCh','MAX','length','\x20off,\x20or\x20s','\x20\x20\x20\x20\x20\x20\x20\x20\x20c','whitelist','filter','ON\x20CONFLIC','FAULT\x200,\x0a\x20','\x20subcomman','cluded.whi','telist;','\x20getGroupS','n|off|stat','chat_jid)\x20','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20schema\x20cr','\x20WHERE\x20key','e\x20failed','text','mand\x20only\x20','ntilink\x20<o','tlds','endsWith','nections.\x20','off','BATCH_DELA','BATCH_SIZE','value','r\x20\x27','groupMetad','[antilink]','\x20setGroupW','8129DHTnoG','509cgTaiX','ðŸ”—\x20Command\x20','conversati','INTEGER\x20DE','all','\x22.\x20Use\x20on,','sendMessag','get','\x20(chat_jid','*\x0a```','map','catch','LOG_DELETE','\x20groups\x20fo','\x20\x20\x20\x20\x20white','ðŸ”—\x20Antilink','ðŸ”—\x20Could\x20no','status','split','t\x20resolve\x20','groupParti','antilink','participan','igure\x20one.','DISABLED','led:\x20','us>','status>\x20gp','fromMe','\x20\x20\x20CREATE\x20','oup','3.4.0','ids','\x20cleaned\x20u','key','D_LINKS','includes','Unknown\x20Gr','XT\x20PRIMARY','efault\x20con','\x20\x20enabled\x20','hitelist\x20f','ANTILINK','index','ðŸ”—\x20{user},\x20',':\x20.antilin','Warning\x20er','delete','\x20Database\x20','jid','parse','caption','OT\x20EXISTS\x20','\x20increment','antilinkwl','DEFAULT\x20\x27[','3430341YYFjpr','4150zHAptt','slice','imageMessa','hat_jid\x20TE','rnings:\x20{w','replace','resolveNam','nabled\x20fai','SET\x20enable','(?,\x20?)\x0a\x20\x20\x20','```','\x20initializ','hRetry\x20fai','from','set','T(chat_jid','MAX_WARNS','trim','d\x20here.\x20Re','\x20Failed\x20to','TABLE\x20IF\x20N','findings','l\x20Message:','INSERT\x20INT','\x20forward\x20d','SSAGE','ðŸš«\x20*Antilin',')\x20DO\x20UPDAT','\x20group(s).','enabled',',\x20whitelis','{user}','_jid\x27','any\x20target','ðŸ”—\x20PM\x20Usage','ettings','\x20\x20\x20\x20\x20\x20','DELETE_RET','or\x20for\x20','t_jid\x20=\x20?','ured.','requires\x20a','ng\x20failed:','{warnings}','\x20setGroupE','extendedTe','ðŸ”—\x20*Origina','getUniqueJ','list\x20TEXT\x20','8KDWoeJ','max','isCommand','forEach','\x20for\x20','some','\x20=\x20\x27target','ed.enabled','\x20VALUES\x20(?','cipantsUpd','sock','ata','\x20module\x20in','isArray','maining\x20wa','\x20KEY,\x0a\x20\x20\x20\x20','hostname','878121iynABP','@g.us','Unknown','links\x20are\x20','REMOVE_ON_',':\x20\x22','d\x20=\x20exclud','led\x20for\x20','ðŸ‘¤\x20*User:*\x20','\x20/setdefau','830ftcEtt',':<alias|ji','elist\x20FROM','\x20\x20\x20\x20\x20\x20\x20\x20ON','eleted\x20lin','ailed\x20for\x20','itialized.',']\x27\x0a\x20\x20\x20\x20\x20\x20\x20','count'];_0x6f78=function(){return _0x4bacaa;};return _0x6f78();}function _0x2aa5(_0x5df3ab,_0x120228){const _0x33a64f=_0x6f78();return _0x2aa5=function(_0x4889e3,_0x8c623c){_0x4889e3=_0x4889e3-(0x1f3f+0xfb3+-0x2de6);let _0x4ac095=_0x33a64f[_0x4889e3];return _0x4ac095;},_0x2aa5(_0x5df3ab,_0x120228);}async function setGroupWhitelist(_0x2b6953,_0xbea817){const _0x824019=_0x377354;try{const _0x4a9113=Array[_0x824019(0x1aa)](new Set((_0xbea817||[])['map'](String)[_0x824019(0x148)](Boolean)));return await db['run'](_0x824019(0x1b4)+'O\x20'+TABLE_SETTINGS+(_0x824019(0x16c)+_0x824019(0x1bb)+'t)\x20VALUES\x20'+_0x824019(0x1a6)+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x824019(0x149)+_0x824019(0x1ac)+_0x824019(0x1b8)+'E\x20SET\x20whit'+'elist\x20=\x20ex'+_0x824019(0x14c)+_0x824019(0x14d)),[_0x2b6953,JSON[_0x824019(0x125)](_0x4a9113)]),!![];}catch(_0x192482){return error(_0x192482,_0x824019(0x161)+_0x824019(0x162)+_0x824019(0x18d)+_0x824019(0x11b)+_0x2b6953),![];}}function refreshConfig(){const _0x24de95=_0x377354,_0x1eee1a=getConfig()||{};config={'MAX_WARNS':0x3,'REMOVE_ON_MAX':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x24de95(0x190)+_0x24de95(0x10f)+'not\x20allowe'+_0x24de95(0x1af)+_0x24de95(0x1dc)+_0x24de95(0x1a1)+_0x24de95(0x141),'VALIDATION_TIMEOUT_MS':0xfa0,'LOG_DELETED_LINKS':!![],'BATCH_SIZE':0x5,'BATCH_DELAY_MS':0x320,'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x2,..._0x1eee1a[_0x24de95(0x18e)]||{}};}function setupApi(_0x3f8e37){botRef=_0x3f8e37;}function extractTextFromMessage(_0x32dd48){const _0x40eeeb=_0x377354;if(!_0x32dd48||!_0x32dd48['message'])return'';const _0x339045=_0x32dd48['message'];return _0x339045[_0x40eeeb(0x166)+'on']||_0x339045[_0x40eeeb(0x1ca)+'xtMessage']?.[_0x40eeeb(0x155)]||_0x339045[_0x40eeeb(0x19f)+'ge']?.[_0x40eeeb(0x197)]||_0x339045['videoMessa'+'ge']?.[_0x40eeeb(0x197)]||'';}async function messageContainsLink(_0x20a90a){const _0x3b0eb7=_0x377354,_0x152438=extractTextFromMessage(_0x20a90a);if(!_0x152438)return![];const _0x22c1bf=linkify[_0x3b0eb7(0x139)](_0x152438);if(!_0x22c1bf)return![];for(const _0x33762c of _0x22c1bf){try{const _0x1c8494=new URL(_0x33762c[_0x3b0eb7(0x13a)]);return await _0x6f54d9(_0x1c8494[_0x3b0eb7(0x1de)]),!![];}catch(_0x3edda6){continue;}}return![];}function sleep(_0x5349cc){return new Promise(_0x2d6122=>setTimeout(_0x2d6122,_0x5349cc));}async function deleteWithRetry(_0x2c4001){const _0x52ba5b=_0x377354,_0x14af36=Math[_0x52ba5b(0x1cf)](0x20aa*-0x1+-0x11*-0x115+0x2*0x723,config[_0x52ba5b(0x1c2)+'RY_COUNT']||-0x8aa*0x1+0x13e9*0x1+-0xb3e),_0x4717f2=_0x2c4001[_0x52ba5b(0x186)]?.[_0x52ba5b(0x11f)];if(!_0x4717f2)return![];for(let _0x92b089=0x16fb+-0x2a+-0x16d0;_0x92b089<=_0x14af36;_0x92b089++){try{const _0x453ff7=botRef?.['sock']||botRef;return await _0x453ff7[_0x52ba5b(0x16a)+'e'](_0x4717f2,{'delete':_0x2c4001[_0x52ba5b(0x186)]}),!![];}catch(_0x3559b3){if(_0x92b089<_0x14af36){await sleep((0x15fd+-0x53d+-0xf30)*_0x92b089);continue;}return warn(_0x52ba5b(0x161)+'\x20deleteWit'+_0x52ba5b(0x1a9)+_0x52ba5b(0x17d)+(_0x3559b3?.[_0x52ba5b(0x137)]||_0x3559b3)),![];}}return![];}async function getLogTargetJid(){const _0x3bcc0f=_0x377354;try{const _0x5dd9d1=await db[_0x3bcc0f(0x16b)]('SELECT\x20val'+'ue\x20FROM\x20de'+_0x3bcc0f(0x128)+_0x3bcc0f(0x153)+_0x3bcc0f(0x1d4)+_0x3bcc0f(0x1bd));return _0x5dd9d1?.[_0x3bcc0f(0x15e)]||getBotJid();}catch(_0x340555){return getBotJid();}}async function forwardDeletedLink(_0x56d849){const _0x50c512=_0x377354;if(!config[_0x50c512(0x170)+_0x50c512(0x187)])return;try{const _0x1db004=await getLogTargetJid();if(!_0x1db004)return;const _0x5acd03=_0x56d849['key']?.[_0x50c512(0x17a)+'t']||_0x56d849[_0x50c512(0x186)]?.[_0x50c512(0x11f)]||_0x50c512(0x10e),_0x1934f2=_0x56d849[_0x50c512(0x186)]?.[_0x50c512(0x11f)],_0x1875e2=extractTextFromMessage(_0x56d849);let _0x2ea885='PM';try{if(_0x1934f2[_0x50c512(0x159)]('@g.us')){const _0x4292b7=await(botRef?.[_0x50c512(0x1d8)]||botRef)[_0x50c512(0x160)+_0x50c512(0x1d9)](_0x1934f2);_0x2ea885=_0x4292b7['subject'];}}catch(_0x1abf00){_0x2ea885=_0x50c512(0x189)+_0x50c512(0x182);}const _0x2adc4b=_0x50c512(0x1b7)+'k\x20Deletion'+_0x50c512(0x122)+(_0x50c512(0x114)+'@'+_0x5acd03['split']('@')[0x3*-0x369+-0x1a91*0x1+0x24cc]+'\x0a')+(_0x50c512(0x134)+_0x2ea885+'\x20('+_0x1934f2+')\x0a')+(_0x50c512(0x1cb)+_0x50c512(0x1b3)+_0x50c512(0x16d)+_0x1875e2+_0x50c512(0x1a7));await(botRef?.['sock']||botRef)['sendMessag'+'e'](_0x1db004,{'text':_0x2adc4b,'mentions':[_0x5acd03]});}catch(_0x1dbecb){warn(_0x50c512(0x161)+_0x50c512(0x1b0)+_0x50c512(0x1b5)+_0x50c512(0x11a)+'k:\x20'+_0x1dbecb[_0x50c512(0x137)]);}}function userKey(_0x5e2793,_0x38e9a7){return _0x5e2793+'::'+_0x38e9a7;}async function incrementWarningAndMaybeRemove(_0x540b95){const _0x43c1d8=_0x377354;try{const _0x100b91=_0x540b95[_0x43c1d8(0x186)]?.[_0x43c1d8(0x11f)],_0xbd19de=_0x540b95['key']?.['participan'+'t']||_0x540b95[_0x43c1d8(0x186)]?.[_0x43c1d8(0x11f)]||'';if(!_0x100b91||!_0xbd19de)return{'count':0x0,'removed':![]};const _0xe1e8aa=userKey(_0x100b91,_0xbd19de),_0x249d55=perUserWarnings['get'](_0xe1e8aa)||{'count':0x0};_0x249d55[_0x43c1d8(0x11e)]++,perUserWarnings[_0x43c1d8(0x1ab)](_0xe1e8aa,_0x249d55);if(config[_0x43c1d8(0x110)+_0x43c1d8(0x143)]&&_0x249d55[_0x43c1d8(0x11e)]>=config[_0x43c1d8(0x1ad)]){const _0x5c21e8=botRef?.['sock']||botRef;return await _0x5c21e8[_0x43c1d8(0x178)+_0x43c1d8(0x1d7)+_0x43c1d8(0x135)](_0x100b91,[_0xbd19de],'remove'),perUserWarnings[_0x43c1d8(0x193)](_0xe1e8aa),{'count':_0x249d55['count'],'removed':!![]};}return{'count':_0x249d55[_0x43c1d8(0x11e)],'removed':![]};}catch(_0x427f6c){return warn(_0x43c1d8(0x161)+_0x43c1d8(0x199)+_0x43c1d8(0x192)+'ror:\x20'+(_0x427f6c?.[_0x43c1d8(0x137)]||_0x427f6c)),{'count':0x0,'removed':![]};}}async function sendWarning(_0x46172b,_0x4a4558){const _0x5ecc78=_0x377354;if(!config[_0x5ecc78(0x12b)+'NG'])return;try{const _0x290f78=_0x46172b[_0x5ecc78(0x186)]?.[_0x5ecc78(0x17a)+'t']||_0x46172b[_0x5ecc78(0x186)]?.[_0x5ecc78(0x11f)]||'',_0xed6262=Math[_0x5ecc78(0x1cf)](0x1014+-0xc18+-0x3fc,config['MAX_WARNS']-_0x4a4558),_0x33d5d4=config['WARNING_ME'+_0x5ecc78(0x1b6)]['replace'](_0x5ecc78(0x1bc),'@'+_0x290f78[_0x5ecc78(0x176)]('@')[0x18d3+-0x2653*0x1+-0x6c0*-0x2])[_0x5ecc78(0x1a2)](_0x5ecc78(0x1c8),String(_0xed6262)),_0x10d681=_0x46172b[_0x5ecc78(0x186)][_0x5ecc78(0x11f)],_0x576c02=botRef?.[_0x5ecc78(0x1d8)]||botRef;await _0x576c02['sendMessag'+'e'](_0x10d681,{'text':_0x33d5d4,'mentions':[_0x290f78]});}catch(_0x56529d){warn(_0x5ecc78(0x161)+'\x20sendWarni'+_0x5ecc78(0x1c7)+'\x20'+(_0x56529d?.[_0x5ecc78(0x137)]||_0x56529d));}}function enqueueDeletion(_0xb3bb){const _0x243cd5=_0x377354,_0x20a276=_0xb3bb[_0x243cd5(0x186)]?.[_0x243cd5(0x11f)];if(!_0x20a276)return;if(!perChatQueue[_0x243cd5(0x12e)](_0x20a276))perChatQueue[_0x243cd5(0x1ab)](_0x20a276,[]);perChatQueue[_0x243cd5(0x16b)](_0x20a276)[_0x243cd5(0x138)](_0xb3bb);if(!perChatProcessing[_0x243cd5(0x16b)](_0x20a276))tryStartProcessingForChat(_0x20a276);}function tryStartProcessingForChat(_0x527c01){const _0x11daef=_0x377354;if(perChatProcessing['get'](_0x527c01)||shuttingDown)return;if(activeChats>=(config['GLOBAL_CON'+'CURRENCY']||-0x169e+0x25*0x4f+0xb34)){setTimeout(()=>tryStartProcessingForChat(_0x527c01),-0x2b*-0x74+-0x1ca1+0x9bb);return;}activeChats++,perChatProcessing[_0x11daef(0x1ab)](_0x527c01,!![]),((async()=>{const _0x33e943=_0x11daef;try{await processChatQueue(_0x527c01);}catch(_0x5a8020){warn(_0x33e943(0x161)+_0x33e943(0x142)+'atQueue\x20er'+_0x33e943(0x131)+_0x527c01+':\x20'+(_0x5a8020?.[_0x33e943(0x137)]||_0x5a8020));}finally{perChatProcessing[_0x33e943(0x1ab)](_0x527c01,![]),activeChats--;if(perChatQueue[_0x33e943(0x16b)](_0x527c01)?.[_0x33e943(0x144)])setImmediate(()=>tryStartProcessingForChat(_0x527c01));}})());}async function processChatQueue(_0x1b1e88){const _0x482d8a=_0x377354;while(perChatQueue[_0x482d8a(0x16b)](_0x1b1e88)?.['length']>0x1*0xad8+0x18b0+0x17b*-0x18&&!shuttingDown){const _0x2874a9=perChatQueue['get'](_0x1b1e88)['splice'](0x16f1+-0xe04+-0x8ed,config[_0x482d8a(0x15d)]||-0xcd4+0x867+0x46e);for(const _0x33745a of _0x2874a9){const _0x2febb7=await deleteWithRetry(_0x33745a);if(_0x2febb7){await forwardDeletedLink(_0x33745a);const {count:_0x25f48c,removed:_0x2d66be}=await incrementWarningAndMaybeRemove(_0x33745a);!_0x2d66be&&await sendWarning(_0x33745a,_0x25f48c);}}perChatQueue[_0x482d8a(0x16b)](_0x1b1e88)?.[_0x482d8a(0x144)]>-0x50b*0x1+-0x1*-0x1173+-0x31a*0x4&&await sleep(config[_0x482d8a(0x15c)+'Y_MS']||-0x482*-0x2+-0x1117+-0x97*-0x11);}}function getMessageKey(_0x3ff043){const _0x4dfb6e=_0x377354;if(!_0x3ff043?.[_0x4dfb6e(0x186)]?.['id'])return null;return _0x3ff043[_0x4dfb6e(0x186)]['remoteJid']+':'+_0x3ff043[_0x4dfb6e(0x186)]['id'];}function splitRestForGp(_0x2d0927){const _0x230b77=_0x377354;if(!_0x2d0927)return{'left':'','gp':null};const _0x320eca=_0x2d0927['match'](/\bgp[:\s]+(.+)$/i);if(_0x320eca)return{'left':_0x2d0927[_0x230b77(0x19e)](0x244d+0x55b*0x1+-0x29a8,_0x320eca[_0x230b77(0x18f)])['trim'](),'gp':_0x320eca[-0x6*-0x261+0x1*0x1b34+-0x2979][_0x230b77(0x1ae)]()};return{'left':_0x2d0927['trim'](),'gp':null};}async function resolveTargetsForGroupAdmin(_0x41b468){const _0x44538b=_0x377354,_0x5f3435=await getDefault(_0x41b468)['catch'](()=>null);if(!_0x5f3435)return[];const _0x362a2b=Array[_0x44538b(0x1db)](_0x5f3435)?_0x5f3435:[_0x5f3435];let _0x1e3355=[];for(const _0x56ea4e of _0x362a2b){const _0x169dd7=await getConnection(_0x56ea4e)[_0x44538b(0x16f)](()=>null);if(Array['isArray'](_0x169dd7))_0x1e3355[_0x44538b(0x138)](..._0x169dd7);else{if(_0x169dd7)_0x1e3355['push'](String(_0x169dd7));}}return Array[_0x44538b(0x1aa)](new Set(_0x1e3355));}async function resolveTargetsForSudo(_0x23711e){const _0x143490=_0x377354;if(!_0x23711e)return[];if(_0x23711e['toLowerCas'+'e']()===_0x143490(0x168))return await _0x21036e[_0x143490(0x1cc)+_0x143490(0x184)]();const _0x19e492=await _0x21036e[_0x143490(0x1a3)+'e'](_0x23711e);if(_0x19e492)return[_0x19e492];if(_0x23711e[_0x143490(0x188)]('@'))return[_0x21036e[_0x143490(0x130)+_0x143490(0x127)](_0x23711e)];return[];}async function findStoredMatchFromFindings(_0x1eae6c=[]){const _0xffdb0f=_0x377354;try{const _0x415325=await listSudo();if(!_0x415325?.[_0xffdb0f(0x144)])return null;const _0x139ac3=new Set(_0x415325[_0xffdb0f(0x16e)](String));for(const _0x4abf98 of _0x1eae6c||[]){if(_0x4abf98?.[_0xffdb0f(0x195)]&&_0x139ac3[_0xffdb0f(0x12e)](normalizeToJid(_0x4abf98[_0xffdb0f(0x195)])))return normalizeToJid(_0x4abf98[_0xffdb0f(0x195)]);}return null;}catch(_0x5e73d3){return null;}}export async function initialize(_0x41ab23){const _0x45acc3=_0x377354;try{setupApi(_0x41ab23),await ensureSchema(),refreshConfig(),shuttingDown=![],info(_0x45acc3(0x161)+_0x45acc3(0x1da)+_0x45acc3(0x11c));}catch(_0x80b402){error(_0x80b402,_0x45acc3(0x161)+_0x45acc3(0x1a8)+_0x45acc3(0x154));throw _0x80b402;}}export async function onMessage(_0x27ebdc){const _0x1d9d9b=_0x377354;if(!_0x27ebdc?.[_0x1d9d9b(0x186)]?.['remoteJid']||!_0x27ebdc[_0x1d9d9b(0x137)]||shuttingDown)return;const _0x2fe3d2=_0x27ebdc[_0x1d9d9b(0x186)][_0x1d9d9b(0x11f)],_0x43d83e=_0x2fe3d2[_0x1d9d9b(0x159)](_0x1d9d9b(0x10d)),_0x14456a=_0x27ebdc['key']['participan'+'t']||_0x27ebdc[_0x1d9d9b(0x186)][_0x1d9d9b(0x11f)],_0x51adbd=_0x14456a[_0x1d9d9b(0x176)]('@')[0x197a+-0x1f*-0x95+-0x2b85],_0x4b7a2f=extractTextFromMessage(_0x27ebdc),_0x47a8ef=(_0x27ebdc['text']||_0x4b7a2f)['trim'](),_0x91debd=_0x27ebdc[_0x1d9d9b(0x1d0)]&&_0x47a8ef?_0x47a8ef[_0x1d9d9b(0x176)](/\s+/)[-0xb*-0x18c+-0x24c5*-0x1+-0x35c9][_0x1d9d9b(0x12f)+'e']()['replace']('/',''):null;if(_0x27ebdc[_0x1d9d9b(0x1d0)]&&commands['includes'](_0x91debd)){let _0x4f9da7=_0x2fe3d2,_0x1a5c0b=![],_0x128995=![];if(_0x43d83e){if(await isadmin(botRef,_0x27ebdc))_0x1a5c0b=!![];}else{if(_0x27ebdc[_0x1d9d9b(0x186)][_0x1d9d9b(0x180)])_0x1a5c0b=!![],_0x128995=!![],_0x4f9da7=getBotJid()||_0x2fe3d2;else{if(await isSudo(botRef,_0x27ebdc)){_0x1a5c0b=!![],_0x128995=!![];const _0xb8164f=await userJidFromCtx(_0x27ebdc)||{'findings':[]};_0x4f9da7=await findStoredMatchFromFindings(_0xb8164f[_0x1d9d9b(0x1b2)])||_0x2fe3d2;}}}if(!_0x1a5c0b)return;if(_0x91debd===_0x1d9d9b(0x179)){const _0x24dc4d=_0x47a8ef['replace'](new RegExp('^/?'+_0x91debd+'\x5cb','i'),'')[_0x1d9d9b(0x1ae)](),{left:_0x56333b,gp:_0x409ea1}=splitRestForGp(_0x24dc4d),_0x11fd3d=_0x56333b[_0x1d9d9b(0x176)](/[, ]+/)[-0x27*0x38+-0x1875+0x20fd]?.[_0x1d9d9b(0x12f)+'e']();if(!_0x11fd3d)return(botRef?.[_0x1d9d9b(0x1d8)]||botRef)[_0x1d9d9b(0x16a)+'e'](_0x4f9da7,{'text':_0x1d9d9b(0x165)+_0x1d9d9b(0x1c6)+_0x1d9d9b(0x14b)+_0x1d9d9b(0x13d)+_0x1d9d9b(0x157)+_0x1d9d9b(0x14f)+_0x1d9d9b(0x17e)});if(!['on',_0x1d9d9b(0x15b),'status']['includes'](_0x11fd3d))return(botRef?.['sock']||botRef)['sendMessag'+'e'](_0x4f9da7,{'text':'ðŸ”—\x20Invalid\x20'+'subcommand'+_0x1d9d9b(0x111)+_0x11fd3d+(_0x1d9d9b(0x169)+_0x1d9d9b(0x145)+'tatus.')});let _0x33a957=[];if(_0x128995){if(!_0x409ea1)return(botRef?.[_0x1d9d9b(0x1d8)]||botRef)[_0x1d9d9b(0x16a)+'e'](_0x4f9da7,{'text':_0x1d9d9b(0x1bf)+_0x1d9d9b(0x191)+'k\x20<on|off|'+_0x1d9d9b(0x17f)+_0x1d9d9b(0x117)+_0x1d9d9b(0x140)});_0x33a957=await resolveTargetsForSudo(_0x409ea1);if(!_0x33a957[_0x1d9d9b(0x144)])return(botRef?.[_0x1d9d9b(0x1d8)]||botRef)[_0x1d9d9b(0x16a)+'e'](_0x4f9da7,{'text':_0x1d9d9b(0x174)+_0x1d9d9b(0x177)+_0x1d9d9b(0x1be)+_0x1d9d9b(0x171)+_0x1d9d9b(0x15f)+_0x409ea1+'\x27.'});}else{_0x33a957=await resolveTargetsForGroupAdmin(_0x51adbd);if(!_0x33a957[_0x1d9d9b(0x144)])return(botRef?.[_0x1d9d9b(0x1d8)]||botRef)['sendMessag'+'e'](_0x4f9da7,{'text':_0x1d9d9b(0x121)+_0x1d9d9b(0x156)+_0x1d9d9b(0x133)+_0x1d9d9b(0x18b)+_0x1d9d9b(0x15a)+'Please\x20use'+_0x1d9d9b(0x115)+'lt\x20to\x20conf'+_0x1d9d9b(0x17b)});}if(_0x11fd3d==='on'||_0x11fd3d===_0x1d9d9b(0x15b)){const _0xf8524a=_0x11fd3d==='on';let _0x4b853f=-0x1*0x11e7+0x7*-0x407+0x14*0x24e;for(const _0xce629b of _0x33a957){await setGroupEnabled(_0xce629b,_0xf8524a)&&_0x4b853f++;}await(botRef?.[_0x1d9d9b(0x1d8)]||botRef)[_0x1d9d9b(0x16a)+'e'](_0x4f9da7,{'text':_0x1d9d9b(0x173)+'\x20'+(_0xf8524a?_0x1d9d9b(0x126):_0x1d9d9b(0x17c))+_0x1d9d9b(0x1d2)+_0x4b853f+'/'+_0x33a957['length']+_0x1d9d9b(0x1b9)});return;}if(_0x11fd3d===_0x1d9d9b(0x175)){let _0x12edb9='ðŸ”—\x20*Antilin'+'k\x20Status*\x0a'+'\x0a';for(const _0x5722bf of _0x33a957){const {enabled:_0x70fc3b}=await getGroupSetting(_0x5722bf);_0x12edb9+=_0x5722bf+':\x20'+(_0x70fc3b?_0x1d9d9b(0x120):'âŒ\x20OFF')+'\x0a';}await(botRef?.[_0x1d9d9b(0x1d8)]||botRef)[_0x1d9d9b(0x16a)+'e'](_0x4f9da7,{'text':_0x12edb9});return;}}return;}if(_0x43d83e){const _0x3d9e85=await getGroupSetting(_0x2fe3d2);if(!_0x3d9e85['enabled']||_0x27ebdc[_0x1d9d9b(0x186)]['fromMe']||await isadmin(botRef,_0x27ebdc))return;const _0x1d958e=_0x3d9e85[_0x1d9d9b(0x147)][_0x1d9d9b(0x188)](_0x14456a);if(_0x1d958e)return;const _0x3ff78c=extractTextFromMessage(_0x27ebdc),_0x145d22=_0x3ff78c&&_0x3d9e85['whitelist'][_0x1d9d9b(0x1d3)](_0x557d0a=>_0x3ff78c['includes'](_0x557d0a));if(_0x145d22)return;if(await messageContainsLink(_0x27ebdc)){const _0x4e511d=getMessageKey(_0x27ebdc);if(processedMessageIds[_0x1d9d9b(0x12e)](_0x4e511d))return;processedMessageIds[_0x1d9d9b(0x1ab)](_0x4e511d,setTimeout(()=>processedMessageIds[_0x1d9d9b(0x193)](_0x4e511d),-0x170f+0x22f1+0x16*0x59)),enqueueDeletion(_0x27ebdc);}}}export async function cleanup(){const _0x4df7f3=_0x377354;shuttingDown=!![],perChatQueue[_0x4df7f3(0x13f)](),perChatProcessing[_0x4df7f3(0x13f)](),processedMessageIds[_0x4df7f3(0x1d1)](_0x281a6a=>clearTimeout(_0x281a6a)),processedMessageIds[_0x4df7f3(0x13f)](),perUserWarnings[_0x4df7f3(0x13f)](),activeChats=-0x19*-0x106+0xe5f+0x35*-0xc1,info(_0x4df7f3(0x161)+_0x4df7f3(0x185)+'p.');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};