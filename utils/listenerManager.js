function _0x2a6c(){const _0x50159d=['987917dLtnOw','[ListenerM','ener','addListene','.update','2825000agcTdW','lastSockId','has','ing\x20',',\x20event=','eventName','off','ATTACH_WAT','start','istener:\x20m','OR_MS','tached\x20lis','creating\x20l','10596773KRsoeU','ler','anager]\x20bo','get','removeList','stop','\x20.on\x20metho','tRef.sock.','ev\x20missing','call','rInterval','cket\x20insta','attachWatc','function','delete','ror\x20detach','botRef','\x22,\x20re-atta','anager]\x20Fa','moduleName','36awhvpL','handler','ching\x20list','sock','odule=','UpdateHand','ener.','set','CHER_MS','sockMonito','d\x20for\x20\x22','anager]\x20Er','message','herInterva','65099MmWydJ','anager]\x20At','connection','SOCK_MONIT','tach\x20','695756zowRuQ','attached','iled\x20to\x20at','anager]\x20So','d\x20for\x20modu','valid\x20argu','le\x20','\x20for\x20','5BZGrhj','2277405lmEKRq','9hVBUDh','anager]\x20In','3252624qIEDHA','\x22\x20in\x20modul','24ApDsCZ','e\x20\x22','entity'];_0x2a6c=function(){return _0x50159d;};return _0x2a6c();}function _0x5926(_0x1fd7ab,_0xd7be8e){const _0x1abed9=_0x2a6c();return _0x5926=function(_0x54da23,_0x713dd2){_0x54da23=_0x54da23-(-0x21c0+0x7*-0x2ef+0x3772);let _0x19064a=_0x1abed9[_0x54da23];return _0x19064a;},_0x5926(_0x1fd7ab,_0xd7be8e);}(function(_0x491fe,_0x4dab03){const _0x2f11f8=_0x5926,_0x481091=_0x491fe();while(!![]){try{const _0xcd07b6=-parseInt(_0x2f11f8(0x151))/(-0xb*0x20e+-0x220e+-0xf*-0x3c7)*(-parseInt(_0x2f11f8(0x143))/(-0x7*0x17e+-0x1*0x15b+0x1*0xbcf))+parseInt(_0x2f11f8(0x160))/(0x1ff9+-0x1554+-0x1*0xaa2)*(-parseInt(_0x2f11f8(0x156))/(0x4e6+0x26ab+-0x2b8d))+parseInt(_0x2f11f8(0x15e))/(0x4d8+-0xd37*0x1+0x2cc*0x3)*(-parseInt(_0x2f11f8(0x162))/(0x1c98+0x1445*-0x1+0x7d*-0x11))+parseInt(_0x2f11f8(0x167))/(-0x1b17+-0xd73*-0x1+0xdab)*(-parseInt(_0x2f11f8(0x164))/(0x1*0xd56+-0x115*-0x11+0xa91*-0x3))+parseInt(_0x2f11f8(0x15f))/(-0xb35+-0x151+-0x1*-0xc8f)+-parseInt(_0x2f11f8(0x16c))/(-0x339+0xced+-0x9aa*0x1)+parseInt(_0x2f11f8(0x12f))/(0x3*-0x3c5+-0x147b+0x1fd5);if(_0xcd07b6===_0x4dab03)break;else _0x481091['push'](_0x481091['shift']());}catch(_0x4f254d){_0x481091['push'](_0x481091['shift']());}}}(_0x2a6c,0x1*0xa7c8b+-0x1*-0x3c26d+-0x4cf84));import{info,warn}from'./logger.js';import{getConfig}from'./config.js';const managedListeners=new Map();function createManagedListener({botRef:_0x1cc506,eventName:_0x5072f2,handler:_0x58a79a,moduleName:_0x15c253}){const _0x1d9d7d=_0x5926;if(!_0x1cc506||!_0x5072f2||!_0x58a79a||!_0x15c253)return warn(_0x1d9d7d(0x168)+_0x1d9d7d(0x161)+_0x1d9d7d(0x15b)+'ments\x20for\x20'+_0x1d9d7d(0x12e)+_0x1d9d7d(0x12b)+_0x1d9d7d(0x147)+_0x15c253+_0x1d9d7d(0x170)+_0x5072f2+'.'),null;const _0x3904a4=getConfig(),_0x582517=_0x3904a4[_0x1d9d7d(0x129)+_0x1d9d7d(0x14b)],_0x21266f=_0x3904a4[_0x1d9d7d(0x154)+_0x1d9d7d(0x12c)],_0x92fed0={'botRef':_0x1cc506,'eventName':_0x5072f2,'handler':_0x58a79a,'moduleName':_0x15c253,'attached':![],'lastSockIdentity':null,'attachWatcherInterval':null,'sockMonitorInterval':null,'connectionUpdateHandler':null},_0xf55863=()=>{const _0x147bff=_0x1d9d7d;try{const _0x26f3db=_0x92fed0[_0x147bff(0x13f)]?.[_0x147bff(0x146)];if(!_0x26f3db?.['ev'])return;const _0x208462=_0x26f3db['ev']['off']||_0x26f3db['ev'][_0x147bff(0x133)+_0x147bff(0x169)];typeof _0x208462==='function'&&_0x208462[_0x147bff(0x138)](_0x26f3db['ev'],_0x92fed0[_0x147bff(0x171)],_0x92fed0[_0x147bff(0x144)]);}catch(_0x16492c){warn(_0x147bff(0x168)+_0x147bff(0x14e)+_0x147bff(0x13e)+_0x147bff(0x16f)+_0x92fed0[_0x147bff(0x171)]+_0x147bff(0x15d)+_0x92fed0[_0x147bff(0x142)]+':\x20'+(_0x16492c?.[_0x147bff(0x14f)]||_0x16492c));}finally{_0x92fed0[_0x147bff(0x157)]=![],_0x92fed0[_0x147bff(0x16d)+_0x147bff(0x166)]=null;}},_0x2f2faf=()=>{const _0x465fff=_0x1d9d7d;try{const _0x2603b9=_0x92fed0[_0x465fff(0x13f)]?.[_0x465fff(0x146)];if(!_0x2603b9?.['ev'])return![];_0xf55863();const _0x3c64fb=_0x2603b9['ev']['on']||_0x2603b9['ev'][_0x465fff(0x16a)+'r'];return typeof _0x3c64fb===_0x465fff(0x13c)?(_0x3c64fb[_0x465fff(0x138)](_0x2603b9['ev'],_0x92fed0[_0x465fff(0x171)],_0x92fed0[_0x465fff(0x144)]),!_0x92fed0[_0x465fff(0x157)]&&info('[ListenerM'+_0x465fff(0x152)+_0x465fff(0x12d)+'tener\x20for\x20'+'\x22'+_0x92fed0['eventName']+(_0x465fff(0x163)+_0x465fff(0x165))+_0x92fed0[_0x465fff(0x142)]+'\x22.'),_0x92fed0[_0x465fff(0x157)]=!![],_0x92fed0['lastSockId'+_0x465fff(0x166)]=_0x2603b9,!![]):(warn(_0x465fff(0x168)+_0x465fff(0x131)+_0x465fff(0x136)+_0x465fff(0x137)+_0x465fff(0x135)+_0x465fff(0x15a)+_0x465fff(0x15c)+_0x92fed0['moduleName']+'.'),![]);}catch(_0x420c63){return warn('[ListenerM'+_0x465fff(0x141)+_0x465fff(0x158)+_0x465fff(0x155)+_0x92fed0['eventName']+_0x465fff(0x15d)+_0x92fed0['moduleName']+':\x20'+(_0x420c63?.[_0x465fff(0x14f)]||_0x420c63)),_0x92fed0[_0x465fff(0x157)]=![],![];}},_0xe0c45f=()=>{const _0x3aab01=_0x1d9d7d;if(_0x92fed0[_0x3aab01(0x13b)+_0x3aab01(0x150)+'l'])clearInterval(_0x92fed0[_0x3aab01(0x13b)+_0x3aab01(0x150)+'l']);if(_0x92fed0[_0x3aab01(0x14c)+_0x3aab01(0x139)])clearInterval(_0x92fed0[_0x3aab01(0x14c)+_0x3aab01(0x139)]);_0x92fed0[_0x3aab01(0x13b)+'herInterva'+'l']=null,_0x92fed0[_0x3aab01(0x14c)+'rInterval']=null;if(_0x92fed0['connection'+_0x3aab01(0x148)+'ler']&&_0x92fed0[_0x3aab01(0x13f)]?.[_0x3aab01(0x146)]?.['ev']){const _0x15eb31=_0x92fed0[_0x3aab01(0x13f)][_0x3aab01(0x146)]['ev'][_0x3aab01(0x172)]||_0x92fed0[_0x3aab01(0x13f)][_0x3aab01(0x146)]['ev']['removeList'+_0x3aab01(0x169)];if(typeof _0x15eb31===_0x3aab01(0x13c))try{_0x15eb31[_0x3aab01(0x138)](_0x92fed0[_0x3aab01(0x13f)]['sock']['ev'],_0x3aab01(0x153)+_0x3aab01(0x16b),_0x92fed0['connection'+'UpdateHand'+_0x3aab01(0x130)]);}catch(_0x19bbd6){}_0x92fed0[_0x3aab01(0x153)+'UpdateHand'+_0x3aab01(0x130)]=null;}},_0x237d45=()=>{const _0xe238c5=_0x1d9d7d;_0xe0c45f(),_0x92fed0['attachWatc'+_0xe238c5(0x150)+'l']=setInterval(()=>{const _0x2f99b0=_0xe238c5;if(_0x92fed0['botRef']?.[_0x2f99b0(0x146)]?.['ev']&&!_0x92fed0[_0x2f99b0(0x157)])_0x2f2faf();},_0x582517),_0x92fed0[_0xe238c5(0x14c)+_0xe238c5(0x139)]=setInterval(()=>{const _0x54d6d5=_0xe238c5,_0x1b5dd6=_0x92fed0['botRef']?.[_0x54d6d5(0x146)]||null;_0x1b5dd6&&_0x92fed0[_0x54d6d5(0x16d)+_0x54d6d5(0x166)]!==_0x1b5dd6&&(info('[ListenerM'+_0x54d6d5(0x159)+_0x54d6d5(0x13a)+'nce\x20change'+_0x54d6d5(0x14d)+_0x92fed0[_0x54d6d5(0x142)]+(_0x54d6d5(0x140)+_0x54d6d5(0x145)+_0x54d6d5(0x149))),_0x2f2faf());},_0x21266f);if(_0x92fed0[_0xe238c5(0x13f)]?.[_0xe238c5(0x146)]?.['ev']){_0x92fed0[_0xe238c5(0x153)+_0xe238c5(0x148)+'ler']=()=>setTimeout(()=>_0x2f2faf(),0x10a3*-0x2+-0x1292+0xd73*0x4);const _0x58d42d=_0x92fed0['botRef']['sock']['ev']['on']||_0x92fed0[_0xe238c5(0x13f)]['sock']['ev']['addListene'+'r'];typeof _0x58d42d===_0xe238c5(0x13c)&&_0x58d42d['call'](_0x92fed0[_0xe238c5(0x13f)]['sock']['ev'],'connection'+'.update',_0x92fed0[_0xe238c5(0x153)+_0xe238c5(0x148)+_0xe238c5(0x130)]);}},_0x167f4d={'start':()=>{_0x2f2faf(),_0x237d45();},'stop':()=>{_0xe0c45f(),_0xf55863();}};return _0x167f4d;}export function startManagedListener(_0x5c0a4d){const _0x18ab05=_0x5926,{moduleName:_0x1dcdec,eventName:_0xb5acb}=_0x5c0a4d,_0x36adc0=_0x1dcdec+':'+_0xb5acb;managedListeners[_0x18ab05(0x16e)](_0x36adc0)&&managedListeners[_0x18ab05(0x132)](_0x36adc0)[_0x18ab05(0x134)]();const _0x4b1af1=createManagedListener(_0x5c0a4d);return _0x4b1af1&&(managedListeners[_0x18ab05(0x14a)](_0x36adc0,_0x4b1af1),_0x4b1af1[_0x18ab05(0x12a)]()),_0x4b1af1;}export function stopManagedListener(_0x4eab62,_0x66c357){const _0x3d776e=_0x5926,_0x2c40ef=_0x4eab62+':'+_0x66c357;managedListeners[_0x3d776e(0x16e)](_0x2c40ef)&&(managedListeners[_0x3d776e(0x132)](_0x2c40ef)['stop'](),managedListeners[_0x3d776e(0x13d)](_0x2c40ef));}