function _0x2e43(_0x3a322d,_0x132533){const _0x2c54c1=_0x3390();return _0x2e43=function(_0x11b7ff,_0x451f8){_0x11b7ff=_0x11b7ff-(-0x1*0x1ae9+0x1792*0x1+0x4d2);let _0x389322=_0x2c54c1[_0x11b7ff];return _0x389322;},_0x2e43(_0x3a322d,_0x132533);}const _0x185562=_0x2e43;(function(_0x44fcfd,_0xa88fb9){const _0x36c0e6=_0x2e43,_0x246534=_0x44fcfd();while(!![]){try{const _0x4b59a5=parseInt(_0x36c0e6(0x1af))/(-0x18*0x119+0x256*-0x1+0x1caf)+parseInt(_0x36c0e6(0x1de))/(-0x195d+-0x142+0x1aa1)*(-parseInt(_0x36c0e6(0x1dc))/(0x1*-0x1ebd+-0x1*0x63e+0x127f*0x2))+-parseInt(_0x36c0e6(0x18f))/(0xff0+0x15f1+-0xc9f*0x3)*(parseInt(_0x36c0e6(0x194))/(-0x1*-0x1f79+-0x6*0x336+0x68*-0x1e))+parseInt(_0x36c0e6(0x1f4))/(-0x2d*0xa1+0xb2*-0x20+0x3293)+-parseInt(_0x36c0e6(0x1d7))/(-0x1*0x41e+-0x13cb+0x17f0)*(parseInt(_0x36c0e6(0x1df))/(-0x1aec+-0x1*0x2301+-0x11*-0x3a5))+parseInt(_0x36c0e6(0x1f3))/(0x26f2+-0x2*-0x8ac+-0x3841)+parseInt(_0x36c0e6(0x1b4))/(-0x10d1+-0x142e+0x2509)*(parseInt(_0x36c0e6(0x1ee))/(-0xef2+0xef6+0x7));if(_0x4b59a5===_0xa88fb9)break;else _0x246534['push'](_0x246534['shift']());}catch(_0x3f04ac){_0x246534['push'](_0x246534['shift']());}}}(_0x3390,-0xa3d2a*0x2+-0x542c7+-0x1*-0x2750fe));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';export const name='mediaconve'+'rt';export const version=_0x185562(0x1d1);export const priority=0xc47*-0x2+-0x26da+0x3f72;export const commands=[_0x185562(0x1ab),_0x185562(0x1cd)];let botInstance=null,respondedMsgIds=new Set(),_mediaDeps=null;async function getMediaDependencies(){const _0x507ac5=_0x185562;if(_mediaDeps)return _mediaDeps;try{const _0x49ec07=await import('@whiskeysockets/baileys'),_0x3ed433=await import('fluent-ffmpeg'),_0x459b41=_0x3ed433[_0x507ac5(0x1cb)],_0x23e282=(await import('@ffmpeg-installer/ffmpeg'))[_0x507ac5(0x185)],_0x4007da=(await import('fs'))[_0x507ac5(0x1a8)],_0x537b7b=(await import('os'))[_0x507ac5(0x1cb)],_0x33bab9=(await import('path'))[_0x507ac5(0x1cb)];return _0x459b41['setFfmpegP'+'ath'](_0x23e282),_mediaDeps={'downloadContentFromMessage':_0x49ec07[_0x507ac5(0x19d)+'ntentFromM'+_0x507ac5(0x1d8)],'ffmpeg':_0x459b41,'fs':_0x4007da,'os':_0x537b7b,'path':_0x33bab9},info('['+name+(_0x507ac5(0x187)+_0x507ac5(0x1e7)+_0x507ac5(0x1d4))),_mediaDeps;}catch(_0x25c3e2){error(_0x25c3e2,'['+name+(_0x507ac5(0x1da)+_0x507ac5(0x19a)+_0x507ac5(0x1ce)+_0x507ac5(0x1c0)));throw _0x25c3e2;}}async function streamToBuffer(_0xfd5614){const _0x19e44e=_0x185562,_0x5bb3b9=[];for await(const _0x1fe513 of _0xfd5614){_0x5bb3b9['push'](Buffer[_0x19e44e(0x1e3)](_0x1fe513)?_0x1fe513:Buffer['from'](_0x1fe513));}return Buffer['concat'](_0x5bb3b9);}const getQuotedMessage=_0x5e627c=>{const _0x6e92=_0x185562;return _0x5e627c[_0x6e92(0x1d3)]?.['extendedTe'+'xtMessage']?.['contextInf'+'o']?.['quotedMess'+_0x6e92(0x1db)]||_0x5e627c[_0x6e92(0x1e4)]||null;};async function findStoredMatchFromFindings(_0x2dbd40=[]){const _0x598092=_0x185562;try{const _0x5cf86d=await listSudo(),_0x3ccb04=new Set(_0x5cf86d[_0x598092(0x1b1)](String));for(const _0x1474f0 of _0x2dbd40){if(!_0x1474f0?.[_0x598092(0x1ed)]||typeof _0x1474f0[_0x598092(0x1ed)]!==_0x598092(0x190))continue;const _0x19787b=normalizeToJid(_0x1474f0[_0x598092(0x1ed)]);if(_0x19787b&&_0x3ccb04['has'](_0x19787b))return _0x19787b;if(_0x3ccb04[_0x598092(0x17f)](_0x1474f0['jid']))return _0x1474f0[_0x598092(0x1ed)];}return null;}catch(_0x4a814d){return warn('['+name+(_0x598092(0x195)+_0x598092(0x1ea)+_0x598092(0x196))+(_0x4a814d?.[_0x598092(0x1d3)]||_0x4a814d)),null;}}export async function initialize(_0x5e9079){const _0x204eec=_0x185562;botInstance=_0x5e9079,info('['+name+(_0x204eec(0x191)+_0x204eec(0x1bd)));}export async function cleanup(){const _0x23af04=_0x185562;botInstance=null,respondedMsgIds[_0x23af04(0x1f0)](),info('['+name+(_0x23af04(0x18d)+'up'));}export async function onMessage(_0x54e00f){const _0xadfc7a=_0x185562;try{if(!_0x54e00f?.[_0xadfc7a(0x17e)]||!_0x54e00f[_0xadfc7a(0x183)])return;const _0x466c99=_0x54e00f[_0xadfc7a(0x17e)]['id'];if(_0x466c99&&respondedMsgIds['has'](_0x466c99))return;_0x466c99&&(respondedMsgIds[_0xadfc7a(0x1f6)](_0x466c99),setTimeout(()=>respondedMsgIds[_0xadfc7a(0x18e)](_0x466c99),0xaea5*-0x1+-0x2*0x1e3b+0x1604b));const _0x30bef5=(_0x54e00f[_0xadfc7a(0x1a1)]||'')[_0xadfc7a(0x186)](),[_0x438d5e,..._0x130385]=_0x30bef5['split'](/\s+/),_0x57e650=_0x438d5e['toLowerCas'+'e']();if(!commands[_0xadfc7a(0x1e9)](_0x57e650))return;const _0xe10596=_0x54e00f[_0xadfc7a(0x1ec)]||_0x54e00f[_0xadfc7a(0x17e)][_0xadfc7a(0x1ec)]||'';if(_0xe10596[_0xadfc7a(0x1b9)](_0xadfc7a(0x1b6))){info('['+name+(']:\x20ignorin'+_0xadfc7a(0x1b7))+_0xe10596);return;}if(!botInstance){botInstance=_0x54e00f['bot']||_0x54e00f[_0xadfc7a(0x189)]||null;if(!botInstance){warn('['+name+(_0xadfc7a(0x1c4)+_0xadfc7a(0x1d6)+'g.'));return;}}const _0x31d462=getBotJid();let _0x400cd7=_0x31d462;if(!_0x54e00f[_0xadfc7a(0x17e)][_0xadfc7a(0x1d5)]){const _0x3e5588=await isSudo(botInstance,_0x54e00f)['catch'](()=>![]);if(!_0x3e5588)return;const {findings:_0x36a135}=userJidFromCtx(_0x54e00f),_0x4384d1=await findStoredMatchFromFindings(_0x36a135);if(!_0x4384d1)return;_0x400cd7=_0x4384d1;}switch(_0x57e650){case _0xadfc7a(0x1ab):await handleVideoToMp3(_0x400cd7,_0x130385[_0xadfc7a(0x1e5)]('\x20'),_0x54e00f);break;case _0xadfc7a(0x1cd):await handleCutMp3(_0x400cd7,_0x130385,_0x54e00f);break;}}catch(_0x2855f5){error(_0x2855f5,'['+name+(_0xadfc7a(0x1a7)+_0xadfc7a(0x1f7)));}}function _0x3390(){const _0x5f10ad=['promises','ply\x20to\x20a\x20','eply\x20to\x20a\x20','tomp3','üì•\x20Converti','to\x20MP3.','‚úÇÔ∏è\x20Cutting\x20','485778VyILES','error','map','tmpdir','ptt','108530zrYZnZ','ds>`\x0a','@g.us','g\x20group\x20','\x20note\x20to\x20c','endsWith','‚ÑπÔ∏è\x20Please\x20r','in_','replace','zed.','unlink','now','ncies','cut_','...','catch',']\x20botInsta','videoMessa','audioCodec','condsToRem','audio_','end','onvert\x20it\x20','default','format','cutmp3','ia\x20depende','ffprobe','.mp3','1.1.1','eply\x20to\x20an','message','\x20loaded.','fromMe','nce\x20missin','119DbivWV','essage','Make\x20sure\x20',']\x20failed\x20t','age','733578xfISPs','writeFile','12xhqLhk','59104NTWuBs','<endSecond','audioBitra','duration','isBuffer','quoted','join','ce\x20note.','pendencies','‚ùå\x20Failed\x20t','includes','edMatch\x20er','noVideo','remoteJid','jid','737EAdTRr','ove>`','clear','length','readFile','9866016dkYKdt','2627232aBiNIl','‚ÑπÔ∏è\x20Invalid\x20','add','e\x20error','audio','o\x20trim\x20the','audioMessa','key','has','ile\x20or\x20voi','on\x20failed:','ds>\x20<endSe','isCommand',']\x20tomp3\x20er','path','trim',']\x20media\x20de','\x20and\x20use:\x0a','client','\x20audio\x20fil','filter','ut\x20it.',']\x20cleaned\x20','delete','364lkavOl','string',']\x20initiali','d\x20to\x20a\x20val','voice\x20note','14530ueDNcv',']\x20findStor','ror:\x20','libmp3lame','audio/mpeg','s>`\x0a','o\x20load\x20med','sendMessag','e\x20or\x20voice','downloadCo','save','`.cutmp3\x20<','format.\x20Re','text','setDuratio','startSecon','‚ùå\x20Conversi',']\x20cutmp3\x20e','.ogg',']\x20onMessag'];_0x3390=function(){return _0x5f10ad;};return _0x3390();}async function handleVideoToMp3(_0x5baadf,_0x1cfe5a,_0x306a54){const _0x19338e=_0x185562,_0x1f67f3=getQuotedMessage(_0x306a54);if(!_0x1f67f3?.['videoMessa'+'ge'])return botInstance['sendMessag'+'e'](_0x5baadf,{'text':_0x19338e(0x1ba)+_0x19338e(0x1aa)+'video\x20to\x20c'+_0x19338e(0x1ca)+_0x19338e(0x1ad)},{'quoted':_0x306a54['ms']});const _0x8218af=(_0x1cfe5a||_0x19338e(0x1c8)+Date[_0x19338e(0x1bf)]())[_0x19338e(0x1bc)](/[^a-z0-9\s-]/gi,'')[_0x19338e(0x186)]()+_0x19338e(0x1d0);try{await botInstance['sendMessag'+'e'](_0x5baadf,{'text':_0x19338e(0x1ac)+'ng\x20video\x20t'+'o\x20MP3...'},{'quoted':_0x306a54['ms']});const {downloadContentFromMessage:_0x94cee0,ffmpeg:_0x426e50,fs:_0x1c3bd0,os:_0x5ac5f4,path:_0x1531b2}=await getMediaDependencies(),_0x2d610f=await _0x94cee0(_0x1f67f3[_0x19338e(0x1c5)+'ge'],'video'),_0x179818=await streamToBuffer(_0x2d610f),_0x465d05=_0x1531b2[_0x19338e(0x1e5)](_0x5ac5f4[_0x19338e(0x1b2)](),_0x19338e(0x1bb)+Date[_0x19338e(0x1bf)]()+'.mp4'),_0x53fbe4=_0x1531b2['join'](_0x5ac5f4[_0x19338e(0x1b2)](),_0x8218af);await _0x1c3bd0['writeFile'](_0x465d05,_0x179818),await new Promise((_0x5386b6,_0x4b2137)=>{const _0x3eefb0=_0x19338e;_0x426e50(_0x465d05)[_0x3eefb0(0x1eb)]()[_0x3eefb0(0x1c6)]('libmp3lame')[_0x3eefb0(0x1e1)+'te']('128k')[_0x3eefb0(0x19e)](_0x53fbe4)['on']('end',_0x5386b6)['on'](_0x3eefb0(0x1b0),_0xaa1001=>_0x4b2137(_0xaa1001));});const _0x35786d=await _0x1c3bd0['readFile'](_0x53fbe4);await botInstance[_0x19338e(0x19b)+'e'](_0x5baadf,{'audio':_0x35786d,'mimetype':_0x19338e(0x198),'fileName':_0x8218af},{'quoted':_0x306a54['ms']}),await _0x1c3bd0[_0x19338e(0x1be)](_0x465d05)['catch'](()=>{}),await _0x1c3bd0[_0x19338e(0x1be)](_0x53fbe4)[_0x19338e(0x1c3)](()=>{});}catch(_0x28c61f){error(_0x28c61f,'['+name+(_0x19338e(0x184)+'ror')),await botInstance['sendMessag'+'e'](_0x5baadf,{'text':_0x19338e(0x1a4)+_0x19338e(0x181)+'\x20'+_0x28c61f[_0x19338e(0x1d3)]},{'quoted':_0x306a54['ms']});}}async function handleCutMp3(_0x32cd96,_0x586c63,_0x54bad2){const _0x53b6a6=_0x185562,_0x53b244=getQuotedMessage(_0x54bad2);if(!_0x53b244?.[_0x53b6a6(0x17d)+'ge'])return botInstance['sendMessag'+'e'](_0x32cd96,{'text':_0x53b6a6(0x1ba)+_0x53b6a6(0x1d2)+_0x53b6a6(0x18a)+_0x53b6a6(0x19c)+_0x53b6a6(0x1b8)+_0x53b6a6(0x18c)},{'quoted':_0x54bad2['ms']});const _0x4cec84=_0x53b244['audioMessa'+'ge'][_0x53b6a6(0x1b3)]===!![],_0x326cc9=_0x4cec84?_0x53b6a6(0x193):_0x53b6a6(0x17b),_0x27e523=_0x586c63[_0x53b6a6(0x1b1)](_0x38cf28=>parseFloat(_0x38cf28))['filter'](_0x323180=>!isNaN(_0x323180)),_0x1f0b62=_0x586c63[_0x53b6a6(0x18b)](_0x33115c=>isNaN(parseFloat(_0x33115c)))['join']('\x20')['trim'](),_0xf69d94=(_0x1f0b62||_0x53b6a6(0x1c1)+Date[_0x53b6a6(0x1bf)]())[_0x53b6a6(0x1bc)](/[^a-z0-9\s-]/gi,'')[_0x53b6a6(0x186)]()+_0x53b6a6(0x1d0);if(_0x27e523['length']===-0xb8*-0x32+-0x23*-0xf3+0x5*-0xdd5||_0x27e523[_0x53b6a6(0x1f1)]>-0x1*0xbe1+-0x26+0x3*0x403)return botInstance[_0x53b6a6(0x19b)+'e'](_0x32cd96,{'text':_0x53b6a6(0x1f5)+_0x53b6a6(0x1a0)+_0x53b6a6(0x1a9)+_0x326cc9+_0x53b6a6(0x188)+(_0x53b6a6(0x19f)+_0x53b6a6(0x1a3)+_0x53b6a6(0x1b5))+('`.cutmp3\x20-'+_0x53b6a6(0x1e0)+_0x53b6a6(0x199))+('`.cutmp3\x20<'+_0x53b6a6(0x1a3)+_0x53b6a6(0x182)+_0x53b6a6(0x1c7)+_0x53b6a6(0x1ef))},{'quoted':_0x54bad2['ms']});try{await botInstance[_0x53b6a6(0x19b)+'e'](_0x32cd96,{'text':_0x53b6a6(0x1ae)+'your\x20'+_0x326cc9+_0x53b6a6(0x1c2)},{'quoted':_0x54bad2['ms']});const {downloadContentFromMessage:_0x374d1b,ffmpeg:_0x51405d,fs:_0x47380a,os:_0x17d17d,path:_0x4f8507}=await getMediaDependencies(),_0x19159f=await _0x374d1b(_0x53b244[_0x53b6a6(0x17d)+'ge'],_0x53b6a6(0x17b)),_0x453025=await streamToBuffer(_0x19159f),_0xea84c8=_0x4cec84?_0x53b6a6(0x1a6):_0x53b6a6(0x1d0),_0x26b22e=_0x4f8507[_0x53b6a6(0x1e5)](_0x17d17d['tmpdir'](),_0x53b6a6(0x1bb)+Date[_0x53b6a6(0x1bf)]()+_0xea84c8),_0x3c57ff=_0x4f8507[_0x53b6a6(0x1e5)](_0x17d17d[_0x53b6a6(0x1b2)](),_0xf69d94);await _0x47380a[_0x53b6a6(0x1dd)](_0x26b22e,_0x453025);let _0x36bf6c=-0xe53+0x9*-0x232+-0x19*-0x15d;await new Promise((_0x299953,_0x9d10c9)=>{const _0x3d1385=_0x53b6a6;_0x51405d[_0x3d1385(0x1cf)](_0x26b22e,(_0x1e891b,_0x462e28)=>{const _0x5af17e=_0x3d1385;if(_0x1e891b)return _0x9d10c9(_0x1e891b);_0x36bf6c=_0x462e28[_0x5af17e(0x1cc)][_0x5af17e(0x1e2)],_0x299953();});});const _0x45ef29=_0x51405d(_0x26b22e)['noVideo']();if(_0x27e523[_0x53b6a6(0x1f1)]===0x123+-0x1194+0x1072){const _0x7aa622=_0x27e523[-0x7f*0x14+-0x1b70*-0x1+0x26*-0x76];if(_0x7aa622>0x8*-0x176+0x2*0xef7+-0x3a6*0x5)_0x45ef29['setStartTi'+'me'](_0x7aa622);else _0x45ef29[_0x53b6a6(0x1a2)+'n'](_0x36bf6c+_0x7aa622);}else{const [_0x2bf96b,_0x23acd4]=_0x27e523,_0x2812e0=_0x36bf6c-_0x23acd4;_0x45ef29['setStartTi'+'me'](_0x2bf96b)[_0x53b6a6(0x1a2)+'n'](_0x2812e0-_0x2bf96b);}await new Promise((_0x6ac334,_0x3c4e3a)=>{const _0x2c2122=_0x53b6a6;_0x45ef29[_0x2c2122(0x1c6)](_0x2c2122(0x197))[_0x2c2122(0x1e1)+'te']('128k')[_0x2c2122(0x19e)](_0x3c57ff)['on'](_0x2c2122(0x1c9),_0x6ac334)['on'](_0x2c2122(0x1b0),_0x59dd85=>_0x3c4e3a(_0x59dd85));});const _0x5add56=await _0x47380a[_0x53b6a6(0x1f2)](_0x3c57ff);await botInstance[_0x53b6a6(0x19b)+'e'](_0x32cd96,{'audio':_0x5add56,'mimetype':_0x53b6a6(0x198),'fileName':_0xf69d94},{'quoted':_0x54bad2['ms']}),await _0x47380a['unlink'](_0x26b22e)[_0x53b6a6(0x1c3)](()=>{}),await _0x47380a[_0x53b6a6(0x1be)](_0x3c57ff)[_0x53b6a6(0x1c3)](()=>{});}catch(_0x39a387){error(_0x39a387,'['+name+(_0x53b6a6(0x1a5)+'rror')),await botInstance[_0x53b6a6(0x19b)+'e'](_0x32cd96,{'text':_0x53b6a6(0x1e8)+_0x53b6a6(0x17c)+'\x20'+_0x326cc9+':\x20'+_0x39a387[_0x53b6a6(0x1d3)]+'\x0a'+(_0x53b6a6(0x1d9)+'you\x20replie'+_0x53b6a6(0x192)+'id\x20audio\x20f'+_0x53b6a6(0x180)+_0x53b6a6(0x1e6))},{'quoted':_0x54bad2['ms']});}}