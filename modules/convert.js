const _0x2139b1=_0x52e8;(function(_0x37ec14,_0x134aaa){const _0x2f9c00=_0x52e8,_0x1d9eed=_0x37ec14();while(!![]){try{const _0x1f96e0=parseInt(_0x2f9c00(0x21b))/(-0x83f*-0x2+0x1da3+-0x2e20)*(parseInt(_0x2f9c00(0x215))/(0x985*0x3+-0x9*-0x16a+-0x2947))+-parseInt(_0x2f9c00(0x211))/(-0x2353*-0x1+0x14*0x42+-0x1*0x2878)*(parseInt(_0x2f9c00(0x1d9))/(-0x1c55+-0xe3d+0x2a96))+parseInt(_0x2f9c00(0x1dc))/(0xae8+0x1090+-0x1b73*0x1)+-parseInt(_0x2f9c00(0x243))/(0x8f9+-0x1cc9+-0x2*-0x9eb)+-parseInt(_0x2f9c00(0x1fd))/(-0x48e*-0x2+0xcfb+0x2c2*-0x8)*(parseInt(_0x2f9c00(0x226))/(0x21a5+0x1*0x1fe3+0x20c0*-0x2))+-parseInt(_0x2f9c00(0x1ec))/(0x1*0x1cd3+0x13a6+-0x3070)*(-parseInt(_0x2f9c00(0x213))/(0x5*-0x45b+-0xb97+0x2168))+-parseInt(_0x2f9c00(0x1d4))/(-0x1*0x284+-0x1ab+-0x43a*-0x1)*(parseInt(_0x2f9c00(0x1ea))/(-0x366+0x6*0xa2+-0x5a*0x1));if(_0x1f96e0===_0x134aaa)break;else _0x1d9eed['push'](_0x1d9eed['shift']());}catch(_0x407968){_0x1d9eed['push'](_0x1d9eed['shift']());}}}(_0x2cb6,0x159868+-0x16ee0f+0x1a*0x93cf));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';function _0x52e8(_0xca8ecb,_0x1557ef){const _0x47a733=_0x2cb6();return _0x52e8=function(_0xfca9d,_0x43eb73){_0xfca9d=_0xfca9d-(0xc9b+-0x33*-0xb3+-0x6a3*0x7);let _0x4fbdda=_0x47a733[_0xfca9d];return _0x4fbdda;},_0x52e8(_0xca8ecb,_0x1557ef);}function _0x2cb6(){const _0x503224=['ia\x20depende','from','save','in_','bot','g\x20group\x20','‚ùå\x20Failed\x20t','\x20and\x20use:\x0a','‚ÑπÔ∏è\x20Invalid\x20','9tnoliK',']\x20botInsta','10fypMmN','`.cutmp3\x20-','6kGQoYq','endsWith','length','\x20loaded.','rror','...','245149WpFRUu','sendMessag','ror','xtMessage','audio_',']\x20tomp3\x20er','catch','message','join','e\x20error','add','4856YbrGSH','trim','jid','ror:\x20','end','path','duration','.mp4','onvert\x20it\x20','quoted','has','writeFile','audioCodec','ply\x20to\x20a\x20','libmp3lame','d\x20to\x20a\x20val','@g.us','cutmp3',']\x20initiali','setStartTi','voice\x20note','downloadCo',']\x20findStor','eply\x20to\x20a\x20','cut_','<endSecond','128k','replace','readFile','728982kreble','includes','key',']\x20cutmp3\x20e','unlink','default','.mp3','s>`\x0a','age','audioBitra',']:\x20ignorin','1122AabqVJ','push','clear','quotedMess','concat','1921352QmZCJN','tomp3','format.\x20Re','4944765zQzUJi','fromMe','zed.','now','tmpdir','\x20note\x20to\x20c','condsToRem','.ogg','promises','map','audioMessa','setDuratio','video\x20to\x20c','error','71232nDxAgQ','noVideo','12228759IIuTRn','mediaconve','isCommand','filter',']\x20failed\x20t','pendencies','videoMessa','string','edMatch\x20er','`.cutmp3\x20<','audio','text','startSecon','format','audio/mpeg','isBuffer','toLowerCas','217IXpQJw','üì•\x20Converti','ds>\x20<endSe','ntentFromM','contextInf','ncies','extendedTe','ce\x20note.','remoteJid','e\x20or\x20voice','your\x20'];_0x2cb6=function(){return _0x503224;};return _0x2cb6();}export const name=_0x2139b1(0x1ed)+'rt';export const version='1.1.1';export const priority=0x2643*-0x1+0x1093+-0x1b*-0xce;export const commands=[_0x2139b1(0x1da),_0x2139b1(0x237)];let botInstance=null,respondedMsgIds=new Set(),_mediaDeps=null;async function getMediaDependencies(){const _0x35ca78=_0x2139b1;if(_mediaDeps)return _mediaDeps;try{const _0x34fc01=await import('@whiskeysockets/baileys'),_0x52e907=await import('fluent-ffmpeg'),_0x13c2f5=_0x52e907[_0x35ca78(0x248)],_0x4b3018=(await import('@ffmpeg-installer/ffmpeg'))[_0x35ca78(0x22b)],_0x3fdc27=(await import('fs'))[_0x35ca78(0x1e4)],_0x317fe1=(await import('os'))[_0x35ca78(0x248)],_0x73440=(await import('path'))['default'];return _0x13c2f5['setFfmpegP'+'ath'](_0x4b3018),_mediaDeps={'downloadContentFromMessage':_0x34fc01[_0x35ca78(0x23b)+_0x35ca78(0x200)+'essage'],'ffmpeg':_0x13c2f5,'fs':_0x3fdc27,'os':_0x317fe1,'path':_0x73440},info('['+name+(']\x20media\x20de'+_0x35ca78(0x1f1)+_0x35ca78(0x218))),_mediaDeps;}catch(_0x574450){error(_0x574450,'['+name+(_0x35ca78(0x1f0)+'o\x20load\x20med'+_0x35ca78(0x208)+_0x35ca78(0x202)));throw _0x574450;}}async function streamToBuffer(_0x50bfaa){const _0x2a592a=_0x2139b1,_0x27b455=[];for await(const _0x302293 of _0x50bfaa){_0x27b455[_0x2a592a(0x1d5)](Buffer[_0x2a592a(0x1fb)](_0x302293)?_0x302293:Buffer[_0x2a592a(0x209)](_0x302293));}return Buffer[_0x2a592a(0x1d8)](_0x27b455);}const getQuotedMessage=_0x1a45ea=>{const _0x1411fa=_0x2139b1;return _0x1a45ea[_0x1411fa(0x222)]?.[_0x1411fa(0x203)+_0x1411fa(0x21e)]?.[_0x1411fa(0x201)+'o']?.[_0x1411fa(0x1d7)+_0x1411fa(0x1d1)]||_0x1a45ea[_0x1411fa(0x22f)]||null;};async function findStoredMatchFromFindings(_0x31cf17=[]){const _0x4fddba=_0x2139b1;try{const _0x37c49d=await listSudo(),_0x59076e=new Set(_0x37c49d['map'](String));for(const _0x5f4b0b of _0x31cf17){if(!_0x5f4b0b?.[_0x4fddba(0x228)]||typeof _0x5f4b0b[_0x4fddba(0x228)]!==_0x4fddba(0x1f3))continue;const _0x325c7f=normalizeToJid(_0x5f4b0b[_0x4fddba(0x228)]);if(_0x325c7f&&_0x59076e[_0x4fddba(0x230)](_0x325c7f))return _0x325c7f;if(_0x59076e[_0x4fddba(0x230)](_0x5f4b0b[_0x4fddba(0x228)]))return _0x5f4b0b['jid'];}return null;}catch(_0x5c3e3a){return warn('['+name+(_0x4fddba(0x23c)+_0x4fddba(0x1f4)+_0x4fddba(0x229))+(_0x5c3e3a?.['message']||_0x5c3e3a)),null;}}export async function initialize(_0x18f125){const _0x20bfca=_0x2139b1;botInstance=_0x18f125,info('['+name+(_0x20bfca(0x238)+_0x20bfca(0x1de)));}export async function cleanup(){const _0x45ccf3=_0x2139b1;botInstance=null,respondedMsgIds[_0x45ccf3(0x1d6)](),info('['+name+(']\x20cleaned\x20'+'up'));}export async function onMessage(_0x3467c3){const _0x1d7210=_0x2139b1;try{if(!_0x3467c3?.[_0x1d7210(0x245)]||!_0x3467c3[_0x1d7210(0x1ee)])return;const _0x32cab0=_0x3467c3[_0x1d7210(0x245)]['id'];if(_0x32cab0&&respondedMsgIds['has'](_0x32cab0))return;_0x32cab0&&(respondedMsgIds[_0x1d7210(0x225)](_0x32cab0),setTimeout(()=>respondedMsgIds['delete'](_0x32cab0),0x277*0xb+-0x195*0x47+0x1*0xca66));const _0x330e64=(_0x3467c3[_0x1d7210(0x1f7)]||'')[_0x1d7210(0x227)](),[_0x2cff07,..._0x903036]=_0x330e64['split'](/\s+/),_0x5bebbc=_0x2cff07[_0x1d7210(0x1fc)+'e']();if(!commands[_0x1d7210(0x244)](_0x5bebbc))return;const _0x36a86d=_0x3467c3[_0x1d7210(0x205)]||_0x3467c3[_0x1d7210(0x245)][_0x1d7210(0x205)]||'';if(_0x36a86d[_0x1d7210(0x216)](_0x1d7210(0x236))){info('['+name+(_0x1d7210(0x1d3)+_0x1d7210(0x20d))+_0x36a86d);return;}if(!botInstance){botInstance=_0x3467c3[_0x1d7210(0x20c)]||_0x3467c3['client']||null;if(!botInstance){warn('['+name+(_0x1d7210(0x212)+'nce\x20missin'+'g.'));return;}}const _0x153e58=getBotJid();let _0x2342ee=_0x153e58;if(!_0x3467c3[_0x1d7210(0x245)][_0x1d7210(0x1dd)]){const _0x5ab6ec=await isSudo(botInstance,_0x3467c3)[_0x1d7210(0x221)](()=>![]);if(!_0x5ab6ec)return;const {findings:_0x24afd8}=userJidFromCtx(_0x3467c3),_0x2d1bd6=await findStoredMatchFromFindings(_0x24afd8);if(!_0x2d1bd6)return;_0x2342ee=_0x2d1bd6;}switch(_0x5bebbc){case _0x1d7210(0x1da):await handleVideoToMp3(_0x2342ee,_0x903036[_0x1d7210(0x223)]('\x20'),_0x3467c3);break;case _0x1d7210(0x237):await handleCutMp3(_0x2342ee,_0x903036,_0x3467c3);break;}}catch(_0x29a070){error(_0x29a070,'['+name+(']\x20onMessag'+_0x1d7210(0x224)));}}async function handleVideoToMp3(_0x575f88,_0x5545a3,_0x329725){const _0x5c425f=_0x2139b1,_0x34dca1=getQuotedMessage(_0x329725);if(!_0x34dca1?.[_0x5c425f(0x1f2)+'ge'])return botInstance[_0x5c425f(0x21c)+'e'](_0x575f88,{'text':'‚ÑπÔ∏è\x20Please\x20r'+_0x5c425f(0x23d)+_0x5c425f(0x1e8)+_0x5c425f(0x22e)+'to\x20MP3.'},{'quoted':_0x329725['ms']});const _0x49619a=(_0x5545a3||_0x5c425f(0x21f)+Date[_0x5c425f(0x1df)]())[_0x5c425f(0x241)](/[^a-z0-9\s-]/gi,'')['trim']()+_0x5c425f(0x1cf);try{await botInstance['sendMessag'+'e'](_0x575f88,{'text':_0x5c425f(0x1fe)+'ng\x20video\x20t'+'o\x20MP3...'},{'quoted':_0x329725['ms']});const {downloadContentFromMessage:_0x13d303,ffmpeg:_0x84a84d,fs:_0x4310fb,os:_0x484bc2,path:_0x309895}=await getMediaDependencies(),_0x299971=await _0x13d303(_0x34dca1[_0x5c425f(0x1f2)+'ge'],'video'),_0x51234e=await streamToBuffer(_0x299971),_0x3ddcd4=_0x309895['join'](_0x484bc2['tmpdir'](),_0x5c425f(0x20b)+Date[_0x5c425f(0x1df)]()+_0x5c425f(0x22d)),_0x5e4043=_0x309895[_0x5c425f(0x223)](_0x484bc2['tmpdir'](),_0x49619a);await _0x4310fb[_0x5c425f(0x231)](_0x3ddcd4,_0x51234e),await new Promise((_0x4c3b6a,_0x318567)=>{const _0x1c67e8=_0x5c425f;_0x84a84d(_0x3ddcd4)[_0x1c67e8(0x1eb)]()[_0x1c67e8(0x232)](_0x1c67e8(0x234))[_0x1c67e8(0x1d2)+'te'](_0x1c67e8(0x240))[_0x1c67e8(0x20a)](_0x5e4043)['on'](_0x1c67e8(0x22a),_0x4c3b6a)['on'](_0x1c67e8(0x1e9),_0x2213ea=>_0x318567(_0x2213ea));});const _0x5aafaa=await _0x4310fb[_0x5c425f(0x242)](_0x5e4043);await botInstance['sendMessag'+'e'](_0x575f88,{'audio':_0x5aafaa,'mimetype':_0x5c425f(0x1fa),'fileName':_0x49619a},{'quoted':_0x329725['ms']}),await _0x4310fb['unlink'](_0x3ddcd4)[_0x5c425f(0x221)](()=>{}),await _0x4310fb[_0x5c425f(0x247)](_0x5e4043)['catch'](()=>{});}catch(_0x540370){error(_0x540370,'['+name+(_0x5c425f(0x220)+_0x5c425f(0x21d))),await botInstance[_0x5c425f(0x21c)+'e'](_0x575f88,{'text':'‚ùå\x20Conversi'+'on\x20failed:'+'\x20'+_0x540370[_0x5c425f(0x222)]},{'quoted':_0x329725['ms']});}}async function handleCutMp3(_0x48f93b,_0x4f58fc,_0x3b293a){const _0x417228=_0x2139b1,_0x3cb3e3=getQuotedMessage(_0x3b293a);if(!_0x3cb3e3?.[_0x417228(0x1e6)+'ge'])return botInstance['sendMessag'+'e'](_0x48f93b,{'text':'‚ÑπÔ∏è\x20Please\x20r'+'eply\x20to\x20an'+'\x20audio\x20fil'+_0x417228(0x206)+_0x417228(0x1e1)+'ut\x20it.'},{'quoted':_0x3b293a['ms']});const _0x47aa6e=_0x3cb3e3[_0x417228(0x1e6)+'ge']['ptt']===!![],_0xad315c=_0x47aa6e?_0x417228(0x23a):_0x417228(0x1f6),_0x15e1a7=_0x4f58fc[_0x417228(0x1e5)](_0xb78c05=>parseFloat(_0xb78c05))[_0x417228(0x1ef)](_0x2b51d7=>!isNaN(_0x2b51d7)),_0x39841b=_0x4f58fc['filter'](_0x4a8623=>isNaN(parseFloat(_0x4a8623)))[_0x417228(0x223)]('\x20')[_0x417228(0x227)](),_0x3602e8=(_0x39841b||_0x417228(0x23e)+Date['now']())['replace'](/[^a-z0-9\s-]/gi,'')['trim']()+'.mp3';if(_0x15e1a7[_0x417228(0x217)]===0xab7+0x267b+-0x3132||_0x15e1a7[_0x417228(0x217)]>-0x1b83*0x1+-0x1*-0x16e1+0x36*0x16)return botInstance[_0x417228(0x21c)+'e'](_0x48f93b,{'text':_0x417228(0x210)+_0x417228(0x1db)+_0x417228(0x233)+_0xad315c+_0x417228(0x20f)+('`.cutmp3\x20<'+_0x417228(0x1f8)+'ds>`\x0a')+(_0x417228(0x214)+_0x417228(0x23f)+_0x417228(0x1d0))+(_0x417228(0x1f5)+_0x417228(0x1f8)+_0x417228(0x1ff)+_0x417228(0x1e2)+'ove>`')},{'quoted':_0x3b293a['ms']});try{await botInstance['sendMessag'+'e'](_0x48f93b,{'text':'‚úÇÔ∏è\x20Cutting\x20'+_0x417228(0x207)+_0xad315c+_0x417228(0x21a)},{'quoted':_0x3b293a['ms']});const {downloadContentFromMessage:_0x39d290,ffmpeg:_0x4c7266,fs:_0x9fcaee,os:_0x4e75fe,path:_0x183a1c}=await getMediaDependencies(),_0x49c591=await _0x39d290(_0x3cb3e3['audioMessa'+'ge'],'audio'),_0x2f0970=await streamToBuffer(_0x49c591),_0xf959ee=_0x47aa6e?_0x417228(0x1e3):'.mp3',_0x134be5=_0x183a1c[_0x417228(0x223)](_0x4e75fe[_0x417228(0x1e0)](),_0x417228(0x20b)+Date[_0x417228(0x1df)]()+_0xf959ee),_0x23673a=_0x183a1c['join'](_0x4e75fe['tmpdir'](),_0x3602e8);await _0x9fcaee[_0x417228(0x231)](_0x134be5,_0x2f0970);let _0x4a76fc=0x1837+0x179e*-0x1+-0x9*0x11;await new Promise((_0x2352a5,_0x503091)=>{_0x4c7266['ffprobe'](_0x134be5,(_0x2393f1,_0xd4f6a9)=>{const _0x4fa2e8=_0x52e8;if(_0x2393f1)return _0x503091(_0x2393f1);_0x4a76fc=_0xd4f6a9[_0x4fa2e8(0x1f9)][_0x4fa2e8(0x22c)],_0x2352a5();});});const _0x15c682=_0x4c7266(_0x134be5)[_0x417228(0x1eb)]();if(_0x15e1a7[_0x417228(0x217)]===-0x13c7*0x1+0x137*-0x1+0x1*0x14ff){const _0x3eb5a2=_0x15e1a7[0x204f+-0x1002+0x56f*-0x3];if(_0x3eb5a2>-0x179e+-0x979+-0xc5*-0x2b)_0x15c682['setStartTi'+'me'](_0x3eb5a2);else _0x15c682['setDuratio'+'n'](_0x4a76fc+_0x3eb5a2);}else{const [_0x272983,_0x5b9c0b]=_0x15e1a7,_0x173113=_0x4a76fc-_0x5b9c0b;_0x15c682[_0x417228(0x239)+'me'](_0x272983)[_0x417228(0x1e7)+'n'](_0x173113-_0x272983);}await new Promise((_0x8d612c,_0x480a39)=>{const _0x1a83b7=_0x417228;_0x15c682['audioCodec'](_0x1a83b7(0x234))[_0x1a83b7(0x1d2)+'te'](_0x1a83b7(0x240))[_0x1a83b7(0x20a)](_0x23673a)['on'](_0x1a83b7(0x22a),_0x8d612c)['on']('error',_0x3f47bd=>_0x480a39(_0x3f47bd));});const _0x42ed2f=await _0x9fcaee[_0x417228(0x242)](_0x23673a);await botInstance[_0x417228(0x21c)+'e'](_0x48f93b,{'audio':_0x42ed2f,'mimetype':_0x417228(0x1fa),'fileName':_0x3602e8},{'quoted':_0x3b293a['ms']}),await _0x9fcaee[_0x417228(0x247)](_0x134be5)['catch'](()=>{}),await _0x9fcaee[_0x417228(0x247)](_0x23673a)[_0x417228(0x221)](()=>{});}catch(_0x49caab){error(_0x49caab,'['+name+(_0x417228(0x246)+_0x417228(0x219))),await botInstance['sendMessag'+'e'](_0x48f93b,{'text':_0x417228(0x20e)+'o\x20trim\x20the'+'\x20'+_0xad315c+':\x20'+_0x49caab['message']+'\x0a'+('Make\x20sure\x20'+'you\x20replie'+_0x417228(0x235)+'id\x20audio\x20f'+'ile\x20or\x20voi'+_0x417228(0x204))},{'quoted':_0x3b293a['ms']});}}