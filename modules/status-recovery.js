const _0x80f082=_0x3943;(function(_0x4efe75,_0x519550){const _0xf139d2=_0x3943,_0x2a6331=_0x4efe75();while(!![]){try{const _0x513a97=-parseInt(_0xf139d2(0x240))/(0x42*0x9+0x382+0x47*-0x15)*(parseInt(_0xf139d2(0x1b1))/(0x636+0xb*0x257+-0x1ff1))+parseInt(_0xf139d2(0x1c7))/(-0x4f*0x1f+-0x24a9+0x1*0x2e3d)+-parseInt(_0xf139d2(0x1c4))/(-0x1285*0x1+0x902*-0x2+0x248d)+parseInt(_0xf139d2(0x219))/(-0x704+0x6b*-0x2f+0x1aae)*(parseInt(_0xf139d2(0x1bf))/(-0x333+0x22f*-0x8+0x14b1*0x1))+parseInt(_0xf139d2(0x13a))/(0x23be+0x1337+-0x1*0x36ee)*(-parseInt(_0xf139d2(0x1c2))/(0x1f79+-0x99*0x25+-0x954))+-parseInt(_0xf139d2(0x24b))/(-0x115e+-0x1*-0x12cf+-0x168)*(parseInt(_0xf139d2(0x144))/(0x178a+-0x1*0xa43+-0x1*0xd3d))+-parseInt(_0xf139d2(0x125))/(-0x943*-0x2+0x824+-0x5*0x553)*(-parseInt(_0xf139d2(0x159))/(-0x11e3+-0x2*0x69d+0x1f29));if(_0x513a97===_0x519550)break;else _0x2a6331['push'](_0x2a6331['shift']());}catch(_0x275d35){_0x2a6331['push'](_0x2a6331['shift']());}}}(_0x1a41,-0xa408f*0x1+-0x12b*-0x151+0x22d*0x75b));import _0x3d99d8 from'fs';import _0x59d514 from'path';import{mkdirSync}from'fs';import{rm as _0x58793f}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name=_0x80f082(0x136)+_0x80f082(0x21f);export const version=_0x80f082(0x1b2);export const priority=0x4*0x2ae+-0xc09+0x1bf;export const commands=[_0x80f082(0x1d7)+_0x80f082(0x182)];export const configKeys=[_0x80f082(0x1d0)+'OT',_0x80f082(0x14d)+_0x80f082(0x196),_0x80f082(0x14d)+_0x80f082(0x140)+_0x80f082(0x218)+'AL_MS',_0x80f082(0x14d)+_0x80f082(0x1dc)+_0x80f082(0x23a),'STATUS_REC'+_0x80f082(0x1cb)+'ONDED_LIMI'+'T',_0x80f082(0x14d)+_0x80f082(0x1cb)+_0x80f082(0x170)+_0x80f082(0x165),_0x80f082(0x14d)+_0x80f082(0x19e)+_0x80f082(0x1f1)+_0x80f082(0x14b)];let CFG={};try{CFG=typeof getConfig===_0x80f082(0x1aa)?getConfig()||{}:{};}catch(_0xc0f231){warn('['+name+(_0x80f082(0x207)+_0x80f082(0x250)+'\x20')+(_0xc0f231?.[_0x80f082(0x217)]||_0xc0f231)+('.\x20Falling\x20'+_0x80f082(0x19c)+_0x80f082(0x1e1))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x59d514[_0x80f082(0x22a)](_0x80f082(0x113),_0x80f082(0x221)),'CLEANUP_INTERVAL_MS':(-0xfa*-0x26+0x9f3+-0x2ef7)*(-0x1ac+0xd34+0x3c4*-0x3)*(0x1*0x1393+-0x1dcb*0x1+-0x29d*-0x4)*(-0x11*-0x156+0x1*-0x1e0a+0x1*0xb3c),'KEEP_SECONDS':(0x46*0x84+-0x2243+0x59*-0x5)*(0x485+0x3b*-0x5+0x191*-0x2)*(0x2*-0x1367+-0x15*0x5f+0x2ed5),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(-0xa*0x19e+0x1d4+0xe62)*(0x23e8+-0xc6f+-0x1379)*(-0x3*-0x493+0x1*0xbe9+0x3*-0x736)};function _0x1a41(){const _0x72ef5f=['no\x20resend)','ES\x20(?,\x20?,\x20','n)\x0a\x20\x20\x20\x20\x20\x20\x20','enabled','✔️\x20antidele','tus\x20','saved\x20stat','SELECT\x20val',']\x20recovere','messages.u',']\x20deleteIt','\x20status','from','message_js','ed.updated','overy_pref','DELETE\x20FRO','ROM\x20','extendedTe','@g.us','psert','floor','\x20failed\x20fo','essage','catch','writeFile','\x20file_path','ON\x20CONFLIC','?)\x0a\x20\x20\x20\x20\x20\x20\x20','\x0aSaved\x20fil','created_at','OVERY_DIR','ER\x20DEFAULT','add','LE\x20IF\x20NOT\x20','ULT\x200,\x0a\x20\x20\x20','sing\x20for\x20','back\x20to\x20de','status@bro','OVERY_MAX_','set\x20to\x20','s(es)','?,\x20?,\x20?,\x20?','default','tus','Recovered\x20','pushName','endsWith','OVERY','\x20available','ULT\x200\x0a\x20\x20\x20\x20','function','SELECT\x20*\x20F','\x20FROM\x20','d_at\x20INTEG','iled:\x20','xtMessage','CLEANUP_IN','268474aXgyzX','2.3.2','contextInf',']\x20stub\x20rev','\x20failed:\x20','\x20error\x20for',']\x20upload\x20a','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','AsBuffer\x20f','e:\x20getBotJ','o\x20import\x20B','revoke',']\x20failed\x20t','extname','6906yOOoAF','audioMessa','\x20removed\x20(','120808ebtEAR',']\x20quoted\x20d','1896124XMNifd','audio/','\x20\x20\x20display','2182176soisys','d,\x20partici','essage_jso','promises','OVERY_RESP','\x20->\x20sent','caption','\x20(key,\x20val','image','PROJECT_RO','bParameter','\x20expired\x20s','stopManage','MAX_DOWNLO',':\x20no\x20sendM','\x20);','antidelete','TEGER\x20DEFA','_at=exclud','mime\x20TEXT,',']\x20raw\x20per-','OVERY_KEEP','message\x20er','ONDED_LIMI','imageMessa',':\x20file\x20mis','faults.','ttempt\x20fai','file_path','messageStu','startsWith','display_na','stickerMes','ailed\x20for\x20','pant,\x20disp','rticipant\x20','push','ires_at\x20<=','isBuffer','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','age',']\x20readFile','DOWNLOAD_B',']\x20onMessag','fromMe','ed\x20for\x20','aved\x20statu','downloadCo','_name\x20TEXT','image/','es\x20dir:\x20','taDir\x20erro','o\x20send\x20rec','DATA_SUBPA','emById\x20fai',']\x20download','us\x20','true','overed\x20sta',']\x20handlePo','id()\x20empty','conversati','key\x20TEXT\x20P','size',']\x20getConfi','send','get','\x20bytes)','sock','ed_at,\x20exp','now',',\x20?)','video/','OFF','atus\x20',']\x20DB\x20saved','LIMIT','ires_at,\x20m','id\x20TEXT\x20PR','KEEP_SECON','message','NUP_INTERV','2505eyIFrd',']\x20deletion','DEFAULT\x200,','\x20after\x20suc','essage\x20not','messages','overy','key','status',']\x20fetchIte','stringify','eply','\x20value=exc','\x0a\x20\x20\x20\x20\x20\x20\x20(i','tmp','participan','_path,\x20msg','join','atusUpload','has','split','readdirSyn','ound','\x0a\x20\x20\x20\x20\x20\x20\x20me','document',']\x20setPref\x20','messageTim','.webp','filter','clear','T(key)\x20DO\x20','ed\x20file\x20fo','\x200,\x0a\x20\x20\x20\x20\x20\x20','_SECONDS','string','statSync',']\x20no\x20paylo','Message','h\x20file_pat','1BFlnhI','INSERT\x20INT','\x20->\x20','❌\x20Failed\x20t','ed:\x20','lay_name,\x20','IN\x20(','RESPONDED_','object','adcast','\x20handle\x20fa','9cAUEMK','.jpg','veredToBot','\x20WHERE\x20exp','estamp','g()\x20threw:',']\x20removed\x20','all','slice','msg_ts','d\x20deleted\x20','t\x20INTEGER\x20','te\x20status:','\x20expires_a','led:\x20','value','documentMe','instance','ntentFromM','show','d_at)\x20VALU','CREATE\x20TAB','d()\x20return','\x20msg_ts\x20IN','data','renameSync','ULT\x20\x27\x27\x0a\x20\x20\x20','delete\x20sta','audio','.mp3','alue\x20TEXT\x20','ARN','text','remoteJid','map',']\x20ensureDa','NOT\x20NULL,\x0a','rmdirSync','mentionedJ','mById\x20fail','cessful\x20re','eletion\x20fo','154gxEozF','ired\x20error','sendMessag','.pdf','includes','SELECT\x20id,','trim','\x20CLEANUP_M','\x20WHERE\x20key','sage','\x20error:\x20','isDirector','\x0a\x20\x20\x20\x20\x20\x20\x20pa','toUpperCas','bType','ilable','video','status_rec',']\x20expired\x20','overy.init','ssage','217cjqZXK','cwd',']\x20sweepExp',']\x20getPref\x20','\x20-\x20','existsSync','OVERY_CLEA',']\x20sent\x20sav','\x0a\x20\x20\x20\x20\x20\x20\x20fi','\x20but\x20no\x20sa','4973970hcvKVv','\x20entry\x20for','essage\x20ava','path)',',\x20cannot\x20r',']\x20sendReco','status\x20','YTES_WARN','TEXT,\x0a\x20\x20\x20\x20','STATUS_REC','ved\x20copy\x20f','\x20\x20);','TERVAL_MS','ad\x20maker\x20f','EXISTS\x20','\x20returned\x20','\x20is\x20large:','concat','luded.valu','AD_BYTES_W','.ogg','640680wkOcWQ','XT,\x0a\x20\x20\x20\x20\x20\x20','length','VALUES\x20(?,','SELECT\x20fil','protocolMe','tion\x20error','.mp4','te\x20status\x20','\x20bytes','exec',']\x20handleSt','_KEEP','r\x20status\x20','resolve','ssage_json','\x20WHERE\x20id\x20','expires_at','TRIM_KEEP','isArray','\x20=\x20?','\x20(no\x20file_','=\x20?','ONDED_TRIM','videoMessa','failed:\x20','toLowerCas','run','\x20\x20\x20\x20\x20\x20\x20upd','isAbsolute'];_0x1a41=function(){return _0x72ef5f;};return _0x1a41();}function toPositiveInt(_0x1abcca,_0x16eb44){const _0x241e56=_0x80f082,_0x4ca737=Number(_0x1abcca);if(!Number['isFinite'](_0x4ca737)||_0x4ca737<=0x17f7+-0x3bc+0x143b*-0x1)return _0x16eb44;return Math[_0x241e56(0x18c)](_0x4ca737);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x80f082(0x14d)+_0x80f082(0x196)]===_0x80f082(0x23b)&&CFG[_0x80f082(0x14d)+_0x80f082(0x196)][_0x80f082(0x12b)]()?CFG[_0x80f082(0x14d)+_0x80f082(0x196)]:FALLBACKS['DATA_SUBPA'+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG['STATUS_REC'+_0x80f082(0x140)+_0x80f082(0x218)+'AL_MS']??(CFG[_0x80f082(0x14d)+_0x80f082(0x1a7)]&&CFG[_0x80f082(0x14d)+_0x80f082(0x1a7)][_0x80f082(0x1b0)+'TERVAL_MS']),FALLBACKS[_0x80f082(0x1b0)+_0x80f082(0x150)]),'KEEP_SECONDS':toPositiveInt(CFG['STATUS_REC'+_0x80f082(0x1dc)+_0x80f082(0x23a)]??(CFG[_0x80f082(0x14d)+_0x80f082(0x1a7)]&&CFG[_0x80f082(0x14d)+_0x80f082(0x1a7)][_0x80f082(0x216)+'DS']),FALLBACKS['KEEP_SECON'+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x80f082(0x14d)+'OVERY_RESP'+_0x80f082(0x1de)+'T']??(CFG[_0x80f082(0x14d)+_0x80f082(0x1a7)]&&CFG[_0x80f082(0x14d)+'OVERY']['RESPONDED_'+'LIMIT']),FALLBACKS[_0x80f082(0x247)+_0x80f082(0x213)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG['STATUS_REC'+_0x80f082(0x1cb)+'ONDED_TRIM'+_0x80f082(0x165)]??(CFG[_0x80f082(0x14d)+_0x80f082(0x1a7)]&&CFG['STATUS_REC'+_0x80f082(0x1a7)][_0x80f082(0x247)+'TRIM_KEEP']),FALLBACKS['RESPONDED_'+_0x80f082(0x16b)]),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG[_0x80f082(0x14d)+'OVERY_MAX_'+_0x80f082(0x1f1)+_0x80f082(0x14b)]??(CFG['STATUS_REC'+_0x80f082(0x1a7)]&&CFG['STATUS_REC'+_0x80f082(0x1a7)]['MAX_DOWNLO'+_0x80f082(0x157)+_0x80f082(0x11a)]),FALLBACKS[_0x80f082(0x1d4)+'AD_BYTES_W'+'ARN'])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0x80f082(0x136)+_0x80f082(0x186)+'s',ITEMS_TABLE=_0x80f082(0x136)+'overy_item'+'s';let respondedMsgIds=new Set();function trackSent(_0x3bda9d){const _0x4f79c4=_0x80f082;try{const _0x46ead7=_0x3bda9d?.['key']?.['id']||_0x3bda9d?.['id']||_0x3bda9d?.[_0x4f79c4(0x21e)]&&_0x3bda9d['messages'][0x410+-0xedc+-0x2*-0x566]?.[_0x4f79c4(0x220)]?.['id']||Array[_0x4f79c4(0x16c)](_0x3bda9d)&&_0x3bda9d[0x2477+0xb*-0x292+-0x831]?.[_0x4f79c4(0x220)]?.['id']||null;if(!_0x46ead7)return;respondedMsgIds[_0x4f79c4(0x198)](String(_0x46ead7));if(respondedMsgIds[_0x4f79c4(0x206)]>DEFAULTS['RESPONDED_'+_0x4f79c4(0x213)]){const _0x1d3299=Array[_0x4f79c4(0x183)](respondedMsgIds);respondedMsgIds=new Set(_0x1d3299[_0x4f79c4(0x253)](-DEFAULTS['RESPONDED_'+_0x4f79c4(0x16b)]));}}catch(_0x4b343e){}}function isOurSentId(_0x3affe7){const _0x4932b9=_0x80f082;return _0x3affe7&&respondedMsgIds[_0x4932b9(0x22c)](String(_0x3affe7));}async function getBaileysHelpers(){const _0x2360dd=_0x80f082;if(_baileysHelpers)return _baileysHelpers;try{const _0x56c5ad=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x56c5ad['downloadCo'+_0x2360dd(0x25d)+_0x2360dd(0x18e)]||_0x56c5ad[_0x2360dd(0x1a2)]?.['downloadCo'+'ntentFromM'+_0x2360dd(0x18e)]};if(!_baileysHelpers[_0x2360dd(0x1f6)+_0x2360dd(0x25d)+_0x2360dd(0x18e)])throw new Error(_0x2360dd(0x1f6)+'ntentFromM'+_0x2360dd(0x21d)+_0x2360dd(0x1a8));return _baileysHelpers;}catch(_0x33f2b7){error(_0x33f2b7,'['+name+(']\x20failed\x20t'+_0x2360dd(0x1bb)+'aileys'));throw _0x33f2b7;}}async function streamToBuffer(_0x2577d1){const _0x4cebe7=_0x80f082,_0x355886=[];for await(const _0x57a201 of _0x2577d1)_0x355886[_0x4cebe7(0x1eb)](Buffer[_0x4cebe7(0x1ed)](_0x57a201)?_0x57a201:Buffer[_0x4cebe7(0x183)](_0x57a201));return Buffer[_0x4cebe7(0x155)](_0x355886);}function ensureDataDir(){const _0x31ed41=_0x80f082;try{const _0x4bb13c=CFG||{},_0x1789ea=_0x4bb13c['PROJECT_RO'+'OT']&&typeof _0x4bb13c[_0x31ed41(0x1d0)+'OT']===_0x31ed41(0x23b)?_0x4bb13c['PROJECT_RO'+'OT']:process[_0x31ed41(0x13b)](),_0x5d702c=typeof DEFAULTS[_0x31ed41(0x1fc)+'TH']===_0x31ed41(0x23b)&&DEFAULTS[_0x31ed41(0x1fc)+'TH'][_0x31ed41(0x12b)]()?DEFAULTS[_0x31ed41(0x1fc)+'TH']:null;DATA_DIR=_0x5d702c&&typeof _0x5d702c===_0x31ed41(0x23b)&&_0x5d702c[_0x31ed41(0x12b)]()?_0x59d514[_0x31ed41(0x176)](_0x5d702c)?_0x5d702c:_0x59d514['resolve'](_0x1789ea,_0x5d702c):_0x59d514[_0x31ed41(0x167)](_0x1789ea,FALLBACKS[_0x31ed41(0x1fc)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x5cf041=_0x59d514['resolve'](_0x1789ea,_0x31ed41(0x113),_0x31ed41(0x221),_0x31ed41(0x227));if(_0x3d99d8[_0x31ed41(0x13f)](_0x5cf041)&&_0x3d99d8[_0x31ed41(0x23c)](_0x5cf041)[_0x31ed41(0x130)+'y']()){const _0x544363=_0x3d99d8[_0x31ed41(0x22e)+'c'](_0x5cf041)[_0x31ed41(0x235)](Boolean);for(const _0x42b69f of _0x544363){const _0x7699e7=_0x59d514['join'](_0x5cf041,_0x42b69f),_0xb71e8=_0x59d514[_0x31ed41(0x22a)](DATA_DIR,_0x42b69f);try{if(!_0x3d99d8[_0x31ed41(0x13f)](_0xb71e8))_0x3d99d8[_0x31ed41(0x114)](_0x7699e7,_0xb71e8);else _0x3d99d8['unlinkSync'](_0x7699e7);}catch(_0xc505e2){}}try{const _0x4f59b9=_0x3d99d8[_0x31ed41(0x22e)+'c'](_0x5cf041);if(!_0x4f59b9||_0x4f59b9['length']===-0x218c+-0xca*-0xa+0x19a8)_0x3d99d8[_0x31ed41(0x120)](_0x5cf041);}catch(_0x43780e){}}}catch(_0x52bad2){}}catch(_0x850051){warn('['+name+(_0x31ed41(0x11e)+_0x31ed41(0x1fa)+'r:\x20')+(_0x850051?.[_0x31ed41(0x217)]||_0x850051)),DATA_DIR=_0x59d514['resolve'](process[_0x31ed41(0x13b)](),FALLBACKS[_0x31ed41(0x1fc)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x1b899b){}}}async function ensureTables(){const _0x2dd3c4=_0x80f082;await db['exec'](_0x2dd3c4(0x110)+_0x2dd3c4(0x199)+_0x2dd3c4(0x152)+PREFS_TABLE+(_0x2dd3c4(0x1ee)+_0x2dd3c4(0x205)+'RIMARY\x20KEY'+',\x0a\x20\x20\x20\x20\x20\x20\x20v'+_0x2dd3c4(0x119)+_0x2dd3c4(0x11f)+_0x2dd3c4(0x175)+'ated_at\x20IN'+_0x2dd3c4(0x1d8)+_0x2dd3c4(0x1a9)+_0x2dd3c4(0x1d6))),await db[_0x2dd3c4(0x163)](_0x2dd3c4(0x110)+_0x2dd3c4(0x199)+_0x2dd3c4(0x152)+ITEMS_TABLE+('\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x2dd3c4(0x215)+'IMARY\x20KEY,'+_0x2dd3c4(0x131)+_0x2dd3c4(0x1ea)+_0x2dd3c4(0x14c)+_0x2dd3c4(0x1c6)+_0x2dd3c4(0x1f7)+'\x20DEFAULT\x20\x27'+_0x2dd3c4(0x1b8)+_0x2dd3c4(0x1da)+_0x2dd3c4(0x142)+'le_path\x20TE'+_0x2dd3c4(0x15a)+_0x2dd3c4(0x112)+'TEGER\x20DEFA'+_0x2dd3c4(0x19a)+'\x20\x20\x20\x20create'+_0x2dd3c4(0x1ad)+_0x2dd3c4(0x197)+_0x2dd3c4(0x239)+_0x2dd3c4(0x258)+_0x2dd3c4(0x256)+_0x2dd3c4(0x21b)+_0x2dd3c4(0x230)+_0x2dd3c4(0x168)+'\x20TEXT\x20DEFA'+_0x2dd3c4(0x115)+_0x2dd3c4(0x14f)));}async function getPref(_0x1d48b2){const _0xc9b7dd=_0x80f082;try{const _0x401535=await db[_0xc9b7dd(0x209)](_0xc9b7dd(0x17e)+'ue\x20FROM\x20'+PREFS_TABLE+(_0xc9b7dd(0x12d)+_0xc9b7dd(0x16d)),[_0x1d48b2]);return _0x401535?_0x401535[_0xc9b7dd(0x25a)]:null;}catch(_0x27522d){return warn('['+name+(_0xc9b7dd(0x13d)+'error:\x20')+(_0x27522d?.['message']||_0x27522d)),null;}}async function setPref(_0x27b520,_0x3d42fa){const _0x1ba036=_0x80f082;try{const _0x139d02=Math['floor'](Date[_0x1ba036(0x20d)]()/(-0x244e+-0x19d2+0x4208));return await db[_0x1ba036(0x174)](_0x1ba036(0x241)+'O\x20'+PREFS_TABLE+(_0x1ba036(0x1ce)+'ue,\x20update'+_0x1ba036(0x10f)+_0x1ba036(0x178)+_0x1ba036(0x193)+_0x1ba036(0x192)+_0x1ba036(0x237)+'UPDATE\x20SET'+_0x1ba036(0x225)+_0x1ba036(0x156)+'e,\x20updated'+_0x1ba036(0x1d9)+_0x1ba036(0x185)+'_at;'),[_0x27b520,String(_0x3d42fa),_0x139d02]),!![];}catch(_0x259723){return warn('['+name+(_0x1ba036(0x232)+_0x1ba036(0x172))+(_0x259723?.['message']||_0x259723)),![];}}async function saveItem(_0x3d9672){const _0xbe9370=_0x80f082;try{const _0x1ea5e4=Math[_0xbe9370(0x18c)](Date['now']()/(0x1beb+-0x382+0xb5*-0x1d)),_0x487fba=Number(_0x3d9672['expires_at']||_0x1ea5e4+DEFAULTS[_0xbe9370(0x216)+'DS']);return await db[_0xbe9370(0x174)]('INSERT\x20OR\x20'+'REPLACE\x20IN'+'TO\x20'+ITEMS_TABLE+(_0xbe9370(0x226)+_0xbe9370(0x1c8)+_0xbe9370(0x1e9)+_0xbe9370(0x245)+'mime,\x20file'+_0xbe9370(0x229)+'_ts,\x20creat'+_0xbe9370(0x20c)+_0xbe9370(0x214)+_0xbe9370(0x1c9)+_0xbe9370(0x179)+_0xbe9370(0x15c)+'\x20?,\x20?,\x20?,\x20'+_0xbe9370(0x1a1)+_0xbe9370(0x20e)),[_0x3d9672['id'],_0x3d9672[_0xbe9370(0x228)+'t']||'',_0x3d9672[_0xbe9370(0x1e6)+'me']||'',_0x3d9672['mime']||'',_0x3d9672[_0xbe9370(0x1e3)]||'',Number(_0x3d9672[_0xbe9370(0x254)]||-0xa11*-0x1+0x371*0x3+0x12*-0x122),Number(_0x3d9672[_0xbe9370(0x195)]||Math[_0xbe9370(0x18c)](Date['now']()/(-0x1246+-0x1*0x25d7+0x3c05))),Number(_0x487fba),_0x3d9672[_0xbe9370(0x184)+'on']?_0x3d9672[_0xbe9370(0x184)+'on']:'']),!![];}catch(_0xf3c6b6){return warn('['+name+(']\x20saveItem'+_0xbe9370(0x1b5))+(_0xf3c6b6?.[_0xbe9370(0x217)]||_0xf3c6b6)),![];}}async function fetchItemById(_0x3941ae){const _0x571ef6=_0x80f082;try{const _0x74927=await db['get'](_0x571ef6(0x1ab)+_0x571ef6(0x188)+ITEMS_TABLE+(_0x571ef6(0x169)+_0x571ef6(0x16f)),[_0x3941ae]);return _0x74927||null;}catch(_0x3b3d16){return warn('['+name+(_0x571ef6(0x222)+_0x571ef6(0x122)+_0x571ef6(0x244))+(_0x3b3d16?.['message']||_0x3b3d16)),null;}}async function deleteItemById(_0x5e2ec0){const _0x4ee2e2=_0x80f082;try{const _0x36a13d=await db['get'](_0x4ee2e2(0x15d)+'e_path\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x4ee2e2(0x169)+_0x4ee2e2(0x16f)),[_0x5e2ec0]);if(_0x36a13d?.[_0x4ee2e2(0x1e3)])try{await _0x58793f(_0x36a13d[_0x4ee2e2(0x1e3)])[_0x4ee2e2(0x18f)](()=>{});}catch(_0x7d8c0e){}await db[_0x4ee2e2(0x174)](_0x4ee2e2(0x187)+'M\x20'+ITEMS_TABLE+(_0x4ee2e2(0x169)+_0x4ee2e2(0x16f)),[_0x5e2ec0]),info('['+name+(']\x20removed\x20'+_0x4ee2e2(0x17d)+_0x4ee2e2(0x1ff))+_0x5e2ec0);}catch(_0x13de6f){warn('['+name+(_0x4ee2e2(0x181)+_0x4ee2e2(0x1fd)+_0x4ee2e2(0x259))+(_0x13de6f?.[_0x4ee2e2(0x217)]||_0x13de6f));}}async function sweepExpired(){const _0x141f20=_0x80f082;try{const _0x570bb3=Math[_0x141f20(0x18c)](Date[_0x141f20(0x20d)]()/(-0x1c28+0x79d+0x1873*0x1)),_0x79ec55=await db[_0x141f20(0x252)](_0x141f20(0x12a)+_0x141f20(0x191)+_0x141f20(0x1ac)+ITEMS_TABLE+(_0x141f20(0x24e)+_0x141f20(0x1ec)+'\x20?'),[_0x570bb3]);if(!_0x79ec55||_0x79ec55['length']===-0x9*0x2cc+0x3*0x941+-0x297)return;for(const _0x41581d of _0x79ec55){try{if(_0x41581d['file_path'])await _0x58793f(_0x41581d[_0x141f20(0x1e3)])[_0x141f20(0x18f)](()=>{});}catch(_0x26547f){}}const _0x4ca4c3=_0x79ec55[_0x141f20(0x11d)](_0x3caf95=>_0x3caf95['id']);if(_0x4ca4c3[_0x141f20(0x15b)]){const _0x9e9460=_0x4ca4c3[_0x141f20(0x11d)](()=>'?')['join'](',');await db[_0x141f20(0x174)](_0x141f20(0x187)+'M\x20'+ITEMS_TABLE+(_0x141f20(0x169)+_0x141f20(0x246))+_0x9e9460+')',_0x4ca4c3),info('['+name+']\x20cleaned\x20'+_0x4ca4c3[_0x141f20(0x15b)]+(_0x141f20(0x1d2)+_0x141f20(0x1f5)+_0x141f20(0x1a0)));}}catch(_0xeac3ec){warn('['+name+(_0x141f20(0x13c)+_0x141f20(0x126)+':\x20')+(_0xeac3ec?.[_0x141f20(0x217)]||_0xeac3ec));}}function filenameForId(_0x3baa95,_0x1a7828){const _0x38f8a8=_0x80f082,_0x4e35bd={'image/jpeg':_0x38f8a8(0x24c),'image/png':'.png','video/mp4':_0x38f8a8(0x160),'image/webp':_0x38f8a8(0x234),'audio/ogg':_0x38f8a8(0x158),'audio/mpeg':_0x38f8a8(0x118),'application/pdf':_0x38f8a8(0x128)},_0x5d1a30=_0x1a7828&&_0x4e35bd[_0x1a7828]?_0x4e35bd[_0x1a7828]:_0x59d514[_0x38f8a8(0x1be)](_0x3baa95)||'';return''+_0x3baa95+_0x5d1a30;}async function readFileAsBuffer(_0x280c0b){const _0x20230a=_0x80f082;try{return await _0x3d99d8[_0x20230a(0x1ca)]['readFile'](_0x280c0b);}catch(_0x436890){return warn('['+name+(_0x20230a(0x1f0)+_0x20230a(0x1b9)+_0x20230a(0x1e8))+_0x280c0b+':\x20'+(_0x436890?.[_0x20230a(0x217)]||_0x436890)),null;}}function buildPayloadFromSaved(_0x2825bc){const _0x5a21cb=_0x80f082;if(!_0x2825bc||!_0x2825bc[_0x5a21cb(0x1e3)])return null;const _0x4ff508=_0x2825bc[_0x5a21cb(0x1e3)],_0x4712b9=(_0x2825bc['mime']||'')[_0x5a21cb(0x173)+'e']();return async function(){const _0x408ea0=_0x5a21cb,_0x2b9a44=await readFileAsBuffer(_0x4ff508);if(!_0x2b9a44)return null;const _0x317035=(_0x2825bc[_0x408ea0(0x1e6)+'me']?_0x2825bc[_0x408ea0(0x1e6)+'me']+_0x408ea0(0x13e):'')+(_0x408ea0(0x1a4)+_0x408ea0(0x221));if(_0x4712b9[_0x408ea0(0x1e5)](_0x408ea0(0x1f8)))return{'image':_0x2b9a44,'caption':_0x317035,'mimetype':_0x4712b9};if(_0x4712b9['startsWith'](_0x408ea0(0x20f)))return{'video':_0x2b9a44,'caption':_0x317035,'mimetype':_0x4712b9};if(_0x4712b9['startsWith'](_0x408ea0(0x1c5)))return{'audio':_0x2b9a44,'ptt':![],'mimetype':_0x4712b9};return{'document':_0x2b9a44,'fileName':_0x59d514['basename'](_0x4ff508)||''+_0x2825bc['id'],'caption':_0x317035,'mimetype':_0x4712b9||undefined};};}async function sendRecoveredToBot(_0x47dfec){const _0x3dc0a7=_0x80f082;if(!_0x47dfec)return![];const _0x1be546=getBotJid();if(!_0x1be546)return warn('['+name+(_0x3dc0a7(0x149)+_0x3dc0a7(0x24d)+':\x20getBotJi'+_0x3dc0a7(0x111)+'ed\x20empty')),![];if(!_0x47dfec['file_path']||!_0x3d99d8[_0x3dc0a7(0x13f)](_0x47dfec[_0x3dc0a7(0x1e3)]))return warn('['+name+(']\x20sendReco'+_0x3dc0a7(0x24d)+_0x3dc0a7(0x1e0)+_0x3dc0a7(0x19b))+_0x47dfec['id']+_0x3dc0a7(0x242)+_0x47dfec[_0x3dc0a7(0x1e3)]),![];const _0x1a904d=buildPayloadFromSaved(_0x47dfec);if(!_0x1a904d)return warn('['+name+(_0x3dc0a7(0x23d)+_0x3dc0a7(0x151)+'or\x20')+_0x47dfec['id']),![];try{const _0x5d61cd=await _0x1a904d();if(!_0x5d61cd)return warn('['+name+(']\x20payload\x20'+'build\x20fail'+_0x3dc0a7(0x1f4))+_0x47dfec['id']),![];if(typeof _0x5d61cd===_0x3dc0a7(0x248)&&_0x5d61cd!==null){_0x5d61cd[_0x3dc0a7(0x1b3)+'o']=_0x5d61cd[_0x3dc0a7(0x1b3)+'o']||{};if(_0x47dfec[_0x3dc0a7(0x228)+'t'])_0x5d61cd[_0x3dc0a7(0x1b3)+'o'][_0x3dc0a7(0x121)+'id']=[_0x47dfec[_0x3dc0a7(0x228)+'t']];}let _0x35abc3=null;if(botRef&&botRef[_0x3dc0a7(0x20b)]&&typeof botRef[_0x3dc0a7(0x20b)]['sendMessag'+'e']===_0x3dc0a7(0x1aa))_0x35abc3=await botRef[_0x3dc0a7(0x20b)][_0x3dc0a7(0x127)+'e'](_0x1be546,_0x5d61cd);else{if(botRef&&typeof botRef[_0x3dc0a7(0x127)+'e']===_0x3dc0a7(0x1aa))_0x35abc3=await botRef[_0x3dc0a7(0x127)+'e'](_0x1be546,_0x5d61cd);else return warn('['+name+(_0x3dc0a7(0x149)+_0x3dc0a7(0x24d)+_0x3dc0a7(0x1d5)+_0x3dc0a7(0x146)+_0x3dc0a7(0x134))),![];}return trackSent(_0x35abc3),info('['+name+(_0x3dc0a7(0x141)+_0x3dc0a7(0x238)+'r\x20')+_0x47dfec['id']+_0x3dc0a7(0x242)+_0x1be546),!![];}catch(_0x527ba8){return warn('['+name+(_0x3dc0a7(0x149)+_0x3dc0a7(0x24d)+_0x3dc0a7(0x1b6)+'\x20')+_0x47dfec['id']+':\x20'+(_0x527ba8?.[_0x3dc0a7(0x217)]||_0x527ba8)),![];}}async function isEnabled(){const _0x566ca7=_0x80f082,_0x1c56e5=await getPref(_0x566ca7(0x17a));return _0x1c56e5==='1'||_0x1c56e5===_0x566ca7(0x200);}async function handleStatusUpload(_0x168ad7){const _0x3c1d31=_0x80f082;try{if(!_0x168ad7||!_0x168ad7['key'])return;const _0x44693d=String(_0x168ad7[_0x3c1d31(0x220)][_0x3c1d31(0x11c)]||'')[_0x3c1d31(0x173)+'e']();if(_0x44693d!==_0x3c1d31(0x19d)+_0x3c1d31(0x249))return;const _0x588207=String(_0x168ad7['key']['id']||'');if(!_0x588207)return;if(!await isEnabled())return;const _0x360434=await fetchItemById(_0x588207);if(_0x360434)return;const _0x370411=_0x168ad7[_0x3c1d31(0x217)]||{};let _0x103605=null;if(_0x370411['imageMessa'+'ge'])_0x103605=_0x3c1d31(0x1cf);else{if(_0x370411[_0x3c1d31(0x171)+'ge'])_0x103605=_0x3c1d31(0x135);else{if(_0x370411[_0x3c1d31(0x1c0)+'ge'])_0x103605='audio';else{if(_0x370411[_0x3c1d31(0x25b)+_0x3c1d31(0x139)])_0x103605=_0x3c1d31(0x231);else{if(_0x370411[_0x3c1d31(0x1e7)+_0x3c1d31(0x12e)])_0x103605='sticker';}}}}if(!_0x103605)return;const _0x2883b7=_0x103605===_0x3c1d31(0x1cf)?'image':_0x103605===_0x3c1d31(0x135)?'video':_0x103605===_0x3c1d31(0x117)?_0x3c1d31(0x117):_0x3c1d31(0x231),_0x2ff460=_0x168ad7[_0x3c1d31(0x220)][_0x3c1d31(0x228)+'t']||'',_0x143d93=_0x168ad7[_0x3c1d31(0x1a5)]||'',_0x17d09e=_0x2ff460?_0x2ff460[_0x3c1d31(0x22d)]('@')[-0x14ef+-0x1*0x1c8d+0x1*0x317c]:_0x143d93||'';let _0x1741a2='',_0x24b766='';try{const _0x521f95=_0x168ad7['message'][_0x2883b7+_0x3c1d31(0x23e)]||_0x168ad7['message'];_0x24b766=_0x521f95&&_0x521f95['mimetype']?_0x521f95['mimetype']:'';const {downloadContentFromMessage:_0x17d7aa}=await getBaileysHelpers(),_0x2008c8=await _0x17d7aa(_0x521f95,_0x2883b7),_0x24e18a=await streamToBuffer(_0x2008c8);if(!_0x24e18a||!Buffer['isBuffer'](_0x24e18a)||_0x24e18a[_0x3c1d31(0x15b)]===0xc69+0x56c+-0x1*0x11d5)warn('['+name+(_0x3c1d31(0x1fe)+_0x3c1d31(0x153)+'empty\x20buff'+'er\x20for\x20sta'+_0x3c1d31(0x17c))+_0x588207),_0x1741a2='';else{const _0x3f82b8=filenameForId(_0x588207,_0x24b766);_0x1741a2=_0x59d514[_0x3c1d31(0x22a)](DATA_DIR,_0x3f82b8);const _0x5f0c55=_0x1741a2+'.tmp-'+Date[_0x3c1d31(0x20d)]();await _0x3d99d8[_0x3c1d31(0x1ca)][_0x3c1d31(0x190)](_0x5f0c55,_0x24e18a),await _0x3d99d8['promises']['rename'](_0x5f0c55,_0x1741a2),info('['+name+(']\x20saved\x20st'+_0x3c1d31(0x211))+_0x588207+_0x3c1d31(0x242)+_0x1741a2+'\x20('+_0x24e18a['length']+_0x3c1d31(0x20a)),_0x24e18a[_0x3c1d31(0x15b)]>DEFAULTS[_0x3c1d31(0x1d4)+_0x3c1d31(0x157)+_0x3c1d31(0x11a)]&&warn('['+name+(']\x20download'+_0x3c1d31(0x238)+'r\x20')+_0x588207+(_0x3c1d31(0x154)+'\x20')+_0x24e18a[_0x3c1d31(0x15b)]+_0x3c1d31(0x162));}}catch(_0x2e1648){warn('['+name+(_0x3c1d31(0x1fe)+_0x3c1d31(0x18d)+_0x3c1d31(0x166))+_0x588207+':\x20'+(_0x2e1648?.[_0x3c1d31(0x217)]||_0x2e1648)),_0x1741a2='';}const _0x59d7da=Math[_0x3c1d31(0x18c)](Date['now']()/(-0x3f*-0x67+0x2*0x24d+-0x71*0x3b)),_0x26d3fe={'id':_0x588207,'participant':_0x2ff460,'display_name':_0x17d09e,'mime':_0x24b766,'file_path':_0x1741a2,'msg_ts':Number(_0x168ad7[_0x3c1d31(0x233)+_0x3c1d31(0x24f)]||_0x59d7da),'created_at':_0x59d7da,'expires_at':_0x59d7da+DEFAULTS['KEEP_SECON'+'DS'],'message_json':JSON[_0x3c1d31(0x223)](_0x168ad7)};await saveItem(_0x26d3fe);if(_0x1741a2)info('['+name+(']\x20DB\x20saved'+'\x20entry\x20wit'+_0x3c1d31(0x23f)+'h\x20for\x20')+_0x588207);else info('['+name+(_0x3c1d31(0x212)+_0x3c1d31(0x145)+'\x20')+_0x588207+(_0x3c1d31(0x16e)+_0x3c1d31(0x147)));}catch(_0xe08512){warn('['+name+(_0x3c1d31(0x164)+_0x3c1d31(0x22b)+_0x3c1d31(0x12f))+(_0xe08512?.[_0x3c1d31(0x217)]||_0xe08512));}}async function handlePossibleDeletion(_0x2788fa){const _0x4cbe6c=_0x80f082;try{if(!_0x2788fa||!_0x2788fa[_0x4cbe6c(0x217)])return;if(!await isEnabled())return;const _0x43f331=Math[_0x4cbe6c(0x18c)](Date[_0x4cbe6c(0x20d)]()/(0x1c91+0x1c4e*0x1+-0x34f7)),_0x23adfc=_0x2788fa[_0x4cbe6c(0x217)][_0x4cbe6c(0x15e)+_0x4cbe6c(0x139)];if(_0x23adfc&&_0x23adfc[_0x4cbe6c(0x220)]){const _0x2c3660=_0x23adfc[_0x4cbe6c(0x220)]||{},_0x3f6047=String(_0x2c3660['remoteJid']||'')['toLowerCas'+'e']();if(_0x3f6047===_0x4cbe6c(0x19d)+'adcast'){const _0xe43410=String(_0x2c3660['id']||'');if(!_0xe43410)return;const _0x425811=await fetchItemById(_0xe43410);if(!_0x425811){warn('['+name+(_0x4cbe6c(0x21a)+'\x20for\x20statu'+'s\x20')+_0xe43410+(_0x4cbe6c(0x143)+_0x4cbe6c(0x14e)+_0x4cbe6c(0x22f)));return;}if(Number(_0x425811[_0x4cbe6c(0x16a)]||0x95*-0x39+0x61*0x29+0x11a4)<=_0x43f331){await deleteItemById(_0xe43410),info('['+name+(']\x20expired\x20'+'saved\x20stat'+_0x4cbe6c(0x1ff))+_0xe43410+(_0x4cbe6c(0x1c1)+_0x4cbe6c(0x177)));return;}const _0x12149a=await sendRecoveredToBot(_0x425811);_0x12149a?(info('['+name+(_0x4cbe6c(0x17f)+_0x4cbe6c(0x255)+_0x4cbe6c(0x14a))+_0xe43410+_0x4cbe6c(0x1cc)),await deleteItemById(_0xe43410),info('['+name+(_0x4cbe6c(0x251)+'saved\x20stat'+_0x4cbe6c(0x1ff))+_0xe43410+(_0x4cbe6c(0x21c)+_0x4cbe6c(0x123)+'send'))):warn('['+name+(_0x4cbe6c(0x1bd)+_0x4cbe6c(0x1fb)+_0x4cbe6c(0x201)+_0x4cbe6c(0x17c))+_0xe43410);return;}}if((_0x2788fa[_0x4cbe6c(0x1e4)+'bType']||_0x2788fa['message']?.[_0x4cbe6c(0x1e4)+_0x4cbe6c(0x133)])&&Array[_0x4cbe6c(0x16c)](_0x2788fa[_0x4cbe6c(0x217)]?.['messageStu'+_0x4cbe6c(0x1d1)+'s'])){const _0x4a97c3=_0x2788fa['message'][_0x4cbe6c(0x1e4)+_0x4cbe6c(0x1d1)+'s'];if(_0x4a97c3['length']>-0x3d*0x6a+-0x1444+0x23*0x14d&&String(_0x4a97c3[-0x5*-0x179+-0x1*-0x2467+-0x2bc4])['toLowerCas'+'e']()[_0x4cbe6c(0x129)](_0x4cbe6c(0x1bc))){for(let _0x12246d=0x1072+-0x227*0x3+0x1*-0x9fc;_0x12246d<_0x4a97c3[_0x4cbe6c(0x15b)];_0x12246d++){const _0x5a02d7=String(_0x4a97c3[_0x12246d]||'');if(!_0x5a02d7)continue;const _0x5a82aa=await fetchItemById(_0x5a02d7);if(!_0x5a82aa){warn('['+name+(_0x4cbe6c(0x1b4)+'oke\x20for\x20st'+_0x4cbe6c(0x211))+_0x5a02d7+(_0x4cbe6c(0x143)+_0x4cbe6c(0x14e)+_0x4cbe6c(0x22f)));continue;}if(Number(_0x5a82aa[_0x4cbe6c(0x16a)]||-0xa7b*0x1+0x1c7d+-0x1cd*0xa)<=_0x43f331){await deleteItemById(_0x5a02d7),info('['+name+(_0x4cbe6c(0x137)+_0x4cbe6c(0x17d)+'us\x20')+_0x5a02d7+(_0x4cbe6c(0x1c1)+_0x4cbe6c(0x177)));continue;}if(!_0x5a82aa['file_path']||!_0x3d99d8[_0x4cbe6c(0x13f)](_0x5a82aa[_0x4cbe6c(0x1e3)])){warn('['+name+(']\x20file\x20mis'+_0x4cbe6c(0x19b))+_0x5a02d7+':\x20'+_0x5a82aa[_0x4cbe6c(0x1e3)]);continue;}const _0x738d14=await sendRecoveredToBot(_0x5a82aa);_0x738d14?(info('['+name+(_0x4cbe6c(0x17f)+_0x4cbe6c(0x255)+_0x4cbe6c(0x14a))+_0x5a02d7+_0x4cbe6c(0x1cc)),await deleteItemById(_0x5a02d7),info('['+name+(_0x4cbe6c(0x251)+_0x4cbe6c(0x17d)+'us\x20')+_0x5a02d7+(_0x4cbe6c(0x21c)+_0x4cbe6c(0x123)+_0x4cbe6c(0x208)))):warn('['+name+(_0x4cbe6c(0x1bd)+_0x4cbe6c(0x1fb)+_0x4cbe6c(0x201)+_0x4cbe6c(0x17c))+_0x5a02d7);}return;}}const _0x44be53=_0x2788fa['message']?.['extendedTe'+_0x4cbe6c(0x1af)]?.[_0x4cbe6c(0x1b3)+'o']?.['quotedMess'+_0x4cbe6c(0x1ef)];if(_0x44be53&&_0x44be53[_0x4cbe6c(0x15e)+_0x4cbe6c(0x139)]&&_0x44be53[_0x4cbe6c(0x15e)+'ssage'][_0x4cbe6c(0x220)]){const _0x438f00=_0x44be53[_0x4cbe6c(0x15e)+_0x4cbe6c(0x139)][_0x4cbe6c(0x220)];if(String(_0x438f00[_0x4cbe6c(0x11c)]||'')[_0x4cbe6c(0x173)+'e']()===_0x4cbe6c(0x19d)+_0x4cbe6c(0x249)){const _0x27f119=String(_0x438f00['id']||'');if(!_0x27f119)return;const _0x4faba1=await fetchItemById(_0x27f119);if(!_0x4faba1)return;if(Number(_0x4faba1[_0x4cbe6c(0x16a)]||0x13d9*0x1+-0x6b+-0x136e)<=_0x43f331){await deleteItemById(_0x27f119),info('['+name+(_0x4cbe6c(0x137)+_0x4cbe6c(0x17d)+_0x4cbe6c(0x1ff))+_0x27f119+(_0x4cbe6c(0x1c1)+_0x4cbe6c(0x177)));return;}if(!_0x4faba1[_0x4cbe6c(0x1e3)]||!_0x3d99d8[_0x4cbe6c(0x13f)](_0x4faba1[_0x4cbe6c(0x1e3)])){warn('['+name+(_0x4cbe6c(0x1c3)+_0x4cbe6c(0x124)+'r\x20')+_0x27f119+('\x20but\x20file\x20'+'missing\x20at'+'\x20')+_0x4faba1[_0x4cbe6c(0x1e3)]);return;}const _0x2c898d=await sendRecoveredToBot(_0x4faba1);_0x2c898d?(info('['+name+(_0x4cbe6c(0x17f)+_0x4cbe6c(0x255)+_0x4cbe6c(0x14a))+_0x27f119+_0x4cbe6c(0x1cc)),await deleteItemById(_0x27f119),info('['+name+(']\x20removed\x20'+_0x4cbe6c(0x17d)+_0x4cbe6c(0x1ff))+_0x27f119+(_0x4cbe6c(0x21c)+_0x4cbe6c(0x123)+_0x4cbe6c(0x208)))):warn('['+name+(_0x4cbe6c(0x1bd)+_0x4cbe6c(0x1fb)+_0x4cbe6c(0x201)+_0x4cbe6c(0x17c))+_0x27f119);return;}}}catch(_0x256afd){warn('['+name+(_0x4cbe6c(0x202)+'ssibleDele'+_0x4cbe6c(0x15f)+':\x20')+(_0x256afd?.[_0x4cbe6c(0x217)]||_0x256afd));}}function _0x3943(_0x33b2d4,_0x431197){const _0x99fd77=_0x1a41();return _0x3943=function(_0x3cc5e4,_0x20ff55){_0x3cc5e4=_0x3cc5e4-(0x16b0+0x1535*0x1+-0x1*0x2ad7);let _0x30866a=_0x99fd77[_0x3cc5e4];return _0x30866a;},_0x3943(_0x33b2d4,_0x431197);}async function rawMessagesUpsertHandler({messages:_0x39f389}){const _0x22c73a=_0x80f082;if(!Array[_0x22c73a(0x16c)](_0x39f389))return;if(!await isEnabled())return;for(const _0x30c9fd of _0x39f389){try{if(!_0x30c9fd||!_0x30c9fd[_0x22c73a(0x220)])continue;if(isOurSentId(_0x30c9fd[_0x22c73a(0x220)]?.['id']))continue;if(_0x30c9fd[_0x22c73a(0x220)][_0x22c73a(0x1f3)])continue;const _0x1aa1e6=String(_0x30c9fd[_0x22c73a(0x220)]['remoteJid']||'')[_0x22c73a(0x173)+'e']();if(_0x1aa1e6===_0x22c73a(0x19d)+'adcast'){await handleStatusUpload(_0x30c9fd)[_0x22c73a(0x18f)](_0x4aecf9=>warn('['+name+(_0x22c73a(0x1b7)+_0x22c73a(0x1e2)+_0x22c73a(0x259))+(_0x4aecf9?.[_0x22c73a(0x217)]||_0x4aecf9))),await handlePossibleDeletion(_0x30c9fd)[_0x22c73a(0x18f)](_0x182781=>warn('['+name+(_0x22c73a(0x21a)+'\x20handle\x20fa'+_0x22c73a(0x1ae))+(_0x182781?.[_0x22c73a(0x217)]||_0x182781)));continue;}await handlePossibleDeletion(_0x30c9fd)['catch'](_0x13c3f1=>warn('['+name+(_0x22c73a(0x21a)+_0x22c73a(0x24a)+_0x22c73a(0x1ae))+(_0x13c3f1?.[_0x22c73a(0x217)]||_0x13c3f1)));}catch(_0x3f8a97){warn('['+name+(_0x22c73a(0x1db)+_0x22c73a(0x1dd)+'ror:\x20')+(_0x3f8a97?.[_0x22c73a(0x217)]||_0x3f8a97));}}}function getMessageTextFromCtx(_0x78cbb0){const _0x2d7ec8=_0x80f082;if(!_0x78cbb0||!_0x78cbb0[_0x2d7ec8(0x217)])return'';const _0x50b818=_0x78cbb0[_0x2d7ec8(0x217)];if(_0x50b818[_0x2d7ec8(0x204)+'on'])return _0x50b818[_0x2d7ec8(0x204)+'on'];if(_0x50b818[_0x2d7ec8(0x189)+_0x2d7ec8(0x1af)]?.['text'])return _0x50b818[_0x2d7ec8(0x189)+'xtMessage'][_0x2d7ec8(0x11b)];if(_0x50b818[_0x2d7ec8(0x1df)+'ge']?.['caption'])return _0x50b818['imageMessa'+'ge'][_0x2d7ec8(0x1cd)];if(_0x50b818[_0x2d7ec8(0x171)+'ge']?.[_0x2d7ec8(0x1cd)])return _0x50b818[_0x2d7ec8(0x171)+'ge']['caption'];return'';}export async function onMessage(_0x15992a){const _0x2a8829=_0x80f082;try{if(!_0x15992a||!_0x15992a[_0x2a8829(0x220)]||!_0x15992a[_0x2a8829(0x217)])return;const _0x25c887=_0x15992a[_0x2a8829(0x220)]['remoteJid'];if(typeof _0x25c887===_0x2a8829(0x23b)&&_0x25c887[_0x2a8829(0x1a6)](_0x2a8829(0x18a)))return;if(!_0x15992a['key']['fromMe'])return;if(_0x15992a[_0x2a8829(0x220)]['id']&&isOurSentId(_0x15992a['key']['id']))return;const _0x562d10=typeof _0x15992a[_0x2a8829(0x11b)]==='string'&&_0x15992a[_0x2a8829(0x11b)]['trim']()[_0x2a8829(0x15b)]?_0x15992a[_0x2a8829(0x11b)][_0x2a8829(0x12b)]():'',_0x464e4b=(getMessageTextFromCtx(_0x15992a)||'')['toString']()[_0x2a8829(0x12b)](),_0x2f7c26=(_0x562d10||_0x464e4b||'')[_0x2a8829(0x22d)](/\r?\n/)[-0x39*-0xa5+-0x1*-0x1c01+-0x40be]['trim']();if(!_0x2f7c26)return;const _0x3a89bb=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x2a8829(0x163)](_0x2f7c26);if(!_0x3a89bb)return;const _0xfbd7d9=(_0x3a89bb[-0xc*-0x138+0x19d4+-0x5f*0x6d]||_0x2a8829(0x10e))['toLowerCas'+'e'](),_0x2866fe=getBotJid();if(!_0x2866fe){warn('['+name+(_0x2a8829(0x1f2)+_0x2a8829(0x1ba)+_0x2a8829(0x203)+_0x2a8829(0x148)+_0x2a8829(0x224)));return;}if(_0xfbd7d9===_0x2a8829(0x10e)){const _0x13db9e=await isEnabled(),_0x4a3378=_0x2a8829(0x17b)+_0x2a8829(0x257)+'\x20'+(_0x13db9e?'ON':_0x2a8829(0x210))+(_0x2a8829(0x194)+_0x2a8829(0x1f9))+DATA_DIR,_0xeba8e7=await(botRef?.[_0x2a8829(0x20b)]?.[_0x2a8829(0x127)+'e']?botRef[_0x2a8829(0x20b)]['sendMessag'+'e'](_0x2866fe,{'text':_0x4a3378}):botRef[_0x2a8829(0x127)+'e'](_0x2866fe,{'text':_0x4a3378}));trackSent(_0xeba8e7);return;}if(_0xfbd7d9==='on'||_0xfbd7d9==='off'){const _0x427213=_0xfbd7d9==='on'?'1':'0',_0x572c49=await setPref(_0x2a8829(0x17a),_0x427213),_0x58a284=_0x572c49?'✔️\x20antidele'+_0x2a8829(0x161)+_0x2a8829(0x19f)+_0xfbd7d9[_0x2a8829(0x132)+'e']():_0x2a8829(0x243)+'o\x20set\x20anti'+_0x2a8829(0x116)+_0x2a8829(0x1a3),_0x469861=await(botRef?.[_0x2a8829(0x20b)]?.[_0x2a8829(0x127)+'e']?botRef['sock'][_0x2a8829(0x127)+'e'](_0x2866fe,{'text':_0x58a284}):botRef['sendMessag'+'e'](_0x2866fe,{'text':_0x58a284}));trackSent(_0x469861);return;}}catch(_0x113f49){warn('['+name+(']\x20onMessag'+'e\x20error:\x20')+(_0x113f49?.[_0x2a8829(0x217)]||_0x113f49));}}export async function initialize(_0x5c99b2){const _0x5874c8=_0x80f082;if(!_0x5c99b2)throw new Error(_0x5874c8(0x136)+_0x5874c8(0x138)+'ialize\x20req'+'uires\x20bot\x20'+_0x5874c8(0x25c));botRef=_0x5c99b2,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x5874c8(0x180)+_0x5874c8(0x18b),'handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x5874c8(0x18f)](()=>{}),DEFAULTS[_0x5874c8(0x1b0)+_0x5874c8(0x150)]);try{await sweepExpired();}catch(_0x337aff){}info('['+name+(']\x20initiali'+'zed.\x20DATA_'+'DIR=')+DATA_DIR+(_0x5874c8(0x12c)+'S=')+DEFAULTS[_0x5874c8(0x1b0)+_0x5874c8(0x150)]+'\x20KEEP_SEC='+DEFAULTS[_0x5874c8(0x216)+'DS']);}export async function cleanup(){const _0x3d9eb4=_0x80f082;try{stopManagedListener(name,_0x3d9eb4(0x180)+'psert');}catch(_0x143e5e){warn('['+name+(']\x20cleanup\x20'+_0x3d9eb4(0x1d3)+'dListener\x20'+'error:\x20')+(_0x143e5e?.[_0x3d9eb4(0x217)]||_0x143e5e));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x1edec8){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x3d9eb4(0x236)]==='function')respondedMsgIds[_0x3d9eb4(0x236)]();_baileysHelpers=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};