const _0x4e248d=_0x138c;(function(_0x822b8b,_0x44f2bd){const _0x391561=_0x138c,_0xaafdc9=_0x822b8b();while(!![]){try{const _0x359e34=-parseInt(_0x391561(0x145))/(0xbb3+0x2123+-0x2cd5)*(parseInt(_0x391561(0x142))/(-0x109e+0xb25+0x57b))+parseInt(_0x391561(0x1c0))/(-0x1d7b+-0x93c+-0x26ba*-0x1)*(-parseInt(_0x391561(0x1d7))/(0x61*0x67+0x21*-0x7e+0xc9*-0x1d))+-parseInt(_0x391561(0x1e1))/(0x1*-0x6d3+0x1943*-0x1+0x201b)+parseInt(_0x391561(0x1d6))/(-0x158f+-0x1*0x216b+-0xb*-0x500)+-parseInt(_0x391561(0xa3))/(0x2*-0xd2b+0x875*0x2+0x3b*0x29)*(-parseInt(_0x391561(0xba))/(0x77c+0x5*-0x44f+-0xe17*-0x1))+-parseInt(_0x391561(0x182))/(-0x1f28+-0x1*0xa63+0x2994)*(parseInt(_0x391561(0x1a6))/(0x1b68+0x186+-0xac*0x2b))+-parseInt(_0x391561(0xfa))/(-0x24c7+-0x597+0x149*0x21)*(-parseInt(_0x391561(0x9d))/(0xf7a*-0x2+-0x1*0xe09+0x501*0x9));if(_0x359e34===_0x44f2bd)break;else _0xaafdc9['push'](_0xaafdc9['shift']());}catch(_0x574e5e){_0xaafdc9['push'](_0xaafdc9['shift']());}}}(_0x58ea,0x347e1+0x2995e+-0x1ebde));import _0x50017e from'fs';import _0x4ef60f from'path';import{mkdirSync}from'fs';import{rm as _0x26a441}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name='status_rec'+'overy';export const version='2.3.2';export const priority=-0x151b*0x1+-0x13a7+-0x293*-0x10;export const commands=[_0x4e248d(0xd9)+_0x4e248d(0xc6)];export const configKeys=[_0x4e248d(0x185)+'OT',_0x4e248d(0x19e)+_0x4e248d(0xea),'STATUS_REC'+_0x4e248d(0x18e)+_0x4e248d(0xcd)+_0x4e248d(0x1c2),_0x4e248d(0x19e)+_0x4e248d(0x156)+'_SECONDS','STATUS_REC'+_0x4e248d(0x1c7)+_0x4e248d(0x191)+'T',_0x4e248d(0x19e)+_0x4e248d(0x1c7)+_0x4e248d(0x110)+_0x4e248d(0x15d),_0x4e248d(0x19e)+_0x4e248d(0x131)+_0x4e248d(0xde)+_0x4e248d(0x127)];let CFG={};try{CFG=typeof getConfig==='function'?getConfig()||{}:{};}catch(_0x18d67f){warn('['+name+(_0x4e248d(0x1b2)+_0x4e248d(0x18d)+'\x20')+(_0x18d67f?.['message']||_0x18d67f)+(_0x4e248d(0xa1)+_0x4e248d(0xe8)+_0x4e248d(0x15e))),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x4ef60f[_0x4e248d(0x11c)](_0x4e248d(0xac),_0x4e248d(0xbd)),'CLEANUP_INTERVAL_MS':(0x69a+0x7a1+-0xe23*0x1)*(0x4*-0x795+-0x164f+0x34df)*(-0x24*-0xc1+-0x3*-0x3d9+-0xcd1*0x3)*(-0xb6a+0x22d2+-0x1380),'KEEP_SECONDS':(0x171d+0x116+-0x181b)*(-0x2382+0x26a8+-0x2ea)*(0x713+0x17ea+0x1*-0x1ec1),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(-0x17f*-0x6+-0x59*-0x36+-0x1bb6)*(0x6e*0x29+0x1dd*0x2+-0xc*0x172)*(-0x910+0x1d*-0x113+0x2c37)};function toPositiveInt(_0x3dee67,_0x55a8b8){const _0x340ddd=_0x4e248d,_0x5b3b41=Number(_0x3dee67);if(!Number[_0x340ddd(0xe5)](_0x5b3b41)||_0x5b3b41<=0x5*0x234+-0x853+-0x2b1)return _0x55a8b8;return Math[_0x340ddd(0x121)](_0x5b3b41);}const DEFAULTS={'DATA_SUBPATH':typeof CFG['STATUS_REC'+_0x4e248d(0xea)]===_0x4e248d(0x1db)&&CFG['STATUS_REC'+_0x4e248d(0xea)][_0x4e248d(0x1b3)]()?CFG[_0x4e248d(0x19e)+_0x4e248d(0xea)]:FALLBACKS[_0x4e248d(0x175)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG['STATUS_REC'+_0x4e248d(0x18e)+'NUP_INTERV'+_0x4e248d(0x1c2)]??(CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)]&&CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)]['CLEANUP_IN'+_0x4e248d(0x134)]),FALLBACKS[_0x4e248d(0x174)+_0x4e248d(0x134)]),'KEEP_SECONDS':toPositiveInt(CFG[_0x4e248d(0x19e)+'OVERY_KEEP'+'_SECONDS']??(CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)]&&CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)][_0x4e248d(0x15b)+'DS']),FALLBACKS[_0x4e248d(0x15b)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x4e248d(0x19e)+_0x4e248d(0x1c7)+_0x4e248d(0x191)+'T']??(CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)]&&CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)][_0x4e248d(0xfe)+'LIMIT']),FALLBACKS[_0x4e248d(0xfe)+_0x4e248d(0x1d5)]),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0x4e248d(0x19e)+_0x4e248d(0x1c7)+'ONDED_TRIM'+'_KEEP']??(CFG[_0x4e248d(0x19e)+'OVERY']&&CFG[_0x4e248d(0x19e)+_0x4e248d(0xa4)][_0x4e248d(0xfe)+_0x4e248d(0x9c)]),FALLBACKS[_0x4e248d(0xfe)+_0x4e248d(0x9c)]),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG['STATUS_REC'+_0x4e248d(0x131)+'DOWNLOAD_B'+_0x4e248d(0x127)]??(CFG['STATUS_REC'+_0x4e248d(0xa4)]&&CFG['STATUS_REC'+'OVERY'][_0x4e248d(0x1cb)+_0x4e248d(0x1de)+_0x4e248d(0x132)]),FALLBACKS[_0x4e248d(0x1cb)+'AD_BYTES_W'+_0x4e248d(0x132)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE=_0x4e248d(0x13d)+_0x4e248d(0xc2)+'s',ITEMS_TABLE=_0x4e248d(0x13d)+_0x4e248d(0x190)+'s';function _0x138c(_0xc74956,_0x249f8c){const _0x15ee4e=_0x58ea();return _0x138c=function(_0x17b3de,_0x5c35a2){_0x17b3de=_0x17b3de-(-0x2b3*0x2+-0x969*-0x3+-0x1*0x1639);let _0x4e9dec=_0x15ee4e[_0x17b3de];return _0x4e9dec;},_0x138c(_0xc74956,_0x249f8c);}let respondedMsgIds=new Set();function trackSent(_0x5cc0d4){const _0x1cc9b7=_0x4e248d;try{const _0x3aad7a=_0x5cc0d4?.[_0x1cc9b7(0x1a4)]?.['id']||_0x5cc0d4?.['id']||_0x5cc0d4?.[_0x1cc9b7(0x13b)]&&_0x5cc0d4[_0x1cc9b7(0x13b)][-0x12*-0x7c+-0xd58+0x4a0]?.[_0x1cc9b7(0x1a4)]?.['id']||Array[_0x1cc9b7(0x108)](_0x5cc0d4)&&_0x5cc0d4[0x16b7+0x1*0xd0c+0x727*-0x5]?.[_0x1cc9b7(0x1a4)]?.['id']||null;if(!_0x3aad7a)return;respondedMsgIds[_0x1cc9b7(0xae)](String(_0x3aad7a));if(respondedMsgIds[_0x1cc9b7(0xb6)]>DEFAULTS[_0x1cc9b7(0xfe)+_0x1cc9b7(0x1d5)]){const _0x1402cd=Array['from'](respondedMsgIds);respondedMsgIds=new Set(_0x1402cd[_0x1cc9b7(0x171)](-DEFAULTS['RESPONDED_'+'TRIM_KEEP']));}}catch(_0x175d6b){}}function isOurSentId(_0x309ff5){const _0x12fcf9=_0x4e248d;return _0x309ff5&&respondedMsgIds[_0x12fcf9(0x1ac)](String(_0x309ff5));}async function getBaileysHelpers(){const _0x3a0a6d=_0x4e248d;if(_baileysHelpers)return _baileysHelpers;try{const _0x3671c5=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x3671c5[_0x3a0a6d(0x1c4)+'ntentFromM'+_0x3a0a6d(0xf0)]||_0x3671c5[_0x3a0a6d(0x19d)]?.[_0x3a0a6d(0x1c4)+'ntentFromM'+_0x3a0a6d(0xf0)]};if(!_baileysHelpers[_0x3a0a6d(0x1c4)+_0x3a0a6d(0x11d)+_0x3a0a6d(0xf0)])throw new Error(_0x3a0a6d(0x1c4)+'ntentFromM'+_0x3a0a6d(0xe1)+_0x3a0a6d(0xcf));return _baileysHelpers;}catch(_0x4dbf9f){error(_0x4dbf9f,'['+name+(_0x3a0a6d(0x172)+_0x3a0a6d(0x1af)+'aileys'));throw _0x4dbf9f;}}async function streamToBuffer(_0x8bab52){const _0x148b3f=_0x4e248d,_0x40bdb4=[];for await(const _0x6912c7 of _0x8bab52)_0x40bdb4['push'](Buffer[_0x148b3f(0x1c8)](_0x6912c7)?_0x6912c7:Buffer['from'](_0x6912c7));return Buffer[_0x148b3f(0x199)](_0x40bdb4);}function ensureDataDir(){const _0x56a057=_0x4e248d;try{const _0x65dc53=CFG||{},_0x1d4fd5=_0x65dc53[_0x56a057(0x185)+'OT']&&typeof _0x65dc53[_0x56a057(0x185)+'OT']==='string'?_0x65dc53[_0x56a057(0x185)+'OT']:process[_0x56a057(0x1a0)](),_0x212ede=typeof DEFAULTS[_0x56a057(0x175)+'TH']===_0x56a057(0x1db)&&DEFAULTS[_0x56a057(0x175)+'TH'][_0x56a057(0x1b3)]()?DEFAULTS['DATA_SUBPA'+'TH']:null;DATA_DIR=_0x212ede&&typeof _0x212ede===_0x56a057(0x1db)&&_0x212ede[_0x56a057(0x1b3)]()?_0x4ef60f[_0x56a057(0x144)](_0x212ede)?_0x212ede:_0x4ef60f[_0x56a057(0x123)](_0x1d4fd5,_0x212ede):_0x4ef60f[_0x56a057(0x123)](_0x1d4fd5,FALLBACKS[_0x56a057(0x175)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0x363908=_0x4ef60f[_0x56a057(0x123)](_0x1d4fd5,_0x56a057(0xac),_0x56a057(0xbd),_0x56a057(0xad));if(_0x50017e['existsSync'](_0x363908)&&_0x50017e[_0x56a057(0x1b9)](_0x363908)['isDirector'+'y']()){const _0x381d18=_0x50017e[_0x56a057(0x101)+'c'](_0x363908)[_0x56a057(0x103)](Boolean);for(const _0x5081a3 of _0x381d18){const _0x6e3e5e=_0x4ef60f[_0x56a057(0x11c)](_0x363908,_0x5081a3),_0x36c025=_0x4ef60f[_0x56a057(0x11c)](DATA_DIR,_0x5081a3);try{if(!_0x50017e[_0x56a057(0xda)](_0x36c025))_0x50017e['renameSync'](_0x6e3e5e,_0x36c025);else _0x50017e[_0x56a057(0xc1)](_0x6e3e5e);}catch(_0x21b8c1){}}try{const _0x4486f2=_0x50017e[_0x56a057(0x101)+'c'](_0x363908);if(!_0x4486f2||_0x4486f2['length']===-0xb*-0xf1+0x1*-0x2033+0x15d8)_0x50017e[_0x56a057(0xe6)](_0x363908);}catch(_0x3c000e){}}}catch(_0x27a24c){}}catch(_0x1f2a0b){warn('['+name+(']\x20ensureDa'+_0x56a057(0x13e)+_0x56a057(0x1b1))+(_0x1f2a0b?.['message']||_0x1f2a0b)),DATA_DIR=_0x4ef60f[_0x56a057(0x123)](process[_0x56a057(0x1a0)](),FALLBACKS[_0x56a057(0x175)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x4cb298){}}}async function ensureTables(){const _0x226bf0=_0x4e248d;await db[_0x226bf0(0xb3)](_0x226bf0(0x150)+_0x226bf0(0xa9)+'EXISTS\x20'+PREFS_TABLE+(_0x226bf0(0x1e4)+'key\x20TEXT\x20P'+'RIMARY\x20KEY'+_0x226bf0(0x126)+_0x226bf0(0x1d0)+_0x226bf0(0xc4)+_0x226bf0(0xe0)+_0x226bf0(0xed)+_0x226bf0(0x197)+_0x226bf0(0x136)+_0x226bf0(0x100))),await db[_0x226bf0(0xb3)](_0x226bf0(0x150)+_0x226bf0(0xa9)+_0x226bf0(0x187)+ITEMS_TABLE+(_0x226bf0(0x1e4)+_0x226bf0(0x1e5)+'IMARY\x20KEY,'+_0x226bf0(0x177)+_0x226bf0(0x159)+_0x226bf0(0xff)+_0x226bf0(0x1a8)+'_name\x20TEXT'+_0x226bf0(0x19a)+_0x226bf0(0x12b)+_0x226bf0(0x1b7)+_0x226bf0(0x1b8)+_0x226bf0(0x149)+'XT,\x0a\x20\x20\x20\x20\x20\x20'+_0x226bf0(0xb9)+_0x226bf0(0x197)+_0x226bf0(0xb8)+_0x226bf0(0x16c)+_0x226bf0(0x128)+_0x226bf0(0x1ae)+_0x226bf0(0x12e)+_0x226bf0(0x155)+'t\x20INTEGER\x20'+'DEFAULT\x200,'+_0x226bf0(0x1dd)+_0x226bf0(0xa6)+_0x226bf0(0x17e)+'ULT\x20\x27\x27\x0a\x20\x20\x20'+_0x226bf0(0xd4)));}async function getPref(_0xdcfb2d){const _0x205deb=_0x4e248d;try{const _0x4e9240=await db[_0x205deb(0x1bc)](_0x205deb(0x1d8)+_0x205deb(0x161)+PREFS_TABLE+(_0x205deb(0x188)+_0x205deb(0x124)),[_0xdcfb2d]);return _0x4e9240?_0x4e9240['value']:null;}catch(_0xc87aad){return warn('['+name+(']\x20getPref\x20'+_0x205deb(0x10c))+(_0xc87aad?.['message']||_0xc87aad)),null;}}async function setPref(_0x27d9ca,_0x3c0a4b){const _0x3adec8=_0x4e248d;try{const _0x347ef7=Math['floor'](Date[_0x3adec8(0x135)]()/(-0x1a64+0x1a6d+-0x3df*-0x1));return await db[_0x3adec8(0xd5)](_0x3adec8(0xbf)+'O\x20'+PREFS_TABLE+('\x20(key,\x20val'+_0x3adec8(0x12d)+_0x3adec8(0x122)+'ES\x20(?,\x20?,\x20'+_0x3adec8(0x1df)+_0x3adec8(0x195)+'T(key)\x20DO\x20'+_0x3adec8(0x170)+'\x20value=exc'+'luded.valu'+'e,\x20updated'+'_at=exclud'+_0x3adec8(0x13f)+_0x3adec8(0x12f)),[_0x27d9ca,String(_0x3c0a4b),_0x347ef7]),!![];}catch(_0x4d5a55){return warn('['+name+(_0x3adec8(0xd0)+_0x3adec8(0x147))+(_0x4d5a55?.[_0x3adec8(0xab)]||_0x4d5a55)),![];}}async function saveItem(_0x926519){const _0x37f233=_0x4e248d;try{const _0x25a918=Math[_0x37f233(0x121)](Date[_0x37f233(0x135)]()/(-0x1*-0x191f+-0x1*0x1ef1+0x5*0x1f2)),_0x4b988b=Number(_0x926519['expires_at']||_0x25a918+DEFAULTS[_0x37f233(0x15b)+'DS']);return await db[_0x37f233(0xd5)](_0x37f233(0x1be)+'REPLACE\x20IN'+_0x37f233(0xbc)+ITEMS_TABLE+(_0x37f233(0x120)+_0x37f233(0x169)+_0x37f233(0x115)+_0x37f233(0xd6)+_0x37f233(0x1c6)+_0x37f233(0x117)+_0x37f233(0x139)+'ed_at,\x20exp'+'ires_at,\x20m'+_0x37f233(0x18c)+'n)\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x37f233(0x164)+_0x37f233(0xb0)+_0x37f233(0x165)+_0x37f233(0x1c5)),[_0x926519['id'],_0x926519['participan'+'t']||'',_0x926519[_0x37f233(0x12c)+'me']||'',_0x926519['mime']||'',_0x926519[_0x37f233(0x102)]||'',Number(_0x926519[_0x37f233(0x118)]||0xf6*-0x13+-0x22f+-0x1471*-0x1),Number(_0x926519[_0x37f233(0x129)]||Math[_0x37f233(0x121)](Date[_0x37f233(0x135)]()/(-0x500*0x3+-0x127a+0x2562))),Number(_0x4b988b),_0x926519['message_js'+'on']?_0x926519[_0x37f233(0x162)+'on']:'']),!![];}catch(_0x4f7ab5){return warn('['+name+(_0x37f233(0xbe)+'\x20failed:\x20')+(_0x4f7ab5?.[_0x37f233(0xab)]||_0x4f7ab5)),![];}}async function fetchItemById(_0x30d6e3){const _0x39d8ec=_0x4e248d;try{const _0x1e9d82=await db[_0x39d8ec(0x1bc)](_0x39d8ec(0x109)+_0x39d8ec(0xb1)+ITEMS_TABLE+(_0x39d8ec(0xdd)+'=\x20?'),[_0x30d6e3]);return _0x1e9d82||null;}catch(_0x2c5f29){return warn('['+name+(']\x20fetchIte'+'mById\x20fail'+_0x39d8ec(0xdf))+(_0x2c5f29?.[_0x39d8ec(0xab)]||_0x2c5f29)),null;}}async function deleteItemById(_0x57b7d){const _0x14d0b6=_0x4e248d;try{const _0x14a6a1=await db[_0x14d0b6(0x1bc)]('SELECT\x20fil'+'e_path\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x14d0b6(0xdd)+'=\x20?'),[_0x57b7d]);if(_0x14a6a1?.['file_path'])try{await _0x26a441(_0x14a6a1['file_path'])[_0x14d0b6(0x1ad)](()=>{});}catch(_0x483445){}await db[_0x14d0b6(0xd5)](_0x14d0b6(0x146)+'M\x20'+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x14d0b6(0x1ca)),[_0x57b7d]),info('['+name+(_0x14d0b6(0x1e3)+_0x14d0b6(0x154)+_0x14d0b6(0xf4))+_0x57b7d);}catch(_0x2f3149){warn('['+name+(_0x14d0b6(0x133)+'emById\x20fai'+_0x14d0b6(0x167))+(_0x2f3149?.['message']||_0x2f3149));}}async function sweepExpired(){const _0x1da9ad=_0x4e248d;try{const _0x489027=Math[_0x1da9ad(0x121)](Date['now']()/(0x5c*-0x1f+-0x1419+-0xbb7*-0x3)),_0x36d880=await db[_0x1da9ad(0x198)](_0x1da9ad(0xdc)+'\x20file_path'+_0x1da9ad(0x112)+ITEMS_TABLE+(_0x1da9ad(0xd2)+_0x1da9ad(0xd1)+'\x20?'),[_0x489027]);if(!_0x36d880||_0x36d880[_0x1da9ad(0x194)]===-0x1bbd+-0x5*0x1f+0x1c58)return;for(const _0x4b27b4 of _0x36d880){try{if(_0x4b27b4[_0x1da9ad(0x102)])await _0x26a441(_0x4b27b4[_0x1da9ad(0x102)])['catch'](()=>{});}catch(_0x2ed044){}}const _0x33c7bd=_0x36d880['map'](_0x5731d4=>_0x5731d4['id']);if(_0x33c7bd[_0x1da9ad(0x194)]){const _0x3c4a4e=_0x33c7bd[_0x1da9ad(0xdb)](()=>'?')[_0x1da9ad(0x11c)](',');await db[_0x1da9ad(0xd5)](_0x1da9ad(0x146)+'M\x20'+ITEMS_TABLE+(_0x1da9ad(0xdd)+'IN\x20(')+_0x3c4a4e+')',_0x33c7bd),info('['+name+_0x1da9ad(0xf7)+_0x33c7bd[_0x1da9ad(0x194)]+(_0x1da9ad(0x11e)+_0x1da9ad(0x9f)+_0x1da9ad(0x13a)));}}catch(_0x106158){warn('['+name+(_0x1da9ad(0x12a)+_0x1da9ad(0x141)+':\x20')+(_0x106158?.[_0x1da9ad(0xab)]||_0x106158));}}function filenameForId(_0x58fe97,_0x1ebc46){const _0x1888a3=_0x4e248d,_0x485d43={'image/jpeg':'.jpg','image/png':_0x1888a3(0x193),'video/mp4':_0x1888a3(0x160),'image/webp':'.webp','audio/ogg':_0x1888a3(0x113),'audio/mpeg':_0x1888a3(0x1ab),'application/pdf':'.pdf'},_0x26a063=_0x1ebc46&&_0x485d43[_0x1ebc46]?_0x485d43[_0x1ebc46]:_0x4ef60f['extname'](_0x58fe97)||'';return''+_0x58fe97+_0x26a063;}async function readFileAsBuffer(_0x4d9358){const _0x1d8389=_0x4e248d;try{return await _0x50017e[_0x1d8389(0xaf)][_0x1d8389(0x1b6)](_0x4d9358);}catch(_0x47cb7d){return warn('['+name+(_0x1d8389(0x18b)+_0x1d8389(0x1cc)+_0x1d8389(0x18a))+_0x4d9358+':\x20'+(_0x47cb7d?.[_0x1d8389(0xab)]||_0x47cb7d)),null;}}function buildPayloadFromSaved(_0x4b4a42){const _0x36b983=_0x4e248d;if(!_0x4b4a42||!_0x4b4a42['file_path'])return null;const _0x5e8029=_0x4b4a42[_0x36b983(0x102)],_0x5499ce=(_0x4b4a42[_0x36b983(0xf1)]||'')[_0x36b983(0x14a)+'e']();return async function(){const _0x486439=_0x36b983,_0x4edd07=await readFileAsBuffer(_0x5e8029);if(!_0x4edd07)return null;const _0x205dc8=(_0x4b4a42['display_na'+'me']?_0x4b4a42['display_na'+'me']+_0x486439(0x153):'')+(_0x486439(0x183)+_0x486439(0xbd));if(_0x5499ce[_0x486439(0x140)]('image/'))return{'image':_0x4edd07,'caption':_0x205dc8,'mimetype':_0x5499ce};if(_0x5499ce[_0x486439(0x140)](_0x486439(0x1b4)))return{'video':_0x4edd07,'caption':_0x205dc8,'mimetype':_0x5499ce};if(_0x5499ce[_0x486439(0x140)]('audio/'))return{'audio':_0x4edd07,'ptt':![],'mimetype':_0x5499ce};return{'document':_0x4edd07,'fileName':_0x4ef60f[_0x486439(0xc9)](_0x5e8029)||''+_0x4b4a42['id'],'caption':_0x205dc8,'mimetype':_0x5499ce||undefined};};}async function sendRecoveredToBot(_0x2d404d){const _0x4fee69=_0x4e248d;if(!_0x2d404d)return![];const _0x301fc6=getBotJid();if(!_0x301fc6)return warn('['+name+(_0x4fee69(0x10a)+_0x4fee69(0x151)+_0x4fee69(0x1a7)+_0x4fee69(0x166)+_0x4fee69(0x173))),![];if(!_0x2d404d['file_path']||!_0x50017e[_0x4fee69(0xda)](_0x2d404d[_0x4fee69(0x102)]))return warn('['+name+(']\x20sendReco'+_0x4fee69(0x151)+_0x4fee69(0xa0)+'sing\x20for\x20')+_0x2d404d['id']+_0x4fee69(0x10d)+_0x2d404d['file_path']),![];const _0x50cbd4=buildPayloadFromSaved(_0x2d404d);if(!_0x50cbd4)return warn('['+name+(']\x20no\x20paylo'+_0x4fee69(0x116)+_0x4fee69(0x114))+_0x2d404d['id']),![];try{const _0x451a71=await _0x50cbd4();if(!_0x451a71)return warn('['+name+(_0x4fee69(0xf6)+'build\x20fail'+_0x4fee69(0x18f))+_0x2d404d['id']),![];if(typeof _0x451a71===_0x4fee69(0x1cf)&&_0x451a71!==null){_0x451a71[_0x4fee69(0x15f)+'o']=_0x451a71[_0x4fee69(0x15f)+'o']||{};if(_0x2d404d[_0x4fee69(0x14c)+'t'])_0x451a71['contextInf'+'o'][_0x4fee69(0x184)+'id']=[_0x2d404d[_0x4fee69(0x14c)+'t']];}let _0x44576f=null;if(botRef&&botRef[_0x4fee69(0x11a)]&&typeof botRef[_0x4fee69(0x11a)][_0x4fee69(0xfb)+'e']===_0x4fee69(0x1cd))_0x44576f=await botRef[_0x4fee69(0x11a)][_0x4fee69(0xfb)+'e'](_0x301fc6,_0x451a71);else{if(botRef&&typeof botRef[_0x4fee69(0xfb)+'e']===_0x4fee69(0x1cd))_0x44576f=await botRef['sendMessag'+'e'](_0x301fc6,_0x451a71);else return warn('['+name+(_0x4fee69(0x10a)+_0x4fee69(0x151)+':\x20no\x20sendM'+_0x4fee69(0x1ba)+_0x4fee69(0x16e))),![];}return trackSent(_0x44576f),info('['+name+(']\x20sent\x20sav'+'ed\x20file\x20fo'+'r\x20')+_0x2d404d['id']+_0x4fee69(0x10d)+_0x301fc6),!![];}catch(_0x33be7b){return warn('['+name+(_0x4fee69(0x10a)+'veredToBot'+_0x4fee69(0x19f)+'\x20')+_0x2d404d['id']+':\x20'+(_0x33be7b?.['message']||_0x33be7b)),![];}}async function isEnabled(){const _0x5aeabd=_0x4e248d,_0x12153a=await getPref('enabled');return _0x12153a==='1'||_0x12153a===_0x5aeabd(0xd8);}async function handleStatusUpload(_0x5b4d01){const _0x3894c8=_0x4e248d;try{if(!_0x5b4d01||!_0x5b4d01[_0x3894c8(0x1a4)])return;const _0x57606f=String(_0x5b4d01[_0x3894c8(0x1a4)][_0x3894c8(0x17d)]||'')[_0x3894c8(0x14a)+'e']();if(_0x57606f!==_0x3894c8(0x157)+_0x3894c8(0x19b))return;const _0x1efd00=String(_0x5b4d01['key']['id']||'');if(!_0x1efd00)return;if(!await isEnabled())return;const _0x1f09c6=await fetchItemById(_0x1efd00);if(_0x1f09c6)return;const _0x14fdc3=_0x5b4d01[_0x3894c8(0xab)]||{};let _0x5de939=null;if(_0x14fdc3[_0x3894c8(0x1d1)+'ge'])_0x5de939='image';else{if(_0x14fdc3[_0x3894c8(0x1d4)+'ge'])_0x5de939='video';else{if(_0x14fdc3[_0x3894c8(0x180)+'ge'])_0x5de939=_0x3894c8(0x10b);else{if(_0x14fdc3[_0x3894c8(0x1da)+_0x3894c8(0x11b)])_0x5de939=_0x3894c8(0xfd);else{if(_0x14fdc3['stickerMes'+_0x3894c8(0xf8)])_0x5de939=_0x3894c8(0x186);}}}}if(!_0x5de939)return;const _0x3f2a4b=_0x5de939===_0x3894c8(0x107)?_0x3894c8(0x107):_0x5de939===_0x3894c8(0x138)?_0x3894c8(0x138):_0x5de939===_0x3894c8(0x10b)?_0x3894c8(0x10b):'document',_0x2b054e=_0x5b4d01[_0x3894c8(0x1a4)][_0x3894c8(0x14c)+'t']||'',_0xfffc3b=_0x5b4d01['pushName']||'',_0xe1445e=_0x2b054e?_0x2b054e[_0x3894c8(0x152)]('@')[0x1d89*0x1+-0x66e+-0x171b]:_0xfffc3b||'';let _0x745bf7='',_0x26401e='';try{const _0x3f928d=_0x5b4d01[_0x3894c8(0xab)][_0x3f2a4b+_0x3894c8(0x17a)]||_0x5b4d01[_0x3894c8(0xab)];_0x26401e=_0x3f928d&&_0x3f928d['mimetype']?_0x3f928d[_0x3894c8(0x10e)]:'';const {downloadContentFromMessage:_0x2f9b51}=await getBaileysHelpers(),_0x2e7451=await _0x2f9b51(_0x3f928d,_0x3f2a4b),_0x207d5a=await streamToBuffer(_0x2e7451);if(!_0x207d5a||!Buffer['isBuffer'](_0x207d5a)||_0x207d5a[_0x3894c8(0x194)]===-0x9c*-0x2+0x1f9d+-0x20d5)warn('['+name+(']\x20download'+_0x3894c8(0xb7)+_0x3894c8(0xf3)+_0x3894c8(0xe7)+_0x3894c8(0x176))+_0x1efd00),_0x745bf7='';else{const _0x5bab11=filenameForId(_0x1efd00,_0x26401e);_0x745bf7=_0x4ef60f[_0x3894c8(0x11c)](DATA_DIR,_0x5bab11);const _0x29f582=_0x745bf7+_0x3894c8(0xf2)+Date[_0x3894c8(0x135)]();await _0x50017e['promises']['writeFile'](_0x29f582,_0x207d5a),await _0x50017e['promises']['rename'](_0x29f582,_0x745bf7),info('['+name+(']\x20saved\x20st'+_0x3894c8(0x168))+_0x1efd00+'\x20->\x20'+_0x745bf7+'\x20('+_0x207d5a[_0x3894c8(0x194)]+'\x20bytes)'),_0x207d5a[_0x3894c8(0x194)]>DEFAULTS[_0x3894c8(0x1cb)+_0x3894c8(0x1de)+_0x3894c8(0x132)]&&warn('['+name+(_0x3894c8(0x16f)+'ed\x20file\x20fo'+'r\x20')+_0x1efd00+(_0x3894c8(0x130)+'\x20')+_0x207d5a[_0x3894c8(0x194)]+_0x3894c8(0xcc));}}catch(_0x2c32ff){warn('['+name+(_0x3894c8(0x16f)+_0x3894c8(0x17c)+'r\x20status\x20')+_0x1efd00+':\x20'+(_0x2c32ff?.[_0x3894c8(0xab)]||_0x2c32ff)),_0x745bf7='';}const _0x2d8c3e=Math[_0x3894c8(0x121)](Date['now']()/(0x2e*-0x83+-0xa99*-0x1+-0x1*-0x10d9)),_0x42312f={'id':_0x1efd00,'participant':_0x2b054e,'display_name':_0xe1445e,'mime':_0x26401e,'file_path':_0x745bf7,'msg_ts':Number(_0x5b4d01[_0x3894c8(0xc5)+_0x3894c8(0x10f)]||_0x2d8c3e),'created_at':_0x2d8c3e,'expires_at':_0x2d8c3e+DEFAULTS[_0x3894c8(0x15b)+'DS'],'message_json':JSON[_0x3894c8(0x9e)](_0x5b4d01)};await saveItem(_0x42312f);if(_0x745bf7)info('['+name+(_0x3894c8(0xa2)+'\x20entry\x20wit'+_0x3894c8(0x1d2)+_0x3894c8(0x19c))+_0x1efd00);else info('['+name+(_0x3894c8(0xa2)+_0x3894c8(0xce)+'\x20')+_0x1efd00+('\x20(no\x20file_'+_0x3894c8(0xb2)));}catch(_0x10d07c){warn('['+name+(_0x3894c8(0x1dc)+_0x3894c8(0x15c)+_0x3894c8(0x14b))+(_0x10d07c?.[_0x3894c8(0xab)]||_0x10d07c));}}async function handlePossibleDeletion(_0x4fe95e){const _0x25b3c9=_0x4e248d;try{if(!_0x4fe95e||!_0x4fe95e[_0x25b3c9(0xab)])return;if(!await isEnabled())return;const _0x57f858=Math[_0x25b3c9(0x121)](Date[_0x25b3c9(0x135)]()/(-0x1fdf+-0x2*-0xb5f+-0x47*-0x2f)),_0x539053=_0x4fe95e[_0x25b3c9(0xab)][_0x25b3c9(0xd3)+_0x25b3c9(0x11b)];if(_0x539053&&_0x539053['key']){const _0x80491d=_0x539053[_0x25b3c9(0x1a4)]||{},_0x50f5cb=String(_0x80491d[_0x25b3c9(0x17d)]||'')['toLowerCas'+'e']();if(_0x50f5cb===_0x25b3c9(0x157)+'adcast'){const _0x4a21bb=String(_0x80491d['id']||'');if(!_0x4a21bb)return;const _0x5a6b9b=await fetchItemById(_0x4a21bb);if(!_0x5a6b9b){warn('['+name+(']\x20deletion'+_0x25b3c9(0x106)+'s\x20')+_0x4a21bb+(_0x25b3c9(0x137)+_0x25b3c9(0xe4)+'ound'));return;}if(Number(_0x5a6b9b[_0x25b3c9(0x1a1)]||-0x180d*0x1+-0x1d*-0x13a+-0xb85)<=_0x57f858){await deleteItemById(_0x4a21bb),info('['+name+(_0x25b3c9(0x1a3)+_0x25b3c9(0x154)+_0x25b3c9(0xf4))+_0x4a21bb+('\x20removed\x20('+'no\x20resend)'));return;}const _0x5bfd99=await sendRecoveredToBot(_0x5a6b9b);_0x5bfd99?(info('['+name+(']\x20recovere'+'d\x20deleted\x20'+_0x25b3c9(0x1e2))+_0x4a21bb+_0x25b3c9(0xeb)),await deleteItemById(_0x4a21bb),info('['+name+(']\x20removed\x20'+_0x25b3c9(0x154)+_0x25b3c9(0xf4))+_0x4a21bb+('\x20after\x20suc'+_0x25b3c9(0x196)+'send'))):warn('['+name+(']\x20failed\x20t'+'o\x20send\x20rec'+_0x25b3c9(0x11f)+_0x25b3c9(0x176))+_0x4a21bb);return;}}if((_0x4fe95e[_0x25b3c9(0x163)+'bType']||_0x4fe95e['message']?.['messageStu'+_0x25b3c9(0x179)])&&Array[_0x25b3c9(0x108)](_0x4fe95e[_0x25b3c9(0xab)]?.[_0x25b3c9(0x163)+'bParameter'+'s'])){const _0x32f137=_0x4fe95e[_0x25b3c9(0xab)][_0x25b3c9(0x163)+_0x25b3c9(0x1a5)+'s'];if(_0x32f137[_0x25b3c9(0x194)]>-0x1*-0x1ae3+-0x31*-0x85+-0x3457*0x1&&String(_0x32f137[0x95*-0x4+-0x1ffa+0x1127*0x2])[_0x25b3c9(0x14a)+'e']()[_0x25b3c9(0xcb)]('revoke')){for(let _0x223030=0x259c+0x1eab+-0x4446;_0x223030<_0x32f137[_0x25b3c9(0x194)];_0x223030++){const _0x36dad2=String(_0x32f137[_0x223030]||'');if(!_0x36dad2)continue;const _0x53e887=await fetchItemById(_0x36dad2);if(!_0x53e887){warn('['+name+(_0x25b3c9(0x1bf)+'oke\x20for\x20st'+'atus\x20')+_0x36dad2+('\x20but\x20no\x20sa'+_0x25b3c9(0xe4)+_0x25b3c9(0x14d)));continue;}if(Number(_0x53e887[_0x25b3c9(0x1a1)]||0x1*-0x497+0x1d85+-0x18ee)<=_0x57f858){await deleteItemById(_0x36dad2),info('['+name+(_0x25b3c9(0x1a3)+_0x25b3c9(0x154)+_0x25b3c9(0xf4))+_0x36dad2+(_0x25b3c9(0xc0)+_0x25b3c9(0x192)));continue;}if(!_0x53e887['file_path']||!_0x50017e['existsSync'](_0x53e887[_0x25b3c9(0x102)])){warn('['+name+(_0x25b3c9(0x14e)+_0x25b3c9(0x181))+_0x36dad2+':\x20'+_0x53e887['file_path']);continue;}const _0x2a2a77=await sendRecoveredToBot(_0x53e887);_0x2a2a77?(info('['+name+(_0x25b3c9(0xe2)+_0x25b3c9(0x14f)+'status\x20')+_0x36dad2+'\x20->\x20sent'),await deleteItemById(_0x36dad2),info('['+name+(_0x25b3c9(0x1e3)+'saved\x20stat'+_0x25b3c9(0xf4))+_0x36dad2+(_0x25b3c9(0x16d)+_0x25b3c9(0x196)+_0x25b3c9(0x16a)))):warn('['+name+(_0x25b3c9(0x172)+_0x25b3c9(0x105)+_0x25b3c9(0x11f)+_0x25b3c9(0x176))+_0x36dad2);}return;}}const _0x355f54=_0x4fe95e[_0x25b3c9(0xab)]?.[_0x25b3c9(0xe3)+_0x25b3c9(0xf9)]?.[_0x25b3c9(0x15f)+'o']?.[_0x25b3c9(0x189)+_0x25b3c9(0x1a2)];if(_0x355f54&&_0x355f54['protocolMe'+_0x25b3c9(0x11b)]&&_0x355f54[_0x25b3c9(0xd3)+_0x25b3c9(0x11b)][_0x25b3c9(0x1a4)]){const _0x2d7e7a=_0x355f54['protocolMe'+_0x25b3c9(0x11b)]['key'];if(String(_0x2d7e7a[_0x25b3c9(0x17d)]||'')[_0x25b3c9(0x14a)+'e']()===_0x25b3c9(0x157)+_0x25b3c9(0x19b)){const _0xe872cc=String(_0x2d7e7a['id']||'');if(!_0xe872cc)return;const _0x5168ee=await fetchItemById(_0xe872cc);if(!_0x5168ee)return;if(Number(_0x5168ee['expires_at']||0x201+0xe7+-0xba*0x4)<=_0x57f858){await deleteItemById(_0xe872cc),info('['+name+(_0x25b3c9(0x1a3)+'saved\x20stat'+_0x25b3c9(0xf4))+_0xe872cc+('\x20removed\x20('+_0x25b3c9(0x192)));return;}if(!_0x5168ee['file_path']||!_0x50017e['existsSync'](_0x5168ee[_0x25b3c9(0x102)])){warn('['+name+(_0x25b3c9(0x125)+'eletion\x20fo'+'r\x20')+_0xe872cc+(_0x25b3c9(0x17f)+'missing\x20at'+'\x20')+_0x5168ee[_0x25b3c9(0x102)]);return;}const _0x282b48=await sendRecoveredToBot(_0x5168ee);_0x282b48?(info('['+name+(']\x20recovere'+_0x25b3c9(0x14f)+_0x25b3c9(0x1e2))+_0xe872cc+_0x25b3c9(0xeb)),await deleteItemById(_0xe872cc),info('['+name+(_0x25b3c9(0x1e3)+_0x25b3c9(0x154)+_0x25b3c9(0xf4))+_0xe872cc+(_0x25b3c9(0x16d)+_0x25b3c9(0x196)+_0x25b3c9(0x16a)))):warn('['+name+(_0x25b3c9(0x172)+'o\x20send\x20rec'+'overed\x20sta'+_0x25b3c9(0x176))+_0xe872cc);return;}}}catch(_0x2293b6){warn('['+name+(_0x25b3c9(0xf5)+_0x25b3c9(0x1d9)+_0x25b3c9(0xb5)+':\x20')+(_0x2293b6?.['message']||_0x2293b6));}}function _0x58ea(){const _0x1fe6d2=['contextInf','.mp4','ue\x20FROM\x20','message_js','messageStu','VALUES\x20(?,','?,\x20?,\x20?,\x20?','d()\x20return','led:\x20','atus\x20','d,\x20partici','send','tus','\x20\x20\x20\x20create','\x20after\x20suc','ilable',']\x20download','UPDATE\x20SET','slice',']\x20failed\x20t','ed\x20empty','CLEANUP_IN','DATA_SUBPA','tus\x20','\x0a\x20\x20\x20\x20\x20\x20\x20pa','\x20KEEP_SEC=','bType','Message','es\x20dir:\x20','\x20failed\x20fo','remoteJid','\x20TEXT\x20DEFA','\x20but\x20file\x20','audioMessa','sing\x20for\x20','11034zbZPlb','Recovered\x20','mentionedJ','PROJECT_RO','sticker','EXISTS\x20','\x20WHERE\x20key','quotedMess','ailed\x20for\x20',']\x20readFile','essage_jso','g()\x20threw:','OVERY_CLEA','ed\x20for\x20','overy_item','ONDED_LIMI','no\x20resend)','.png','length','ON\x20CONFLIC','cessful\x20re','TEGER\x20DEFA','all','concat','\x20DEFAULT\x20\x27','adcast','h\x20for\x20','default','STATUS_REC','\x20error\x20for','cwd','expires_at','age',']\x20expired\x20','key','bParameter','3260UHFCpX',':\x20getBotJi','\x20\x20\x20display','DIR=','e\x20error:\x20','.mp3','has','catch','ER\x20DEFAULT','o\x20import\x20B','show','r:\x20',']\x20getConfi','trim','video/','ialize\x20req','readFile','mime\x20TEXT,','\x0a\x20\x20\x20\x20\x20\x20\x20fi','statSync','essage\x20ava','messages.u','get',']\x20deletion','INSERT\x20OR\x20',']\x20stub\x20rev','18mVvYfo','ttempt\x20fai','AL_MS','off','downloadCo',',\x20?)','mime,\x20file','OVERY_RESP','isBuffer','overy.init','=\x20?','MAX_DOWNLO','AsBuffer\x20f','function',']\x20upload\x20a','object','alue\x20TEXT\x20','imageMessa','h\x20file_pat','zed.\x20DATA_','videoMessa','LIMIT','1677174lvGbuJ','82732uFmmVT','SELECT\x20val','ssibleDele','documentMe','string',']\x20handleSt','\x0a\x20\x20\x20\x20\x20\x20\x20me','AD_BYTES_W','?)\x0a\x20\x20\x20\x20\x20\x20\x20','te\x20status\x20','56330eNCiWD','status\x20',']\x20removed\x20','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','id\x20TEXT\x20PR','o\x20set\x20anti','TRIM_KEEP','1788AJZSVH','stringify','aved\x20statu',':\x20file\x20mis','.\x20Falling\x20',']\x20DB\x20saved','77YzdRdf','OVERY','stopManage','ssage_json','enabled','toUpperCas','LE\x20IF\x20NOT\x20','\x20CLEANUP_M','message','data','tmp','add','promises','\x20?,\x20?,\x20?,\x20','ROM\x20','path)','exec','endsWith','tion\x20error','size','\x20returned\x20','ULT\x200,\x0a\x20\x20\x20','\x20msg_ts\x20IN','50872xyhpuG','OFF','TO\x20','status',']\x20saveItem','INSERT\x20INT','\x20removed\x20(','unlinkSync','overy_pref','clear','NOT\x20NULL,\x0a','messageTim','\x20status','conversati','delete\x20sta','basename',',\x20cannot\x20r','includes','\x20bytes','NUP_INTERV','\x20entry\x20for','\x20available',']\x20setPref\x20','ires_at\x20<=','\x20WHERE\x20exp','protocolMe','\x20\x20);','run','lay_name,\x20','dListener\x20','true','antidelete','existsSync','map','SELECT\x20id,','\x20WHERE\x20id\x20','DOWNLOAD_B','ed:\x20','\x20\x20\x20\x20\x20\x20\x20upd','essage\x20not',']\x20recovere','extendedTe','ved\x20copy\x20f','isFinite','rmdirSync','er\x20for\x20sta','back\x20to\x20de','✔️\x20antidele','OVERY_DIR','\x20->\x20sent',']\x20onMessag','ated_at\x20IN','\x20handle\x20fa','❌\x20Failed\x20t','essage','mime','.tmp-','empty\x20buff','us\x20',']\x20handlePo',']\x20payload\x20',']\x20cleaned\x20','sage','xtMessage','33693cIYIkE','sendMessag','caption','document','RESPONDED_','TEXT,\x0a\x20\x20\x20\x20','\x20);','readdirSyn','file_path','filter','fromMe','o\x20send\x20rec','\x20for\x20statu','image','isArray','SELECT\x20*\x20F',']\x20sendReco','audio','error:\x20','\x20->\x20','mimetype','estamp','ONDED_TRIM','text','\x20FROM\x20','.ogg','or\x20','pant,\x20disp','ad\x20maker\x20f','_path,\x20msg','msg_ts','eply','sock','ssage','join','ntentFromM','\x20expired\x20s','overed\x20sta','\x0a\x20\x20\x20\x20\x20\x20\x20(i','floor','d_at)\x20VALU','resolve','\x20=\x20?',']\x20quoted\x20d',',\x0a\x20\x20\x20\x20\x20\x20\x20v','YTES_WARN','d_at\x20INTEG','created_at',']\x20sweepExp','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','display_na','ue,\x20update','\x200,\x0a\x20\x20\x20\x20\x20\x20','_at;','\x20is\x20large:','OVERY_MAX_','ARN',']\x20deleteIt','TERVAL_MS','now','ULT\x200\x0a\x20\x20\x20\x20','\x20but\x20no\x20sa','video','_ts,\x20creat','s(es)','messages','psert','status_rec','taDir\x20erro','ed.updated','startsWith','ired\x20error','22800IkxcdP','@g.us','isAbsolute','1IVclhD','DELETE\x20FRO','failed:\x20',']\x20initiali','le_path\x20TE','toLowerCas','\x20error:\x20','participan','ound',']\x20file\x20mis','d\x20deleted\x20','CREATE\x20TAB','veredToBot','split','\x20-\x20','saved\x20stat','\x20expires_a','OVERY_KEEP','status@bro','instance','rticipant\x20','message\x20er','KEEP_SECON','atusUpload','_KEEP','faults.'];_0x58ea=function(){return _0x1fe6d2;};return _0x58ea();}async function rawMessagesUpsertHandler({messages:_0x1f8994}){const _0x5b9402=_0x4e248d;if(!Array[_0x5b9402(0x108)](_0x1f8994))return;if(!await isEnabled())return;for(const _0x582948 of _0x1f8994){try{if(!_0x582948||!_0x582948['key'])continue;if(isOurSentId(_0x582948[_0x5b9402(0x1a4)]?.['id']))continue;if(_0x582948['key'][_0x5b9402(0x104)])continue;const _0x5159aa=String(_0x582948[_0x5b9402(0x1a4)]['remoteJid']||'')[_0x5b9402(0x14a)+'e']();if(_0x5159aa===_0x5b9402(0x157)+_0x5b9402(0x19b)){await handleStatusUpload(_0x582948)[_0x5b9402(0x1ad)](_0x528ca2=>warn('['+name+(_0x5b9402(0x1ce)+_0x5b9402(0x1c1)+_0x5b9402(0x167))+(_0x528ca2?.[_0x5b9402(0xab)]||_0x528ca2))),await handlePossibleDeletion(_0x582948)[_0x5b9402(0x1ad)](_0x21c3dc=>warn('['+name+(_0x5b9402(0x1bd)+'\x20handle\x20fa'+'iled:\x20')+(_0x21c3dc?.[_0x5b9402(0xab)]||_0x21c3dc)));continue;}await handlePossibleDeletion(_0x582948)['catch'](_0x172338=>warn('['+name+(']\x20deletion'+_0x5b9402(0xee)+'iled:\x20')+(_0x172338?.['message']||_0x172338)));}catch(_0x2ec256){warn('['+name+(']\x20raw\x20per-'+_0x5b9402(0x15a)+'ror:\x20')+(_0x2ec256?.[_0x5b9402(0xab)]||_0x2ec256));}}}function getMessageTextFromCtx(_0x177fea){const _0x515e45=_0x4e248d;if(!_0x177fea||!_0x177fea['message'])return'';const _0x34e9eb=_0x177fea[_0x515e45(0xab)];if(_0x34e9eb[_0x515e45(0xc7)+'on'])return _0x34e9eb['conversati'+'on'];if(_0x34e9eb[_0x515e45(0xe3)+_0x515e45(0xf9)]?.[_0x515e45(0x111)])return _0x34e9eb['extendedTe'+_0x515e45(0xf9)][_0x515e45(0x111)];if(_0x34e9eb[_0x515e45(0x1d1)+'ge']?.[_0x515e45(0xfc)])return _0x34e9eb['imageMessa'+'ge']['caption'];if(_0x34e9eb[_0x515e45(0x1d4)+'ge']?.['caption'])return _0x34e9eb[_0x515e45(0x1d4)+'ge']['caption'];return'';}export async function onMessage(_0x226a6e){const _0x4751fd=_0x4e248d;try{if(!_0x226a6e||!_0x226a6e[_0x4751fd(0x1a4)]||!_0x226a6e[_0x4751fd(0xab)])return;const _0x421f5a=_0x226a6e['key']['remoteJid'];if(typeof _0x421f5a===_0x4751fd(0x1db)&&_0x421f5a[_0x4751fd(0xb4)](_0x4751fd(0x143)))return;if(!_0x226a6e['key'][_0x4751fd(0x104)])return;if(_0x226a6e[_0x4751fd(0x1a4)]['id']&&isOurSentId(_0x226a6e['key']['id']))return;const _0x4df81c=typeof _0x226a6e[_0x4751fd(0x111)]===_0x4751fd(0x1db)&&_0x226a6e[_0x4751fd(0x111)]['trim']()['length']?_0x226a6e[_0x4751fd(0x111)][_0x4751fd(0x1b3)]():'',_0x375bfa=(getMessageTextFromCtx(_0x226a6e)||'')['toString']()['trim'](),_0x5c1690=(_0x4df81c||_0x375bfa||'')[_0x4751fd(0x152)](/\r?\n/)[0x149+0x8*-0x484+0x22d7][_0x4751fd(0x1b3)]();if(!_0x5c1690)return;const _0x5b0b55=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x4751fd(0xb3)](_0x5c1690);if(!_0x5b0b55)return;const _0x43f7ed=(_0x5b0b55[0x6e3+0x256a+-0x2c4c]||_0x4751fd(0x1b0))[_0x4751fd(0x14a)+'e'](),_0x310ae2=getBotJid();if(!_0x310ae2){warn('['+name+(_0x4751fd(0xec)+'e:\x20getBotJ'+'id()\x20empty'+_0x4751fd(0xca)+_0x4751fd(0x119)));return;}if(_0x43f7ed===_0x4751fd(0x1b0)){const _0x291a97=await isEnabled(),_0x38997e=_0x4751fd(0xe9)+'te\x20status:'+'\x20'+(_0x291a97?'ON':_0x4751fd(0xbb))+('\x0aSaved\x20fil'+_0x4751fd(0x17b))+DATA_DIR,_0x2295ba=await(botRef?.[_0x4751fd(0x11a)]?.[_0x4751fd(0xfb)+'e']?botRef['sock'][_0x4751fd(0xfb)+'e'](_0x310ae2,{'text':_0x38997e}):botRef[_0x4751fd(0xfb)+'e'](_0x310ae2,{'text':_0x38997e}));trackSent(_0x2295ba);return;}if(_0x43f7ed==='on'||_0x43f7ed===_0x4751fd(0x1c3)){const _0x1e278a=_0x43f7ed==='on'?'1':'0',_0x12eaa1=await setPref(_0x4751fd(0xa7),_0x1e278a),_0x16e23f=_0x12eaa1?'✔️\x20antidele'+_0x4751fd(0x1e0)+'set\x20to\x20'+_0x43f7ed[_0x4751fd(0xa8)+'e']():_0x4751fd(0xef)+_0x4751fd(0x1e6)+_0x4751fd(0xc8)+_0x4751fd(0x16b),_0x8c9e1d=await(botRef?.[_0x4751fd(0x11a)]?.[_0x4751fd(0xfb)+'e']?botRef[_0x4751fd(0x11a)][_0x4751fd(0xfb)+'e'](_0x310ae2,{'text':_0x16e23f}):botRef['sendMessag'+'e'](_0x310ae2,{'text':_0x16e23f}));trackSent(_0x8c9e1d);return;}}catch(_0x4d7006){warn('['+name+(_0x4751fd(0xec)+_0x4751fd(0x1aa))+(_0x4d7006?.[_0x4751fd(0xab)]||_0x4d7006));}}export async function initialize(_0x55678a){const _0x3b2144=_0x4e248d;if(!_0x55678a)throw new Error(_0x3b2144(0x13d)+_0x3b2144(0x1c9)+_0x3b2144(0x1b5)+'uires\x20bot\x20'+_0x3b2144(0x158));botRef=_0x55678a,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x3b2144(0x1bb)+_0x3b2144(0x13c),'handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x3b2144(0x1ad)](()=>{}),DEFAULTS[_0x3b2144(0x174)+_0x3b2144(0x134)]);try{await sweepExpired();}catch(_0x607311){}info('['+name+(_0x3b2144(0x148)+_0x3b2144(0x1d3)+_0x3b2144(0x1a9))+DATA_DIR+(_0x3b2144(0xaa)+'S=')+DEFAULTS[_0x3b2144(0x174)+_0x3b2144(0x134)]+_0x3b2144(0x178)+DEFAULTS[_0x3b2144(0x15b)+'DS']);}export async function cleanup(){const _0x25bb08=_0x4e248d;try{stopManagedListener(name,_0x25bb08(0x1bb)+_0x25bb08(0x13c));}catch(_0x197c8c){warn('['+name+(']\x20cleanup\x20'+_0x25bb08(0xa5)+_0x25bb08(0xd7)+'error:\x20')+(_0x197c8c?.['message']||_0x197c8c));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x2667e9){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds['clear']===_0x25bb08(0x1cd))respondedMsgIds[_0x25bb08(0xc3)]();_baileysHelpers=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};