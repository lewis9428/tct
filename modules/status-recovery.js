const _0x411107=_0x1290;(function(_0x4b65a3,_0x3b775d){const _0x383deb=_0x1290,_0x464d3c=_0x4b65a3();while(!![]){try{const _0xb0bab0=-parseInt(_0x383deb(0x1ec))/(0x78c+0x18*-0x3+0xd*-0x8f)+parseInt(_0x383deb(0x217))/(0xb*0x161+-0x1647+0x71e)*(parseInt(_0x383deb(0x1ba))/(-0x207+0x2*-0xf37+-0x8*-0x40f))+parseInt(_0x383deb(0x2bd))/(0x161f+-0x40f+-0x120c*0x1)+-parseInt(_0x383deb(0x2bf))/(0x2*0x205+0x226*-0x1+0x1df*-0x1)+-parseInt(_0x383deb(0x1fb))/(0xef6*0x1+-0x84d*-0x1+-0x9*0x295)+parseInt(_0x383deb(0x273))/(-0x1*0x1966+-0x7*0x24b+0x297a)+-parseInt(_0x383deb(0x2a2))/(0x1565*-0x1+-0x1*-0x25cf+0x12*-0xe9)*(-parseInt(_0x383deb(0x1bd))/(0x1*0x21f3+-0x29*-0x83+-0x439*0xd));if(_0xb0bab0===_0x3b775d)break;else _0x464d3c['push'](_0x464d3c['shift']());}catch(_0x1824a8){_0x464d3c['push'](_0x464d3c['shift']());}}}(_0x2b12,-0x22e6c+0x290*0x52+0x2*0x27f9d));function _0x1290(_0xbbb3ec,_0x9c4dff){const _0xdad99e=_0x2b12();return _0x1290=function(_0x92383f,_0x5acc22){_0x92383f=_0x92383f-(-0x1582+0x1e42+-0x12e*0x6);let _0x3ed4e0=_0xdad99e[_0x92383f];return _0x3ed4e0;},_0x1290(_0xbbb3ec,_0x9c4dff);}import _0xc00eec from'fs';import _0x25b44b from'path';import{mkdirSync}from'fs';import{rm as _0xf4f3c5}from'fs/promises';import{warn,error,info}from'../utils/logger.js';import{db}from'../utils/database.js';import{getConfig}from'../utils/config.js';function _0x2b12(){const _0x340ae6=['readdirSyn','bParameter',']\x20fetchIte','DEFAULT\x200,',']\x20removed\x20','clear','toString','\x20value=exc','cessful\x20re','\x20(key,\x20val','o\x20import\x20B','string','add','ror:\x20',']\x20no\x20paylo','mime','send','mimetype',']\x20DB\x20saved','rmdirSync','promises','ttempt\x20fai','LIMIT','e:\x20getBotJ','ES\x20(?,\x20?,\x20','all',']\x20deletion','failed:\x20','\x20\x20);','off','status\x20','message\x20er','iled:\x20','ntentFromM','ue\x20FROM\x20','startsWith','@g.us','le_path\x20TE','document','luded.valu','\x20after\x20suc',']\x20cleaned\x20','rename','messageStu','sendMessag','exec','ssibleDele','OVERY','adcast','CLEANUP_IN','taDir\x20erro','length','\x27,\x0a\x20\x20\x20\x20\x20\x20\x20','ed\x20file\x20fo','tion\x20error','psert','DATA_SUBPA','VALUES\x20(?,','ON\x20CONFLIC','\x20DEFAULT\x20\x27','downloadCo','_SECONDS',']\x20ensureDa','\x20KEEP_SEC=',']\x20getConfi','antidelete','INSERT\x20INT','DELETE\x20FRO','participan','filter','ROM\x20','\x20file_path','ilable','\x20-\x20','2062571ZjTLuV',']\x20sent\x20sav','\x20->\x20','msg_ts','file_path','OVERY_RESP',']\x20onMessag','pushName','INSERT\x20OR\x20','\x20WHERE\x20exp','TEXT,\x0a\x20\x20\x20\x20','AL_MS','atus\x20','renameSync','audio','from','TERVAL_MS','isAbsolute','message','video','now','path)','audioMessa','\x20bytes','o\x20set\x20anti','\x20failed:\x20','TRIM_KEEP','MAX_DOWNLO','mentionedJ',']\x20getPref\x20','videoMessa','tus\x20','protocolMe','oke\x20for\x20st','ires_at,\x20m',':\x20no\x20sendM','.mp3','t\x20INTEGER\x20','overy.init','SELECT\x20fil','concat','.ogg','resolve','split','PROJECT_RO','id\x20TEXT\x20PR','caption','8OykoGh','\x20expires_a','\x20WHERE\x20key','value','d_at\x20INTEG','catch','\x0a\x20\x20\x20\x20\x20\x20\x20pa','essage','essage_jso','.tmp-','ed\x20for\x20','status','\x20error\x20for','display_na','aved\x20statu','r\x20status\x20',']\x20failed\x20t','object','.png','statSync','?)\x0a\x20\x20\x20\x20\x20\x20\x20','d_at)\x20VALU','\x20failed\x20fo','readFile','TEGER\x20DEFA','\x20available','toUpperCas','383584iVjLTl','overed\x20sta','2156870nluDCt','OVERY_DIR','n)\x0a\x20\x20\x20\x20\x20\x20\x20','UPDATE\x20SET','\x20(no\x20file_','\x20TEXT\x20DEFA','ONDED_LIMI',']\x20download','ated_at\x20IN','expires_at','ssage_json','er\x20for\x20sta','2.3.2','ialize\x20req','Recovered\x20','endsWith','stopManage','function',']\x20saved\x20st','EXISTS\x20','stringify','rticipant\x20','bType','sing\x20for\x20','estamp','map','.webp','contextInf','zed.\x20DATA_','\x20bytes)','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','OFF','_at;','\x20entry\x20wit','\x20=\x20?','ER\x20DEFAULT','e\x20error:\x20','\x20removed\x20(','eletion\x20fo','s(es)','us\x20','messages','\x0a\x20\x20\x20\x20\x20\x20\x20me','toLowerCas','isFinite',']\x20recovere','\x20for\x20statu','tmp',']\x20deleteIt','default','status@bro','data','.\x20Falling\x20','_ts,\x20creat','enabled','isArray','remoteJid','OVERY_KEEP','.jpg','\x20handle\x20fa','ULT\x200,\x0a\x20\x20\x20',']\x20handlePo','d()\x20return','h\x20file_pat','\x20\x20\x20\x20\x20\x20\x20upd','STATUS_REC','xtMessage','status_rec','floor','137847gmEzGa','NUP_INTERV','_name\x20TEXT','2913777RylqoT',']\x20cleanup\x20','stickerMes','existsSync','veredToBot','no\x20resend)','TO\x20','run',']\x20saveItem','SELECT\x20*\x20F','aileys','messages.u',',\x0a\x20\x20\x20\x20\x20\x20\x20v','id()\x20empty','CREATE\x20TAB',']\x20expired\x20',']\x20handleSt','\x20CLEANUP_M','ved\x20copy\x20f','te\x20status\x20','ed:\x20','ULT\x20\x27\x27\x0a\x20\x20\x20','quotedMess','imageMessa','IMARY\x20KEY,','d\x20deleted\x20',']\x20readFile','✔️\x20antidele','h\x20for\x20','ue,\x20update','\x20\x20\x20display','instance','IN\x20(','sock','ed.updated','ad\x20maker\x20f','d,\x20partici','build\x20fail','led:\x20','audio/','OVERY_CLEA','_at=exclud','\x20but\x20no\x20sa','uires\x20bot\x20','\x20WHERE\x20id\x20','extendedTe','LE\x20IF\x20NOT\x20','328446WWtSLR','join','ONDED_TRIM','message_js','saved\x20stat','T(key)\x20DO\x20','ARN','ssage','includes','video/','missing\x20at','\x20);','text','AsBuffer\x20f','key\x20TEXT\x20P','226842OCjiWc','\x20is\x20large:','\x20->\x20sent','OVERY_MAX_','get','mime\x20TEXT,',']\x20setPref\x20','o\x20send\x20rec','DOWNLOAD_B','\x20entry\x20for','\x200,\x0a\x20\x20\x20\x20\x20\x20','=\x20?','overy_item','SELECT\x20val','set\x20to\x20','conversati','RESPONDED_','has',',\x20?)','key',']\x20sendReco','\x0a\x20\x20\x20\x20\x20\x20\x20(i',']\x20stub\x20rev','cwd',']\x20sweepExp','image','YTES_WARN','.mp4','14paLhcJ','ound','AD_BYTES_W','g()\x20threw:','show','basename',']\x20upload\x20a','KEEP_SECON','trim','e_path\x20FRO','isBuffer','eply','essage\x20not','alue\x20TEXT\x20','revoke','_KEEP','ULT\x200\x0a\x20\x20\x20\x20','fromMe'];_0x2b12=function(){return _0x340ae6;};return _0x2b12();}import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getBotJid}from'../utils/bot-state.js';export const name='status_rec'+'overy';export const version=_0x411107(0x2cb);export const priority=-0x112*-0x21+0xc68+-0x17a6*0x2;export const commands=[_0x411107(0x26a)+'\x20status'];export const configKeys=[_0x411107(0x29f)+'OT','STATUS_REC'+_0x411107(0x2c0),_0x411107(0x1b6)+'OVERY_CLEA'+_0x411107(0x1bb)+_0x411107(0x27e),'STATUS_REC'+_0x411107(0x1ae)+_0x411107(0x266),'STATUS_REC'+'OVERY_RESP'+_0x411107(0x2c5)+'T',_0x411107(0x1b6)+_0x411107(0x278)+_0x411107(0x1ee)+_0x411107(0x226),_0x411107(0x1b6)+_0x411107(0x1fe)+_0x411107(0x203)+_0x411107(0x215)];let CFG={};try{CFG=typeof getConfig===_0x411107(0x2d0)?getConfig()||{}:{};}catch(_0x47d6a3){warn('['+name+(_0x411107(0x269)+_0x411107(0x21a)+'\x20')+(_0x47d6a3?.[_0x411107(0x285)]||_0x47d6a3)+(_0x411107(0x2f3)+'back\x20to\x20de'+'faults.')),CFG={};}const FALLBACKS={'DATA_SUBPATH':_0x25b44b[_0x411107(0x1ed)](_0x411107(0x2f2),_0x411107(0x2ad)),'CLEANUP_INTERVAL_MS':(-0x35*0x26+-0x780+0xf76)*(0x7c1+0x41*0x7a+0x2d*-0xdb)*(-0x25*-0x27+0x1b77+-0x20de)*(-0x21a0+-0x1*-0x19a9+0x3*0x3f5),'KEEP_SECONDS':(0x1*0x1613+-0x1*-0xc19+-0x2*0x110a)*(0x5*0x517+0xf51+-0x2888)*(-0x2465+-0x244b+0x48ec),'RESPONDED_LIMIT':0x1388,'RESPONDED_TRIM_KEEP':0xbb8,'MAX_DOWNLOAD_BYTES_WARN':(-0x9d7+-0x85+0xa66)*(-0xc23+0x7b*0x43+-0x2*0x807)*(0x1*0x157f+-0x1ff9+0xe7a)};function toPositiveInt(_0x17de8c,_0x5c298a){const _0x187bed=_0x411107,_0x4d58e4=Number(_0x17de8c);if(!Number[_0x187bed(0x2eb)](_0x4d58e4)||_0x4d58e4<=0x8c5+0x17f7+-0x20bc)return _0x5c298a;return Math[_0x187bed(0x1b9)](_0x4d58e4);}const DEFAULTS={'DATA_SUBPATH':typeof CFG[_0x411107(0x1b6)+_0x411107(0x2c0)]===_0x411107(0x234)&&CFG['STATUS_REC'+'OVERY_DIR']['trim']()?CFG[_0x411107(0x1b6)+_0x411107(0x2c0)]:FALLBACKS[_0x411107(0x261)+'TH'],'CLEANUP_INTERVAL_MS':toPositiveInt(CFG[_0x411107(0x1b6)+_0x411107(0x1e5)+_0x411107(0x1bb)+_0x411107(0x27e)]??(CFG[_0x411107(0x1b6)+_0x411107(0x258)]&&CFG[_0x411107(0x1b6)+_0x411107(0x258)][_0x411107(0x25a)+_0x411107(0x283)]),FALLBACKS[_0x411107(0x25a)+'TERVAL_MS']),'KEEP_SECONDS':toPositiveInt(CFG['STATUS_REC'+_0x411107(0x1ae)+_0x411107(0x266)]??(CFG[_0x411107(0x1b6)+_0x411107(0x258)]&&CFG[_0x411107(0x1b6)+_0x411107(0x258)]['KEEP_SECON'+'DS']),FALLBACKS[_0x411107(0x21e)+'DS']),'RESPONDED_LIMIT':toPositiveInt(CFG[_0x411107(0x1b6)+'OVERY_RESP'+_0x411107(0x2c5)+'T']??(CFG[_0x411107(0x1b6)+'OVERY']&&CFG[_0x411107(0x1b6)+_0x411107(0x258)][_0x411107(0x20b)+'LIMIT']),FALLBACKS[_0x411107(0x20b)+'LIMIT']),'RESPONDED_TRIM_KEEP':toPositiveInt(CFG[_0x411107(0x1b6)+_0x411107(0x278)+_0x411107(0x1ee)+_0x411107(0x226)]??(CFG[_0x411107(0x1b6)+_0x411107(0x258)]&&CFG[_0x411107(0x1b6)+_0x411107(0x258)][_0x411107(0x20b)+'TRIM_KEEP']),FALLBACKS[_0x411107(0x20b)+_0x411107(0x28d)]),'MAX_DOWNLOAD_BYTES_WARN':toPositiveInt(CFG[_0x411107(0x1b6)+'OVERY_MAX_'+'DOWNLOAD_B'+'YTES_WARN']??(CFG[_0x411107(0x1b6)+_0x411107(0x258)]&&CFG[_0x411107(0x1b6)+_0x411107(0x258)][_0x411107(0x28e)+_0x411107(0x219)+_0x411107(0x1f2)]),FALLBACKS['MAX_DOWNLO'+_0x411107(0x219)+_0x411107(0x1f2)])};let botRef=null,DATA_DIR=null,cleanupInterval=null,_baileysHelpers=null;const PREFS_TABLE='status_rec'+'overy_pref'+'s',ITEMS_TABLE=_0x411107(0x1b8)+_0x411107(0x207)+'s';let respondedMsgIds=new Set();function trackSent(_0x73e099){const _0x597157=_0x411107;try{const _0x43c97f=_0x73e099?.[_0x597157(0x20e)]?.['id']||_0x73e099?.['id']||_0x73e099?.[_0x597157(0x2e8)]&&_0x73e099[_0x597157(0x2e8)][0x1761+-0x8a4+0xebd*-0x1]?.[_0x597157(0x20e)]?.['id']||Array[_0x597157(0x1ac)](_0x73e099)&&_0x73e099[-0x8d1+-0xad2+-0x1*-0x13a3]?.[_0x597157(0x20e)]?.['id']||null;if(!_0x43c97f)return;respondedMsgIds[_0x597157(0x235)](String(_0x43c97f));if(respondedMsgIds['size']>DEFAULTS[_0x597157(0x20b)+_0x597157(0x23f)]){const _0x348645=Array[_0x597157(0x282)](respondedMsgIds);respondedMsgIds=new Set(_0x348645['slice'](-DEFAULTS[_0x597157(0x20b)+'TRIM_KEEP']));}}catch(_0x2451c2){}}function isOurSentId(_0x3af6e8){const _0x237371=_0x411107;return _0x3af6e8&&respondedMsgIds[_0x237371(0x20c)](String(_0x3af6e8));}async function getBaileysHelpers(){const _0x4684f1=_0x411107;if(_baileysHelpers)return _baileysHelpers;try{const _0x8e1be0=await import('@whiskeysockets/baileys');_baileysHelpers={'downloadContentFromMessage':_0x8e1be0['downloadCo'+_0x4684f1(0x24a)+'essage']||_0x8e1be0[_0x4684f1(0x2f0)]?.[_0x4684f1(0x265)+_0x4684f1(0x24a)+_0x4684f1(0x2a9)]};if(!_baileysHelpers[_0x4684f1(0x265)+_0x4684f1(0x24a)+'essage'])throw new Error(_0x4684f1(0x265)+_0x4684f1(0x24a)+_0x4684f1(0x223)+_0x4684f1(0x2bb));return _baileysHelpers;}catch(_0x59b1a2){error(_0x59b1a2,'['+name+(_0x4684f1(0x2b2)+_0x4684f1(0x233)+_0x4684f1(0x1c7)));throw _0x59b1a2;}}async function streamToBuffer(_0x3f0876){const _0x3f3979=_0x411107,_0x576d33=[];for await(const _0x32b20b of _0x3f0876)_0x576d33['push'](Buffer[_0x3f3979(0x221)](_0x32b20b)?_0x32b20b:Buffer['from'](_0x32b20b));return Buffer[_0x3f3979(0x29b)](_0x576d33);}function ensureDataDir(){const _0x5df926=_0x411107;try{const _0x1b2bce=CFG||{},_0x53ec4c=_0x1b2bce['PROJECT_RO'+'OT']&&typeof _0x1b2bce['PROJECT_RO'+'OT']==='string'?_0x1b2bce[_0x5df926(0x29f)+'OT']:process[_0x5df926(0x212)](),_0x17f076=typeof DEFAULTS[_0x5df926(0x261)+'TH']==='string'&&DEFAULTS['DATA_SUBPA'+'TH'][_0x5df926(0x21f)]()?DEFAULTS[_0x5df926(0x261)+'TH']:null;DATA_DIR=_0x17f076&&typeof _0x17f076===_0x5df926(0x234)&&_0x17f076['trim']()?_0x25b44b[_0x5df926(0x284)](_0x17f076)?_0x17f076:_0x25b44b[_0x5df926(0x29d)](_0x53ec4c,_0x17f076):_0x25b44b[_0x5df926(0x29d)](_0x53ec4c,FALLBACKS[_0x5df926(0x261)+'TH']),mkdirSync(DATA_DIR,{'recursive':!![]});try{const _0xb02bd0=_0x25b44b[_0x5df926(0x29d)](_0x53ec4c,_0x5df926(0x2f2),_0x5df926(0x2ad),_0x5df926(0x2ee));if(_0xc00eec[_0x5df926(0x1c0)](_0xb02bd0)&&_0xc00eec[_0x5df926(0x2b5)](_0xb02bd0)['isDirector'+'y']()){const _0x346465=_0xc00eec['readdirSyn'+'c'](_0xb02bd0)[_0x5df926(0x26e)](Boolean);for(const _0x153e77 of _0x346465){const _0x5c5590=_0x25b44b[_0x5df926(0x1ed)](_0xb02bd0,_0x153e77),_0x2db8e1=_0x25b44b['join'](DATA_DIR,_0x153e77);try{if(!_0xc00eec[_0x5df926(0x1c0)](_0x2db8e1))_0xc00eec[_0x5df926(0x280)](_0x5c5590,_0x2db8e1);else _0xc00eec['unlinkSync'](_0x5c5590);}catch(_0x2c0b5f){}}try{const _0x4dff97=_0xc00eec[_0x5df926(0x229)+'c'](_0xb02bd0);if(!_0x4dff97||_0x4dff97[_0x5df926(0x25c)]===-0x20db+-0x1*0x23be+0x4499)_0xc00eec[_0x5df926(0x23c)](_0xb02bd0);}catch(_0x41e7f5){}}}catch(_0x430ccf){}}catch(_0x178455){warn('['+name+(_0x5df926(0x267)+_0x5df926(0x25b)+'r:\x20')+(_0x178455?.[_0x5df926(0x285)]||_0x178455)),DATA_DIR=_0x25b44b[_0x5df926(0x29d)](process['cwd'](),FALLBACKS[_0x5df926(0x261)+'TH']);try{mkdirSync(DATA_DIR,{'recursive':!![]});}catch(_0x162af4){}}}async function ensureTables(){const _0x3923fc=_0x411107;await db['exec'](_0x3923fc(0x1cb)+_0x3923fc(0x1eb)+_0x3923fc(0x2d2)+PREFS_TABLE+(_0x3923fc(0x2dd)+_0x3923fc(0x1fa)+'RIMARY\x20KEY'+_0x3923fc(0x1c9)+_0x3923fc(0x224)+'NOT\x20NULL,\x0a'+_0x3923fc(0x1b5)+_0x3923fc(0x2c7)+_0x3923fc(0x2ba)+_0x3923fc(0x227)+_0x3923fc(0x1f7))),await db[_0x3923fc(0x256)]('CREATE\x20TAB'+_0x3923fc(0x1eb)+_0x3923fc(0x2d2)+ITEMS_TABLE+(_0x3923fc(0x2dd)+_0x3923fc(0x2a0)+_0x3923fc(0x1d5)+_0x3923fc(0x2a8)+_0x3923fc(0x2d4)+_0x3923fc(0x27d)+_0x3923fc(0x1db)+_0x3923fc(0x1bc)+_0x3923fc(0x264)+_0x3923fc(0x25d)+_0x3923fc(0x200)+'\x0a\x20\x20\x20\x20\x20\x20\x20fi'+_0x3923fc(0x24e)+'XT,\x0a\x20\x20\x20\x20\x20\x20'+'\x20msg_ts\x20IN'+_0x3923fc(0x2ba)+_0x3923fc(0x1b1)+'\x20\x20\x20\x20create'+_0x3923fc(0x2a6)+_0x3923fc(0x2e2)+_0x3923fc(0x205)+_0x3923fc(0x2a3)+_0x3923fc(0x298)+_0x3923fc(0x22c)+_0x3923fc(0x2e9)+_0x3923fc(0x2c9)+_0x3923fc(0x2c4)+_0x3923fc(0x1d2)+_0x3923fc(0x245)));}async function getPref(_0xb10a99){const _0x1ed005=_0x411107;try{const _0x2a901a=await db[_0x1ed005(0x1ff)](_0x1ed005(0x208)+_0x1ed005(0x24b)+PREFS_TABLE+(_0x1ed005(0x2a4)+_0x1ed005(0x2e1)),[_0xb10a99]);return _0x2a901a?_0x2a901a[_0x1ed005(0x2a5)]:null;}catch(_0x770986){return warn('['+name+(_0x1ed005(0x290)+'error:\x20')+(_0x770986?.[_0x1ed005(0x285)]||_0x770986)),null;}}async function setPref(_0x1e9cec,_0x32274e){const _0x3538ee=_0x411107;try{const _0x4cc288=Math[_0x3538ee(0x1b9)](Date[_0x3538ee(0x287)]()/(-0xcc7*-0x1+-0x1d89*0x1+0x73*0x2e));return await db[_0x3538ee(0x1c4)](_0x3538ee(0x26b)+'O\x20'+PREFS_TABLE+(_0x3538ee(0x232)+_0x3538ee(0x1da)+_0x3538ee(0x2b7)+_0x3538ee(0x241)+_0x3538ee(0x2b6)+_0x3538ee(0x263)+_0x3538ee(0x1f1)+_0x3538ee(0x2c2)+_0x3538ee(0x230)+_0x3538ee(0x250)+'e,\x20updated'+_0x3538ee(0x1e6)+_0x3538ee(0x1df)+_0x3538ee(0x2df)),[_0x1e9cec,String(_0x32274e),_0x4cc288]),!![];}catch(_0xfcc213){return warn('['+name+(_0x3538ee(0x201)+_0x3538ee(0x244))+(_0xfcc213?.[_0x3538ee(0x285)]||_0xfcc213)),![];}}async function saveItem(_0x5bb5b2){const _0x99e3c7=_0x411107;try{const _0x5d4dcb=Math[_0x99e3c7(0x1b9)](Date[_0x99e3c7(0x287)]()/(-0x14a7+0x1a74+-0x1e5)),_0x3f501b=Number(_0x5bb5b2[_0x99e3c7(0x2c8)]||_0x5d4dcb+DEFAULTS[_0x99e3c7(0x21e)+'DS']);return await db[_0x99e3c7(0x1c4)](_0x99e3c7(0x27b)+'REPLACE\x20IN'+_0x99e3c7(0x1c3)+ITEMS_TABLE+(_0x99e3c7(0x210)+_0x99e3c7(0x1e1)+'pant,\x20disp'+'lay_name,\x20'+'mime,\x20file'+'_path,\x20msg'+_0x99e3c7(0x2f4)+'ed_at,\x20exp'+_0x99e3c7(0x295)+_0x99e3c7(0x2aa)+_0x99e3c7(0x2c1)+_0x99e3c7(0x262)+'\x20?,\x20?,\x20?,\x20'+'?,\x20?,\x20?,\x20?'+_0x99e3c7(0x20d)),[_0x5bb5b2['id'],_0x5bb5b2[_0x99e3c7(0x26d)+'t']||'',_0x5bb5b2['display_na'+'me']||'',_0x5bb5b2[_0x99e3c7(0x238)]||'',_0x5bb5b2[_0x99e3c7(0x277)]||'',Number(_0x5bb5b2[_0x99e3c7(0x276)]||0x2*0x7e5+0x1fc+-0x145*0xe),Number(_0x5bb5b2['created_at']||Math[_0x99e3c7(0x1b9)](Date[_0x99e3c7(0x287)]()/(0x10cf*-0x1+0x1d71*-0x1+0xd6*0x3c))),Number(_0x3f501b),_0x5bb5b2[_0x99e3c7(0x1ef)+'on']?_0x5bb5b2[_0x99e3c7(0x1ef)+'on']:'']),!![];}catch(_0x353daf){return warn('['+name+(_0x99e3c7(0x1c5)+_0x99e3c7(0x28c))+(_0x353daf?.['message']||_0x353daf)),![];}}async function fetchItemById(_0x4e07f3){const _0x4cdd8c=_0x411107;try{const _0x409ae4=await db[_0x4cdd8c(0x1ff)](_0x4cdd8c(0x1c6)+_0x4cdd8c(0x26f)+ITEMS_TABLE+(_0x4cdd8c(0x1e9)+_0x4cdd8c(0x206)),[_0x4e07f3]);return _0x409ae4||null;}catch(_0x221d86){return warn('['+name+(_0x4cdd8c(0x22b)+'mById\x20fail'+_0x4cdd8c(0x1d1))+(_0x221d86?.[_0x4cdd8c(0x285)]||_0x221d86)),null;}}async function deleteItemById(_0x2974ef){const _0x59cb62=_0x411107;try{const _0x5eff4b=await db['get'](_0x59cb62(0x29a)+_0x59cb62(0x220)+'M\x20'+ITEMS_TABLE+(_0x59cb62(0x1e9)+'=\x20?'),[_0x2974ef]);if(_0x5eff4b?.[_0x59cb62(0x277)])try{await _0xf4f3c5(_0x5eff4b[_0x59cb62(0x277)])[_0x59cb62(0x2a7)](()=>{});}catch(_0x400868){}await db[_0x59cb62(0x1c4)](_0x59cb62(0x26c)+'M\x20'+ITEMS_TABLE+('\x20WHERE\x20id\x20'+_0x59cb62(0x206)),[_0x2974ef]),info('['+name+(_0x59cb62(0x22d)+'saved\x20stat'+_0x59cb62(0x2e7))+_0x2974ef);}catch(_0xd90b){warn('['+name+(_0x59cb62(0x2ef)+'emById\x20fai'+_0x59cb62(0x1e3))+(_0xd90b?.[_0x59cb62(0x285)]||_0xd90b));}}async function sweepExpired(){const _0x56eaa6=_0x411107;try{const _0xcb61b3=Math['floor'](Date['now']()/(-0x89d+0xc4*-0x27+-0x13*-0x23b)),_0x4daf9a=await db[_0x56eaa6(0x242)]('SELECT\x20id,'+_0x56eaa6(0x270)+'\x20FROM\x20'+ITEMS_TABLE+(_0x56eaa6(0x27c)+'ires_at\x20<='+'\x20?'),[_0xcb61b3]);if(!_0x4daf9a||_0x4daf9a[_0x56eaa6(0x25c)]===0xe06+-0x200c+0x301*0x6)return;for(const _0x31c1a6 of _0x4daf9a){try{if(_0x31c1a6[_0x56eaa6(0x277)])await _0xf4f3c5(_0x31c1a6[_0x56eaa6(0x277)])['catch'](()=>{});}catch(_0x40b116){}}const _0x12a541=_0x4daf9a['map'](_0x33e308=>_0x33e308['id']);if(_0x12a541['length']){const _0x232e9c=_0x12a541[_0x56eaa6(0x2d8)](()=>'?')['join'](',');await db[_0x56eaa6(0x1c4)]('DELETE\x20FRO'+'M\x20'+ITEMS_TABLE+(_0x56eaa6(0x1e9)+_0x56eaa6(0x1dd))+_0x232e9c+')',_0x12a541),info('['+name+_0x56eaa6(0x252)+_0x12a541[_0x56eaa6(0x25c)]+('\x20expired\x20s'+_0x56eaa6(0x2b0)+_0x56eaa6(0x2e6)));}}catch(_0x35baa6){warn('['+name+(_0x56eaa6(0x213)+'ired\x20error'+':\x20')+(_0x35baa6?.[_0x56eaa6(0x285)]||_0x35baa6));}}function filenameForId(_0x91f1e4,_0x497c7e){const _0x17293a=_0x411107,_0x5b1a1b={'image/jpeg':_0x17293a(0x1af),'image/png':_0x17293a(0x2b4),'video/mp4':_0x17293a(0x216),'image/webp':_0x17293a(0x2d9),'audio/ogg':_0x17293a(0x29c),'audio/mpeg':_0x17293a(0x297),'application/pdf':'.pdf'},_0x24b4ca=_0x497c7e&&_0x5b1a1b[_0x497c7e]?_0x5b1a1b[_0x497c7e]:_0x25b44b['extname'](_0x91f1e4)||'';return''+_0x91f1e4+_0x24b4ca;}async function readFileAsBuffer(_0x3ab45f){const _0x5e892b=_0x411107;try{return await _0xc00eec[_0x5e892b(0x23d)][_0x5e892b(0x2b9)](_0x3ab45f);}catch(_0x3047b5){return warn('['+name+(_0x5e892b(0x1d7)+_0x5e892b(0x1f9)+'ailed\x20for\x20')+_0x3ab45f+':\x20'+(_0x3047b5?.[_0x5e892b(0x285)]||_0x3047b5)),null;}}function buildPayloadFromSaved(_0x2fe82b){const _0xb6c47c=_0x411107;if(!_0x2fe82b||!_0x2fe82b[_0xb6c47c(0x277)])return null;const _0x280d4d=_0x2fe82b[_0xb6c47c(0x277)],_0x2ef012=(_0x2fe82b['mime']||'')['toLowerCas'+'e']();return async function(){const _0x18016a=_0xb6c47c,_0x1af1ba=await readFileAsBuffer(_0x280d4d);if(!_0x1af1ba)return null;const _0x9b04ea=(_0x2fe82b[_0x18016a(0x2af)+'me']?_0x2fe82b[_0x18016a(0x2af)+'me']+_0x18016a(0x272):'')+(_0x18016a(0x2cd)+_0x18016a(0x2ad));if(_0x2ef012[_0x18016a(0x24c)]('image/'))return{'image':_0x1af1ba,'caption':_0x9b04ea,'mimetype':_0x2ef012};if(_0x2ef012['startsWith'](_0x18016a(0x1f5)))return{'video':_0x1af1ba,'caption':_0x9b04ea,'mimetype':_0x2ef012};if(_0x2ef012['startsWith'](_0x18016a(0x1e4)))return{'audio':_0x1af1ba,'ptt':![],'mimetype':_0x2ef012};return{'document':_0x1af1ba,'fileName':_0x25b44b[_0x18016a(0x21c)](_0x280d4d)||''+_0x2fe82b['id'],'caption':_0x9b04ea,'mimetype':_0x2ef012||undefined};};}async function sendRecoveredToBot(_0x368f10){const _0x113f69=_0x411107;if(!_0x368f10)return![];const _0x377b0b=getBotJid();if(!_0x377b0b)return warn('['+name+(']\x20sendReco'+_0x113f69(0x1c1)+':\x20getBotJi'+_0x113f69(0x1b3)+'ed\x20empty')),![];if(!_0x368f10[_0x113f69(0x277)]||!_0xc00eec[_0x113f69(0x1c0)](_0x368f10[_0x113f69(0x277)]))return warn('['+name+(']\x20sendReco'+_0x113f69(0x1c1)+':\x20file\x20mis'+'sing\x20for\x20')+_0x368f10['id']+_0x113f69(0x275)+_0x368f10[_0x113f69(0x277)]),![];const _0x33f205=buildPayloadFromSaved(_0x368f10);if(!_0x33f205)return warn('['+name+(_0x113f69(0x237)+_0x113f69(0x1e0)+'or\x20')+_0x368f10['id']),![];try{const _0xdec348=await _0x33f205();if(!_0xdec348)return warn('['+name+(']\x20payload\x20'+_0x113f69(0x1e2)+_0x113f69(0x2ac))+_0x368f10['id']),![];if(typeof _0xdec348===_0x113f69(0x2b3)&&_0xdec348!==null){_0xdec348[_0x113f69(0x2da)+'o']=_0xdec348[_0x113f69(0x2da)+'o']||{};if(_0x368f10[_0x113f69(0x26d)+'t'])_0xdec348[_0x113f69(0x2da)+'o'][_0x113f69(0x28f)+'id']=[_0x368f10[_0x113f69(0x26d)+'t']];}let _0x200c2b=null;if(botRef&&botRef[_0x113f69(0x1de)]&&typeof botRef[_0x113f69(0x1de)][_0x113f69(0x255)+'e']===_0x113f69(0x2d0))_0x200c2b=await botRef[_0x113f69(0x1de)][_0x113f69(0x255)+'e'](_0x377b0b,_0xdec348);else{if(botRef&&typeof botRef['sendMessag'+'e']===_0x113f69(0x2d0))_0x200c2b=await botRef[_0x113f69(0x255)+'e'](_0x377b0b,_0xdec348);else return warn('['+name+(_0x113f69(0x20f)+_0x113f69(0x1c1)+_0x113f69(0x296)+'essage\x20ava'+_0x113f69(0x271))),![];}return trackSent(_0x200c2b),info('['+name+(_0x113f69(0x274)+_0x113f69(0x25e)+'r\x20')+_0x368f10['id']+_0x113f69(0x275)+_0x377b0b),!![];}catch(_0x1400a5){return warn('['+name+(']\x20sendReco'+_0x113f69(0x1c1)+_0x113f69(0x2ae)+'\x20')+_0x368f10['id']+':\x20'+(_0x1400a5?.[_0x113f69(0x285)]||_0x1400a5)),![];}}async function isEnabled(){const _0x24b184=_0x411107,_0xc85032=await getPref(_0x24b184(0x2f5));return _0xc85032==='1'||_0xc85032==='true';}async function handleStatusUpload(_0x5cb444){const _0x1959b1=_0x411107;try{if(!_0x5cb444||!_0x5cb444[_0x1959b1(0x20e)])return;const _0x6405aa=String(_0x5cb444[_0x1959b1(0x20e)]['remoteJid']||'')[_0x1959b1(0x2ea)+'e']();if(_0x6405aa!==_0x1959b1(0x2f1)+_0x1959b1(0x259))return;const _0x2dea9f=String(_0x5cb444['key']['id']||'');if(!_0x2dea9f)return;if(!await isEnabled())return;const _0x49f8e3=await fetchItemById(_0x2dea9f);if(_0x49f8e3)return;const _0x291a88=_0x5cb444[_0x1959b1(0x285)]||{};let _0x5c670c=null;if(_0x291a88[_0x1959b1(0x1d4)+'ge'])_0x5c670c=_0x1959b1(0x214);else{if(_0x291a88['videoMessa'+'ge'])_0x5c670c=_0x1959b1(0x286);else{if(_0x291a88[_0x1959b1(0x289)+'ge'])_0x5c670c=_0x1959b1(0x281);else{if(_0x291a88['documentMe'+_0x1959b1(0x1f3)])_0x5c670c=_0x1959b1(0x24f);else{if(_0x291a88[_0x1959b1(0x1bf)+'sage'])_0x5c670c='sticker';}}}}if(!_0x5c670c)return;const _0x1dbb7a=_0x5c670c==='image'?_0x1959b1(0x214):_0x5c670c===_0x1959b1(0x286)?'video':_0x5c670c===_0x1959b1(0x281)?'audio':_0x1959b1(0x24f),_0x4e46c9=_0x5cb444[_0x1959b1(0x20e)][_0x1959b1(0x26d)+'t']||'',_0x71e0f8=_0x5cb444[_0x1959b1(0x27a)]||'',_0x51a1a5=_0x4e46c9?_0x4e46c9[_0x1959b1(0x29e)]('@')[-0xa0f+0x1e4e+-0x143f]:_0x71e0f8||'';let _0xd723c3='',_0x346849='';try{const _0x45e283=_0x5cb444['message'][_0x1dbb7a+'Message']||_0x5cb444[_0x1959b1(0x285)];_0x346849=_0x45e283&&_0x45e283['mimetype']?_0x45e283[_0x1959b1(0x23a)]:'';const {downloadContentFromMessage:_0x15e747}=await getBaileysHelpers(),_0x22b9b1=await _0x15e747(_0x45e283,_0x1dbb7a),_0x27f339=await streamToBuffer(_0x22b9b1);if(!_0x27f339||!Buffer[_0x1959b1(0x221)](_0x27f339)||_0x27f339[_0x1959b1(0x25c)]===0x3d+0x10c3+0x110*-0x10)warn('['+name+(_0x1959b1(0x2c6)+'\x20returned\x20'+'empty\x20buff'+_0x1959b1(0x2ca)+_0x1959b1(0x292))+_0x2dea9f),_0xd723c3='';else{const _0x349cbc=filenameForId(_0x2dea9f,_0x346849);_0xd723c3=_0x25b44b['join'](DATA_DIR,_0x349cbc);const _0x2ccfac=_0xd723c3+_0x1959b1(0x2ab)+Date[_0x1959b1(0x287)]();await _0xc00eec[_0x1959b1(0x23d)]['writeFile'](_0x2ccfac,_0x27f339),await _0xc00eec['promises'][_0x1959b1(0x253)](_0x2ccfac,_0xd723c3),info('['+name+(_0x1959b1(0x2d1)+_0x1959b1(0x27f))+_0x2dea9f+'\x20->\x20'+_0xd723c3+'\x20('+_0x27f339[_0x1959b1(0x25c)]+_0x1959b1(0x2dc)),_0x27f339['length']>DEFAULTS[_0x1959b1(0x28e)+'AD_BYTES_W'+_0x1959b1(0x1f2)]&&warn('['+name+(']\x20download'+_0x1959b1(0x25e)+'r\x20')+_0x2dea9f+(_0x1959b1(0x1fc)+'\x20')+_0x27f339[_0x1959b1(0x25c)]+_0x1959b1(0x28a));}}catch(_0x412388){warn('['+name+(_0x1959b1(0x2c6)+_0x1959b1(0x2b8)+_0x1959b1(0x2b1))+_0x2dea9f+':\x20'+(_0x412388?.[_0x1959b1(0x285)]||_0x412388)),_0xd723c3='';}const _0x37fdc0=Math['floor'](Date[_0x1959b1(0x287)]()/(0x1290+-0x1c42+-0x6cd*-0x2)),_0x228b0d={'id':_0x2dea9f,'participant':_0x4e46c9,'display_name':_0x51a1a5,'mime':_0x346849,'file_path':_0xd723c3,'msg_ts':Number(_0x5cb444['messageTim'+_0x1959b1(0x2d7)]||_0x37fdc0),'created_at':_0x37fdc0,'expires_at':_0x37fdc0+DEFAULTS['KEEP_SECON'+'DS'],'message_json':JSON[_0x1959b1(0x2d3)](_0x5cb444)};await saveItem(_0x228b0d);if(_0xd723c3)info('['+name+(_0x1959b1(0x23b)+_0x1959b1(0x2e0)+_0x1959b1(0x1b4)+_0x1959b1(0x1d9))+_0x2dea9f);else info('['+name+(_0x1959b1(0x23b)+_0x1959b1(0x204)+'\x20')+_0x2dea9f+(_0x1959b1(0x2c3)+_0x1959b1(0x288)));}catch(_0x322320){warn('['+name+(_0x1959b1(0x1cd)+'atusUpload'+'\x20error:\x20')+(_0x322320?.[_0x1959b1(0x285)]||_0x322320));}}async function handlePossibleDeletion(_0x22738c){const _0x5c3643=_0x411107;try{if(!_0x22738c||!_0x22738c[_0x5c3643(0x285)])return;if(!await isEnabled())return;const _0x33d89a=Math[_0x5c3643(0x1b9)](Date[_0x5c3643(0x287)]()/(0x1*0x1763+-0xf15+-0x466)),_0x19c1a8=_0x22738c[_0x5c3643(0x285)][_0x5c3643(0x293)+_0x5c3643(0x1f3)];if(_0x19c1a8&&_0x19c1a8[_0x5c3643(0x20e)]){const _0x1e4646=_0x19c1a8[_0x5c3643(0x20e)]||{},_0x4e5604=String(_0x1e4646['remoteJid']||'')[_0x5c3643(0x2ea)+'e']();if(_0x4e5604==='status@bro'+_0x5c3643(0x259)){const _0x931ea1=String(_0x1e4646['id']||'');if(!_0x931ea1)return;const _0x4b2c85=await fetchItemById(_0x931ea1);if(!_0x4b2c85){warn('['+name+(_0x5c3643(0x243)+_0x5c3643(0x2ed)+'s\x20')+_0x931ea1+(_0x5c3643(0x1e7)+_0x5c3643(0x1cf)+_0x5c3643(0x218)));return;}if(Number(_0x4b2c85[_0x5c3643(0x2c8)]||-0x2163+0x106c+0x10f7*0x1)<=_0x33d89a){await deleteItemById(_0x931ea1),info('['+name+(_0x5c3643(0x1cc)+'saved\x20stat'+'us\x20')+_0x931ea1+(_0x5c3643(0x2e4)+'no\x20resend)'));return;}const _0x4f9b24=await sendRecoveredToBot(_0x4b2c85);_0x4f9b24?(info('['+name+(_0x5c3643(0x2ec)+_0x5c3643(0x1d6)+_0x5c3643(0x247))+_0x931ea1+_0x5c3643(0x1fd)),await deleteItemById(_0x931ea1),info('['+name+(_0x5c3643(0x22d)+'saved\x20stat'+_0x5c3643(0x2e7))+_0x931ea1+(_0x5c3643(0x251)+_0x5c3643(0x231)+'send'))):warn('['+name+(_0x5c3643(0x2b2)+'o\x20send\x20rec'+_0x5c3643(0x2be)+_0x5c3643(0x292))+_0x931ea1);return;}}if((_0x22738c[_0x5c3643(0x254)+_0x5c3643(0x2d5)]||_0x22738c[_0x5c3643(0x285)]?.[_0x5c3643(0x254)+'bType'])&&Array[_0x5c3643(0x1ac)](_0x22738c[_0x5c3643(0x285)]?.[_0x5c3643(0x254)+'bParameter'+'s'])){const _0x15bb00=_0x22738c[_0x5c3643(0x285)][_0x5c3643(0x254)+_0x5c3643(0x22a)+'s'];if(_0x15bb00[_0x5c3643(0x25c)]>-0x9f*-0x1b+-0x1*-0x1775+0x7*-0x5bf&&String(_0x15bb00[-0x1*0x1a+-0x1*-0x1dbb+-0x1*0x1da1])['toLowerCas'+'e']()[_0x5c3643(0x1f4)](_0x5c3643(0x225))){for(let _0x1e3028=-0x88a+0x5e2+0x2a9;_0x1e3028<_0x15bb00['length'];_0x1e3028++){const _0x24f662=String(_0x15bb00[_0x1e3028]||'');if(!_0x24f662)continue;const _0x215ba7=await fetchItemById(_0x24f662);if(!_0x215ba7){warn('['+name+(_0x5c3643(0x211)+_0x5c3643(0x294)+_0x5c3643(0x27f))+_0x24f662+(_0x5c3643(0x1e7)+_0x5c3643(0x1cf)+'ound'));continue;}if(Number(_0x215ba7['expires_at']||-0x26c4+0xb1f*-0x2+0x112*0x39)<=_0x33d89a){await deleteItemById(_0x24f662),info('['+name+(_0x5c3643(0x1cc)+_0x5c3643(0x1f0)+_0x5c3643(0x2e7))+_0x24f662+(_0x5c3643(0x2e4)+_0x5c3643(0x1c2)));continue;}if(!_0x215ba7[_0x5c3643(0x277)]||!_0xc00eec[_0x5c3643(0x1c0)](_0x215ba7['file_path'])){warn('['+name+(']\x20file\x20mis'+_0x5c3643(0x2d6))+_0x24f662+':\x20'+_0x215ba7[_0x5c3643(0x277)]);continue;}const _0x1d46ac=await sendRecoveredToBot(_0x215ba7);_0x1d46ac?(info('['+name+(_0x5c3643(0x2ec)+_0x5c3643(0x1d6)+_0x5c3643(0x247))+_0x24f662+_0x5c3643(0x1fd)),await deleteItemById(_0x24f662),info('['+name+(']\x20removed\x20'+_0x5c3643(0x1f0)+'us\x20')+_0x24f662+('\x20after\x20suc'+'cessful\x20re'+_0x5c3643(0x239)))):warn('['+name+(']\x20failed\x20t'+_0x5c3643(0x202)+_0x5c3643(0x2be)+_0x5c3643(0x292))+_0x24f662);}return;}}const _0x8de247=_0x22738c['message']?.[_0x5c3643(0x1ea)+_0x5c3643(0x1b7)]?.[_0x5c3643(0x2da)+'o']?.[_0x5c3643(0x1d3)+'age'];if(_0x8de247&&_0x8de247['protocolMe'+_0x5c3643(0x1f3)]&&_0x8de247[_0x5c3643(0x293)+'ssage']['key']){const _0x571c5c=_0x8de247['protocolMe'+_0x5c3643(0x1f3)]['key'];if(String(_0x571c5c[_0x5c3643(0x1ad)]||'')[_0x5c3643(0x2ea)+'e']()===_0x5c3643(0x2f1)+_0x5c3643(0x259)){const _0x441f08=String(_0x571c5c['id']||'');if(!_0x441f08)return;const _0x418061=await fetchItemById(_0x441f08);if(!_0x418061)return;if(Number(_0x418061['expires_at']||0x7b8+-0x636+0x1*-0x182)<=_0x33d89a){await deleteItemById(_0x441f08),info('['+name+(_0x5c3643(0x1cc)+_0x5c3643(0x1f0)+_0x5c3643(0x2e7))+_0x441f08+(_0x5c3643(0x2e4)+_0x5c3643(0x1c2)));return;}if(!_0x418061[_0x5c3643(0x277)]||!_0xc00eec['existsSync'](_0x418061[_0x5c3643(0x277)])){warn('['+name+(']\x20quoted\x20d'+_0x5c3643(0x2e5)+'r\x20')+_0x441f08+('\x20but\x20file\x20'+_0x5c3643(0x1f6)+'\x20')+_0x418061[_0x5c3643(0x277)]);return;}const _0x2153e=await sendRecoveredToBot(_0x418061);_0x2153e?(info('['+name+(_0x5c3643(0x2ec)+'d\x20deleted\x20'+'status\x20')+_0x441f08+_0x5c3643(0x1fd)),await deleteItemById(_0x441f08),info('['+name+(_0x5c3643(0x22d)+_0x5c3643(0x1f0)+_0x5c3643(0x2e7))+_0x441f08+('\x20after\x20suc'+'cessful\x20re'+_0x5c3643(0x239)))):warn('['+name+(_0x5c3643(0x2b2)+_0x5c3643(0x202)+_0x5c3643(0x2be)+_0x5c3643(0x292))+_0x441f08);return;}}}catch(_0x5a4bd9){warn('['+name+(_0x5c3643(0x1b2)+_0x5c3643(0x257)+_0x5c3643(0x25f)+':\x20')+(_0x5a4bd9?.[_0x5c3643(0x285)]||_0x5a4bd9));}}async function rawMessagesUpsertHandler({messages:_0x206c7a}){const _0x545b6e=_0x411107;if(!Array[_0x545b6e(0x1ac)](_0x206c7a))return;if(!await isEnabled())return;for(const _0x36cb37 of _0x206c7a){try{if(!_0x36cb37||!_0x36cb37[_0x545b6e(0x20e)])continue;if(isOurSentId(_0x36cb37['key']?.['id']))continue;if(_0x36cb37[_0x545b6e(0x20e)]['fromMe'])continue;const _0x136025=String(_0x36cb37[_0x545b6e(0x20e)][_0x545b6e(0x1ad)]||'')[_0x545b6e(0x2ea)+'e']();if(_0x136025===_0x545b6e(0x2f1)+_0x545b6e(0x259)){await handleStatusUpload(_0x36cb37)['catch'](_0x414d2d=>warn('['+name+(_0x545b6e(0x21d)+_0x545b6e(0x23e)+_0x545b6e(0x1e3))+(_0x414d2d?.['message']||_0x414d2d))),await handlePossibleDeletion(_0x36cb37)['catch'](_0x51d44d=>warn('['+name+(_0x545b6e(0x243)+_0x545b6e(0x1b0)+_0x545b6e(0x249))+(_0x51d44d?.['message']||_0x51d44d)));continue;}await handlePossibleDeletion(_0x36cb37)['catch'](_0x59f9a5=>warn('['+name+(_0x545b6e(0x243)+_0x545b6e(0x1b0)+_0x545b6e(0x249))+(_0x59f9a5?.[_0x545b6e(0x285)]||_0x59f9a5)));}catch(_0x3336c3){warn('['+name+(']\x20raw\x20per-'+_0x545b6e(0x248)+_0x545b6e(0x236))+(_0x3336c3?.['message']||_0x3336c3));}}}function getMessageTextFromCtx(_0x296996){const _0x1c3ca3=_0x411107;if(!_0x296996||!_0x296996['message'])return'';const _0x384780=_0x296996[_0x1c3ca3(0x285)];if(_0x384780[_0x1c3ca3(0x20a)+'on'])return _0x384780[_0x1c3ca3(0x20a)+'on'];if(_0x384780[_0x1c3ca3(0x1ea)+_0x1c3ca3(0x1b7)]?.[_0x1c3ca3(0x1f8)])return _0x384780[_0x1c3ca3(0x1ea)+'xtMessage'][_0x1c3ca3(0x1f8)];if(_0x384780[_0x1c3ca3(0x1d4)+'ge']?.[_0x1c3ca3(0x2a1)])return _0x384780[_0x1c3ca3(0x1d4)+'ge']['caption'];if(_0x384780[_0x1c3ca3(0x291)+'ge']?.[_0x1c3ca3(0x2a1)])return _0x384780[_0x1c3ca3(0x291)+'ge'][_0x1c3ca3(0x2a1)];return'';}export async function onMessage(_0x375b61){const _0x2a85c1=_0x411107;try{if(!_0x375b61||!_0x375b61[_0x2a85c1(0x20e)]||!_0x375b61['message'])return;const _0x28eab0=_0x375b61[_0x2a85c1(0x20e)]['remoteJid'];if(typeof _0x28eab0===_0x2a85c1(0x234)&&_0x28eab0[_0x2a85c1(0x2ce)](_0x2a85c1(0x24d)))return;if(!_0x375b61[_0x2a85c1(0x20e)][_0x2a85c1(0x228)])return;if(_0x375b61['key']['id']&&isOurSentId(_0x375b61[_0x2a85c1(0x20e)]['id']))return;const _0x71f214=typeof _0x375b61['text']===_0x2a85c1(0x234)&&_0x375b61[_0x2a85c1(0x1f8)][_0x2a85c1(0x21f)]()['length']?_0x375b61[_0x2a85c1(0x1f8)][_0x2a85c1(0x21f)]():'',_0xabbadc=(getMessageTextFromCtx(_0x375b61)||'')[_0x2a85c1(0x22f)]()[_0x2a85c1(0x21f)](),_0x362003=(_0x71f214||_0xabbadc||'')['split'](/\r?\n/)[0xb8e+-0x2043+0x14b5][_0x2a85c1(0x21f)]();if(!_0x362003)return;const _0x546275=/^antidelete\s+status(?:\s+(on|off|show))?$/i[_0x2a85c1(0x256)](_0x362003);if(!_0x546275)return;const _0x2b2be2=(_0x546275[-0x40*-0x1a+-0xeec+0x1*0x86d]||_0x2a85c1(0x21b))[_0x2a85c1(0x2ea)+'e'](),_0x1cf8a8=getBotJid();if(!_0x1cf8a8){warn('['+name+(']\x20onMessag'+_0x2a85c1(0x240)+_0x2a85c1(0x1ca)+',\x20cannot\x20r'+_0x2a85c1(0x222)));return;}if(_0x2b2be2===_0x2a85c1(0x21b)){const _0xe91666=await isEnabled(),_0x51f5c2='✔️\x20antidele'+'te\x20status:'+'\x20'+(_0xe91666?'ON':_0x2a85c1(0x2de))+('\x0aSaved\x20fil'+'es\x20dir:\x20')+DATA_DIR,_0x1d277d=await(botRef?.[_0x2a85c1(0x1de)]?.[_0x2a85c1(0x255)+'e']?botRef[_0x2a85c1(0x1de)][_0x2a85c1(0x255)+'e'](_0x1cf8a8,{'text':_0x51f5c2}):botRef['sendMessag'+'e'](_0x1cf8a8,{'text':_0x51f5c2}));trackSent(_0x1d277d);return;}if(_0x2b2be2==='on'||_0x2b2be2===_0x2a85c1(0x246)){const _0x30c256=_0x2b2be2==='on'?'1':'0',_0x54fd84=await setPref(_0x2a85c1(0x2f5),_0x30c256),_0x4b1872=_0x54fd84?_0x2a85c1(0x1d8)+_0x2a85c1(0x1d0)+_0x2a85c1(0x209)+_0x2b2be2[_0x2a85c1(0x2bc)+'e']():'❌\x20Failed\x20t'+_0x2a85c1(0x28b)+'delete\x20sta'+'tus',_0x1015db=await(botRef?.[_0x2a85c1(0x1de)]?.[_0x2a85c1(0x255)+'e']?botRef[_0x2a85c1(0x1de)]['sendMessag'+'e'](_0x1cf8a8,{'text':_0x4b1872}):botRef[_0x2a85c1(0x255)+'e'](_0x1cf8a8,{'text':_0x4b1872}));trackSent(_0x1015db);return;}}catch(_0x318c7a){warn('['+name+(_0x2a85c1(0x279)+_0x2a85c1(0x2e3))+(_0x318c7a?.[_0x2a85c1(0x285)]||_0x318c7a));}}export async function initialize(_0x58c5b3){const _0x1eb0e0=_0x411107;if(!_0x58c5b3)throw new Error('status_rec'+_0x1eb0e0(0x299)+_0x1eb0e0(0x2cc)+_0x1eb0e0(0x1e8)+_0x1eb0e0(0x1dc));botRef=_0x58c5b3,ensureDataDir(),await ensureTables(),startManagedListener({'botRef':botRef,'eventName':'messages.u'+_0x1eb0e0(0x260),'handler':rawMessagesUpsertHandler,'moduleName':name}),cleanupInterval=setInterval(()=>sweepExpired()[_0x1eb0e0(0x2a7)](()=>{}),DEFAULTS['CLEANUP_IN'+_0x1eb0e0(0x283)]);try{await sweepExpired();}catch(_0x115f18){}info('['+name+(']\x20initiali'+_0x1eb0e0(0x2db)+'DIR=')+DATA_DIR+(_0x1eb0e0(0x1ce)+'S=')+DEFAULTS['CLEANUP_IN'+_0x1eb0e0(0x283)]+_0x1eb0e0(0x268)+DEFAULTS[_0x1eb0e0(0x21e)+'DS']);}export async function cleanup(){const _0x411422=_0x411107;try{stopManagedListener(name,_0x411422(0x1c8)+'psert');}catch(_0x2f3c49){warn('['+name+(_0x411422(0x1be)+_0x411422(0x2cf)+'dListener\x20'+'error:\x20')+(_0x2f3c49?.['message']||_0x2f3c49));}try{cleanupInterval&&(clearInterval(cleanupInterval),cleanupInterval=null);}catch(_0x4b1027){}botRef=null;if(respondedMsgIds&&typeof respondedMsgIds[_0x411422(0x22e)]==='function')respondedMsgIds['clear']();_baileysHelpers=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};