const _0x37112a=_0x2c68;(function(_0x4967b4,_0x40b6ed){const _0x114960=_0x2c68,_0x224484=_0x4967b4();while(!![]){try{const _0x258e85=parseInt(_0x114960(0x17a))/(0xc8+-0x1547*-0x1+-0x160e*0x1)+-parseInt(_0x114960(0x1a4))/(0x16b5+0x127*-0x17+0x3ce)*(-parseInt(_0x114960(0x179))/(0x261+-0x2413*-0x1+-0x2671))+parseInt(_0x114960(0x220))/(-0x69f+-0xeab+0x154e)*(-parseInt(_0x114960(0x1b7))/(-0x9f*-0x3b+-0x2663+0x1c3))+-parseInt(_0x114960(0x237))/(0x193b+0xc20+-0x2555)+-parseInt(_0x114960(0x20a))/(0xaed+0x269b*0x1+0x1*-0x3181)+parseInt(_0x114960(0x1c3))/(-0x24d4*-0x1+0x21c+-0x26e8)*(parseInt(_0x114960(0x1fe))/(0xf26*-0x1+0x1ff8+-0x1*0x10c9))+-parseInt(_0x114960(0x190))/(-0x1893+-0x1ef7+0x3794)*(-parseInt(_0x114960(0x167))/(-0xb4e+-0x245f+0x2fb8));if(_0x258e85===_0x40b6ed)break;else _0x224484['push'](_0x224484['shift']());}catch(_0x21d8f4){_0x224484['push'](_0x224484['shift']());}}}(_0x4313,0x3c9f2+-0x101*-0x10c+-0x1e0a4));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import*as _0x2de023 from'../utils/groups.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getConfig}from'../utils/config.js';export const name=_0x37112a(0x1d7)+_0x37112a(0x17c)+'k';export const version=_0x37112a(0x1e5)+_0x37112a(0x212);export const priority=-0x1f45+-0x37*-0x8f+-0x1*-0x109;export const commands=[_0x37112a(0x226)];export const configKeys=[_0x37112a(0x14b)+_0x37112a(0x20f)+_0x37112a(0x14d),_0x37112a(0x14b)+_0x37112a(0x20f)+_0x37112a(0x18a)+_0x37112a(0x1b0),_0x37112a(0x14b)+_0x37112a(0x20f)+_0x37112a(0x1c2)+'N','STATUS_BRO'+_0x37112a(0x15c)];const FALLBACK_DEFAULTS={'DEDUPE_TTL_MS':(0x1341+0x885*-0x3+0x112*0x6)*(0xd61+-0xbf5*-0x1+0xd3*-0x1a),'DEFAULT_WARN_MESSAGE':_0x37112a(0x1cb)+_0x37112a(0x1da)+_0x37112a(0x176)+'r}\x0a*MAX\x20WA'+_0x37112a(0x18f)+'max_warns}'+'\x0a*REMAININ'+_0x37112a(0x177)+_0x37112a(0x149)+_0x37112a(0x1f5)+_0x37112a(0x14c)+'\x20{reason}','DEFAULT_MAX_WARN':0x3,'DEFAULT_REASON':_0x37112a(0x187)+_0x37112a(0x14f)+'casts.'};let CONFIG={};try{CONFIG=typeof getConfig==='function'?getConfig()||{}:{};}catch(_0x2adeb1){warn(_0x37112a(0x1e2)+_0x37112a(0x1f2)+_0x37112a(0x215)+'or,\x20procee'+_0x37112a(0x1e6)+_0x37112a(0x1a7)+'lts.'),CONFIG={};}const DEFAULTS={'DEDUPE_TTL_MS':Number(CONFIG?.[_0x37112a(0x14b)+_0x37112a(0x15c)]?.[_0x37112a(0x1b1)+_0x37112a(0x1bb)]??CONFIG[_0x37112a(0x14b)+_0x37112a(0x160)+_0x37112a(0x22b)]??FALLBACK_DEFAULTS['DEDUPE_TTL'+_0x37112a(0x1bb)])||FALLBACK_DEFAULTS['DEDUPE_TTL'+_0x37112a(0x1bb)],'DEFAULT_WARN_MESSAGE':typeof CONFIG[_0x37112a(0x14b)+_0x37112a(0x20f)+_0x37112a(0x14d)]===_0x37112a(0x232)&&CONFIG[_0x37112a(0x14b)+_0x37112a(0x20f)+_0x37112a(0x14d)][_0x37112a(0x1cd)]?CONFIG[_0x37112a(0x14b)+'ADCAST_DEF'+_0x37112a(0x14d)]:typeof CONFIG?.[_0x37112a(0x14b)+_0x37112a(0x15c)]?.['DEFAULT_WA'+'RN']===_0x37112a(0x232)&&CONFIG[_0x37112a(0x14b)+'ADCAST'][_0x37112a(0x1d4)+'RN']['length']?CONFIG[_0x37112a(0x14b)+'ADCAST'][_0x37112a(0x1d4)+'RN']:FALLBACK_DEFAULTS['DEFAULT_WA'+'RN_MESSAGE'],'DEFAULT_MAX_WARN':Number(CONFIG['STATUS_BRO'+'ADCAST_DEF'+'AULT_MAX_W'+_0x37112a(0x1b0)]??CONFIG?.[_0x37112a(0x14b)+'ADCAST']?.['MAX_WARN']??FALLBACK_DEFAULTS[_0x37112a(0x209)+_0x37112a(0x1d8)])||FALLBACK_DEFAULTS[_0x37112a(0x209)+'X_WARN'],'DEFAULT_REASON':typeof CONFIG['STATUS_BRO'+'ADCAST_DEF'+_0x37112a(0x1c2)+'N']===_0x37112a(0x232)&&CONFIG[_0x37112a(0x14b)+_0x37112a(0x20f)+'AULT_REASO'+'N'][_0x37112a(0x1cd)]?CONFIG[_0x37112a(0x14b)+'ADCAST_DEF'+_0x37112a(0x1c2)+'N']:typeof CONFIG?.[_0x37112a(0x14b)+'ADCAST']?.[_0x37112a(0x207)+'ASON']===_0x37112a(0x232)&&CONFIG['STATUS_BRO'+'ADCAST'][_0x37112a(0x207)+_0x37112a(0x1d9)]['length']?CONFIG['STATUS_BRO'+'ADCAST']['DEFAULT_RE'+_0x37112a(0x1d9)]:FALLBACK_DEFAULTS[_0x37112a(0x207)+'ASON']};let botRef=null;function _0x4313(){const _0x5b7261=['findIndex','l`\x20command','ax\x20warning','run','1047522Nsctxb','resetwarns','ed,\x20update','oup\x20alias\x20','ate','TEGER);','uded.enabl',',\x20user_jid',':*\x20{remain','arn_count;','STATUS_BRO','\x0a*REASON:*','AULT_WARN','ed\x20to\x20send','atus\x20broad','(gp:|gp)?\x5c','replace','nt)\x20VALUES','\x20notice\x20to','and\x20will\x20b','fromMe','id\x20=\x20?','\x5cs*','imageMessa','tings','isCommand','[sbl]\x20clea','ADCAST','ck\x20for\x20','\x20(chat_jid','\x20reset\x20for','ADCAST_DED','ssage','=excluded.','✅\x20ENABLED','arn_messag','luded.upda','T(chat_jid','2110218izUPCb','EXISTS\x20','Dedupe\x20TTL','now','T🚨*\x0a\x0aUser\x20','❌\x20DISABLED','\x20by\x20adding','pplying\x20co',':*\x0a','Please\x20@me','sock','[sbl]\x20Fail','ARY\x20KEY,\x20w','ted_at;','remove','SER:*\x20{use','G\x20WARNINGS','ps.','6HDBoZo','382717XbvJJV','n_count\x20=\x20','adcast_loc','LE\x20IF\x20NOT\x20','adcast','ed\x20','resolveNam','_jid\x20TEXT\x20','\x20DO\x20UPDATE','\x20in\x20','ock\x20**DISA','n_settings','SELECT\x20war','Posting\x20st','resolved\x20t','Please\x20pro','AULT_MAX_W','SELECT\x20ena','*Warn\x20Mess','\x20max_warns','set','RNINGS:*\x20{','20tNwkeG','ntion\x20a\x20us','@g.us','messages.u','ALUES\x20(?,\x20','TE\x20SET\x20war','isArray','Unknown\x20gr','ning\x20messa','has','message','BLED**\x20for','warns,\x20upd','o\x20any\x20grou','xtMessage','groupParti','max_warns','endsWith','forEach','key','67754NkWstZ','warn_messa',',\x20warn_mes','file\x20defau','s\x20in\x20',',\x20warn_cou','n_count\x20FR','er\x20to\x20rese','show','N\x20CONFLICT','[sbl]\x20kick','✅\x20Max\x20warn','ARN','DEDUPE_TTL','{remaining','\x20updated_a','_warns}','slice','bled\x20FROM\x20','125onjKnd','x_warns\x20IN','sage\x20for\x20','groupStatu','_MS','\x20it\x20to\x20the','protocolMe','t=excluded','find','INSERT\x20INT','floor','AULT_REASO','17664PjNqEo','ARY\x20KEY,\x20e','warn_count','ed\x20to\x20kick','push','\x20(?,\x20?,\x20?)','mber\x20for\x20m','\x20updated.\x0a','*⚠️WARN\x20MES','from','length','No\x20default','nabled\x20INT','excluded.w','trim','RN_MESSAGE','mentionedJ','DEFAULT_WA','PRIMARY\x20KE','-Specific\x20','status_bro','X_WARN','ASON','SAGE⚠️*\x0a\x0a*U','warnmsg','d));','extendedTe','\x20user(s)\x20i','EGER);','\x20FROM\x20','NOT\x20NULL,\x20','[sbl]\x20getC','CREATE\x20TAB','sage,\x20max_','3.1.0-grou','ding\x20with\x20','*🚨BAN\x20ALER','age','\x20TEXT\x20NOT\x20','toLowerCas','\x20mentioned','.updated_a','ailed',')\x20DO\x20UPDAT','cipantsUpd','EFAULT\x200,\x20','[sbl]\x20warn','onfig()\x20th','\x20ON\x20CONFLI','quotedMess','ing_warns}','\x20warnings\x20','\x20from\x20','exec','ialized.\x20M','\x20end.','get','jid','conversati','180xDbAao','t_jid\x20=\x20?','status@bro','✅\x20Warnings','a\x20group\x20al','d)\x20DO\x20UPDA','sendMessag','split','\x20WHERE\x20cha','DEFAULT_RE','lt\x20connect','DEFAULT_MA','2358349ZNtuQA','[sbl]\x20init','d,\x20user_ji','\x20SET\x20warn_','Your\x20defau','ADCAST_DEF','maxwarns','[sbl]\x20dele','p-only','delete','caption','rew\x20an\x20err','led\x20=\x20excl','E\x20SET\x20enab','clear','remoteJid','adcast_war','off','ted_at\x20INT','{max_warns','vide\x20a\x20war','e\x20TEXT,\x20ma','27628LtQllx','psert','he\x20current','Y\x20(chat_ji','t\x20warnings','✅\x20Status\x20l','sbl','\x20INTEGER\x20D','indexOf','❌\x20Status\x20l','ned\x20up','UPE_TTL_MS','isFinite','AND\x20user_j','cluded.war','ion(s)\x20cou','mmand\x20to\x20t','includes','string'];_0x4313=function(){return _0x5b7261;};return _0x4313();}const processedMessageKeys=new Map(),sleep=_0x18f3dd=>new Promise(_0x36cffe=>setTimeout(_0x36cffe,_0x18f3dd));function _0x2c68(_0x201822,_0x43e6ee){const _0x985e76=_0x4313();return _0x2c68=function(_0x552fb1,_0x915911){_0x552fb1=_0x552fb1-(-0x1*-0x135e+0x61*0x43+-0xd2*0x35);let _0x3023eb=_0x985e76[_0x552fb1];return _0x3023eb;},_0x2c68(_0x201822,_0x43e6ee);}function isStatusBroadcastMention(_0x354734){const _0x4097da=_0x37112a;if(!_0x354734||!_0x354734[_0x4097da(0x19a)])return![];const _0x3ff5bd=_0x354734[_0x4097da(0x19a)];return _0x3ff5bd[_0x4097da(0x1ba)+'sMentionMe'+_0x4097da(0x161)]||_0x3ff5bd['protocolMe'+_0x4097da(0x161)]?.[_0x4097da(0x1a3)]?.[_0x4097da(0x219)]?.['toLowerCas'+'e']()==='status@bro'+_0x4097da(0x17e)||_0x3ff5bd['messageCon'+'textInfo']?.[_0x4097da(0x1f4)+_0x4097da(0x1e8)]?.[_0x4097da(0x1bd)+_0x4097da(0x161)]?.[_0x4097da(0x1a3)]?.[_0x4097da(0x219)]?.[_0x4097da(0x1ea)+'e']()===_0x4097da(0x200)+_0x4097da(0x17e);}const TABLE_SETTINGS=_0x37112a(0x1d7)+'adcast_set'+_0x37112a(0x159),TABLE_WARN_USERS=_0x37112a(0x1d7)+'adcast_war'+'ns',TABLE_WARN_SETTINGS=_0x37112a(0x1d7)+_0x37112a(0x21a)+_0x37112a(0x185);async function ensureTables(){const _0x52b8ad=_0x37112a;try{await db[_0x52b8ad(0x1f8)](_0x52b8ad(0x1e3)+_0x52b8ad(0x17d)+'EXISTS\x20'+TABLE_SETTINGS+(_0x52b8ad(0x15e)+'\x20TEXT\x20PRIM'+_0x52b8ad(0x1c4)+_0x52b8ad(0x1cf)+'EGER,\x20upda'+_0x52b8ad(0x21c)+_0x52b8ad(0x1df))),await db['exec']('CREATE\x20TAB'+_0x52b8ad(0x17d)+_0x52b8ad(0x168)+TABLE_WARN_USERS+(_0x52b8ad(0x15e)+_0x52b8ad(0x1e9)+'NULL,\x20user'+_0x52b8ad(0x181)+_0x52b8ad(0x1e1)+_0x52b8ad(0x1c5)+_0x52b8ad(0x227)+_0x52b8ad(0x1f0)+_0x52b8ad(0x1d5)+_0x52b8ad(0x223)+_0x52b8ad(0x20c)+_0x52b8ad(0x1dc))),await db[_0x52b8ad(0x1f8)](_0x52b8ad(0x1e3)+_0x52b8ad(0x17d)+_0x52b8ad(0x168)+TABLE_WARN_SETTINGS+(_0x52b8ad(0x15e)+'\x20TEXT\x20PRIM'+_0x52b8ad(0x173)+_0x52b8ad(0x164)+_0x52b8ad(0x21f)+_0x52b8ad(0x1b8)+'TEGER,\x20upd'+'ated_at\x20IN'+_0x52b8ad(0x23c)));}catch(_0x58ede0){error(_0x58ede0,'[sbl]\x20ensu'+'reTables\x20f'+_0x52b8ad(0x1ed));throw _0x58ede0;}}async function getChatEnabled(_0x1a84c0){const _0x361679=_0x37112a,_0x48b6a4=await db[_0x361679(0x1fb)](_0x361679(0x18b)+_0x361679(0x1b6)+TABLE_SETTINGS+(_0x361679(0x206)+_0x361679(0x1ff)),[_0x1a84c0]);return _0x48b6a4?Number(_0x48b6a4['enabled'])===-0xc27+-0x1aab+0x3*0xcf1:![];}async function setChatEnabled(_0x4c8209,_0x19564d){const _0x2c09dc=_0x37112a;await db[_0x2c09dc(0x236)](_0x2c09dc(0x1c0)+'O\x20'+TABLE_SETTINGS+(_0x2c09dc(0x15e)+',\x20enabled,'+_0x2c09dc(0x1b3)+'t)\x20VALUES\x20'+'(?,\x20?,\x20?)\x20'+'ON\x20CONFLIC'+_0x2c09dc(0x166)+_0x2c09dc(0x1ee)+_0x2c09dc(0x217)+_0x2c09dc(0x216)+_0x2c09dc(0x147)+_0x2c09dc(0x239)+'d_at\x20=\x20exc'+_0x2c09dc(0x165)+_0x2c09dc(0x174)),[_0x4c8209,_0x19564d?-0x15ed+0x1220+-0x2*-0x1e7:0x1*-0x2361+-0x2e1*0x1+0x2642,Math[_0x2c09dc(0x1c1)](Date[_0x2c09dc(0x16a)]()/(0xebb*0x1+-0x1fab+0x14d8))]);}async function getWarnSettings(_0x315db4){const _0x2f48f2=_0x37112a,_0x2793b4=await db[_0x2f48f2(0x1fb)](_0x2f48f2(0x186)+'n_message,'+_0x2f48f2(0x18d)+_0x2f48f2(0x1e0)+TABLE_WARN_SETTINGS+(_0x2f48f2(0x206)+_0x2f48f2(0x1ff)),[_0x315db4]),_0x77b77c=DEFAULTS[_0x2f48f2(0x1d4)+_0x2f48f2(0x1d2)],_0x2cbc9f=DEFAULTS['DEFAULT_MA'+_0x2f48f2(0x1d8)];if(!_0x2793b4)return{'warn_message':_0x77b77c,'max_warns':_0x2cbc9f};return{'warn_message':_0x2793b4[_0x2f48f2(0x1a5)+'ge']&&_0x2793b4[_0x2f48f2(0x1a5)+'ge'][_0x2f48f2(0x1cd)]?_0x2793b4[_0x2f48f2(0x1a5)+'ge']:_0x77b77c,'max_warns':Number[_0x2f48f2(0x22c)](Number(_0x2793b4[_0x2f48f2(0x1a0)]))&&Number(_0x2793b4['max_warns'])>-0x1*-0x9be+-0x1*-0x3be+-0x4*0x35f?Number(_0x2793b4[_0x2f48f2(0x1a0)]):_0x2cbc9f};}async function setWarnSettings(_0x5280a3,_0x3a9a23){const _0x2a4953=_0x37112a,_0xa065a9=await getWarnSettings(_0x5280a3),_0x326086='warn_messa'+'ge'in _0x3a9a23?_0x3a9a23['warn_messa'+'ge']:_0xa065a9[_0x2a4953(0x1a5)+'ge'],_0x357be6='max_warns'in _0x3a9a23?_0x3a9a23[_0x2a4953(0x1a0)]:_0xa065a9[_0x2a4953(0x1a0)];await db['run'](_0x2a4953(0x1c0)+'O\x20'+TABLE_WARN_SETTINGS+(_0x2a4953(0x15e)+_0x2a4953(0x1a6)+_0x2a4953(0x1e4)+_0x2a4953(0x19c)+'ated_at)\x20V'+_0x2a4953(0x194)+'?,\x20?,\x20?)\x20O'+_0x2a4953(0x1ad)+'(chat_jid)'+_0x2a4953(0x182)+_0x2a4953(0x20d)+'message=ex'+_0x2a4953(0x22e)+'n_message,'+_0x2a4953(0x18d)+_0x2a4953(0x162)+'max_warns,'+_0x2a4953(0x1b3)+_0x2a4953(0x1be)+_0x2a4953(0x1ec)+'t;'),[_0x5280a3,_0x326086,_0x357be6,Math[_0x2a4953(0x1c1)](Date[_0x2a4953(0x16a)]()/(0xc11*-0x2+-0x26c3*-0x1+-0xab9))]);}async function getWarnCount(_0x1b0b82,_0x298f2c){const _0x5db9ca=_0x37112a,_0x4a1d51=await db['get'](_0x5db9ca(0x186)+_0x5db9ca(0x1aa)+'OM\x20'+TABLE_WARN_USERS+(_0x5db9ca(0x206)+'t_jid\x20=\x20?\x20'+_0x5db9ca(0x22d)+_0x5db9ca(0x156)),[_0x1b0b82,_0x298f2c]);return _0x4a1d51?Number(_0x4a1d51[_0x5db9ca(0x1c5)]||0x10*0x1aa+0x2566+-0x2*0x2003):0x1*-0x377+-0x635+0x4d6*0x2;}async function setWarnCount(_0x1132ab,_0x31d0b1,_0x35d6b5){const _0x60aff6=_0x37112a;await db[_0x60aff6(0x236)](_0x60aff6(0x1c0)+'O\x20'+TABLE_WARN_USERS+('\x20(chat_jid'+_0x60aff6(0x148)+_0x60aff6(0x1a9)+_0x60aff6(0x152)+_0x60aff6(0x1c8)+_0x60aff6(0x1f3)+'CT(chat_ji'+'d,\x20user_ji'+_0x60aff6(0x203)+_0x60aff6(0x195)+_0x60aff6(0x17b)+_0x60aff6(0x1d0)+_0x60aff6(0x14a)),[_0x1132ab,_0x31d0b1,Number(_0x35d6b5||0x1c0c+-0x8da*0x1+-0x222*0x9)]);}async function sendNotice(_0x5c87f2,_0x15098e,_0x465155=[]){const _0x3360a3=_0x37112a;if(!_0x5c87f2||!botRef)return;try{const _0x37d3da=botRef[_0x3360a3(0x171)]?.[_0x3360a3(0x204)+'e']||botRef['sendMessag'+'e'];await _0x37d3da(_0x5c87f2,{'text':_0x15098e,'mentions':Array[_0x3360a3(0x196)](_0x465155)?_0x465155:[]});}catch(_0xbc218c){warn('[sbl]\x20fail'+_0x3360a3(0x14e)+_0x3360a3(0x153)+'\x20'+_0x5c87f2+':\x20'+(_0xbc218c?.[_0x3360a3(0x19a)]||_0xbc218c));}}async function kickUser(_0x38bb8c,_0x2621e4){const _0x4064c2=_0x37112a;try{const _0x5bce50=botRef?.[_0x4064c2(0x171)]||botRef;if(_0x5bce50?.[_0x4064c2(0x19f)+_0x4064c2(0x1ef)+_0x4064c2(0x23b)])return await _0x5bce50[_0x4064c2(0x19f)+_0x4064c2(0x1ef)+_0x4064c2(0x23b)](_0x38bb8c,[_0x2621e4],_0x4064c2(0x175)),info(_0x4064c2(0x1ae)+'ed\x20'+_0x2621e4+_0x4064c2(0x1f7)+_0x38bb8c),!![];return![];}catch(_0x4901d5){return error(_0x4901d5,_0x4064c2(0x172)+_0x4064c2(0x1c6)+'\x20'+_0x2621e4),![];}}async function issueAutoWarningFor(_0x28a19d){const _0x2664ba=_0x37112a,_0x56b1c7=_0x28a19d[_0x2664ba(0x1a3)][_0x2664ba(0x219)],_0x27c2ff=_0x28a19d['key']['participan'+'t']||_0x28a19d[_0x2664ba(0x1a3)][_0x2664ba(0x219)];if(await isadmin(botRef,{'key':_0x28a19d[_0x2664ba(0x1a3)],'message':_0x28a19d[_0x2664ba(0x19a)]}))return;const {warn_message:_0x523480,max_warns:_0x3131e4}=await getWarnSettings(_0x56b1c7),_0x413d50=await getWarnCount(_0x56b1c7,_0x27c2ff),_0x2fcf32=_0x413d50+(0xfa*-0x8+0xb3c*-0x1+-0x130d*-0x1);await setWarnCount(_0x56b1c7,_0x27c2ff,_0x2fcf32);if(_0x2fcf32>=_0x3131e4){await sendNotice(_0x56b1c7,_0x2664ba(0x1e7)+_0x2664ba(0x16b)+'@'+_0x27c2ff[_0x2664ba(0x205)]('@')[0x1*0x10c+-0x111+0x5]+('\x20has\x20reach'+'ed\x20')+_0x3131e4+(_0x2664ba(0x1f6)+_0x2664ba(0x154)+'e\x20removed.'),[_0x27c2ff]),await kickUser(_0x56b1c7,_0x27c2ff),await setWarnCount(_0x56b1c7,_0x27c2ff,-0x1bb2+0x1*0x196d+0x1*0x245);return;}const _0x516e38=_0x3131e4-_0x2fcf32;let _0x15f4d3=String(_0x523480)[_0x2664ba(0x151)]('{user}','@'+_0x27c2ff[_0x2664ba(0x205)]('@')[-0x509+-0xb03*0x1+0x100c])[_0x2664ba(0x151)](_0x2664ba(0x21d)+'}',String(_0x3131e4))['replace'](_0x2664ba(0x1b2)+_0x2664ba(0x1b4),String(_0x516e38))[_0x2664ba(0x151)]('{reason}',DEFAULTS[_0x2664ba(0x207)+_0x2664ba(0x1d9)]);await sendNotice(_0x56b1c7,_0x15f4d3,[_0x27c2ff]),info(_0x2664ba(0x1f1)+_0x2664ba(0x17f)+_0x27c2ff+_0x2664ba(0x183)+_0x56b1c7+'\x20('+_0x2fcf32+'/'+_0x3131e4+')');}async function deleteWithRetryMsg(_0x34526b){const _0x27d2d7=_0x37112a;for(let _0xc3ac20=-0xd*0x5b+0x105a+-0x5b*0x21;_0xc3ac20<0x1fe+-0xfc5+0xdc9;_0xc3ac20++){try{const _0x2274c1=botRef['sock']?.[_0x27d2d7(0x204)+'e']||botRef['sendMessag'+'e'];return await _0x2274c1(_0x34526b[_0x27d2d7(0x1a3)][_0x27d2d7(0x219)],{'delete':_0x34526b[_0x27d2d7(0x1a3)]}),!![];}catch(_0x4fc970){if(_0xc3ac20===0x2*0xf7f+-0x2*-0x9f0+-0x32de*0x1)await sleep(0x635*-0x1+-0xd*0x193+-0x1*-0x1ba6);else warn(_0x27d2d7(0x211)+'te\x20failed:'+'\x20'+(_0x4fc970?.[_0x27d2d7(0x19a)]||_0x4fc970));}}return![];}async function rawMessagesUpsertHandler({messages:_0x308262}){const _0x23601b=_0x37112a;for(const _0x3bcf8 of _0x308262){const _0x55d853=_0x3bcf8[_0x23601b(0x1a3)]?.[_0x23601b(0x219)];if(!_0x3bcf8[_0x23601b(0x19a)]||_0x3bcf8[_0x23601b(0x1a3)]['fromMe']||!_0x55d853||!_0x55d853[_0x23601b(0x1a1)](_0x23601b(0x192)))continue;const _0x26659d=_0x55d853+'::'+_0x3bcf8[_0x23601b(0x1a3)]['id'];if(processedMessageKeys[_0x23601b(0x199)](_0x26659d))continue;processedMessageKeys[_0x23601b(0x18e)](_0x26659d,setTimeout(()=>processedMessageKeys[_0x23601b(0x213)](_0x26659d),DEFAULTS['DEDUPE_TTL'+'_MS']));const _0xbd8d57=await getChatEnabled(_0x55d853);if(!_0xbd8d57||await isadmin(botRef,{'key':_0x3bcf8['key'],'message':_0x3bcf8[_0x23601b(0x19a)]}))continue;isStatusBroadcastMention(_0x3bcf8)&&(await deleteWithRetryMsg(_0x3bcf8)&&await issueAutoWarningFor(_0x3bcf8));}}async function findSudoerJid(_0x32ef5d){const _0x618849=_0x37112a,{findings:_0x2c6b3a}=userJidFromCtx(_0x32ef5d),_0x12769a=await listSudo(),_0x3241be=new Set(_0x12769a['map'](String));for(const _0x2fe370 of _0x2c6b3a){if(_0x2fe370?.[_0x618849(0x1fc)]){const _0x2ced43=normalizeToJid(_0x2fe370['jid']);if(_0x2ced43&&_0x3241be['has'](_0x2ced43))return _0x2ced43;if(_0x3241be['has'](_0x2fe370['jid']))return _0x2fe370['jid'];}}return null;}async function getMessageText(_0x87c709){const _0x355e17=_0x37112a;if(!_0x87c709||!_0x87c709['message'])return'';const _0x27e576=_0x87c709[_0x355e17(0x19a)];return _0x27e576[_0x355e17(0x1fd)+'on']||_0x27e576[_0x355e17(0x1dd)+_0x355e17(0x19e)]?.['text']||_0x27e576[_0x355e17(0x158)+'ge']?.[_0x355e17(0x214)]||_0x27e576['videoMessa'+'ge']?.[_0x355e17(0x214)]||'';}function parseGpFromArgs(_0x5b706b){const _0x24a401=_0x37112a,_0x18de17=_0x5b706b[_0x24a401(0x233)](_0x4651fd=>_0x4651fd[_0x24a401(0x1ea)+'e']()==='gp:'||_0x4651fd[_0x24a401(0x1ea)+'e']()==='gp');if(_0x18de17!==-(-0x1*-0xe73+0x1*-0x991+-0x1*0x4e1)&&_0x5b706b[_0x18de17+(0x1c0d+-0x3f+-0x1bcd*0x1)])return _0x5b706b[_0x18de17+(-0x1a2+-0x130*-0x18+-0x1add)];const _0x1c4f4b=_0x5b706b[_0x24a401(0x1bf)](_0x4afc53=>_0x4afc53[_0x24a401(0x231)](_0x24a401(0x192)));if(_0x1c4f4b)return _0x1c4f4b;if(_0x5b706b['length']>-0xc07+-0x4ad+0x1*0x10b4){const _0x503905=_0x5b706b[_0x5b706b[_0x24a401(0x1cd)]-(-0xa52*0x2+-0x358+0x17fd)];if(!['on',_0x24a401(0x21b),_0x24a401(0x1ac),'set',_0x24a401(0x238),_0x24a401(0x1db),_0x24a401(0x210)][_0x24a401(0x231)](_0x503905[_0x24a401(0x1ea)+'e']()))return _0x503905;}return null;}export async function onMessage(_0x5f5b64){const _0x12ebb5=_0x37112a,_0x2fbc44=(_0x5f5b64['text']||await getMessageText(_0x5f5b64))[_0x12ebb5(0x1d1)]();if(!_0x5f5b64[_0x12ebb5(0x15a)]||!_0x2fbc44)return;const [_0x2a4a21,..._0x483565]=_0x2fbc44['split'](/\s+/),_0x124acb=_0x2a4a21[_0x12ebb5(0x1ea)+'e']()[_0x12ebb5(0x151)]('/','');if(!commands[_0x12ebb5(0x231)](_0x124acb))return;const _0x401a50=_0x5f5b64[_0x12ebb5(0x1a3)][_0x12ebb5(0x219)][_0x12ebb5(0x1a1)](_0x12ebb5(0x192)),_0x262ff0=_0x5f5b64[_0x12ebb5(0x1a3)][_0x12ebb5(0x155)],_0x68722b=_0x262ff0?!![]:await isSudo(botRef,_0x5f5b64),_0x28a1c4=_0x401a50?await isadmin(botRef,_0x5f5b64):![];if(!_0x401a50&&!_0x68722b)return;if(_0x401a50&&!_0x28a1c4)return;let _0x1ef60d,_0x21cffe=[];if(_0x401a50){_0x1ef60d=_0x5f5b64[_0x12ebb5(0x1a3)]['remoteJid'];const _0x4dc01d=(_0x5f5b64[_0x12ebb5(0x1a3)]['participan'+'t']||_0x5f5b64[_0x12ebb5(0x1a3)][_0x12ebb5(0x1cc)])[_0x12ebb5(0x205)]('@')[0x1e47+-0x1*-0x731+-0x2578],_0x1c5d17=await getDefault(_0x4dc01d);if(!_0x1c5d17||_0x1c5d17[_0x12ebb5(0x1cd)]===0x10d6+0x1*-0x1eb5+0xddf)_0x21cffe=[_0x5f5b64['key']['remoteJid']],await sendNotice(_0x1ef60d,_0x12ebb5(0x1ce)+'\x20connectio'+'n\x20found.\x20A'+_0x12ebb5(0x16e)+_0x12ebb5(0x230)+_0x12ebb5(0x222)+'\x20group\x20onl'+'y.');else{for(const _0x5af001 of Array['isArray'](_0x1c5d17)?_0x1c5d17:[_0x1c5d17]){const _0x3e8fdf=await getConnection(_0x5af001);if(_0x3e8fdf)_0x21cffe[_0x12ebb5(0x1c7)](...Array[_0x12ebb5(0x196)](_0x3e8fdf)?_0x3e8fdf:[_0x3e8fdf]);}_0x21cffe=[...new Set(_0x21cffe)];if(_0x21cffe[_0x12ebb5(0x1cd)]===0x18e+-0xd*0x2dd+0x23ab)return sendNotice(_0x1ef60d,_0x12ebb5(0x20e)+_0x12ebb5(0x208)+_0x12ebb5(0x22f)+'ld\x20not\x20be\x20'+_0x12ebb5(0x188)+_0x12ebb5(0x19d)+_0x12ebb5(0x178));}}else{_0x1ef60d=_0x262ff0?getBotJid():await findSudoerJid(_0x5f5b64);if(!_0x1ef60d)return;const _0x2062a8=parseGpFromArgs(_0x483565);if(!_0x2062a8)return sendNotice(_0x1ef60d,'In\x20PM,\x20`sb'+_0x12ebb5(0x234)+'s\x20require\x20'+_0x12ebb5(0x202)+'ias\x20or\x20JID'+'\x20via\x20`gp\x20<'+'alias>`\x20or'+_0x12ebb5(0x16d)+_0x12ebb5(0x1bc)+_0x12ebb5(0x1fa));const _0xfa70f6=await _0x2de023[_0x12ebb5(0x180)+'e'](_0x2062a8)||(_0x2062a8['includes'](_0x12ebb5(0x192))?_0x2062a8:null);if(!_0xfa70f6)return sendNotice(_0x1ef60d,_0x12ebb5(0x197)+_0x12ebb5(0x23a)+'or\x20JID:\x20`'+_0x2062a8+'`');_0x21cffe=[_0xfa70f6];}const _0x1bbf80=(_0x483565[_0x12ebb5(0x1bf)](_0x4f7c9d=>['on','off',_0x12ebb5(0x1ac)]['includes'](_0x4f7c9d[_0x12ebb5(0x1ea)+'e']()))||'show')[_0x12ebb5(0x1ea)+'e'](),_0x429899=_0x483565['find'](_0x8a96d5=>[_0x12ebb5(0x1db),_0x12ebb5(0x210),_0x12ebb5(0x238)][_0x12ebb5(0x231)](_0x8a96d5['toLowerCas'+'e']()));let _0x2ac368='';for(const _0x3639bf of _0x21cffe){if(_0x429899){if(_0x429899===_0x12ebb5(0x1db)){if(_0x483565[_0x12ebb5(0x231)](_0x12ebb5(0x18e))){const _0x3a4efd=_0x2fbc44[_0x12ebb5(0x1ea)+'e']()[_0x12ebb5(0x228)]('set')+(0x19f7*-0x1+0x10c1+-0x49d*-0x2);let _0x406c8d=_0x2fbc44[_0x12ebb5(0x1b5)](_0x3a4efd)[_0x12ebb5(0x1d1)]();const _0xe9e9d5=parseGpFromArgs(_0x483565);if(_0xe9e9d5)_0x406c8d=_0x406c8d[_0x12ebb5(0x151)](new RegExp(_0x12ebb5(0x150)+'s*'+_0xe9e9d5+_0x12ebb5(0x157),'i'),'')['trim']();if(!_0x406c8d){_0x2ac368+=_0x12ebb5(0x189)+_0x12ebb5(0x21e)+_0x12ebb5(0x198)+'ge\x20for\x20'+_0x3639bf+'.\x0a';continue;}await setWarnSettings(_0x3639bf,{'warn_message':_0x406c8d}),_0x2ac368+='✅\x20Warn\x20mes'+_0x12ebb5(0x1b9)+_0x3639bf+_0x12ebb5(0x1ca);}else{const {warn_message:_0x387e0e}=await getWarnSettings(_0x3639bf);_0x2ac368+=_0x12ebb5(0x18c)+'age\x20for\x20'+_0x3639bf+':*\x0a'+_0x387e0e+'\x0a\x0a';}}else{if(_0x429899===_0x12ebb5(0x210)){if(_0x483565[_0x12ebb5(0x231)](_0x12ebb5(0x18e))){const _0x5af5f2=parseInt(_0x483565[_0x483565['indexOf'](_0x12ebb5(0x18e))+(0x8ab*0x3+0xef8+-0x28f8)],0x1a1d*0x1+0x25a6*-0x1+0x1*0xb93);if(isNaN(_0x5af5f2)||_0x5af5f2<0xd28+0x1549+-0x89c*0x4){_0x2ac368+='Invalid\x20nu'+_0x12ebb5(0x1c9)+_0x12ebb5(0x235)+_0x12ebb5(0x1a8)+_0x3639bf+'.\x0a';continue;}await setWarnSettings(_0x3639bf,{'max_warns':_0x5af5f2}),_0x2ac368+=_0x12ebb5(0x1af)+'s\x20for\x20'+_0x3639bf+'\x20set\x20to\x20'+_0x5af5f2+'.\x0a';}else{const {max_warns:_0x5b9dae}=await getWarnSettings(_0x3639bf);_0x2ac368+='ℹ️\x20Max\x20warn'+'s\x20for\x20'+_0x3639bf+'\x20is\x20'+_0x5b9dae+'.\x0a';}}else{if(_0x429899==='resetwarns'){const _0x3d9e6b=_0x5f5b64['message']?.[_0x12ebb5(0x1dd)+'xtMessage']?.['contextInf'+'o']?.[_0x12ebb5(0x1d3)+'id']||[];if(!_0x3d9e6b[_0x12ebb5(0x1cd)]){_0x2ac368+=_0x12ebb5(0x170)+_0x12ebb5(0x191)+_0x12ebb5(0x1ab)+_0x12ebb5(0x224)+'\x20for\x20in\x20'+_0x3639bf+'.\x0a';continue;}for(const _0x296e2c of _0x3d9e6b)await setWarnCount(_0x3639bf,_0x296e2c,0x1ad6+-0x13e0+0x252*-0x3);_0x2ac368+=_0x12ebb5(0x201)+_0x12ebb5(0x15f)+_0x12ebb5(0x1eb)+_0x12ebb5(0x1de)+'n\x20'+_0x3639bf+'.\x0a';}}}}else{if(_0x1bbf80==='on')await setChatEnabled(_0x3639bf,!![]),_0x2ac368+=_0x12ebb5(0x225)+'ock\x20**ENAB'+'LED**\x20for\x20'+_0x3639bf+'\x0a';else{if(_0x1bbf80===_0x12ebb5(0x21b))await setChatEnabled(_0x3639bf,![]),_0x2ac368+=_0x12ebb5(0x229)+_0x12ebb5(0x184)+_0x12ebb5(0x19b)+'\x20'+_0x3639bf+'\x0a';else{const _0x37df54=await getChatEnabled(_0x3639bf);let _0x11c18e=_0x37df54?_0x12ebb5(0x163):_0x12ebb5(0x16c);_0x2ac368+='*Status\x20lo'+_0x12ebb5(0x15d)+_0x3639bf+_0x12ebb5(0x16f)+_0x11c18e+'\x0a\x0a';}}}}await sendNotice(_0x1ef60d,_0x2ac368[_0x12ebb5(0x1d1)]());}export async function initialize(_0x3b6145){const _0x173627=_0x37112a;botRef=_0x3b6145,await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x173627(0x193)+_0x173627(0x221),'handler':rawMessagesUpsertHandler,'moduleName':name}),info(_0x173627(0x20b)+_0x173627(0x1f9)+'ode:\x20Group'+_0x173627(0x1d6)+'(Opt-In).\x20'+_0x173627(0x169)+':\x20'+DEFAULTS[_0x173627(0x1b1)+_0x173627(0x1bb)]+'ms.');}export async function cleanup(){const _0x1e5a61=_0x37112a;stopManagedListener(name,'messages.u'+_0x1e5a61(0x221)),processedMessageKeys[_0x1e5a61(0x1a2)](_0x926ccc=>clearTimeout(_0x926ccc)),processedMessageKeys[_0x1e5a61(0x218)](),botRef=null,info(_0x1e5a61(0x15b)+_0x1e5a61(0x22a));}