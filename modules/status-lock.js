const _0x43041f=_0x2eac;(function(_0x4933f5,_0x4189c1){const _0x4f7ad8=_0x2eac,_0x3b2dba=_0x4933f5();while(!![]){try{const _0x1d6f97=-parseInt(_0x4f7ad8(0x21f))/(0x16e2+0x1ae0+-0x31c1)+-parseInt(_0x4f7ad8(0x1d8))/(-0x2251*0x1+0x59a+-0x331*-0x9)*(-parseInt(_0x4f7ad8(0x152))/(-0x191*0x16+0x4*-0x737+0x3f55))+-parseInt(_0x4f7ad8(0x178))/(0xc9*0x10+-0x1954+0xcc8)*(-parseInt(_0x4f7ad8(0x161))/(-0x22f5+-0x18a8+0x11*0x382))+parseInt(_0x4f7ad8(0x1e4))/(0x914*-0x1+-0x3ef+0xd09)+-parseInt(_0x4f7ad8(0x1d3))/(0xfc*0x1+-0x87b+-0x1*-0x786)*(parseInt(_0x4f7ad8(0x1ab))/(-0xd1a+-0x1eb6+-0x2bd8*-0x1))+-parseInt(_0x4f7ad8(0x17f))/(0x3*0x5b3+-0x268c*-0x1+-0x379c)*(parseInt(_0x4f7ad8(0x238))/(-0x1*0x1237+0x2b*0x61+0x1f6))+parseInt(_0x4f7ad8(0x18a))/(-0x86c+-0x2*0x1345+0x3f*0xbf);if(_0x1d6f97===_0x4189c1)break;else _0x3b2dba['push'](_0x3b2dba['shift']());}catch(_0x281210){_0x3b2dba['push'](_0x3b2dba['shift']());}}}(_0xba21,-0x64724*0x1+-0x47e33+-0x1*-0xf278a));import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';function _0x2eac(_0xfc6c75,_0x2194c0){const _0x579f06=_0xba21();return _0x2eac=function(_0x440b3a,_0x57c1d7){_0x440b3a=_0x440b3a-(-0x243b+-0x1fe8+0x456a);let _0x12c0a1=_0x579f06[_0x440b3a];return _0x12c0a1;},_0x2eac(_0xfc6c75,_0x2194c0);}import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import*as _0x2f8641 from'../utils/groups.js';import{getDefault,getConnection}from'../utils/connection.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';import{getConfig}from'../utils/config.js';export const name=_0x43041f(0x1fc)+_0x43041f(0x23b)+'k';export const version=_0x43041f(0x202)+_0x43041f(0x1e8);export const priority=-0x17b5+0x1923+0xf1*-0x1;export const commands=[_0x43041f(0x234)];export const configKeys=['STATUS_BRO'+_0x43041f(0x1e5)+_0x43041f(0x153),_0x43041f(0x1a5)+_0x43041f(0x1e5)+_0x43041f(0x22c)+_0x43041f(0x196),'STATUS_BRO'+_0x43041f(0x1e5)+_0x43041f(0x226)+'N',_0x43041f(0x1a5)+_0x43041f(0x192)];const FALLBACK_DEFAULTS={'DEDUPE_TTL_MS':(-0xc06+-0x1*-0x33b+0x8e9*0x1)*(0x4*-0x38b+0x152+0x35a*0x5),'DEFAULT_WARN_MESSAGE':_0x43041f(0x20f)+_0x43041f(0x244)+_0x43041f(0x21d)+_0x43041f(0x243)+'RNINGS:*\x20{'+_0x43041f(0x17d)+'\x0a*REMAININ'+_0x43041f(0x184)+_0x43041f(0x224)+'ing_warns}'+_0x43041f(0x210)+_0x43041f(0x1d5),'DEFAULT_MAX_WARN':0x3,'DEFAULT_REASON':'Posting\x20st'+'atus\x20broad'+_0x43041f(0x20c)};let CONFIG={};try{CONFIG=typeof getConfig===_0x43041f(0x1b6)?getConfig()||{}:{};}catch(_0x19f561){warn(_0x43041f(0x16b)+_0x43041f(0x1f1)+_0x43041f(0x19c)+'or,\x20procee'+_0x43041f(0x1ce)+_0x43041f(0x193)+_0x43041f(0x201)),CONFIG={};}const DEFAULTS={'DEDUPE_TTL_MS':Number(CONFIG?.[_0x43041f(0x1a5)+_0x43041f(0x192)]?.['DEDUPE_TTL'+_0x43041f(0x17c)]??CONFIG[_0x43041f(0x1a5)+_0x43041f(0x22d)+_0x43041f(0x1a2)]??FALLBACK_DEFAULTS[_0x43041f(0x1c0)+_0x43041f(0x17c)])||FALLBACK_DEFAULTS[_0x43041f(0x1c0)+'_MS'],'DEFAULT_WARN_MESSAGE':typeof CONFIG['STATUS_BRO'+_0x43041f(0x1e5)+'AULT_WARN']==='string'&&CONFIG['STATUS_BRO'+'ADCAST_DEF'+_0x43041f(0x153)][_0x43041f(0x1df)]?CONFIG[_0x43041f(0x1a5)+_0x43041f(0x1e5)+_0x43041f(0x153)]:typeof CONFIG?.[_0x43041f(0x1a5)+'ADCAST']?.[_0x43041f(0x1ba)+'RN']===_0x43041f(0x1f0)&&CONFIG[_0x43041f(0x1a5)+'ADCAST'][_0x43041f(0x1ba)+'RN'][_0x43041f(0x1df)]?CONFIG['STATUS_BRO'+'ADCAST']['DEFAULT_WA'+'RN']:FALLBACK_DEFAULTS['DEFAULT_WA'+'RN_MESSAGE'],'DEFAULT_MAX_WARN':Number(CONFIG[_0x43041f(0x1a5)+_0x43041f(0x1e5)+'AULT_MAX_W'+_0x43041f(0x196)]??CONFIG?.[_0x43041f(0x1a5)+_0x43041f(0x192)]?.[_0x43041f(0x230)]??FALLBACK_DEFAULTS[_0x43041f(0x246)+_0x43041f(0x1a9)])||FALLBACK_DEFAULTS['DEFAULT_MA'+_0x43041f(0x1a9)],'DEFAULT_REASON':typeof CONFIG[_0x43041f(0x1a5)+_0x43041f(0x1e5)+_0x43041f(0x226)+'N']===_0x43041f(0x1f0)&&CONFIG[_0x43041f(0x1a5)+_0x43041f(0x1e5)+_0x43041f(0x226)+'N'][_0x43041f(0x1df)]?CONFIG[_0x43041f(0x1a5)+_0x43041f(0x1e5)+'AULT_REASO'+'N']:typeof CONFIG?.[_0x43041f(0x1a5)+_0x43041f(0x192)]?.[_0x43041f(0x18d)+_0x43041f(0x160)]===_0x43041f(0x1f0)&&CONFIG[_0x43041f(0x1a5)+_0x43041f(0x192)][_0x43041f(0x18d)+_0x43041f(0x160)][_0x43041f(0x1df)]?CONFIG[_0x43041f(0x1a5)+_0x43041f(0x192)][_0x43041f(0x18d)+_0x43041f(0x160)]:FALLBACK_DEFAULTS['DEFAULT_RE'+_0x43041f(0x160)]};let botRef=null;const processedMessageKeys=new Map(),sleep=_0x941cb0=>new Promise(_0x2311e8=>setTimeout(_0x2311e8,_0x941cb0));function isStatusBroadcastMention(_0x2f7932){const _0x5a6fd9=_0x43041f;if(!_0x2f7932||!_0x2f7932[_0x5a6fd9(0x167)])return![];const _0x1d381b=_0x2f7932['message'];return _0x1d381b[_0x5a6fd9(0x14c)+_0x5a6fd9(0x1b4)+_0x5a6fd9(0x151)]||_0x1d381b['protocolMe'+'ssage']?.['key']?.['remoteJid']?.[_0x5a6fd9(0x158)+'e']()===_0x5a6fd9(0x1c3)+_0x5a6fd9(0x155)||_0x1d381b[_0x5a6fd9(0x164)+'textInfo']?.[_0x5a6fd9(0x1c1)+'age']?.[_0x5a6fd9(0x1a1)+_0x5a6fd9(0x151)]?.['key']?.[_0x5a6fd9(0x213)]?.[_0x5a6fd9(0x158)+'e']()===_0x5a6fd9(0x1c3)+_0x5a6fd9(0x155);}const TABLE_SETTINGS=_0x43041f(0x1fc)+_0x43041f(0x1d2)+_0x43041f(0x166),TABLE_WARN_USERS='status_bro'+_0x43041f(0x1e1)+'ns',TABLE_WARN_SETTINGS=_0x43041f(0x1fc)+'adcast_war'+'n_settings';function _0xba21(){const _0x14c475=['length','te\x20failed:','adcast_war','isCommand','[sbl]\x20ensu','1931772DlgcOi','ADCAST_DEF','ode:\x20Group','(Opt-In).\x20','p-only','_warns}','ialized.\x20M','mmand\x20to\x20t','id\x20=\x20?','NOT\x20NULL,\x20','ed\x20','LED**\x20for\x20','string','onfig()\x20th','\x20by\x20adding','ntion\x20a\x20us','alias>`\x20or',',\x20warn_mes','ARY\x20KEY,\x20e','ALUES\x20(?,\x20','now','max_warns','remove','@g.us','status_bro','exec',',\x20warn_cou','cluded.war','sock','lts.','3.1.0-grou','psert','{max_warns','\x20DO\x20UPDATE','\x20set\x20to\x20','ock\x20**DISA','\x20in\x20','\x20notice\x20to','age\x20for\x20','ed\x20to\x20send','casts.','get','ock\x20**ENAB','*⚠️WARN\x20MES','\x0a*REASON:*','caption','warn_count','remoteJid','TEGER,\x20upd','ate','d_at\x20=\x20exc','off','\x20(chat_jid','(?,\x20?,\x20?)\x20','E\x20SET\x20enab','resolveNam','[sbl]\x20init','SER:*\x20{use','e\x20TEXT,\x20ma','292951WNXCXK','CT(chat_ji','mentionedJ','led\x20=\x20excl','\x20from\x20',':*\x20{remain','ated_at\x20IN','AULT_REASO','max_warns,','ion(s)\x20cou','fromMe','o\x20any\x20grou','OM\x20','AULT_MAX_W','ADCAST_DED','warnmsg','?,\x20?,\x20?)\x20O','MAX_WARN','✅\x20Max\x20warn','(gp:|gp)?\x5c','CREATE\x20TAB','sbl','.updated_a',',\x20user_jid','excluded.w','490EawyDA','✅\x20Warnings','d)\x20DO\x20UPDA','adcast_loc','luded.upda','bled\x20FROM\x20','ax\x20warning','(chat_jid)','includes','run','LE\x20IF\x20NOT\x20','r}\x0a*MAX\x20WA','SAGE⚠️*\x0a\x0a*U','SELECT\x20war','DEFAULT_MA','Dedupe\x20TTL','\x20mentioned','t_jid\x20=\x20?','\x20TEXT\x20PRIM','✅\x20Warn\x20mes','s\x20in\x20','find','conversati','groupStatu','\x20TEXT\x20NOT\x20','✅\x20ENABLED','N\x20CONFLICT','sage,\x20max_','ssage','3945BKDJxF','AULT_WARN','❌\x20Status\x20l','adcast','e\x20removed.','delete','toLowerCas','arn_messag','l`\x20command','groupParti','_jid\x20TEXT\x20','[sbl]\x20Fail',')\x20DO\x20UPDAT','ned\x20up','ASON','265JWblEi','split','BLED**\x20for','messageCon',':*\x0a','tings','message','ld\x20not\x20be\x20','Your\x20defau','sage\x20for\x20','[sbl]\x20getC','\x20has\x20reach','gp:','text','❌\x20DISABLED','contextInf','\x20end.','participan','lt\x20connect','{remaining','[sbl]\x20fail','has','RN_MESSAGE','31820UYAEIO','ted_at\x20INT','trim','NULL,\x20user','_MS','max_warns}','reTables\x20f','61515ZKyOmC','n_message,','ck\x20for\x20','\x20reset\x20for','forEach','G\x20WARNINGS','n_count\x20=\x20','a\x20group\x20al','[sbl]\x20clea','or\x20JID:\x20`','resolved\x20t','5742847UevIcc','EXISTS\x20','[sbl]\x20dele','DEFAULT_RE','\x20updated_a','\x20it\x20to\x20the','ed,\x20update','d,\x20user_ji','ADCAST','file\x20defau','Please\x20@me','Invalid\x20nu','ARN','clear','n_count\x20FR','messages.u','ge\x20for\x20','imageMessa','rew\x20an\x20err','EFAULT\x200,\x20','show','No\x20default','✅\x20Status\x20l','protocolMe','UPE_TTL_MS','\x20WHERE\x20cha','Y\x20(chat_ji','STATUS_BRO','ARY\x20KEY,\x20w','sendMessag','enabled','X_WARN','ted_at;','3508880BHDoRO','xtMessage','set','\x20updated.\x0a','\x20SET\x20warn_','\x20ON\x20CONFLI','t=excluded',',\x20enabled,','\x20is\x20','sMentionMe','d));','function','and\x20will\x20b','\x20connectio','{user}','DEFAULT_WA','s\x20require\x20','ON\x20CONFLIC','t\x20warnings','message=ex','cipantsUpd','DEDUPE_TTL','quotedMess','resetwarns','status@bro','maxwarns','x_warns\x20IN','ailed','slice','jid','INSERT\x20INT','ias\x20or\x20JID','replace','floor','ed\x20to\x20kick','ding\x20with\x20','\x20FROM\x20','indexOf','TEGER);','adcast_set','7BQcZQY','\x20group\x20onl','\x20{reason}','warn_messa','\x20INTEGER\x20D','134GepufC','videoMessa','push','\x20warnings\x20','key','from','extendedTe'];_0xba21=function(){return _0x14c475;};return _0xba21();}async function ensureTables(){const _0x123591=_0x43041f;try{await db[_0x123591(0x1fd)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+'EXISTS\x20'+TABLE_SETTINGS+(_0x123591(0x218)+_0x123591(0x147)+_0x123591(0x1f6)+'nabled\x20INT'+'EGER,\x20upda'+_0x123591(0x179)+'EGER);')),await db[_0x123591(0x1fd)]('CREATE\x20TAB'+_0x123591(0x242)+_0x123591(0x18b)+TABLE_WARN_USERS+('\x20(chat_jid'+_0x123591(0x14d)+_0x123591(0x17b)+_0x123591(0x15c)+_0x123591(0x1ed)+_0x123591(0x212)+_0x123591(0x1d7)+_0x123591(0x19d)+'PRIMARY\x20KE'+_0x123591(0x1a4)+_0x123591(0x191)+_0x123591(0x1b5))),await db[_0x123591(0x1fd)](_0x123591(0x233)+_0x123591(0x242)+'EXISTS\x20'+TABLE_WARN_SETTINGS+(_0x123591(0x218)+_0x123591(0x147)+_0x123591(0x1a6)+_0x123591(0x159)+_0x123591(0x21e)+_0x123591(0x1c5)+_0x123591(0x214)+_0x123591(0x225)+_0x123591(0x1d1)));}catch(_0x5298d9){error(_0x5298d9,_0x123591(0x1e3)+_0x123591(0x17e)+_0x123591(0x1c6));throw _0x5298d9;}}async function getChatEnabled(_0x5859bd){const _0x46f68f=_0x43041f,_0x4244d3=await db[_0x46f68f(0x20d)]('SELECT\x20ena'+_0x46f68f(0x23d)+TABLE_SETTINGS+(_0x46f68f(0x1a3)+_0x46f68f(0x249)),[_0x5859bd]);return _0x4244d3?Number(_0x4244d3[_0x46f68f(0x1a8)])===-0x247*-0x3+0xd6a+-0x2*0xa1f:![];}async function setChatEnabled(_0x1b26d9,_0x2bef85){const _0x553220=_0x43041f;await db[_0x553220(0x241)](_0x553220(0x1c9)+'O\x20'+TABLE_SETTINGS+(_0x553220(0x218)+_0x553220(0x1b2)+_0x553220(0x18e)+'t)\x20VALUES\x20'+_0x553220(0x219)+_0x553220(0x1bc)+'T(chat_jid'+_0x553220(0x15e)+_0x553220(0x21a)+_0x553220(0x222)+'uded.enabl'+_0x553220(0x190)+_0x553220(0x216)+_0x553220(0x23c)+_0x553220(0x1aa)),[_0x1b26d9,_0x2bef85?0xb1*-0x1d+-0x2*0x14b+0x15*0x114:-0x23f6+-0xdf1+0x5*0x9fb,Math['floor'](Date[_0x553220(0x1f8)]()/(0x1*-0x1906+0x1*-0x1a11+0xd*0x43b))]);}async function getWarnSettings(_0x8448b5){const _0x1f0987=_0x43041f,_0xbd762b=await db[_0x1f0987(0x20d)](_0x1f0987(0x245)+'n_message,'+'\x20max_warns'+_0x1f0987(0x1cf)+TABLE_WARN_SETTINGS+('\x20WHERE\x20cha'+'t_jid\x20=\x20?'),[_0x8448b5]),_0x5068dc=DEFAULTS[_0x1f0987(0x1ba)+_0x1f0987(0x177)],_0x339609=DEFAULTS['DEFAULT_MA'+_0x1f0987(0x1a9)];if(!_0xbd762b)return{'warn_message':_0x5068dc,'max_warns':_0x339609};return{'warn_message':_0xbd762b[_0x1f0987(0x1d6)+'ge']&&_0xbd762b[_0x1f0987(0x1d6)+'ge']['length']?_0xbd762b['warn_messa'+'ge']:_0x5068dc,'max_warns':Number['isFinite'](Number(_0xbd762b['max_warns']))&&Number(_0xbd762b[_0x1f0987(0x1f9)])>0x2*0xbe9+0x1fc7+-0x3799?Number(_0xbd762b['max_warns']):_0x339609};}async function setWarnSettings(_0x26b353,_0x19d124){const _0x8705d3=_0x43041f,_0x2435b0=await getWarnSettings(_0x26b353),_0x1182a4='warn_messa'+'ge'in _0x19d124?_0x19d124[_0x8705d3(0x1d6)+'ge']:_0x2435b0[_0x8705d3(0x1d6)+'ge'],_0x1947ce=_0x8705d3(0x1f9)in _0x19d124?_0x19d124['max_warns']:_0x2435b0[_0x8705d3(0x1f9)];await db[_0x8705d3(0x241)]('INSERT\x20INT'+'O\x20'+TABLE_WARN_SETTINGS+(_0x8705d3(0x218)+_0x8705d3(0x1f5)+_0x8705d3(0x150)+'warns,\x20upd'+'ated_at)\x20V'+_0x8705d3(0x1f7)+_0x8705d3(0x22f)+_0x8705d3(0x14f)+_0x8705d3(0x23f)+_0x8705d3(0x205)+_0x8705d3(0x1af)+_0x8705d3(0x1be)+_0x8705d3(0x1ff)+_0x8705d3(0x180)+'\x20max_warns'+'=excluded.'+_0x8705d3(0x227)+'\x20updated_a'+_0x8705d3(0x1b1)+_0x8705d3(0x235)+'t;'),[_0x26b353,_0x1182a4,_0x1947ce,Math[_0x8705d3(0x1cc)](Date[_0x8705d3(0x1f8)]()/(0xa14+-0x19c4*0x1+0x1398))]);}async function getWarnCount(_0x1242e3,_0x513643){const _0x3058d4=_0x43041f,_0x436a79=await db[_0x3058d4(0x20d)](_0x3058d4(0x245)+_0x3058d4(0x198)+_0x3058d4(0x22b)+TABLE_WARN_USERS+(_0x3058d4(0x1a3)+'t_jid\x20=\x20?\x20'+'AND\x20user_j'+_0x3058d4(0x1ec)),[_0x1242e3,_0x513643]);return _0x436a79?Number(_0x436a79[_0x3058d4(0x212)]||0x1dbe+-0x3ee*-0x5+0x4*-0xc59):-0x17*0x180+-0x10f3+-0x3373*-0x1;}async function setWarnCount(_0x21fb40,_0x49958c,_0x54d8ed){const _0x1f651f=_0x43041f;await db[_0x1f651f(0x241)](_0x1f651f(0x1c9)+'O\x20'+TABLE_WARN_USERS+(_0x1f651f(0x218)+_0x1f651f(0x236)+_0x1f651f(0x1fe)+'nt)\x20VALUES'+'\x20(?,\x20?,\x20?)'+_0x1f651f(0x1b0)+_0x1f651f(0x220)+_0x1f651f(0x191)+_0x1f651f(0x23a)+'TE\x20SET\x20war'+_0x1f651f(0x185)+_0x1f651f(0x237)+'arn_count;'),[_0x21fb40,_0x49958c,Number(_0x54d8ed||-0x1091+-0xfc*0x26+0x151*0x29)]);}async function sendNotice(_0x1256c8,_0x435938,_0x150313=[]){const _0x28d624=_0x43041f;if(!_0x1256c8||!botRef)return;try{const _0x45a717=botRef[_0x28d624(0x200)]?.[_0x28d624(0x1a7)+'e']||botRef[_0x28d624(0x1a7)+'e'];await _0x45a717(_0x1256c8,{'text':_0x435938,'mentions':Array['isArray'](_0x150313)?_0x150313:[]});}catch(_0x2b1dca){warn(_0x28d624(0x175)+_0x28d624(0x20b)+_0x28d624(0x209)+'\x20'+_0x1256c8+':\x20'+(_0x2b1dca?.['message']||_0x2b1dca));}}async function kickUser(_0x2ae7eb,_0x30f3d4){const _0x18400a=_0x43041f;try{const _0x1c7011=botRef?.[_0x18400a(0x200)]||botRef;if(_0x1c7011?.[_0x18400a(0x15b)+_0x18400a(0x1bf)+'ate'])return await _0x1c7011[_0x18400a(0x15b)+_0x18400a(0x1bf)+_0x18400a(0x215)](_0x2ae7eb,[_0x30f3d4],_0x18400a(0x1fa)),info('[sbl]\x20kick'+_0x18400a(0x1ee)+_0x30f3d4+_0x18400a(0x223)+_0x2ae7eb),!![];return![];}catch(_0xa2d632){return error(_0xa2d632,_0x18400a(0x15d)+_0x18400a(0x1cd)+'\x20'+_0x30f3d4),![];}}async function issueAutoWarningFor(_0x3c70d0){const _0x51d641=_0x43041f,_0x34c714=_0x3c70d0[_0x51d641(0x1dc)][_0x51d641(0x213)],_0x2066b9=_0x3c70d0[_0x51d641(0x1dc)][_0x51d641(0x172)+'t']||_0x3c70d0['key'][_0x51d641(0x213)];if(await isadmin(botRef,{'key':_0x3c70d0['key'],'message':_0x3c70d0[_0x51d641(0x167)]}))return;const {warn_message:_0xece87,max_warns:_0x29faed}=await getWarnSettings(_0x34c714),_0x5927a9=await getWarnCount(_0x34c714,_0x2066b9),_0x10ef21=_0x5927a9+(-0x1*-0xddf+0x13b*0x11+-0x22c9);await setWarnCount(_0x34c714,_0x2066b9,_0x10ef21);if(_0x10ef21>=_0x29faed){await sendNotice(_0x34c714,'*🚨BAN\x20ALER'+'T🚨*\x0a\x0aUser\x20'+'@'+_0x2066b9[_0x51d641(0x162)]('@')[-0x7*-0x580+-0xf94+0x28c*-0x9]+(_0x51d641(0x16c)+_0x51d641(0x1ee))+_0x29faed+(_0x51d641(0x1db)+_0x51d641(0x1b7)+_0x51d641(0x156)),[_0x2066b9]),await kickUser(_0x34c714,_0x2066b9),await setWarnCount(_0x34c714,_0x2066b9,-0x22d7+-0x5d5*0x1+-0x28ac*-0x1);return;}const _0x3f0965=_0x29faed-_0x10ef21;let _0x517fbb=String(_0xece87)[_0x51d641(0x1cb)](_0x51d641(0x1b9),'@'+_0x2066b9['split']('@')[-0x13de+0x97e+0x53*0x20])[_0x51d641(0x1cb)](_0x51d641(0x204)+'}',String(_0x29faed))['replace'](_0x51d641(0x174)+_0x51d641(0x1e9),String(_0x3f0965))[_0x51d641(0x1cb)]('{reason}',DEFAULTS[_0x51d641(0x18d)+_0x51d641(0x160)]);await sendNotice(_0x34c714,_0x517fbb,[_0x2066b9]),info('[sbl]\x20warn'+_0x51d641(0x1ee)+_0x2066b9+_0x51d641(0x208)+_0x34c714+'\x20('+_0x10ef21+'/'+_0x29faed+')');}async function deleteWithRetryMsg(_0x3c1b84){const _0x2960f5=_0x43041f;for(let _0xc9cab4=0x1ec7+0xe6d+0x1*-0x2d34;_0xc9cab4<-0x16e4+0x74d*0x1+-0x79*-0x21;_0xc9cab4++){try{const _0x3fec29=botRef['sock']?.[_0x2960f5(0x1a7)+'e']||botRef[_0x2960f5(0x1a7)+'e'];return await _0x3fec29(_0x3c1b84[_0x2960f5(0x1dc)][_0x2960f5(0x213)],{'delete':_0x3c1b84[_0x2960f5(0x1dc)]}),!![];}catch(_0x56d20a){if(_0xc9cab4===-0x269d+0x4f7+0x3b*0x92)await sleep(0x6*0x2ab+-0x2e0+0x30a*-0x4);else warn(_0x2960f5(0x18c)+_0x2960f5(0x1e0)+'\x20'+(_0x56d20a?.[_0x2960f5(0x167)]||_0x56d20a));}}return![];}async function rawMessagesUpsertHandler({messages:_0x46cdb4}){const _0x3485d8=_0x43041f;for(const _0x558fce of _0x46cdb4){const _0x186f1d=_0x558fce[_0x3485d8(0x1dc)]?.[_0x3485d8(0x213)];if(!_0x558fce[_0x3485d8(0x167)]||_0x558fce[_0x3485d8(0x1dc)][_0x3485d8(0x229)]||!_0x186f1d||!_0x186f1d['endsWith']('@g.us'))continue;const _0x451bd7=_0x186f1d+'::'+_0x558fce[_0x3485d8(0x1dc)]['id'];if(processedMessageKeys['has'](_0x451bd7))continue;processedMessageKeys[_0x3485d8(0x1ad)](_0x451bd7,setTimeout(()=>processedMessageKeys[_0x3485d8(0x157)](_0x451bd7),DEFAULTS[_0x3485d8(0x1c0)+_0x3485d8(0x17c)]));const _0x165956=await getChatEnabled(_0x186f1d);if(!_0x165956||await isadmin(botRef,{'key':_0x558fce[_0x3485d8(0x1dc)],'message':_0x558fce[_0x3485d8(0x167)]}))continue;isStatusBroadcastMention(_0x558fce)&&(await deleteWithRetryMsg(_0x558fce)&&await issueAutoWarningFor(_0x558fce));}}async function findSudoerJid(_0xe19a6b){const _0x387a69=_0x43041f,{findings:_0x3c2b26}=userJidFromCtx(_0xe19a6b),_0x33d199=await listSudo(),_0x35a21a=new Set(_0x33d199['map'](String));for(const _0x31aa52 of _0x3c2b26){if(_0x31aa52?.['jid']){const _0x6d23a1=normalizeToJid(_0x31aa52['jid']);if(_0x6d23a1&&_0x35a21a[_0x387a69(0x176)](_0x6d23a1))return _0x6d23a1;if(_0x35a21a[_0x387a69(0x176)](_0x31aa52[_0x387a69(0x1c8)]))return _0x31aa52[_0x387a69(0x1c8)];}}return null;}async function getMessageText(_0x44e2bf){const _0x396590=_0x43041f;if(!_0x44e2bf||!_0x44e2bf[_0x396590(0x167)])return'';const _0x4d4a9e=_0x44e2bf[_0x396590(0x167)];return _0x4d4a9e[_0x396590(0x14b)+'on']||_0x4d4a9e[_0x396590(0x1de)+_0x396590(0x1ac)]?.['text']||_0x4d4a9e[_0x396590(0x19b)+'ge']?.[_0x396590(0x211)]||_0x4d4a9e[_0x396590(0x1d9)+'ge']?.[_0x396590(0x211)]||'';}function parseGpFromArgs(_0x1a30d1){const _0x224924=_0x43041f,_0x3fdba6=_0x1a30d1['findIndex'](_0x5a3a22=>_0x5a3a22[_0x224924(0x158)+'e']()===_0x224924(0x16d)||_0x5a3a22[_0x224924(0x158)+'e']()==='gp');if(_0x3fdba6!==-(-0x6b7*-0x3+-0x33*-0xa+-0x1622)&&_0x1a30d1[_0x3fdba6+(0x25a9+0x16b*-0x5+-0x1*0x1e91)])return _0x1a30d1[_0x3fdba6+(-0x6e7+0x1cf1+-0x1609*0x1)];const _0x1e5d64=_0x1a30d1[_0x224924(0x14a)](_0x187397=>_0x187397[_0x224924(0x240)]('@g.us'));if(_0x1e5d64)return _0x1e5d64;if(_0x1a30d1[_0x224924(0x1df)]>-0xc*0x200+-0x1eea+0x47*0xc6){const _0x1ec816=_0x1a30d1[_0x1a30d1[_0x224924(0x1df)]-(0x552+0x13ff*0x1+-0x1950)];if(!['on','off',_0x224924(0x19e),_0x224924(0x1ad),'resetwarns',_0x224924(0x22e),_0x224924(0x1c4)][_0x224924(0x240)](_0x1ec816[_0x224924(0x158)+'e']()))return _0x1ec816;}return null;}export async function onMessage(_0x365f1a){const _0x3aa2f5=_0x43041f,_0x4ae5fc=(_0x365f1a[_0x3aa2f5(0x16e)]||await getMessageText(_0x365f1a))[_0x3aa2f5(0x17a)]();if(!_0x365f1a[_0x3aa2f5(0x1e2)]||!_0x4ae5fc)return;const [_0x3e3558,..._0x3eae86]=_0x4ae5fc['split'](/\s+/),_0xeb0c70=_0x3e3558[_0x3aa2f5(0x158)+'e']()[_0x3aa2f5(0x1cb)]('/','');if(!commands[_0x3aa2f5(0x240)](_0xeb0c70))return;const _0x223dca=_0x365f1a[_0x3aa2f5(0x1dc)]['remoteJid']['endsWith']('@g.us'),_0xc22981=_0x365f1a[_0x3aa2f5(0x1dc)][_0x3aa2f5(0x229)],_0x547bc6=_0xc22981?!![]:await isSudo(botRef,_0x365f1a),_0x552c79=_0x223dca?await isadmin(botRef,_0x365f1a):![];if(!_0x223dca&&!_0x547bc6)return;if(_0x223dca&&!_0x552c79)return;let _0x4dcb52,_0x7d4463=[];if(_0x223dca){_0x4dcb52=_0x365f1a[_0x3aa2f5(0x1dc)][_0x3aa2f5(0x213)];const _0x40fed9=(_0x365f1a[_0x3aa2f5(0x1dc)]['participan'+'t']||_0x365f1a[_0x3aa2f5(0x1dc)][_0x3aa2f5(0x1dd)])[_0x3aa2f5(0x162)]('@')[-0xe*0x89+-0x7bc+-0x2*-0x79d],_0x120f16=await getDefault(_0x40fed9);if(!_0x120f16||_0x120f16[_0x3aa2f5(0x1df)]===0xfe*-0x1c+0x12d0+-0x38*-0x29)_0x7d4463=[_0x365f1a['key'][_0x3aa2f5(0x213)]],await sendNotice(_0x4dcb52,_0x3aa2f5(0x19f)+_0x3aa2f5(0x1b8)+'n\x20found.\x20A'+'pplying\x20co'+_0x3aa2f5(0x1eb)+'he\x20current'+_0x3aa2f5(0x1d4)+'y.');else{for(const _0x2336cc of Array['isArray'](_0x120f16)?_0x120f16:[_0x120f16]){const _0x2fff45=await getConnection(_0x2336cc);if(_0x2fff45)_0x7d4463[_0x3aa2f5(0x1da)](...Array['isArray'](_0x2fff45)?_0x2fff45:[_0x2fff45]);}_0x7d4463=[...new Set(_0x7d4463)];if(_0x7d4463[_0x3aa2f5(0x1df)]===0x24*0x45+-0xcf7+-0x1*-0x343)return sendNotice(_0x4dcb52,_0x3aa2f5(0x169)+_0x3aa2f5(0x173)+_0x3aa2f5(0x228)+_0x3aa2f5(0x168)+_0x3aa2f5(0x189)+_0x3aa2f5(0x22a)+'ps.');}}else{_0x4dcb52=_0xc22981?getBotJid():await findSudoerJid(_0x365f1a);if(!_0x4dcb52)return;const _0x265c8f=parseGpFromArgs(_0x3eae86);if(!_0x265c8f)return sendNotice(_0x4dcb52,'In\x20PM,\x20`sb'+_0x3aa2f5(0x15a)+_0x3aa2f5(0x1bb)+_0x3aa2f5(0x186)+_0x3aa2f5(0x1ca)+'\x20via\x20`gp\x20<'+_0x3aa2f5(0x1f4)+_0x3aa2f5(0x1f2)+_0x3aa2f5(0x18f)+_0x3aa2f5(0x171));const _0x189e1c=await _0x2f8641[_0x3aa2f5(0x21b)+'e'](_0x265c8f)||(_0x265c8f[_0x3aa2f5(0x240)](_0x3aa2f5(0x1fb))?_0x265c8f:null);if(!_0x189e1c)return sendNotice(_0x4dcb52,'Unknown\x20gr'+'oup\x20alias\x20'+_0x3aa2f5(0x188)+_0x265c8f+'`');_0x7d4463=[_0x189e1c];}const _0x313e92=(_0x3eae86[_0x3aa2f5(0x14a)](_0x3a81af=>['on',_0x3aa2f5(0x217),_0x3aa2f5(0x19e)][_0x3aa2f5(0x240)](_0x3a81af['toLowerCas'+'e']()))||'show')[_0x3aa2f5(0x158)+'e'](),_0x3de5b5=_0x3eae86[_0x3aa2f5(0x14a)](_0x595fcb=>[_0x3aa2f5(0x22e),_0x3aa2f5(0x1c4),_0x3aa2f5(0x1c2)]['includes'](_0x595fcb[_0x3aa2f5(0x158)+'e']()));let _0x19b14a='';for(const _0x2d221e of _0x7d4463){if(_0x3de5b5){if(_0x3de5b5===_0x3aa2f5(0x22e)){if(_0x3eae86['includes'](_0x3aa2f5(0x1ad))){const _0x5ed0a1=_0x4ae5fc[_0x3aa2f5(0x158)+'e']()['indexOf'](_0x3aa2f5(0x1ad))+(-0x1698+-0xb*-0x24b+-0x29d);let _0x29fc6f=_0x4ae5fc[_0x3aa2f5(0x1c7)](_0x5ed0a1)['trim']();const _0x4d3736=parseGpFromArgs(_0x3eae86);if(_0x4d3736)_0x29fc6f=_0x29fc6f['replace'](new RegExp(_0x3aa2f5(0x232)+'s*'+_0x4d3736+'\x5cs*','i'),'')['trim']();if(!_0x29fc6f){_0x19b14a+='Please\x20pro'+'vide\x20a\x20war'+'ning\x20messa'+_0x3aa2f5(0x19a)+_0x2d221e+'.\x0a';continue;}await setWarnSettings(_0x2d221e,{'warn_message':_0x29fc6f}),_0x19b14a+=_0x3aa2f5(0x148)+_0x3aa2f5(0x16a)+_0x2d221e+_0x3aa2f5(0x1ae);}else{const {warn_message:_0x4b11cd}=await getWarnSettings(_0x2d221e);_0x19b14a+='*Warn\x20Mess'+_0x3aa2f5(0x20a)+_0x2d221e+_0x3aa2f5(0x165)+_0x4b11cd+'\x0a\x0a';}}else{if(_0x3de5b5===_0x3aa2f5(0x1c4)){if(_0x3eae86[_0x3aa2f5(0x240)](_0x3aa2f5(0x1ad))){const _0x3fecb2=parseInt(_0x3eae86[_0x3eae86[_0x3aa2f5(0x1d0)](_0x3aa2f5(0x1ad))+(-0x3*0x5e5+0xa10+-0xf4*-0x8)],-0x1*0x137d+0x265+0x2b*0x66);if(isNaN(_0x3fecb2)||_0x3fecb2<0x114b+0x20ed+-0x3237){_0x19b14a+=_0x3aa2f5(0x195)+'mber\x20for\x20m'+_0x3aa2f5(0x23e)+_0x3aa2f5(0x149)+_0x2d221e+'.\x0a';continue;}await setWarnSettings(_0x2d221e,{'max_warns':_0x3fecb2}),_0x19b14a+=_0x3aa2f5(0x231)+'s\x20for\x20'+_0x2d221e+_0x3aa2f5(0x206)+_0x3fecb2+'.\x0a';}else{const {max_warns:_0x14525e}=await getWarnSettings(_0x2d221e);_0x19b14a+='ℹ️\x20Max\x20warn'+'s\x20for\x20'+_0x2d221e+_0x3aa2f5(0x1b3)+_0x14525e+'.\x0a';}}else{if(_0x3de5b5===_0x3aa2f5(0x1c2)){const _0x1ab8a3=_0x365f1a['message']?.[_0x3aa2f5(0x1de)+_0x3aa2f5(0x1ac)]?.[_0x3aa2f5(0x170)+'o']?.[_0x3aa2f5(0x221)+'id']||[];if(!_0x1ab8a3[_0x3aa2f5(0x1df)]){_0x19b14a+=_0x3aa2f5(0x194)+_0x3aa2f5(0x1f3)+'er\x20to\x20rese'+_0x3aa2f5(0x1bd)+'\x20for\x20in\x20'+_0x2d221e+'.\x0a';continue;}for(const _0x1d221a of _0x1ab8a3)await setWarnCount(_0x2d221e,_0x1d221a,0x1*-0xdc1+0x6*-0x602+-0x3d*-0xd1);_0x19b14a+=_0x3aa2f5(0x239)+_0x3aa2f5(0x182)+_0x3aa2f5(0x248)+'\x20user(s)\x20i'+'n\x20'+_0x2d221e+'.\x0a';}}}}else{if(_0x313e92==='on')await setChatEnabled(_0x2d221e,!![]),_0x19b14a+=_0x3aa2f5(0x1a0)+_0x3aa2f5(0x20e)+_0x3aa2f5(0x1ef)+_0x2d221e+'\x0a';else{if(_0x313e92===_0x3aa2f5(0x217))await setChatEnabled(_0x2d221e,![]),_0x19b14a+=_0x3aa2f5(0x154)+_0x3aa2f5(0x207)+_0x3aa2f5(0x163)+'\x20'+_0x2d221e+'\x0a';else{const _0x381c20=await getChatEnabled(_0x2d221e);let _0x434f1c=_0x381c20?_0x3aa2f5(0x14e):_0x3aa2f5(0x16f);_0x19b14a+='*Status\x20lo'+_0x3aa2f5(0x181)+_0x2d221e+_0x3aa2f5(0x165)+_0x434f1c+'\x0a\x0a';}}}}await sendNotice(_0x4dcb52,_0x19b14a[_0x3aa2f5(0x17a)]());}export async function initialize(_0x4d7e69){const _0x46f61c=_0x43041f;botRef=_0x4d7e69,await ensureTables(),startManagedListener({'botRef':botRef,'eventName':_0x46f61c(0x199)+_0x46f61c(0x203),'handler':rawMessagesUpsertHandler,'moduleName':name}),info(_0x46f61c(0x21c)+_0x46f61c(0x1ea)+_0x46f61c(0x1e6)+'-Specific\x20'+_0x46f61c(0x1e7)+_0x46f61c(0x247)+':\x20'+DEFAULTS['DEDUPE_TTL'+_0x46f61c(0x17c)]+'ms.');}export async function cleanup(){const _0xf70c04=_0x43041f;stopManagedListener(name,'messages.u'+_0xf70c04(0x203)),processedMessageKeys[_0xf70c04(0x183)](_0x513ae1=>clearTimeout(_0x513ae1)),processedMessageKeys[_0xf70c04(0x197)](),botRef=null,info(_0xf70c04(0x187)+_0xf70c04(0x15f));}