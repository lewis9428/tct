const _0xdc7108=_0x1a63;(function(_0x2d8640,_0xcb4f8){const _0x1ce3b7=_0x1a63,_0x1b8fbc=_0x2d8640();while(!![]){try{const _0x5894ad=parseInt(_0x1ce3b7(0x24a))/(0xeb2+0x58d+-0x143e*0x1)+-parseInt(_0x1ce3b7(0x245))/(-0x7b1+0x166+0x64d)*(-parseInt(_0x1ce3b7(0x390))/(0xede+-0x1*-0x8ab+-0x1786))+parseInt(_0x1ce3b7(0x298))/(0xac*-0x5+-0x232d+0x1*0x268d)*(-parseInt(_0x1ce3b7(0x1d2))/(0x2a*0x47+0xb8f+-0x1730))+-parseInt(_0x1ce3b7(0x330))/(-0x2296+0x105*-0x16+0x62*0x95)+-parseInt(_0x1ce3b7(0x40a))/(0x3*0x2dd+0x25aa*0x1+-0x2e3a)+-parseInt(_0x1ce3b7(0x34a))/(-0x1*-0x1815+-0x2044+0x837*0x1)+parseInt(_0x1ce3b7(0x339))/(-0x1d9e+-0xb1a*-0x1+0x128d);if(_0x5894ad===_0xcb4f8)break;else _0x1b8fbc['push'](_0x1b8fbc['shift']());}catch(_0x985d96){_0x1b8fbc['push'](_0x1b8fbc['shift']());}}}(_0xb3e3,-0xc78e4+0x3bc54+0x287*0x6c4));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x45cc82 from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name='sched';export const version=_0xdc7108(0x319);export const priority=-0x3*-0x563+0x1*0x247f+-0x3453;export const commands=[_0xdc7108(0x38b),_0xdc7108(0x269)];export const configKeys=['SCHED_CHEC'+_0xdc7108(0x34e)+_0xdc7108(0x3ea),_0xdc7108(0x41f)+_0xdc7108(0x3f8)+'NE','SCHED_SEND'+_0xdc7108(0x229),_0xdc7108(0x2f3)+_0xdc7108(0x3f5)+_0xdc7108(0x305)];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(0x2701+-0x1338+-0x138d)*(0x2b*-0xd3+0xf0*0x1b+0xe09*0x1),DEFAULT_TIMEZONE=_0xdc7108(0x3ce)+_0xdc7108(0x266),SEND_RETRIES=0x2623+0x1*0x1f41+-0x4561,INITIAL_BACKOFF_MS=0x2c8+-0x2*0xd15+0x1956;function ensureArray(_0x4e739d){if(!_0x4e739d)return[];if(Array['isArray'](_0x4e739d))return _0x4e739d;return[_0x4e739d];}function _0x1a63(_0x2b48cf,_0x7bccb3){const _0x1d5c23=_0xb3e3();return _0x1a63=function(_0x5bea3b,_0x37bdaf){_0x5bea3b=_0x5bea3b-(-0x1ef1+0x159a+0xaf4);let _0x436a1a=_0x1d5c23[_0x5bea3b];return _0x436a1a;},_0x1a63(_0x2b48cf,_0x7bccb3);}function uniqArray(_0x1cc0d9){const _0x73e0a3=_0xdc7108,_0x41b40d=new Set(),_0x30beb9=[];for(const _0x5d4923 of _0x1cc0d9||[]){const _0xf9e301=String(_0x5d4923||'')[_0x73e0a3(0x1f1)]();if(!_0xf9e301)continue;!_0x41b40d['has'](_0xf9e301)&&(_0x41b40d[_0x73e0a3(0x2dc)](_0xf9e301),_0x30beb9[_0x73e0a3(0x1c9)](_0xf9e301));}return _0x30beb9;}async function tableExists(_0x2df97b){const _0x2cbdfe=_0xdc7108;try{const _0x15cf4a=await db[_0x2cbdfe(0x34d)]('SELECT\x20nam'+_0x2cbdfe(0x30c)+_0x2cbdfe(0x428)+_0x2cbdfe(0x1c1)+_0x2cbdfe(0x32c)+_0x2cbdfe(0x37b),[_0x2df97b]);return!!_0x15cf4a;}catch(_0x5c007a){return warn(_0x2cbdfe(0x3e4)+'bleExists\x20'+_0x2cbdfe(0x317)+(_0x5c007a?.['message']||_0x5c007a)),![];}}async function getTableColumns(_0x410bfc){const _0x2d72ca=_0xdc7108;try{const _0x3e1c79=await db[_0x2d72ca(0x43f)](_0x2d72ca(0x29c)+_0x2d72ca(0x2a5)+_0x410bfc+')');return(_0x3e1c79||[])[_0x2d72ca(0x361)](_0x35c873=>_0x35c873[_0x2d72ca(0x1b2)]);}catch(_0x4a4422){return warn(_0x2d72ca(0x227)+_0x2d72ca(0x3c8)+'mns\x20error\x20'+'for\x20'+_0x410bfc+':\x20'+(_0x4a4422?.[_0x2d72ca(0x219)]||_0x4a4422)),[];}}function resolveChatJidFromRow(_0x52c6c2){const _0x3e4bfd=_0xdc7108,_0x5ecf85=[_0x3e4bfd(0x403),_0x3e4bfd(0x2be),_0x3e4bfd(0x271),_0x3e4bfd(0x1d8),_0x3e4bfd(0x24e),_0x3e4bfd(0x329),'target_jid'];for(const _0x206b40 of _0x5ecf85)if(_0x206b40 in _0x52c6c2&&_0x52c6c2[_0x206b40])return String(_0x52c6c2[_0x206b40]);for(const _0x4962ca of Object['keys'](_0x52c6c2)){const _0x2d6625=_0x52c6c2[_0x4962ca];if(typeof _0x2d6625==='string'&&_0x2d6625[_0x3e4bfd(0x286)]('@'))return _0x2d6625;}return null;}function resolveMessageFromRow(_0x1aae56){const _0x2948a0=_0xdc7108,_0x5e505b=['message',_0x2948a0(0x386),_0x2948a0(0x3a7),_0x2948a0(0x42e),_0x2948a0(0x2e3)];for(const _0x35346f of _0x5e505b)if(_0x35346f in _0x1aae56&&_0x1aae56[_0x35346f]!=null)return String(_0x1aae56[_0x35346f]);for(const _0x454c43 of Object[_0x2948a0(0x290)](_0x1aae56)){if(typeof _0x1aae56[_0x454c43]===_0x2948a0(0x1d5)&&_0x1aae56[_0x454c43][_0x2948a0(0x439)]>-0x9*-0x3c1+-0x1*-0x182f+-0x39f8&&!_0x1aae56[_0x454c43][_0x2948a0(0x286)]('@'))return _0x1aae56[_0x454c43];}return'';}function resolveWhenFromRow(_0x301ae5){const _0x3e5b49=_0xdc7108,_0x59df39=['send_at','sendAt',_0x3e5b49(0x25a),_0x3e5b49(0x30b),_0x3e5b49(0x3d1),'ts','time_at'];for(const _0x585bba of _0x59df39){if(_0x585bba in _0x301ae5&&_0x301ae5[_0x585bba]){const _0xdabdaa=Number(_0x301ae5[_0x585bba]);if(!Number['isNaN'](_0xdabdaa)&&_0xdabdaa>-0x1987f14d+-0x1*0x651e4a22+0xba41056f*0x1)return{'send_at':_0xdabdaa};}}const _0x4f74d6=[_0x3e5b49(0x320),_0x3e5b49(0x277),_0x3e5b49(0x2eb)+'ime',_0x3e5b49(0x22a)+'time'];for(const _0x2f4bee of _0x4f74d6){if(_0x2f4bee in _0x301ae5&&_0x301ae5[_0x2f4bee]){const _0x31f25a=String(_0x301ae5[_0x2f4bee])[_0x3e5b49(0x1f1)]();if(/^\d{1,2}:\d{2}$/[_0x3e5b49(0x3b4)](_0x31f25a))return{'time':_0x31f25a};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x50e80b=_0xdc7108;try{const _0x55ff7c=await db[_0x50e80b(0x43f)](_0x50e80b(0x37e)+_0x50e80b(0x325)+'les'),_0x291f9b=[];for(const _0x4b5039 of _0x55ff7c||[]){const _0x4c6c54=resolveChatJidFromRow(_0x4b5039)||'',_0x4ded8c=resolveMessageFromRow(_0x4b5039)||'',_0x2830eb=resolveWhenFromRow(_0x4b5039)||{};let _0x8815d2=_0x4b5039[_0x50e80b(0x2e8)]||_0x4b5039[_0x50e80b(0x39c)]||_0x4b5039['repeat']||_0x4b5039['recurrence']||_0x50e80b(0x418);if(typeof _0x8815d2===_0x50e80b(0x301))_0x8815d2='every_n_da'+_0x50e80b(0x343)+_0x8815d2;const _0xce4936=_0x4b5039[_0x50e80b(0x38d)]||_0x4b5039['tz']||null,_0x23e4a4=_0x4b5039[_0x50e80b(0x3b9)+'d']||_0x4b5039[_0x50e80b(0x19f)]||_0x4b5039['author']||_0x4b5039[_0x50e80b(0x2e7)]||'';let _0x1bcc0d=Number(_0x4b5039[_0x50e80b(0x218)]||_0x4b5039['ts']||_0x4b5039[_0x50e80b(0x3d1)]||-0x18*-0x20+0x3e4*-0x1+-0x4c*-0x3);if(!_0x1bcc0d)_0x1bcc0d=Math[_0x50e80b(0x2b7)](Date[_0x50e80b(0x24d)]()/(0x3*0x194+-0x31*0x56+0xfa2));_0x291f9b[_0x50e80b(0x1c9)]({'chat_jid':_0x4c6c54,'message':_0x4ded8c,'time':_0x2830eb[_0x50e80b(0x320)]||null,'send_at':_0x2830eb['send_at']||null,'frequency':_0x8815d2||_0x50e80b(0x418),'timezone':_0xce4936,'last_sent':Number(_0x4b5039[_0x50e80b(0x384)]||_0x4b5039[_0x50e80b(0x23d)]||0x1*0xa45+-0x26ea+0x1ca5*0x1)||0xc4d+-0x1740+-0xaf3*-0x1,'creator_jid':_0x23e4a4||'','created_at':_0x1bcc0d});}return _0x291f9b;}catch(_0x258cea){return warn('[sched]\x20re'+'adAndNorma'+_0x50e80b(0x39e)+_0x50e80b(0x1d9)+'s\x20failed:\x20'+(_0x258cea?.[_0x50e80b(0x219)]||_0x258cea)),[];}}async function ensureSchema(){const _0x353ee7=_0xdc7108,_0x89c39d={'id':_0x353ee7(0x34b)+_0x353ee7(0x2a2)+_0x353ee7(0x1b0)+'ENT','chat_jid':_0x353ee7(0x231)+_0x353ee7(0x1eb),'message':_0x353ee7(0x231)+_0x353ee7(0x1eb),'time':_0x353ee7(0x3c9),'send_at':_0x353ee7(0x3d4),'frequency':_0x353ee7(0x2d3)+_0x353ee7(0x1ad),'timezone':'TEXT','last_sent':_0x353ee7(0x3d4),'creator_jid':_0x353ee7(0x231)+_0x353ee7(0x1eb),'enabled':_0x353ee7(0x1af)+_0x353ee7(0x1a5),'created_at':'INTEGER\x20DE'+_0x353ee7(0x2f7)+_0x353ee7(0x249)+',\x27now\x27))'};try{const _0x1ca5d5=await tableExists(_0x353ee7(0x21c));if(!_0x1ca5d5){const _0x54f05e=Object[_0x353ee7(0x2a9)](_0x89c39d)['map'](([_0x2814e1,_0x6f0e49])=>_0x2814e1+'\x20'+_0x6f0e49)['join'](',\x0a\x20\x20');await db[_0x353ee7(0x1a7)](_0x353ee7(0x41e)+_0x353ee7(0x22d)+'es\x20(\x0a\x20\x20'+_0x54f05e+'\x0a);');try{await db[_0x353ee7(0x1a7)](_0x353ee7(0x21a)+_0x353ee7(0x3fe)+_0x353ee7(0x42f)+_0x353ee7(0x425)+_0x353ee7(0x28e)+_0x353ee7(0x348)+_0x353ee7(0x3dd));}catch(_0x25504e){}info(_0x353ee7(0x434)+_0x353ee7(0x35a)+_0x353ee7(0x37a)+_0x353ee7(0x2fc)+'e'),await db['exec'](_0x353ee7(0x30a)+_0x353ee7(0x40b)+_0x353ee7(0x1de)+_0x353ee7(0x1a8)+_0x353ee7(0x294)+'ings\x20(\x0a\x20\x20\x20'+_0x353ee7(0x379)+_0x353ee7(0x2d4)+_0x353ee7(0x3bf)+'EY,\x0a\x20\x20\x20\x20\x20\x20'+_0x353ee7(0x3b7)+_0x353ee7(0x430)+_0x353ee7(0x1dc)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x353ee7(0x256)+_0x353ee7(0x236)+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'\x20\x20');return;}const _0x33fc4a=await getTableColumns(_0x353ee7(0x21c)),_0xd6a03=_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x403)),_0x2a34ca=_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x219))||_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x386))||_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x42e))||_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x3a7)),_0x589abb=_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x3b9)+'d')||_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x19f))||_0x33fc4a[_0x353ee7(0x286)](_0x353ee7(0x257));if(_0xd6a03&&_0x2a34ca&&_0x589abb){try{await db[_0x353ee7(0x1a7)](_0x353ee7(0x21a)+_0x353ee7(0x3fe)+_0x353ee7(0x42f)+'_schedules'+_0x353ee7(0x28e)+_0x353ee7(0x348)+_0x353ee7(0x3dd));}catch(_0x4cce6c){}await db[_0x353ee7(0x1a7)](_0x353ee7(0x30a)+'REATE\x20TABL'+'E\x20IF\x20NOT\x20E'+'XISTS\x20sche'+_0x353ee7(0x294)+_0x353ee7(0x254)+_0x353ee7(0x379)+'t_jid\x20TEXT'+_0x353ee7(0x3bf)+_0x353ee7(0x2ca)+_0x353ee7(0x3b7)+_0x353ee7(0x430)+_0x353ee7(0x1dc)+_0x353ee7(0x1b5)+_0x353ee7(0x256)+_0x353ee7(0x236)+_0x353ee7(0x3c3)+'\x20\x20'),info(_0x353ee7(0x3d5)+_0x353ee7(0x1dd)+_0x353ee7(0x3b6)+_0x353ee7(0x2aa)+_0x353ee7(0x287));return;}info(_0x353ee7(0x1e3)+_0x353ee7(0x2fd)+_0x353ee7(0x2ef)+'ted\x20â€”\x20migr'+_0x353ee7(0x2c0)+'ly');const _0x234f7d=await readAndNormalizeExistingSchedules();await db[_0x353ee7(0x1a7)](_0x353ee7(0x2ac)+'eign_keys\x20'+_0x353ee7(0x280));try{await db['exec']('CREATE\x20TAB'+_0x353ee7(0x2cf)+_0x353ee7(0x212)+_0x353ee7(0x41a)+_0x353ee7(0x26a)+_0x353ee7(0x1a6)+_0x353ee7(0x351)+_0x353ee7(0x232)+_0x353ee7(0x367)+_0x353ee7(0x379)+'t_jid\x20TEXT'+_0x353ee7(0x1c8)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0x353ee7(0x2de)+_0x353ee7(0x2b9)+_0x353ee7(0x20e)+_0x353ee7(0x1ab)+_0x353ee7(0x402)+_0x353ee7(0x2c9)+_0x353ee7(0x3f6)+_0x353ee7(0x31b)+'ncy\x20TEXT\x20D'+_0x353ee7(0x388)+_0x353ee7(0x1e9)+_0x353ee7(0x284)+'ne\x20TEXT,\x0a\x20'+_0x353ee7(0x3be)+_0x353ee7(0x3c7)+_0x353ee7(0x3f6)+_0x353ee7(0x385)+_0x353ee7(0x30e)+_0x353ee7(0x1c8)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20e'+'nabled\x20INT'+_0x353ee7(0x42b)+'LT\x201,\x0a\x20\x20\x20\x20'+_0x353ee7(0x1f2)+_0x353ee7(0x1f4)+'ER\x20DEFAULT'+'\x20(strftime'+_0x353ee7(0x3df)+'\x27))\x0a\x20\x20\x20\x20\x20\x20'+');');}catch(_0x3be91e){await db[_0x353ee7(0x1a7)](_0x353ee7(0x41e)+_0x353ee7(0x2cf)+'EXISTS\x20sch'+_0x353ee7(0x41a)+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0x353ee7(0x1a6)+_0x353ee7(0x351)+_0x353ee7(0x232)+'CREMENT,\x0a\x20'+_0x353ee7(0x379)+_0x353ee7(0x2d4)+_0x353ee7(0x1c8)+_0x353ee7(0x3a9)+_0x353ee7(0x2de)+'T\x20NOT\x20NULL'+_0x353ee7(0x20e)+_0x353ee7(0x1ab)+_0x353ee7(0x402)+'end_at\x20INT'+_0x353ee7(0x3f6)+_0x353ee7(0x31b)+_0x353ee7(0x33a)+_0x353ee7(0x353)+_0x353ee7(0x380)+'T,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20last_sent'+_0x353ee7(0x3d3)+_0x353ee7(0x2a6)+_0x353ee7(0x1ff)+_0x353ee7(0x231)+'ULL,\x0a\x20\x20\x20\x20\x20'+_0x353ee7(0x292)+_0x353ee7(0x3d3)+'\x20\x20\x20\x20\x20\x20\x20\x20cr'+_0x353ee7(0x43c)+_0x353ee7(0x3cf)+_0x353ee7(0x35b)),warn('[sched]\x20cr'+_0x353ee7(0x241)+_0x353ee7(0x3e5)+'without\x20de'+_0x353ee7(0x307)+_0x353ee7(0x328));}const _0x55179a=await db[_0x353ee7(0x1a9)](_0x353ee7(0x1f8)+_0x353ee7(0x302)+_0x353ee7(0x255)+_0x353ee7(0x43a)+_0x353ee7(0x392)+_0x353ee7(0x29d)+_0x353ee7(0x2dd)+_0x353ee7(0x43b)+',\x20last_sen'+_0x353ee7(0x336)+_0x353ee7(0x318)+_0x353ee7(0x32d)+_0x353ee7(0x3a8)+_0x353ee7(0x1ea)+_0x353ee7(0x3a4)+_0x353ee7(0x1df)+_0x353ee7(0x391));try{for(const _0x420bc4 of _0x234f7d){try{await _0x55179a['run'](_0x420bc4[_0x353ee7(0x403)]||'',_0x420bc4[_0x353ee7(0x219)]||'',_0x420bc4['time']||null,_0x420bc4[_0x353ee7(0x1d6)]||null,_0x420bc4['frequency']||_0x353ee7(0x418),_0x420bc4[_0x353ee7(0x38d)]||null,_0x420bc4['last_sent']||0xac*-0x36+-0x1*-0x55b+0x1eed,_0x420bc4[_0x353ee7(0x3b9)+'d']||'',0x5*-0x358+0x1750+-0x697,_0x420bc4[_0x353ee7(0x218)]||Math[_0x353ee7(0x2b7)](Date[_0x353ee7(0x24d)]()/(-0x1b*-0x139+-0x15a8+-0x773)));}catch(_0x3393fc){warn('[sched]\x20ca'+_0x353ee7(0x265)+_0x353ee7(0x1c7)+_0x353ee7(0x2bc)+_0x353ee7(0x28d)+_0x420bc4[_0x353ee7(0x403)]+':\x20'+(_0x3393fc?.['message']||_0x3393fc));}}}finally{try{await _0x55179a[_0x353ee7(0x1ef)]();}catch(_0x533d8b){}}try{const _0xfbd0a1='schedules_'+_0x353ee7(0x2d0)+Math[_0x353ee7(0x2b7)](Date['now']()/(-0xfd4+-0x22*0xd5+0x3006*0x1));await db[_0x353ee7(0x1a7)]('ALTER\x20TABL'+'E\x20schedule'+_0x353ee7(0x206)+'O\x20'+_0xfbd0a1+';'),await db[_0x353ee7(0x1a7)](_0x353ee7(0x3b0)+_0x353ee7(0x27e)+_0x353ee7(0x268)+_0x353ee7(0x21b)+'dules;');try{await db['exec'](_0x353ee7(0x21a)+_0x353ee7(0x3fe)+_0x353ee7(0x42f)+_0x353ee7(0x425)+_0x353ee7(0x28e)+_0x353ee7(0x348)+_0x353ee7(0x3dd));}catch(_0x4e1800){}info(_0x353ee7(0x33e)+_0x353ee7(0x2f8)+'ne;\x20old\x20ta'+_0x353ee7(0x3e3)+_0x353ee7(0x1e7)+'p');}catch(_0x291128){warn('[sched]\x20sw'+_0x353ee7(0x370)+_0x353ee7(0x1f5)+(_0x291128?.[_0x353ee7(0x219)]||_0x291128));throw _0x291128;}finally{await db['exec']('PRAGMA\x20for'+'eign_keys\x20'+_0x353ee7(0x1b4));}await db[_0x353ee7(0x1a7)](_0x353ee7(0x3b2)+_0x353ee7(0x39a)+'IF\x20NOT\x20EXI'+'STS\x20schedu'+_0x353ee7(0x424)+_0x353ee7(0x209)+'\x20\x20\x20chat_ji'+_0x353ee7(0x309)+'MARY\x20KEY,\x0a'+_0x353ee7(0x397)+_0x353ee7(0x2f9)+_0x353ee7(0x431)+'T\x201,\x0a\x20\x20\x20\x20\x20'+_0x353ee7(0x2e6)+_0x353ee7(0x29f)+_0x353ee7(0x3c3));}catch(_0x5d392f){error(_0x5d392f,_0x353ee7(0x28f)+_0x353ee7(0x36b)+'\x20fatal');throw _0x5d392f;}}function refreshConfig(){const _0x2eea7f=_0xdc7108;try{const _0x15e70c=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x15e70c['SCHED_CHEC'+_0x2eea7f(0x34e)+_0x2eea7f(0x3ea)]??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x15e70c[_0x2eea7f(0x41f)+_0x2eea7f(0x3f8)+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x15e70c[_0x2eea7f(0x24b)+_0x2eea7f(0x229)]??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x15e70c[_0x2eea7f(0x2f3)+_0x2eea7f(0x3f5)+_0x2eea7f(0x305)]??INITIAL_BACKOFF_MS),info('[sched]\x20co'+_0x2eea7f(0x420)+_0x2eea7f(0x362)+_0x2eea7f(0x2af)+CHECK_INTERVAL_MS+(_0x2eea7f(0x433)+_0x2eea7f(0x3c1))+DEFAULT_TIMEZONE);}catch(_0x8b143c){warn('[sched]\x20re'+_0x2eea7f(0x1b1)+_0x2eea7f(0x267)+(_0x8b143c?.[_0x2eea7f(0x219)]||_0x8b143c));}}try{typeof hotReloadConfig==='function'&&hotReloadConfig((_0x32d307=[])=>{const _0x433bc9=_0xdc7108;try{refreshConfig();}catch(_0x251215){warn(_0x433bc9(0x288)+_0x433bc9(0x275)+_0x433bc9(0x3c0)+'r:\x20'+(_0x251215?.[_0x433bc9(0x219)]||_0x251215));}});}catch(_0xd5ed26){warn(_0xdc7108(0x288)+_0xdc7108(0x374)+_0xdc7108(0x3d0)+_0xdc7108(0x25f)+_0xdc7108(0x38c)+(_0xd5ed26?.[_0xdc7108(0x219)]||_0xd5ed26));}refreshConfig();function tryBuildSendApiFromBot(_0x23213a){const _0x5ed13c=_0xdc7108;if(!_0x23213a)return null;if(typeof _0x23213a[_0x5ed13c(0x1c0)+'e']===_0x5ed13c(0x25b))return async(_0x1c69f6,_0xa1652e)=>_0x23213a[_0x5ed13c(0x1c0)+'e'](_0x1c69f6,_0xa1652e);else{if(_0x23213a[_0x5ed13c(0x207)]&&typeof _0x23213a[_0x5ed13c(0x207)]['sendMessag'+'e']===_0x5ed13c(0x25b))return async(_0x1882db,_0x3d77c4)=>_0x23213a['sock']['sendMessag'+'e'](_0x1882db,_0x3d77c4);}return null;}function setupSendApi(_0x2d9580){const _0xa7cbc9=_0xdc7108;botRef=_0x2d9580,sendApi=tryBuildSendApiFromBot(botRef),info(_0xa7cbc9(0x31a)+_0xa7cbc9(0x1a1)+_0xa7cbc9(0x282)+_0xa7cbc9(0x415)+(sendApi?_0xa7cbc9(0x3a5):_0xa7cbc9(0x1e2)+'ble'));}async function sendWithRetry(_0x69880a,_0x184617){const _0x50849b=_0xdc7108,_0x1462df=Number(SEND_RETRIES||-0x1caf+-0x25e3+0x4295);let _0x54d7ab=-0x3b4*-0x5+-0x16fc+0x16*0x34,_0x132ed3=Number(INITIAL_BACKOFF_MS||0x8c*-0xd+-0x1507+0x1e17);while(_0x54d7ab<_0x1462df){try{const _0x58fdd9=_0x69880a||null;if(!_0x58fdd9)throw new Error(_0x50849b(0x300)+_0x50849b(0x2e5)+'able\x20(expl'+'icit\x20targe'+'t\x20required'+')');if(typeof sendApi===_0x50849b(0x25b))return await sendApi(_0x58fdd9,_0x184617),!![];if(botRef&&typeof botRef[_0x50849b(0x1c0)+'e']===_0x50849b(0x25b))return await botRef[_0x50849b(0x1c0)+'e'](_0x58fdd9,_0x184617),!![];if(botRef&&botRef['sock']&&typeof botRef[_0x50849b(0x207)][_0x50849b(0x1c0)+'e']===_0x50849b(0x25b))return await botRef[_0x50849b(0x207)][_0x50849b(0x1c0)+'e'](_0x58fdd9,_0x184617),!![];throw new Error(_0x50849b(0x251)+_0x50849b(0x42a));}catch(_0x39d0db){_0x54d7ab++;const _0x383235=String(_0x39d0db?.[_0x50849b(0x219)]||'')[_0x50849b(0x244)+'e']()[_0x50849b(0x286)](_0x50849b(0x2ff))||_0x39d0db?.['status']===0x1228+-0xe21*0x1+-0x25a;warn(_0x50849b(0x31a)+_0x50849b(0x208)+'\x20'+_0x54d7ab+'\x20failed:\x20'+(_0x39d0db?.[_0x50849b(0x219)]||_0x39d0db));if(_0x54d7ab>=_0x1462df||!_0x383235)return![];await new Promise(_0x19e3e3=>setTimeout(_0x19e3e3,_0x132ed3)),_0x132ed3*=0xf0f+-0x347*-0x5+-0x8*0x3ee;try{setupSendApi(botRef);}catch(_0xdd03){}}}return![];}function parseTimeToken(_0x3ed3d1,_0x41488b=DEFAULT_TIMEZONE){const _0x4cdbe8=_0xdc7108;if(!_0x3ed3d1||typeof _0x3ed3d1!==_0x4cdbe8(0x1d5))return null;const _0x3e8607=_0x3ed3d1['trim'](),_0x41405a=_0x3e8607[_0x4cdbe8(0x2a4)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x41405a){const _0x35eaae=Number(_0x41405a[-0x2*0x512+0x487+0x59e]),_0x3f4005=_0x41405a[-0x347*0x1+-0x381*-0x2+-0x1*0x3b9]['toLowerCas'+'e']();let _0x23324a=DateTime[_0x4cdbe8(0x24d)]()[_0x4cdbe8(0x331)](_0x41488b);if(_0x3f4005[_0x4cdbe8(0x246)](_0x4cdbe8(0x2ae))||_0x3f4005==='m')_0x23324a=_0x23324a[_0x4cdbe8(0x1ec)]({'minutes':_0x35eaae});else{if(_0x3f4005[_0x4cdbe8(0x246)]('h')||_0x3f4005['startsWith']('hr'))_0x23324a=_0x23324a[_0x4cdbe8(0x1ec)]({'hours':_0x35eaae});else{if(_0x3f4005['startsWith']('d'))_0x23324a=_0x23324a[_0x4cdbe8(0x1ec)]({'days':_0x35eaae});}}if(_0x23324a['isValid'])return{'type':_0x4cdbe8(0x39b),'dt':_0x23324a};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/[_0x4cdbe8(0x3b4)](_0x3e8607)){const _0x4cb36f=_0x3e8607[_0x4cdbe8(0x2d1)]('\x20','T'),_0x4aeca2=DateTime[_0x4cdbe8(0x2f4)](_0x4cb36f,{'zone':_0x41488b});if(_0x4aeca2[_0x4cdbe8(0x202)])return{'type':_0x4cdbe8(0x39b),'dt':_0x4aeca2};}if(/^\d{1,2}:\d{2}$/['test'](_0x3e8607)){const [_0x375858,_0x23f313]=_0x3e8607[_0x4cdbe8(0x289)](':')[_0x4cdbe8(0x361)](Number);if(Number[_0x4cdbe8(0x2fb)](_0x375858)&&Number['isInteger'](_0x23f313)&&_0x375858>=-0x1*0x1fb2+0x1*0x1df5+0x1bd&&_0x375858<=0x1*0xfd1+0x28e+-0x1248&&_0x23f313>=-0x10a3*-0x1+0x2259+-0x1f6*0x1a&&_0x23f313<=0x4a*0x72+-0x697+-0xdf*0x1e)return{'type':'hhmm','hhmm':String(_0x375858)['padStart'](-0x17*-0x174+0x101d+-0x199*0x1f,'0')+':'+String(_0x23f313)[_0x4cdbe8(0x27a)](-0x11c6+-0x207c+-0xc91*-0x4,'0')};}return null;}function shouldSendSlot(_0x3e306f,_0x45a5f9){const _0x8ebe2b=_0xdc7108,_0x469fc0=_0x3e306f[_0x8ebe2b(0x2e8)]||'daily',_0x3f58de=_0x3e306f[_0x8ebe2b(0x384)]||0x4c5*-0x1+-0x1084+0x1549,_0x3f4432=_0x3f58de?DateTime['fromMillis'](_0x3f58de*(-0x15c8+-0x4c8+-0x514*-0x6))[_0x8ebe2b(0x331)](_0x45a5f9[_0x8ebe2b(0x422)]):null;if(!_0x3f4432)return!![];if(_0x469fc0==='daily')return!_0x3f4432[_0x8ebe2b(0x423)](_0x45a5f9,_0x8ebe2b(0x3ef));if(_0x469fc0==='weekly')return _0x45a5f9[_0x8ebe2b(0x270)](_0x3f4432,_0x8ebe2b(0x1b3))[_0x8ebe2b(0x1b3)]>=-0x1*-0x13ad+-0x135a*-0x2+-0x3a5a;if(_0x469fc0['startsWith'](_0x8ebe2b(0x1f7)+'ys:')){const _0x39b1d1=parseInt(_0x469fc0['split'](':')[0x1f98+-0xf79*-0x2+-0x8ef*0x7],0x11*0x1b9+0x7e5+0x4*-0x949);if(isNaN(_0x39b1d1)||_0x39b1d1<-0x36d+-0x1b4f+-0x1ebd*-0x1)return![];return _0x45a5f9[_0x8ebe2b(0x270)](_0x3f4432,_0x8ebe2b(0x1b3))[_0x8ebe2b(0x1b3)]>=_0x39b1d1;}if(_0x469fc0[_0x8ebe2b(0x246)](_0x8ebe2b(0x2db)+_0x8ebe2b(0x321))){const _0x303605=_0x469fc0[_0x8ebe2b(0x289)](':')[-0x1*0x474+-0x13c6+-0x183b*-0x1][_0x8ebe2b(0x289)](',')[_0x8ebe2b(0x361)](_0x6e7d23=>parseInt(_0x6e7d23,-0x192*-0x6+0x745+-0x10a7))[_0x8ebe2b(0x3ae)](Boolean);return _0x303605[_0x8ebe2b(0x286)](_0x45a5f9[_0x8ebe2b(0x3db)])&&!_0x3f4432['hasSame'](_0x45a5f9,_0x8ebe2b(0x3ef));}if(_0x469fc0[_0x8ebe2b(0x246)]('day_of_mon'+_0x8ebe2b(0x28b))){const _0x391b41=parseInt(_0x469fc0[_0x8ebe2b(0x289)](':')[0x97b+0x11b6+-0x50*0x57],-0x1*-0x2663+-0xdfc+-0x185d);return _0x45a5f9[_0x8ebe2b(0x3ef)]===_0x391b41&&!_0x3f4432[_0x8ebe2b(0x423)](_0x45a5f9,_0x8ebe2b(0x3ef));}return![];}async function addScheduleRow(_0x48c1a4){const _0x41ca6a=_0xdc7108;try{const _0x3cf41e=await db[_0x41ca6a(0x326)]('INSERT\x20INT'+'O\x20schedule'+_0x41ca6a(0x2a7)+_0x41ca6a(0x3e1)+_0x41ca6a(0x2b1)+'nd_at,\x20fre'+'quency,\x20ti'+_0x41ca6a(0x3e8)+'eator_jid)'+_0x41ca6a(0x2bd)+_0x41ca6a(0x291)+_0x41ca6a(0x2bf)+_0x41ca6a(0x1ce),[_0x48c1a4['chat_jid'],_0x48c1a4[_0x41ca6a(0x219)],_0x48c1a4[_0x41ca6a(0x320)],_0x48c1a4[_0x41ca6a(0x1d6)],_0x48c1a4[_0x41ca6a(0x2e8)]||_0x41ca6a(0x418),_0x48c1a4[_0x41ca6a(0x38d)]||null,_0x48c1a4[_0x41ca6a(0x3b9)+'d']]),_0x4353c4=_0x3cf41e?.[_0x41ca6a(0x276)]||null;return info(_0x41ca6a(0x410)+'ded\x20schedu'+_0x41ca6a(0x263)+_0x4353c4+_0x41ca6a(0x1d1)+_0x48c1a4[_0x41ca6a(0x403)]+'\x20time='+(_0x48c1a4[_0x41ca6a(0x320)]||_0x48c1a4[_0x41ca6a(0x1d6)])),_0x4353c4;}catch(_0x57be6f){return warn('[sched]\x20ad'+'dScheduleR'+_0x41ca6a(0x337)+(_0x57be6f?.[_0x41ca6a(0x219)]||_0x57be6f)),null;}}async function listSchedulesForChat(_0x5b708c){const _0x53606e=_0xdc7108;try{const _0x5f24dc=await db[_0x53606e(0x43f)](_0x53606e(0x37e)+'ROM\x20schedu'+_0x53606e(0x345)+_0x53606e(0x3fa)+'\x20?\x20ORDER\x20B'+'Y\x20id\x20ASC',[_0x5b708c]);return _0x5f24dc||[];}catch(_0x20b5c8){return warn(_0x53606e(0x3fd)+_0x53606e(0x3ba)+'sForChat\x20e'+_0x53606e(0x341)+(_0x20b5c8?.[_0x53606e(0x219)]||_0x20b5c8)),[];}}async function removeScheduleByDBId(_0x2bc1c0){const _0xfee247=_0xdc7108;try{const _0x1f4bb8=await db[_0xfee247(0x326)](_0xfee247(0x313)+'M\x20schedule'+_0xfee247(0x333)+_0xfee247(0x30f),[_0x2bc1c0]);return _0x1f4bb8?.[_0xfee247(0x253)]?!![]:![];}catch(_0x526c58){return warn('[sched]\x20re'+_0xfee247(0x409)+_0xfee247(0x419)+_0xfee247(0x341)+(_0x526c58?.['message']||_0x526c58)),![];}}async function removeAllSchedulesForChat(_0x125cf0){const _0x2c9528=_0xdc7108;try{const _0x436c00=await db[_0x2c9528(0x326)](_0x2c9528(0x313)+_0x2c9528(0x2c2)+_0x2c9528(0x39d)+_0x2c9528(0x26d),[_0x125cf0]);return _0x436c00?.[_0x2c9528(0x253)]||-0xd42+0x1dad*0x1+-0x106b;}catch(_0xbb2fff){return warn(_0x2c9528(0x1f3)+'moveAllSch'+_0x2c9528(0x25e)+_0x2c9528(0x3e2)+'\x20'+(_0xbb2fff?.[_0x2c9528(0x219)]||_0xbb2fff)),-0x49*-0x2e+-0x1295*-0x1+0xf*-0x21d;}}async function updateScheduleFields(_0x210127,_0x437b3f={}){const _0x284128=_0xdc7108;try{const _0x1cec13=[],_0x339a55=[];for(const _0x10d52b of Object[_0x284128(0x290)](_0x437b3f)){_0x1cec13[_0x284128(0x1c9)](_0x10d52b+'\x20=\x20?'),_0x339a55[_0x284128(0x1c9)](_0x437b3f[_0x10d52b]);}if(!_0x1cec13['length'])return![];_0x339a55[_0x284128(0x1c9)](_0x210127);const _0x45f665='UPDATE\x20sch'+_0x284128(0x1c5)+'\x20'+_0x1cec13['join'](',\x20')+('\x20WHERE\x20id\x20'+_0x284128(0x2d5)),_0x1c43ed=await db[_0x284128(0x326)](_0x45f665,_0x339a55);return _0x1c43ed?.[_0x284128(0x253)]?!![]:![];}catch(_0x3cd1f8){return warn(_0x284128(0x350)+_0x284128(0x295)+'leFields\x20e'+_0x284128(0x341)+(_0x3cd1f8?.[_0x284128(0x219)]||_0x3cd1f8)),![];}}async function getChatTimezone(_0x399b9b){const _0x36eacf=_0xdc7108;try{const _0x45d0c5=await db['get'](_0x36eacf(0x248)+_0x36eacf(0x436)+'\x20scheduler'+_0x36eacf(0x3fb)+_0x36eacf(0x2cd)+'_jid\x20=\x20?',[_0x399b9b]);return _0x45d0c5?.[_0x36eacf(0x38d)]||null;}catch(_0x205484){return warn(_0x36eacf(0x227)+_0x36eacf(0x2c8)+_0x36eacf(0x41b)+'\x20'+(_0x205484?.[_0x36eacf(0x219)]||_0x205484)),null;}}async function setChatTimezone(_0x4292fe,_0x10b387){const _0xdbd6d=_0xdc7108;try{return await db['run'](_0xdbd6d(0x1f8)+_0xdbd6d(0x302)+'r_settings'+_0xdbd6d(0x235)+',\x20timezone'+_0xdbd6d(0x296)+_0xdbd6d(0x279)+_0xdbd6d(0x2d7)+_0xdbd6d(0x3ca)+'\x20UPDATE\x20SE'+'T\x20timezone'+_0xdbd6d(0x304)+_0xdbd6d(0x38d),[_0x4292fe,_0x10b387]),!![];}catch(_0x41ea2f){return warn(_0xdbd6d(0x31a)+_0xdbd6d(0x2c8)+_0xdbd6d(0x41b)+'\x20'+(_0x41ea2f?.[_0xdbd6d(0x219)]||_0x41ea2f)),![];}}async function executorTick(){const _0x1694b2=_0xdc7108;if(executorRunning)return;executorRunning=!![];try{const _0x31b812=await db[_0x1694b2(0x43f)](_0x1694b2(0x37e)+'ROM\x20schedu'+_0x1694b2(0x345)+_0x1694b2(0x356)+_0x1694b2(0x31e)+'\x20id\x20ASC');if(!_0x31b812||_0x31b812[_0x1694b2(0x439)]===-0x377+0xe*0x127+-0xcab)return;for(const _0x32ba38 of _0x31b812){try{const _0x2b44fc=_0x32ba38['timezone']||await getChatTimezone(_0x32ba38['chat_jid'])||DEFAULT_TIMEZONE,_0x3e96a9=DateTime['now']()[_0x1694b2(0x331)](_0x2b44fc);if(_0x32ba38['send_at']&&Number(_0x32ba38[_0x1694b2(0x1d6)])>0xebf+0x15f7*0x1+-0x7f*0x4a){const _0x421d3b=Number(_0x32ba38['send_at']),_0xb62101=Math[_0x1694b2(0x2b7)](Date['now']()/(0x47*-0x36+0x1*-0x1a86+0x2d68));if(_0x421d3b<=_0xb62101){const _0x4afe9a=await sendWithRetry(_0x32ba38[_0x1694b2(0x403)],{'text':_0x32ba38['message']});if(_0x4afe9a)try{const _0x38b110=await removeScheduleByDBId(_0x32ba38['id']);_0x38b110?info(_0x1694b2(0x310)+'livered\x20an'+_0x1694b2(0x1f6)+_0x1694b2(0x29b)+'='+_0x32ba38['id']+_0x1694b2(0x247)+_0x32ba38['chat_jid']):(await updateScheduleFields(_0x32ba38['id'],{'enabled':0x0,'last_sent':_0xb62101}),warn(_0x1694b2(0x310)+'livered\x20on'+_0x1694b2(0x1fa)+_0x32ba38['id']+'\x20to\x20'+_0x32ba38[_0x1694b2(0x403)]+(_0x1694b2(0x3ac)+_0x1694b2(0x340)+_0x1694b2(0x37f)+_0x1694b2(0x372)+_0x1694b2(0x1d7))));}catch(_0x52a3fe){warn(_0x1694b2(0x2ed)+'e-off\x20post'+_0x1694b2(0x2c3)+_0x1694b2(0x3a1)+'\x20'+(_0x52a3fe?.['message']||_0x52a3fe));try{await updateScheduleFields(_0x32ba38['id'],{'enabled':0x0,'last_sent':_0xb62101});}catch(_0x271f36){}}else warn(_0x1694b2(0x41c)+_0x1694b2(0x3de)+_0x1694b2(0x1d0)+_0x1694b2(0x24c)+_0x32ba38['id']+'\x20to\x20'+_0x32ba38[_0x1694b2(0x403)]);}continue;}if(!_0x32ba38[_0x1694b2(0x320)])continue;const _0x3dba18=_0x3e96a9[_0x1694b2(0x233)](_0x1694b2(0x2c7));if(_0x3dba18!==_0x32ba38[_0x1694b2(0x320)])continue;const _0x509cc1={'id':_0x32ba38['id'],'frequency':_0x32ba38[_0x1694b2(0x2e8)]||_0x1694b2(0x418),'last_sent':_0x32ba38[_0x1694b2(0x384)]||0x1e7*-0x1+0x25*0x5c+-0xb65};if(!shouldSendSlot(_0x509cc1,_0x3e96a9))continue;const _0x1abc1d=await sendWithRetry(_0x32ba38[_0x1694b2(0x403)],{'text':_0x32ba38[_0x1694b2(0x219)]});_0x1abc1d?(await updateScheduleFields(_0x32ba38['id'],{'last_sent':Math[_0x1694b2(0x2b7)](Date[_0x1694b2(0x24d)]()/(0xe2*0xe+-0x118+-0x13a*0x6))}),info(_0x1694b2(0x310)+_0x1694b2(0x3e6)+_0x1694b2(0x220)+'='+_0x32ba38['id']+_0x1694b2(0x247)+_0x32ba38[_0x1694b2(0x403)]+_0x1694b2(0x1b7)+_0x32ba38[_0x1694b2(0x320)]+'\x20('+_0x2b44fc+')')):warn(_0x1694b2(0x41c)+_0x1694b2(0x3de)+_0x1694b2(0x33c)+_0x1694b2(0x35f)+_0x32ba38['id']+'\x20to\x20'+_0x32ba38[_0x1694b2(0x403)]+'\x20at\x20'+_0x32ba38[_0x1694b2(0x320)]);}catch(_0x5aa0e1){warn(_0x1694b2(0x3b8)+'ecutor\x20ite'+_0x1694b2(0x2a3)+(_0x5aa0e1?.['message']||_0x5aa0e1));}}}catch(_0x7cce2f){error(_0x1694b2(0x3b8)+_0x1694b2(0x1a4)+_0x1694b2(0x440)+(_0x7cce2f?.[_0x1694b2(0x219)]||_0x7cce2f));}finally{executorRunning=![];}}function startSchedulerAligned(){stopScheduler();const _0x385e14=-0xe3*0xa3+-0x9058+0x20b41-Date['now']()%(-0x1*0x1817f+0x15fc0+0x1*0x10c1f);setTimeout(()=>{const _0x3e0421=_0x1a63;executorTick()[_0x3e0421(0x1db)](_0x2ada0f=>warn(_0x3e0421(0x1b6)+_0x3e0421(0x3f2)+'utor\x20error'+':\x20'+(_0x2ada0f?.['message']||_0x2ada0f))),schedulerIntervalHandle=setInterval(()=>{const _0x3c211e=_0x3e0421;executorTick()[_0x3c211e(0x1db)](_0x12bdd5=>warn(_0x3c211e(0x3b8)+'ecutorTick'+'\x20error:\x20'+(_0x12bdd5?.['message']||_0x12bdd5)));},CHECK_INTERVAL_MS),info('[sched]\x20sc'+_0x3e0421(0x1bb)+_0x3e0421(0x2d6)+'gned\x20to\x20mi'+_0x3e0421(0x250));},_0x385e14);}function stopScheduler(){const _0x214350=_0xdc7108;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x214350(0x3d5)+'heduler\x20st'+_0x214350(0x1ba)));}function extractTextFromMessage(_0x47f027){const _0x49256d=_0xdc7108;if(!_0x47f027||!_0x47f027[_0x49256d(0x219)])return'';const _0x271c32=_0x47f027[_0x49256d(0x219)];if(_0x271c32['conversati'+'on'])return _0x271c32['conversati'+'on'];if(_0x271c32[_0x49256d(0x3c6)+'xtMessage']?.[_0x49256d(0x3a7)])return _0x271c32[_0x49256d(0x3c6)+_0x49256d(0x2ce)][_0x49256d(0x3a7)];if(_0x271c32[_0x49256d(0x2da)+'ge']?.[_0x49256d(0x31d)])return _0x271c32[_0x49256d(0x2da)+'ge'][_0x49256d(0x31d)];if(_0x271c32[_0x49256d(0x243)+'ge']?.[_0x49256d(0x31d)])return _0x271c32[_0x49256d(0x243)+'ge'][_0x49256d(0x31d)];if(_0x271c32[_0x49256d(0x3da)+'ponseMessa'+'ge']?.[_0x49256d(0x1e4)+_0x49256d(0x2ab)])return _0x271c32[_0x49256d(0x3da)+_0x49256d(0x3ed)+'ge'][_0x49256d(0x1e4)+_0x49256d(0x2ab)];if(_0x271c32[_0x49256d(0x22e)+_0x49256d(0x299)]?.[_0x49256d(0x3f4)+_0x49256d(0x41d)]?.[_0x49256d(0x357)+_0x49256d(0x1bf)])return _0x271c32[_0x49256d(0x22e)+_0x49256d(0x299)][_0x49256d(0x3f4)+'ctReply'][_0x49256d(0x357)+_0x49256d(0x1bf)];return'';}function splitFirstLinePreserveRest(_0x39b4d0){const _0xb82c6b=_0xdc7108,_0x51b62d=_0x39b4d0['split'](/\r?\n/),_0x4424e4=_0x51b62d[_0xb82c6b(0x439)]>-0x1*0x2077+0x7*-0x55+0x22ca?_0x51b62d[_0xb82c6b(0x25d)]():'',_0x5cd693=_0x51b62d[_0xb82c6b(0x239)]('\x0a'),_0x43a8e2=_0x4424e4[_0xb82c6b(0x1f1)]()[_0xb82c6b(0x289)](/\s+/)[_0xb82c6b(0x3ae)](Boolean);return{'firstLine':_0x4424e4,'restText':_0x5cd693,'firstTokens':_0x43a8e2};}function findGpAndCleanBodyFromRestAndFirst(_0x5cbd84,_0x459b3a){const _0x431774=_0xdc7108,_0x40f282=(_0x459b3a&&_0x459b3a[_0x431774(0x439)]?_0x459b3a:'')+'\x0a'+(_0x5cbd84||''),_0x2e4bbb=_0x40f282['match'](/\bgp[:\s]+(\S+)/i),_0x2cab1a=_0x2e4bbb?_0x2e4bbb[0xb4b+0x26f9+0x1*-0x3243][_0x431774(0x1f1)]():null;let _0x1fa3b9=(_0x459b3a||'')[_0x431774(0x289)](/\r?\n/);if(!_0x1fa3b9||_0x1fa3b9[_0x431774(0x439)]===-0xca2+-0x198d+-0x5*-0x7a3||_0x1fa3b9[_0x431774(0x1ca)](_0xd4c0dc=>!_0xd4c0dc[_0x431774(0x1f1)]()))return{'gpValue':_0x2cab1a,'cleanedBody':''};const _0x1f7f39=_0x1fa3b9[_0x431774(0x361)](_0x38311f=>_0x38311f['replace'](/^\s*gp[:\s]+\S+\s*$/i,'')['replace'](/\s*\bgp[:\s]+\S+\s*$/i,'')['trimEnd']())[_0x431774(0x3ae)](_0x527a19=>_0x527a19['length']>0xdd8+0x12d6+-0x20ae),_0x324e66=_0x1f7f39[_0x431774(0x239)]('\x0a')[_0x431774(0x1f1)]();return{'gpValue':_0x2cab1a,'cleanedBody':_0x324e66};}function extractInlineAfterToken(_0x1c90dc,_0xee4b5c){const _0x199ce3=_0xdc7108;if(!_0x1c90dc||!_0xee4b5c)return'';try{const _0xdd09a5=new RegExp('\x5cb'+_0xee4b5c[_0x199ce3(0x2d1)](/[.*+?^${}()|[\\]\\\\]/g,_0x199ce3(0x40d))+'\x5cb'),_0x1652c0=_0x1c90dc[_0x199ce3(0x2a4)](_0xdd09a5);if(!_0x1652c0)return'';const _0x10906a=_0x1c90dc[_0x199ce3(0x414)](_0x1652c0[0x1*-0x160d+-0x1884+0x83*0x5b]),_0x1cebf7=_0x10906a+_0x1652c0[0xb79+0xcca+-0x1*0x1843][_0x199ce3(0x439)];let _0x32a196=_0x1c90dc[_0x199ce3(0x3ad)](_0x1cebf7)[_0x199ce3(0x2d1)](/^\s+/,'');return _0x32a196=_0x32a196[_0x199ce3(0x2d1)](/\s*\bgp[:\s]+\S+\s*$/i,'')['trim'](),_0x32a196;}catch(_0x1da53f){return'';}}const USAGE=_0xdc7108(0x1f0)+_0xdc7108(0x35d)+_0xdc7108(0x358)+_0xdc7108(0x411)+_0xdc7108(0x3a2)+_0xdc7108(0x20c)+_0xdc7108(0x260)+_0xdc7108(0x375)+_0xdc7108(0x389)+'>`\x20`<messa'+_0xdc7108(0x2cb)+_0xdc7108(0x366)+_0xdc7108(0x23b)+_0xdc7108(0x26e)+_0xdc7108(0x3ec)+'t\x20lines\x20â€”\x20'+_0xdc7108(0x223)+_0xdc7108(0x258)+_0xdc7108(0x19e)+_0xdc7108(0x359)+_0xdc7108(0x3bd)+'mm>`\x20`[Nda'+_0xdc7108(0x335)+_0xdc7108(0x396)+_0xdc7108(0x3f9)+_0xdc7108(0x2b6)+_0xdc7108(0x28a)+'\x20is\x20provid'+_0xdc7108(0x1cc)+_0xdc7108(0x37d)+_0xdc7108(0x2b4)+_0xdc7108(0x346)+_0xdc7108(0x322)+_0xdc7108(0x3c4)+_0xdc7108(0x3d9)+'all\x20schedu'+'led\x20messag'+_0xdc7108(0x1fd)+_0xdc7108(0x33d)+'*\x20`<number'+'\x20|\x20number,'+_0xdc7108(0x342)+'\x20|\x20all>`\x0aâ€£'+_0xdc7108(0x1a0)+_0xdc7108(0x37c)+'ple\x20schedu'+_0xdc7108(0x26b)+_0xdc7108(0x273)+'ed\x20edit*\x20`'+_0xdc7108(0x201)+_0xdc7108(0x1ae)+'in\x20N\x20hours'+_0xdc7108(0x2f0)+_0xdc7108(0x2d8)+_0xdc7108(0x33f)+_0xdc7108(0x2e4)+'of\x20a\x20sched'+_0xdc7108(0x217)+_0xdc7108(0x2ea)+'hed\x20freque'+_0xdc7108(0x3e0)+_0xdc7108(0x2d2)+_0xdc7108(0x35c)+_0xdc7108(0x3cc)+'val:\x20`n=1`'+_0xdc7108(0x259)+_0xdc7108(0x1bd)+_0xdc7108(0x332)+_0xdc7108(0x2fe)+_0xdc7108(0x23e)+_0xdc7108(0x3a6)+_0xdc7108(0x421)+_0xdc7108(0x316)+_0xdc7108(0x21d)+_0xdc7108(0x2e1)+_0xdc7108(0x237)+_0xdc7108(0x3dc)+'le*\x20`<numb'+'er>`\x0aâ€£\x20Re-'+_0xdc7108(0x393)+'reviously\x20'+_0xdc7108(0x2f6)+_0xdc7108(0x311),processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x173+-0xdce+0xf55)*(0x1*0x1557+0x25ae+0x371d*-0x1);function markCmdProcessed(_0x8990fa){const _0x1935ed=_0xdc7108;if(!_0x8990fa)return;if(processedCmdKeys[_0x1935ed(0x24f)](_0x8990fa))try{clearTimeout(processedCmdKeys[_0x1935ed(0x34d)](_0x8990fa));}catch(_0x554ced){}const _0x5d983f=setTimeout(()=>processedCmdKeys[_0x1935ed(0x2ee)](_0x8990fa),CMD_DEDUPE_TTL_MS);processedCmdKeys[_0x1935ed(0x369)](_0x8990fa,_0x5d983f);}function isCmdProcessed(_0x441dec){const _0x377137=_0xdc7108;return _0x441dec&&processedCmdKeys[_0x377137(0x24f)](_0x441dec);}async function resolveDefaultChatJidsForUser(_0xbfc231){const _0x48a0d9=_0xdc7108;try{const _0x57762e=await getDefault(_0xbfc231)[_0x48a0d9(0x1db)](()=>null);if(!_0x57762e||Array[_0x48a0d9(0x314)](_0x57762e)&&_0x57762e[_0x48a0d9(0x439)]===0xc5*0x1+0x1bf1+-0xe*0x20d)return[];const _0x479d8b=Array['isArray'](_0x57762e)?_0x57762e:[_0x57762e],_0x430161=[];for(const _0x434c11 of _0x479d8b){try{const _0x3e7c64=await getConnection(_0x434c11)[_0x48a0d9(0x1db)](()=>null);if(Array[_0x48a0d9(0x314)](_0x3e7c64))_0x430161[_0x48a0d9(0x1c9)](..._0x3e7c64);else{if(_0x3e7c64)_0x430161[_0x48a0d9(0x1c9)](String(_0x3e7c64));}}catch(_0x231ce4){warn(_0x48a0d9(0x1f3)+_0x48a0d9(0x43d)+_0x48a0d9(0x285)+_0x434c11+_0x48a0d9(0x1be)+(_0x231ce4?.[_0x48a0d9(0x219)]||_0x231ce4));}}return uniqArray(_0x430161);}catch(_0x122abc){return warn(_0x48a0d9(0x1f3)+_0x48a0d9(0x21e)+_0x48a0d9(0x3c2)+'ForUser\x20er'+_0x48a0d9(0x2df)+(_0x122abc?.[_0x48a0d9(0x219)]||_0x122abc)),[];}}function _0xb3e3(){const _0x5e6572=['e\x20from\x20DB;','mezone\x20TEX','requested\x20','\x20<number>','\x0amsg:\x0a','last_sent','\x20\x20\x20\x20creato','msg','ed\x20delete\x20','EFAULT\x20\x27da','ys/minutes','owing\x20line','sched','led:\x20','timezone','ge...>','Please\x20pro','129CKJwyg',',\x20?)','sage,\x20time','enable\x20a\x20p','tchFromFin','DATETIME_M','sage...>`\x0a','\x20\x20\x20\x20\x20\x20\x20\x20en','Failed\x20to\x20',':00\x20Hello\x20','ATE\x20TABLE\x20','datetime','freq','s\x20WHERE\x20ch','lizeExisti',':\x20bot\x20JID\x20','iled:\x20','nup\x20error:','HH:mm\x20|\x20YY','s/days/min','\x20?,\x20?,\x20?,\x20','available','*\x20`<number','text','ed_at)\x20VAL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20m','\x20<number>\x20','not\x20availa','\x20but\x20faile','slice','filter','defaults:\x20','ALTER\x20TABL','Unsupporte','\x0a\x20\x20\x20\x20\x20\x20CRE','at\x20','test','targets.','ble\x20appear','\x20\x20\x20\x20enable','[sched]\x20ex','creator_ji','stSchedule','\x20->\x20id:','r\x20defaults','nce*\x20`<HH:','\x20\x20\x20\x20\x20\x20\x20las','\x20PRIMARY\x20K','ndler\x20erro','TZ=','ltChatJids','\x20\x20\x20);\x0a\x20\x20\x20\x20','*sched\x20lis','H:mm>\x20[Nda','extendedTe','t_sent\x20INT','tTableColu','TEXT','at_jid)\x20DO','\x20freq:','peat\x20inter','ours|YYYY-','Africa/Nai','NTEGER\x0a\x20\x20\x20','fig\x20regist','timestamp','ction.upda','\x20INTEGER,\x0a','INTEGER','[sched]\x20sc','g\x20at\x20','mber,numbe',':<alias|ji','t*\x0aâ€£\x20View\x20','buttonsRes','weekday','sched\x20enab','hat_jid);','iled\x20to\x20de','(\x27%s\x27,\x27now','ncy*\x20`<num','d,\x20message','hat\x20error:','ble\x20rename','[sched]\x20ta','dules_new\x20','livered\x20re','resolve\x20yo','mezone,\x20cr','\x20found\x20acr','_MS','eanup\x20erro','\x20or\x20on\x20nex','ponseMessa','participan','day',')\x20id:','parse_fail','itial\x20exec','update\x20sch','singleSele','IAL_BACKOF','EGER,\x0a\x20\x20\x20\x20','):\x0a\x0a','ULT_TIMEZO','â€£\x20One-off\x20','chat_jid\x20=','_settings\x20','ed\x20add\x20<HH','[sched]\x20li','EX\x20IF\x20NOT\x20','hedules.\x20E','ates)','ialize\x20req','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','chat_jid','enabled',':mm|YYYY-M','th\x20/setdef','delete\x201\x202','assign','moveSchedu','5910828KIYtDu','REATE\x20TABL','pdate\x20hand','\x5c$&','edit','d_time','[sched]\x20ad','ed\x20add*\x20`<','\x20scheduled','\x20when:','indexOf','dApi\x20','ge\x20text\x20(s','s).\x20gp:<al','daily','leByDBId\x20e','edules_new','one\x20error:','[sched]\x20fa','ctReply','CREATE\x20TAB','SCHED_DEFA','nfig\x20refre','>`\x0aâ€£\x20Tempo','zone','hasSame','ler_settin','_schedules','No\x20changes','Failed\x20for','ite_master','include\x20gp','\x20available','EGER\x20DEFAU','endsWith','\x20made.','body','EXISTS\x20idx','d\x20INTEGER\x20','GER\x20DEFAUL','\x20enabled:','ms\x20default','[sched]\x20cr','hed\x20add\x2009','ezone\x20FROM','d\x20for\x20conn','edule.','length','t_jid,\x20mes',',\x20timezone','eated_at\x20I','solving\x20co','roup\x20JID.','all','\x20error:\x20','from','eaned\x20up','eserved.\x0a\x0a','created_by','\x20Delete\x20on','tupSendApi','time.','when','ecutorTick','FAULT\x201','\x20id\x20INTEGE','exec','XISTS\x20sche','prepare','\x20set\x20to\x20','time\x20TEXT,','remoteJid','LT\x20\x27daily\x27','`<HH:mm\x20|\x20','INTEGER\x20DE','AUTOINCREM','freshConfi','name','days','=\x20ON;','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','[sched]\x20in','\x20at\x20','ias|jid|al','k\x20failed','opped','heduler\x20st','[sched]\x20cl','=2`\x20every\x20','\x20failed:\x20','wId','sendMessag','\x20WHERE\x20typ','list','es\x20created','gp:<alias|','edules\x20SET','gister\x20man','t\x20normaliz','\x20NOT\x20NULL,','push','every','instance','ed,\x20schedu','ection\x20upd','\x20?,\x20?)','one-off\x20fo','liver\x20one-','\x20chat=','965XEWcoI','Schedule\x20#','setup\x20send','string','send_at','instead','jid','ngSchedule','n(s).\x20Set\x20','catch','DEFAULT\x201,','hedules\x20ta','E\x20IF\x20NOT\x20E','?,\x20?,\x20?,\x20?','\x22.\x20Use\x20gp:','fromMillis','not-availa','[sched]\x20Le','selectedBu','ring','jid|all>','d\x20to\x20backu','(id:','ily\x27,\x0a\x20\x20\x20\x20','UES\x20(?,\x20?,','ULL','plus','\x20updated\x20t','group/defa','finalize','ðŸ“…\x20*SchedHe','trim','\x20\x20\x20\x20create','[sched]\x20re','d_at\x20INTEG','failed:\x20','d\x20removed\x20','every_n_da','INSERT\x20INT','parse\x20new\x20','e-off\x20id=','o\x20one-off\x20','xample:\x0asc','es.\x0a\x0a>\x20*sc','\x20->\x20','eator_jid\x20','ge:\x20sched\x20','<number>`\x20','isValid','zoneName','r,...|all>','alias,\x20gp:','s\x20RENAME\x20T','sock','nd\x20attempt','gs\x20(\x0a\x20\x20\x20\x20\x20','oUserJid','MM-DDTHH:m','YY-MM-DDTH','fter\x20time\x20',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleSt','db_failed','oss\x20reques','EXISTS\x20sch','[sched]\x20ha','[sched]\x20DB','for\x20','toISO','uled\x20messa','created_at','message','CREATE\x20IND','ME\x20TO\x20sche','schedules','able\x20a\x20sch','solveDefau','unknown','curring\x20id','vided.\x20Usa','ted\x20target','original\x20n','admin\x20chec','quency.','ine\x20when\x20m','[sched]\x20ge','mat\x20for\x20ed','_RETRIES','scheduled_','|jid|all>','No\x20valid\x20i','LE\x20schedul','listRespon','d|all>)','rved\x20-\x20re-','TEXT\x20NOT\x20N','KEY\x20AUTOIN','toFormat','chatJid','\x20(chat_jid','TEXT\x0a\x20\x20\x20\x20\x20','sage.\x0a\x0a>\x20*','nnection.u','join','[sched]\x20PM','n\x20follow\x20t','oss\x20your\x20d','sent_at','ed\x20disable',':mm|in\x20N\x20h','ur\x20default','eated\x20sche','plies\x20(fro','videoMessa','toLowerCas','4982JNUzVE','startsWith','\x20to\x20','SELECT\x20tim','ftime(\x27%s\x27','280534uDQSSZ','SCHED_SEND','off\x20id=','now','chat','has','nutes)','no\x20sendApi','cy\x20<number','changes','ings\x20(\x0a\x20\x20\x20','s_new\x20(cha','\x20timezone\x20','author','ewlines\x20pr','\x20daily,\x20`n','sendat','function','ys]\x20<messa','shift','edulesForC','ration\x20fai','H:mm\x20|\x20in\x20','enable','dings\x20erro','le\x20id=','[sched]\x20No','nnot\x20inser','robi','g\x20error:\x20','s_new\x20RENA','schedule','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','led\x20entrie','m>\x20gp:<ali','at_jid\x20=\x20?','ime\x20inline','te\x20listene','diff','chat_id','1\x20daily,\x20n','s.\x0a\x0a>\x20*sch','\x20gp:<alias','tReload\x20ha','lastID','hhmm','ts\x20(','?,\x20?)\x20ON\x20C','padStart','connection','d\x20delete\x201','disable','E\x20schedule','>\x20<n>\x20\x20(n=','=\x20OFF;','uires\x20bot\x20','\x20done;\x20sen','.)\x20gp:<ali','\x20\x20\x20\x20timezo','nnection\x20','includes','l/adequate','[sched]\x20ho','split','If\x20`Ndays`','th:','isNaN','e\x20for\x20','_chat\x20ON\x20s','[sched]\x20en','keys','LUES\x20(?,\x20?','\x20\x20\x20enabled','PM\x20usage:\x20','duler_sett','dateSchedu',')\x20VALUES\x20(','ault.','21620Ppnzvh','seMessage','\x20chat:','one-off\x20id','PRAGMA\x20tab',',\x20send_at,','mMe)','e\x20TEXT\x0a\x20\x20\x20','\x203\x20OR\x20sche','reason','IMARY\x20KEY\x20','m\x20error:\x20','match','le_info(','\x20\x20\x20\x20\x20\x20\x20\x20cr','s\x20(chat_ji','umber>\x20<HH','entries','s\x20canonica','ttonId','PRAGMA\x20for','delete:\x20','min','rval=','help',',\x20time,\x20se','unsupporte','ed\x20frequen','day\x20+\x20Nday','\x20schedule(','schedule.\x20','floor','failed','T\x20NOT\x20NULL','onnection(','found\x20for\x20','ed\x20schedul','\x0a\x20\x20\x20\x20\x20\x20\x20VA','chatid',',\x20?,\x20?,\x20?,','ating\x20safe','all\x20or\x20a\x20g','M\x20schedule','-send\x20clea','sched.init','s\x20found\x20fo','ndleSchedC','HH:mm','tChatTimez','end_at\x20INT','EY,\x0a\x20\x20\x20\x20\x20\x20','ge...>`\x0aâ€£\x20','as|jid|all','WHERE\x20chat','xtMessage','LE\x20IF\x20NOT\x20','backup_','replace','ber>`\x20`<n>','TEXT\x20DEFAU','t_jid\x20TEXT','=\x20?','arted\x20(ali','ONFLICT(ch','-DDTHH:mm>','ed\x20once\x20<H','imageMessa','days_of_we','add','\x20frequency','essage\x20TEX','ror:\x20','anager\x20use','eduled\x20mes','findings','value','\x20the\x20time\x20','rget\x20avail','\x20\x20\x20timezon','creator','frequency','type','ge.\x0a\x0a>\x20*sc','schedule_t','lias|jid|a','[sched]\x20on','delete','ules\x20detec','\x20|\x20YYYY-MM',',2,3\x20OR\x20sc','anaging\x20sc','SCHED_INIT','fromISO','sage...>\x20g','disabled\x20m','FAULT\x20(str','gration\x20do','abled\x20INTE','ed\x20edit\x20<n','isInteger','dules\x20tabl','gacy\x20sched','c.\x0a\x0a>\x20*sch','rate','no\x20send\x20ta','number','O\x20schedule','startOf','=excluded.','F_MS','s):\x0a','faults\x20as\x20','\x20messages\x20','d\x20TEXT\x20PRI','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','send','e\x20FROM\x20sql','default\x20wi','r_jid\x20TEXT','\x20=\x20?','[sched]\x20de','essage.\x0a','yes','DELETE\x20FRO','isArray','\x20days,\x20etc','rarily\x20dis','error:\x20','_jid,\x20enab','2.3.4','[sched]\x20se','\x20\x20\x20\x20freque','ame\x20line\x20a','caption','1\x20ORDER\x20BY','@g.us','time','ek:','\x20time.\x0a\x0a>\x20','trimEnd','s).','ROM\x20schedu','run','e\x20#','fallback','room','No\x20schedul','[sched]\x20co','e=\x27table\x27\x20','led,\x20creat','bled\x20state','s):\x20','4914426pyRTQC','setZone','2\x20days,\x20et','s\x20WHERE\x20id','.update','ys]`\x20`<mes','t,\x20creator','ow\x20error:\x20','once','31913415VJkEKb','ncy\x20TEXT,\x0a','update\x20ena','liver\x20recu','hed\x20delete','[sched]\x20mi','`\x0aâ€£\x20Change','d\x20to\x20remov','rror:\x20','number,...','ys:','id|all>','les\x20WHERE\x20','s\x20at\x20given','utes>\x20<mes','chedules(c','<number|nu','5431184KtgEfg','INTEGER\x20PR','\x20default\x20c','get','K_INTERVAL','alias','[sched]\x20up','R\x20PRIMARY\x20',':\x20\x22','\x20\x20\x20\x20\x20\x20\x20\x20ti','r:\x20','\x20all','enabled\x20=\x20','selectedRo','s*\x0a\x0a>\x20*sch','>\x20*sched\x20o','eated\x20cano','\x20\x20\x20);','`\x0aâ€£\x20Set\x20re','lp\x20Command','db\x20delete\x20','rring\x20id=','ge...>\x20\x20\x20(','map','shed:\x20inte','\x20target(s)','d\x20time\x20for','Usage:\x20sch','Message\x20ca','CREMENT,\x0a\x20','ed\x20','set','Scheduled\x20','sureSchema','it.','Deleted\x20','key','=2\x20every\x202','ap\x20tables\x20','or\x20on\x20foll','\x20disabled\x20','o\x20recurrin','tReloadCon','N\x20hours/da','getUniqueJ','efaults.','toMillis','\x20\x20\x20\x20\x20\x20\x20cha','nical\x20sche','AND\x20name=?','e\x20or\x20multi','les\x20for\x20to','SELECT\x20*\x20F'];_0xb3e3=function(){return _0x5e6572;};return _0xb3e3();}async function getCombinedSchedulesForChats(_0xc63297){const _0x142733=_0xdc7108,_0x4c9be4=[];for(const _0x63a419 of _0xc63297){const _0x4be758=await listSchedulesForChat(_0x63a419);for(const _0x1e037a of _0x4be758){_0x4c9be4['push'](Object[_0x142733(0x408)]({},_0x1e037a,{'chat_jid':_0x63a419}));}}return _0x4c9be4;}async function resolveNumberToDbId(_0x272c73,_0x47990f){if(!_0x272c73||!Number['isInteger'](_0x272c73)||_0x272c73<-0x1e28+0x2006*0x1+-0x3*0x9f)return null;const _0x31d64a=await getCombinedSchedulesForChats(_0x47990f);if(!_0x31d64a||_0x31d64a['length']<_0x272c73)return null;return _0x31d64a[_0x272c73-(0x2307+0x2e4+-0x25ea)]['id'];}async function findStoredMatchFromFindings(_0x4ea0ff=[]){const _0x1047e1=_0xdc7108;try{const _0x2faedd=await listSudo();if(!Array['isArray'](_0x2faedd)||_0x2faedd['length']===0x125b*0x1+0xbb7+-0x3*0xa06)return null;const _0x44832b=new Set(_0x2faedd[_0x1047e1(0x361)](String));for(const _0x38a865 of _0x4ea0ff||[]){if(!_0x38a865||typeof _0x38a865[_0x1047e1(0x1d8)]!=='string')continue;const _0x441d14=normalizeToJid(_0x38a865[_0x1047e1(0x1d8)]);if(_0x441d14&&_0x44832b[_0x1047e1(0x24f)](_0x441d14))return _0x441d14;if(_0x44832b[_0x1047e1(0x24f)](_0x38a865[_0x1047e1(0x1d8)]))return _0x38a865[_0x1047e1(0x1d8)];const _0x3a84bf=String(_0x38a865['jid'])['split']('@')[-0xb45*-0x3+0x20dc+-0x1639*0x3][_0x1047e1(0x289)](':')[0x13*0xa3+0x1b2+0x6b*-0x21];if(_0x3a84bf)for(const _0x139d63 of _0x2faedd){const _0x32f358=String(_0x139d63)['split']('@')[-0x1*-0x68b+-0xa1a*-0x3+-0x1*0x24d9];if(_0x32f358&&_0x32f358===_0x3a84bf)return _0x139d63;}}return null;}catch(_0x50c87b){return warn('[sched]\x20fi'+'ndStoredMa'+_0x1047e1(0x394)+_0x1047e1(0x262)+_0x1047e1(0x354)+(_0x50c87b?.[_0x1047e1(0x219)]||_0x50c87b)),null;}}export async function onMessage(_0x31a1e0){const _0x53951b=_0xdc7108;try{if(!_0x31a1e0||!_0x31a1e0[_0x53951b(0x36e)]||!_0x31a1e0[_0x53951b(0x219)])return;const _0xe4da9f=String(_0x31a1e0['key'][_0x53951b(0x1ac)]||'')+'::'+String(_0x31a1e0['key']['id']||_0x31a1e0[_0x53951b(0x36e)][_0x53951b(0x3ee)+'t']||'');if(isCmdProcessed(_0xe4da9f))return;markCmdProcessed(_0xe4da9f);if(!_0x31a1e0['isCommand'])return;const _0xaa1aa2=typeof _0x31a1e0[_0x53951b(0x3a7)]===_0x53951b(0x1d5)&&_0x31a1e0[_0x53951b(0x3a7)][_0x53951b(0x1f1)]()['length']?_0x31a1e0[_0x53951b(0x3a7)]:extractTextFromMessage(_0x31a1e0)||'';if(!_0xaa1aa2)return;const _0x5ac102=_0x31a1e0[_0x53951b(0x36e)][_0x53951b(0x1ac)],_0x55b048=typeof _0x5ac102==='string'&&_0x5ac102[_0x53951b(0x42c)](_0x53951b(0x31f));if(_0x55b048){let _0x34a504=![];try{_0x34a504=await isadmin(botRef,_0x31a1e0);}catch(_0x43981d){warn('[sched]\x20is'+_0x53951b(0x224)+_0x53951b(0x1b9)),_0x34a504=![];}if(!_0x34a504)return;const _0x11495c=String(_0xaa1aa2)[_0x53951b(0x1f1)](),{firstLine:_0x5a59cd,restText:_0x5879d0,firstTokens:_0x38eb93}=splitFirstLinePreserveRest(_0x11495c),_0x39aeca=(_0x38eb93[0x4*-0x66a+0x67*-0x5b+0x3e45]||'')['toLowerCas'+'e']();if(!commands['includes'](_0x39aeca))return;const _0x1ee6fb=(_0x38eb93[0x254f+0x1b9c+0x40ea*-0x1]||'')[_0x53951b(0x244)+'e'](),_0x47258d=_0x31a1e0[_0x53951b(0x36e)][_0x53951b(0x3ee)+'t']||_0x31a1e0[_0x53951b(0x36e)][_0x53951b(0x441)]||_0x31a1e0[_0x53951b(0x36e)][_0x53951b(0x1ac)]||'',_0x41279f=(_0x47258d||'')[_0x53951b(0x289)]('@')[-0xa53+-0x1dd0+0x4b*0x89],_0x24b567=await resolveDefaultChatJidsForUser(_0x41279f),_0x2d8ccd=_0x5ac102;if(!_0x24b567||_0x24b567['length']===-0x6c5+0x7f7+-0x132){await sendWithRetry(_0x2d8ccd,{'text':'Could\x20not\x20'+_0x53951b(0x3e7)+_0x53951b(0x240)+'\x20connectio'+_0x53951b(0x1da)+_0x53951b(0x30d)+_0x53951b(0x406)+_0x53951b(0x297)});return;}await handleSchedCommandGroup(_0x31a1e0,{'firstLine':_0x5a59cd,'restText':_0x5879d0,'firstTokens':_0x38eb93,'sub':_0x1ee6fb,'defaultChatJids':_0x24b567,'confirmationTarget':_0x2d8ccd,'senderJid':_0x47258d});return;}const _0x4f5c91=Boolean(_0x31a1e0['key']['fromMe']);let _0x2790c5=null;if(_0x4f5c91){const _0x304838=getBotJid();if(!_0x304838){warn(_0x53951b(0x23a)+_0x53951b(0x39f)+_0x53951b(0x3ab)+'ble\x20for\x20re'+_0x53951b(0x242)+_0x53951b(0x29e));return;}_0x2790c5=_0x304838;}else{let _0x5a3163=![];try{_0x5a3163=await isSudo(botRef,_0x31a1e0);}catch(_0xf6016d){_0x5a3163=![];}if(!_0x5a3163)return;const _0x20ae5e=userJidFromCtx(_0x31a1e0)||{'findings':[]},_0x3ed22a=await findStoredMatchFromFindings(_0x20ae5e[_0x53951b(0x2e2)]||[]);if(!_0x3ed22a)return;_0x2790c5=_0x3ed22a;}const _0x37318a=String(_0xaa1aa2),{firstLine:_0x47e474,restText:_0x55039d,firstTokens:_0x333f44}=splitFirstLinePreserveRest(_0x37318a),_0x3a98a4=(_0x333f44[-0x17dd*-0x1+-0x219e+0x9c1]||'')[_0x53951b(0x244)+'e']();if(!commands[_0x53951b(0x286)](_0x3a98a4))return;const _0x1838ab=(_0x333f44[-0x8ed+0x40f*0x3+-0x115*0x3]||'')[_0x53951b(0x244)+'e']();if(!_0x1838ab||_0x1838ab===_0x53951b(0x2b0)){await sendWithRetry(_0x2790c5,{'text':USAGE});return;}const _0x5da406=[_0x53951b(0x338),_0x53951b(0x2dc),_0x53951b(0x1c2),'delete',_0x53951b(0x40e),_0x53951b(0x2e8),_0x53951b(0x27d),_0x53951b(0x261)],{gpValue:_0x4dea4a,cleanedBody:_0xd89b8e}=findGpAndCleanBodyFromRestAndFirst(_0x47e474,_0x55039d);if(_0x5da406[_0x53951b(0x286)](_0x1838ab)&&!_0x4dea4a){await sendWithRetry(_0x2790c5,{'text':_0x53951b(0x293)+_0x53951b(0x429)+_0x53951b(0x3d8)+'d|all>\x20inl'+_0x53951b(0x226)+_0x53951b(0x2f2)+_0x53951b(0x3ff)+_0x53951b(0x1fc)+_0x53951b(0x435)+_0x53951b(0x399)+'there\x0amore'+'\x20lines\x0agp:'+_0x53951b(0x34f)});return;}let _0x22a68e=[];if(_0x4dea4a){const _0x5bd291=_0x4dea4a[_0x53951b(0x1f1)]();if(_0x5bd291[_0x53951b(0x244)+'e']()===_0x53951b(0x43f))_0x22a68e=await _0x45cc82[_0x53951b(0x376)+'ids']();else{const _0x3c8456=await _0x45cc82['resolveNam'+'e'](_0x5bd291);if(_0x3c8456)_0x22a68e=[_0x3c8456];else{if(_0x5bd291[_0x53951b(0x286)]('@'))_0x22a68e=[_0x45cc82['normalizeT'+_0x53951b(0x20a)](_0x5bd291)];}}if(_0x5da406[_0x53951b(0x286)](_0x1838ab)&&(!_0x22a68e||_0x22a68e[_0x53951b(0x439)]===0x21c1+0xaf*-0x31+-0x42)){await sendWithRetry(_0x2790c5,{'text':'Could\x20not\x20'+'resolve\x20gp'+_0x53951b(0x352)+_0x4dea4a+(_0x53951b(0x1e0)+_0x53951b(0x205)+_0x53951b(0x2c1)+_0x53951b(0x43e))});return;}}await handleSchedCommandPM(_0x31a1e0,{'sub':_0x1838ab,'firstLine':_0x47e474,'restText':_0x55039d,'firstTokens':_0x333f44,'targetChatJids':_0x22a68e,'confirmationTarget':_0x2790c5,'senderJid':_0x31a1e0[_0x53951b(0x36e)]['participan'+'t']||_0x31a1e0[_0x53951b(0x36e)][_0x53951b(0x441)]||'','cleanedBody':_0xd89b8e});return;}catch(_0x8e35ea){error(_0x53951b(0x2ed)+'Message\x20er'+_0x53951b(0x2df)+(_0x8e35ea?.[_0x53951b(0x219)]||_0x8e35ea));}}async function handleSchedCommandGroup(_0x408ce9,{firstLine:_0x151689,restText:_0x10f39f,firstTokens:_0x596a93,sub:_0xe8769f,defaultChatJids:_0xac0bc2,confirmationTarget:_0x4da870,senderJid:_0xa84f47}){const _0x2a6393=_0xdc7108;try{if(!_0xe8769f||_0xe8769f===_0x2a6393(0x2b0)){await sendWithRetry(_0x4da870,{'text':USAGE});return;}if(_0xe8769f===_0x2a6393(0x338)){const _0x5edb81=_0x596a93[0x5*0x665+-0x97*0x42+-0x6f7*-0x1],_0x17ba32=_0x596a93[-0xaaf+0xd*-0x38+-0x6c5*-0x2]&&/^\d+$/[_0x2a6393(0x3b4)](_0x596a93[-0x1*-0x1b2d+0x213d+0x7*-0x8a1])?Number(_0x596a93[0x145d+-0x10e2+-0x8*0x6f]):null;let _0x45ac79='';if(_0x5edb81){const _0x34a14e=new RegExp('\x5cb'+_0x5edb81[_0x2a6393(0x2d1)](/[.*+?^${}()|[\\]\\\\]/g,_0x2a6393(0x40d))+'\x5cb'),_0x46c1c7=_0x151689[_0x2a6393(0x2a4)](_0x34a14e);if(_0x46c1c7){const _0x29e164=_0x151689[_0x2a6393(0x414)](_0x46c1c7[0x1a7a+0x17b5+-0x322f]),_0x5f4f16=_0x29e164+_0x46c1c7[0x17a2+0x1426+-0x2bc8*0x1][_0x2a6393(0x439)];_0x45ac79=_0x151689[_0x2a6393(0x3ad)](_0x5f4f16)['replace'](/^\s*/,'');if(_0x45ac79&&/^\d+/[_0x2a6393(0x3b4)](_0x45ac79))_0x45ac79=_0x45ac79[_0x2a6393(0x2d1)](/^\d+\s*/,'');}}const _0x53dae4=_0x45ac79&&_0x10f39f?_0x45ac79+'\x0a'+_0x10f39f:_0x45ac79||_0x10f39f||'';if(!_0x5edb81||!_0x53dae4||_0x53dae4[_0x2a6393(0x1f1)]()['length']===-0x1*-0x1135+0x1009+-0x213e){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x365)+_0x2a6393(0x2d9)+_0x2a6393(0x3c5)+_0x2a6393(0x25c)+_0x2a6393(0x38e)});return;}const _0x3ae5bb=[];for(const _0x4e9035 of _0xac0bc2){const _0x5ad1f7=await getChatTimezone(_0x4e9035)||DEFAULT_TIMEZONE,_0x3c372c=parseTimeToken(_0x5edb81,_0x5ad1f7);if(!_0x3c372c){_0x3ae5bb[_0x2a6393(0x1c9)]({'chat':_0x4e9035,'ok':![],'reason':_0x2a6393(0x3f1)+'ed'});continue;}if(_0x3c372c[_0x2a6393(0x2e9)]===_0x2a6393(0x39b)){const _0x3024bc=_0x3c372c['dt'],_0x104220=Math[_0x2a6393(0x2b7)](_0x3024bc[_0x2a6393(0x378)]()/(-0x1926+0xa37*-0x1+0x1*0x2745)),_0x3d3144=await addScheduleRow({'chat_jid':_0x4e9035,'message':_0x53dae4,'time':null,'send_at':_0x104220,'frequency':_0x2a6393(0x338),'timezone':_0x3024bc[_0x2a6393(0x203)]||_0x5ad1f7,'creator_jid':_0xa84f47});if(_0x3d3144)_0x3ae5bb['push']({'chat':_0x4e9035,'ok':!![],'id':_0x3d3144,'when':_0x3024bc['toLocaleSt'+_0x2a6393(0x1e5)](DateTime[_0x2a6393(0x395)+'ED'])});else _0x3ae5bb[_0x2a6393(0x1c9)]({'chat':_0x4e9035,'ok':![],'reason':_0x2a6393(0x210)});continue;}if(_0x3c372c['type']===_0x2a6393(0x277)){const [_0x5a1d67,_0x201f76]=_0x3c372c[_0x2a6393(0x277)][_0x2a6393(0x289)](':')[_0x2a6393(0x361)](Number);let _0x5d3168=DateTime[_0x2a6393(0x24d)]()['setZone'](_0x5ad1f7),_0x3a96fc=_0x5d3168[_0x2a6393(0x303)](_0x2a6393(0x3ef))[_0x2a6393(0x369)]({'hour':_0x5a1d67,'minute':_0x201f76,'second':0x0,'millisecond':0x0});if(_0x17ba32&&Number[_0x2a6393(0x2fb)](_0x17ba32)&&_0x17ba32>=-0x1*0x24bf+-0x15e9*-0x1+0xed7)_0x3a96fc=_0x3a96fc[_0x2a6393(0x1ec)]({'days':Number(_0x17ba32)});else{if(_0x3a96fc<=_0x5d3168)_0x3a96fc=_0x3a96fc[_0x2a6393(0x1ec)]({'days':0x1});}const _0x456566=Math[_0x2a6393(0x2b7)](_0x3a96fc[_0x2a6393(0x378)]()/(-0x1175+0x1c09+-0x6ac)),_0x54d289=await addScheduleRow({'chat_jid':_0x4e9035,'message':_0x53dae4,'time':null,'send_at':_0x456566,'frequency':_0x2a6393(0x338),'timezone':_0x5ad1f7,'creator_jid':_0xa84f47});if(_0x54d289)_0x3ae5bb['push']({'chat':_0x4e9035,'ok':!![],'id':_0x54d289,'when':_0x3a96fc[_0x2a6393(0x20f)+_0x2a6393(0x1e5)](DateTime[_0x2a6393(0x395)+'ED'])});else _0x3ae5bb[_0x2a6393(0x1c9)]({'chat':_0x4e9035,'ok':![],'reason':_0x2a6393(0x210)});continue;}_0x3ae5bb[_0x2a6393(0x1c9)]({'chat':_0x4e9035,'ok':![],'reason':_0x2a6393(0x2b2)+_0x2a6393(0x40f)});}const _0xa80219=_0x3ae5bb[_0x2a6393(0x3ae)](_0x2bcf6b=>_0x2bcf6b['ok']),_0x35d566=_0x3ae5bb[_0x2a6393(0x3ae)](_0x155714=>!_0x155714['ok']);let _0x17558f='';if(_0xa80219[_0x2a6393(0x439)]){_0x17558f+=_0x2a6393(0x36a)+'one-off\x20fo'+'r\x20'+_0xa80219[_0x2a6393(0x439)]+(_0x2a6393(0x34c)+_0x2a6393(0x2ba)+'s):\x0a');for(const _0x260313 of _0xa80219)_0x17558f+='â€¢\x20'+_0x260313[_0x2a6393(0x24e)]+_0x2a6393(0x3bb)+_0x260313['id']+'\x20at\x20'+_0x260313['when']+'\x0a';}if(_0x35d566['length']){_0x17558f+=_0x2a6393(0x427)+'\x20'+_0x35d566[_0x2a6393(0x439)]+(_0x2a6393(0x34c)+_0x2a6393(0x2ba)+_0x2a6393(0x306));for(const _0x45aa3a of _0x35d566)_0x17558f+='â€¢\x20'+_0x45aa3a[_0x2a6393(0x24e)]+_0x2a6393(0x1fe)+_0x45aa3a[_0x2a6393(0x2a1)]+'\x0a';}await sendWithRetry(_0x4da870,{'text':_0x17558f['trim']()||'No\x20schedul'+'es\x20created'+'.'});return;}if(_0xe8769f===_0x2a6393(0x2dc)){if(!_0x596a93[0x148+-0x1f35*0x1+0x1def]){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x365)+_0x2a6393(0x3fc)+_0x2a6393(0x405)+'M-DDTHH:mm'+'|in\x20N\x20hour'+_0x2a6393(0x3a3)+_0x2a6393(0x347)+'sage...>'});return;}const _0xd18886=_0x596a93[0x91d*0x3+0x4*0x6fc+-0x3745],_0x2a13d2=_0x596a93[-0x1151+0xafa+0x65a]&&/^\d+$/[_0x2a6393(0x3b4)](_0x596a93[0x18fe+0x10e4+0x29df*-0x1])?Number(_0x596a93[-0x262d+-0xb57*-0x3+0xb*0x61]):null;let _0x318dde='';const _0x348d79=new RegExp('\x5cb'+_0xd18886[_0x2a6393(0x2d1)](/[.*+?^${}()|[\\]\\\\]/g,'\x5c$&')+'\x5cb'),_0x216ebb=_0x151689['match'](_0x348d79);if(_0x216ebb){const _0x4005ef=_0x151689[_0x2a6393(0x414)](_0x216ebb[0x1b2*0x10+-0xbff+-0xf21]),_0x722c2=_0x4005ef+_0x216ebb[-0x7*0x1eb+0x59c+-0x1*-0x7d1][_0x2a6393(0x439)];_0x318dde=_0x151689['slice'](_0x722c2)[_0x2a6393(0x2d1)](/^\s*/,'');if(_0x318dde&&/^\d+/[_0x2a6393(0x3b4)](_0x318dde))_0x318dde=_0x318dde[_0x2a6393(0x2d1)](/^\d+\s*/,'');}const _0x219cb0=_0x318dde&&_0x10f39f?_0x318dde+'\x0a'+_0x10f39f:_0x318dde||_0x10f39f||'';if(!_0x219cb0||_0x219cb0[_0x2a6393(0x1f1)]()[_0x2a6393(0x439)]===0xe*0x9+-0x1885+0x1*0x1807){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x38f)+'vide\x20messa'+_0x2a6393(0x416)+'ame\x20line\x20a'+'fter\x20time\x20'+_0x2a6393(0x371)+'owing\x20line'+_0x2a6393(0x324)});return;}const _0x41180b=[];for(const _0x253e06 of _0xac0bc2){const _0x56d182=await getChatTimezone(_0x253e06)||DEFAULT_TIMEZONE,_0x480e06=parseTimeToken(_0xd18886,_0x56d182);if(!_0x480e06){_0x41180b[_0x2a6393(0x1c9)]({'chat':_0x253e06,'ok':![],'reason':_0x2a6393(0x3f1)+'ed'});continue;}const _0x2a5afc=_0xa84f47;if(_0x480e06['type']==='datetime'){const _0x4c9aff=_0x480e06['dt'],_0x1ba9ad=Math[_0x2a6393(0x2b7)](_0x4c9aff[_0x2a6393(0x378)]()/(-0x2f5+0x18fd+-0x1220)),_0x5e826d=await addScheduleRow({'chat_jid':_0x253e06,'message':_0x219cb0,'time':null,'send_at':_0x1ba9ad,'frequency':_0x2a6393(0x338),'timezone':_0x4c9aff['zoneName']||_0x56d182,'creator_jid':_0x2a5afc});if(_0x5e826d)_0x41180b['push']({'chat':_0x253e06,'ok':!![],'id':_0x5e826d,'when':_0x4c9aff[_0x2a6393(0x20f)+_0x2a6393(0x1e5)](DateTime[_0x2a6393(0x395)+'ED'])});else _0x41180b[_0x2a6393(0x1c9)]({'chat':_0x253e06,'ok':![],'reason':_0x2a6393(0x210)});continue;}if(_0x480e06[_0x2a6393(0x2e9)]===_0x2a6393(0x277)){const _0x59434d=_0x480e06['hhmm'];if(_0x2a13d2&&Number[_0x2a6393(0x2fb)](_0x2a13d2)&&_0x2a13d2>=0x86a+-0x145f+0xbf6){let _0x14e09c=DateTime[_0x2a6393(0x24d)]()['setZone'](_0x56d182);const [_0x2e9b23,_0x345b28]=_0x59434d[_0x2a6393(0x289)](':')['map'](Number);let _0x39855d=_0x14e09c[_0x2a6393(0x303)](_0x2a6393(0x3ef))[_0x2a6393(0x369)]({'hour':_0x2e9b23,'minute':_0x345b28,'second':0x0,'millisecond':0x0});_0x39855d=_0x39855d[_0x2a6393(0x1ec)]({'days':Number(_0x2a13d2)});const _0x5a1b62=Math[_0x2a6393(0x2b7)](_0x39855d[_0x2a6393(0x378)]()/(0x1252+-0xa4a*0x1+-0x420)),_0x569eb8=await addScheduleRow({'chat_jid':_0x253e06,'message':_0x219cb0,'time':null,'send_at':_0x5a1b62,'frequency':_0x2a6393(0x338),'timezone':_0x56d182,'creator_jid':_0x2a5afc});if(_0x569eb8)_0x41180b[_0x2a6393(0x1c9)]({'chat':_0x253e06,'ok':!![],'id':_0x569eb8,'when':_0x39855d[_0x2a6393(0x20f)+_0x2a6393(0x1e5)](DateTime[_0x2a6393(0x395)+'ED'])});else _0x41180b['push']({'chat':_0x253e06,'ok':![],'reason':'db_failed'});continue;}const _0x3bdea8=await addScheduleRow({'chat_jid':_0x253e06,'message':_0x219cb0,'time':_0x59434d,'send_at':null,'frequency':_0x2a6393(0x418),'timezone':_0x56d182,'creator_jid':_0x2a5afc});if(_0x3bdea8)_0x41180b[_0x2a6393(0x1c9)]({'chat':_0x253e06,'ok':!![],'id':_0x3bdea8,'when':_0x59434d+'\x20('+_0x56d182+')'});else _0x41180b[_0x2a6393(0x1c9)]({'chat':_0x253e06,'ok':![],'reason':_0x2a6393(0x210)});continue;}_0x41180b[_0x2a6393(0x1c9)]({'chat':_0x253e06,'ok':![],'reason':_0x2a6393(0x2b2)+'d_time'});}const _0x2c278b=_0x41180b[_0x2a6393(0x3ae)](_0x441191=>_0x441191['ok']),_0x2be7c6=_0x41180b[_0x2a6393(0x3ae)](_0x113716=>!_0x113716['ok']);let _0x2325a8='';if(_0x2c278b['length']){_0x2325a8+=_0x2a6393(0x36a)+_0x2a6393(0x215)+_0x2c278b[_0x2a6393(0x439)]+('\x20default\x20c'+_0x2a6393(0x2ba)+_0x2a6393(0x306));for(const _0x3ff681 of _0x2c278b)_0x2325a8+='â€¢\x20'+_0x3ff681[_0x2a6393(0x24e)]+_0x2a6393(0x3bb)+_0x3ff681['id']+_0x2a6393(0x413)+_0x3ff681[_0x2a6393(0x1a3)]+'\x0a';}if(_0x2be7c6[_0x2a6393(0x439)]){_0x2325a8+=_0x2a6393(0x427)+'\x20'+_0x2be7c6[_0x2a6393(0x439)]+(_0x2a6393(0x34c)+_0x2a6393(0x2ba)+_0x2a6393(0x306));for(const _0x54ab71 of _0x2be7c6)_0x2325a8+='â€¢\x20'+_0x54ab71[_0x2a6393(0x24e)]+_0x2a6393(0x1fe)+_0x54ab71[_0x2a6393(0x2a1)]+'\x0a';}await sendWithRetry(_0x4da870,{'text':_0x2325a8['trim']()||_0x2a6393(0x32a)+'es\x20created'+'.'});return;}if(_0xe8769f===_0x2a6393(0x1c2)){const _0x2e028c=await getCombinedSchedulesForChats(_0xac0bc2);if(!_0x2e028c[_0x2a6393(0x439)]){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+'ed\x20message'+_0x2a6393(0x2c5)+_0x2a6393(0x3bc)+':\x20'+_0xac0bc2[_0x2a6393(0x239)](',\x20')});return;}const _0x3b773d=_0x2e028c[_0x2a6393(0x361)]((_0x442a7c,_0x3e9fc9)=>{const _0x496dae=_0x2a6393,_0x1c7952=_0x442a7c['send_at']?DateTime[_0x496dae(0x1e1)](Number(_0x442a7c['send_at'])*(-0x8*-0x207+0xf2c+-0x1b7c))['setZone'](_0x442a7c[_0x496dae(0x38d)]||DEFAULT_TIMEZONE)[_0x496dae(0x216)]({'suppressSeconds':!![]}):_0x442a7c[_0x496dae(0x320)]?_0x442a7c[_0x496dae(0x320)]+'\x20('+(_0x442a7c[_0x496dae(0x38d)]||_0x496dae(0x1ee)+'ult\x20TZ')+')':_0x496dae(0x21f),_0x3e11f2=(_0x442a7c[_0x496dae(0x219)]||'')[_0x496dae(0x289)]('\x0a')[_0x496dae(0x361)](_0x22ce57=>_0x22ce57['trimEnd']())['join']('\x0a');return _0x3e9fc9+(0x4*0x10f+-0x1abc+0x1681)+_0x496dae(0x3f0)+_0x442a7c['id']+_0x496dae(0x29a)+_0x442a7c[_0x496dae(0x403)]+_0x496dae(0x413)+_0x1c7952+_0x496dae(0x3cb)+(_0x442a7c[_0x496dae(0x2e8)]||'daily')+_0x496dae(0x432)+(_0x442a7c[_0x496dae(0x404)]?_0x496dae(0x312):'no')+_0x496dae(0x383)+_0x3e11f2;}),_0x1bc506=_0x2a6393(0x36a)+'for\x20defaul'+_0x2a6393(0x278)+_0xac0bc2['join'](',\x20')+_0x2a6393(0x3f7)+_0x3b773d[_0x2a6393(0x239)]('\x0a\x0a');await sendWithRetry(_0x4da870,{'text':_0x1bc506});return;}if(_0xe8769f==='delete'){const _0x3fdf20=_0x596a93[_0x2a6393(0x3ad)](0x31*0x8c+-0x397*-0x5+-0x2cbd);let _0x16eb3a=_0x3fdf20[_0x2a6393(0x239)]('\x20');if(!_0x16eb3a&&_0x10f39f)_0x16eb3a=_0x10f39f['trim']();if(!_0x16eb3a){await sendWithRetry(_0x4da870,{'text':'Usage:\x20sch'+_0x2a6393(0x387)+_0x2a6393(0x349)+'mber,numbe'+_0x2a6393(0x204)});return;}if(/^\s*all\s*$/i[_0x2a6393(0x3b4)](_0x16eb3a)){let _0x5f568e=-0xe3*0x24+0x17fe+-0x7ee*-0x1;for(const _0x51e72c of _0xac0bc2){const _0x23986d=await removeAllSchedulesForChat(_0x51e72c);_0x5f568e+=_0x23986d;}await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x36d)+_0x5f568e+('\x20schedule('+'s)\x20across\x20'+_0x2a6393(0x3af))+_0xac0bc2[_0x2a6393(0x239)](',\x20')});return;}const _0x486aad=_0x16eb3a[_0x2a6393(0x289)](/[\s,]+/)['map'](_0x2ef8cc=>_0x2ef8cc[_0x2a6393(0x1f1)]())[_0x2a6393(0x3ae)](Boolean),_0x1b6e98=_0x486aad[_0x2a6393(0x361)](_0x5a9f80=>Number(_0x5a9f80))[_0x2a6393(0x3ae)](_0x1becaa=>!Number['isNaN'](_0x1becaa)&&Number[_0x2a6393(0x2fb)](_0x1becaa)&&_0x1becaa>0xa*0x2f9+-0xaec+0x53*-0x3a);if(!_0x1b6e98['length']){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x22c)+'ndexes\x20pro'+_0x2a6393(0x221)+_0x2a6393(0x200)+_0x2a6393(0x407)+_0x2a6393(0x2a0)+_0x2a6393(0x27c)+',2,3\x20OR\x20sc'+_0x2a6393(0x33d)+_0x2a6393(0x355)});return;}const _0x364ad1=[...new Set(_0x1b6e98)],_0x4651fc=await getCombinedSchedulesForChats(_0xac0bc2),_0x5bdf9b=[],_0x150a7c=[];for(const _0x18712f of _0x364ad1){if(_0x18712f<-0x1*0x47+-0x1bcb+0x1c13||_0x18712f>_0x4651fc[_0x2a6393(0x439)]){_0x150a7c[_0x2a6393(0x1c9)]({'n':_0x18712f,'reason':'not\x20found'});continue;}const _0x299837=_0x4651fc[_0x18712f-(0x2*-0x55c+-0xb*0x346+0x2ebb)]['id'],_0x5ec9e8=await removeScheduleByDBId(_0x299837);if(_0x5ec9e8)_0x5bdf9b[_0x2a6393(0x1c9)]({'n':_0x18712f,'id':_0x299837});else _0x150a7c[_0x2a6393(0x1c9)]({'n':_0x18712f,'reason':_0x2a6393(0x35e)+_0x2a6393(0x2b8)});}let _0x3f2c22='';if(_0x5bdf9b[_0x2a6393(0x439)])_0x3f2c22+=_0x2a6393(0x36d)+_0x5bdf9b[_0x2a6393(0x439)]+(_0x2a6393(0x2b5)+'s):\x20')+_0x5bdf9b[_0x2a6393(0x361)](_0x2e246b=>_0x2e246b['n']+_0x2a6393(0x1e8)+_0x2e246b['id']+')')[_0x2a6393(0x239)](',\x20')+'.\x0a';if(_0x150a7c[_0x2a6393(0x439)])_0x3f2c22+=_0x2a6393(0x398)+_0x2a6393(0x2ad)+_0x150a7c[_0x2a6393(0x361)](_0x478f80=>_0x478f80['n']+'('+_0x478f80[_0x2a6393(0x2a1)]+')')[_0x2a6393(0x239)](',\x20')+'.';await sendWithRetry(_0x4da870,{'text':_0x3f2c22['trim']()||_0x2a6393(0x426)+_0x2a6393(0x42d)});return;}if(_0xe8769f===_0x2a6393(0x40e)){const _0x39f23e=Number(_0x596a93[-0x1*-0x1726+0x23d*0x7+-0x26cf]),_0x3c393d=_0x596a93[0x333+0xd*0xe2+0x2*-0x755]||(_0x10f39f?_0x10f39f['split'](/\r?\n/)[-0x2*0x7d3+0xb*0x2c3+-0xebb][_0x2a6393(0x1f1)]():null);if(!_0x39f23e||!_0x3c393d){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x365)+_0x2a6393(0x2fa)+_0x2a6393(0x2a8)+_0x2a6393(0x23f)+_0x2a6393(0x3cd)+_0x2a6393(0x20b)+'m>'});return;}const _0xacd5eb=await getCombinedSchedulesForChats(_0xac0bc2);if(!_0xacd5eb||_0xacd5eb[_0x2a6393(0x439)]<_0x39f23e){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+_0x2a6393(0x327)+_0x39f23e+(_0x2a6393(0x3e9)+'oss\x20your\x20d'+'efaults.')});return;}const _0x40ae28=_0xacd5eb[_0x39f23e-(-0x3cc+-0x1*-0x251d+-0x10*0x215)]['id'];if(!_0x40ae28){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+_0x2a6393(0x327)+_0x39f23e+(_0x2a6393(0x3e9)+_0x2a6393(0x23c)+'efaults.')});return;}const _0x3eb961=parseTimeToken(_0x3c393d,DEFAULT_TIMEZONE);if(!_0x3eb961){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x398)+'parse\x20new\x20'+'time.'});return;}if(_0x3eb961['type']===_0x2a6393(0x39b)){const _0x146604=_0x3eb961['dt'],_0x2db688=Math[_0x2a6393(0x2b7)](_0x146604['toMillis']()/(0x1*0x3b9+0x22ff+-0x22d0)),_0x4f1b6a=await updateScheduleFields(_0x40ae28,{'send_at':_0x2db688,'time':null,'frequency':_0x2a6393(0x338),'timezone':_0x146604[_0x2a6393(0x203)]||DEFAULT_TIMEZONE});if(_0x4f1b6a)await sendWithRetry(_0x4da870,{'text':'Schedule\x20#'+_0x39f23e+('\x20updated\x20t'+_0x2a6393(0x1fb)+_0x2a6393(0x3b3))+_0x146604['toLocaleSt'+_0x2a6393(0x1e5)](DateTime[_0x2a6393(0x395)+'ED'])+'\x20('+_0x146604['zoneName']+')'});else await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x398)+_0x2a6393(0x3f3)+_0x2a6393(0x438)});return;}else{if(_0x3eb961[_0x2a6393(0x2e9)]===_0x2a6393(0x277)){const _0x467ff8=_0x3eb961['hhmm'],_0x3aef44=_0xacd5eb[_0x39f23e-(-0xb3f+0x20cd+-0x158d)],_0x3af4ef=_0x3aef44['timezone']||await getChatTimezone(_0x3aef44['chat_jid'])||DEFAULT_TIMEZONE,_0x2e50f0=await updateScheduleFields(_0x40ae28,{'time':_0x467ff8,'send_at':null,'frequency':_0x2a6393(0x418),'timezone':_0x3af4ef});if(_0x2e50f0)await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x1d3)+_0x39f23e+('\x20updated\x20t'+_0x2a6393(0x373)+'g\x20at\x20')+_0x467ff8+'\x20('+_0x3af4ef+')'});else await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x398)+_0x2a6393(0x3f3)+_0x2a6393(0x438)});return;}else{await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x3b1)+_0x2a6393(0x364)+_0x2a6393(0x228)+'it.'});return;}}}if(_0xe8769f==='frequency'){const _0x515ac1=Number(_0x596a93[-0x18a2+-0xe34+0x26d8]),_0x160064=Number(_0x596a93[-0x1*-0x8ba+-0x1075*0x2+0x1833]);if(!_0x515ac1||!_0x160064||_0x160064<0x19e4+-0x15*-0xe9+-0xa*0x480){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x365)+_0x2a6393(0x2b3)+_0x2a6393(0x252)+_0x2a6393(0x27f)+_0x2a6393(0x272)+'=2\x20every\x202'+'\x20days,\x20etc'+'.)'});return;}const _0x4d004a=await getCombinedSchedulesForChats(_0xac0bc2);if(!_0x4d004a||_0x4d004a[_0x2a6393(0x439)]<_0x515ac1){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+'e\x20#'+_0x515ac1+(_0x2a6393(0x3e9)+_0x2a6393(0x23c)+_0x2a6393(0x377))});return;}const _0x5f383d=_0x4d004a[_0x515ac1-(0x329*-0x7+0x1*0xbbd+0x1*0xa63)]['id'];if(!_0x5f383d){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+_0x2a6393(0x327)+_0x515ac1+('\x20found\x20acr'+_0x2a6393(0x23c)+'efaults.')});return;}let _0x20d863='daily';if(_0x160064===-0x2*-0x439+-0x23e2+0x1b71)_0x20d863=_0x2a6393(0x418);else _0x20d863=_0x2a6393(0x1f7)+_0x2a6393(0x343)+_0x160064;const _0x5a30e4=await updateScheduleFields(_0x5f383d,{'frequency':_0x20d863});if(_0x5a30e4)await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x1d3)+_0x515ac1+(_0x2a6393(0x2dd)+_0x2a6393(0x1aa))+_0x20d863});else await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x398)+'update\x20fre'+'quency.'});return;}if(_0xe8769f===_0x2a6393(0x27d)||_0xe8769f===_0x2a6393(0x261)){const _0x4b6f69=Number(_0x596a93[-0x1*0x1b39+0x188d+0x2ae]);if(!_0x4b6f69){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x365)+_0x2a6393(0x368)+_0xe8769f+_0x2a6393(0x382)});return;}const _0xc55950=await getCombinedSchedulesForChats(_0xac0bc2);if(!_0xc55950||_0xc55950[_0x2a6393(0x439)]<_0x4b6f69){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+_0x2a6393(0x327)+_0x4b6f69+(_0x2a6393(0x3e9)+_0x2a6393(0x23c)+_0x2a6393(0x377))});return;}const _0x401928=_0xc55950[_0x4b6f69-(-0x248c+0x59*0x3+0x6*0x5eb)]['id'];if(!_0x401928){await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x32a)+_0x2a6393(0x327)+_0x4b6f69+(_0x2a6393(0x3e9)+'oss\x20your\x20d'+_0x2a6393(0x377))});return;}const _0x34237c=await updateScheduleFields(_0x401928,{'enabled':_0xe8769f===_0x2a6393(0x261)?0x1312*0x2+-0x6*-0x3d9+0x3d39*-0x1:-0x40*0x2+0x9b7+-0x937});if(_0x34237c)await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x1d3)+_0x4b6f69+'\x20'+_0xe8769f+'d.'});else await sendWithRetry(_0x4da870,{'text':_0x2a6393(0x398)+'update\x20ena'+_0x2a6393(0x32e)+'.'});return;}await sendWithRetry(_0x4da870,{'text':USAGE});}catch(_0x5a92c3){warn(_0x2a6393(0x213)+_0x2a6393(0x2c6)+'ommandGrou'+'p\x20error:\x20'+(_0x5a92c3?.[_0x2a6393(0x219)]||_0x5a92c3));}}async function handleSchedCommandPM(_0x1225e0,{sub:_0x239f3f,firstLine:_0x1eff73,restText:_0x1bad70,firstTokens:_0x40e93c,targetChatJids:_0x371e47,confirmationTarget:_0x44f4e2,senderJid:_0x452822,cleanedBody:_0x3e1088}){const _0x373f06=_0xdc7108;try{if(!_0x239f3f||_0x239f3f===_0x373f06(0x2b0)){await sendWithRetry(_0x44f4e2,{'text':USAGE});return;}if(_0x239f3f===_0x373f06(0x338)){const _0x10a7e1=_0x40e93c[0x5*0x4a1+-0x5*-0x362+-0x280d],_0x59a56d=_0x40e93c[0x9aa+0x1*-0x2263+0x4*0x62f]&&/^\d+$/[_0x373f06(0x3b4)](_0x40e93c[0x1d7d+0x1478+-0x31f2])?Number(_0x40e93c[-0x53*0xa+-0x265*0x6+0x119f*0x1]):null;let _0x4ce240=(_0x3e1088||'')[_0x373f06(0x1f1)]();!_0x4ce240&&_0x10a7e1&&(_0x4ce240=extractInlineAfterToken(_0x1eff73,_0x10a7e1));if(!_0x10a7e1||!_0x4ce240||_0x4ce240[_0x373f06(0x1f1)]()[_0x373f06(0x439)]===-0xbeb+-0x245f*-0x1+0x1874*-0x1){await sendWithRetry(_0x44f4e2,{'text':'Usage:\x20sch'+_0x373f06(0x2d9)+_0x373f06(0x3c5)+_0x373f06(0x25c)+_0x373f06(0x360)+_0x373f06(0x429)+_0x373f06(0x3d8)+_0x373f06(0x22f)});return;}const _0x22abfc=[];for(const _0x15f2e2 of _0x371e47){const _0x4d486b=await getChatTimezone(_0x15f2e2)||DEFAULT_TIMEZONE,_0x2ec2b8=parseTimeToken(_0x10a7e1,_0x4d486b);if(!_0x2ec2b8){_0x22abfc[_0x373f06(0x1c9)]({'chat':_0x15f2e2,'ok':![],'reason':_0x373f06(0x3f1)+'ed'});continue;}if(_0x2ec2b8['type']===_0x373f06(0x39b)){const _0x189b2f=_0x2ec2b8['dt'],_0x40376e=Math['floor'](_0x189b2f['toMillis']()/(0x23*-0x1d+-0x26db+0x2eba)),_0x35cab=await addScheduleRow({'chat_jid':_0x15f2e2,'message':_0x4ce240,'time':null,'send_at':_0x40376e,'frequency':'once','timezone':_0x189b2f[_0x373f06(0x203)]||_0x4d486b,'creator_jid':_0x452822});if(_0x35cab)_0x22abfc[_0x373f06(0x1c9)]({'chat':_0x15f2e2,'ok':!![],'id':_0x35cab,'when':_0x189b2f[_0x373f06(0x20f)+_0x373f06(0x1e5)](DateTime[_0x373f06(0x395)+'ED'])});else _0x22abfc[_0x373f06(0x1c9)]({'chat':_0x15f2e2,'ok':![],'reason':_0x373f06(0x210)});continue;}if(_0x2ec2b8[_0x373f06(0x2e9)]===_0x373f06(0x277)){const [_0x268bad,_0x25f14c]=_0x2ec2b8[_0x373f06(0x277)][_0x373f06(0x289)](':')[_0x373f06(0x361)](Number);let _0x1948d7=DateTime[_0x373f06(0x24d)]()['setZone'](_0x4d486b),_0x1814a5=_0x1948d7[_0x373f06(0x303)](_0x373f06(0x3ef))['set']({'hour':_0x268bad,'minute':_0x25f14c,'second':0x0,'millisecond':0x0});if(_0x59a56d&&Number[_0x373f06(0x2fb)](_0x59a56d)&&_0x59a56d>=0x115e+-0x1*0x168a+0x52d)_0x1814a5=_0x1814a5[_0x373f06(0x1ec)]({'days':Number(_0x59a56d)});else{if(_0x1814a5<=_0x1948d7)_0x1814a5=_0x1814a5['plus']({'days':0x1});}const _0x479cad=Math[_0x373f06(0x2b7)](_0x1814a5['toMillis']()/(-0x1*0x24d3+0x2+0x28b9)),_0x82c3a2=await addScheduleRow({'chat_jid':_0x15f2e2,'message':_0x4ce240,'time':null,'send_at':_0x479cad,'frequency':'once','timezone':_0x4d486b,'creator_jid':_0x452822});if(_0x82c3a2)_0x22abfc[_0x373f06(0x1c9)]({'chat':_0x15f2e2,'ok':!![],'id':_0x82c3a2,'when':_0x1814a5[_0x373f06(0x20f)+_0x373f06(0x1e5)](DateTime[_0x373f06(0x395)+'ED'])});else _0x22abfc['push']({'chat':_0x15f2e2,'ok':![],'reason':_0x373f06(0x210)});continue;}_0x22abfc[_0x373f06(0x1c9)]({'chat':_0x15f2e2,'ok':![],'reason':_0x373f06(0x2b2)+_0x373f06(0x40f)});}const _0x374fd7=_0x22abfc[_0x373f06(0x3ae)](_0x8b80e3=>_0x8b80e3['ok']),_0x1d1135=_0x22abfc[_0x373f06(0x3ae)](_0x45fa4e=>!_0x45fa4e['ok']);let _0x2ef58d='';if(_0x374fd7['length']){_0x2ef58d+='Scheduled\x20'+_0x373f06(0x1cf)+'r\x20'+_0x374fd7[_0x373f06(0x439)]+('\x20target(s)'+':\x0a');for(const _0x4e44db of _0x374fd7)_0x2ef58d+='â€¢\x20'+_0x4e44db['chat']+_0x373f06(0x3bb)+_0x4e44db['id']+_0x373f06(0x1b7)+_0x4e44db[_0x373f06(0x1a3)]+'\x0a';}if(_0x1d1135[_0x373f06(0x439)]){_0x2ef58d+='Failed\x20for'+'\x20'+_0x1d1135[_0x373f06(0x439)]+(_0x373f06(0x363)+':\x0a');for(const _0x28095c of _0x1d1135)_0x2ef58d+='â€¢\x20'+_0x28095c[_0x373f06(0x24e)]+'\x20->\x20'+_0x28095c[_0x373f06(0x2a1)]+'\x0a';}await sendWithRetry(_0x44f4e2,{'text':_0x2ef58d['trim']()||'No\x20schedul'+_0x373f06(0x1c3)+'.'});return;}if(_0x239f3f===_0x373f06(0x2dc)){if(!_0x40e93c[-0x7f*0x3c+-0x243c+0x4202]){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x365)+_0x373f06(0x3fc)+_0x373f06(0x405)+'M-DDTHH:mm'+'|in\x20N\x20hour'+_0x373f06(0x3a3)+'utes>\x20<mes'+_0x373f06(0x2f5)+'p:<alias|j'+_0x373f06(0x344)});return;}const _0x5c383c=_0x40e93c[0xe51*-0x1+-0xa1*-0x2e+-0x1*0xe9b],_0x2a26af=_0x40e93c[0x3*0x101+0x15b4+-0x62d*0x4]&&/^\d+$/[_0x373f06(0x3b4)](_0x40e93c[0x437*-0x1+-0x1*-0x26c1+0x1*-0x2287])?Number(_0x40e93c[-0x2188+-0x1c9+0x13*0x1dc]):null;let _0x5cd960=(_0x3e1088||'')[_0x373f06(0x1f1)]();!_0x5cd960&&(_0x5cd960=extractInlineAfterToken(_0x1eff73,_0x5c383c));if(!_0x5cd960||_0x5cd960[_0x373f06(0x1f1)]()[_0x373f06(0x439)]===0x2*0x495+-0x43d+-0x4ed){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x38f)+'vide\x20messa'+_0x373f06(0x416)+_0x373f06(0x31c)+_0x373f06(0x20d)+'or\x20on\x20foll'+_0x373f06(0x38a)+_0x373f06(0x417)+_0x373f06(0x1b8)+'l>'});return;}const _0x48d74f=[];for(const _0x5a80a2 of _0x371e47){const _0x27c427=await getChatTimezone(_0x5a80a2)||DEFAULT_TIMEZONE,_0x5c95e6=parseTimeToken(_0x5c383c,_0x27c427);if(!_0x5c95e6){_0x48d74f[_0x373f06(0x1c9)]({'chat':_0x5a80a2,'ok':![],'reason':_0x373f06(0x3f1)+'ed'});continue;}const _0xaa4998=_0x452822;if(_0x5c95e6['type']==='datetime'){const _0x46187c=_0x5c95e6['dt'],_0x17f412=Math[_0x373f06(0x2b7)](_0x46187c['toMillis']()/(-0x5b3+-0x1cb+-0x1*-0xb66)),_0x3504c5=await addScheduleRow({'chat_jid':_0x5a80a2,'message':_0x5cd960,'time':null,'send_at':_0x17f412,'frequency':_0x373f06(0x338),'timezone':_0x46187c[_0x373f06(0x203)]||_0x27c427,'creator_jid':_0xaa4998});if(_0x3504c5)_0x48d74f[_0x373f06(0x1c9)]({'chat':_0x5a80a2,'ok':!![],'id':_0x3504c5,'when':_0x46187c[_0x373f06(0x20f)+_0x373f06(0x1e5)](DateTime[_0x373f06(0x395)+'ED'])});else _0x48d74f['push']({'chat':_0x5a80a2,'ok':![],'reason':_0x373f06(0x210)});continue;}if(_0x5c95e6[_0x373f06(0x2e9)]===_0x373f06(0x277)){const _0x14e0ab=_0x5c95e6[_0x373f06(0x277)];if(_0x2a26af&&Number[_0x373f06(0x2fb)](_0x2a26af)&&_0x2a26af>=0x912+-0x35*0x35+0x4*0x7a){let _0x2d0161=DateTime['now']()[_0x373f06(0x331)](_0x27c427);const [_0x53c288,_0x3b2b41]=_0x14e0ab[_0x373f06(0x289)](':')['map'](Number);let _0x4ad86c=_0x2d0161[_0x373f06(0x303)](_0x373f06(0x3ef))[_0x373f06(0x369)]({'hour':_0x53c288,'minute':_0x3b2b41,'second':0x0,'millisecond':0x0});_0x4ad86c=_0x4ad86c[_0x373f06(0x1ec)]({'days':Number(_0x2a26af)});const _0x2034bb=Math['floor'](_0x4ad86c[_0x373f06(0x378)]()/(0x2*0x434+-0x1f06+0xd43*0x2)),_0x9240ae=await addScheduleRow({'chat_jid':_0x5a80a2,'message':_0x5cd960,'time':null,'send_at':_0x2034bb,'frequency':_0x373f06(0x338),'timezone':_0x27c427,'creator_jid':_0xaa4998});if(_0x9240ae)_0x48d74f[_0x373f06(0x1c9)]({'chat':_0x5a80a2,'ok':!![],'id':_0x9240ae,'when':_0x4ad86c[_0x373f06(0x20f)+_0x373f06(0x1e5)](DateTime['DATETIME_M'+'ED'])});else _0x48d74f['push']({'chat':_0x5a80a2,'ok':![],'reason':'db_failed'});continue;}const _0x3b0fbe=await addScheduleRow({'chat_jid':_0x5a80a2,'message':_0x5cd960,'time':_0x14e0ab,'send_at':null,'frequency':_0x373f06(0x418),'timezone':_0x27c427,'creator_jid':_0xaa4998});if(_0x3b0fbe)_0x48d74f[_0x373f06(0x1c9)]({'chat':_0x5a80a2,'ok':!![],'id':_0x3b0fbe,'when':_0x14e0ab+'\x20('+_0x27c427+')'});else _0x48d74f[_0x373f06(0x1c9)]({'chat':_0x5a80a2,'ok':![],'reason':'db_failed'});continue;}_0x48d74f['push']({'chat':_0x5a80a2,'ok':![],'reason':'unsupporte'+'d_time'});}const _0x191435=_0x48d74f[_0x373f06(0x3ae)](_0x2366be=>_0x2366be['ok']),_0xd28a97=_0x48d74f['filter'](_0x2bde7a=>!_0x2bde7a['ok']);let _0x166721='';if(_0x191435[_0x373f06(0x439)]){_0x166721+=_0x373f06(0x36a)+_0x373f06(0x215)+_0x191435['length']+(_0x373f06(0x363)+':\x0a');for(const _0x336090 of _0x191435)_0x166721+='â€¢\x20'+_0x336090[_0x373f06(0x24e)]+'\x20->\x20id:'+_0x336090['id']+_0x373f06(0x413)+_0x336090[_0x373f06(0x1a3)]+'\x0a';}if(_0xd28a97[_0x373f06(0x439)]){_0x166721+=_0x373f06(0x427)+'\x20'+_0xd28a97[_0x373f06(0x439)]+(_0x373f06(0x363)+':\x0a');for(const _0x4bbd9a of _0xd28a97)_0x166721+='â€¢\x20'+_0x4bbd9a[_0x373f06(0x24e)]+_0x373f06(0x1fe)+_0x4bbd9a['reason']+'\x0a';}await sendWithRetry(_0x44f4e2,{'text':_0x166721[_0x373f06(0x1f1)]()||_0x373f06(0x32a)+_0x373f06(0x1c3)+'.'});return;}if(_0x239f3f===_0x373f06(0x1c2)){const _0x23b0e1=[];for(const _0x2df42e of _0x371e47){const _0x2bdb99=await listSchedulesForChat(_0x2df42e);for(const _0x44740e of _0x2bdb99)_0x23b0e1[_0x373f06(0x1c9)]({'chatJid':_0x2df42e,..._0x44740e});}if(!_0x23b0e1[_0x373f06(0x439)]){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x264)+_0x373f06(0x412)+_0x373f06(0x308)+_0x373f06(0x2bb)+_0x373f06(0x381)+_0x373f06(0x3b5)});return;}let _0x1ef16f='';for(const _0x5b55e1 of _0x23b0e1){const _0x314cf2=_0x5b55e1['send_at']?DateTime['fromMillis'](Number(_0x5b55e1[_0x373f06(0x1d6)])*(-0xc27+0x2*-0xa0e+0x242b))[_0x373f06(0x331)](_0x5b55e1['timezone']||DEFAULT_TIMEZONE)['toISO']({'suppressSeconds':!![]}):_0x5b55e1[_0x373f06(0x320)]?_0x5b55e1[_0x373f06(0x320)]+'\x20('+(_0x5b55e1[_0x373f06(0x38d)]||_0x373f06(0x1ee)+'ult\x20TZ')+')':_0x373f06(0x21f),_0x1141cb=(_0x5b55e1[_0x373f06(0x219)]||'')[_0x373f06(0x289)]('\x0a')[_0x373f06(0x361)](_0x17c1fe=>_0x17c1fe[_0x373f06(0x323)]())[_0x373f06(0x239)]('\x0a'),_0x5a11bb=_0x5b55e1[_0x373f06(0x234)]+':'+_0x5b55e1['id']+'\x20when:'+_0x314cf2+_0x373f06(0x3cb)+(_0x5b55e1[_0x373f06(0x2e8)]||'daily')+_0x373f06(0x432)+(_0x5b55e1[_0x373f06(0x404)]?_0x373f06(0x312):'no')+_0x373f06(0x383)+_0x1141cb+'\x0a\x0a';(_0x1ef16f+_0x5a11bb)[_0x373f06(0x439)]>-0x2c0*-0x5+0x4be*-0x2+0x198&&(await sendWithRetry(_0x44f4e2,{'text':_0x1ef16f[_0x373f06(0x1f1)]()}),_0x1ef16f=''),_0x1ef16f+=_0x5a11bb;}if(_0x1ef16f[_0x373f06(0x1f1)]())await sendWithRetry(_0x44f4e2,{'text':_0x1ef16f[_0x373f06(0x1f1)]()});return;}if(_0x239f3f===_0x373f06(0x2ee)){const _0x527a4e=_0x40e93c['slice'](-0x3*-0x615+0x1608+-0x2845*0x1);let _0x50e560=_0x527a4e['join']('\x20');if(!_0x50e560&&_0x1bad70)_0x50e560=_0x1bad70['trim']();if(!_0x50e560){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x365)+_0x373f06(0x387)+'<number|nu'+_0x373f06(0x3d7)+_0x373f06(0x204)+_0x373f06(0x274)+_0x373f06(0x22b)});return;}if(/^\s*all\s*$/i[_0x373f06(0x3b4)](_0x50e560)){let _0x4034eb=0xc7a*-0x1+0xdef+0x1*-0x175;for(const _0x515aa0 of _0x371e47){const _0x251139=await removeAllSchedulesForChat(_0x515aa0);_0x4034eb+=_0x251139;}await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x36d)+_0x4034eb+(_0x373f06(0x2b5)+'s)\x20across\x20'+_0x373f06(0x381)+_0x373f06(0x3b5))});return;}const _0x22e25e=_0x50e560[_0x373f06(0x289)](/[\s,]+/)[_0x373f06(0x361)](_0xcf488d=>_0xcf488d[_0x373f06(0x1f1)]())[_0x373f06(0x3ae)](Boolean),_0x3db4bd=_0x22e25e['map'](_0x2f2b49=>Number(_0x2f2b49))[_0x373f06(0x3ae)](_0x3709af=>!Number[_0x373f06(0x28c)](_0x3709af)&&Number[_0x373f06(0x2fb)](_0x3709af)&&_0x3709af>0xc*0x318+-0x1*-0x1d35+-0x4255*0x1);if(!_0x3db4bd['length']){await sendWithRetry(_0x44f4e2,{'text':'No\x20valid\x20i'+'ndexes\x20pro'+'vided.\x20Usa'+_0x373f06(0x200)+_0x373f06(0x407)+_0x373f06(0x2a0)+'d\x20delete\x201'+_0x373f06(0x2f1)+_0x373f06(0x33d)+'\x20all\x20gp:<a'+_0x373f06(0x2ec)+'ll>'});return;}const _0x200397=[...new Set(_0x3db4bd)],_0x24728b=await getCombinedSchedulesForChats(_0x371e47),_0x43e0a7=[],_0x3a786f=[];for(const _0x2ad064 of _0x200397){if(_0x2ad064<0x1b00+0x4*-0x623+-0x273||_0x2ad064>_0x24728b[_0x373f06(0x439)]){_0x3a786f[_0x373f06(0x1c9)]({'n':_0x2ad064,'reason':'not\x20found'});continue;}const _0x12bb93=_0x24728b[_0x2ad064-(0x1792+0x1ddb*0x1+-0x356c)]['id'],_0x4c0d9d=await removeScheduleByDBId(_0x12bb93);if(_0x4c0d9d)_0x43e0a7[_0x373f06(0x1c9)]({'n':_0x2ad064,'id':_0x12bb93});else _0x3a786f[_0x373f06(0x1c9)]({'n':_0x2ad064,'reason':_0x373f06(0x35e)+_0x373f06(0x2b8)});}let _0xf28176='';if(_0x43e0a7[_0x373f06(0x439)])_0xf28176+=_0x373f06(0x36d)+_0x43e0a7['length']+(_0x373f06(0x2b5)+_0x373f06(0x32f))+_0x43e0a7[_0x373f06(0x361)](_0x5dc8e4=>_0x5dc8e4['n']+_0x373f06(0x1e8)+_0x5dc8e4['id']+')')[_0x373f06(0x239)](',\x20')+'.\x0a';if(_0x3a786f[_0x373f06(0x439)])_0xf28176+='Failed\x20to\x20'+'delete:\x20'+_0x3a786f[_0x373f06(0x361)](_0x1e3879=>_0x1e3879['n']+'('+_0x1e3879['reason']+')')[_0x373f06(0x239)](',\x20')+'.';await sendWithRetry(_0x44f4e2,{'text':_0xf28176[_0x373f06(0x1f1)]()||'No\x20changes'+_0x373f06(0x42d)});return;}if(_0x239f3f===_0x373f06(0x40e)){const _0x21bdce=Number(_0x40e93c[0x18d8+-0x361+-0x1575]),_0xd24c18=_0x40e93c[-0x7*-0x335+-0x2e*-0xd6+0xa26*-0x6]||(_0x1bad70?_0x1bad70[_0x373f06(0x289)](/\r?\n/)[0x2*-0xd19+-0x95c+0x7b*0x4a][_0x373f06(0x1f1)]():null);if(!_0x21bdce||!_0xd24c18){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x365)+_0x373f06(0x2fa)+_0x373f06(0x2a8)+_0x373f06(0x23f)+'ours|YYYY-'+'MM-DDTHH:m'+_0x373f06(0x26c)+_0x373f06(0x2cc)+'>'});return;}const _0x41e8ce=await getCombinedSchedulesForChats(_0x371e47);if(!_0x41e8ce||_0x41e8ce['length']<_0x21bdce){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x32a)+_0x373f06(0x327)+_0x21bdce+(_0x373f06(0x3e9)+_0x373f06(0x211)+_0x373f06(0x222)+'s.')});return;}const _0x1f24ee=_0x41e8ce[_0x21bdce-(-0x2*0x229+-0x1ea0+0x17*0x185)]['id'];if(!_0x1f24ee){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x32a)+_0x373f06(0x327)+_0x21bdce+(_0x373f06(0x3e9)+_0x373f06(0x211)+_0x373f06(0x222)+'s.')});return;}const _0x2a2916=parseTimeToken(_0xd24c18,DEFAULT_TIMEZONE);if(!_0x2a2916){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x398)+_0x373f06(0x1f9)+_0x373f06(0x1a2)});return;}if(_0x2a2916[_0x373f06(0x2e9)]==='datetime'){const _0x3114ee=_0x2a2916['dt'],_0x5b7550=Math[_0x373f06(0x2b7)](_0x3114ee[_0x373f06(0x378)]()/(-0x13c0+-0x1902+0x30aa)),_0x4a6377=await updateScheduleFields(_0x1f24ee,{'send_at':_0x5b7550,'time':null,'frequency':_0x373f06(0x338),'timezone':_0x3114ee['zoneName']||DEFAULT_TIMEZONE});if(_0x4a6377)await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x1d3)+_0x21bdce+('\x20updated\x20t'+'o\x20one-off\x20'+_0x373f06(0x3b3))+_0x3114ee[_0x373f06(0x20f)+_0x373f06(0x1e5)](DateTime[_0x373f06(0x395)+'ED'])+'\x20('+_0x3114ee[_0x373f06(0x203)]+')'});else await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x398)+_0x373f06(0x3f3)+'edule.'});return;}else{if(_0x2a2916[_0x373f06(0x2e9)]===_0x373f06(0x277)){const _0x4a0ae3=_0x2a2916[_0x373f06(0x277)],_0x2a2a86=_0x41e8ce[_0x21bdce-(-0xd3*0x2e+0x26da+-0xef)],_0x22efdc=_0x2a2a86[_0x373f06(0x38d)]||await getChatTimezone(_0x2a2a86['chat_jid'])||DEFAULT_TIMEZONE,_0xe1ef5e=await updateScheduleFields(_0x1f24ee,{'time':_0x4a0ae3,'send_at':null,'frequency':_0x373f06(0x418),'timezone':_0x22efdc});if(_0xe1ef5e)await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x1d3)+_0x21bdce+(_0x373f06(0x1ed)+_0x373f06(0x373)+_0x373f06(0x3d6))+_0x4a0ae3+'\x20('+_0x22efdc+')'});else await sendWithRetry(_0x44f4e2,{'text':'Failed\x20to\x20'+'update\x20sch'+'edule.'});return;}else{await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x3b1)+_0x373f06(0x364)+_0x373f06(0x228)+_0x373f06(0x36c)});return;}}}if(_0x239f3f===_0x373f06(0x2e8)){const _0x4e7fd0=Number(_0x40e93c[0x219a+-0x2e5*0x7+0x1*-0xd55]),_0x4f6235=Number(_0x40e93c[0x9*0x293+0x5a5*0x5+0x3361*-0x1]);if(!_0x4e7fd0||!_0x4f6235||_0x4f6235<-0x3d1+0x1d4c+-0xcbd*0x2){await sendWithRetry(_0x44f4e2,{'text':'Usage:\x20sch'+_0x373f06(0x2b3)+_0x373f06(0x252)+_0x373f06(0x27f)+_0x373f06(0x272)+_0x373f06(0x36f)+_0x373f06(0x315)+_0x373f06(0x283)+_0x373f06(0x2cc)+'>'});return;}const _0xe03478=await getCombinedSchedulesForChats(_0x371e47);if(!_0xe03478||_0xe03478[_0x373f06(0x439)]<_0x4e7fd0){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x32a)+_0x373f06(0x327)+_0x4e7fd0+(_0x373f06(0x3e9)+_0x373f06(0x211)+'ted\x20target'+'s.')});return;}const _0x3bfdc8=_0xe03478[_0x4e7fd0-(-0x2479*-0x1+-0x2173*-0x1+-0x45eb*0x1)]['id'];if(!_0x3bfdc8){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x32a)+'e\x20#'+_0x4e7fd0+('\x20found\x20acr'+_0x373f06(0x211)+_0x373f06(0x222)+'s.')});return;}let _0x473b1c=_0x373f06(0x418);if(_0x4f6235===-0x2056+-0x12*-0xdd+0x10cd)_0x473b1c='daily';else _0x473b1c=_0x373f06(0x1f7)+_0x373f06(0x343)+_0x4f6235;const _0x58ef62=await updateScheduleFields(_0x3bfdc8,{'frequency':_0x473b1c});if(_0x58ef62)await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x1d3)+_0x4e7fd0+(_0x373f06(0x2dd)+_0x373f06(0x1aa))+_0x473b1c});else await sendWithRetry(_0x44f4e2,{'text':'Failed\x20to\x20'+'update\x20fre'+_0x373f06(0x225)});return;}if(_0x239f3f===_0x373f06(0x27d)||_0x239f3f===_0x373f06(0x261)){const _0x4d9ebf=Number(_0x40e93c[-0x12*-0x141+-0x1*-0xc59+-0x22e9]);if(!_0x4d9ebf){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x365)+'ed\x20'+_0x239f3f+(_0x373f06(0x3aa)+_0x373f06(0x1c4)+_0x373f06(0x1e6))});return;}const _0x1b1d0b=await getCombinedSchedulesForChats(_0x371e47);if(!_0x1b1d0b||_0x1b1d0b[_0x373f06(0x439)]<_0x4d9ebf){await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x32a)+_0x373f06(0x327)+_0x4d9ebf+(_0x373f06(0x3e9)+_0x373f06(0x211)+_0x373f06(0x222)+'s.')});return;}const _0x396ac3=_0x1b1d0b[_0x4d9ebf-(0x50*0x1e+0x1*0x1fcf+-0x3*0xdba)]['id'];if(!_0x396ac3){await sendWithRetry(_0x44f4e2,{'text':'No\x20schedul'+_0x373f06(0x327)+_0x4d9ebf+('\x20found\x20acr'+_0x373f06(0x211)+_0x373f06(0x222)+'s.')});return;}const _0x45e52d=await updateScheduleFields(_0x396ac3,{'enabled':_0x239f3f===_0x373f06(0x261)?-0x26f1*-0x1+-0x665*-0x1+-0x2d55:-0x1*0x2465+0x1*0x18e6+0x9*0x147});if(_0x45e52d)await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x1d3)+_0x4d9ebf+'\x20'+_0x239f3f+'d.'});else await sendWithRetry(_0x44f4e2,{'text':_0x373f06(0x398)+_0x373f06(0x33b)+_0x373f06(0x32e)+'.'});return;}await sendWithRetry(_0x44f4e2,{'text':USAGE});}catch(_0x572e9f){warn(_0x373f06(0x213)+_0x373f06(0x2c6)+'ommandPM\x20e'+'rror:\x20'+(_0x572e9f?.[_0x373f06(0x219)]||_0x572e9f));}}export async function initialize(_0x4814e5){const _0x4cdf21=_0xdc7108;if(!_0x4814e5)throw new Error(_0x4cdf21(0x2c4)+_0x4cdf21(0x401)+_0x4cdf21(0x281)+_0x4cdf21(0x1cb));setupSendApi(_0x4814e5),refreshConfig();try{await ensureSchema();}catch(_0x238ff7){error(_0x4cdf21(0x214)+'\x20ensure\x20fa'+_0x4cdf21(0x3a0)+(_0x238ff7?.[_0x4cdf21(0x219)]||_0x238ff7));throw _0x238ff7;}try{startManagedListener({'botRef':_0x4814e5,'eventName':_0x4cdf21(0x27b)+_0x4cdf21(0x334),'handler':_0x76de7=>{const _0x5033ed=_0x4cdf21;try{info(_0x5033ed(0x32b)+_0x5033ed(0x238)+'pdate\x20obse'+_0x5033ed(0x230)+_0x5033ed(0x1d4)+'Api\x20(manag'+'ed\x20listene'+'r)'),setupSendApi(_0x4814e5);}catch(_0x55c927){warn(_0x5033ed(0x32b)+_0x5033ed(0x238)+_0x5033ed(0x40c)+'ler\x20error:'+'\x20'+(_0x55c927?.[_0x5033ed(0x219)]||_0x55c927));}},'moduleName':name});}catch(_0x4e279b){warn(_0x4cdf21(0x41c)+'iled\x20to\x20re'+_0x4cdf21(0x1c6)+'aged\x20conne'+_0x4cdf21(0x3d2)+_0x4cdf21(0x26f)+_0x4cdf21(0x354)+(_0x4e279b?.[_0x4cdf21(0x219)]||_0x4e279b));}startSchedulerAligned(),info(_0x4cdf21(0x1b6)+'itialized\x20'+'(listenerM'+_0x4cdf21(0x2e0)+_0x4cdf21(0x437)+_0x4cdf21(0x1cd)+_0x4cdf21(0x400));}export async function cleanup(){const _0x571839=_0xdc7108;try{stopScheduler();try{stopManagedListener(name,_0x571839(0x27b)+_0x571839(0x334));}catch(_0x40667e){}}catch(_0x46eb84){warn(_0x571839(0x1bc)+_0x571839(0x3eb)+_0x571839(0x354)+(_0x46eb84?.[_0x571839(0x219)]||_0x46eb84));}finally{botRef=null,sendApi=null,info('[sched]\x20cl'+_0x571839(0x19d));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};