const _0x53cd54=_0x5884;(function(_0x201601,_0x29eb5e){const _0x5bc6ae=_0x5884,_0x21e187=_0x201601();while(!![]){try{const _0x2fe184=parseInt(_0x5bc6ae(0x276))/(-0x2*-0x2e3+0xe01+-0x13c6*0x1)*(-parseInt(_0x5bc6ae(0x168))/(0x59*-0x57+0x19f*0x10+-0x1*-0x451))+-parseInt(_0x5bc6ae(0x248))/(0x1910+-0x5*0x6ca+0x63*0x17)+parseInt(_0x5bc6ae(0x3e8))/(-0xbab+-0x156+-0x457*-0x3)*(parseInt(_0x5bc6ae(0x247))/(0x1a27*-0x1+-0xb5+0x1ae1))+-parseInt(_0x5bc6ae(0x32e))/(-0x1*0x1efd+-0x6bf*-0x1+-0xc22*-0x2)+parseInt(_0x5bc6ae(0x375))/(0x11ab*0x1+-0xc9+-0x10db)*(-parseInt(_0x5bc6ae(0x2e2))/(-0x63b*0x5+0xb80+-0x13af*-0x1))+parseInt(_0x5bc6ae(0x162))/(-0x10*0x242+-0x26a9*-0x1+-0x2*0x140)+parseInt(_0x5bc6ae(0x224))/(-0x3*-0x56d+-0xcb9+-0x384);if(_0x2fe184===_0x29eb5e)break;else _0x21e187['push'](_0x21e187['shift']());}catch(_0x3da533){_0x21e187['push'](_0x21e187['shift']());}}}(_0x22f2,-0xb80*0x89+0x5deb*0xd+0x5d517*0x1));import{DateTime}from'luxon';import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';import*as _0x4ea29d from'../utils/groups.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import{startManagedListener,stopManagedListener}from'../utils/listenerManager.js';export const name='sched';export const version=_0x53cd54(0x33b);export const priority=-0x97*-0x39+-0xb19*0x2+-0xb18;export const commands=[_0x53cd54(0x1d3),_0x53cd54(0x166)];export const configKeys=[_0x53cd54(0x252)+_0x53cd54(0x363)+_0x53cd54(0x3e3),_0x53cd54(0x208)+_0x53cd54(0x3a2)+'NE','SCHED_SEND'+_0x53cd54(0x3bd),_0x53cd54(0x2bd)+_0x53cd54(0x328)+_0x53cd54(0x342)];let botRef=null,sendApi=null,schedulerIntervalHandle=null,executorRunning=![],CHECK_INTERVAL_MS=(-0xde+0xc32+-0xb18)*(0x20ec+-0x3ff+0x15*-0x131),DEFAULT_TIMEZONE='Africa/Nai'+_0x53cd54(0x394),SEND_RETRIES=0x1707+-0x3f*-0x7b+-0x3549*0x1,INITIAL_BACKOFF_MS=0x2087*-0x1+0x7b*-0x5+0x1*0x24e2;function ensureArray(_0x5bea0c){const _0x4531ae=_0x53cd54;if(!_0x5bea0c)return[];if(Array[_0x4531ae(0x289)](_0x5bea0c))return _0x5bea0c;return[_0x5bea0c];}function uniqArray(_0x4aeb98){const _0x320ff5=_0x53cd54,_0x5a1d32=new Set(),_0x3ecb25=[];for(const _0x536ba7 of _0x4aeb98||[]){const _0x3fdd74=String(_0x536ba7||'')[_0x320ff5(0x2e7)]();if(!_0x3fdd74)continue;!_0x5a1d32[_0x320ff5(0x262)](_0x3fdd74)&&(_0x5a1d32[_0x320ff5(0x3cc)](_0x3fdd74),_0x3ecb25['push'](_0x3fdd74));}return _0x3ecb25;}async function tableExists(_0x28aab6){const _0x18d576=_0x53cd54;try{const _0x82b1e2=await db['get'](_0x18d576(0x3cf)+_0x18d576(0x22d)+_0x18d576(0x1e7)+_0x18d576(0x3a5)+'e=\x27table\x27\x20'+'AND\x20name=?',[_0x28aab6]);return!!_0x82b1e2;}catch(_0x828b38){return warn(_0x18d576(0x258)+'bleExists\x20'+_0x18d576(0x3d0)+(_0x828b38?.['message']||_0x828b38)),![];}}async function getTableColumns(_0x21e5ae){const _0x349589=_0x53cd54;try{const _0x5ed2b2=await db[_0x349589(0x3d5)]('PRAGMA\x20tab'+'le_info('+_0x21e5ae+')');return(_0x5ed2b2||[])[_0x349589(0x3b4)](_0x38876b=>_0x38876b[_0x349589(0x195)]);}catch(_0x9d8b36){return warn(_0x349589(0x214)+'tTableColu'+_0x349589(0x20a)+'for\x20'+_0x21e5ae+':\x20'+(_0x9d8b36?.[_0x349589(0x1ec)]||_0x9d8b36)),[];}}function resolveChatJidFromRow(_0xb31878){const _0x4ed11f=_0x53cd54,_0x354f0f=[_0x4ed11f(0x2e3),'chatid','chat_id',_0x4ed11f(0x31f),'chat','room','target_jid'];for(const _0x3309bd of _0x354f0f)if(_0x3309bd in _0xb31878&&_0xb31878[_0x3309bd])return String(_0xb31878[_0x3309bd]);for(const _0x549f1f of Object['keys'](_0xb31878)){const _0x5ee4e0=_0xb31878[_0x549f1f];if(typeof _0x5ee4e0==='string'&&_0x5ee4e0['includes']('@'))return _0x5ee4e0;}return null;}function resolveMessageFromRow(_0x3baa66){const _0x46e12b=_0x53cd54,_0x5bf732=[_0x46e12b(0x1ec),_0x46e12b(0x2de),_0x46e12b(0x228),_0x46e12b(0x387),_0x46e12b(0x320)];for(const _0x2608ad of _0x5bf732)if(_0x2608ad in _0x3baa66&&_0x3baa66[_0x2608ad]!=null)return String(_0x3baa66[_0x2608ad]);for(const _0x566737 of Object['keys'](_0x3baa66)){if(typeof _0x3baa66[_0x566737]===_0x46e12b(0x31e)&&_0x3baa66[_0x566737][_0x46e12b(0x2ad)]>0x9d7+0x26d8+-0x67*0x79&&!_0x3baa66[_0x566737][_0x46e12b(0x353)]('@'))return _0x3baa66[_0x566737];}return'';}function resolveWhenFromRow(_0x55da46){const _0x1b8671=_0x53cd54,_0x3ada76=[_0x1b8671(0x18f),'sendAt',_0x1b8671(0x29f),'send',_0x1b8671(0x1ad),'ts',_0x1b8671(0x192)];for(const _0x2afedd of _0x3ada76){if(_0x2afedd in _0x55da46&&_0x55da46[_0x2afedd]){const _0x1b2695=Number(_0x55da46[_0x2afedd]);if(!Number['isNaN'](_0x1b2695)&&_0x1b2695>0x2d308a50*-0x1+-0xe21*-0x416e2+0x2f04052e)return{'send_at':_0x1b2695};}}const _0x217e83=[_0x1b8671(0x311),_0x1b8671(0x302),_0x1b8671(0x2b4)+_0x1b8671(0x3d9),_0x1b8671(0x2ba)+'time'];for(const _0xcfd319 of _0x217e83){if(_0xcfd319 in _0x55da46&&_0x55da46[_0xcfd319]){const _0x297047=String(_0x55da46[_0xcfd319])[_0x1b8671(0x2e7)]();if(/^\d{1,2}:\d{2}$/[_0x1b8671(0x2c3)](_0x297047))return{'time':_0x297047};}}return{'time':null,'send_at':null};}async function readAndNormalizeExistingSchedules(){const _0x10d030=_0x53cd54;try{const _0x561dda=await db[_0x10d030(0x3d5)](_0x10d030(0x2b3)+_0x10d030(0x204)+'les'),_0x1f91fe=[];for(const _0x5f32d6 of _0x561dda||[]){const _0x20ef17=resolveChatJidFromRow(_0x5f32d6)||'',_0x8edafd=resolveMessageFromRow(_0x5f32d6)||'',_0x3eb517=resolveWhenFromRow(_0x5f32d6)||{};let _0x5ac43b=_0x5f32d6[_0x10d030(0x178)]||_0x5f32d6[_0x10d030(0x19d)]||_0x5f32d6[_0x10d030(0x2b7)]||_0x5f32d6['recurrence']||_0x10d030(0x220);if(typeof _0x5ac43b==='number')_0x5ac43b=_0x10d030(0x322)+_0x10d030(0x3dd)+_0x5ac43b;const _0xb1add3=_0x5f32d6[_0x10d030(0x333)]||_0x5f32d6['tz']||null,_0x33d3b9=_0x5f32d6['creator_ji'+'d']||_0x5f32d6['created_by']||_0x5f32d6['author']||_0x5f32d6['creator']||'';let _0x1c0356=Number(_0x5f32d6['created_at']||_0x5f32d6['ts']||_0x5f32d6[_0x10d030(0x1ad)]||0x1*-0x883+0x7dd+0x2*0x53);if(!_0x1c0356)_0x1c0356=Math[_0x10d030(0x1a6)](Date[_0x10d030(0x245)]()/(0x1025+-0x85e+-0x3df));_0x1f91fe[_0x10d030(0x2b5)]({'chat_jid':_0x20ef17,'message':_0x8edafd,'time':_0x3eb517[_0x10d030(0x311)]||null,'send_at':_0x3eb517['send_at']||null,'frequency':_0x5ac43b||'daily','timezone':_0xb1add3,'last_sent':Number(_0x5f32d6[_0x10d030(0x335)]||_0x5f32d6['sent_at']||-0x4bb*0x2+0x23*-0x27+0x7*0x21d)||-0x9e9+-0xacf+0x14b8,'creator_jid':_0x33d3b9||'','created_at':_0x1c0356});}return _0x1f91fe;}catch(_0x37818e){return warn(_0x10d030(0x186)+'adAndNorma'+_0x10d030(0x1a4)+_0x10d030(0x3c6)+'s\x20failed:\x20'+(_0x37818e?.[_0x10d030(0x1ec)]||_0x37818e)),[];}}async function ensureSchema(){const _0xed8961=_0x53cd54,_0x1312f9={'id':_0xed8961(0x279)+'IMARY\x20KEY\x20'+_0xed8961(0x3a9)+_0xed8961(0x39a),'chat_jid':_0xed8961(0x2a7)+_0xed8961(0x29a),'message':'TEXT\x20NOT\x20N'+_0xed8961(0x29a),'time':_0xed8961(0x1eb),'send_at':'INTEGER','frequency':'TEXT\x20DEFAU'+_0xed8961(0x372),'timezone':_0xed8961(0x1eb),'last_sent':_0xed8961(0x2c2),'creator_jid':_0xed8961(0x2a7)+_0xed8961(0x29a),'enabled':_0xed8961(0x1b2)+_0xed8961(0x2db),'created_at':_0xed8961(0x1b2)+'FAULT\x20(str'+_0xed8961(0x3b1)+_0xed8961(0x354)};try{const _0x118378=await tableExists(_0xed8961(0x1da));if(!_0x118378){const _0xe4aea8=Object[_0xed8961(0x218)](_0x1312f9)[_0xed8961(0x3b4)](([_0x5bfd40,_0x902353])=>_0x5bfd40+'\x20'+_0x902353)[_0xed8961(0x2b0)](',\x0a\x20\x20');await db['exec']('CREATE\x20TAB'+'LE\x20schedul'+_0xed8961(0x313)+_0xe4aea8+_0xed8961(0x161));try{await db['exec'](_0xed8961(0x160)+_0xed8961(0x15f)+_0xed8961(0x390)+_0xed8961(0x28c)+_0xed8961(0x286)+_0xed8961(0x2f3)+_0xed8961(0x369));}catch(_0x55c621){}info(_0xed8961(0x180)+_0xed8961(0x380)+_0xed8961(0x3b9)+_0xed8961(0x169)+'e'),await db['exec'](_0xed8961(0x17d)+_0xed8961(0x190)+_0xed8961(0x1c0)+_0xed8961(0x32c)+_0xed8961(0x1de)+_0xed8961(0x184)+_0xed8961(0x1c6)+'t_jid\x20TEXT'+_0xed8961(0x2f9)+'EY,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20enable'+_0xed8961(0x269)+_0xed8961(0x30f)+_0xed8961(0x3e1)+_0xed8961(0x2aa)+_0xed8961(0x157)+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'\x20\x20');return;}const _0x5cc8ec=await getTableColumns(_0xed8961(0x1da)),_0x186a07=_0x5cc8ec[_0xed8961(0x353)](_0xed8961(0x2e3)),_0x12836c=_0x5cc8ec[_0xed8961(0x353)]('message')||_0x5cc8ec[_0xed8961(0x353)](_0xed8961(0x2de))||_0x5cc8ec['includes'](_0xed8961(0x387))||_0x5cc8ec[_0xed8961(0x353)](_0xed8961(0x228)),_0x1f8410=_0x5cc8ec[_0xed8961(0x353)](_0xed8961(0x1e0)+'d')||_0x5cc8ec['includes'](_0xed8961(0x3ec))||_0x5cc8ec[_0xed8961(0x353)](_0xed8961(0x32f));if(_0x186a07&&_0x12836c&&_0x1f8410){try{await db[_0xed8961(0x291)](_0xed8961(0x160)+'EX\x20IF\x20NOT\x20'+_0xed8961(0x390)+_0xed8961(0x28c)+_0xed8961(0x286)+_0xed8961(0x2f3)+_0xed8961(0x369));}catch(_0x1756b1){}await db['exec'](_0xed8961(0x17d)+_0xed8961(0x190)+_0xed8961(0x1c0)+_0xed8961(0x32c)+_0xed8961(0x1de)+'ings\x20(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cha'+_0xed8961(0x349)+_0xed8961(0x2f9)+_0xed8961(0x346)+'\x20\x20\x20\x20enable'+_0xed8961(0x269)+'DEFAULT\x201,'+_0xed8961(0x3e1)+_0xed8961(0x2aa)+_0xed8961(0x157)+_0xed8961(0x174)+'\x20\x20'),info(_0xed8961(0x280)+'hedules\x20ta'+_0xed8961(0x1a7)+'s\x20canonica'+'l/adequate');return;}info(_0xed8961(0x212)+_0xed8961(0x26f)+'ules\x20detec'+_0xed8961(0x27b)+_0xed8961(0x379)+'ly');const _0x330828=await readAndNormalizeExistingSchedules();await db['exec'](_0xed8961(0x1d8)+_0xed8961(0x2b9)+_0xed8961(0x3df));try{await db[_0xed8961(0x291)](_0xed8961(0x159)+_0xed8961(0x340)+_0xed8961(0x23d)+_0xed8961(0x244)+_0xed8961(0x2c1)+'\x20id\x20INTEGE'+_0xed8961(0x200)+_0xed8961(0x261)+_0xed8961(0x35d)+_0xed8961(0x1c6)+_0xed8961(0x349)+_0xed8961(0x16b)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'essage\x20TEX'+'T\x20NOT\x20NULL'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0xed8961(0x27a)+_0xed8961(0x3a0)+_0xed8961(0x2ee)+_0xed8961(0x23b)+_0xed8961(0x1e9)+'ncy\x20TEXT\x20D'+_0xed8961(0x3c5)+_0xed8961(0x3d6)+_0xed8961(0x337)+_0xed8961(0x1d9)+_0xed8961(0x1bc)+_0xed8961(0x324)+_0xed8961(0x23b)+_0xed8961(0x1a9)+'r_jid\x20TEXT'+'\x20NOT\x20NULL,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20e'+_0xed8961(0x2cf)+'EGER\x20DEFAU'+_0xed8961(0x33d)+_0xed8961(0x1a1)+_0xed8961(0x1f7)+'ER\x20DEFAULT'+_0xed8961(0x2f0)+'(\x27%s\x27,\x27now'+_0xed8961(0x23a)+');');}catch(_0x4e1781){await db[_0xed8961(0x291)]('CREATE\x20TAB'+'LE\x20IF\x20NOT\x20'+_0xed8961(0x23d)+_0xed8961(0x244)+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+_0xed8961(0x187)+_0xed8961(0x200)+_0xed8961(0x261)+_0xed8961(0x35d)+_0xed8961(0x1c6)+_0xed8961(0x349)+_0xed8961(0x16b)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+_0xed8961(0x23e)+'T\x20NOT\x20NULL'+_0xed8961(0x2ce)+_0xed8961(0x27a)+_0xed8961(0x3a0)+'end_at\x20INT'+'EGER,\x0a\x20\x20\x20\x20'+_0xed8961(0x1e9)+'ncy\x20TEXT,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'mezone\x20TEX'+_0xed8961(0x30c)+_0xed8961(0x1af)+_0xed8961(0x25a)+_0xed8961(0x257)+'eator_jid\x20'+_0xed8961(0x2a7)+_0xed8961(0x2bb)+_0xed8961(0x165)+'\x20INTEGER,\x0a'+_0xed8961(0x257)+_0xed8961(0x1d5)+_0xed8961(0x327)+_0xed8961(0x21f)),warn('[sched]\x20cr'+_0xed8961(0x391)+'dules_new\x20'+_0xed8961(0x3de)+'faults\x20as\x20'+'fallback');}const _0x4d3198=await db[_0xed8961(0x315)](_0xed8961(0x242)+'O\x20schedule'+_0xed8961(0x15d)+_0xed8961(0x22b)+_0xed8961(0x1d1)+',\x20send_at,'+_0xed8961(0x1cd)+',\x20timezone'+_0xed8961(0x314)+_0xed8961(0x301)+_0xed8961(0x1fe)+_0xed8961(0x263)+_0xed8961(0x2c8)+'UES\x20(?,\x20?,'+'\x20?,\x20?,\x20?,\x20'+'?,\x20?,\x20?,\x20?'+_0xed8961(0x2a8));try{for(const _0x3e614d of _0x330828){try{await _0x4d3198['run'](_0x3e614d['chat_jid']||'',_0x3e614d[_0xed8961(0x1ec)]||'',_0x3e614d['time']||null,_0x3e614d[_0xed8961(0x18f)]||null,_0x3e614d[_0xed8961(0x178)]||'daily',_0x3e614d[_0xed8961(0x333)]||null,_0x3e614d[_0xed8961(0x335)]||-0x1d04*0x1+-0x51*-0x27+0x10ad,_0x3e614d[_0xed8961(0x1e0)+'d']||'',-0x1328+0x11fc+-0x7*-0x2b,_0x3e614d[_0xed8961(0x360)]||Math['floor'](Date[_0xed8961(0x245)]()/(-0x2*-0x51b+-0x899*0x2+0xae4)));}catch(_0x1ddeb8){warn('[sched]\x20ca'+_0xed8961(0x182)+'t\x20normaliz'+_0xed8961(0x3d7)+_0xed8961(0x389)+_0x3e614d['chat_jid']+':\x20'+(_0x1ddeb8?.['message']||_0x1ddeb8));}}}finally{try{await _0x4d3198[_0xed8961(0x3ee)]();}catch(_0x95b985){}}try{const _0x47e654='schedules_'+_0xed8961(0x256)+Math['floor'](Date['now']()/(-0x206a+0x2*-0xea2+0x5*0xd1e));await db[_0xed8961(0x291)](_0xed8961(0x3b8)+_0xed8961(0x309)+_0xed8961(0x2da)+'O\x20'+_0x47e654+';'),await db[_0xed8961(0x291)](_0xed8961(0x3b8)+'E\x20schedule'+_0xed8961(0x33f)+_0xed8961(0x350)+'dules;');try{await db[_0xed8961(0x291)](_0xed8961(0x160)+_0xed8961(0x15f)+_0xed8961(0x390)+_0xed8961(0x28c)+'_chat\x20ON\x20s'+_0xed8961(0x2f3)+'hat_jid);');}catch(_0x1fc490){}info(_0xed8961(0x3ef)+_0xed8961(0x197)+'ne;\x20old\x20ta'+_0xed8961(0x319)+_0xed8961(0x1ce)+'p');}catch(_0x58abeb){warn(_0xed8961(0x341)+_0xed8961(0x295)+'failed:\x20'+(_0x58abeb?.[_0xed8961(0x1ec)]||_0x58abeb));throw _0x58abeb;}finally{await db[_0xed8961(0x291)](_0xed8961(0x1d8)+_0xed8961(0x2b9)+_0xed8961(0x271));}await db[_0xed8961(0x291)](_0xed8961(0x34d)+_0xed8961(0x2ae)+_0xed8961(0x3db)+_0xed8961(0x2cd)+_0xed8961(0x1aa)+_0xed8961(0x1db)+_0xed8961(0x38e)+_0xed8961(0x1a3)+_0xed8961(0x158)+_0xed8961(0x253)+_0xed8961(0x3c7)+'GER\x20DEFAUL'+_0xed8961(0x1f0)+_0xed8961(0x17c)+_0xed8961(0x1cb)+_0xed8961(0x174));}catch(_0x50b3cb){error(_0x50b3cb,_0xed8961(0x2eb)+_0xed8961(0x164)+_0xed8961(0x3ea));throw _0x50b3cb;}}function refreshConfig(){const _0x21cf65=_0x53cd54;try{const _0x19439a=getConfig()||{};CHECK_INTERVAL_MS=Number(_0x19439a[_0x21cf65(0x252)+_0x21cf65(0x363)+_0x21cf65(0x3e3)]??CHECK_INTERVAL_MS),DEFAULT_TIMEZONE=_0x19439a['SCHED_DEFA'+'ULT_TIMEZO'+'NE']||DEFAULT_TIMEZONE,SEND_RETRIES=Number(_0x19439a[_0x21cf65(0x323)+'_RETRIES']??SEND_RETRIES),INITIAL_BACKOFF_MS=Number(_0x19439a[_0x21cf65(0x2bd)+_0x21cf65(0x328)+_0x21cf65(0x342)]??INITIAL_BACKOFF_MS),info(_0x21cf65(0x19b)+_0x21cf65(0x2fe)+_0x21cf65(0x376)+_0x21cf65(0x293)+CHECK_INTERVAL_MS+(_0x21cf65(0x172)+_0x21cf65(0x37a))+DEFAULT_TIMEZONE);}catch(_0x2aeb2a){warn(_0x21cf65(0x186)+_0x21cf65(0x237)+_0x21cf65(0x336)+(_0x2aeb2a?.['message']||_0x2aeb2a));}}try{typeof hotReloadConfig===_0x53cd54(0x15c)&&hotReloadConfig((_0x546a98=[])=>{const _0x42577d=_0x53cd54;try{refreshConfig();}catch(_0x17f9ff){warn('[sched]\x20ho'+_0x42577d(0x2b1)+_0x42577d(0x2d2)+_0x42577d(0x2e1)+(_0x17f9ff?.[_0x42577d(0x1ec)]||_0x17f9ff));}});}catch(_0x570d34){warn(_0x53cd54(0x31c)+'tReloadCon'+'fig\x20regist'+_0x53cd54(0x285)+_0x53cd54(0x235)+(_0x570d34?.[_0x53cd54(0x1ec)]||_0x570d34));}refreshConfig();function tryBuildSendApiFromBot(_0x32230d){const _0x3855a2=_0x53cd54;if(!_0x32230d)return null;if(typeof _0x32230d[_0x3855a2(0x297)+'e']===_0x3855a2(0x15c))return async(_0x3fe755,_0x131e0f)=>_0x32230d[_0x3855a2(0x297)+'e'](_0x3fe755,_0x131e0f);else{if(_0x32230d[_0x3855a2(0x283)]&&typeof _0x32230d['sock']['sendMessag'+'e']===_0x3855a2(0x15c))return async(_0x535746,_0x140cde)=>_0x32230d['sock'][_0x3855a2(0x297)+'e'](_0x535746,_0x140cde);}return null;}function setupSendApi(_0x15602e){const _0x4a2e1b=_0x53cd54;botRef=_0x15602e,sendApi=tryBuildSendApiFromBot(botRef),info(_0x4a2e1b(0x378)+_0x4a2e1b(0x345)+_0x4a2e1b(0x2b2)+_0x4a2e1b(0x3eb)+(sendApi?_0x4a2e1b(0x1e1):_0x4a2e1b(0x2d8)+_0x4a2e1b(0x2c0)));}async function sendWithRetry(_0x59608b,_0x396cde){const _0x527aed=_0x53cd54,_0x382e9c=Number(SEND_RETRIES||-0x201*0x2+0xb2b+-0x131*0x6);let _0x325932=-0xe8c+-0x1fb4+0x2e40,_0xdc705c=Number(INITIAL_BACKOFF_MS||0x1*-0x1a03+-0x1de+-0x1dd5*-0x1);while(_0x325932<_0x382e9c){try{const _0x4c5a76=_0x59608b||null;if(!_0x4c5a76)throw new Error(_0x527aed(0x31a)+_0x527aed(0x347)+_0x527aed(0x3c0)+'icit\x20targe'+_0x527aed(0x229)+')');if(typeof sendApi===_0x527aed(0x15c))return await sendApi(_0x4c5a76,_0x396cde),!![];if(botRef&&typeof botRef[_0x527aed(0x297)+'e']===_0x527aed(0x15c))return await botRef[_0x527aed(0x297)+'e'](_0x4c5a76,_0x396cde),!![];if(botRef&&botRef[_0x527aed(0x283)]&&typeof botRef[_0x527aed(0x283)]['sendMessag'+'e']===_0x527aed(0x15c))return await botRef[_0x527aed(0x283)][_0x527aed(0x297)+'e'](_0x4c5a76,_0x396cde),!![];throw new Error('no\x20sendApi'+'\x20available');}catch(_0x27c4e8){_0x325932++;const _0xe0760f=String(_0x27c4e8?.['message']||'')[_0x527aed(0x16d)+'e']()[_0x527aed(0x353)](_0x527aed(0x2a4))||_0x27c4e8?.[_0x527aed(0x25f)]===-0x2c0+-0x726+0xb93;warn('[sched]\x20se'+_0x527aed(0x2c4)+'\x20'+_0x325932+_0x527aed(0x24f)+(_0x27c4e8?.['message']||_0x27c4e8));if(_0x325932>=_0x382e9c||!_0xe0760f)return![];await new Promise(_0x3dd4b4=>setTimeout(_0x3dd4b4,_0xdc705c)),_0xdc705c*=-0xace+0x481*-0x5+0x2155;try{setupSendApi(botRef);}catch(_0x1749ed){}}}return![];}function parseTimeToken(_0x186848,_0x154e72=DEFAULT_TIMEZONE){const _0x2f3390=_0x53cd54;if(!_0x186848||typeof _0x186848!==_0x2f3390(0x31e))return null;const _0x2fc7e3=_0x186848[_0x2f3390(0x2e7)](),_0x45977f=_0x2fc7e3[_0x2f3390(0x1b3)](/^in\s+(\d+)\s*(minute|min|minutes|m|hour|hours|hr|h|day|days|d)$/i);if(_0x45977f){const _0xc2f3f5=Number(_0x45977f[-0x9aa+0x1*-0x18aa+0x2255]),_0x9d9842=_0x45977f[-0x11*-0x6+0xa12+0xce*-0xd][_0x2f3390(0x16d)+'e']();let _0x3f40a9=DateTime['now']()[_0x2f3390(0x352)](_0x154e72);if(_0x9d9842[_0x2f3390(0x238)](_0x2f3390(0x1c9))||_0x9d9842==='m')_0x3f40a9=_0x3f40a9[_0x2f3390(0x2fc)]({'minutes':_0xc2f3f5});else{if(_0x9d9842[_0x2f3390(0x238)]('h')||_0x9d9842[_0x2f3390(0x238)]('hr'))_0x3f40a9=_0x3f40a9[_0x2f3390(0x2fc)]({'hours':_0xc2f3f5});else{if(_0x9d9842[_0x2f3390(0x238)]('d'))_0x3f40a9=_0x3f40a9[_0x2f3390(0x2fc)]({'days':_0xc2f3f5});}}if(_0x3f40a9[_0x2f3390(0x2fd)])return{'type':_0x2f3390(0x176),'dt':_0x3f40a9};}if(/^\d{4}-\d{2}-\d{2}[ T]\d{1,2}:\d{2}$/['test'](_0x2fc7e3)){const _0x16cf58=_0x2fc7e3[_0x2f3390(0x329)]('\x20','T'),_0x410e25=DateTime['fromISO'](_0x16cf58,{'zone':_0x154e72});if(_0x410e25['isValid'])return{'type':_0x2f3390(0x176),'dt':_0x410e25};}if(/^\d{1,2}:\d{2}$/[_0x2f3390(0x2c3)](_0x2fc7e3)){const [_0x35bb22,_0x14f2cb]=_0x2fc7e3[_0x2f3390(0x25e)](':')[_0x2f3390(0x3b4)](Number);if(Number[_0x2f3390(0x2ff)](_0x35bb22)&&Number[_0x2f3390(0x2ff)](_0x14f2cb)&&_0x35bb22>=-0x11b7+0x685+0xb32&&_0x35bb22<=-0x2*-0x58f+-0x131*-0x1+-0xc38&&_0x14f2cb>=0x11*-0x14b+0x10a9*-0x2+0x374d&&_0x14f2cb<=-0xd7+-0x97*0x1+0x1a9)return{'type':_0x2f3390(0x302),'hhmm':String(_0x35bb22)[_0x2f3390(0x325)](-0x12*0x1cf+0x5d4+0x1abc,'0')+':'+String(_0x14f2cb)[_0x2f3390(0x325)](-0x857+-0x789+0xfe2,'0')};}return null;}function shouldSendSlot(_0x4fc669,_0x49c9ae){const _0x4ee4d5=_0x53cd54,_0x2a001b=_0x4fc669[_0x4ee4d5(0x178)]||_0x4ee4d5(0x220),_0x1c6e92=_0x4fc669[_0x4ee4d5(0x335)]||-0x1*0x82f+-0xdb*-0x17+0x5bf*-0x2,_0x488849=_0x1c6e92?DateTime[_0x4ee4d5(0x1bb)](_0x1c6e92*(-0xf5*0xa+0x22*-0x22+0x8ff*0x2))[_0x4ee4d5(0x352)](_0x49c9ae[_0x4ee4d5(0x251)]):null;if(!_0x488849)return!![];if(_0x2a001b===_0x4ee4d5(0x220))return!_0x488849[_0x4ee4d5(0x2ed)](_0x49c9ae,_0x4ee4d5(0x397));if(_0x2a001b===_0x4ee4d5(0x2d9))return _0x49c9ae['diff'](_0x488849,_0x4ee4d5(0x194))[_0x4ee4d5(0x194)]>=0x5*-0x13d+-0x1f94+-0x52*-0x76;if(_0x2a001b['startsWith'](_0x4ee4d5(0x322)+_0x4ee4d5(0x3dd))){const _0x462831=parseInt(_0x2a001b[_0x4ee4d5(0x25e)](':')[-0x1*-0x159e+0x1936+-0x2ed3*0x1],0x1f1d+0x149f+-0x33b2);if(isNaN(_0x462831)||_0x462831<-0x734+0x1*0x127e+-0xb49)return![];return _0x49c9ae[_0x4ee4d5(0x26c)](_0x488849,_0x4ee4d5(0x194))['days']>=_0x462831;}if(_0x2a001b['startsWith']('days_of_we'+'ek:')){const _0x1a3278=_0x2a001b[_0x4ee4d5(0x25e)](':')[0x423+0x175*0x17+-0x25a5][_0x4ee4d5(0x25e)](',')['map'](_0x5d7012=>parseInt(_0x5d7012,-0x3f*0x4d+-0x5b*0x4d+0x2e5c))[_0x4ee4d5(0x392)](Boolean);return _0x1a3278['includes'](_0x49c9ae[_0x4ee4d5(0x272)])&&!_0x488849['hasSame'](_0x49c9ae,'day');}if(_0x2a001b['startsWith'](_0x4ee4d5(0x20d)+'th:')){const _0x479d0f=parseInt(_0x2a001b[_0x4ee4d5(0x25e)](':')[0x1bb*0x1+0x1e9a+0x815*-0x4],0x1*0xb87+0x15f*-0x16+-0x12ad*-0x1);return _0x49c9ae[_0x4ee4d5(0x397)]===_0x479d0f&&!_0x488849['hasSame'](_0x49c9ae,_0x4ee4d5(0x397));}return![];}async function addScheduleRow(_0x58d919){const _0xf1e058=_0x53cd54;try{const _0x392f3c=await db[_0xf1e058(0x213)](_0xf1e058(0x242)+_0xf1e058(0x275)+_0xf1e058(0x2df)+_0xf1e058(0x1a5)+_0xf1e058(0x1ae)+_0xf1e058(0x1f8)+_0xf1e058(0x2af)+'mezone,\x20cr'+'eator_jid)'+'\x0a\x20\x20\x20\x20\x20\x20\x20VA'+_0xf1e058(0x25d)+_0xf1e058(0x3e0)+_0xf1e058(0x3f0),[_0x58d919[_0xf1e058(0x2e3)],_0x58d919[_0xf1e058(0x1ec)],_0x58d919['time'],_0x58d919[_0xf1e058(0x18f)],_0x58d919[_0xf1e058(0x178)]||_0xf1e058(0x220),_0x58d919[_0xf1e058(0x333)]||null,_0x58d919[_0xf1e058(0x1e0)+'d']]),_0x20a529=_0x392f3c?.['lastID']||null;return info(_0xf1e058(0x2ea)+_0xf1e058(0x268)+'le\x20id='+_0x20a529+_0xf1e058(0x37b)+_0x58d919['chat_jid']+_0xf1e058(0x39e)+(_0x58d919['time']||_0x58d919['send_at'])),_0x20a529;}catch(_0x4441c9){return warn(_0xf1e058(0x2ea)+_0xf1e058(0x205)+_0xf1e058(0x2fa)+(_0x4441c9?.[_0xf1e058(0x1ec)]||_0x4441c9)),null;}}async function listSchedulesForChat(_0x18f455){const _0xabebf6=_0x53cd54;try{const _0x3e3e9d=await db[_0xabebf6(0x3d5)](_0xabebf6(0x2b3)+_0xabebf6(0x204)+_0xabebf6(0x37c)+_0xabebf6(0x300)+_0xabebf6(0x3e2)+_0xabebf6(0x277),[_0x18f455]);return _0x3e3e9d||[];}catch(_0x128a50){return warn('[sched]\x20li'+_0xabebf6(0x202)+_0xabebf6(0x310)+_0xabebf6(0x1fc)+(_0x128a50?.['message']||_0x128a50)),[];}}async function removeScheduleByDBId(_0x35a442){const _0x40f4fe=_0x53cd54;try{const _0x785701=await db[_0x40f4fe(0x213)]('DELETE\x20FRO'+_0x40f4fe(0x298)+'s\x20WHERE\x20id'+_0x40f4fe(0x287),[_0x35a442]);return _0x785701?.[_0x40f4fe(0x3a6)]?!![]:![];}catch(_0x42d65a){return warn(_0x40f4fe(0x186)+_0x40f4fe(0x22c)+_0x40f4fe(0x308)+_0x40f4fe(0x1fc)+(_0x42d65a?.['message']||_0x42d65a)),![];}}async function removeAllSchedulesForChat(_0x195819){const _0x326d99=_0x53cd54;try{const _0x30bc91=await db['run']('DELETE\x20FRO'+_0x326d99(0x298)+_0x326d99(0x1c4)+_0x326d99(0x2fb),[_0x195819]);return _0x30bc91?.[_0x326d99(0x3a6)]||0x2*-0x81d+0x1*-0x855+0x188f;}catch(_0x41ce25){return warn(_0x326d99(0x186)+_0x326d99(0x294)+_0x326d99(0x3b0)+_0x326d99(0x231)+'\x20'+(_0x41ce25?.['message']||_0x41ce25)),0xb2f*0x2+-0x674*-0x4+-0xe*0x371;}}function _0x22f2(){const _0x523781=['LT\x201,\x0a\x20\x20\x20\x20','ed\x20frequen','s_new\x20RENA','LE\x20IF\x20NOT\x20','[sched]\x20sw','F_MS','toLocaleSt','when','tupSendApi','EY,\x0a\x20\x20\x20\x20\x20\x20','rget\x20avail','*sched\x20lis','t_jid\x20TEXT',':\x20bot\x20JID\x20','s):\x0a','zoneName','\x0a\x20\x20\x20\x20\x20\x20CRE','Scheduled\x20','time.','ME\x20TO\x20sche','itial\x20exec','setZone','includes',',\x27now\x27))','>\x20*sched\x20o','for\x20','ed\x20disable','disable','s\x20found\x20fo','enabled\x20=\x20','heduler\x20st','umber>\x20<HH','CREMENT,\x0a\x20','\x20set\x20to\x20','.)\x20gp:<ali','created_at','number,...','val:\x20`n=1`','K_INTERVAL','mber,numbe','sched.init','es\x20created','\x20freq:','isCommand','hat_jid);','ommandPM\x20e','=2`\x20every\x20','enable\x20a\x20p','nnection.u','?,\x20?)\x20ON\x20C','`\x0aâ€£\x20Change','o\x20recurrin','e\x20or\x20multi','LT\x20\x27daily\x27','\x20connectio','it.','196JgKFNp','shed:\x20inte','lp\x20Command','[sched]\x20se','ating\x20safe','TZ=','\x20chat=','les\x20WHERE\x20','nce*\x20`<HH:','m>\x20gp:<ali','ys]`\x20`<mes','eated\x20cano','toFormat','off\x20id=','peat\x20inter','<number|nu','ed\x20delete\x20','eserved.\x0a\x0a','body','onnection(','e\x20for\x20','ed,\x20schedu','[sched]\x20ha','tChatTimez','utor\x20error','\x20\x20\x20chat_ji','found\x20for\x20','EXISTS\x20idx','eated\x20sche','filter','k\x20failed','robi','\x20all\x20gp:<a','listRespon','day','nup\x20error:','e\x20#','ENT','owing\x20line','Schedule\x20#','s).','\x20time=','hed\x20freque','\x0a\x20\x20\x20\x20\x20\x20\x20\x20s','\x20|\x20number,','ULT_TIMEZO','fromMe','d\x20for\x20conn','\x20WHERE\x20typ','changes','indexOf','shift','AUTOINCREM','sage.\x0a\x0a>\x20*','d\x20removed\x20','\x5c$&','Unsupporte','unknown','ble\x20for\x20re','edulesForC','ftime(\x27%s\x27','\x20default\x20c','[sched]\x20No','map','DATETIME_M','>\x20<n>\x20\x20(n=','iled\x20to\x20de','ALTER\x20TABL','nical\x20sche','selectedRo','Usage:\x20sch','[sched]\x20ex','_RETRIES','led\x20messag','Message\x20ca','able\x20(expl','\x203\x20OR\x20sche','g\x20at\x20','delete:\x20','ates)','EFAULT\x20\x27da','ngSchedule','abled\x20INTE','s):\x20','\x20gp:<alias','es.\x0a\x0a>\x20*sc','\x20updated\x20t','add','buttonsRes','there\x0amore','SELECT\x20nam','error:\x20','seMessage','>`\x20`<messa','get','mMe)','all','ily\x27,\x0a\x20\x20\x20\x20','ed\x20schedul','d\x20delete\x201','ime','livered\x20on','IF\x20NOT\x20EXI','\x20when:','ys:','without\x20de','=\x20OFF;',',\x20?,\x20?,\x20?,','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20?\x20ORDER\x20B','_MS','one-off\x20fo','db\x20delete\x20','pdate\x20obse','MM-DDTHH:m','123972pLoCzd','ection\x20upd','\x20fatal','dApi\x20','created_by','enable','finalize','[sched]\x20mi','\x20?,\x20?)','e\x20from\x20DB;','targets.','ur\x20default','slice',',2,3\x20OR\x20sc','db_failed','ommandGrou','TEXT\x0a\x20\x20\x20\x20\x20','MARY\x20KEY,\x0a','CREATE\x20TAB','gp:<alias|','liver\x20recu','function','s_new\x20(cha','\x20the\x20time\x20','EX\x20IF\x20NOT\x20','CREATE\x20IND','\x0a);','2490228fPRpXD','|in\x20N\x20hour','sureSchema','\x20\x20\x20enabled','schedule','\x20chat:','541762oEKPEF','dules\x20tabl','parse_fail','\x20NOT\x20NULL,','edule.','toLowerCas','Message\x20er','original\x20n','ys/minutes','ed\x20add\x20<HH','ms\x20default','\x20schedule(','\x20\x20\x20);\x0a\x20\x20\x20\x20','-send\x20clea','datetime','_settings\x20','frequency','trimEnd','requested\x20','=2\x20every\x202','\x20\x20\x20timezon','\x0a\x20\x20\x20\x20\x20\x20\x20\x20C','\x20|\x20YYYY-MM','Api\x20(manag','[sched]\x20cr','ialize\x20req','nnot\x20inser','instead','ings\x20(\x0a\x20\x20\x20',':mm|YYYY-M','[sched]\x20re','\x20id\x20INTEGE','enabled','as|jid|all','type',':mm|in\x20N\x20h','M-DDTHH:mm','\x22.\x20Use\x20gp:','H:mm\x20|\x20in\x20','send_at','REATE\x20TABL','\x20days,\x20etc','time_at','th\x20/setdef','days','name','sched\x20enab','gration\x20do','\x20is\x20provid','â€£\x20One-off\x20','d|all>\x20inl','[sched]\x20co','ONFLICT(ch','freq','roup\x20JID.','startOf','gister\x20man','\x20\x20\x20\x20create','`<HH:mm\x20|\x20','d\x20TEXT\x20PRI','lizeExisti','d,\x20message','floor','ble\x20appear','ponseMessa','\x20\x20\x20\x20creato','ler_settin','(id:','[sched]\x20cl','timestamp',',\x20time,\x20se','\x20last_sent','o\x20one-off\x20','aged\x20conne','INTEGER\x20DE','match','ed\x20edit\x20<n','solveDefau','ForUser\x20er','rved\x20-\x20re-','chatJid','not\x20found','\x20WHERE\x20id\x20','fromMillis','\x20\x20\x20\x20\x20\x20\x20las','rring\x20id=','n\x20follow\x20t','le*\x20`<numb','E\x20IF\x20NOT\x20E','uled\x20messa','=excluded.','No\x20changes','s\x20WHERE\x20ch','extendedTe','\x20\x20\x20\x20\x20\x20\x20cha','plies\x20(fro','alias','min','opped','e\x20TEXT\x0a\x20\x20\x20','default\x20wi','\x20frequency','d\x20to\x20backu','les\x20for\x20to','cy\x20<number','sage,\x20time','xample:\x0asc','sched','e-off\x20post','eated_at\x20I','ge...>','in\x20N\x20hours','PRAGMA\x20for','ne\x20TEXT,\x0a\x20','schedules','gs\x20(\x0a\x20\x20\x20\x20\x20','wId','group/defa','duler_sett','[sched]\x20PM','creator_ji','available','update\x20ena','bled\x20state','[sched]\x20up','ours|YYYY-','include\x20gp','ite_master','connection','\x20\x20\x20\x20freque','oUserJid','TEXT','message','\x20to\x20','reason','pdate\x20hand','T\x201,\x0a\x20\x20\x20\x20\x20','imageMessa','d\x20to\x20remov','ðŸ“…\x20*SchedHe','r_settings','m\x20error:\x20','ime\x20inline','d_at\x20INTEG','nd_at,\x20fre','ed\x20','dateSchedu','videoMessa','rror:\x20','ber>`\x20`<n>','_jid,\x20enab','edit','R\x20PRIMARY\x20','ring','stSchedule','leFields\x20e','ROM\x20schedu','dScheduleR','ndStoredMa','edules\x20SET','SCHED_DEFA','\x20<number>','mns\x20error\x20','p:<alias|j','delete\x201\x202','day_of_mon','\x20time.\x0a\x0a>\x20','Deleted\x20','\x20daily,\x20`n','H:mm>\x20[Nda','[sched]\x20Le','run','[sched]\x20ge','=\x20?','vide\x20messa','\x20lines\x0agp:','entries','\x20at\x20','ge...>\x20\x20\x20(','\x20(chat_jid','resolve\x20gp','toISO','\x20->\x20','\x20\x20\x20);','daily','\x20made.','r,...|all>','one-off\x20id','7960020PUMtvg','ttonId','remoteJid','ecutor\x20ite','text','t\x20required','sage...>`\x0a','t_jid,\x20mes','moveSchedu','e\x20FROM\x20sql','selectedBu','of\x20a\x20sched','sage...>\x20g','hat\x20error:','ple\x20schedu','yes','n(s).\x20Set\x20','led:\x20','update\x20fre','freshConfi','startsWith','rarily\x20dis','\x27))\x0a\x20\x20\x20\x20\x20\x20','EGER,\x0a\x20\x20\x20\x20','or\x20on\x20foll','EXISTS\x20sch','essage\x20TEX','once','\x20scheduler','Failed\x20for','INSERT\x20INT','d|all>)','edules_new','now','setup\x20send','75zcZMGC','1030377UkuwCb','s.\x0a\x0a>\x20*sch','at\x20','T\x20timezone','from','ult\x20TZ','caption','\x20failed:\x20','oss\x20your\x20d','zone','SCHED_CHEC','\x20\x20\x20\x20\x20\x20\x20\x20en','ge\x20text\x20(s','|jid|all>','backup_','\x20\x20\x20\x20\x20\x20\x20\x20cr','[sched]\x20ta','key','\x20INTEGER,\x0a','\x20ensure\x20fa','participan','LUES\x20(?,\x20?','split','status','hedules.\x20E','KEY\x20AUTOIN','has','led,\x20creat','chat','hed\x20add\x2009','<number>`\x20','iled\x20to\x20re','ded\x20schedu','d\x20INTEGER\x20','ge:\x20sched\x20','nnection\x20','diff','er>`\x0aâ€£\x20Re-','ame\x20line\x20a','gacy\x20sched','every','=\x20ON;','weekday','ctReply','[sched]\x20fa','O\x20schedule','1cxfQkt','Y\x20id\x20ASC','ndexes\x20pro','INTEGER\x20PR','time\x20TEXT,','ted\x20â€”\x20migr','utes>\x20<mes','liver\x20one-','d_time','SELECT\x20tim','[sched]\x20sc','s)\x20across\x20','help','sock','\x20UPDATE\x20SE','ration\x20fai','_chat\x20ON\x20s','\x20=\x20?','\x20->\x20id:','isArray','mm>`\x20`[Nda','update\x20sch','_schedules','eanup\x20erro','ror:\x20',':\x20\x22','Failed\x20to\x20','exec','t\x20lines\x20â€”\x20','rval=','moveAllSch','ap\x20tables\x20','efaults.','sendMessag','M\x20schedule','not\x20availa','ULL','ecutorTick','te\x20listene','day\x20+\x20Nday',':00\x20Hello\x20','sendat','s/days/min','ys]\x20<messa','\x20found\x20acr','\x20error:\x20','rate','ted\x20target','fter\x20time\x20','TEXT\x20NOT\x20N',',\x20?)','[sched]\x20de','\x20timezone\x20','N\x20hours/da','HH:mm\x20|\x20YY','length','ATE\x20TABLE\x20','quency,\x20ti','join','tReload\x20ha','\x20done;\x20sen','SELECT\x20*\x20F','schedule_t','push','failed','repeat','ed\x20message','eign_keys\x20','scheduled_','ULL,\x0a\x20\x20\x20\x20\x20','getUniqueJ','SCHED_INIT','*\x20`<number','\x20Delete\x20on','ble','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20','INTEGER','test','nd\x20attempt','ndleSchedC','oss\x20reques','vided.\x20Usa','ed_at)\x20VAL','ncy*\x20`<num','quency.','unsupporte','toMillis','STS\x20schedu',',\x0a\x20\x20\x20\x20\x20\x20\x20\x20','nabled\x20INT','catch','(listenerM','ndler\x20erro','ault.','\x20target(s)','able\x20a\x20sch','\x20id\x20ASC','\x20enabled:','not-availa','weekly','s\x20RENAME\x20T','FAULT\x201','\x20disabled\x20','one\x20error:','msg','s\x20(chat_ji','list','r:\x20','119232CHMrSu','chat_jid','livered\x20an','isNaN','delete','trim','1\x20daily,\x20n','s\x20at\x20given','[sched]\x20ad','[sched]\x20en','anager\x20use','hasSame','end_at\x20INT','reviously\x20','\x20(strftime','No\x20valid\x20i','ed\x20once\x20<H','chedules(c','eaned\x20up','hed\x20delete','all\x20or\x20a\x20g','s).\x20gp:<al','-DDTHH:mm>','\x20PRIMARY\x20K','ow\x20error:\x20','at_jid\x20=\x20?','plus','isValid','nfig\x20refre','isInteger','chat_jid\x20=','t,\x20creator','hhmm','Please\x20pro','_jid\x20=\x20?','xtMessage','ezone\x20FROM','arted\x20(ali','leByDBId\x20e','E\x20schedule','s*\x0a\x0a>\x20*sch','\x0amsg:\x0a','T,\x0a\x20\x20\x20\x20\x20\x20\x20','ction.upda',')\x20VALUES\x20(','DEFAULT\x201,','sForChat\x20e','time','all\x20schedu','es\x20(\x0a\x20\x20',',\x20last_sen','prepare','WHERE\x20chat',':<alias|ji','[sched]\x20in','ble\x20rename','no\x20send\x20ta','2\x20days,\x20et','[sched]\x20ho',')\x20id:','string','jid','value','set','every_n_da','SCHED_SEND','t_sent\x20INT','padStart','[sched]\x20on','NTEGER\x0a\x20\x20\x20','IAL_BACKOF','replace','ias|jid|al','ewlines\x20pr','XISTS\x20sche','resolve\x20yo','1286850VSLGpa','author','No\x20schedul','[sched]\x20DB','nutes)','timezone','singleSele','last_sent','g\x20error:\x20','\x20\x20\x20\x20timezo','findings','disabled\x20m','ine\x20when\x20m','2.3.4','defaults:\x20'];_0x22f2=function(){return _0x523781;};return _0x22f2();}async function updateScheduleFields(_0x2cb57c,_0x2be677={}){const _0x13b82a=_0x53cd54;try{const _0x5c069d=[],_0x814b96=[];for(const _0x1aaf44 of Object['keys'](_0x2be677)){_0x5c069d[_0x13b82a(0x2b5)](_0x1aaf44+_0x13b82a(0x287)),_0x814b96[_0x13b82a(0x2b5)](_0x2be677[_0x1aaf44]);}if(!_0x5c069d['length'])return![];_0x814b96[_0x13b82a(0x2b5)](_0x2cb57c);const _0x3e038e='UPDATE\x20sch'+_0x13b82a(0x207)+'\x20'+_0x5c069d[_0x13b82a(0x2b0)](',\x20')+(_0x13b82a(0x1ba)+_0x13b82a(0x215)),_0x3a7833=await db[_0x13b82a(0x213)](_0x3e038e,_0x814b96);return _0x3a7833?.[_0x13b82a(0x3a6)]?!![]:![];}catch(_0x24873e){return warn(_0x13b82a(0x1e4)+_0x13b82a(0x1fa)+_0x13b82a(0x203)+_0x13b82a(0x1fc)+(_0x24873e?.[_0x13b82a(0x1ec)]||_0x24873e)),![];}}async function getChatTimezone(_0x38cb6c){const _0x3fa8a6=_0x53cd54;try{const _0x23389f=await db[_0x3fa8a6(0x3d3)](_0x3fa8a6(0x27f)+_0x3fa8a6(0x306)+_0x3fa8a6(0x240)+_0x3fa8a6(0x177)+_0x3fa8a6(0x316)+_0x3fa8a6(0x304),[_0x38cb6c]);return _0x23389f?.[_0x3fa8a6(0x333)]||null;}catch(_0x5b8835){return warn(_0x3fa8a6(0x214)+_0x3fa8a6(0x38c)+'one\x20error:'+'\x20'+(_0x5b8835?.[_0x3fa8a6(0x1ec)]||_0x5b8835)),null;}}async function setChatTimezone(_0x27acf2,_0x2e5a6d){const _0x3e84fd=_0x53cd54;try{return await db[_0x3e84fd(0x213)](_0x3e84fd(0x242)+_0x3e84fd(0x275)+_0x3e84fd(0x1f4)+_0x3e84fd(0x21b)+',\x20timezone'+_0x3e84fd(0x30e)+_0x3e84fd(0x36e)+_0x3e84fd(0x19c)+'at_jid)\x20DO'+_0x3e84fd(0x284)+_0x3e84fd(0x24b)+_0x3e84fd(0x1c2)+_0x3e84fd(0x333),[_0x27acf2,_0x2e5a6d]),!![];}catch(_0x5802ff){return warn(_0x3e84fd(0x378)+_0x3e84fd(0x38c)+_0x3e84fd(0x2dd)+'\x20'+(_0x5802ff?.[_0x3e84fd(0x1ec)]||_0x5802ff)),![];}}async function executorTick(){const _0x4a906b=_0x53cd54;if(executorRunning)return;executorRunning=!![];try{const _0x5b7837=await db['all'](_0x4a906b(0x2b3)+_0x4a906b(0x204)+'les\x20WHERE\x20'+_0x4a906b(0x35a)+'1\x20ORDER\x20BY'+_0x4a906b(0x2d6));if(!_0x5b7837||_0x5b7837[_0x4a906b(0x2ad)]===0x1227+-0x1*0x223e+0x1017)return;for(const _0x3516d9 of _0x5b7837){try{const _0x36cd5a=_0x3516d9[_0x4a906b(0x333)]||await getChatTimezone(_0x3516d9['chat_jid'])||DEFAULT_TIMEZONE,_0x4192c5=DateTime['now']()[_0x4a906b(0x352)](_0x36cd5a);if(_0x3516d9['send_at']&&Number(_0x3516d9[_0x4a906b(0x18f)])>-0x25ac+-0x1045+0x35f1){const _0x3f87d4=Number(_0x3516d9[_0x4a906b(0x18f)]),_0x1873a9=Math[_0x4a906b(0x1a6)](Date['now']()/(-0x13*-0x1cd+-0x212a+-0x11*-0x2b));if(_0x3f87d4<=_0x1873a9){const _0x2df472=await sendWithRetry(_0x3516d9[_0x4a906b(0x2e3)],{'text':_0x3516d9[_0x4a906b(0x1ec)]});if(_0x2df472)try{const _0x4055df=await removeScheduleByDBId(_0x3516d9['id']);_0x4055df?info(_0x4a906b(0x2a9)+_0x4a906b(0x2e4)+_0x4a906b(0x3ab)+_0x4a906b(0x223)+'='+_0x3516d9['id']+'\x20to\x20'+_0x3516d9[_0x4a906b(0x2e3)]):(await updateScheduleFields(_0x3516d9['id'],{'enabled':0x0,'last_sent':_0x1873a9}),warn(_0x4a906b(0x2a9)+_0x4a906b(0x3da)+'e-off\x20id='+_0x3516d9['id']+_0x4a906b(0x1ed)+_0x3516d9[_0x4a906b(0x2e3)]+('\x20but\x20faile'+_0x4a906b(0x1f2)+_0x4a906b(0x150)+_0x4a906b(0x2dc)+_0x4a906b(0x183))));}catch(_0x4444be){warn(_0x4a906b(0x326)+_0x4a906b(0x1d4)+_0x4a906b(0x175)+_0x4a906b(0x398)+'\x20'+(_0x4444be?.['message']||_0x4444be));try{await updateScheduleFields(_0x3516d9['id'],{'enabled':0x0,'last_sent':_0x1873a9});}catch(_0x214c39){}}else warn(_0x4a906b(0x274)+'iled\x20to\x20de'+_0x4a906b(0x27d)+_0x4a906b(0x382)+_0x3516d9['id']+_0x4a906b(0x1ed)+_0x3516d9[_0x4a906b(0x2e3)]);}continue;}if(!_0x3516d9[_0x4a906b(0x311)])continue;const _0x450b76=_0x4192c5[_0x4a906b(0x381)]('HH:mm');if(_0x450b76!==_0x3516d9[_0x4a906b(0x311)])continue;const _0x321670={'id':_0x3516d9['id'],'frequency':_0x3516d9[_0x4a906b(0x178)]||_0x4a906b(0x220),'last_sent':_0x3516d9['last_sent']||-0x4*-0x935+0x7dd+-0x2cb1*0x1};if(!shouldSendSlot(_0x321670,_0x4192c5))continue;const _0x5830ab=await sendWithRetry(_0x3516d9[_0x4a906b(0x2e3)],{'text':_0x3516d9[_0x4a906b(0x1ec)]});_0x5830ab?(await updateScheduleFields(_0x3516d9['id'],{'last_sent':Math[_0x4a906b(0x1a6)](Date[_0x4a906b(0x245)]()/(-0x2041*-0x1+-0x337*-0x6+-0x2fa3))}),info('[sched]\x20de'+'livered\x20re'+'curring\x20id'+'='+_0x3516d9['id']+'\x20to\x20'+_0x3516d9[_0x4a906b(0x2e3)]+'\x20at\x20'+_0x3516d9[_0x4a906b(0x311)]+'\x20('+_0x36cd5a+')')):warn(_0x4a906b(0x274)+_0x4a906b(0x3b7)+_0x4a906b(0x15b)+_0x4a906b(0x1bd)+_0x3516d9['id']+_0x4a906b(0x1ed)+_0x3516d9['chat_jid']+_0x4a906b(0x219)+_0x3516d9['time']);}catch(_0x5b8d9b){warn('[sched]\x20ex'+_0x4a906b(0x227)+_0x4a906b(0x1f5)+(_0x5b8d9b?.[_0x4a906b(0x1ec)]||_0x5b8d9b));}}}catch(_0x505d3a){error(_0x4a906b(0x3bc)+_0x4a906b(0x29b)+_0x4a906b(0x2a3)+(_0x505d3a?.[_0x4a906b(0x1ec)]||_0x505d3a));}finally{executorRunning=![];}}function startSchedulerAligned(){const _0x3e47b8=_0x53cd54;stopScheduler();const _0x547a7b=0x1aab5+-0x9*0x2705+0x9ed8-Date[_0x3e47b8(0x245)]()%(0xafa9+-0x16441+-0x1c*-0xed2);setTimeout(()=>{const _0x3ab9ae=_0x3e47b8;executorTick()[_0x3ab9ae(0x2d0)](_0x442828=>warn(_0x3ab9ae(0x318)+_0x3ab9ae(0x351)+_0x3ab9ae(0x38d)+':\x20'+(_0x442828?.[_0x3ab9ae(0x1ec)]||_0x442828))),schedulerIntervalHandle=setInterval(()=>{const _0x217574=_0x3ab9ae;executorTick()[_0x217574(0x2d0)](_0x58334c=>warn(_0x217574(0x3bc)+_0x217574(0x29b)+_0x217574(0x2a3)+(_0x58334c?.[_0x217574(0x1ec)]||_0x58334c)));},CHECK_INTERVAL_MS),info(_0x3ab9ae(0x280)+_0x3ab9ae(0x35b)+_0x3ab9ae(0x307)+'gned\x20to\x20mi'+_0x3ab9ae(0x332));},_0x547a7b);}function stopScheduler(){const _0x4dad80=_0x53cd54;schedulerIntervalHandle&&(clearInterval(schedulerIntervalHandle),schedulerIntervalHandle=null,info(_0x4dad80(0x280)+'heduler\x20st'+_0x4dad80(0x1ca)));}function extractTextFromMessage(_0x2cd06f){const _0x4089ac=_0x53cd54;if(!_0x2cd06f||!_0x2cd06f[_0x4089ac(0x1ec)])return'';const _0x584177=_0x2cd06f[_0x4089ac(0x1ec)];if(_0x584177['conversati'+'on'])return _0x584177['conversati'+'on'];if(_0x584177[_0x4089ac(0x1c5)+_0x4089ac(0x305)]?.['text'])return _0x584177[_0x4089ac(0x1c5)+_0x4089ac(0x305)][_0x4089ac(0x228)];if(_0x584177[_0x4089ac(0x1f1)+'ge']?.[_0x4089ac(0x24e)])return _0x584177['imageMessa'+'ge'][_0x4089ac(0x24e)];if(_0x584177['videoMessa'+'ge']?.[_0x4089ac(0x24e)])return _0x584177[_0x4089ac(0x1fb)+'ge'][_0x4089ac(0x24e)];if(_0x584177[_0x4089ac(0x3cd)+_0x4089ac(0x1a8)+'ge']?.[_0x4089ac(0x22e)+_0x4089ac(0x225)])return _0x584177[_0x4089ac(0x3cd)+_0x4089ac(0x1a8)+'ge']['selectedBu'+_0x4089ac(0x225)];if(_0x584177[_0x4089ac(0x396)+_0x4089ac(0x3d1)]?.[_0x4089ac(0x334)+_0x4089ac(0x273)]?.[_0x4089ac(0x3ba)+_0x4089ac(0x1dc)])return _0x584177[_0x4089ac(0x396)+_0x4089ac(0x3d1)]['singleSele'+_0x4089ac(0x273)]['selectedRo'+_0x4089ac(0x1dc)];return'';}function splitFirstLinePreserveRest(_0x2b85d4){const _0x2920dd=_0x53cd54,_0xc4885c=_0x2b85d4[_0x2920dd(0x25e)](/\r?\n/),_0x54552f=_0xc4885c['length']>-0xe1b+0xe27+-0xc?_0xc4885c[_0x2920dd(0x3a8)]():'',_0x30b231=_0xc4885c['join']('\x0a'),_0x5cb0d3=_0x54552f[_0x2920dd(0x2e7)]()[_0x2920dd(0x25e)](/\s+/)[_0x2920dd(0x392)](Boolean);return{'firstLine':_0x54552f,'restText':_0x30b231,'firstTokens':_0x5cb0d3};}function _0x5884(_0x30eb83,_0x39375e){const _0x3ec7ea=_0x22f2();return _0x5884=function(_0x58b973,_0x149914){_0x58b973=_0x58b973-(0x19ee+0x2c2*-0x4+-0x2*0x6cb);let _0x43ae70=_0x3ec7ea[_0x58b973];return _0x43ae70;},_0x5884(_0x30eb83,_0x39375e);}function findGpAndCleanBodyFromRestAndFirst(_0x47e0a9,_0x50e4cb){const _0x1561c5=_0x53cd54,_0x2006a7=(_0x50e4cb&&_0x50e4cb['length']?_0x50e4cb:'')+'\x0a'+(_0x47e0a9||''),_0xbb481d=_0x2006a7[_0x1561c5(0x1b3)](/\bgp[:\s]+(\S+)/i),_0x2f9af9=_0xbb481d?_0xbb481d[0x11*0x12e+-0x1785+0x378]['trim']():null;let _0x494052=(_0x50e4cb||'')['split'](/\r?\n/);if(!_0x494052||_0x494052[_0x1561c5(0x2ad)]===-0xf96+-0x253d*-0x1+-0x15a7||_0x494052[_0x1561c5(0x270)](_0x25565c=>!_0x25565c[_0x1561c5(0x2e7)]()))return{'gpValue':_0x2f9af9,'cleanedBody':''};const _0x3a12e9=_0x494052['map'](_0x388e4f=>_0x388e4f[_0x1561c5(0x329)](/^\s*gp[:\s]+\S+\s*$/i,'')[_0x1561c5(0x329)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x1561c5(0x179)]())['filter'](_0x2bd8cf=>_0x2bd8cf[_0x1561c5(0x2ad)]>-0x65*-0x4f+0x1*0x173+-0x32*0xa7),_0x26df2f=_0x3a12e9[_0x1561c5(0x2b0)]('\x0a')[_0x1561c5(0x2e7)]();return{'gpValue':_0x2f9af9,'cleanedBody':_0x26df2f};}function extractInlineAfterToken(_0x592a08,_0x4a5b04){const _0x4af58f=_0x53cd54;if(!_0x592a08||!_0x4a5b04)return'';try{const _0x3b4fbd=new RegExp('\x5cb'+_0x4a5b04['replace'](/[.*+?^${}()|[\\]\\\\]/g,_0x4af58f(0x3ac))+'\x5cb'),_0x139ca0=_0x592a08[_0x4af58f(0x1b3)](_0x3b4fbd);if(!_0x139ca0)return'';const _0x5dd331=_0x592a08['indexOf'](_0x139ca0[-0xf1*-0x23+0x1*0x16a+-0x225d*0x1]),_0x52f4cd=_0x5dd331+_0x139ca0[0x28d*-0x1+0x71*-0x1a+0xe07][_0x4af58f(0x2ad)];let _0x31caef=_0x592a08['slice'](_0x52f4cd)[_0x4af58f(0x329)](/^\s+/,'');return _0x31caef=_0x31caef[_0x4af58f(0x329)](/\s*\bgp[:\s]+\S+\s*$/i,'')[_0x4af58f(0x2e7)](),_0x31caef;}catch(_0x2a5e8e){return'';}}const USAGE=_0x53cd54(0x1f3)+_0x53cd54(0x377)+_0x53cd54(0x30a)+'ed\x20add*\x20`<'+_0x53cd54(0x2ac)+'YY-MM-DDTH'+_0x53cd54(0x18e)+_0x53cd54(0x2ab)+_0x53cd54(0x170)+_0x53cd54(0x3d2)+'ge...>`\x0aâ€£\x20'+_0x53cd54(0x3bf)+_0x53cd54(0x1be)+_0x53cd54(0x1f6)+'\x20or\x20on\x20nex'+_0x53cd54(0x292)+_0x53cd54(0x16f)+_0x53cd54(0x32b)+_0x53cd54(0x386)+_0x53cd54(0x355)+_0x53cd54(0x37d)+_0x53cd54(0x28a)+_0x53cd54(0x37f)+_0x53cd54(0x22a)+_0x53cd54(0x199)+'schedule.\x20'+'If\x20`Ndays`'+_0x53cd54(0x198)+_0x53cd54(0x38a)+_0x53cd54(0x1cf)+_0x53cd54(0x29d)+_0x53cd54(0x2e9)+_0x53cd54(0x20e)+_0x53cd54(0x348)+'t*\x0aâ€£\x20View\x20'+_0x53cd54(0x312)+_0x53cd54(0x3be)+_0x53cd54(0x3ca)+_0x53cd54(0x2f5)+_0x53cd54(0x2be)+_0x53cd54(0x3a1)+_0x53cd54(0x361)+'\x20|\x20all>`\x0aâ€£'+_0x53cd54(0x2bf)+_0x53cd54(0x371)+_0x53cd54(0x232)+'led\x20entrie'+_0x53cd54(0x249)+'ed\x20edit*\x20`'+_0x53cd54(0x266)+_0x53cd54(0x1a2)+_0x53cd54(0x1d7)+_0x53cd54(0x17e)+_0x53cd54(0x2f8)+_0x53cd54(0x36f)+_0x53cd54(0x15e)+_0x53cd54(0x22f)+_0x53cd54(0x1c1)+'ge.\x0a\x0a>\x20*sc'+_0x53cd54(0x39f)+_0x53cd54(0x2c9)+_0x53cd54(0x1fd)+'`\x0aâ€£\x20Set\x20re'+_0x53cd54(0x383)+_0x53cd54(0x362)+_0x53cd54(0x210)+_0x53cd54(0x36b)+_0x53cd54(0x31b)+'c.\x0a\x0a>\x20*sch'+_0x53cd54(0x357)+'*\x20`<number'+'>`\x0aâ€£\x20Tempo'+_0x53cd54(0x239)+_0x53cd54(0x2d5)+'eduled\x20mes'+_0x53cd54(0x3aa)+_0x53cd54(0x196)+_0x53cd54(0x1bf)+_0x53cd54(0x26d)+_0x53cd54(0x36c)+_0x53cd54(0x2ef)+_0x53cd54(0x339)+'essage.\x0a',processedCmdKeys=new Map(),CMD_DEDUPE_TTL_MS=(-0x482*-0x5+-0x1a*-0x13+0xe*-0x1be)*(0x4c1*-0x2+-0x270e+0x3478);function markCmdProcessed(_0x43b6bf){const _0x34f4e8=_0x53cd54;if(!_0x43b6bf)return;if(processedCmdKeys['has'](_0x43b6bf))try{clearTimeout(processedCmdKeys[_0x34f4e8(0x3d3)](_0x43b6bf));}catch(_0x4ecab2){}const _0x22e01c=setTimeout(()=>processedCmdKeys[_0x34f4e8(0x2e6)](_0x43b6bf),CMD_DEDUPE_TTL_MS);processedCmdKeys['set'](_0x43b6bf,_0x22e01c);}function isCmdProcessed(_0x37887e){const _0x425d79=_0x53cd54;return _0x37887e&&processedCmdKeys[_0x425d79(0x262)](_0x37887e);}async function resolveDefaultChatJidsForUser(_0x106cfc){const _0x3c8454=_0x53cd54;try{const _0x2cfa31=await getDefault(_0x106cfc)['catch'](()=>null);if(!_0x2cfa31||Array['isArray'](_0x2cfa31)&&_0x2cfa31[_0x3c8454(0x2ad)]===0x48a*0x7+0xcc9*-0x3+0x5*0x151)return[];const _0x1ff047=Array['isArray'](_0x2cfa31)?_0x2cfa31:[_0x2cfa31],_0x1f054f=[];for(const _0x117296 of _0x1ff047){try{const _0x355c0f=await getConnection(_0x117296)[_0x3c8454(0x2d0)](()=>null);if(Array[_0x3c8454(0x289)](_0x355c0f))_0x1f054f['push'](..._0x355c0f);else{if(_0x355c0f)_0x1f054f[_0x3c8454(0x2b5)](String(_0x355c0f));}}catch(_0x317d64){warn(_0x3c8454(0x186)+'solving\x20co'+_0x3c8454(0x26b)+_0x117296+_0x3c8454(0x24f)+(_0x317d64?.[_0x3c8454(0x1ec)]||_0x317d64));}}return uniqArray(_0x1f054f);}catch(_0x18f26d){return warn(_0x3c8454(0x186)+_0x3c8454(0x1b5)+'ltChatJids'+_0x3c8454(0x1b6)+_0x3c8454(0x28e)+(_0x18f26d?.['message']||_0x18f26d)),[];}}async function getCombinedSchedulesForChats(_0x32a4b3){const _0x4aebbe=_0x53cd54,_0x5a6698=[];for(const _0x408744 of _0x32a4b3){const _0x38f276=await listSchedulesForChat(_0x408744);for(const _0x578fa9 of _0x38f276){_0x5a6698[_0x4aebbe(0x2b5)](Object['assign']({},_0x578fa9,{'chat_jid':_0x408744}));}}return _0x5a6698;}async function resolveNumberToDbId(_0x27f1de,_0x5f4468){const _0x2f0952=_0x53cd54;if(!_0x27f1de||!Number[_0x2f0952(0x2ff)](_0x27f1de)||_0x27f1de<0x315+0x1d98+-0x20ac)return null;const _0x1572c4=await getCombinedSchedulesForChats(_0x5f4468);if(!_0x1572c4||_0x1572c4[_0x2f0952(0x2ad)]<_0x27f1de)return null;return _0x1572c4[_0x27f1de-(-0x127d*0x1+0x1c6b+-0x9ed)]['id'];}async function findStoredMatchFromFindings(_0x97edf6=[]){const _0x3ff3b3=_0x53cd54;try{const _0x54ae7c=await listSudo();if(!Array[_0x3ff3b3(0x289)](_0x54ae7c)||_0x54ae7c[_0x3ff3b3(0x2ad)]===0x22ab+0xa33*0x1+-0x2cde)return null;const _0x4ce39f=new Set(_0x54ae7c[_0x3ff3b3(0x3b4)](String));for(const _0x3da093 of _0x97edf6||[]){if(!_0x3da093||typeof _0x3da093[_0x3ff3b3(0x31f)]!==_0x3ff3b3(0x31e))continue;const _0xfd9a8c=normalizeToJid(_0x3da093[_0x3ff3b3(0x31f)]);if(_0xfd9a8c&&_0x4ce39f[_0x3ff3b3(0x262)](_0xfd9a8c))return _0xfd9a8c;if(_0x4ce39f[_0x3ff3b3(0x262)](_0x3da093[_0x3ff3b3(0x31f)]))return _0x3da093[_0x3ff3b3(0x31f)];const _0x4f40f8=String(_0x3da093[_0x3ff3b3(0x31f)])[_0x3ff3b3(0x25e)]('@')[-0xb6*-0x15+-0x98b+-0x563][_0x3ff3b3(0x25e)](':')[-0x244b+0x1*-0x125d+0x6*0x91c];if(_0x4f40f8)for(const _0x543286 of _0x54ae7c){const _0x3a25e8=String(_0x543286)[_0x3ff3b3(0x25e)]('@')[0x1a*0x61+0x2*0x1296+-0x2f06];if(_0x3a25e8&&_0x3a25e8===_0x4f40f8)return _0x543286;}}return null;}catch(_0x1a4f49){return warn('[sched]\x20fi'+_0x3ff3b3(0x206)+'tchFromFin'+'dings\x20erro'+_0x3ff3b3(0x2e1)+(_0x1a4f49?.[_0x3ff3b3(0x1ec)]||_0x1a4f49)),null;}}export async function onMessage(_0x55639a){const _0x53b91=_0x53cd54;try{if(!_0x55639a||!_0x55639a['key']||!_0x55639a[_0x53b91(0x1ec)])return;const _0x810177=String(_0x55639a[_0x53b91(0x259)][_0x53b91(0x226)]||'')+'::'+String(_0x55639a[_0x53b91(0x259)]['id']||_0x55639a['key']['participan'+'t']||'');if(isCmdProcessed(_0x810177))return;markCmdProcessed(_0x810177);if(!_0x55639a[_0x53b91(0x368)])return;const _0x27df9c=typeof _0x55639a[_0x53b91(0x228)]==='string'&&_0x55639a[_0x53b91(0x228)][_0x53b91(0x2e7)]()['length']?_0x55639a[_0x53b91(0x228)]:extractTextFromMessage(_0x55639a)||'';if(!_0x27df9c)return;const _0x2fb107=_0x55639a[_0x53b91(0x259)][_0x53b91(0x226)],_0x5e4953=typeof _0x2fb107===_0x53b91(0x31e)&&_0x2fb107['endsWith']('@g.us');if(_0x5e4953){let _0xd51ed4=![];try{_0xd51ed4=await isadmin(botRef,_0x55639a);}catch(_0x365011){warn('[sched]\x20is'+'admin\x20chec'+_0x53b91(0x393)),_0xd51ed4=![];}if(!_0xd51ed4)return;const _0x351a71=String(_0x27df9c)[_0x53b91(0x2e7)](),{firstLine:_0x21ba02,restText:_0x5e1d59,firstTokens:_0x33259f}=splitFirstLinePreserveRest(_0x351a71),_0x483ba9=(_0x33259f[-0xe13+0xedb*0x1+-0x64*0x2]||'')[_0x53b91(0x16d)+'e']();if(!commands['includes'](_0x483ba9))return;const _0x34d238=(_0x33259f[0x64d*-0x5+0x1421*-0x1+0x33a3]||'')[_0x53b91(0x16d)+'e'](),_0x4fdb08=_0x55639a[_0x53b91(0x259)][_0x53b91(0x25c)+'t']||_0x55639a[_0x53b91(0x259)][_0x53b91(0x24c)]||_0x55639a[_0x53b91(0x259)][_0x53b91(0x226)]||'',_0x16fa54=(_0x4fdb08||'')['split']('@')[-0x6*0x392+0x3*-0xc8d+-0xd5*-0x47],_0x403f40=await resolveDefaultChatJidsForUser(_0x16fa54),_0x49baf7=_0x2fb107;if(!_0x403f40||_0x403f40[_0x53b91(0x2ad)]===0x1fb0+-0x8ab+-0x1705){await sendWithRetry(_0x49baf7,{'text':'Could\x20not\x20'+_0x53b91(0x32d)+_0x53b91(0x152)+_0x53b91(0x373)+_0x53b91(0x234)+_0x53b91(0x1cc)+_0x53b91(0x193)+_0x53b91(0x2d3)});return;}await handleSchedCommandGroup(_0x55639a,{'firstLine':_0x21ba02,'restText':_0x5e1d59,'firstTokens':_0x33259f,'sub':_0x34d238,'defaultChatJids':_0x403f40,'confirmationTarget':_0x49baf7,'senderJid':_0x4fdb08});return;}const _0x497207=Boolean(_0x55639a[_0x53b91(0x259)][_0x53b91(0x3a3)]);let _0xb3e252=null;if(_0x497207){const _0x2104ef=getBotJid();if(!_0x2104ef){warn(_0x53b91(0x1df)+_0x53b91(0x34a)+_0x53b91(0x299)+_0x53b91(0x3af)+_0x53b91(0x1c7)+_0x53b91(0x3d4));return;}_0xb3e252=_0x2104ef;}else{let _0x7fc51d=![];try{_0x7fc51d=await isSudo(botRef,_0x55639a);}catch(_0x3861f6){_0x7fc51d=![];}if(!_0x7fc51d)return;const _0x412062=userJidFromCtx(_0x55639a)||{'findings':[]},_0x407054=await findStoredMatchFromFindings(_0x412062[_0x53b91(0x338)]||[]);if(!_0x407054)return;_0xb3e252=_0x407054;}const _0x37be59=String(_0x27df9c),{firstLine:_0x569dc7,restText:_0x26905d,firstTokens:_0x3742ae}=splitFirstLinePreserveRest(_0x37be59),_0x43900f=(_0x3742ae[-0x2692+0x190f+-0xd83*-0x1]||'')[_0x53b91(0x16d)+'e']();if(!commands['includes'](_0x43900f))return;const _0x489698=(_0x3742ae[-0xa2*-0x35+0xcaa+-0x2e33]||'')[_0x53b91(0x16d)+'e']();if(!_0x489698||_0x489698===_0x53b91(0x282)){await sendWithRetry(_0xb3e252,{'text':USAGE});return;}const _0x3a7d20=[_0x53b91(0x23f),'add','list',_0x53b91(0x2e6),_0x53b91(0x1ff),_0x53b91(0x178),_0x53b91(0x358),_0x53b91(0x3ed)],{gpValue:_0xfdbdf6,cleanedBody:_0x196633}=findGpAndCleanBodyFromRestAndFirst(_0x569dc7,_0x26905d);if(_0x3a7d20[_0x53b91(0x353)](_0x489698)&&!_0xfdbdf6){await sendWithRetry(_0xb3e252,{'text':'PM\x20usage:\x20'+_0x53b91(0x1e6)+_0x53b91(0x317)+_0x53b91(0x19a)+_0x53b91(0x33a)+'anaging\x20sc'+_0x53b91(0x260)+_0x53b91(0x1d2)+_0x53b91(0x265)+_0x53b91(0x29e)+_0x53b91(0x3ce)+_0x53b91(0x217)+_0x53b91(0x1c8)});return;}let _0x5ebbaf=[];if(_0xfdbdf6){const _0x510500=_0xfdbdf6['trim']();if(_0x510500['toLowerCas'+'e']()==='all')_0x5ebbaf=await _0x4ea29d[_0x53b91(0x2bc)+'ids']();else{const _0x328aac=await _0x4ea29d['resolveNam'+'e'](_0x510500);if(_0x328aac)_0x5ebbaf=[_0x328aac];else{if(_0x510500[_0x53b91(0x353)]('@'))_0x5ebbaf=[_0x4ea29d['normalizeT'+_0x53b91(0x1ea)](_0x510500)];}}if(_0x3a7d20[_0x53b91(0x353)](_0x489698)&&(!_0x5ebbaf||_0x5ebbaf[_0x53b91(0x2ad)]===-0x331*-0x1+0x81*-0x33+0x1682)){await sendWithRetry(_0xb3e252,{'text':'Could\x20not\x20'+_0x53b91(0x21c)+_0x53b91(0x28f)+_0xfdbdf6+(_0x53b91(0x18d)+'alias,\x20gp:'+_0x53b91(0x2f6)+_0x53b91(0x19e))});return;}}await handleSchedCommandPM(_0x55639a,{'sub':_0x489698,'firstLine':_0x569dc7,'restText':_0x26905d,'firstTokens':_0x3742ae,'targetChatJids':_0x5ebbaf,'confirmationTarget':_0xb3e252,'senderJid':_0x55639a['key'][_0x53b91(0x25c)+'t']||_0x55639a['key'][_0x53b91(0x24c)]||'','cleanedBody':_0x196633});return;}catch(_0x2dd92a){error(_0x53b91(0x326)+_0x53b91(0x16e)+_0x53b91(0x28e)+(_0x2dd92a?.[_0x53b91(0x1ec)]||_0x2dd92a));}}async function handleSchedCommandGroup(_0xa91106,{firstLine:_0x360dd6,restText:_0x1360aa,firstTokens:_0x4f435b,sub:_0x5721e0,defaultChatJids:_0x587fc5,confirmationTarget:_0x54cab2,senderJid:_0x51f7ca}){const _0x4d88de=_0x53cd54;try{if(!_0x5721e0||_0x5721e0===_0x4d88de(0x282)){await sendWithRetry(_0x54cab2,{'text':USAGE});return;}if(_0x5721e0==='once'){const _0x3a2c8e=_0x4f435b[-0x22fc+-0x21c7+0x9d3*0x7],_0x4ed3a4=_0x4f435b[0x994+0x57*-0x4f+-0x8a4*-0x2]&&/^\d+$/[_0x4d88de(0x2c3)](_0x4f435b[0x330+-0x2a1+-0x8c])?Number(_0x4f435b[-0x15fc+-0xe1*-0x1+0x151e]):null;let _0x5625e7='';if(_0x3a2c8e){const _0x3b815d=new RegExp('\x5cb'+_0x3a2c8e[_0x4d88de(0x329)](/[.*+?^${}()|[\\]\\\\]/g,_0x4d88de(0x3ac))+'\x5cb'),_0x4abdf4=_0x360dd6['match'](_0x3b815d);if(_0x4abdf4){const _0x5dcca7=_0x360dd6[_0x4d88de(0x3a7)](_0x4abdf4[-0xcb6*0x1+-0x514+0x2f7*0x6]),_0x54e1ba=_0x5dcca7+_0x4abdf4[-0xa*0x2f1+-0x6bc*0x4+-0x1*-0x385a][_0x4d88de(0x2ad)];_0x5625e7=_0x360dd6[_0x4d88de(0x153)](_0x54e1ba)[_0x4d88de(0x329)](/^\s*/,'');if(_0x5625e7&&/^\d+/[_0x4d88de(0x2c3)](_0x5625e7))_0x5625e7=_0x5625e7[_0x4d88de(0x329)](/^\d+\s*/,'');}}const _0x14b3e0=_0x5625e7&&_0x1360aa?_0x5625e7+'\x0a'+_0x1360aa:_0x5625e7||_0x1360aa||'';if(!_0x3a2c8e||!_0x14b3e0||_0x14b3e0['trim']()['length']===-0x2062+-0x735+-0x2797*-0x1){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x3bb)+'ed\x20once\x20<H'+_0x4d88de(0x211)+_0x4d88de(0x2a1)+_0x4d88de(0x1d6)});return;}const _0x40a7d1=[];for(const _0x37925f of _0x587fc5){const _0x32a7c1=await getChatTimezone(_0x37925f)||DEFAULT_TIMEZONE,_0x5b7105=parseTimeToken(_0x3a2c8e,_0x32a7c1);if(!_0x5b7105){_0x40a7d1[_0x4d88de(0x2b5)]({'chat':_0x37925f,'ok':![],'reason':_0x4d88de(0x16a)+'ed'});continue;}if(_0x5b7105[_0x4d88de(0x18a)]==='datetime'){const _0x4af572=_0x5b7105['dt'],_0x382b41=Math[_0x4d88de(0x1a6)](_0x4af572[_0x4d88de(0x2cc)]()/(0xbbf+-0x74*-0x36+0x9*-0x397)),_0x11c6a7=await addScheduleRow({'chat_jid':_0x37925f,'message':_0x14b3e0,'time':null,'send_at':_0x382b41,'frequency':'once','timezone':_0x4af572[_0x4d88de(0x34c)]||_0x32a7c1,'creator_jid':_0x51f7ca});if(_0x11c6a7)_0x40a7d1['push']({'chat':_0x37925f,'ok':!![],'id':_0x11c6a7,'when':_0x4af572[_0x4d88de(0x343)+_0x4d88de(0x201)](DateTime[_0x4d88de(0x3b5)+'ED'])});else _0x40a7d1[_0x4d88de(0x2b5)]({'chat':_0x37925f,'ok':![],'reason':_0x4d88de(0x155)});continue;}if(_0x5b7105[_0x4d88de(0x18a)]==='hhmm'){const [_0x3e9cdc,_0x548928]=_0x5b7105[_0x4d88de(0x302)][_0x4d88de(0x25e)](':')[_0x4d88de(0x3b4)](Number);let _0x537c27=DateTime[_0x4d88de(0x245)]()[_0x4d88de(0x352)](_0x32a7c1),_0x2237cc=_0x537c27['startOf'](_0x4d88de(0x397))['set']({'hour':_0x3e9cdc,'minute':_0x548928,'second':0x0,'millisecond':0x0});if(_0x4ed3a4&&Number[_0x4d88de(0x2ff)](_0x4ed3a4)&&_0x4ed3a4>=0x22b0+-0x1d48+-0x1*0x567)_0x2237cc=_0x2237cc[_0x4d88de(0x2fc)]({'days':Number(_0x4ed3a4)});else{if(_0x2237cc<=_0x537c27)_0x2237cc=_0x2237cc[_0x4d88de(0x2fc)]({'days':0x1});}const _0x115fdc=Math['floor'](_0x2237cc[_0x4d88de(0x2cc)]()/(-0x740+0x267+0x8c1)),_0x2ac211=await addScheduleRow({'chat_jid':_0x37925f,'message':_0x14b3e0,'time':null,'send_at':_0x115fdc,'frequency':_0x4d88de(0x23f),'timezone':_0x32a7c1,'creator_jid':_0x51f7ca});if(_0x2ac211)_0x40a7d1['push']({'chat':_0x37925f,'ok':!![],'id':_0x2ac211,'when':_0x2237cc[_0x4d88de(0x343)+_0x4d88de(0x201)](DateTime[_0x4d88de(0x3b5)+'ED'])});else _0x40a7d1[_0x4d88de(0x2b5)]({'chat':_0x37925f,'ok':![],'reason':_0x4d88de(0x155)});continue;}_0x40a7d1[_0x4d88de(0x2b5)]({'chat':_0x37925f,'ok':![],'reason':_0x4d88de(0x2cb)+_0x4d88de(0x27e)});}const _0xe54957=_0x40a7d1[_0x4d88de(0x392)](_0x1614e5=>_0x1614e5['ok']),_0x3696f1=_0x40a7d1['filter'](_0x1fd47f=>!_0x1fd47f['ok']);let _0x1d71f0='';if(_0xe54957['length']){_0x1d71f0+=_0x4d88de(0x34e)+_0x4d88de(0x3e4)+'r\x20'+_0xe54957[_0x4d88de(0x2ad)]+(_0x4d88de(0x3b2)+_0x4d88de(0x388)+_0x4d88de(0x34b));for(const _0x34eb7f of _0xe54957)_0x1d71f0+='â€¢\x20'+_0x34eb7f[_0x4d88de(0x264)]+_0x4d88de(0x288)+_0x34eb7f['id']+_0x4d88de(0x219)+_0x34eb7f[_0x4d88de(0x344)]+'\x0a';}if(_0x3696f1[_0x4d88de(0x2ad)]){_0x1d71f0+=_0x4d88de(0x241)+'\x20'+_0x3696f1[_0x4d88de(0x2ad)]+(_0x4d88de(0x3b2)+_0x4d88de(0x388)+_0x4d88de(0x34b));for(const _0x73e235 of _0x3696f1)_0x1d71f0+='â€¢\x20'+_0x73e235[_0x4d88de(0x264)]+_0x4d88de(0x21e)+_0x73e235['reason']+'\x0a';}await sendWithRetry(_0x54cab2,{'text':_0x1d71f0['trim']()||_0x4d88de(0x330)+_0x4d88de(0x366)+'.'});return;}if(_0x5721e0===_0x4d88de(0x3cc)){if(!_0x4f435b[-0x1d60+-0xd75*-0x2+0x278]){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x3bb)+_0x4d88de(0x171)+_0x4d88de(0x185)+'M-DDTHH:mm'+_0x4d88de(0x163)+'s/days/min'+_0x4d88de(0x27c)+'sage...>'});return;}const _0x593c9f=_0x4f435b[-0x237d+0x2*-0x548+0x2e0f],_0x27ed9e=_0x4f435b[0xb0a*0x3+-0x1*-0x6d2+-0x27ed]&&/^\d+$/[_0x4d88de(0x2c3)](_0x4f435b[-0x3*-0x810+0x1e51+-0x915*0x6])?Number(_0x4f435b[-0x1*0xfd9+0x23f8+-0x141c]):null;let _0x29c672='';const _0x89238c=new RegExp('\x5cb'+_0x593c9f['replace'](/[.*+?^${}()|[\\]\\\\]/g,'\x5c$&')+'\x5cb'),_0x14f653=_0x360dd6[_0x4d88de(0x1b3)](_0x89238c);if(_0x14f653){const _0x33099f=_0x360dd6[_0x4d88de(0x3a7)](_0x14f653[-0x12b1+-0xcc7+0x1f78]),_0x1e790b=_0x33099f+_0x14f653[0x18d9*-0x1+0x1*-0x2177+0xe94*0x4][_0x4d88de(0x2ad)];_0x29c672=_0x360dd6[_0x4d88de(0x153)](_0x1e790b)[_0x4d88de(0x329)](/^\s*/,'');if(_0x29c672&&/^\d+/[_0x4d88de(0x2c3)](_0x29c672))_0x29c672=_0x29c672['replace'](/^\d+\s*/,'');}const _0x4cab14=_0x29c672&&_0x1360aa?_0x29c672+'\x0a'+_0x1360aa:_0x29c672||_0x1360aa||'';if(!_0x4cab14||_0x4cab14['trim']()['length']===-0xfb+-0xa31+0xb2c){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x303)+_0x4d88de(0x216)+'ge\x20text\x20(s'+_0x4d88de(0x26e)+_0x4d88de(0x2a6)+_0x4d88de(0x23c)+_0x4d88de(0x39b)+_0x4d88de(0x39d)});return;}const _0x1af1b0=[];for(const _0x127b37 of _0x587fc5){const _0x926e7e=await getChatTimezone(_0x127b37)||DEFAULT_TIMEZONE,_0x294dba=parseTimeToken(_0x593c9f,_0x926e7e);if(!_0x294dba){_0x1af1b0['push']({'chat':_0x127b37,'ok':![],'reason':'parse_fail'+'ed'});continue;}const _0x5cbb9f=_0x51f7ca;if(_0x294dba[_0x4d88de(0x18a)]==='datetime'){const _0x5ab84f=_0x294dba['dt'],_0x1b04fd=Math[_0x4d88de(0x1a6)](_0x5ab84f[_0x4d88de(0x2cc)]()/(-0x233f+0x147c+-0xb1*-0x1b)),_0x364291=await addScheduleRow({'chat_jid':_0x127b37,'message':_0x4cab14,'time':null,'send_at':_0x1b04fd,'frequency':_0x4d88de(0x23f),'timezone':_0x5ab84f[_0x4d88de(0x34c)]||_0x926e7e,'creator_jid':_0x5cbb9f});if(_0x364291)_0x1af1b0['push']({'chat':_0x127b37,'ok':!![],'id':_0x364291,'when':_0x5ab84f[_0x4d88de(0x343)+_0x4d88de(0x201)](DateTime['DATETIME_M'+'ED'])});else _0x1af1b0[_0x4d88de(0x2b5)]({'chat':_0x127b37,'ok':![],'reason':'db_failed'});continue;}if(_0x294dba[_0x4d88de(0x18a)]==='hhmm'){const _0x325c8b=_0x294dba[_0x4d88de(0x302)];if(_0x27ed9e&&Number[_0x4d88de(0x2ff)](_0x27ed9e)&&_0x27ed9e>=-0x1a7*0x11+0x6+0x2*0xe09){let _0xcbca8b=DateTime[_0x4d88de(0x245)]()[_0x4d88de(0x352)](_0x926e7e);const [_0x290ed8,_0x4715a9]=_0x325c8b[_0x4d88de(0x25e)](':')['map'](Number);let _0x2dd4be=_0xcbca8b[_0x4d88de(0x19f)](_0x4d88de(0x397))[_0x4d88de(0x321)]({'hour':_0x290ed8,'minute':_0x4715a9,'second':0x0,'millisecond':0x0});_0x2dd4be=_0x2dd4be['plus']({'days':Number(_0x27ed9e)});const _0x1bd484=Math['floor'](_0x2dd4be['toMillis']()/(0x35*-0xf+-0x2186+0x2889)),_0x4e3e10=await addScheduleRow({'chat_jid':_0x127b37,'message':_0x4cab14,'time':null,'send_at':_0x1bd484,'frequency':_0x4d88de(0x23f),'timezone':_0x926e7e,'creator_jid':_0x5cbb9f});if(_0x4e3e10)_0x1af1b0[_0x4d88de(0x2b5)]({'chat':_0x127b37,'ok':!![],'id':_0x4e3e10,'when':_0x2dd4be[_0x4d88de(0x343)+'ring'](DateTime['DATETIME_M'+'ED'])});else _0x1af1b0[_0x4d88de(0x2b5)]({'chat':_0x127b37,'ok':![],'reason':'db_failed'});continue;}const _0x4ad7c3=await addScheduleRow({'chat_jid':_0x127b37,'message':_0x4cab14,'time':_0x325c8b,'send_at':null,'frequency':_0x4d88de(0x220),'timezone':_0x926e7e,'creator_jid':_0x5cbb9f});if(_0x4ad7c3)_0x1af1b0[_0x4d88de(0x2b5)]({'chat':_0x127b37,'ok':!![],'id':_0x4ad7c3,'when':_0x325c8b+'\x20('+_0x926e7e+')'});else _0x1af1b0['push']({'chat':_0x127b37,'ok':![],'reason':'db_failed'});continue;}_0x1af1b0[_0x4d88de(0x2b5)]({'chat':_0x127b37,'ok':![],'reason':_0x4d88de(0x2cb)+_0x4d88de(0x27e)});}const _0x5bcc0d=_0x1af1b0[_0x4d88de(0x392)](_0x5ec643=>_0x5ec643['ok']),_0x55aabe=_0x1af1b0[_0x4d88de(0x392)](_0x26a9de=>!_0x26a9de['ok']);let _0x37d595='';if(_0x5bcc0d[_0x4d88de(0x2ad)]){_0x37d595+=_0x4d88de(0x34e)+_0x4d88de(0x356)+_0x5bcc0d[_0x4d88de(0x2ad)]+(_0x4d88de(0x3b2)+_0x4d88de(0x388)+'s):\x0a');for(const _0x5cb447 of _0x5bcc0d)_0x37d595+='â€¢\x20'+_0x5cb447[_0x4d88de(0x264)]+_0x4d88de(0x288)+_0x5cb447['id']+'\x20when:'+_0x5cb447['when']+'\x0a';}if(_0x55aabe['length']){_0x37d595+=_0x4d88de(0x241)+'\x20'+_0x55aabe[_0x4d88de(0x2ad)]+(_0x4d88de(0x3b2)+_0x4d88de(0x388)+_0x4d88de(0x34b));for(const _0x9cdc3 of _0x55aabe)_0x37d595+='â€¢\x20'+_0x9cdc3[_0x4d88de(0x264)]+'\x20->\x20'+_0x9cdc3['reason']+'\x0a';}await sendWithRetry(_0x54cab2,{'text':_0x37d595[_0x4d88de(0x2e7)]()||_0x4d88de(0x330)+'es\x20created'+'.'});return;}if(_0x5721e0===_0x4d88de(0x2e0)){const _0x18659d=await getCombinedSchedulesForChats(_0x587fc5);if(!_0x18659d[_0x4d88de(0x2ad)]){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x330)+_0x4d88de(0x2b8)+_0x4d88de(0x359)+'r\x20defaults'+':\x20'+_0x587fc5[_0x4d88de(0x2b0)](',\x20')});return;}const _0x4fe0d8=_0x18659d[_0x4d88de(0x3b4)]((_0x3597bc,_0x4685f4)=>{const _0x35c547=_0x4d88de,_0x3ad39d=_0x3597bc['send_at']?DateTime[_0x35c547(0x1bb)](Number(_0x3597bc[_0x35c547(0x18f)])*(0x24*-0x50+-0x1bea+-0x2b12*-0x1))[_0x35c547(0x352)](_0x3597bc[_0x35c547(0x333)]||DEFAULT_TIMEZONE)[_0x35c547(0x21d)]({'suppressSeconds':!![]}):_0x3597bc['time']?_0x3597bc[_0x35c547(0x311)]+'\x20('+(_0x3597bc['timezone']||_0x35c547(0x1dd)+_0x35c547(0x24d))+')':_0x35c547(0x3ae),_0x13768a=(_0x3597bc[_0x35c547(0x1ec)]||'')[_0x35c547(0x25e)]('\x0a')[_0x35c547(0x3b4)](_0xdb2137=>_0xdb2137[_0x35c547(0x179)]())[_0x35c547(0x2b0)]('\x0a');return _0x4685f4+(0x1c14+0x121e+0xb*-0x433)+_0x35c547(0x31d)+_0x3597bc['id']+_0x35c547(0x167)+_0x3597bc[_0x35c547(0x2e3)]+'\x20when:'+_0x3ad39d+_0x35c547(0x367)+(_0x3597bc[_0x35c547(0x178)]||_0x35c547(0x220))+'\x20enabled:'+(_0x3597bc[_0x35c547(0x188)]?_0x35c547(0x233):'no')+'\x0amsg:\x0a'+_0x13768a;}),_0x1e58bd='Scheduled\x20'+'for\x20defaul'+'ts\x20('+_0x587fc5[_0x4d88de(0x2b0)](',\x20')+'):\x0a\x0a'+_0x4fe0d8['join']('\x0a\x0a');await sendWithRetry(_0x54cab2,{'text':_0x1e58bd});return;}if(_0x5721e0===_0x4d88de(0x2e6)){const _0x19c6a9=_0x4f435b[_0x4d88de(0x153)](0xa9e+0x8b9+0x31*-0x65);let _0x5b8744=_0x19c6a9['join']('\x20');if(!_0x5b8744&&_0x1360aa)_0x5b8744=_0x1360aa['trim']();if(!_0x5b8744){await sendWithRetry(_0x54cab2,{'text':'Usage:\x20sch'+_0x4d88de(0x385)+'<number|nu'+_0x4d88de(0x364)+_0x4d88de(0x222)});return;}if(/^\s*all\s*$/i[_0x4d88de(0x2c3)](_0x5b8744)){let _0x431790=0x7*0x1e2+0x5*0x712+-0x611*0x8;for(const _0x7a359f of _0x587fc5){const _0x439757=await removeAllSchedulesForChat(_0x7a359f);_0x431790+=_0x439757;}await sendWithRetry(_0x54cab2,{'text':'Deleted\x20'+_0x431790+('\x20schedule('+_0x4d88de(0x281)+_0x4d88de(0x33c))+_0x587fc5[_0x4d88de(0x2b0)](',\x20')});return;}const _0x4e9d07=_0x5b8744[_0x4d88de(0x25e)](/[\s,]+/)[_0x4d88de(0x3b4)](_0x2846b3=>_0x2846b3[_0x4d88de(0x2e7)]())['filter'](Boolean),_0x388493=_0x4e9d07[_0x4d88de(0x3b4)](_0x59df9a=>Number(_0x59df9a))[_0x4d88de(0x392)](_0x4cf8cb=>!Number[_0x4d88de(0x2e5)](_0x4cf8cb)&&Number[_0x4d88de(0x2ff)](_0x4cf8cb)&&_0x4cf8cb>-0x1b32+-0x2*-0xe5f+0x12*-0x16);if(!_0x388493[_0x4d88de(0x2ad)]){await sendWithRetry(_0x54cab2,{'text':'No\x20valid\x20i'+_0x4d88de(0x278)+_0x4d88de(0x2c7)+'ge:\x20sched\x20'+_0x4d88de(0x20c)+_0x4d88de(0x3c1)+_0x4d88de(0x3d8)+_0x4d88de(0x154)+_0x4d88de(0x2f5)+'\x20all'});return;}const _0x19544f=[...new Set(_0x388493)],_0x477e64=await getCombinedSchedulesForChats(_0x587fc5),_0x1f5089=[],_0x293e8f=[];for(const _0xc996d3 of _0x19544f){if(_0xc996d3<0x1d22+0x16f5+-0x3416*0x1||_0xc996d3>_0x477e64['length']){_0x293e8f[_0x4d88de(0x2b5)]({'n':_0xc996d3,'reason':_0x4d88de(0x1b9)});continue;}const _0x39d276=_0x477e64[_0xc996d3-(0x91e*-0x1+-0x1*0xb0f+-0x11f*-0x12)]['id'],_0x4ac0c2=await removeScheduleByDBId(_0x39d276);if(_0x4ac0c2)_0x1f5089['push']({'n':_0xc996d3,'id':_0x39d276});else _0x293e8f[_0x4d88de(0x2b5)]({'n':_0xc996d3,'reason':_0x4d88de(0x3e5)+_0x4d88de(0x2b6)});}let _0xb5853e='';if(_0x1f5089[_0x4d88de(0x2ad)])_0xb5853e+=_0x4d88de(0x20f)+_0x1f5089[_0x4d88de(0x2ad)]+(_0x4d88de(0x173)+_0x4d88de(0x3c8))+_0x1f5089['map'](_0x63b920=>_0x63b920['n']+_0x4d88de(0x1ab)+_0x63b920['id']+')')['join'](',\x20')+'.\x0a';if(_0x293e8f['length'])_0xb5853e+=_0x4d88de(0x290)+_0x4d88de(0x3c3)+_0x293e8f['map'](_0x599d16=>_0x599d16['n']+'('+_0x599d16[_0x4d88de(0x1ee)]+')')['join'](',\x20')+'.';await sendWithRetry(_0x54cab2,{'text':_0xb5853e[_0x4d88de(0x2e7)]()||_0x4d88de(0x1c3)+_0x4d88de(0x221)});return;}if(_0x5721e0==='edit'){const _0x425350=Number(_0x4f435b[0xab2+0x23b0*-0x1+-0x2*-0xc80]),_0x411c07=_0x4f435b[-0x220f+0x2ad+0x1a7*0x13]||(_0x1360aa?_0x1360aa[_0x4d88de(0x25e)](/\r?\n/)[0x43e+-0xedf*0x2+0x660*0x4]['trim']():null);if(!_0x425350||!_0x411c07){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x3bb)+_0x4d88de(0x1b4)+'umber>\x20<HH'+_0x4d88de(0x18b)+_0x4d88de(0x1e5)+_0x4d88de(0x3e7)+'m>'});return;}const _0x267378=await getCombinedSchedulesForChats(_0x587fc5);if(!_0x267378||_0x267378['length']<_0x425350){await sendWithRetry(_0x54cab2,{'text':'No\x20schedul'+'e\x20#'+_0x425350+(_0x4d88de(0x2a2)+_0x4d88de(0x250)+_0x4d88de(0x296))});return;}const _0x167629=_0x267378[_0x425350-(-0x2334+-0x3d8+0x1*0x270d)]['id'];if(!_0x167629){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x330)+_0x4d88de(0x399)+_0x425350+(_0x4d88de(0x2a2)+_0x4d88de(0x250)+'efaults.')});return;}const _0x205b2b=parseTimeToken(_0x411c07,DEFAULT_TIMEZONE);if(!_0x205b2b){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x290)+'parse\x20new\x20'+_0x4d88de(0x34f)});return;}if(_0x205b2b[_0x4d88de(0x18a)]===_0x4d88de(0x176)){const _0x4b6289=_0x205b2b['dt'],_0x5667eb=Math['floor'](_0x4b6289[_0x4d88de(0x2cc)]()/(0x6e*-0x3f+-0x371*-0x2+0x1818)),_0x1c4037=await updateScheduleFields(_0x167629,{'send_at':_0x5667eb,'time':null,'frequency':'once','timezone':_0x4b6289['zoneName']||DEFAULT_TIMEZONE});if(_0x1c4037)await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x39c)+_0x425350+(_0x4d88de(0x3cb)+_0x4d88de(0x1b0)+_0x4d88de(0x24a))+_0x4b6289[_0x4d88de(0x343)+_0x4d88de(0x201)](DateTime['DATETIME_M'+'ED'])+'\x20('+_0x4b6289[_0x4d88de(0x34c)]+')'});else await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x290)+_0x4d88de(0x28b)+'edule.'});return;}else{if(_0x205b2b[_0x4d88de(0x18a)]===_0x4d88de(0x302)){const _0x5bcbfa=_0x205b2b['hhmm'],_0x509f84=_0x267378[_0x425350-(-0x9*-0x18e+0x20*0x113+-0x101f*0x3)],_0x584c22=_0x509f84['timezone']||await getChatTimezone(_0x509f84[_0x4d88de(0x2e3)])||DEFAULT_TIMEZONE,_0xba4404=await updateScheduleFields(_0x167629,{'time':_0x5bcbfa,'send_at':null,'frequency':_0x4d88de(0x220),'timezone':_0x584c22});if(_0xba4404)await sendWithRetry(_0x54cab2,{'text':'Schedule\x20#'+_0x425350+(_0x4d88de(0x3cb)+_0x4d88de(0x370)+_0x4d88de(0x3c2))+_0x5bcbfa+'\x20('+_0x584c22+')'});else await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x290)+_0x4d88de(0x28b)+_0x4d88de(0x16c)});return;}else{await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x3ad)+'d\x20time\x20for'+'mat\x20for\x20ed'+_0x4d88de(0x374)});return;}}}if(_0x5721e0==='frequency'){const _0x1ac96a=Number(_0x4f435b[-0x17ad+0xfd6+0x31*0x29]),_0x357452=Number(_0x4f435b[-0x4*0x146+0x3*-0xa57+0x10*0x242]);if(!_0x1ac96a||!_0x357452||_0x357452<-0x19e+0x5*-0x40b+0x15d6){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x3bb)+_0x4d88de(0x33e)+_0x4d88de(0x1d0)+_0x4d88de(0x3b6)+_0x4d88de(0x2e8)+_0x4d88de(0x17b)+'\x20days,\x20etc'+'.)'});return;}const _0x474118=await getCombinedSchedulesForChats(_0x587fc5);if(!_0x474118||_0x474118[_0x4d88de(0x2ad)]<_0x1ac96a){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x330)+_0x4d88de(0x399)+_0x1ac96a+('\x20found\x20acr'+_0x4d88de(0x250)+'efaults.')});return;}const _0x41d2e2=_0x474118[_0x1ac96a-(0x1a5a+0x21d6+0x7*-0x899)]['id'];if(!_0x41d2e2){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x330)+'e\x20#'+_0x1ac96a+(_0x4d88de(0x2a2)+_0x4d88de(0x250)+_0x4d88de(0x296))});return;}let _0x2a75b3=_0x4d88de(0x220);if(_0x357452===-0x240b+-0x27*-0x29+0x3*0x9ef)_0x2a75b3=_0x4d88de(0x220);else _0x2a75b3=_0x4d88de(0x322)+_0x4d88de(0x3dd)+_0x357452;const _0x542b06=await updateScheduleFields(_0x41d2e2,{'frequency':_0x2a75b3});if(_0x542b06)await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x39c)+_0x1ac96a+('\x20frequency'+_0x4d88de(0x35e))+_0x2a75b3});else await sendWithRetry(_0x54cab2,{'text':'Failed\x20to\x20'+_0x4d88de(0x236)+_0x4d88de(0x2ca)});return;}if(_0x5721e0===_0x4d88de(0x358)||_0x5721e0===_0x4d88de(0x3ed)){const _0x572d00=Number(_0x4f435b[-0x4*-0x8f+0x142e+0x8*-0x2cd]);if(!_0x572d00){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x3bb)+_0x4d88de(0x1f9)+_0x5721e0+_0x4d88de(0x209)});return;}const _0x10095d=await getCombinedSchedulesForChats(_0x587fc5);if(!_0x10095d||_0x10095d[_0x4d88de(0x2ad)]<_0x572d00){await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x330)+_0x4d88de(0x399)+_0x572d00+(_0x4d88de(0x2a2)+_0x4d88de(0x250)+'efaults.')});return;}const _0x40bf74=_0x10095d[_0x572d00-(-0x1b07+0xbd7+0xf31)]['id'];if(!_0x40bf74){await sendWithRetry(_0x54cab2,{'text':'No\x20schedul'+'e\x20#'+_0x572d00+(_0x4d88de(0x2a2)+_0x4d88de(0x250)+_0x4d88de(0x296))});return;}const _0x387514=await updateScheduleFields(_0x40bf74,{'enabled':_0x5721e0===_0x4d88de(0x3ed)?-0xb*0x6b+0x1078+-0xbde:-0x1e29+-0x3f5+-0x221e*-0x1});if(_0x387514)await sendWithRetry(_0x54cab2,{'text':_0x4d88de(0x39c)+_0x572d00+'\x20'+_0x5721e0+'d.'});else await sendWithRetry(_0x54cab2,{'text':'Failed\x20to\x20'+_0x4d88de(0x1e2)+'bled\x20state'+'.'});return;}await sendWithRetry(_0x54cab2,{'text':USAGE});}catch(_0x376d2d){warn('[sched]\x20ha'+_0x4d88de(0x2c5)+_0x4d88de(0x156)+'p\x20error:\x20'+(_0x376d2d?.[_0x4d88de(0x1ec)]||_0x376d2d));}}async function handleSchedCommandPM(_0x17c104,{sub:_0x4b067b,firstLine:_0x4c94a2,restText:_0x4bc119,firstTokens:_0x46ef54,targetChatJids:_0x34c6de,confirmationTarget:_0xaada6d,senderJid:_0xb53f,cleanedBody:_0x3f3a41}){const _0x517fcf=_0x53cd54;try{if(!_0x4b067b||_0x4b067b===_0x517fcf(0x282)){await sendWithRetry(_0xaada6d,{'text':USAGE});return;}if(_0x4b067b===_0x517fcf(0x23f)){const _0x1e1767=_0x46ef54[0x1577+0xc32+-0x1*0x21a7],_0x740132=_0x46ef54[-0x6bf*0x5+0xef4+0x25*0x82]&&/^\d+$/[_0x517fcf(0x2c3)](_0x46ef54[0x21c6+0x1967+-0x3b2a*0x1])?Number(_0x46ef54[0x1089+-0x1*-0x313+0x1d*-0xad]):null;let _0x2902a8=(_0x3f3a41||'')['trim']();!_0x2902a8&&_0x1e1767&&(_0x2902a8=extractInlineAfterToken(_0x4c94a2,_0x1e1767));if(!_0x1e1767||!_0x2902a8||_0x2902a8['trim']()['length']===-0x1*0x1cc9+0xb05+0x11c4){await sendWithRetry(_0xaada6d,{'text':'Usage:\x20sch'+_0x517fcf(0x2f2)+'H:mm>\x20[Nda'+_0x517fcf(0x2a1)+_0x517fcf(0x21a)+'include\x20gp'+_0x517fcf(0x317)+_0x517fcf(0x243)});return;}const _0x22920f=[];for(const _0x1b890e of _0x34c6de){const _0x41faea=await getChatTimezone(_0x1b890e)||DEFAULT_TIMEZONE,_0x78fcb0=parseTimeToken(_0x1e1767,_0x41faea);if(!_0x78fcb0){_0x22920f['push']({'chat':_0x1b890e,'ok':![],'reason':'parse_fail'+'ed'});continue;}if(_0x78fcb0[_0x517fcf(0x18a)]===_0x517fcf(0x176)){const _0x44118c=_0x78fcb0['dt'],_0x1bc45f=Math[_0x517fcf(0x1a6)](_0x44118c[_0x517fcf(0x2cc)]()/(-0x199e+0x21b1+-0x42b)),_0x1f534b=await addScheduleRow({'chat_jid':_0x1b890e,'message':_0x2902a8,'time':null,'send_at':_0x1bc45f,'frequency':_0x517fcf(0x23f),'timezone':_0x44118c['zoneName']||_0x41faea,'creator_jid':_0xb53f});if(_0x1f534b)_0x22920f[_0x517fcf(0x2b5)]({'chat':_0x1b890e,'ok':!![],'id':_0x1f534b,'when':_0x44118c[_0x517fcf(0x343)+_0x517fcf(0x201)](DateTime[_0x517fcf(0x3b5)+'ED'])});else _0x22920f['push']({'chat':_0x1b890e,'ok':![],'reason':_0x517fcf(0x155)});continue;}if(_0x78fcb0['type']===_0x517fcf(0x302)){const [_0x36c040,_0x24dc2e]=_0x78fcb0[_0x517fcf(0x302)][_0x517fcf(0x25e)](':')['map'](Number);let _0x287325=DateTime[_0x517fcf(0x245)]()[_0x517fcf(0x352)](_0x41faea),_0x5062c4=_0x287325[_0x517fcf(0x19f)](_0x517fcf(0x397))['set']({'hour':_0x36c040,'minute':_0x24dc2e,'second':0x0,'millisecond':0x0});if(_0x740132&&Number[_0x517fcf(0x2ff)](_0x740132)&&_0x740132>=-0x1a1b+-0x1cb9+0x1247*0x3)_0x5062c4=_0x5062c4['plus']({'days':Number(_0x740132)});else{if(_0x5062c4<=_0x287325)_0x5062c4=_0x5062c4[_0x517fcf(0x2fc)]({'days':0x1});}const _0x16f5fd=Math[_0x517fcf(0x1a6)](_0x5062c4[_0x517fcf(0x2cc)]()/(0x1*0xdd2+-0x136f+0x985*0x1)),_0x4738e0=await addScheduleRow({'chat_jid':_0x1b890e,'message':_0x2902a8,'time':null,'send_at':_0x16f5fd,'frequency':'once','timezone':_0x41faea,'creator_jid':_0xb53f});if(_0x4738e0)_0x22920f[_0x517fcf(0x2b5)]({'chat':_0x1b890e,'ok':!![],'id':_0x4738e0,'when':_0x5062c4[_0x517fcf(0x343)+_0x517fcf(0x201)](DateTime[_0x517fcf(0x3b5)+'ED'])});else _0x22920f['push']({'chat':_0x1b890e,'ok':![],'reason':_0x517fcf(0x155)});continue;}_0x22920f[_0x517fcf(0x2b5)]({'chat':_0x1b890e,'ok':![],'reason':'unsupporte'+_0x517fcf(0x27e)});}const _0x18552d=_0x22920f['filter'](_0x6d451d=>_0x6d451d['ok']),_0x3aefd5=_0x22920f['filter'](_0xac4d6d=>!_0xac4d6d['ok']);let _0x3971ff='';if(_0x18552d[_0x517fcf(0x2ad)]){_0x3971ff+=_0x517fcf(0x34e)+_0x517fcf(0x3e4)+'r\x20'+_0x18552d['length']+('\x20target(s)'+':\x0a');for(const _0x515955 of _0x18552d)_0x3971ff+='â€¢\x20'+_0x515955[_0x517fcf(0x264)]+_0x517fcf(0x288)+_0x515955['id']+'\x20at\x20'+_0x515955['when']+'\x0a';}if(_0x3aefd5[_0x517fcf(0x2ad)]){_0x3971ff+=_0x517fcf(0x241)+'\x20'+_0x3aefd5[_0x517fcf(0x2ad)]+(_0x517fcf(0x2d4)+':\x0a');for(const _0x1599d3 of _0x3aefd5)_0x3971ff+='â€¢\x20'+_0x1599d3[_0x517fcf(0x264)]+'\x20->\x20'+_0x1599d3['reason']+'\x0a';}await sendWithRetry(_0xaada6d,{'text':_0x3971ff[_0x517fcf(0x2e7)]()||_0x517fcf(0x330)+'es\x20created'+'.'});return;}if(_0x4b067b===_0x517fcf(0x3cc)){if(!_0x46ef54[0x685+-0x425*-0x5+-0xd9e*0x2]){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x3bb)+_0x517fcf(0x171)+_0x517fcf(0x185)+_0x517fcf(0x18c)+'|in\x20N\x20hour'+_0x517fcf(0x2a0)+_0x517fcf(0x27c)+_0x517fcf(0x230)+_0x517fcf(0x20b)+'id|all>'});return;}const _0x20357a=_0x46ef54[0x10b6+-0x22*-0x5b+0x2e1*-0xa],_0xfdcf19=_0x46ef54[-0x117c+-0x52*-0x17+0xa21]&&/^\d+$/[_0x517fcf(0x2c3)](_0x46ef54[0x13d9*0x1+-0x12c0+-0x2*0x8b])?Number(_0x46ef54[0x1d0d+0x3eb*-0x1+-0x191f*0x1]):null;let _0x283234=(_0x3f3a41||'')[_0x517fcf(0x2e7)]();!_0x283234&&(_0x283234=extractInlineAfterToken(_0x4c94a2,_0x20357a));if(!_0x283234||_0x283234[_0x517fcf(0x2e7)]()[_0x517fcf(0x2ad)]===0x7*0x18e+-0x8f7+0x1eb*-0x1){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x303)+_0x517fcf(0x216)+_0x517fcf(0x254)+_0x517fcf(0x26e)+_0x517fcf(0x2a6)+_0x517fcf(0x23c)+_0x517fcf(0x39b)+_0x517fcf(0x2f7)+_0x517fcf(0x32a)+'l>'});return;}const _0x2b5aa9=[];for(const _0x492fb1 of _0x34c6de){const _0x108a4f=await getChatTimezone(_0x492fb1)||DEFAULT_TIMEZONE,_0xce57c6=parseTimeToken(_0x20357a,_0x108a4f);if(!_0xce57c6){_0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':![],'reason':_0x517fcf(0x16a)+'ed'});continue;}const _0xab6fce=_0xb53f;if(_0xce57c6[_0x517fcf(0x18a)]===_0x517fcf(0x176)){const _0xe84ddf=_0xce57c6['dt'],_0x22ca3c=Math[_0x517fcf(0x1a6)](_0xe84ddf[_0x517fcf(0x2cc)]()/(0x1*0x269e+0x1890+0x36*-0x119)),_0x349ef0=await addScheduleRow({'chat_jid':_0x492fb1,'message':_0x283234,'time':null,'send_at':_0x22ca3c,'frequency':_0x517fcf(0x23f),'timezone':_0xe84ddf[_0x517fcf(0x34c)]||_0x108a4f,'creator_jid':_0xab6fce});if(_0x349ef0)_0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':!![],'id':_0x349ef0,'when':_0xe84ddf[_0x517fcf(0x343)+_0x517fcf(0x201)](DateTime[_0x517fcf(0x3b5)+'ED'])});else _0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':![],'reason':_0x517fcf(0x155)});continue;}if(_0xce57c6[_0x517fcf(0x18a)]===_0x517fcf(0x302)){const _0x434b75=_0xce57c6[_0x517fcf(0x302)];if(_0xfdcf19&&Number[_0x517fcf(0x2ff)](_0xfdcf19)&&_0xfdcf19>=-0x6f1*-0x3+-0x742*0x2+-0x64e*0x1){let _0x11169d=DateTime['now']()[_0x517fcf(0x352)](_0x108a4f);const [_0x32ae6c,_0x411739]=_0x434b75['split'](':')[_0x517fcf(0x3b4)](Number);let _0x217b48=_0x11169d[_0x517fcf(0x19f)](_0x517fcf(0x397))[_0x517fcf(0x321)]({'hour':_0x32ae6c,'minute':_0x411739,'second':0x0,'millisecond':0x0});_0x217b48=_0x217b48[_0x517fcf(0x2fc)]({'days':Number(_0xfdcf19)});const _0x228d12=Math[_0x517fcf(0x1a6)](_0x217b48[_0x517fcf(0x2cc)]()/(-0x259b+0xaf9+0x1e8a)),_0x3b7960=await addScheduleRow({'chat_jid':_0x492fb1,'message':_0x283234,'time':null,'send_at':_0x228d12,'frequency':_0x517fcf(0x23f),'timezone':_0x108a4f,'creator_jid':_0xab6fce});if(_0x3b7960)_0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':!![],'id':_0x3b7960,'when':_0x217b48[_0x517fcf(0x343)+_0x517fcf(0x201)](DateTime[_0x517fcf(0x3b5)+'ED'])});else _0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':![],'reason':_0x517fcf(0x155)});continue;}const _0x2f1e0f=await addScheduleRow({'chat_jid':_0x492fb1,'message':_0x283234,'time':_0x434b75,'send_at':null,'frequency':_0x517fcf(0x220),'timezone':_0x108a4f,'creator_jid':_0xab6fce});if(_0x2f1e0f)_0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':!![],'id':_0x2f1e0f,'when':_0x434b75+'\x20('+_0x108a4f+')'});else _0x2b5aa9[_0x517fcf(0x2b5)]({'chat':_0x492fb1,'ok':![],'reason':_0x517fcf(0x155)});continue;}_0x2b5aa9['push']({'chat':_0x492fb1,'ok':![],'reason':_0x517fcf(0x2cb)+_0x517fcf(0x27e)});}const _0x4db318=_0x2b5aa9[_0x517fcf(0x392)](_0xc29d45=>_0xc29d45['ok']),_0x335d8a=_0x2b5aa9['filter'](_0xf7566b=>!_0xf7566b['ok']);let _0x3916de='';if(_0x4db318[_0x517fcf(0x2ad)]){_0x3916de+=_0x517fcf(0x34e)+_0x517fcf(0x356)+_0x4db318[_0x517fcf(0x2ad)]+(_0x517fcf(0x2d4)+':\x0a');for(const _0x36b9f6 of _0x4db318)_0x3916de+='â€¢\x20'+_0x36b9f6[_0x517fcf(0x264)]+_0x517fcf(0x288)+_0x36b9f6['id']+_0x517fcf(0x3dc)+_0x36b9f6[_0x517fcf(0x344)]+'\x0a';}if(_0x335d8a[_0x517fcf(0x2ad)]){_0x3916de+=_0x517fcf(0x241)+'\x20'+_0x335d8a['length']+('\x20target(s)'+':\x0a');for(const _0xa32115 of _0x335d8a)_0x3916de+='â€¢\x20'+_0xa32115[_0x517fcf(0x264)]+_0x517fcf(0x21e)+_0xa32115[_0x517fcf(0x1ee)]+'\x0a';}await sendWithRetry(_0xaada6d,{'text':_0x3916de['trim']()||_0x517fcf(0x330)+_0x517fcf(0x366)+'.'});return;}if(_0x4b067b===_0x517fcf(0x2e0)){const _0x5ad87b=[];for(const _0x40581c of _0x34c6de){const _0x5df142=await listSchedulesForChat(_0x40581c);for(const _0x26a043 of _0x5df142)_0x5ad87b[_0x517fcf(0x2b5)]({'chatJid':_0x40581c,..._0x26a043});}if(!_0x5ad87b[_0x517fcf(0x2ad)]){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x3b3)+'\x20scheduled'+'\x20messages\x20'+_0x517fcf(0x38f)+'requested\x20'+'targets.'});return;}let _0x52f58c='';for(const _0x3ccbc4 of _0x5ad87b){const _0x4bcd70=_0x3ccbc4[_0x517fcf(0x18f)]?DateTime[_0x517fcf(0x1bb)](Number(_0x3ccbc4[_0x517fcf(0x18f)])*(-0x34a+0x267d+0x1*-0x1f4b))[_0x517fcf(0x352)](_0x3ccbc4['timezone']||DEFAULT_TIMEZONE)[_0x517fcf(0x21d)]({'suppressSeconds':!![]}):_0x3ccbc4[_0x517fcf(0x311)]?_0x3ccbc4[_0x517fcf(0x311)]+'\x20('+(_0x3ccbc4['timezone']||_0x517fcf(0x1dd)+_0x517fcf(0x24d))+')':_0x517fcf(0x3ae),_0x205742=(_0x3ccbc4[_0x517fcf(0x1ec)]||'')[_0x517fcf(0x25e)]('\x0a')[_0x517fcf(0x3b4)](_0x48ebe7=>_0x48ebe7[_0x517fcf(0x179)]())['join']('\x0a'),_0x30086b=_0x3ccbc4[_0x517fcf(0x1b8)]+':'+_0x3ccbc4['id']+_0x517fcf(0x3dc)+_0x4bcd70+'\x20freq:'+(_0x3ccbc4['frequency']||_0x517fcf(0x220))+_0x517fcf(0x2d7)+(_0x3ccbc4[_0x517fcf(0x188)]?_0x517fcf(0x233):'no')+_0x517fcf(0x30b)+_0x205742+'\x0a\x0a';(_0x52f58c+_0x30086b)[_0x517fcf(0x2ad)]>0xe01*0x2+0x1895+-0x7*0x6ad&&(await sendWithRetry(_0xaada6d,{'text':_0x52f58c[_0x517fcf(0x2e7)]()}),_0x52f58c=''),_0x52f58c+=_0x30086b;}if(_0x52f58c[_0x517fcf(0x2e7)]())await sendWithRetry(_0xaada6d,{'text':_0x52f58c[_0x517fcf(0x2e7)]()});return;}if(_0x4b067b===_0x517fcf(0x2e6)){const _0x212b65=_0x46ef54[_0x517fcf(0x153)](-0x2*0x1051+-0x123d+0x32e1);let _0x30bf4b=_0x212b65['join']('\x20');if(!_0x30bf4b&&_0x4bc119)_0x30bf4b=_0x4bc119[_0x517fcf(0x2e7)]();if(!_0x30bf4b){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x3bb)+_0x517fcf(0x385)+_0x517fcf(0x384)+'mber,numbe'+_0x517fcf(0x222)+_0x517fcf(0x3c9)+_0x517fcf(0x255)});return;}if(/^\s*all\s*$/i[_0x517fcf(0x2c3)](_0x30bf4b)){let _0x164c14=-0x1489+0x1*0x1073+-0x2*-0x20b;for(const _0x57c190 of _0x34c6de){const _0x4fbde3=await removeAllSchedulesForChat(_0x57c190);_0x164c14+=_0x4fbde3;}await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x20f)+_0x164c14+(_0x517fcf(0x173)+_0x517fcf(0x281)+_0x517fcf(0x17a)+_0x517fcf(0x151))});return;}const _0x333f43=_0x30bf4b[_0x517fcf(0x25e)](/[\s,]+/)['map'](_0x43af61=>_0x43af61[_0x517fcf(0x2e7)]())['filter'](Boolean),_0x4bb778=_0x333f43[_0x517fcf(0x3b4)](_0x28b1db=>Number(_0x28b1db))['filter'](_0x952ee9=>!Number[_0x517fcf(0x2e5)](_0x952ee9)&&Number[_0x517fcf(0x2ff)](_0x952ee9)&&_0x952ee9>0x671*0x5+0x11a5+-0x31da);if(!_0x4bb778['length']){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x2f1)+'ndexes\x20pro'+_0x517fcf(0x2c7)+_0x517fcf(0x26a)+'delete\x201\x202'+_0x517fcf(0x3c1)+_0x517fcf(0x3d8)+',2,3\x20OR\x20sc'+_0x517fcf(0x2f5)+_0x517fcf(0x395)+'lias|jid|a'+'ll>'});return;}const _0x5e6a65=[...new Set(_0x4bb778)],_0x382b10=await getCombinedSchedulesForChats(_0x34c6de),_0x33b846=[],_0x58be2d=[];for(const _0x3cfa48 of _0x5e6a65){if(_0x3cfa48<0x225d+-0x5*0x152+-0x176*0x13||_0x3cfa48>_0x382b10[_0x517fcf(0x2ad)]){_0x58be2d['push']({'n':_0x3cfa48,'reason':_0x517fcf(0x1b9)});continue;}const _0x45e7a4=_0x382b10[_0x3cfa48-(-0x9*0x89+0x6aa*-0x1+0x126*0xa)]['id'],_0x4032af=await removeScheduleByDBId(_0x45e7a4);if(_0x4032af)_0x33b846[_0x517fcf(0x2b5)]({'n':_0x3cfa48,'id':_0x45e7a4});else _0x58be2d[_0x517fcf(0x2b5)]({'n':_0x3cfa48,'reason':'db\x20delete\x20'+_0x517fcf(0x2b6)});}let _0x2473e7='';if(_0x33b846['length'])_0x2473e7+='Deleted\x20'+_0x33b846[_0x517fcf(0x2ad)]+('\x20schedule('+_0x517fcf(0x3c8))+_0x33b846[_0x517fcf(0x3b4)](_0x5b4964=>_0x5b4964['n']+_0x517fcf(0x1ab)+_0x5b4964['id']+')')[_0x517fcf(0x2b0)](',\x20')+'.\x0a';if(_0x58be2d[_0x517fcf(0x2ad)])_0x2473e7+=_0x517fcf(0x290)+_0x517fcf(0x3c3)+_0x58be2d[_0x517fcf(0x3b4)](_0x5aacfc=>_0x5aacfc['n']+'('+_0x5aacfc[_0x517fcf(0x1ee)]+')')[_0x517fcf(0x2b0)](',\x20')+'.';await sendWithRetry(_0xaada6d,{'text':_0x2473e7[_0x517fcf(0x2e7)]()||_0x517fcf(0x1c3)+_0x517fcf(0x221)});return;}if(_0x4b067b===_0x517fcf(0x1ff)){const _0x49d2b5=Number(_0x46ef54[0x1*-0x13d0+0x1ec7*0x1+0x11*-0xa5]),_0x39a0dd=_0x46ef54[0x2225+-0x15fe+-0xc24]||(_0x4bc119?_0x4bc119[_0x517fcf(0x25e)](/\r?\n/)[0x8cd+0x27f*-0xb+-0xc7*-0x18][_0x517fcf(0x2e7)]():null);if(!_0x49d2b5||!_0x39a0dd){await sendWithRetry(_0xaada6d,{'text':'Usage:\x20sch'+_0x517fcf(0x1b4)+_0x517fcf(0x35c)+_0x517fcf(0x18b)+'ours|YYYY-'+_0x517fcf(0x3e7)+_0x517fcf(0x37e)+_0x517fcf(0x189)+'>'});return;}const _0xf3b183=await getCombinedSchedulesForChats(_0x34c6de);if(!_0xf3b183||_0xf3b183['length']<_0x49d2b5){await sendWithRetry(_0xaada6d,{'text':'No\x20schedul'+_0x517fcf(0x399)+_0x49d2b5+(_0x517fcf(0x2a2)+_0x517fcf(0x2c6)+_0x517fcf(0x2a5)+'s.')});return;}const _0x19f987=_0xf3b183[_0x49d2b5-(0x2*-0x1124+0x62*-0x1e+0x2dc5)]['id'];if(!_0x19f987){await sendWithRetry(_0xaada6d,{'text':'No\x20schedul'+_0x517fcf(0x399)+_0x49d2b5+(_0x517fcf(0x2a2)+'oss\x20reques'+'ted\x20target'+'s.')});return;}const _0x4ff26b=parseTimeToken(_0x39a0dd,DEFAULT_TIMEZONE);if(!_0x4ff26b){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x290)+'parse\x20new\x20'+_0x517fcf(0x34f)});return;}if(_0x4ff26b[_0x517fcf(0x18a)]===_0x517fcf(0x176)){const _0xe46892=_0x4ff26b['dt'],_0x480d04=Math[_0x517fcf(0x1a6)](_0xe46892[_0x517fcf(0x2cc)]()/(-0x1aed+0x1c72*0x1+0x2f*0xd)),_0x1c07de=await updateScheduleFields(_0x19f987,{'send_at':_0x480d04,'time':null,'frequency':_0x517fcf(0x23f),'timezone':_0xe46892[_0x517fcf(0x34c)]||DEFAULT_TIMEZONE});if(_0x1c07de)await sendWithRetry(_0xaada6d,{'text':'Schedule\x20#'+_0x49d2b5+(_0x517fcf(0x3cb)+'o\x20one-off\x20'+_0x517fcf(0x24a))+_0xe46892['toLocaleSt'+'ring'](DateTime[_0x517fcf(0x3b5)+'ED'])+'\x20('+_0xe46892[_0x517fcf(0x34c)]+')'});else await sendWithRetry(_0xaada6d,{'text':'Failed\x20to\x20'+_0x517fcf(0x28b)+'edule.'});return;}else{if(_0x4ff26b[_0x517fcf(0x18a)]===_0x517fcf(0x302)){const _0x3556ef=_0x4ff26b[_0x517fcf(0x302)],_0x5b7ca1=_0xf3b183[_0x49d2b5-(0x15a6+0xb3c+-0x20e1)],_0x52317e=_0x5b7ca1[_0x517fcf(0x333)]||await getChatTimezone(_0x5b7ca1[_0x517fcf(0x2e3)])||DEFAULT_TIMEZONE,_0x41e2c9=await updateScheduleFields(_0x19f987,{'time':_0x3556ef,'send_at':null,'frequency':_0x517fcf(0x220),'timezone':_0x52317e});if(_0x41e2c9)await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x39c)+_0x49d2b5+(_0x517fcf(0x3cb)+_0x517fcf(0x370)+_0x517fcf(0x3c2))+_0x3556ef+'\x20('+_0x52317e+')'});else await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x290)+_0x517fcf(0x28b)+'edule.'});return;}else{await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x3ad)+'d\x20time\x20for'+'mat\x20for\x20ed'+_0x517fcf(0x374)});return;}}}if(_0x4b067b==='frequency'){const _0x476859=Number(_0x46ef54[-0x880+-0x1*-0x21d0+0x2*-0xca7]),_0x2d320d=Number(_0x46ef54[0x218e+0x787*0x4+-0x3fa7]);if(!_0x476859||!_0x2d320d||_0x2d320d<-0x318+0x17ed+-0x14d4){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x3bb)+'ed\x20frequen'+_0x517fcf(0x1d0)+_0x517fcf(0x3b6)+_0x517fcf(0x2e8)+_0x517fcf(0x17b)+_0x517fcf(0x191)+_0x517fcf(0x35f)+_0x517fcf(0x189)+'>'});return;}const _0x3116c5=await getCombinedSchedulesForChats(_0x34c6de);if(!_0x3116c5||_0x3116c5[_0x517fcf(0x2ad)]<_0x476859){await sendWithRetry(_0xaada6d,{'text':'No\x20schedul'+_0x517fcf(0x399)+_0x476859+(_0x517fcf(0x2a2)+_0x517fcf(0x2c6)+_0x517fcf(0x2a5)+'s.')});return;}const _0x1cc92b=_0x3116c5[_0x476859-(0x5e3*0x1+0x1d9f*-0x1+0x17bd)]['id'];if(!_0x1cc92b){await sendWithRetry(_0xaada6d,{'text':'No\x20schedul'+_0x517fcf(0x399)+_0x476859+(_0x517fcf(0x2a2)+_0x517fcf(0x2c6)+'ted\x20target'+'s.')});return;}let _0x418b80='daily';if(_0x2d320d===0x2e8+-0x1f53*0x1+0xd6*0x22)_0x418b80='daily';else _0x418b80=_0x517fcf(0x322)+_0x517fcf(0x3dd)+_0x2d320d;const _0x1818af=await updateScheduleFields(_0x1cc92b,{'frequency':_0x418b80});if(_0x1818af)await sendWithRetry(_0xaada6d,{'text':'Schedule\x20#'+_0x476859+(_0x517fcf(0x1cd)+_0x517fcf(0x35e))+_0x418b80});else await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x290)+_0x517fcf(0x236)+'quency.'});return;}if(_0x4b067b===_0x517fcf(0x358)||_0x4b067b===_0x517fcf(0x3ed)){const _0x1b75e4=Number(_0x46ef54[-0x1*-0x1fb1+0x19a*-0x5+-0x17ad]);if(!_0x1b75e4){await sendWithRetry(_0xaada6d,{'text':'Usage:\x20sch'+'ed\x20'+_0x4b067b+('\x20<number>\x20'+_0x517fcf(0x15a)+'jid|all>')});return;}const _0x3cd098=await getCombinedSchedulesForChats(_0x34c6de);if(!_0x3cd098||_0x3cd098['length']<_0x1b75e4){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x330)+_0x517fcf(0x399)+_0x1b75e4+('\x20found\x20acr'+_0x517fcf(0x2c6)+_0x517fcf(0x2a5)+'s.')});return;}const _0x1e2b82=_0x3cd098[_0x1b75e4-(-0x1f88+0x734+0x1855)]['id'];if(!_0x1e2b82){await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x330)+_0x517fcf(0x399)+_0x1b75e4+(_0x517fcf(0x2a2)+_0x517fcf(0x2c6)+'ted\x20target'+'s.')});return;}const _0x1b79a2=await updateScheduleFields(_0x1e2b82,{'enabled':_0x4b067b==='enable'?0x1121+0x1037+-0x2157:-0x1f21*0x1+-0xb84*0x1+0x9*0x4bd});if(_0x1b79a2)await sendWithRetry(_0xaada6d,{'text':_0x517fcf(0x39c)+_0x1b75e4+'\x20'+_0x4b067b+'d.'});else await sendWithRetry(_0xaada6d,{'text':'Failed\x20to\x20'+'update\x20ena'+_0x517fcf(0x1e3)+'.'});return;}await sendWithRetry(_0xaada6d,{'text':USAGE});}catch(_0x1759c4){warn(_0x517fcf(0x38b)+_0x517fcf(0x2c5)+_0x517fcf(0x36a)+'rror:\x20'+(_0x1759c4?.[_0x517fcf(0x1ec)]||_0x1759c4));}}export async function initialize(_0x46f8e2){const _0x5cfcd7=_0x53cd54;if(!_0x46f8e2)throw new Error(_0x5cfcd7(0x365)+_0x5cfcd7(0x181)+'uires\x20bot\x20'+'instance');setupSendApi(_0x46f8e2),refreshConfig();try{await ensureSchema();}catch(_0x4461b4){error(_0x5cfcd7(0x331)+_0x5cfcd7(0x25b)+'iled:\x20'+(_0x4461b4?.[_0x5cfcd7(0x1ec)]||_0x4461b4));throw _0x4461b4;}try{startManagedListener({'botRef':_0x46f8e2,'eventName':'connection'+'.update','handler':_0x3d2228=>{const _0x292db6=_0x5cfcd7;try{info('[sched]\x20co'+_0x292db6(0x36d)+_0x292db6(0x3e6)+_0x292db6(0x1b7)+_0x292db6(0x246)+_0x292db6(0x17f)+'ed\x20listene'+'r)'),setupSendApi(_0x46f8e2);}catch(_0x25bee3){warn(_0x292db6(0x19b)+_0x292db6(0x36d)+_0x292db6(0x1ef)+'ler\x20error:'+'\x20'+(_0x25bee3?.['message']||_0x25bee3));}},'moduleName':name});}catch(_0xe89ed3){warn(_0x5cfcd7(0x274)+_0x5cfcd7(0x267)+_0x5cfcd7(0x1a0)+_0x5cfcd7(0x1b1)+_0x5cfcd7(0x30d)+_0x5cfcd7(0x29c)+_0x5cfcd7(0x2e1)+(_0xe89ed3?.[_0x5cfcd7(0x1ec)]||_0xe89ed3));}startSchedulerAligned(),info('[sched]\x20in'+'itialized\x20'+_0x5cfcd7(0x2d1)+_0x5cfcd7(0x2ec)+_0x5cfcd7(0x3a4)+_0x5cfcd7(0x3e9)+_0x5cfcd7(0x3c4));}export async function cleanup(){const _0x3cf9d9=_0x53cd54;try{stopScheduler();try{stopManagedListener(name,_0x3cf9d9(0x1e8)+'.update');}catch(_0x100436){}}catch(_0xf2550a){warn(_0x3cf9d9(0x1ac)+_0x3cf9d9(0x28d)+'r:\x20'+(_0xf2550a?.['message']||_0xf2550a));}finally{botRef=null,sendApi=null,info(_0x3cf9d9(0x1ac)+_0x3cf9d9(0x2f4));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};