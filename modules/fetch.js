const _0x40fb42=_0x5ca7;(function(_0x5c8656,_0x2c0461){const _0xd0f619=_0x5ca7,_0x4671a2=_0x5c8656();while(!![]){try{const _0x137cd3=parseInt(_0xd0f619(0x1e1))/(-0x1a8c+-0x1686+-0x1*-0x3113)+-parseInt(_0xd0f619(0x1bf))/(-0x88c+0x1af4+0x5*-0x3ae)*(parseInt(_0xd0f619(0x1a7))/(-0xb*0x275+-0xd43*-0x1+0x1*0xdc7))+parseInt(_0xd0f619(0x1a1))/(-0x18e9+0x9e*0x3b+0xb7d*-0x1)+parseInt(_0xd0f619(0x1c4))/(0x26a1+-0x5fc*0x5+-0x8b0)+parseInt(_0xd0f619(0x1bb))/(-0x88f+-0x1*-0x183e+-0x13*0xd3)+parseInt(_0xd0f619(0x1dd))/(0x87e+-0x6d+-0x62*0x15)+-parseInt(_0xd0f619(0x1d9))/(0xc70*0x1+-0xa1d+-0x1*0x24b);if(_0x137cd3===_0x2c0461)break;else _0x4671a2['push'](_0x4671a2['shift']());}catch(_0x2e9bb0){_0x4671a2['push'](_0x4671a2['shift']());}}}(_0x6f24,-0x28*0x26d5+0x7*0x2bf3+0xa5c64));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';function _0x5ca7(_0x5d9a0d,_0x2722fc){const _0x28339c=_0x6f24();return _0x5ca7=function(_0x30be35,_0x398beb){_0x30be35=_0x30be35-(0x1542+-0x17*-0x82+-0x1f63);let _0x198a35=_0x28339c[_0x30be35];return _0x198a35;},_0x5ca7(_0x5d9a0d,_0x2722fc);}export const name='fetch';export const version=_0x40fb42(0x1cf);export const priority=-0x2f*-0x2c+0x65*-0x2e+0x287*0x4;function _0x6f24(){const _0x42719e=['g\x20(PM-only',':\x20replied\x20','\x20handler\x20e','\x20command).','Fetch\x20fail','fetch','get','edMatchFro','slice','nt\x20from\x20','\x20cleanup\x20e','1058596RzptWi','add',':\x20initiali','arrayBuffe','L\x20and\x20retu','test','203703Ggyqdi','size','endsWith','rror:\x20','content-le','clear','bot',':\x20botInsta','origin','o\x20large:\x20','sendMessag','t\x20determin','trim','catch','nce\x20missin','zed.','fromMe','from','\x20to\x20','unknown','986316ZAMHXg','\x20â€”\x20ignorin','text',':\x20received','12mdfwIp','Error\x20fetc','statusText','message','stination\x20','1735725PwLqHS','status','startsWith','client','ed:\x20','ngth','isArray','string','length','>\x20>\x20*BMW\x20M','\x20fetch\x20err','1.0.2','ch\x20<url>\x0aF','\x20public\x20UR','isCommand','e\x20final\x20de','has','with\x20conte','for\x20messag','https://','jid','3491720IruvqY','search','URL\x20with\x20h','mFindings\x20','2292108bioyid',':\x20unknown\x20','\x20cleaned\x20u','@g.us','100376dVUzpC','\x20in\x20group\x20','stringify','remoteJid','chatId;\x20sk','key','etches\x20any','rror','error:\x20','pathname','video/text'];_0x6f24=function(){return _0x42719e;};return _0x6f24();}let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x2284f4=[]){const _0x1a2b8a=_0x40fb42;try{if(!Array[_0x1a2b8a(0x1ca)](_0x2284f4)||_0x2284f4['length']===0x1c54+-0x15*0xb4+0x8*-0x1b2)return null;const _0x4f5b0c=await listSudo();if(!Array[_0x1a2b8a(0x1ca)](_0x4f5b0c)||_0x4f5b0c[_0x1a2b8a(0x1cc)]===-0x1*-0xcb9+0x1827+0x28*-0xec)return null;const _0x311286=new Set(_0x4f5b0c['map'](_0x14167c=>String(_0x14167c)));for(const _0x2b4f32 of _0x2284f4){if(!_0x2b4f32?.[_0x1a2b8a(0x1d8)]||typeof _0x2b4f32[_0x1a2b8a(0x1d8)]!==_0x1a2b8a(0x1cb))continue;const _0x207ac8=normalizeToJid(_0x2b4f32['jid']);if(_0x207ac8&&_0x311286[_0x1a2b8a(0x1d4)](_0x207ac8))return _0x207ac8;if(_0x311286[_0x1a2b8a(0x1d4)](_0x2b4f32[_0x1a2b8a(0x1d8)]))return _0x2b4f32['jid'];}return null;}catch(_0x4d384a){return warn(name+(':\x20findStor'+_0x1a2b8a(0x19d)+_0x1a2b8a(0x1dc)+_0x1a2b8a(0x193))+(_0x4d384a?.[_0x1a2b8a(0x1c2)]||_0x4d384a)),null;}}export async function initialize(_0x53d684){const _0x4f3abc=_0x40fb42;botInstance=_0x53d684,info(name+(_0x4f3abc(0x1a3)+_0x4f3abc(0x1b6)));}export async function onMessage(_0x2202c4){const _0x13a21a=_0x40fb42;try{if(!_0x2202c4||!_0x2202c4[_0x13a21a(0x190)])return;const _0x21f0f8=_0x2202c4['key']['id'];if(_0x21f0f8&&respondedMsgIds['has'](_0x21f0f8))return;if(!_0x2202c4[_0x13a21a(0x1d2)])return;const _0x39337c=(_0x2202c4[_0x13a21a(0x1bd)]||'')[_0x13a21a(0x1b3)]();if(!_0x39337c['toLowerCas'+'e']()[_0x13a21a(0x1c6)](_0x13a21a(0x19b)))return;if(_0x21f0f8)respondedMsgIds[_0x13a21a(0x1a2)](_0x21f0f8);const _0xd57589=_0x39337c[_0x13a21a(0x1cc)]>-0x1813+0xa5b+0xdbd?_0x39337c[_0x13a21a(0x19e)](-0x12c8*-0x1+-0x225e+0xf9b*0x1)[_0x13a21a(0x1b3)]():'',_0x2fb878=_0x2202c4[_0x13a21a(0x18e)]||_0x2202c4['key'][_0x13a21a(0x18e)]||_0x13a21a(0x1ba);if(_0x2fb878===_0x13a21a(0x1ba)){warn(name+(_0x13a21a(0x1de)+_0x13a21a(0x18f)+'ipping.'));return;}const _0x325280=_0x2fb878[_0x13a21a(0x1a9)](_0x13a21a(0x1e0));if(_0x325280){info(name+(_0x13a21a(0x1be)+_0x13a21a(0x1e2))+_0x2fb878+(_0x13a21a(0x1bc)+_0x13a21a(0x196)+_0x13a21a(0x199)));return;}if(!botInstance){botInstance=_0x2202c4[_0x13a21a(0x1ad)]||_0x2202c4[_0x13a21a(0x1c7)]||null;if(!botInstance){warn(name+(_0x13a21a(0x1ae)+_0x13a21a(0x1b5)+'g;\x20cannot\x20'+'proceed.'));return;}}const _0x382189=getBotJid();let _0x161ccd=_0x382189;const _0x233ff6=Boolean(_0x2202c4[_0x13a21a(0x190)][_0x13a21a(0x1b7)]);if(!_0x233ff6){const _0x294c03=await isSudo(botInstance,_0x2202c4)[_0x13a21a(0x1b4)](()=>![]);if(!_0x294c03)return;const {findings:_0x32ba65}=userJidFromCtx(_0x2202c4),_0x19b580=await findStoredMatchFromFindings(_0x32ba65);if(!_0x19b580)return;_0x161ccd=_0x19b580;}if(!_0x161ccd){warn(name+(':\x20Could\x20no'+_0x13a21a(0x1b2)+_0x13a21a(0x1d3)+_0x13a21a(0x1c3)+_0x13a21a(0x1d6)+'e.'));return;}if(!_0xd57589){await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'text':'Usage:\x20fet'+_0x13a21a(0x1d0)+_0x13a21a(0x191)+_0x13a21a(0x1d1)+_0x13a21a(0x1a5)+'rns\x20image/'+_0x13a21a(0x195)+'/document.'});return;}if(!/^https?:\/\//[_0x13a21a(0x1a6)](_0xd57589)){await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'text':'Start\x20the\x20'+_0x13a21a(0x1db)+'ttp://\x20or\x20'+_0x13a21a(0x1d7)});return;}try{const _0x1eb127=new URL(_0xd57589),_0x408769=''+_0x1eb127[_0x13a21a(0x1af)]+_0x1eb127[_0x13a21a(0x194)]+(_0x1eb127[_0x13a21a(0x1da)]?'?'+_0x1eb127['searchPara'+'ms']['toString']():''),_0x2f904d=await fetch(_0x408769);if(!_0x2f904d['ok']){await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'text':_0x13a21a(0x19a)+_0x13a21a(0x1c8)+_0x2f904d[_0x13a21a(0x1c5)]+'\x20'+_0x2f904d[_0x13a21a(0x1c1)]});return;}const _0x50caac=_0x2f904d['headers'][_0x13a21a(0x19c)](_0x13a21a(0x1ab)+_0x13a21a(0x1c9));if(_0x50caac&&parseInt(_0x50caac)>-0x949a37f+0x1f1ff*-0x547+0xec2*0x1bf9c){await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'text':'Content\x20to'+_0x13a21a(0x1b0)+_0x50caac});return;}const _0x334cee=_0x2f904d['headers'][_0x13a21a(0x19c)]('content-ty'+'pe')||'',_0x3a6c4a=Buffer['from'](await _0x2f904d[_0x13a21a(0x1a4)+'r']());if(/^image\//[_0x13a21a(0x1a6)](_0x334cee))await botInstance['sendMessag'+'e'](_0x161ccd,{'image':{'url':_0x408769},'caption':_0x13a21a(0x1cd)+'D*'},{'quoted':_0x2202c4['ms']});else{if(/^video\//[_0x13a21a(0x1a6)](_0x334cee))await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'video':{'url':_0x408769},'caption':_0x13a21a(0x1cd)+'D*'},{'quoted':_0x2202c4['ms']});else{if(/text|json/[_0x13a21a(0x1a6)](_0x334cee)){let _0xf9a524;try{const _0x186ea6=JSON['parse'](_0x3a6c4a);_0xf9a524=JSON[_0x13a21a(0x18d)](_0x186ea6,null,-0x439+-0x188b+0x1cc6);}catch{_0xf9a524=_0x3a6c4a['toString']();}await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'text':_0xf9a524['slice'](-0xfb3*0x1+-0x1639+0x12f6*0x2,-0x25ec*0x1+-0x2327*-0x1+0x29d5)});}else await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'document':{'url':_0x408769},'caption':_0x13a21a(0x1cd)+'D*'},{'quoted':_0x2202c4['ms']});}}info(name+(_0x13a21a(0x197)+_0x13a21a(0x1d5)+_0x13a21a(0x19f))+_0x408769+_0x13a21a(0x1b9)+_0x161ccd);}catch(_0x4785b5){error(_0x4785b5,name+(_0x13a21a(0x1ce)+'or')),await botInstance[_0x13a21a(0x1b1)+'e'](_0x161ccd,{'text':_0x13a21a(0x1c0)+'hing:\x20'+_0x4785b5[_0x13a21a(0x1c2)]});}if(respondedMsgIds[_0x13a21a(0x1a8)]>0xe51+-0x1*0x7f+0x5b6){const _0x3b0bb0=Array[_0x13a21a(0x1b8)](respondedMsgIds);respondedMsgIds=new Set(_0x3b0bb0[_0x13a21a(0x19e)](-(-0x7*-0x4a9+0x1d9f*0x1+-0x3286)));}}catch(_0x5a34b7){error(_0x5a34b7,name+(_0x13a21a(0x198)+_0x13a21a(0x192)));}}export async function cleanup(){const _0x553b59=_0x40fb42;try{botInstance=null,respondedMsgIds[_0x553b59(0x1ac)](),info(name+(_0x553b59(0x1df)+'p'));}catch(_0x1691b1){warn(name+(_0x553b59(0x1a0)+_0x553b59(0x1aa))+(_0x1691b1?.[_0x553b59(0x1c2)]||_0x1691b1));}}