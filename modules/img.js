function _0x78f6(_0x2a04f0,_0x1aaaad){const _0x3971f8=_0x3f02();return _0x78f6=function(_0x194c7f,_0x4c4662){_0x194c7f=_0x194c7f-(-0xcc5*-0x3+0x161d+-0x3a7a);let _0x1ecdc8=_0x3971f8[_0x194c7f];return _0x1ecdc8;},_0x78f6(_0x2a04f0,_0x1aaaad);}(function(_0x346c75,_0x133e15){const _0x5961f0=_0x78f6,_0x5c9881=_0x346c75();while(!![]){try{const _0x5a4933=parseInt(_0x5961f0(0x229))/(-0x238b+-0x268d+0x3*0x18b3)+parseInt(_0x5961f0(0x20b))/(0x17fd+0x1*0x1cbe+0xb*-0x4cb)+parseInt(_0x5961f0(0x20e))/(0x1b0b+-0x92*-0x3b+-0x3cae)+parseInt(_0x5961f0(0x24e))/(0x1838*0x1+-0x4*0x8b7+-0xaa8*-0x1)+parseInt(_0x5961f0(0x24f))/(-0x1*-0x673+-0x31b*-0x9+-0x2261)+-parseInt(_0x5961f0(0x215))/(-0x24ae+-0xb7b*0x1+-0x302f*-0x1)+-parseInt(_0x5961f0(0x23d))/(0x1aec+-0x1c*-0x158+-0x4085)*(parseInt(_0x5961f0(0x238))/(-0x1c36+0xa67+0x11d7));if(_0x5a4933===_0x133e15)break;else _0x5c9881['push'](_0x5c9881['shift']());}catch(_0x4820d4){_0x5c9881['push'](_0x5c9881['shift']());}}}(_0x3f02,-0x1a940+-0x838d9*0x1+0x2d9e8*0x5));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x4833f0 from'axios';export const name='img';export const version='1.0.8';function _0x3f02(){const _0x5cdba9=['edMatch\x20er','arch\x20faile','fromMe','add','Mozilla/5.','img','\x20cleanup\x20e','\x20a\x20search\x20','\x22$2\x22:','message','murl','exec','http','rror:\x20','clear','term.\x20Exam','1672100igoCtR','1877830uJbPHY','e\x20final\x20de','\x20handler\x20e','push','):\x20','parse','right\x20now.','\x20images\x20to','.com)','toLowerCas',':\x20Could\x20no','sourcePage','trim',')...','replace','key','data','mg\x201\x20trees','nce\x20missin',':\x20send\x20ima','your\x20searc','Result:\x20','&form=HDRS','sendMessag','startsWith','ror:\x20','zed.','string','join','arch?q=',':\x20findStor','max','1005862wDdxuq','\x20sunsets','&tsc=Image','934860BJEujR','direct\x20URL','\x0a•\x20img\x203\x20:','0\x20(compati','thumb','found\x20for\x20','https://ww','508464owmeBk','g\x20cats\x0a•\x20i','/images/se','C2&first=1','Which\x20imag',':\x20image\x20se','length','t\x20determin','Searching\x20','ples:\x0a•\x20im','.0;\x20+https','text','stination\x20','w.bing.com','turl','slice','\x22\x20(sending','ch\x20failed:','rror','BasicHover','258969ppRDXC','url','h\x20term.','isCommand',':\x20botInsta','ge\x20error','unknown','images\x20for','Found\x20(no\x20','Image\x20sear','jid','bot','split',':\x20sent\x20','No\x20images\x20','8eVFbCa','size','has','client','get','10470544RBPKoo'];_0x3f02=function(){return _0x5cdba9;};return _0x3f02();}export const priority=0xbb6*0x2+-0xdd5+-0x1e9*0x5;let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x284b11=[]){const _0x484a05=_0x78f6;try{const _0xb4bc5=await listSudo(),_0x1ac315=new Set(_0xb4bc5['map'](String));for(const _0x4354a4 of _0x284b11){if(!_0x4354a4||typeof _0x4354a4[_0x484a05(0x233)]!==_0x484a05(0x206))continue;const _0x162f5f=normalizeToJid(_0x4354a4['jid']);if(_0x162f5f&&_0x1ac315[_0x484a05(0x23a)](_0x162f5f))return _0x162f5f;if(_0x1ac315[_0x484a05(0x23a)](_0x4354a4[_0x484a05(0x233)]))return _0x4354a4[_0x484a05(0x233)];}return null;}catch(_0x3ef0de){return warn(name+(_0x484a05(0x209)+_0x484a05(0x23e)+_0x484a05(0x204))+(_0x3ef0de?.[_0x484a05(0x247)]||_0x3ef0de)),null;}}function htmlUnescape(_0x14cc8b){const _0x38fafe=_0x78f6;if(!_0x14cc8b||typeof _0x14cc8b!==_0x38fafe(0x206))return _0x14cc8b;return _0x14cc8b[_0x38fafe(0x1f9)](/&quot;/g,'\x22')[_0x38fafe(0x1f9)](/&#39;/g,'\x27')[_0x38fafe(0x1f9)](/&amp;/g,'&')[_0x38fafe(0x1f9)](/&lt;/g,'<')[_0x38fafe(0x1f9)](/&gt;/g,'>')[_0x38fafe(0x1f9)](/&nbsp;/g,'\x20');}function tryParseJsonSafe(_0x147b1a){const _0x48f630=_0x78f6;if(!_0x147b1a||typeof _0x147b1a!=='string')return null;try{return JSON[_0x48f630(0x254)](_0x147b1a);}catch(_0x26ff41){try{const _0x5acf53=htmlUnescape(_0x147b1a);return JSON[_0x48f630(0x254)](_0x5acf53);}catch(_0x302877){try{const _0xfd13d6=htmlUnescape(_0x147b1a)[_0x48f630(0x1f9)](/(['"])?([a-zA-Z0-9_]+)\1\s*:/g,_0x48f630(0x246))[_0x48f630(0x1f9)](/:\s*'([^']*)'/g,':\x20\x22$1\x22');return JSON[_0x48f630(0x254)](_0xfd13d6);}catch(_0x31a21e){return null;}}}}async function searchBingNoCheerio(_0x1939ae,_0x36deb8=-0x9d8+0x1844+-0xe64){const _0x2e6f09=_0x78f6;try{const _0x2b696b=encodeURIComponent(_0x1939ae),_0x4ba7ae=_0x2e6f09(0x214)+_0x2e6f09(0x222)+_0x2e6f09(0x217)+_0x2e6f09(0x208)+_0x2b696b+(_0x2e6f09(0x201)+_0x2e6f09(0x218)+_0x2e6f09(0x20d)+_0x2e6f09(0x228)),_0x58a61a=await _0x4833f0[_0x2e6f09(0x23c)](_0x4ba7ae,{'headers':{'User-Agent':_0x2e6f09(0x242)+_0x2e6f09(0x211)+'ble;\x20Bot/1'+_0x2e6f09(0x21f)+'://example'+_0x2e6f09(0x1f3)},'responseType':_0x2e6f09(0x220),'maxRedirects':0x5}),_0x443ea1=String(_0x58a61a[_0x2e6f09(0x1fb)]||''),_0x422843=/ m=(?:"([^"]+)"|'([^']+)')/g,_0x1a48b9=[];let _0x20762d;while((_0x20762d=_0x422843[_0x2e6f09(0x249)](_0x443ea1))&&_0x1a48b9['length']<_0x36deb8){const _0x14adfc=_0x20762d[-0x2*0xfe5+0x204+0x1dc7]||_0x20762d[-0x12f0+0x1028+0x2ca];if(!_0x14adfc)continue;const _0x2d0c1b=htmlUnescape(_0x14adfc),_0x51d811=tryParseJsonSafe(_0x2d0c1b);if(!_0x51d811)continue;const _0x2c6a68=_0x51d811[_0x2e6f09(0x248)]||_0x51d811['m']||_0x51d811[_0x2e6f09(0x223)]||_0x51d811['p']||null;if(!_0x2c6a68)continue;_0x1a48b9['push']({'url':_0x2c6a68,'thumb':_0x51d811[_0x2e6f09(0x223)]||null,'sourcePage':_0x51d811['p']||null,'title':_0x51d811['t']||null});}if(_0x1a48b9[_0x2e6f09(0x21b)]===0x11dd+0x179f+-0x297c){const _0x47d020=/<img[^>]+(?:data-src|src|data-thumb)=["']([^"']+)["'][^>]*>/g;while((_0x20762d=_0x47d020[_0x2e6f09(0x249)](_0x443ea1))&&_0x1a48b9[_0x2e6f09(0x21b)]<_0x36deb8){const _0x30705c=_0x20762d[0x9*0x31d+-0xfe+0xd83*-0x2];_0x30705c&&String(_0x30705c)[_0x2e6f09(0x203)]('http')&&_0x1a48b9[_0x2e6f09(0x252)]({'url':_0x30705c,'thumb':_0x30705c,'sourcePage':null,'title':null});}}return _0x1a48b9[_0x2e6f09(0x224)](-0x4*-0x482+0x3*0x3e7+-0x14b*0x17,_0x36deb8);}catch(_0x4d4a5e){throw _0x4d4a5e;}}async function performImageSearch(_0x17f5d2,_0x1c8a02=-0x1*-0x2681+-0x5a5*0x1+-0x20d4){const _0x50f68=_0x78f6;try{const _0x121a67=await searchBingNoCheerio(_0x17f5d2,_0x1c8a02);return _0x121a67;}catch(_0x401677){throw new Error(_0x50f68(0x232)+_0x50f68(0x226)+'\x20'+(_0x401677?.[_0x50f68(0x247)]||_0x401677));}}export async function initialize(_0x47eb92){const _0x11014b=_0x78f6;botInstance=_0x47eb92,info(name+(':\x20initiali'+_0x11014b(0x205)));}export async function onMessage(_0x32cc9f){const _0x3ed865=_0x78f6;try{if(!_0x32cc9f?.[_0x3ed865(0x1fa)]||!_0x32cc9f[_0x3ed865(0x22c)])return;const _0x16e06f=_0x32cc9f[_0x3ed865(0x1fa)]['id'];if(_0x16e06f&&respondedMsgIds['has'](_0x16e06f))return;if(_0x16e06f)respondedMsgIds[_0x3ed865(0x241)](_0x16e06f);const _0x10b622=(_0x32cc9f['text']||'')[_0x3ed865(0x1f7)]();if(!_0x10b622[_0x3ed865(0x1f4)+'e']()['startsWith'](_0x3ed865(0x243)))return;const _0x507966=_0x10b622[_0x3ed865(0x235)](/\s+/),_0x5dfa16=_0x507966[-0x2*0xf59+0x16eb+0xb5*0xb][_0x3ed865(0x1f4)+'e']();if(_0x5dfa16!==_0x3ed865(0x243))return;if(!botInstance)botInstance=_0x32cc9f[_0x3ed865(0x234)]||_0x32cc9f[_0x3ed865(0x23b)];if(!botInstance){warn(name+(_0x3ed865(0x22d)+_0x3ed865(0x1fd)+'g'));return;}const _0x2d3ac1=getBotJid();let _0x2ddc85;if(_0x32cc9f['key'][_0x3ed865(0x240)])_0x2ddc85=_0x2d3ac1;else{const _0x16ec25=await isSudo(botInstance,_0x32cc9f)['catch'](()=>![]);if(!_0x16ec25)return;const {findings:_0x44cefe}=userJidFromCtx(_0x32cc9f),_0x814701=await findStoredMatchFromFindings(_0x44cefe);if(!_0x814701)return;_0x2ddc85=_0x814701;}if(!_0x2ddc85){warn(name+(_0x3ed865(0x1f5)+_0x3ed865(0x21c)+_0x3ed865(0x250)+_0x3ed865(0x221)+'for\x20messag'+'e.'));return;}let _0x225143=0xfaa+-0x1ace+0xb2a,_0xa895d2=_0x507966['slice'](0x9e1+0x1997*0x1+-0x2377)[_0x3ed865(0x207)]('\x20');if(_0x507966[_0x3ed865(0x21b)]>=0x1113+0xd*-0x281+-0x7be*-0x2){const _0x24715b=parseInt(_0x507966[-0x2517+-0x10a3+0x35bb],0x126f+-0xb*-0x1da+-0x26c3);if(!Number['isNaN'](_0x24715b)){_0x225143=Math[_0x3ed865(0x20a)](0x1*-0x1a03+0x18*-0x122+0x8de*0x6,_0x24715b);if(_0x225143>-0x215b+-0x1e90+-0x3ff1*-0x1)_0x225143=-0x1cc2*0x1+-0x16c0+-0x3388*-0x1;_0xa895d2=_0x507966[_0x3ed865(0x224)](-0x1*-0xa49+0x1*0x1d8e+-0x27d5*0x1)['join']('\x20');}else _0x225143=0x6*-0x4a2+-0x25e8+0x41ba,_0xa895d2=_0x507966[_0x3ed865(0x224)](0x13*-0xb+-0x20a4+0x2176)[_0x3ed865(0x207)]('\x20');}_0xa895d2=(_0xa895d2||'')[_0x3ed865(0x1f7)]();if(!_0xa895d2){await botInstance['sendMessag'+'e'](_0x2ddc85,{'text':_0x3ed865(0x219)+'e?\x20Provide'+_0x3ed865(0x245)+_0x3ed865(0x24d)+_0x3ed865(0x21e)+_0x3ed865(0x216)+_0x3ed865(0x1fc)+_0x3ed865(0x210)+_0x3ed865(0x20c)});return;}try{await botInstance[_0x3ed865(0x202)+'e'](_0x2ddc85,{'text':'Searching\x20'+_0x3ed865(0x230)+'\x20\x22'+_0xa895d2+(_0x3ed865(0x225)+'\x20')+_0x225143+_0x3ed865(0x1f8)},{'quoted':_0x32cc9f['ms']});}catch(_0x459917){try{await botInstance['sendMessag'+'e'](_0x2ddc85,{'text':_0x3ed865(0x21d)+'images\x20for'+'\x20\x22'+_0xa895d2+('\x22\x20(sending'+'\x20')+_0x225143+')...'});}catch(_0x48c046){}}let _0x2b3109;try{_0x2b3109=await performImageSearch(_0xa895d2,Math[_0x3ed865(0x20a)](0x1ab7+-0x521+0x1a9*-0xd,_0x225143));}catch(_0x24b951){error(_0x24b951,name+(_0x3ed865(0x21a)+_0x3ed865(0x23f)+'d')),await botInstance['sendMessag'+'e'](_0x2ddc85,{'text':_0x3ed865(0x232)+'ch\x20failed\x20'+_0x3ed865(0x255)});return;}if(!Array['isArray'](_0x2b3109)||_0x2b3109[_0x3ed865(0x21b)]===0x1b81+0x11*0x79+0x238a*-0x1){await botInstance[_0x3ed865(0x202)+'e'](_0x2ddc85,{'text':_0x3ed865(0x237)+_0x3ed865(0x213)+_0x3ed865(0x1ff)+_0x3ed865(0x22b)});return;}const _0x2920d8=_0x2b3109[_0x3ed865(0x224)](0x1934+0x13e4+-0x2d18,_0x225143);for(const _0xec8463 of _0x2920d8){try{_0xec8463[_0x3ed865(0x22a)]&&String(_0xec8463[_0x3ed865(0x22a)])[_0x3ed865(0x203)](_0x3ed865(0x24a))?await botInstance[_0x3ed865(0x202)+'e'](_0x2ddc85,{'image':{'url':_0xec8463[_0x3ed865(0x22a)]},'caption':_0x3ed865(0x200)+_0xa895d2},{'quoted':_0x32cc9f['ms']}):await botInstance[_0x3ed865(0x202)+'e'](_0x2ddc85,{'text':_0x3ed865(0x231)+_0x3ed865(0x20f)+_0x3ed865(0x253)+(_0xec8463[_0x3ed865(0x1f6)]||_0xec8463[_0x3ed865(0x212)]||_0x3ed865(0x22f))});}catch(_0x2b2544){error(_0x2b2544,name+(_0x3ed865(0x1fe)+_0x3ed865(0x22e)));if(_0xec8463[_0x3ed865(0x1f6)])try{await botInstance['sendMessag'+'e'](_0x2ddc85,{'text':'Source:\x20'+_0xec8463[_0x3ed865(0x1f6)]});}catch(_0x56560a){}}}info(name+_0x3ed865(0x236)+_0x2920d8['length']+(_0x3ed865(0x1f2)+'\x20')+_0x2ddc85);if(respondedMsgIds[_0x3ed865(0x239)]>-0x814+-0x13bd+0x20f*0x17){const _0x444d36=Array['from'](respondedMsgIds);respondedMsgIds=new Set(_0x444d36[_0x3ed865(0x224)](-(0x2346+-0x2250+-0xac2*-0x1)));}}catch(_0x5c6b87){error(_0x5c6b87,name+(_0x3ed865(0x251)+_0x3ed865(0x227)));}}export async function cleanup(){const _0x35842a=_0x78f6;try{botInstance=null,respondedMsgIds[_0x35842a(0x24c)](),info(name+('\x20cleaned\x20u'+'p'));}catch(_0x17fa41){warn(name+(_0x35842a(0x244)+_0x35842a(0x24b))+(_0x17fa41?.['message']||_0x17fa41));}}