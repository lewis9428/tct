function _0x3e7e(){const _0x374fcf=['51166NrtwNa',':\x20\x22$1\x22','text','/images/se','\x20cleaned\x20u','thumb','arch\x20faile','e?\x20Provide',':\x20initiali','map','data','C2&first=1','parse','\x22$2\x22:','exec','size','://example','ch\x20failed\x20',')...','has','\x0a•\x20img\x203\x20:','found\x20for\x20','from','No\x20images\x20','ples:\x0a•\x20im','images\x20for','522669qayPJH','sendMessag','http','\x22\x20(sending','slice','jid','ror:\x20','Searching\x20','\x20sunsets','direct\x20URL','0\x20(compati','message','ch\x20failed:','.com)','\x20images\x20to','e\x20final\x20de','g\x20cats\x0a•\x20i','get','Source:\x20','1.0.8','https://ww','right\x20now.','t\x20determin','length','h\x20term.','\x20a\x20search\x20','w.bing.com','Which\x20imag','turl','Result:\x20','for\x20messag','1880549LcHNlu','replace','\x20handler\x20e','4qMwwOk','ge\x20error','BasicHover','key','ble;\x20Bot/1','join','1eNhume','\x20cleanup\x20e','isArray','5201220LrPqeh','sourcePage','rror','bot',':\x20image\x20se','term.\x20Exam','725931mAOFQe','41465BUpSEq','add','startsWith','zed.','isCommand','198dMwdjQ','client',':\x20findStor','max','Image\x20sear','stination\x20','isNaN','nce\x20missin','Found\x20(no\x20','toLowerCas','12oUZgUW',':\x20botInsta','&tsc=Image','clear','img','104PfNkta','1785154lhLAsG','url'];_0x3e7e=function(){return _0x374fcf;};return _0x3e7e();}const _0x18720b=_0x4b25;(function(_0x2b006f,_0x25d3b4){const _0x41315f=_0x4b25,_0x56b925=_0x2b006f();while(!![]){try{const _0x5a0675=parseInt(_0x41315f(0x111))/(-0x11*0x125+0x165e+-0x2e8)*(-parseInt(_0x41315f(0x132))/(0x4cf+0x1*0x15db+0x4*-0x6aa))+parseInt(_0x41315f(0x14c))/(0x3f*-0x27+-0x1bc1+0x779*0x5)*(parseInt(_0x41315f(0x10b))/(0x1fdb+-0x2*0x48b+-0x19*0xe9))+parseInt(_0x41315f(0x11b))/(-0xe41*0x1+0x20d0+0x62e*-0x3)*(parseInt(_0x41315f(0x120))/(-0x6e4+0x1f4+0x4f6))+-parseInt(_0x41315f(0x130))/(0x12df+0x5ae*0x5+0x2f3e*-0x1)+parseInt(_0x41315f(0x12f))/(0x136*0xa+0x17*0x137+0x3*-0xd57)*(parseInt(_0x41315f(0x11a))/(-0xa*0x36f+-0xa*0x9b+0x286d))+-parseInt(_0x41315f(0x114))/(0x1f31+0x3b7*-0x3+-0x1402)+parseInt(_0x41315f(0x16b))/(0x63*-0x32+-0x1542*-0x1+-0x1e1*0x1)*(-parseInt(_0x41315f(0x12a))/(0x1099+-0x185*0xd+-0xa*-0x52));if(_0x5a0675===_0x25d3b4)break;else _0x56b925['push'](_0x56b925['shift']());}catch(_0x2b8a40){_0x56b925['push'](_0x56b925['shift']());}}}(_0x3e7e,0x8d374+-0x967d9+-0x8964a*-0x1));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{getBotJid}from'../utils/bot-state.js';import _0x258964 from'axios';export const name=_0x18720b(0x12e);export const version=_0x18720b(0x15f);export const priority=0x121b+0x2*0x3b9+0x1*-0x1983;function _0x4b25(_0x50aec1,_0x2c79b1){const _0x428327=_0x3e7e();return _0x4b25=function(_0x250249,_0x45c8d7){_0x250249=_0x250249-(0x2bd*0x7+0x149e+-0x26bf);let _0x38c6e0=_0x428327[_0x250249];return _0x38c6e0;},_0x4b25(_0x50aec1,_0x2c79b1);}let botInstance=null,respondedMsgIds=new Set();async function findStoredMatchFromFindings(_0x1a10ab=[]){const _0x66ae39=_0x18720b;try{const _0x35b3a6=await listSudo(),_0x36ba06=new Set(_0x35b3a6[_0x66ae39(0x13b)](String));for(const _0xba72c4 of _0x1a10ab){if(!_0xba72c4||typeof _0xba72c4[_0x66ae39(0x151)]!=='string')continue;const _0x553646=normalizeToJid(_0xba72c4[_0x66ae39(0x151)]);if(_0x553646&&_0x36ba06['has'](_0x553646))return _0x553646;if(_0x36ba06[_0x66ae39(0x145)](_0xba72c4[_0x66ae39(0x151)]))return _0xba72c4[_0x66ae39(0x151)];}return null;}catch(_0x88010b){return warn(name+(_0x66ae39(0x122)+'edMatch\x20er'+_0x66ae39(0x152))+(_0x88010b?.[_0x66ae39(0x157)]||_0x88010b)),null;}}function htmlUnescape(_0x2d2b67){const _0x4a6eb7=_0x18720b;if(!_0x2d2b67||typeof _0x2d2b67!=='string')return _0x2d2b67;return _0x2d2b67[_0x4a6eb7(0x16c)](/&quot;/g,'\x22')[_0x4a6eb7(0x16c)](/&#39;/g,'\x27')[_0x4a6eb7(0x16c)](/&amp;/g,'&')[_0x4a6eb7(0x16c)](/&lt;/g,'<')['replace'](/&gt;/g,'>')['replace'](/&nbsp;/g,'\x20');}function tryParseJsonSafe(_0x358368){const _0xd64a45=_0x18720b;if(!_0x358368||typeof _0x358368!=='string')return null;try{return JSON[_0xd64a45(0x13e)](_0x358368);}catch(_0x3effad){try{const _0xc88bbf=htmlUnescape(_0x358368);return JSON[_0xd64a45(0x13e)](_0xc88bbf);}catch(_0x2ac614){try{const _0xabb1f1=htmlUnescape(_0x358368)[_0xd64a45(0x16c)](/(['"])?([a-zA-Z0-9_]+)\1\s*:/g,_0xd64a45(0x13f))[_0xd64a45(0x16c)](/:\s*'([^']*)'/g,_0xd64a45(0x133));return JSON[_0xd64a45(0x13e)](_0xabb1f1);}catch(_0x3c284a){return null;}}}}async function searchBingNoCheerio(_0x1968b8,_0x38901a=-0x1*-0x22de+-0x1df2+-0x272*0x2){const _0x527d85=_0x18720b;try{const _0x5748b2=encodeURIComponent(_0x1968b8),_0x114c2a=_0x527d85(0x160)+_0x527d85(0x166)+_0x527d85(0x135)+'arch?q='+_0x5748b2+('&form=HDRS'+_0x527d85(0x13d)+_0x527d85(0x12c)+_0x527d85(0x10d)),_0x5319d8=await _0x258964[_0x527d85(0x15d)](_0x114c2a,{'headers':{'User-Agent':'Mozilla/5.'+_0x527d85(0x156)+_0x527d85(0x10f)+'.0;\x20+https'+_0x527d85(0x142)+_0x527d85(0x159)},'responseType':_0x527d85(0x134),'maxRedirects':0x5}),_0x1b9945=String(_0x5319d8[_0x527d85(0x13c)]||''),_0x531549=/ m=(?:"([^"]+)"|'([^']+)')/g,_0x52e69c=[];let _0xa056f2;while((_0xa056f2=_0x531549[_0x527d85(0x140)](_0x1b9945))&&_0x52e69c[_0x527d85(0x163)]<_0x38901a){const _0x978adf=_0xa056f2[-0x1*0x62f+0x14d5*0x1+-0xea5]||_0xa056f2[0x1d90*0x1+-0x1a53+-0x33b*0x1];if(!_0x978adf)continue;const _0x1cb311=htmlUnescape(_0x978adf),_0x53d2f8=tryParseJsonSafe(_0x1cb311);if(!_0x53d2f8)continue;const _0x1dcbca=_0x53d2f8['murl']||_0x53d2f8['m']||_0x53d2f8[_0x527d85(0x168)]||_0x53d2f8['p']||null;if(!_0x1dcbca)continue;_0x52e69c['push']({'url':_0x1dcbca,'thumb':_0x53d2f8[_0x527d85(0x168)]||null,'sourcePage':_0x53d2f8['p']||null,'title':_0x53d2f8['t']||null});}if(_0x52e69c[_0x527d85(0x163)]===-0x1b47*0x1+0x1db0+-0x269){const _0x3a4178=/<img[^>]+(?:data-src|src|data-thumb)=["']([^"']+)["'][^>]*>/g;while((_0xa056f2=_0x3a4178['exec'](_0x1b9945))&&_0x52e69c[_0x527d85(0x163)]<_0x38901a){const _0x54323a=_0xa056f2[-0x2020+-0x1f04+-0xca1*-0x5];_0x54323a&&String(_0x54323a)['startsWith'](_0x527d85(0x14e))&&_0x52e69c['push']({'url':_0x54323a,'thumb':_0x54323a,'sourcePage':null,'title':null});}}return _0x52e69c[_0x527d85(0x150)](0x1ab3+-0x1*0x1ddf+0x4*0xcb,_0x38901a);}catch(_0x10126b){throw _0x10126b;}}async function performImageSearch(_0x425a67,_0x49e498=0x1517+-0x7f*0x29+0x8*-0x17){const _0x366cc4=_0x18720b;try{const _0x5e6767=await searchBingNoCheerio(_0x425a67,_0x49e498);return _0x5e6767;}catch(_0x4f1670){throw new Error(_0x366cc4(0x124)+_0x366cc4(0x158)+'\x20'+(_0x4f1670?.[_0x366cc4(0x157)]||_0x4f1670));}}export async function initialize(_0xb7a0c2){const _0x904d79=_0x18720b;botInstance=_0xb7a0c2,info(name+(_0x904d79(0x13a)+_0x904d79(0x11e)));}export async function onMessage(_0x48276e){const _0x25de46=_0x18720b;try{if(!_0x48276e?.[_0x25de46(0x10e)]||!_0x48276e[_0x25de46(0x11f)])return;const _0x222458=_0x48276e['key']['id'];if(_0x222458&&respondedMsgIds[_0x25de46(0x145)](_0x222458))return;if(_0x222458)respondedMsgIds[_0x25de46(0x11c)](_0x222458);const _0x1d3569=(_0x48276e[_0x25de46(0x134)]||'')['trim']();if(!_0x1d3569[_0x25de46(0x129)+'e']()[_0x25de46(0x11d)]('img'))return;const _0x5cd2e6=_0x1d3569['split'](/\s+/),_0x2c951b=_0x5cd2e6[-0xf2f+0xb7d+-0x56*-0xb][_0x25de46(0x129)+'e']();if(_0x2c951b!==_0x25de46(0x12e))return;if(!botInstance)botInstance=_0x48276e[_0x25de46(0x117)]||_0x48276e[_0x25de46(0x121)];if(!botInstance){warn(name+(_0x25de46(0x12b)+_0x25de46(0x127)+'g'));return;}const _0x453bbf=getBotJid();let _0x2eb24c;if(_0x48276e[_0x25de46(0x10e)]['fromMe'])_0x2eb24c=_0x453bbf;else{const _0x511bc5=await isSudo(botInstance,_0x48276e)['catch'](()=>![]);if(!_0x511bc5)return;const {findings:_0x3c8b8c}=userJidFromCtx(_0x48276e),_0x2530e1=await findStoredMatchFromFindings(_0x3c8b8c);if(!_0x2530e1)return;_0x2eb24c=_0x2530e1;}if(!_0x2eb24c){warn(name+(':\x20Could\x20no'+_0x25de46(0x162)+_0x25de46(0x15b)+_0x25de46(0x125)+_0x25de46(0x16a)+'e.'));return;}let _0x462680=0xe2+0x2*0x673+-0xdc2,_0x22bef6=_0x5cd2e6[_0x25de46(0x150)](0x14b4+0x1b3d+-0x2ff0)[_0x25de46(0x110)]('\x20');if(_0x5cd2e6[_0x25de46(0x163)]>=-0x1381+-0x2234+-0x35b7*-0x1){const _0x510335=parseInt(_0x5cd2e6[-0x175a+0x7d*-0x41+-0x6e3*-0x8],-0x1c5+-0x140e+0xc1*0x1d);if(!Number[_0x25de46(0x126)](_0x510335)){_0x462680=Math['max'](0xe48+0x1dfc+-0x4eb*0x9,_0x510335);if(_0x462680>-0xb89+-0x1672+-0x1*-0x2201)_0x462680=0x7d*0x3e+-0x1f1*-0x7+-0x4df*0x9;_0x22bef6=_0x5cd2e6['slice'](-0x184*0x19+-0x1*-0x1537+0x10af)[_0x25de46(0x110)]('\x20');}else _0x462680=-0x3de*-0x3+0x29*0xc7+-0x2b73,_0x22bef6=_0x5cd2e6['slice'](0x4a1+-0x15b0+0x1110)[_0x25de46(0x110)]('\x20');}_0x22bef6=(_0x22bef6||'')['trim']();if(!_0x22bef6){await botInstance['sendMessag'+'e'](_0x2eb24c,{'text':_0x25de46(0x167)+_0x25de46(0x139)+_0x25de46(0x165)+_0x25de46(0x119)+_0x25de46(0x14a)+_0x25de46(0x15c)+'mg\x201\x20trees'+_0x25de46(0x146)+_0x25de46(0x154)});return;}try{await botInstance['sendMessag'+'e'](_0x2eb24c,{'text':_0x25de46(0x153)+_0x25de46(0x14b)+'\x20\x22'+_0x22bef6+(_0x25de46(0x14f)+'\x20')+_0x462680+_0x25de46(0x144)},{'quoted':_0x48276e['ms']});}catch(_0x1dc386){try{await botInstance[_0x25de46(0x14d)+'e'](_0x2eb24c,{'text':_0x25de46(0x153)+_0x25de46(0x14b)+'\x20\x22'+_0x22bef6+(_0x25de46(0x14f)+'\x20')+_0x462680+_0x25de46(0x144)});}catch(_0x1b5479){}}let _0x151348;try{_0x151348=await performImageSearch(_0x22bef6,Math[_0x25de46(0x123)](-0x1d2a*0x1+-0xacb+0x27f6,_0x462680));}catch(_0x315478){error(_0x315478,name+(_0x25de46(0x118)+_0x25de46(0x138)+'d')),await botInstance[_0x25de46(0x14d)+'e'](_0x2eb24c,{'text':_0x25de46(0x124)+_0x25de46(0x143)+_0x25de46(0x161)});return;}if(!Array[_0x25de46(0x113)](_0x151348)||_0x151348[_0x25de46(0x163)]===0x10a3+-0x1b6b+0xac8){await botInstance['sendMessag'+'e'](_0x2eb24c,{'text':_0x25de46(0x149)+_0x25de46(0x147)+'your\x20searc'+_0x25de46(0x164)});return;}const _0x5d7e54=_0x151348[_0x25de46(0x150)](-0x401*-0x4+0x2f6*0x7+0x1*-0x24be,_0x462680);for(const _0x5ae6e0 of _0x5d7e54){try{_0x5ae6e0[_0x25de46(0x131)]&&String(_0x5ae6e0[_0x25de46(0x131)])[_0x25de46(0x11d)](_0x25de46(0x14e))?await botInstance[_0x25de46(0x14d)+'e'](_0x2eb24c,{'image':{'url':_0x5ae6e0[_0x25de46(0x131)]},'caption':_0x25de46(0x169)+_0x22bef6},{'quoted':_0x48276e['ms']}):await botInstance['sendMessag'+'e'](_0x2eb24c,{'text':_0x25de46(0x128)+_0x25de46(0x155)+'):\x20'+(_0x5ae6e0[_0x25de46(0x115)]||_0x5ae6e0[_0x25de46(0x137)]||'unknown')});}catch(_0x71f89){error(_0x71f89,name+(':\x20send\x20ima'+_0x25de46(0x10c)));if(_0x5ae6e0[_0x25de46(0x115)])try{await botInstance['sendMessag'+'e'](_0x2eb24c,{'text':_0x25de46(0x15e)+_0x5ae6e0[_0x25de46(0x115)]});}catch(_0x480999){}}}info(name+':\x20sent\x20'+_0x5d7e54[_0x25de46(0x163)]+(_0x25de46(0x15a)+'\x20')+_0x2eb24c);if(respondedMsgIds[_0x25de46(0x141)]>0x145*0xd+0x1*-0x25a9+0x28b0){const _0x5ca9c3=Array[_0x25de46(0x148)](respondedMsgIds);respondedMsgIds=new Set(_0x5ca9c3['slice'](-(-0x3*0xa65+0xf3f+-0x938*-0x3)));}}catch(_0x20f08c){error(_0x20f08c,name+(_0x25de46(0x10a)+_0x25de46(0x116)));}}export async function cleanup(){const _0x2b1783=_0x18720b;try{botInstance=null,respondedMsgIds[_0x2b1783(0x12d)](),info(name+(_0x2b1783(0x136)+'p'));}catch(_0x2b2acf){warn(name+(_0x2b1783(0x112)+'rror:\x20')+(_0x2b2acf?.[_0x2b1783(0x157)]||_0x2b2acf));}}