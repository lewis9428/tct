const _0x24f42a=_0x4ea9;(function(_0x7f4ef8,_0x49d23d){const _0x42bfe1=_0x4ea9,_0x2bf16a=_0x7f4ef8();while(!![]){try{const _0x36f600=-parseInt(_0x42bfe1(0x1ff))/(-0x15a7+0x2*0x59f+0x1f*0x56)*(-parseInt(_0x42bfe1(0x193))/(0x1288+-0x1d52+0xacc))+-parseInt(_0x42bfe1(0x1ed))/(0x2275+-0x1389+-0xee9*0x1)*(-parseInt(_0x42bfe1(0x1a4))/(0x4*0x989+0x31*0x1e+-0x2bde))+-parseInt(_0x42bfe1(0x1fd))/(-0x1*-0x1b38+-0x107*0x26+-0x1b1*-0x7)+-parseInt(_0x42bfe1(0x1e9))/(-0x1*0x1f0a+0x1*-0x1b35+0x3a45)+parseInt(_0x42bfe1(0x190))/(-0xc5c+-0x166d*-0x1+-0xa0a)*(-parseInt(_0x42bfe1(0x1da))/(-0x1*-0x1573+-0xcb*0x18+-0x263))+parseInt(_0x42bfe1(0x1b2))/(-0x223f+-0x46+0x228e)*(parseInt(_0x42bfe1(0x22b))/(-0x7*-0x272+-0xe*-0x136+-0x2208))+-parseInt(_0x42bfe1(0x22e))/(-0x1f7e+-0x1ee+0xd*0x293);if(_0x36f600===_0x49d23d)break;else _0x2bf16a['push'](_0x2bf16a['shift']());}catch(_0x25a346){_0x2bf16a['push'](_0x2bf16a['shift']());}}}(_0x28f1,0x2ba75+-0x193809*0x1+0x2453ca));import{info,warn,error}from'../utils/logger.js';import{isSudo,userJidFromCtx,listSudo,normalizeToJid}from'../utils/sudo.js';import{isadmin}from'../utils/isadmin.js';import{getBotJid}from'../utils/bot-state.js';import{Readable}from'stream';import _0x57ace1 from'fs/promises';import _0x23abc6 from'os';import _0x5b6f8e from'path';import _0x453971 from'crypto';export const name=_0x24f42a(0x1be);export const version=_0x24f42a(0x20a);export const priority=0x1*0x22fa+-0x25fd+-0xb*-0x47;export const commands=[_0x24f42a(0x1be),'s','toimage',_0x24f42a(0x1e8)];let botInstance=null,respondedMsgIds=new Set(),_baileysModule=null,_sharp=null,_ffmpegInstaller=null,_fluentFfmpeg=null;async function getBaileysModule(){const _0x199111=_0x24f42a;if(_baileysModule)return _baileysModule;try{return _baileysModule=await import('@whiskeysockets/baileys'),_baileysModule;}catch(_0x561a84){throw new Error('Failed\x20to\x20'+_0x199111(0x22a)+_0x199111(0x21e)+_0x199111(0x18b)+_0x561a84[_0x199111(0x1aa)]);}}async function getSharp(){const _0x3a1673=_0x24f42a;if(_sharp)return _sharp;try{const _0x5da91f=await import('sharp');return _sharp=_0x5da91f['default']||_0x5da91f,_sharp;}catch(_0x5107a1){throw new Error('Failed\x20to\x20'+'load\x20sharp'+':\x20'+_0x5107a1[_0x3a1673(0x1aa)]);}}async function getFfmpeg(){const _0x5e0819=_0x24f42a;if(_ffmpegInstaller&&_fluentFfmpeg)return{'ffmpegPath':_ffmpegInstaller[_0x5e0819(0x236)],'ffmpegLib':_fluentFfmpeg};try{const _0x2919d6=await import('@ffmpeg-installer/ffmpeg'),_0x3e0c08=await import('fluent-ffmpeg');_ffmpegInstaller=_0x2919d6[_0x5e0819(0x213)]||_0x2919d6,_fluentFfmpeg=_0x3e0c08[_0x5e0819(0x213)]||_0x3e0c08;try{_fluentFfmpeg[_0x5e0819(0x17c)+_0x5e0819(0x1de)](_ffmpegInstaller[_0x5e0819(0x236)]);}catch(_0x526484){}return{'ffmpegPath':_ffmpegInstaller[_0x5e0819(0x236)],'ffmpegLib':_fluentFfmpeg};}catch(_0x2b6f6a){throw new Error(_0x5e0819(0x19c)+_0x5e0819(0x1c3)+'g\x20tools:\x20'+_0x2b6f6a[_0x5e0819(0x1aa)]);}}async function streamToBuffer(_0xd8d31d){const _0x5cd114=_0x24f42a;if(!_0xd8d31d)return Buffer[_0x5cd114(0x1db)](-0x165d+0x1*-0x1b84+0x31e1);if(typeof _0xd8d31d[Symbol[_0x5cd114(0x22f)+_0x5cd114(0x234)]]===_0x5cd114(0x235)){const _0x10ed02=[];for await(const _0x76c8cc of _0xd8d31d){_0x10ed02[_0x5cd114(0x1fc)](Buffer['isBuffer'](_0x76c8cc)?_0x76c8cc:Buffer['from'](_0x76c8cc));}return Buffer[_0x5cd114(0x203)](_0x10ed02);}if(typeof _0xd8d31d['on']===_0x5cd114(0x235))return new Promise((_0x4fc198,_0x11cd49)=>{const _0x552bc0=_0x5cd114,_0x134dc7=[];_0xd8d31d['on'](_0x552bc0(0x20b),_0x5b305b=>_0x134dc7[_0x552bc0(0x1fc)](Buffer[_0x552bc0(0x212)](_0x5b305b)?_0x5b305b:Buffer[_0x552bc0(0x1f6)](_0x5b305b))),_0xd8d31d['on'](_0x552bc0(0x185),()=>_0x4fc198(Buffer[_0x552bc0(0x203)](_0x134dc7))),_0xd8d31d['on'](_0x552bc0(0x182),_0x11cd49);});return Buffer['from'](await _0xd8d31d);}const getQuotedMessage=_0x1fae90=>{const _0x3da0bb=_0x24f42a;return _0x1fae90['message']?.['extendedTe'+'xtMessage']?.[_0x3da0bb(0x20e)+'o']?.['quotedMess'+_0x3da0bb(0x1ae)]||_0x1fae90[_0x3da0bb(0x1bf)]||null;};async function findStoredMatchFromFindings(_0x3f694e=[]){const _0x2098e8=_0x24f42a;try{const _0x435282=await listSudo(),_0x3203e3=new Set(_0x435282[_0x2098e8(0x201)](String));for(const _0x311760 of _0x3f694e){if(!_0x311760||typeof _0x311760[_0x2098e8(0x18c)]!==_0x2098e8(0x210))continue;const _0xeb9669=normalizeToJid(_0x311760[_0x2098e8(0x18c)]);if(_0xeb9669&&_0x3203e3[_0x2098e8(0x202)](_0xeb9669))return _0xeb9669;if(_0x3203e3[_0x2098e8(0x202)](_0x311760['jid']))return _0x311760[_0x2098e8(0x18c)];}return null;}catch(_0x4f9963){return warn('['+name+(_0x2098e8(0x1f7)+'edMatch\x20er'+_0x2098e8(0x18f))+(_0x4f9963?.[_0x2098e8(0x1aa)]||_0x4f9963)),null;}}function tmpFilename(_0x27130b=''){const _0x8529e1=_0x24f42a,_0xf700c4=_0x453971[_0x8529e1(0x229)+'s'](0x1785+0x2546+-0x3cc3)[_0x8529e1(0x1cc)](_0x8529e1(0x1df));return _0x5b6f8e[_0x8529e1(0x198)](_0x23abc6[_0x8529e1(0x1c4)](),_0x8529e1(0x219)+_0xf700c4+(_0x27130b?'.'+_0x27130b:''));}export async function initialize(_0x50d041){const _0x3792c8=_0x24f42a;botInstance=_0x50d041,info('['+name+(_0x3792c8(0x1ab)+_0x3792c8(0x1cf)+_0x3792c8(0x1e3)));}export async function cleanup(){const _0x27d6fe=_0x24f42a;botInstance=null,respondedMsgIds[_0x27d6fe(0x17d)](),info('['+name+(']\x20cleaned\x20'+'up'));}async function imageBufferToWebp(_0x55c083,{pack:pack=_0x24f42a(0x21d),author:author=_0x24f42a(0x21d),quality:quality=-0x108e+0x9*0x427+0x1d*-0xb5}={}){const _0x4cb6ce=_0x24f42a,_0x557477=await getSharp(),_0x44309c=_0x557477(_0x55c083,{'animated':![]})[_0x4cb6ce(0x1b9)]()[_0x4cb6ce(0x1f9)](0x1f18+0x2b3*-0x1+-0x1d*0xe9,0x1b*0x8f+-0x5*0x193+-0x536,{'fit':_0x4cb6ce(0x1f1),'position':'center'})[_0x4cb6ce(0x23a)]({'quality':typeof quality===_0x4cb6ce(0x1d9)?quality:-0x794+0x1*-0x6a7+0xe8b}),_0x705b95=await _0x44309c['toBuffer']();return _0x705b95;}async function videoBufferToWebp(_0x53ca8b,{maxDurationSec:maxDurationSec=0x11a*-0x1d+-0x10b5+-0xd7*-0x3a,quality:quality=0x1af8*-0x1+-0x30d*0x1+0x1e50}={}){const _0x4192d0=_0x24f42a,{ffmpegLib:_0x145ceb}=await getFfmpeg(),_0x24f0b4=_0x145ceb,_0x5ea780=tmpFilename(_0x4192d0(0x21b)),_0x3ee93d=tmpFilename(_0x4192d0(0x23a));try{await _0x57ace1['writeFile'](_0x5ea780,_0x53ca8b);const _0x37528b=await new Promise((_0x32c6e,_0x1e8395)=>{const _0x4ca30e=_0x4192d0;_0x24f0b4[_0x4ca30e(0x1ba)](_0x5ea780,(_0xa2bb51,_0x17e6d3)=>{const _0x355df6=_0x4ca30e;if(_0xa2bb51)return _0x1e8395(_0xa2bb51);const _0x638dcb=_0x17e6d3?.[_0x355df6(0x17f)]?.[_0x355df6(0x216)]||-0x1*0x128f+0x1*0x6d8+-0xbb7*-0x1;_0x32c6e(Number(_0x638dcb)||0x1*0x18fa+-0x7*-0xfb+0xa9d*-0x3);});});if(_0x37528b>maxDurationSec)throw new Error(_0x4192d0(0x209)+_0x4192d0(0x1c0)+Math[_0x4192d0(0x1a8)](_0x37528b)+(_0x4192d0(0x1f4)+_0x4192d0(0x22d))+maxDurationSec+'s.');await new Promise((_0x343945,_0x18717d)=>{const _0xce4cd9=_0x4192d0;_0x24f0b4(_0x5ea780)['outputOpti'+_0xce4cd9(0x233)](['-vcodec',_0xce4cd9(0x211),'-vf','scale=512:'+_0xce4cd9(0x206)+'original_a'+'spect_rati'+_0xce4cd9(0x1a2)+_0xce4cd9(0x1b4)+_0xce4cd9(0x19f)+_0xce4cd9(0x1d0)+'15',_0xce4cd9(0x181),'0',_0xce4cd9(0x1f0),'0',_0xce4cd9(0x1b0),_0xce4cd9(0x213),'-an',_0xce4cd9(0x227),'0'])[_0xce4cd9(0x220)+'ons']([_0xce4cd9(0x1a6),String(Math[_0xce4cd9(0x1b6)](-0x134e+0x138+-0x1*-0x1220,Math[_0xce4cd9(0x191)](0x268*-0x1+0x137a+0x131*-0xe,quality)))])[_0xce4cd9(0x1ea)](_0x3ee93d)['on'](_0xce4cd9(0x182),_0x2d215c=>{const _0x464014=_0xce4cd9;_0x18717d(new Error('ffmpeg\x20web'+'p\x20conversi'+'on\x20failed:'+'\x20'+(_0x2d215c?.[_0x464014(0x1aa)]||_0x2d215c)));})['on'](_0xce4cd9(0x185),()=>_0x343945())['run']();});const _0x2732ba=await _0x57ace1[_0x4192d0(0x1ee)](_0x3ee93d);if(!_0x2732ba||_0x2732ba[_0x4192d0(0x180)]===0x1f1b*-0x1+-0x13f1*-0x1+-0x1*-0xb2a)throw new Error('ffmpeg\x20pro'+'duced\x20empt'+_0x4192d0(0x17e)+'e');return _0x2732ba;}finally{try{await _0x57ace1['unlink'](_0x5ea780);}catch(_0x1c3785){}try{await _0x57ace1['unlink'](_0x3ee93d);}catch(_0x5d036b){}}}function _0x28f1(){const _0x1fa4fc=['iled','-preset','\x20video\x20con','3717PRziqq','age.',',crop=512:','text','max','\x20image\x20or\x20','ffmpeg\x20pro','rotate','ffprobe','hile\x20proce','videoMessa','isAnimated','sticker','quoted','long\x20(','-movflags','eply\x20to\x20a\x20','load\x20ffmpe','tmpdir','uffer\x20obta','th\x20the\x20com','ata\x20extrac','\x20image\x20con','-vf','writeFile','ticker:\x20','toString','or\x20message','jpeg','zed\x20succes','=rgba,fps=','No\x20media\x20b',']\x20failed\x20t','+faststart','convert\x20st','run','ffmpeg\x20web','error:\x20','ntentFromM','number','120JqezjS','alloc','seconds','essage','ath','hex','endsWith','No\x20image\x20d','stead.','sfully.','image','original_a','scale=512:','ted\x20from\x20s','tovideo','2788392MQExDB','output',']\x20onMessag','ideo.','24bHikHy','readFile','t\x20to\x20an\x20im','-loop','cover','o\x20convert\x20','trim','s).\x20Maximu','yuv420p','from',']\x20findStor','ticker','resize','an\x20animate','essage\x20not','push','2966435JZgbYi','add','13mQokfa','5\x20seconds\x20','map','has','concat','re\x20message','@g.us','512:force_','sage','e\x20top-leve','Video\x20too\x20','1.2.3','data','sticker\x20to','send\x20failu','contextInf','for\x20animat','string','libwebp','isBuffer','default','toBuffer','version\x20fa','duration','isCommand','ℹ️\x20Please\x20r','sticker-','eply\x20to\x20an','mp4','stickerMes','tct','keysockets','.tovideo`\x20','outputOpti','l\x20error:\x20','-an','catch','\x20available','An\x20unexpec','icker\x20buff','-vsync','to\x20convert','randomByte','load\x20@whis','28420rekxsY','send\x20it\x20wi','m\x20is\x20','16242259pCLozE','asyncItera','occurred\x20w','[sticker]\x20','failed\x20to\x20','ons','tor','function','path','d\x20sticker.','downloadCo','client','webp','sendMessag','setFfmpegP','clear','y\x20webp\x20fil','format','length','-lossless','error','ined\x20from\x20','bot','end','Sticker\x20to','remoteJid','spect_rati','delete','No\x20video\x20d','/baileys:\x20','jid','ed\x20sticker','includes','ror:\x20','57617gyMjjx','min','png','248106MxARKj','y\x20mp4\x20file','fromMe','❌\x20Failed\x20t','unlink','join','ideo','\x20*animated','key','Failed\x20to\x20','\x20too\x20long.','s/baileys','512,format','ℹ️\x20This\x20is\x20',']\x20Handler\x20','o=increase','-pix_fmt','389212ztrhsx','led','-q:v','\x20request.','round','o\x20create\x20s','message',']\x20initiali','produce\x20st','p->mp4\x20fai','age'];_0x28f1=function(){return _0x1fa4fc;};return _0x28f1();}async function webpToMp4(_0xa5973){const _0x515162=_0x24f42a,{ffmpegLib:_0x27fe71}=await getFfmpeg(),_0x5cec39=_0x27fe71,_0xa889af=tmpFilename('webp'),_0xf9dd4c=tmpFilename(_0x515162(0x21b));try{await _0x57ace1[_0x515162(0x1ca)](_0xa889af,_0xa5973),await new Promise((_0x44582c,_0x1f0792)=>{const _0x49dd16=_0x515162;_0x5cec39(_0xa889af)[_0x49dd16(0x220)+_0x49dd16(0x233)]([_0x49dd16(0x1c1),_0x49dd16(0x1d3),_0x49dd16(0x1a3),_0x49dd16(0x1f5),_0x49dd16(0x1c9),_0x49dd16(0x1e6)+_0x49dd16(0x206)+_0x49dd16(0x1e5)+_0x49dd16(0x188)+_0x49dd16(0x1a2)+_0x49dd16(0x1b4)+'512',_0x49dd16(0x222)])[_0x49dd16(0x17f)](_0x49dd16(0x21b))[_0x49dd16(0x1ea)](_0xf9dd4c)['on'](_0x49dd16(0x182),_0x3476d8=>_0x1f0792(new Error(_0x49dd16(0x1d6)+_0x49dd16(0x1ad)+'led:\x20'+(_0x3476d8?.[_0x49dd16(0x1aa)]||_0x3476d8))))['on'](_0x49dd16(0x185),()=>_0x44582c())[_0x49dd16(0x1d5)]();});const _0x2d9b2=await _0x57ace1[_0x515162(0x1ee)](_0xf9dd4c);if(!_0x2d9b2||_0x2d9b2[_0x515162(0x180)]===-0x18d2+-0x1abd+0x338f)throw new Error(_0x515162(0x1b8)+'duced\x20empt'+_0x515162(0x194));return _0x2d9b2;}finally{try{await _0x57ace1[_0x515162(0x197)](_0xa889af);}catch(_0x5f5b1d){}try{await _0x57ace1['unlink'](_0xf9dd4c);}catch(_0x41a8a9){}}}async function webpBufferToImage(_0x76f158,_0x529df5=_0x24f42a(0x192)){const _0x1e171a=_0x24f42a,_0xf5ae75=await getSharp(),_0x507f4f=_0xf5ae75(_0x76f158,{'animated':![]});if(_0x529df5===_0x1e171a(0x1ce)||_0x529df5==='jpg')return _0x507f4f[_0x1e171a(0x1ce)]({'quality':0x5a})[_0x1e171a(0x214)]();return _0x507f4f[_0x1e171a(0x192)]()['toBuffer']();}export async function onMessage(_0x32bd6a){const _0x2b81d7=_0x24f42a;try{if(!_0x32bd6a||!_0x32bd6a[_0x2b81d7(0x19b)]||!_0x32bd6a[_0x2b81d7(0x217)])return;if(!botInstance)botInstance=_0x32bd6a[_0x2b81d7(0x184)]||_0x32bd6a[_0x2b81d7(0x239)]||_0x32bd6a['_bot']||null;const _0x30bc8d=_0x32bd6a[_0x2b81d7(0x19b)]['id'];if(_0x30bc8d&&respondedMsgIds[_0x2b81d7(0x202)](_0x30bc8d))return;_0x30bc8d&&(respondedMsgIds[_0x2b81d7(0x1fe)](_0x30bc8d),setTimeout(()=>respondedMsgIds[_0x2b81d7(0x189)](_0x30bc8d),0x15df*-0xa+-0xbfff*0x1+0x20fe5));const _0xe08657=(_0x32bd6a[_0x2b81d7(0x1b5)]||'')[_0x2b81d7(0x1f3)](),[_0x268326,..._0x14d47f]=_0xe08657['split'](/\s+/),_0x332c81=(_0x268326||'')['toLowerCas'+'e']();if(!commands[_0x2b81d7(0x18e)](_0x332c81))return;const _0x5677da=_0x32bd6a['key'][_0x2b81d7(0x187)]||_0x32bd6a[_0x2b81d7(0x187)]||'',_0x215878=String(_0x5677da)[_0x2b81d7(0x1e0)](_0x2b81d7(0x205)),_0x19c51d=getBotJid();let _0x2f4b93=_0x5677da;const _0x4e6b96=Boolean(_0x32bd6a[_0x2b81d7(0x19b)]?.[_0x2b81d7(0x195)]);let _0x2780ba=_0x4e6b96;if(_0x4e6b96&&_0x19c51d)_0x2f4b93=_0x19c51d;if(!_0x2780ba){if(_0x215878)_0x2780ba=await isadmin(botInstance,_0x32bd6a)[_0x2b81d7(0x223)](()=>![]);else{const _0x36028a=await isSudo(botInstance,_0x32bd6a)[_0x2b81d7(0x223)](()=>![]);if(_0x36028a){const {findings:_0x3e0721}=userJidFromCtx(_0x32bd6a),_0x334498=await findStoredMatchFromFindings(_0x3e0721);_0x334498&&(_0x2780ba=!![],_0x2f4b93=_0x334498);}}}if(!_0x2780ba)return;const _0x35aac1=_0x14d47f[_0x2b81d7(0x198)]('\x20');try{switch(_0x332c81){case _0x2b81d7(0x1be):case's':await handleStickerCreation(_0x2f4b93,_0x35aac1,_0x32bd6a);break;case'toimage':await handleStickerToImage(_0x2f4b93,_0x32bd6a);break;case _0x2b81d7(0x1e8):await handleStickerToVideo(_0x2f4b93,_0x32bd6a);break;}}catch(_0x12ac10){error(_0x12ac10,'['+name+(_0x2b81d7(0x1a1)+_0x2b81d7(0x1d7))+(_0x12ac10?.[_0x2b81d7(0x1aa)]||_0x12ac10));try{await botInstance[_0x2b81d7(0x23b)+'e'](_0x2f4b93,{'text':_0x2b81d7(0x225)+'ted\x20error\x20'+_0x2b81d7(0x230)+_0x2b81d7(0x1bb)+'ssing\x20your'+_0x2b81d7(0x1a7)},{'quoted':_0x32bd6a['ms']});}catch(_0x5df8b9){error(_0x5df8b9,'['+name+(_0x2b81d7(0x1d2)+'o\x20send\x20err'+_0x2b81d7(0x1cd)));}}}catch(_0x422117){error(_0x422117,'['+name+(_0x2b81d7(0x1eb)+_0x2b81d7(0x208)+_0x2b81d7(0x221))+(_0x422117?.[_0x2b81d7(0x1aa)]||_0x422117));}}async function handleStickerCreation(_0x142627,_0x4b54e2,_0x5e3d0d){const _0x28236e=_0x24f42a,_0x340311=getQuotedMessage(_0x5e3d0d),_0x56bfac=_0x340311?.['imageMessa'+'ge']||_0x5e3d0d[_0x28236e(0x1aa)]?.['imageMessa'+'ge'],_0x323197=_0x340311?.[_0x28236e(0x1bc)+'ge']||_0x5e3d0d['message']?.[_0x28236e(0x1bc)+'ge'];if(!_0x56bfac&&!_0x323197)return botInstance[_0x28236e(0x23b)+'e'](_0x142627,{'text':_0x28236e(0x218)+_0x28236e(0x21a)+_0x28236e(0x1b7)+'video,\x20or\x20'+_0x28236e(0x22c)+_0x28236e(0x1c6)+'mand.'},{'quoted':_0x5e3d0d['ms']});const _0x4333fa=(_0x4b54e2||'')['trim']()||_0x28236e(0x21d),_0x2e163b=_0x28236e(0x21d);try{const _0x1c9659=await getBaileysModule(),_0xbeb96a=_0x1c9659['downloadCo'+_0x28236e(0x1d8)+_0x28236e(0x1dd)]||_0x1c9659[_0x28236e(0x213)]?.[_0x28236e(0x238)+_0x28236e(0x1d8)+_0x28236e(0x1dd)];if(!_0xbeb96a)throw new Error(_0x28236e(0x238)+'ntentFromM'+_0x28236e(0x1fb)+_0x28236e(0x224)+'\x20from\x20@whi'+'skeysocket'+_0x28236e(0x19e));let _0x11c9ba,_0x59b5e9=![];if(_0x56bfac){const _0x5016d6=await _0xbeb96a(_0x56bfac,_0x28236e(0x1e4));_0x11c9ba=await streamToBuffer(_0x5016d6);}else{if(_0x323197){if((_0x323197[_0x28236e(0x1dc)]||-0x717+-0x997+0x10ae)>0x3d7*0x2+0x238*-0x1+-0x567)return botInstance[_0x28236e(0x23b)+'e'](_0x142627,{'text':'❌\x20Video\x20is'+_0x28236e(0x19d)+'\x20Maximum\x201'+_0x28236e(0x200)+_0x28236e(0x20f)+_0x28236e(0x18d)+'s.'},{'quoted':_0x5e3d0d['ms']});const _0x42869f=await _0xbeb96a(_0x323197,'video');_0x11c9ba=await streamToBuffer(_0x42869f),_0x59b5e9=!![];}}if(!_0x11c9ba||_0x11c9ba[_0x28236e(0x180)]===-0x4*0x745+-0x99e+0x26b2)throw new Error(_0x28236e(0x1d1)+_0x28236e(0x1c5)+_0x28236e(0x183)+_0x28236e(0x1aa));let _0x2b12a2;!_0x59b5e9?_0x2b12a2=await imageBufferToWebp(_0x11c9ba,{'pack':_0x2e163b,'author':_0x4333fa,'quality':0x50}):_0x2b12a2=await videoBufferToWebp(_0x11c9ba,{'maxDurationSec':0xf,'quality':0x4b});if(!_0x2b12a2||_0x2b12a2['length']===-0x2c3*-0xb+-0x1dac+0x1*-0xb5)throw new Error(_0x28236e(0x19c)+_0x28236e(0x1ac)+_0x28236e(0x226)+'er');await botInstance[_0x28236e(0x23b)+'e'](_0x142627,{'sticker':_0x2b12a2},{'quoted':_0x5e3d0d['ms']});}catch(_0x51e4a9){error(_0x51e4a9,_0x28236e(0x231)+'Sticker\x20cr'+'eation\x20fai'+_0x28236e(0x1a5));try{await botInstance['sendMessag'+'e'](_0x142627,{'text':_0x28236e(0x196)+_0x28236e(0x1a9)+_0x28236e(0x1cb)+(_0x51e4a9?.['message']||_0x51e4a9)},{'quoted':_0x5e3d0d['ms']});}catch(_0x41dad4){error(_0x41dad4,_0x28236e(0x231)+'failed\x20to\x20'+_0x28236e(0x20d)+_0x28236e(0x204));}}}function _0x4ea9(_0xb7ff9c,_0x287532){const _0x172f14=_0x28f1();return _0x4ea9=function(_0x21736d,_0x3093f0){_0x21736d=_0x21736d-(-0x786+0x25c0+-0x1cbe);let _0x5a610e=_0x172f14[_0x21736d];return _0x5a610e;},_0x4ea9(_0xb7ff9c,_0x287532);}async function handleStickerToImage(_0x4b1be5,_0x55c986){const _0x2ff8a3=_0x24f42a,_0x3463fe=getQuotedMessage(_0x55c986);if(!_0x3463fe?.[_0x2ff8a3(0x21c)+_0x2ff8a3(0x207)])return botInstance['sendMessag'+'e'](_0x4b1be5,{'text':_0x2ff8a3(0x218)+_0x2ff8a3(0x1c2)+_0x2ff8a3(0x20c)+'\x20convert\x20i'+_0x2ff8a3(0x1ef)+_0x2ff8a3(0x1b3)},{'quoted':_0x55c986['ms']});if(_0x3463fe['stickerMes'+_0x2ff8a3(0x207)][_0x2ff8a3(0x1bd)])return botInstance[_0x2ff8a3(0x23b)+'e'](_0x4b1be5,{'text':_0x2ff8a3(0x1a0)+_0x2ff8a3(0x1fa)+_0x2ff8a3(0x237)+'\x20Use\x20the\x20`'+_0x2ff8a3(0x21f)+'command\x20in'+_0x2ff8a3(0x1e2)},{'quoted':_0x55c986['ms']});try{const _0x1f6392=await getBaileysModule(),_0x164fe4=_0x1f6392[_0x2ff8a3(0x238)+'ntentFromM'+_0x2ff8a3(0x1dd)]||_0x1f6392['default']?.['downloadCo'+_0x2ff8a3(0x1d8)+'essage'];if(!_0x164fe4)throw new Error(_0x2ff8a3(0x238)+'ntentFromM'+_0x2ff8a3(0x1fb)+_0x2ff8a3(0x224));const _0x29cd6a=await _0x164fe4(_0x3463fe['stickerMes'+_0x2ff8a3(0x207)],_0x2ff8a3(0x1e4)),_0x17c9a1=await streamToBuffer(_0x29cd6a);if(!_0x17c9a1||_0x17c9a1[_0x2ff8a3(0x180)]===-0x53d+-0xbfc*0x1+0x1139)throw new Error(_0x2ff8a3(0x1e1)+_0x2ff8a3(0x1c7)+'ted\x20from\x20s'+_0x2ff8a3(0x1f8));const _0xe8ae03=await webpBufferToImage(_0x17c9a1,_0x2ff8a3(0x192));await botInstance[_0x2ff8a3(0x23b)+'e'](_0x4b1be5,{'image':_0xe8ae03,'caption':'tct'},{'quoted':_0x55c986['ms']});}catch(_0x4672a2){error(_0x4672a2,_0x2ff8a3(0x231)+'Sticker\x20to'+_0x2ff8a3(0x1c8)+_0x2ff8a3(0x215)+_0x2ff8a3(0x1af));try{await botInstance[_0x2ff8a3(0x23b)+'e'](_0x4b1be5,{'text':_0x2ff8a3(0x196)+_0x2ff8a3(0x1f2)+_0x2ff8a3(0x20c)+'\x20image:\x20'+(_0x4672a2?.[_0x2ff8a3(0x1aa)]||_0x4672a2)},{'quoted':_0x55c986['ms']});}catch(_0x397d47){error(_0x397d47,_0x2ff8a3(0x231)+_0x2ff8a3(0x232)+_0x2ff8a3(0x20d)+'re\x20message');}}}async function handleStickerToVideo(_0x27cdc6,_0x21276e){const _0x232469=_0x24f42a,_0x1ac667=getQuotedMessage(_0x21276e);if(!_0x1ac667?.[_0x232469(0x21c)+_0x232469(0x207)]||!_0x1ac667[_0x232469(0x21c)+_0x232469(0x207)]['isAnimated'])return botInstance['sendMessag'+'e'](_0x27cdc6,{'text':_0x232469(0x218)+'eply\x20to\x20an'+_0x232469(0x19a)+'*\x20sticker\x20'+_0x232469(0x228)+'\x20it\x20to\x20a\x20v'+_0x232469(0x1ec)},{'quoted':_0x21276e['ms']});try{const _0xc17a48=await getBaileysModule(),_0x734dfe=_0xc17a48[_0x232469(0x238)+_0x232469(0x1d8)+_0x232469(0x1dd)]||_0xc17a48['default']?.['downloadCo'+_0x232469(0x1d8)+_0x232469(0x1dd)];if(!_0x734dfe)throw new Error(_0x232469(0x238)+_0x232469(0x1d8)+_0x232469(0x1fb)+_0x232469(0x224));let _0x5dbad5,_0x36714f;try{_0x5dbad5=await _0x734dfe(_0x1ac667[_0x232469(0x21c)+_0x232469(0x207)],'video'),_0x36714f=await streamToBuffer(_0x5dbad5);}catch(_0x4f1937){_0x5dbad5=await _0x734dfe(_0x1ac667[_0x232469(0x21c)+'sage'],_0x232469(0x1e4)),_0x36714f=await streamToBuffer(_0x5dbad5);}if(!_0x36714f||_0x36714f['length']===-0xd93*0x2+-0x16+-0x48a*-0x6)throw new Error(_0x232469(0x18a)+_0x232469(0x1c7)+_0x232469(0x1e7)+_0x232469(0x1f8));const _0x175bcc=await webpToMp4(_0x36714f);if(!_0x175bcc||_0x175bcc[_0x232469(0x180)]===0x2275+0x230d+0xd9*-0x52)throw new Error(_0x232469(0x19c)+_0x232469(0x1d4)+'icker\x20to\x20v'+_0x232469(0x199));await botInstance[_0x232469(0x23b)+'e'](_0x27cdc6,{'video':_0x175bcc,'caption':_0x232469(0x21d)},{'quoted':_0x21276e['ms']});}catch(_0x352309){error(_0x352309,'[sticker]\x20'+_0x232469(0x186)+_0x232469(0x1b1)+_0x232469(0x215)+_0x232469(0x1af));try{await botInstance[_0x232469(0x23b)+'e'](_0x27cdc6,{'text':'❌\x20Failed\x20t'+_0x232469(0x1f2)+_0x232469(0x20c)+'\x20video:\x20'+(_0x352309?.[_0x232469(0x1aa)]||_0x352309)},{'quoted':_0x21276e['ms']});}catch(_0x5938da){error(_0x5938da,_0x232469(0x231)+_0x232469(0x232)+_0x232469(0x20d)+_0x232469(0x204));}}}